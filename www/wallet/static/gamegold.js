!function(t){var e={};function i(r){var s;return(e[r]||(s=e[r]={i:r,l:!1,exports:{}},t[r].call(s.exports,s,s.exports,i),s.l=!0,s)).exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(r,s,function(e){return t[e]}.bind(null,s));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=612)}([function(t,e,i){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=i(341),s=i(342),n=i(221);function o(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return h.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=h.prototype:(t=null===t?new h(e):t).length=e,t}function h(t,e,i){if(!(h.TYPED_ARRAY_SUPPORT||this instanceof h))return new h(t,e,i);if("number"!=typeof t)return c(this,t,e,i);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}function c(t,e,i,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer){var s=t,o=e,c=i;if(o.byteLength,c<0||o.byteLength<c)throw new RangeError("'offset' is out of bounds");if(o.byteLength<c+(r||0))throw new RangeError("'length' is out of bounds");return o=void 0===c&&void 0===r?new Uint8Array(o):void 0===r?new Uint8Array(o,c):new Uint8Array(o,c,r),h.TYPED_ARRAY_SUPPORT?(s=o).__proto__=h.prototype:s=f(s,o),s}if("string"!=typeof e){if(c=t,r=e,h.isBuffer(r))return 0!==(c=a(c,o=0|d(r.length))).length&&r.copy(c,0,0,o),c;if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||function(t){return t!=t}(r.length)?a(c,0):f(c,r);if("Buffer"===r.type&&n(r.data))return f(c,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}if(s=t,r=e,t=i,h.isEncoding(t="string"==typeof t&&""!==t?t:"utf8"))return(r=(s=a(s,e=0|p(r,t))).write(r,t))!==e?s.slice(0,r):s;throw new TypeError('"encoding" must be a valid string encoding')}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(u(e),t=a(t,e<0?0:0|d(e)),!h.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function f(t,e){var i=e.length<0?0:0|d(e.length);t=a(t,i);for(var r=0;r<i;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function p(t,e){if(h.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;var i=(t="string"!=typeof t?""+t:t).length;if(0===i)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return C(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return T(t).length;default:if(r)return C(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,i){var s,n=!1;if((e=void 0===e||e<0?0:e)>this.length)return"";if((i=void 0===i||i>this.length?this.length:i)<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":var o=e,a=i,h=this.length;(!a||a<0||h<a)&&(a=h);for(var c="",u=o=!o||o<0?0:o;u<a;++u)c+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(this[u]);return c;case"utf8":case"utf-8":return k(this,e,i);case"ascii":h=e;var l=i,f="";l=Math.min(this.length,l);for(var d=h;d<l;++d)f+=String.fromCharCode(127&this[d]);return f;case"latin1":case"binary":o=e;var p=i,g="";p=Math.min(this.length,p);for(var m=o;m<p;++m)g+=String.fromCharCode(this[m]);return g;case"base64":return w=this,s=i,0===(y=e)&&s===w.length?r.fromByteArray(w):r.fromByteArray(w.slice(y,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var w=e,y=i,b=this.slice(w,y),v="",S=0;S<b.length;S+=2)v+=String.fromCharCode(b[S]+256*b[S+1]);return v;default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function m(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function w(t,e,i,r,s){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):2147483647<i?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,(i=(i=isNaN(i)?s?0:t.length-1:i)<0?t.length+i:i)>=t.length){if(s)return-1;i=t.length-1}else if(i<0){if(!s)return-1;i=0}if("string"==typeof e&&(e=h.from(e,r)),h.isBuffer(e))return 0===e.length?-1:y(t,e,i,r,s);if("number"==typeof e)return e&=255,h.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(s?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,e,i):y(t,[e],i,r,s);throw new TypeError("val must be string, number or Buffer")}function y(t,e,i,r,s){var n=1,o=t.length,a=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o/=n=2,a/=2,i/=2}function h(t,e){return 1===n?t[e]:t.readUInt16BE(e*n)}if(s)for(var c=-1,u=i;u<o;u++)if(h(t,u)===h(e,-1===c?0:u-c)){if(u-(c=-1===c?u:c)+1===a)return c*n}else-1!==c&&(u-=u-c),c=-1;else for(u=i=o<i+a?o-a:i;0<=u;u--){for(var l=!0,f=0;f<a;f++)if(h(t,u+f)!==h(e,f)){l=!1;break}if(l)return u}return-1}function b(t,e,i,r){return P(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,r)}function v(t,e,i,r){return P(function(t,e){for(var i,r,s=[],n=0;n<t.length&&!((e-=2)<0);++n)r=(i=t.charCodeAt(n))>>8,s.push(i%256),s.push(r);return s}(e,t.length-i),t,i,r)}function k(t,e,i){i=Math.min(t.length,i);for(var r=[],s=e;s<i;){var n,o,a,h,c=t[s],u=null,l=239<c?4:223<c?3:191<c?2:1;if(s+l<=i)switch(l){case 1:c<128&&(u=c);break;case 2:128==(192&(n=t[s+1]))&&127<(h=(31&c)<<6|63&n)&&(u=h);break;case 3:n=t[s+1],o=t[s+2],128==(192&n)&&128==(192&o)&&2047<(h=(15&c)<<12|(63&n)<<6|63&o)&&(h<55296||57343<h)&&(u=h);break;case 4:n=t[s+1],o=t[s+2],a=t[s+3],128==(192&n)&&128==(192&o)&&128==(192&a)&&65535<(h=(15&c)<<18|(63&n)<<12|(63&o)<<6|63&a)&&h<1114112&&(u=h)}null===u?(u=65533,l=1):65535<u&&(r.push((u-=65536)>>>10&1023|55296),u=56320|1023&u),r.push(u),s+=l}var f=r,d=f.length;if(d<=S)return String.fromCharCode.apply(String,f);for(var p="",g=0;g<d;)p+=String.fromCharCode.apply(String,f.slice(g,g+=S));return p}e.Buffer=h,e.SlowBuffer=function(t){return+t!=t&&(t=0),h.alloc(+t)},e.INSPECT_MAX_BYTES=50,h.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=o(),h.poolSize=8192,h._augment=function(t){return t.__proto__=h.prototype,t},h.from=function(t,e,i){return c(null,t,e,i)},h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,"undefined"!=typeof Symbol)&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0}),h.alloc=function(t,e,i){return r=null,e=e,i=i,u(t=t),t<=0||void 0===e?a(r,t):"string"==typeof i?a(r,t).fill(e,i):a(r,t).fill(e);var r},h.allocUnsafe=function(t){return l(null,t)},h.allocUnsafeSlow=function(t){return l(null,t)},h.isBuffer=function(t){return!(null==t||!t._isBuffer)},h.compare=function(t,e){if(!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,r=e.length,s=0,n=Math.min(i,r);s<n;++s)if(t[s]!==e[s]){i=t[s],r=e[s];break}return i<r?-1:r<i?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);if(void 0===e)for(s=e=0;s<t.length;++s)e+=t[s].length;for(var i=h.allocUnsafe(e),r=0,s=0;s<t.length;++s){var o=t[s];if(!h.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},h.byteLength=p,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},h.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?k(this,0,t):g.apply(this,arguments)},h.prototype.equals=function(t){if(h.isBuffer(t))return this===t||0===h.compare(this,t);throw new TypeError("Argument must be a Buffer")},h.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i)&&(t+=" ... "),"<Buffer "+t+">"},h.prototype.compare=function(t,e,i,r,s){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===s&&(s=this.length),(e=void 0===e?0:e)<0||i>t.length||r<0||s>this.length)throw new RangeError("out of range index");if(s<=r&&i<=e)return 0;if(s<=r)return-1;if(i<=e)return 1;if(this===t)return 0;for(var n=(s>>>=0)-(r>>>=0),o=(i>>>=0)-(e>>>=0),a=Math.min(n,o),c=this.slice(r,s),u=t.slice(e,i),l=0;l<a;++l)if(c[l]!==u[l]){n=c[l],o=u[l];break}return n<o?-1:o<n?1:0},h.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},h.prototype.indexOf=function(t,e,i){return w(this,t,e,i,!0)},h.prototype.lastIndexOf=function(t,e,i){return w(this,t,e,i,!1)},h.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}var s=this.length-e;if((void 0===i||s<i)&&(i=s),0<t.length&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var n,o,a,h=!1;;)switch(r){case"hex":var c=t,u=e,l=i,f=(u=Number(u)||0,this.length-u);if((!l||f<(l=Number(l)))&&(l=f),(f=c.length)%2!=0)throw new TypeError("Invalid hex string");f/2<l&&(l=f/2);for(var d=0;d<l;++d){var p=parseInt(c.substr(2*d,2),16);if(isNaN(p))return d;this[u+d]=p}return d;case"utf8":case"utf-8":return f=e,a=i,P(C(t,(o=this).length-f),o,f,a);case"ascii":return b(this,t,e,i);case"latin1":case"binary":return b(this,t,e,i);case"base64":return o=this,a=e,n=i,P(T(t),o,a,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,t,e,i);default:if(h)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),h=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function _(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(i<t+e)throw new RangeError("Trying to access beyond buffer length")}function x(t,e,i,r,s,n){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(s<e||e<n)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function R(t,e,i,r){e<0&&(e=65535+e+1);for(var s=0,n=Math.min(t.length-i,2);s<n;++s)t[i+s]=(e&255<<8*(r?s:1-s))>>>8*(r?s:1-s)}function E(t,e,i,r){e<0&&(e=4294967295+e+1);for(var s=0,n=Math.min(t.length-i,4);s<n;++s)t[i+s]=e>>>8*(r?s:3-s)&255}function A(t,e,i,r){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function M(t,e,i,r,n){return n||A(t,0,i,4),s.write(t,e,i,r,23,4),i+4}function O(t,e,i,r,n){return n||A(t,0,i,8),s.write(t,e,i,r,52,8),i+8}h.prototype.slice=function(t,e){var i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):i<t&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):i<e&&(e=i),e<t&&(e=t),h.TYPED_ARRAY_SUPPORT)(s=this.subarray(t,e)).__proto__=h.prototype;else for(var r=e-t,s=new h(r,void 0),n=0;n<r;++n)s[n]=this[n+t];return s},h.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||_(t,e,this.length);for(var r=this[t],s=1,n=0;++n<e&&(s*=256);)r+=this[t+n]*s;return r},h.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||_(t,e,this.length);for(var r=this[t+--e],s=1;0<e&&(s*=256);)r+=this[t+--e]*s;return r},h.prototype.readUInt8=function(t,e){return e||_(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return e||_(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return e||_(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return e||_(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return e||_(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||_(t,e,this.length);for(var r=this[t],s=1,n=0;++n<e&&(s*=256);)r+=this[t+n]*s;return(s*=128)<=r&&(r-=Math.pow(2,8*e)),r},h.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||_(t,e,this.length);for(var r=e,s=1,n=this[t+--r];0<r&&(s*=256);)n+=this[t+--r]*s;return(s*=128)<=n&&(n-=Math.pow(2,8*e)),n},h.prototype.readInt8=function(t,e){return e||_(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){return e||_(t,2,this.length),32768&(e=this[t]|this[t+1]<<8)?4294901760|e:e},h.prototype.readInt16BE=function(t,e){return e||_(t,2,this.length),32768&(e=this[t+1]|this[t]<<8)?4294901760|e:e},h.prototype.readInt32LE=function(t,e){return e||_(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return e||_(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return e||_(t,4,this.length),s.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return e||_(t,4,this.length),s.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return e||_(t,8,this.length),s.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return e||_(t,8,this.length),s.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,i,r){t=+t,e|=0,i|=0,r||x(this,t,e,i,Math.pow(2,8*i)-1,0);var s=1,n=0;for(this[e]=255&t;++n<i&&(s*=256);)this[e+n]=t/s&255;return e+i},h.prototype.writeUIntBE=function(t,e,i,r){t=+t,e|=0,i|=0,r||x(this,t,e,i,Math.pow(2,8*i)-1,0);var s=i-1,n=1;for(this[e+s]=255&t;0<=--s&&(n*=256);)this[e+s]=t/n&255;return e+i},h.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||x(this,t,e,1,255,0),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||x(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},h.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||x(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},h.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||x(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):E(this,t,e,!0),e+4},h.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||x(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):E(this,t,e,!1),e+4},h.prototype.writeIntLE=function(t,e,i,r){t=+t,e|=0,r||x(this,t,e,i,(r=Math.pow(2,8*i-1))-1,-r);var s=0,n=1,o=0;for(this[e]=255&t;++s<i&&(n*=256);)t<0&&0===o&&0!==this[e+s-1]&&(o=1),this[e+s]=(t/n>>0)-o&255;return e+i},h.prototype.writeIntBE=function(t,e,i,r){t=+t,e|=0,r||x(this,t,e,i,(r=Math.pow(2,8*i-1))-1,-r);var s=i-1,n=1,o=0;for(this[e+s]=255&t;0<=--s&&(n*=256);)t<0&&0===o&&0!==this[e+s+1]&&(o=1),this[e+s]=(t/n>>0)-o&255;return e+i},h.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||x(this,t,e,1,127,-128),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&(t=t<0?255+t+1:t),e+1},h.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||x(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},h.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||x(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},h.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||x(this,t,e,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):E(this,t,e,!0),e+4},h.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||x(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):E(this,t,e,!1),e+4},h.prototype.writeFloatLE=function(t,e,i){return M(this,t,e,!0,i)},h.prototype.writeFloatBE=function(t,e,i){return M(this,t,e,!1,i)},h.prototype.writeDoubleLE=function(t,e,i){return O(this,t,e,!0,i)},h.prototype.writeDoubleBE=function(t,e,i){return O(this,t,e,!1,i)},h.prototype.copy=function(t,e,i,r){if(i=i||0,r||0===r||(r=this.length),e>=t.length&&(e=t.length),(r=0<r&&r<i?i:r)===i)return 0;if(0===t.length||0===this.length)return 0;if((e=e||0)<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var s,n=(r=t.length-e<r-i?t.length-e+i:r)-i;if(this===t&&i<e&&e<r)for(s=n-1;0<=s;--s)t[s+e]=this[s+i];else if(n<1e3||!h.TYPED_ARRAY_SUPPORT)for(s=0;s<n;++s)t[s+e]=this[s+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+n),e);return n},h.prototype.fill=function(t,e,i,r){if("string"==typeof t){var s;if("string"==typeof e?(r=e,e=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),1===t.length&&(s=t.charCodeAt(0))<256&&(t=s),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!h.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(!(i<=e))if(e>>>=0,i=void 0===i?this.length:i>>>0,"number"==typeof(t=t||0))for(a=e;a<i;++a)this[a]=t;else for(var n=h.isBuffer(t)?t:C(new h(t,r).toString()),o=n.length,a=0;a<i-e;++a)this[a+e]=n[a%o];return this};var I=/[^+\/0-9A-Za-z-_]/g;function C(t,e){e=e||1/0;for(var i,r=t.length,s=null,n=[],o=0;o<r;++o){if(55295<(i=t.charCodeAt(o))&&i<57344){if(!s){if(56319<i){-1<(e-=3)&&n.push(239,191,189);continue}if(o+1===r){-1<(e-=3)&&n.push(239,191,189);continue}s=i;continue}if(i<56320){-1<(e-=3)&&n.push(239,191,189),s=i;continue}i=65536+(s-55296<<10|i-56320)}else s&&-1<(e-=3)&&n.push(239,191,189);if(s=null,i<128){if(--e<0)break;n.push(i)}else if(i<2048){if((e-=2)<0)break;n.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;n.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;n.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return n}function T(t){return r.toByteArray(function(t){var e;if((t=((e=t).trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(I,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function P(t,e,i,r){for(var s=0;s<r&&!(s+i>=e.length||s>=t.length);++s)e[s+i]=t[s];return s}}).call(this,i(12))},function(t,e,i){"use strict";(function(e){var r=i(343);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function s(t,e){if(t===e)return 0;for(var i=t.length,r=e.length,s=0,n=Math.min(i,r);s<n;++s)if(t[s]!==e[s]){i=t[s],r=e[s];break}return i<r?-1:r<i?1:0}function n(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var o=i(131),a=Object.prototype.hasOwnProperty,h=Array.prototype.slice,c="foo"===function(){}.name;function u(t){return Object.prototype.toString.call(t)}function l(t){return!n(t)&&"function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer)))}var f=t.exports=y,d=/\s*function\s+([^\(\s]*)\s*/;function p(t){if(o.isFunction(t))return c?t.name:(t=t.toString().match(d))&&t[1]}function g(t,e){return"string"!=typeof t||t.length<e?t:t.slice(0,e)}function m(t){return c||!o.isFunction(t)?o.inspect(t):"[Function"+((t=p(t))?": "+t:"")+"]"}function w(t,e,i,r,s){throw new f.AssertionError({message:i,actual:t,expected:e,operator:r,stackStartFunction:s})}function y(t,e){t||w(t,!0,e,"==",f.ok)}function b(t,e,i,r){if(t===e)return!0;if(n(t)&&n(e))return 0===s(t,e);if(o.isDate(t)&&o.isDate(e))return t.getTime()===e.getTime();if(o.isRegExp(t)&&o.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(l(t)&&l(e)&&u(t)===u(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===s(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(n(t)!==n(e))return!1;var a=(r=r||{actual:[],expected:[]}).actual.indexOf(t);if(-1===a||a!==r.expected.indexOf(e)){r.actual.push(t),r.expected.push(e);var c=t,f=e,d=i,p=r;if(null==c||null==f)return!1;if(o.isPrimitive(c)||o.isPrimitive(f))return c===f;if(d&&Object.getPrototypeOf(c)!==Object.getPrototypeOf(f))return!1;if(a=v(c),r=v(f),a&&!r||!a&&r)return!1;if(a)return b(c=h.call(c),f=h.call(f),d);var g,m,w=_(c),y=_(f);if(w.length!==y.length)return!1;for(w.sort(),y.sort(),m=w.length-1;0<=m;m--)if(w[m]!==y[m])return!1;for(m=w.length-1;0<=m;m--)if(!b(c[g=w[m]],f[g],d,p))return!1}return!0}return i?t===e:t==e}function v(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function k(t,e){if(t&&e){if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return 1}catch(t){}return Error.isPrototypeOf(e)?void 0:!0===e.call({},t)}}function S(t,e,i,r){if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof i&&(r=i,i=null),e=function(t){var e;try{t()}catch(t){e=t}return e}(e),r=(i&&i.name?" ("+i.name+").":".")+(r?" "+r:"."),t&&!e&&w(e,i,"Missing expected exception"+r);var s="string"==typeof r,n=!t&&e&&!i;if((!t&&o.isError(e)&&s&&k(e,i)||n)&&w(e,i,"Got unwanted exception"+r),t&&e&&i&&!k(e,i)||!t&&e)throw e}f.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=g(m((i=this).actual),128)+" "+i.operator+" "+g(m(i.expected),128),this.generatedMessage=!0);var e,i=t.stackStartFunction||w;Error.captureStackTrace?Error.captureStackTrace(this,i):(t=new Error).stack&&(t=t.stack,e=p(i),0<=(e=t.indexOf("\n"+e))&&(e=t.indexOf("\n",e+1),t=t.substring(e+1)),this.stack=t)},o.inherits(f.AssertionError,Error),f.fail=w,f.ok=y,f.equal=function(t,e,i){t!=e&&w(t,e,i,"==",f.equal)},f.notEqual=function(t,e,i){t==e&&w(t,e,i,"!=",f.notEqual)},f.deepEqual=function(t,e,i){b(t,e,!1)||w(t,e,i,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(t,e,i){b(t,e,!0)||w(t,e,i,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(t,e,i){b(t,e,!1)&&w(t,e,i,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function t(e,i,r){b(e,i,!0)&&w(e,i,r,"notDeepStrictEqual",t)},f.strictEqual=function(t,e,i){t!==e&&w(t,e,i,"===",f.strictEqual)},f.notStrictEqual=function(t,e,i){t===e&&w(t,e,i,"!==",f.notStrictEqual)},f.throws=function(t,e,i){S(!0,t,e,i)},f.doesNotThrow=function(t,e,i){S(!1,t,e,i)},f.ifError=function(t){if(t)throw t},f.strict=r((function t(e,i){e||w(e,!0,i,"==",t)}),f,{equal:f.strictEqual,deepEqual:f.deepStrictEqual,notEqual:f.notStrictEqual,notDeepEqual:f.notDeepStrictEqual}),f.strict.strict=f.strict;var _=Object.keys||function(t){var e,i=[];for(e in t)a.call(t,e)&&i.push(e);return i}}).call(this,i(12))},function(t,e,i){"use strict";(function(e){
/*!
 * reader.js - buffer reader for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=i(4),n=i(8),o=e.alloc(0);function a(t,i){if(!(this instanceof a))return new a(t,i);"ArrayBuffer"==t.constructor.name&&(t=e.from(t)),r(e.isBuffer(t),"Must pass a Buffer."),this.data=t,this.offset=0,this.zeroCopy=i||!1,this.stack=[]}a.prototype.assert=function t(e){if(!e)throw new s.EncodingError(this.offset,"Out of bounds read",t)},a.prototype.enforce=function t(e,i){if(!e)throw new s.EncodingError(this.offset,i,t)},a.prototype.getSize=function(){return this.data.length},a.prototype.left=function(){return this.assert(this.offset<=this.data.length),this.data.length-this.offset},a.prototype.seek=function(t){return this.assert(0<=this.offset+t),this.assert(this.offset+t<=this.data.length),this.offset+=t,t},a.prototype.start=function(){return this.stack.push(this.offset),this.offset},a.prototype.end=function(){r(0<this.stack.length);var t=this.stack.pop();return this.offset-t},a.prototype.endData=function(t){r(0<this.stack.length);var i=this.stack.pop(),s=this.offset,n=s-i,o=this.data;return n===o.length?o:this.zeroCopy||t?o.slice(i,s):(t=e.allocUnsafe(n),o.copy(t,0,i,s),t)},a.prototype.destroy=function(){this.data=o,this.offset=0,this.stack.length=0},a.prototype.readU8=function(){this.assert(this.offset+1<=this.data.length);var t=this.data[this.offset];return this.offset+=1,t},a.prototype.readU16=function(){this.assert(this.offset+2<=this.data.length);var t=this.data.readUInt16LE(this.offset,!0);return this.offset+=2,t},a.prototype.readU16BE=function(){this.assert(this.offset+2<=this.data.length);var t=this.data.readUInt16BE(this.offset,!0);return this.offset+=2,t},a.prototype.readU32=function(){this.assert(this.offset+4<=this.data.length);var t=this.data.readUInt32LE(this.offset,!0);return this.offset+=4,t},a.prototype.readU32BE=function(){this.assert(this.offset+4<=this.data.length);var t=this.data.readUInt32BE(this.offset,!0);return this.offset+=4,t},a.prototype.readU64=function(){this.assert(this.offset+8<=this.data.length);var t=s.readU64(this.data,this.offset);return this.offset+=8,t},a.prototype.readU64BE=function(){this.assert(this.offset+8<=this.data.length);var t=s.readU64BE(this.data,this.offset);return this.offset+=8,t},a.prototype.readI8=function(){this.assert(this.offset+1<=this.data.length);var t=this.data.readInt8(this.offset,!0);return this.offset+=1,t},a.prototype.readI16=function(){this.assert(this.offset+2<=this.data.length);var t=this.data.readInt16LE(this.offset,!0);return this.offset+=2,t},a.prototype.readI16BE=function(){this.assert(this.offset+2<=this.data.length);var t=this.data.readInt16BE(this.offset,!0);return this.offset+=2,t},a.prototype.readI32=function(){this.assert(this.offset+4<=this.data.length);var t=this.data.readInt32LE(this.offset,!0);return this.offset+=4,t},a.prototype.readI32BE=function(){this.assert(this.offset+4<=this.data.length);var t=this.data.readInt32BE(this.offset,!0);return this.offset+=4,t},a.prototype.readI64=function(){this.assert(this.offset+8<=this.data.length);var t=s.readI64(this.data,this.offset);return this.offset+=8,t},a.prototype.readI64BE=function(){this.assert(this.offset+8<=this.data.length);var t=s.readI64BE(this.data,this.offset);return this.offset+=8,t},a.prototype.readU64N=function(){this.assert(this.offset+8<=this.data.length);var t=s.readU64N(this.data,this.offset);return this.offset+=8,t},a.prototype.readU64BEN=function(){this.assert(this.offset+8<=this.data.length);var t=s.readU64BEN(this.data,this.offset);return this.offset+=8,t},a.prototype.readI64N=function(){this.assert(this.offset+8<=this.data.length);var t=s.readI64N(this.data,this.offset);return this.offset+=8,t},a.prototype.readI64BEN=function(){this.assert(this.offset+8<=this.data.length);var t=s.readI64BEN(this.data,this.offset);return this.offset+=8,t},a.prototype.readFloat=function(){this.assert(this.offset+4<=this.data.length);var t=this.data.readFloatLE(this.offset,!0);return this.offset+=4,t},a.prototype.readFloatBE=function(){this.assert(this.offset+4<=this.data.length);var t=this.data.readFloatBE(this.offset,!0);return this.offset+=4,t},a.prototype.readDouble=function(){this.assert(this.offset+8<=this.data.length);var t=this.data.readDoubleLE(this.offset,!0);return this.offset+=8,t},a.prototype.readDoubleBE=function(){this.assert(this.offset+8<=this.data.length);var t=this.data.readDoubleBE(this.offset,!0);return this.offset+=8,t},a.prototype.readVarint=function(){var{size:t,value:e}=s.readVarint(this.data,this.offset);return this.offset+=t,e},a.prototype.readVarintN=function(){var{size:t,value:e}=s.readVarintN(this.data,this.offset);return this.offset+=t,e},a.prototype.readVarint2=function(){var{size:t,value:e}=s.readVarint2(this.data,this.offset);return this.offset+=t,e},a.prototype.readVarint2N=function(){var{size:t,value:e}=s.readVarint2N(this.data,this.offset);return this.offset+=t,e},a.prototype.readBytes=function(t,i){let s;return r(0<=t),this.assert(this.offset+t<=this.data.length),this.zeroCopy||i?s=this.data.slice(this.offset,this.offset+t):(s=e.allocUnsafe(t),this.data.copy(s,0,this.offset,this.offset+t)),this.offset+=t,s},a.prototype.readVarBytes=function(t){return this.readBytes(this.readVarint(),t)},a.prototype.readString=function(t,e){return r(0<=e),this.assert(this.offset+e<=this.data.length),t=this.data.toString(t,this.offset,this.offset+e),this.offset+=e,t},a.prototype.readHash=function(t){return t?this.readString(t,32):this.readBytes(32)},a.prototype.readVarString=function(t,e){var i=this.readVarint();return this.enforce(!e||i<=e,"String exceeds limit."),this.readString(t,i)},a.prototype.readNullString=function(t){this.assert(this.offset+1<=this.data.length);let e=this.offset;for(;e<this.data.length&&0!==this.data[e];e++);return this.assert(e!==this.data.length),t=this.readString(t,e-this.offset),this.offset=e+1,t},a.prototype.createChecksum=function(){let t=0;0<this.stack.length&&(t=this.stack[this.stack.length-1]);var e=this.data.slice(t,this.offset);return n.hash256(e).readUInt32LE(0,!0)},a.prototype.verifyChecksum=function(){var t=this.createChecksum(),e=this.readU32();return this.enforce(t===e,"Checksum mismatch."),e},t.exports=a}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(t,r){
/*!
 * util.js - utils for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const s=i(1),n=i(354),o=i(131),a=i(112),h=e,c={showHidden:!1,depth:20,colors:!1,customInspect:!0,showProxy:!1,maxArrayLength:1/0,breakLength:60};function u(t){switch(t){case 0:return 1;case 1:return 10;case 2:return 100;case 3:return 1e3;case 4:return 1e4;case 5:return 1e5;case 6:return 1e6;case 7:return 1e7;case 8:return 1e8}throw new Error("Exponent is too large.")}h.sprintf=function(){for(var t,e,i,r,s=0,n=arguments[s++],o=[];n;){if(e=/^[^\x25]+/.exec(n))o.push(e[0]);else if(e=/^\x25{2}/.exec(n))o.push("%");else{if(!(e=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(n)))throw"Huh ?!";if(null==(t=arguments[e[1]||s++])||null==t)throw"Too few arguments.";if(/[^s]/.test(e[7])&&"number"!=typeof t)throw"Expecting number but found "+typeof t;switch(e[7]){case"b":t=t.toString(2);break;case"c":t=String.fromCharCode(t);break;case"d":t=parseInt(t);break;case"e":t=e[6]?t.toExponential(e[6]):t.toExponential();break;case"f":t=e[6]?parseFloat(t).toFixed(e[6]):parseFloat(t);break;case"o":t=t.toString(8);break;case"s":t=(t=String(t))&&e[6]?t.substring(0,e[6]):t;break;case"u":t=Math.abs(t);break;case"x":t=t.toString(16);break;case"X":t=t.toString(16).toUpperCase()}t=/[def]/.test(e[7])&&e[2]&&0<=t?"+"+t:t,i=e[3]?"0"==e[3]?"0":e[3].charAt(1):" ",r=e[5]-String(t).length-"".length,i=e[5]?function(t,e){for(var i=[];0<e;i[--e]=t);return i.join("")}(i,r):"",o.push(""+(e[4]?t+i:i+t))}n=n.substring(e[0].length)}return o.join("")},h.encrypt=function(e,i,r){t.isBuffer(e)||(s("string"==typeof e),e=t.from(e,"binary")),t.isBuffer(i)||(s("string"==typeof i),i=t.from(i,"binary")),t.isBuffer(r)||(s("string"==typeof r),r=t.from(r,"binary"));var n=a.encipher(r,e,i),o=(n=t.from(n,"binary"),t.alloc(2*n.length));for(let t=0;t<n.length;t++)o[2*t]=97+(n[t]>>4),o[2*t+1]=97+(15&n[t]);return o.toString("binary")},h.decrypt=function(e,i,r){t.isBuffer(e)||(s("string"==typeof e),e=t.from(e,"binary")),t.isBuffer(i)||(s("string"==typeof i),i=t.from(i,"binary")),t.isBuffer(r)||(s("string"==typeof r),r=t.from(r,"binary"));var n=t.alloc(r.length/2);for(let t=0;t<n.length;t++)n[t]=r[2*t]-97<<4|r[2*t+1]-97;return a.decipher(n,e,i).toString("binary")},h.isNumber=function(t){return"number"==typeof t&&isFinite(t)&&t>=-Number.MAX_SAFE_INTEGER&&t<=Number.MAX_SAFE_INTEGER},h.waiting=async function(t){await new Promise((e,i)=>{setTimeout(()=>{e()},t)})},h.isInt=function(t){return Number.isSafeInteger(t)},h.isUint=function(t){return h.isInt(t)&&0<=t},h.isFloat=function(t){return"number"==typeof t&&isFinite(t)},h.isUfloat=function(t){return h.isFloat(t)&&0<=t},h.isI8=function(t){return(0|t)===t&&-128<=t&&t<=127},h.isI16=function(t){return(0|t)===t&&-32768<=t&&t<=32767},h.stringify=function(e,i){if(void 0===e||!e)return"";if("string"==typeof e)return e;if(Array.isArray(e))return e.reduce((t,e)=>t+h.stringify(e),"");if("number"==typeof e||"boolean"==typeof e)return e.toString();if("object"!=typeof e)return t.isBuffer(e)?e.toString("base64"):e;{let t="";return Object.keys(e).sort().map(r=>{i&&i.includes[r]||e[r]&&(t+=r+h.stringify(e[r]))}),t}},h.parseJson=function(t,e){try{return JSON.parse(t)}catch(t){return e||null}},h.hashInt=function(t){return n.str(t)>>>0},h.makeSingleton=function(t){t.singleton=function(){let e;return function(){return e=e||new t(...arguments)}}()},h.isI32=function(t){return(0|t)===t},h.isI64=function(t){return h.isInt(t)},h.isU8=function(t){return(255&t)===t},h.isU16=function(t){return(65535&t)===t},h.isU32=function(t){return t>>>0===t},h.isU64=function(t){return h.isUint(t)},h.isAscii=function(t){return"string"==typeof t&&/^[\t\n\r -~]*$/.test(t)},h.isBase58=function(t){return"string"==typeof t&&/^[1-9A-Za-z]+$/.test(t)},h.isBech32=function(t){return"string"==typeof t&&(t.toUpperCase()===t||t.toLowerCase()===t)&&!(t.length<8||90<t.length)&&/^[a-z]{2}1[qpzry9x8gf2tvdw0s3jn54khce6mua7l]+$/i.test(t)},h.isHex=function(t){return"string"==typeof t&&t.length%2==0&&/^[0-9A-Fa-f]+$/.test(t)},h.isHex160=function(t){return"string"==typeof t&&40===t.length&&h.isHex(t)},h.isHex256=function(t){return"string"==typeof t&&64===t.length&&h.isHex(t)},h.isSafeAddition=function(t,e){var i,r,n,o;return s(0<=t),s(0<=e),t<=0xfffffffffffff&&e<=0xfffffffffffff||(t=((i=t*(1/4294967296)|0)+(r=e*(1/4294967296)|0)|0)+(1&((n=(t|=0)>>31)&(o=(e|=0)>>31)|~((t+e|0)>>31)&(n^o)))|0,r>>>=0,!((t>>>=0)<(i>>>=0)||t<r)&&0==(4292870144&t))},h.inspectify=function(t,e){return"string"==typeof t?t:(c.colors=!1!==e,o.inspect(t,c))},h.fmt=o.format,h.format=function(t,e){return 0<t.length&&t[0]&&"object"==typeof t[0]?(null==e&&(e=Boolean(r.stdout&&r.stdout.isTTY)),h.inspectify(t[0],e)):h.fmt(...t)},h.log=function(...t){if(r.stdout){var e=h.format(t);r.stdout.write(e+"\n")}else{let e;0<t.length&&(e="object"!=typeof t[0]?h.fmt(...t):t[0]),console.log(e)}},h.error=function(...t){if(r.stderr){var e=h.format(t);r.stderr.write(e+"\n")}else{let e;0<t.length&&(e="object"!=typeof t[0]?h.fmt(...t):t[0]),console.error(e)}},h.hrtime=function(t){var e,i;return r.hrtime?t?([e,i]=r.hrtime(t),1e3*e+i/1e6):r.hrtime():(e=h.ms(),t?([i,t]=t,e-(1e3*i+t/1e6)):[(e-(i=e%1e3))/1e3,1e6*i])},h.now=function(){return Math.floor(h.ms()/1e3)},h.ms=function(){return Date.now()},h.date=function(t){return null==t&&(t=h.now()),new Date(1e3*t).toISOString().slice(0,-5)+"Z"},h.dataOfUTC=function(t){return("number"!=typeof t||14<t||t<-12)&&(t=(new Date).getTimezoneOffset()/60*-1),new Date(Date.now()+36e5*t).toISOString().slice(0,-5)+(0<=t?" +"+t:" "+t)},h.time=function(t){return null==t?h.now():new Date(t)/1e3|0},h.random=function(t,e){return Math.floor(Math.random()*(e-t))+t},h.nonce=function(e){let i,r;switch(e=e||8){case 8:r=t.allocUnsafe(8),i=h.random(0,4294967296),r.writeUInt32LE(i,0,!0),i=h.random(0,4294967296),r.writeUInt32LE(i,4,!0);break;case 4:r=t.allocUnsafe(4),i=h.random(0,4294967296),r.writeUInt32LE(i,0,!0);break;default:s(!1,"Bad nonce size.")}return r},h.strcmp=function(t,e){var i=Math.min(t.length,e.length);for(let r=0;r<i;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return t.length<e.length?-1:t.length>e.length?1:0},h.mb=function(t){return Math.floor(t/1024/1024)},h.indexOf=function(e,i){s(Array.isArray(e)),s(t.isBuffer(i));for(let n=0;n<e.length;n++){var r=e[n];if(s(t.isBuffer(r)),r.equals(i))return n}return-1},h.pad8=function(t){switch(s("number"==typeof t),s(0<=t),(t=t.toString(10)).length){case 1:return"00"+t;case 2:return"0"+t;case 3:return t}throw new Error("Number too big.")},h.pad32=function(t){switch(s("number"==typeof t),s(0<=t),(t=t.toString(10)).length){case 1:return"000000000"+t;case 2:return"00000000"+t;case 3:return"0000000"+t;case 4:return"000000"+t;case 5:return"00000"+t;case 6:return"0000"+t;case 7:return"000"+t;case 8:return"00"+t;case 9:return"0"+t;case 10:return t}throw new Error("Number too big.")},h.hex8=function(t){switch(s("number"==typeof t),s(0<=t),(t=t.toString(16)).length){case 1:return"0"+t;case 2:return t}throw new Error("Number too big.")},h.hex32=function(t){switch(s("number"==typeof t),s(0<=t),(t=t.toString(16)).length){case 1:return"0000000"+t;case 2:return"000000"+t;case 3:return"00000"+t;case 4:return"0000"+t;case 5:return"000"+t;case 6:return"00"+t;case 7:return"0"+t;case 8:return t}throw new Error("Number too big.")},h.revHex=function(t){s("string"==typeof t),s(0<t.length),s(t.length%2==0);let e="";for(let i=0;i<t.length;i+=2)e=t.slice(i,i+2)+e;return e},h.reverse=function(t){var e={};for(const i of Object.keys(t))e[t[i]]=i;return e},h.binarySearch=function(t,e,i,r){let s=0,n=t.length-1;for(;s<=n;){var o=s+n>>>1,a=i(t[o],e);if(0===a)return o;a<0?s=1+o:n=o-1}return r?s:-1},h.binaryInsert=function(t,e,i,r){var s=h.binarySearch(t,e,i,!0);return r&&s<t.length&&0===i(t[s],e)?-1:(0===s?t.unshift(e):s===t.length?t.push(e):t.splice(s,0,e),s)},h.binaryRemove=function(t,e,i){return-1!==(e=h.binarySearch(t,e,i,!1))&&(t.splice(e,1),!0)},h.isUpperCase=function(t){return s("string"==typeof t),0!==t.length&&0==(32&t.charCodeAt(0))},h.startsWith=function(t,e){return s("string"==typeof t),t.startsWith?t.startsWith(e):0===t.indexOf(e)},h.memoryUsage=function(){var t;return r.memoryUsage?(t=r.memoryUsage(),{total:h.mb(t.rss),jsHeap:h.mb(t.heapUsed),jsHeapTotal:h.mb(t.heapTotal),nativeHeap:h.mb(t.rss-t.heapTotal),external:h.mb(t.external)}):{total:0,jsHeap:0,jsHeapTotal:0,nativeHeap:0,external:0}},h.toFixed=function(t,e){s("number"==typeof t),s(Number.isSafeInteger(t),"Invalid integer value.");let i="";t<0&&(t=-t,i="-");var r=u(e);let n=t%r,o=(t-n)/r;for(n=n.toString(10),o=o.toString(10);n.length<e;)n="0"+n;return n=n.replace(/0+$/,""),s(n.length<=e,"Invalid integer value."),0===n.length&&(n="0"),0===e?""+i+o:""+i+o+"."+n},h.fromFixed=function(t,e){s("string"==typeof t),s(t.length<=32,"Fixed number string too large.");let i=1,r=(0<t.length&&"-"===t[0]&&(t=t.substring(1),i=-1),t),n="0";for(-1!==(o=t.indexOf("."))&&(r=t.substring(0,o),n=t.substring(o+1)),r=r.replace(/^0+/,""),n=n.replace(/0+$/,""),s(r.length<=16-e,"Fixed number string exceeds 2^53-1."),s(n.length<=e,"Too many decimal places in fixed number string."),0===r.length&&(r="0");n.length<e;)n+="0";0===n.length&&(n="0"),s(/^\d+$/.test(r)&&/^\d+$/.test(n),"Non-numeric characters in fixed number string."),r=parseInt(r,10),n=parseInt(n,10);var o=function(t){switch(t){case 1:return 0;case 10:return 1;case 100:return 91;case 1e3:case 1e4:return 991;case 1e5:return 40991;case 1e6:return 740991;case 1e7:return 4740991;case 1e8:return 54740991}throw new Error("Exponent is too large.")}(t=u(e)),a=function(t){switch(t){case 1:return 9007199254740991;case 10:return 900719925474099;case 100:return 90071992547409;case 1e3:return 9007199254740;case 1e4:return 900719925474;case 1e5:return 90071992547;case 1e6:return 9007199254;case 1e7:return 900719925;case 1e8:return 90071992}throw new Error("Exponent is too large.")}(t);return s(r<a||r===a&&n<=o,"Fixed number string exceeds 2^53-1."),i*(r*t+n)},h.toFloat=function(t,e){return Number(h.toFixed(t,e))},h.checkNum=function(t){return/^[1-9]+[0-9]*]*$/.test(t)},h.fromFloat=function(t,e){return s("number"==typeof t&&isFinite(t)),s(Number.isSafeInteger(e)),h.fromFixed(t.toFixed(e),e)}}).call(this,i(0).Buffer,i(11))},function(t,e,i){"use strict";(function(t){
/*!
 * encoding.js - encoding utils for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const{U64:r,I64:s}=i(97),n=r.UINT64_MAX.shrn(7),o=Number.MAX_SAFE_INTEGER,a=e;function h(t,e){return t<0&&(t=~t,0===e)&&(t+=1),0==(4292870144&t)}function c(t,e,i,r){let s=!1,n=(e<0&&(e=-e,s=!0),e*(1/4294967296)|0),o=0|e;return s&&(0===o?n=1+~n|0:(n=~n,o=1+~o)),r?(i=t.writeInt32BE(n,i,!0),t.writeInt32BE(o,i,!0)):(i=t.writeInt32LE(o,i,!0),t.writeInt32LE(n,i,!0))}function u(t,e){this.size=t,this.value=e}function l(t,e){if(!t)throw new a.EncodingError(e,"Out of bounds read",l)}function f(t,e,i){if(!t)throw new a.EncodingError(e,i,f)}a.SEED_SALT=t.from("Bitcoin seed","ascii"),a.MNEMONIC_SALT="bookmansoft",a.DUMMY=t.from([0]),a.ONE_HASH=t.from("0100000000000000000000000000000000000000000000000000000000000000","hex"),a.RANDOM_HASH=t.from("0101110000000001010000010000000001100000000000100000000000010000","hex"),a.DefaultChainCode=t.from("1111111111111111111111111111111111111111111111111111111111111111","hex"),a.ZERO_HASH=t.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),a.MAX_HASH=t.from("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff","hex"),a.ZERO_CID="000000000000000000000000000000000000000000000000000000000000000000000000",a.MAX_CID="ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",a.ZERO_CID_BUF=t.from("000000000000000000000000000000000000000000000000000000000000000000000000","hex"),a.MAX_CID_BUF=t.from("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff","hex"),a.ZERO_OID="000000000000000000000000000000000000",a.MAX_OID="zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz",a.NULL_HASH="0000000000000000000000000000000000000000000000000000000000000000",a.HIGH_HASH="ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",a.ZERO_HASH160=t.from("0000000000000000000000000000000000000000","hex"),a.MAX_HASH160=t.from("ffffffffffffffffffffffffffffffffffffffff","hex"),a.ZERO_HASH160_HEX="0000000000000000000000000000000000000000",a.MAX_HASH160_HEX="ffffffffffffffffffffffffffffffffffffffff",a.ZERO_KEY=t.from("000000000000000000000000000000000000000000000000000000000000000000","hex"),a.ZERO_KEY_HEX="000000000000000000000000000000000000000000000000000000000000000000",a.MAX_KEY=t.from("111111111111111111111111111111111111111111111111111111111111111111","hex"),a.MAX_KEY_HEX="111111111111111111111111111111111111111111111111111111111111111111",a.ZERO_SIG=t.from("00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","hex"),a.ZERO_SIG64=t.from("00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","hex"),a.ZERO_U32=t.from("00000000","hex"),a.MAX_U32=t.from("ffffffff","hex"),a.ZERO_U32_NUM=0,a.MAX_U32_NUM=4294967295,a.ZERO_U64=t.from("0000000000000000","hex"),a.MAX_U64=t.from("ffffffffffffffff","hex"),a.readU64=function(t,e){var i=t.readUInt32LE(e+4,!0);t=t.readUInt32LE(e,!0);return f(0==(4292870144&i),e,"Number exceeds 2^53-1"),4294967296*i+t},a.readU64BE=function(t,e){var i=t.readUInt32BE(e,!0);t=t.readUInt32BE(e+4,!0);return f(0==(4292870144&i),e,"Number exceeds 2^53-1"),4294967296*i+t},a.readI64=function(t,e){var i=t.readInt32LE(e+4,!0);return f(h(i,t=t.readUInt32LE(e,!0)),"Number exceeds 2^53-1"),4294967296*i+t},a.readI64BE=function(t,e){var i=t.readInt32BE(e,!0);return f(h(i,t=t.readUInt32BE(e+4,!0)),"Number exceeds 2^53-1"),4294967296*i+t},a.writeU64=function(t,e,i){return c(t,e,i,!1)},a.writeU64BE=function(t,e,i){return c(t,e,i,!0)},a.writeI64=function(t,e,i){return c(t,e,i,!1)},a.writeI64BE=function(t,e,i){return c(t,e,i,!0)},a.readU64N=function(t,e){return r.readLE(t,e)},a.readU64BEN=function(t,e){return r.readBE(t,e)},a.readI64N=function(t,e){return s.readLE(t,e)},a.readI64BEN=function(t,e){return s.readBE(t,e)},a.writeU64N=function(t,e,i){return f(!e.sign,i,"Signed"),e.writeLE(t,i)},a.writeU64BEN=function(t,e,i){return f(!e.sign,i,"Signed"),e.writeBE(t,i)},a.writeI64N=function(t,e,i){return f(e.sign,i,"Not signed"),e.writeLE(t,i)},a.writeI64BEN=function(t,e,i){return f(e.sign,i,"Not signed"),e.writeBE(t,i)},a.readVarint=function(t,e){let i,r;switch(l(e<t.length,e),t[e]){case 255:l(e+(r=9)<=t.length,e),f(4294967295<(i=a.readU64(t,e+1)),e,"Non-canonical varint");break;case 254:l(e+(r=5)<=t.length,e),f(65535<(i=t.readUInt32LE(e+1,!0)),e,"Non-canonical varint");break;case 253:l(e+(r=3)<=t.length,e),f(253<=(i=t[e+1]|t[e+2]<<8),e,"Non-canonical varint");break;default:r=1,i=t[e]}return new u(r,i)},a.writeVarint=function(t,e,i){return e<253?t[i++]=255&e:e<=65535?(t[i++]=253,t[i++]=255&e,t[i++]=e>>8&255):e<=4294967295?(t[i++]=254,t[i++]=255&e,t[i++]=e>>8&255,t[i++]=e>>16&255,t[i++]=e>>>24):(t[i++]=255,i=a.writeU64(t,e,i)),i},a.sizeVarint=function(t){return t<253?1:t<=65535?3:t<=4294967295?5:9},a.readVarintN=function(t,e){if(l(e<t.length,e),255===t[e]){const i=(l(e+9<=t.length,e),a.readU64N(t,e+1));return f(0!==i.hi,e,"Non-canonical varint"),new u(9,i)}const{size:i,value:s}=a.readVarint(t,e);return new u(i,r.fromInt(s))},a.writeVarintN=function(t,e,i){return f(!e.sign,i,"Signed"),0!==e.hi?(t[i++]=255,a.writeU64N(t,e,i)):a.writeVarint(t,e.toInt(),i)},a.sizeVarintN=function(t){return f(!t.sign,0,"Signed"),0!==t.hi?9:a.sizeVarint(t.toInt())},a.readVarint2=function(t,e){let i=0,r=0;for(;;){l(e<t.length,e);var s=t[e++];if(r++,f(i<=70368744177663-(127&s),e,"Number exceeds 2^53-1"),i=128*i+(127&s),0==(128&s))break;f(i!==o,e,"Number exceeds 2^53-1"),i++}return new u(r,i)},a.writeVarint2=function(t,e,i){var r=[];let s=0;for(;r[s]=127&e|(s?128:0),!(e<=127);)e=(e-e%128)/128-1,s++;for(l(i+s+1<=t.length,i);t[i++]=r[s],s--;);return i},a.sizeVarint2=function(t){let e=0;for(;e++,!(t<=127);)t=(t-t%128)/128-1;return e},a.readVarint2N=function(t,e){var i=new r;let s=0;for(;;){l(e<t.length,e);var o=t[e++];if(s++,f(i.lte(n),e,"Number exceeds 2^64-1"),i.ishln(7).iorn(127&o),0==(128&o))break;f(!i.eq(r.UINT64_MAX),e,"Number exceeds 2^64-1"),i.iaddn(1)}return new u(s,i)},a.writeVarint2N=function(t,e,i){if(f(!e.sign,i,"Signed"),0===e.hi)return a.writeVarint2(t,e.toInt(),i);e=e.clone();var r=[];let s=0;for(;r[s]=e.andln(127)|(s?128:0),!e.lten(127);)e.ishrn(7).isubn(1),s++;for(f(i+s+1<=t.length,i,"Out of bounds write");t[i++]=r[s],s--;);return i},a.sizeVarint2N=function(t){if(f(!t.sign,0,"Signed"),0===t.hi)return a.sizeVarint2(t.toInt());t=t.clone();let e=0;for(;e++,!t.lten(127);)t.ishrn(7).isubn(1);return e},a.U8=function(e){var i=t.allocUnsafe(1);return i[0]=e>>>0,i},a.U32=function(e){var i=t.allocUnsafe(4);return i.writeUInt32LE(e,0,!0),i},a.U32BE=function(e){var i=t.allocUnsafe(4);return i.writeUInt32BE(e,0,!0),i},a.sizeVarBytes=function(t){return a.sizeVarint(t.length)+t.length},a.sizeVarlen=function(t){return a.sizeVarint(t)+t},a.sizeVarString=function(e,i){return"string"!=typeof e?a.sizeVarBytes(e):(e=t.byteLength(e,i),a.sizeVarint(e)+e)},a.EncodingError=function t(e,i,r){if(!(this instanceof t))return new t(e,i,r);Error.call(this),this.type="EncodingError",this.message=i+` (offset=${e}).`,Error.captureStackTrace&&Error.captureStackTrace(this,r||t)},Object.setPrototypeOf(a.EncodingError.prototype,Error.prototype)}).call(this,i(0).Buffer)},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){var i;e&&(t.super_=e,(i=function(){}).prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t)}},function(t,e,i){"use strict";(function(e){
/*!
 * staticwriter.js - buffer writer for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=i(4),n=i(8),o=e.alloc(0);let a=null;function h(t){if(!(this instanceof h))return new h(t);this.data=t?e.allocUnsafe(t):o,this.offset=0}h.pool=function(t){var i;return t<=102400?(a=a||e.allocUnsafeSlow(102400),(i=new h(0)).data=a.slice(0,t),i):new h(t)},h.prototype.render=function(t=!0){var e=this.data;return t&&r(this.offset===e.length),this.destroy(),e},h.prototype.getSize=function(){return this.offset},h.prototype.seek=function(t){this.offset+=t},h.prototype.destroy=function(){this.data=o,this.offset=0},h.prototype.writeU8=function(t){this.offset=this.data.writeUInt8(t>>>=0,this.offset,!0)},h.prototype.writeU16=function(t){this.offset=this.data.writeUInt16LE(t>>>=0,this.offset,!0)},h.prototype.writeU16BE=function(t){this.offset=this.data.writeUInt16BE(t>>>=0,this.offset,!0)},h.prototype.writeU32=function(t){this.offset=this.data.writeUInt32LE(t>>>=0,this.offset,!0)},h.prototype.writeU32BE=function(t){this.offset=this.data.writeUInt32BE(t>>>=0,this.offset,!0)},h.prototype.writeU64=function(t){this.offset=s.writeU64(this.data,t,this.offset)},h.prototype.writeU64BE=function(t){this.offset=s.writeU64BE(this.data,t,this.offset)},h.prototype.writeU64N=function(t){this.offset=s.writeU64N(this.data,t,this.offset)},h.prototype.writeU64BEN=function(t){this.offset=s.writeU64BEN(this.data,t,this.offset)},h.prototype.writeI8=function(t){this.offset=this.data.writeInt8(t,this.offset,!0)},h.prototype.writeI16=function(t){this.offset=this.data.writeInt16LE(t,this.offset,!0)},h.prototype.writeI16BE=function(t){this.offset=this.data.writeInt16BE(t,this.offset,!0)},h.prototype.writeI32=function(t){this.offset=this.data.writeInt32LE(t,this.offset,!0)},h.prototype.writeI32BE=function(t){this.offset=this.data.writeInt32BE(t,this.offset,!0)},h.prototype.writeI64=function(t){this.offset=s.writeI64(this.data,t,this.offset)},h.prototype.writeI64BE=function(t){this.offset=s.writeI64BE(this.data,t,this.offset)},h.prototype.writeI64N=function(t){this.offset=s.writeI64N(this.data,t,this.offset)},h.prototype.writeI64BEN=function(t){this.offset=s.writeI64BEN(this.data,t,this.offset)},h.prototype.writeFloat=function(t){this.offset=this.data.writeFloatLE(t,this.offset,!0)},h.prototype.writeFloatBE=function(t){this.offset=this.data.writeFloatBE(t,this.offset,!0)},h.prototype.writeDouble=function(t){this.offset=this.data.writeDoubleLE(t,this.offset,!0)},h.prototype.writeDoubleBE=function(t){this.offset=this.data.writeDoubleBE(t,this.offset,!0)},h.prototype.writeVarint=function(t){this.offset=s.writeVarint(this.data,t,this.offset)},h.prototype.writeVarintN=function(t){this.offset=s.writeVarintN(this.data,t,this.offset)},h.prototype.writeVarint2=function(t){this.offset=s.writeVarint2(this.data,t,this.offset)},h.prototype.writeVarint2N=function(t){this.offset=s.writeVarint2N(this.data,t,this.offset)},h.prototype.writeBytes=function(t){0!==t.length&&(t.copy(this.data,this.offset),this.offset+=t.length)},h.prototype.writeVarBytes=function(t){this.writeVarint(t.length),this.writeBytes(t)},h.prototype.copy=function(t,e,i){var r=i-e;0!=r&&(t.copy(this.data,this.offset,e,i),this.offset+=r)},h.prototype.writeString=function(t,i){var r;0!==t.length&&(r=e.byteLength(t,i),this.data.write(t,this.offset,i),this.offset+=r)},h.prototype.writeHash=function(t){"string"!=typeof t?(r(32===t.length),this.writeBytes(t)):(r(64===t.length),this.data.write(t,this.offset,"hex"),this.offset+=32)},h.prototype.writeVarString=function(t,i){var r;0===t.length?this.writeVarint(0):(r=e.byteLength(t,i),this.writeVarint(r),this.data.write(t,this.offset,i),this.offset+=r)},h.prototype.writeNullString=function(t,e){this.writeString(t,e),this.writeU8(0)},h.prototype.writeChecksum=function(){var t=this.data.slice(0,this.offset);n.hash256(t).copy(this.data,this.offset,0,4),this.offset+=4},h.prototype.fill=function(t,e){r(0<=e),0!==e&&(this.data.fill(t,this.offset,this.offset+e),this.offset+=e)},t.exports=h}).call(this,i(0).Buffer)},function(t,e,i){(function(t){const r=i(3).revHex,s={propSale:"sale",coinbase:"coinbase",notify:"notify",scRegister:"scRegister",scUpdate:"scUpdate",scState:"scState",cpRegister:"cpRegister",cpChange:"cpChange",contractCreate:"contractCreate",contractExecute:"contractExecute",contractPromise:"contractPromise",propCreate:"new",propExchange:"exchange",propFound:"found",htlcSuggest:"htlc1",htlcAssent:"htlc2",comment:"comment",vote:"vote",scRun:"scrun",scNotify:"scnotify",erIssue:"erIssue",erAbolish:"erAbolish",enchanceCp:"enchanceCp"};var n=Object.keys(s).reduce((t,e)=>(s[e]!=s.propCreate&&s[e]!=s.propExchange&&s[e]!=s.propFound&&s[e]!=s.htlcSuggest&&s[e]!=s.htlcAssent&&s[e]!=s.contractPromise&&(t[e]=s[e]),t),{});const o=i(374);e.NotifyMsg=class e{constructor(t,e,i,r){this.oper=t,this.sn=e,this.h=i,this.body=r}static fromRaw(t){try{var i=JSON.parse(t.toString());return new e(i.oper,i.sn,i.h,i.body)}catch(t){}return null}toRaw(){return t.from(JSON.stringify({oper:this.oper,sn:this.sn,h:this.h,body:this.body}))}},e.PropStatus={Sale:2,Borrow:3,Delete:4,Ready:9},e.HtlcStatus={Init:0,Sent:1,Assent:2,Deal:3,Finished:4,Cancel:9},e.ContractStatus={None:0,CreatedOnMem:2,Obsolete:3,Promised:4,Expired:5,Confirmed:6,Exchanged:7,Backed:8},e.ContractType=s,e.ContractTypeExecutable=n,e.ContractEnvType={Wallet:2,Mempool:3,Block:5},e.BlockFinalType={Final:0,Waiting:1,Expired:2},e.VerifyCode={Failed:0,Success:1,StockOffering:1001,StockCooling:1002,WrongPrice:1003,WrongFee:1004,WrongPublisher:1005,WrongSum:1006,WrongBonus:1007,SnapNull:1008,SignFailed:1009,WrongHeight:1010,WrongFormat:1011,StockAccountNotExist:1012,StockAccountNotEnoughSum:1013,StockOfferExpired:1014,FundNotEnough:1015,StockCircledependence:1016,AccountSequenceWrong:1017,NotExistCp:1018,NotExistER:1019,SignatureNotMatch:1020,DuplicateEr:1021,IssueError:1022,CreditError:1023,AbolishTimeError:1025,AbolishRootError:1026},e.getVerifyMsg=function(t){return o[t]},e.Transform=class{constructor(t){this.content=t.replace(/(\/\*(\n|.)*?\*\/)/g,"").replace(/(\n)|(\r)/g," ")}replace(t){let e=this.content;for(var i of Object.keys(t))if("string"==typeof t[i]&&0==t[i].indexOf("0x")){var s=(t[i].length-2)/2;let n=s.toString(16);n.length%2!=0&&(n="0"+n),n=r(n),s<=75?e=e.replace(new RegExp("var_"+i,"g"),`0x${n} `+t[i]):s<=255?e=e.replace(new RegExp("var_"+i,"g"),`0x4c 0x${n} `+t[i]):s<=65535?e=e.replace(new RegExp("var_"+i,"g"),`0x4d 0x${n} `+t[i]):s<=4294967295&&(e=e.replace(new RegExp("var_"+i,"g"),`0x4e 0x${n} `+t[i]))}else e=e.replace(new RegExp("var_"+i,"g"),t[i]);return e}},e.ContractState={Normal:1,Frozen:2,Destroy:3}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(t){
/*!
 * digest-browser.js - hash functions for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(111),n=i(353),o=t.allocUnsafe(64);e.hash=function(e,i){return"sha256"===e?n.digest(i):(e=s[e],r(null!=e,"Unknown algorithm."),t.from(e().update(i).digest()))},e.ripemd160=function(t){return e.hash("ripemd160",t)},e.sha1=function(t){return e.hash("sha1",t)},e.sha256=function(t){return n.digest(t)},e.hash160=function(t){return e.hash("ripemd160",n.digest(t))},e.hash256=function(t){return n.hash256(t)},e.root256=function(t,i){var s=o;return r(32===t.length),r(32===i.length),t.copy(s,0),i.copy(s,32),e.hash256(s)},e.hmac=function(e,i,n){return e=s[e],r(null!=e,"Unknown algorithm."),e=s.hmac(e,n),t.from(e.update(i).digest())}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * consensus.js - consensus constants and helpers for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1),s=i(38);e.ROOT="xxxxxxxx-vallnet-root-xxxxxxxxxxxxxx",e.COIN=1e8,e.BASE_REWARD=50*e.COIN,e.VALLNET_HEARTBEAT=600,e.BLOCK_DAY=144,e.retargetInterval=14*e.BLOCK_DAY,e.targetTimespan=e.VALLNET_HEARTBEAT*e.retargetInterval,e.MAX_MONEY=21e6*e.COIN,e.ORIGINAL=e.MAX_MONEY/10,e.GRAM=100,e.MINPROPVALUE=100*e.GRAM,e.registerFee=e.COIN,e.contractConfirmation=1,e.TRANSACTION_PERIOD=10,e.HTLC_CANCEL_PERIOD=72,e.SmartContractMnemonic={phrase:"legal winner thank year wave sausage worth useful legal winner thank yellow",language:"english",passphrase:"bookmansoft"},e.getRealValue=function(t,e){return t*Math.pow(e,.5)},e.getVoteZone=function(t){return 1+(t/e.retargetInterval|0)},e.getRealValues=function(t,i){let r=0;for(const n of t){var s=n.getDepth(i);s<1||n.getReturnType(106)||(r+=e.getRealValue(n.value,s))}return r},e.HALF_REWARD=Math.floor(e.BASE_REWARD/2),e.MAX_BLOCK_SIZE=1e7,e.MAX_RAW_BLOCK_SIZE=4e7,e.MAX_BLOCK_WEIGHT=4e7,e.MAX_PACKING_SIZE=16,e.MAX_BLOCK_SIGOPS=2e5,e.MAX_BLOCK_SIGOPS_COST=8e5,e.VERSION_TOP_BITS=536870912,e.VERSION_TOP_MASK=3758096384,e.COINBASE_MATURITY=100,e.STOCK_ORIENT=5e6,e.STOCK_MAX_PRICE=5e6,e.STOCK_ADDED_SINGLE=1e6,e.STOCK_ADDED=1e7,e.STOCK_TRADE_SINGLE=100,e.STOCK_MAX_TRADE_SINGLE=1e4,e.STOCK_OFFER_PERIOD=14,e.STOCK_OFFER_CD=28,e.WITNESS_SCALE_FACTOR=4,e.LOCKTIME_THRESHOLD=5e8,e.SEQUENCE_DISABLE_FLAG=1<<31>>>0,e.SEQUENCE_TYPE_FLAG=1<<22,e.SEQUENCE_GRANULARITY=9,e.SEQUENCE_MASK=65535,e.MAX_SCRIPT_SIZE=1e4,e.MAX_SCRIPT_STACK=1e3,e.MAX_SCRIPT_PUSH=520,e.MAX_SCRIPT_OPS=201,e.MAX_MULTISIG_PUBKEYS=20,e.MAX_CACHE_REORGAN_TX=2e5,e.compact2BN=function(t){if(0===t)return new s(0);var e=t>>>24,i=t>>>23&1;let r,n=8388607&t;return e<=3?(n>>>=8*(3-e),r=new s(n)):(r=new s(n)).iushln(8*(e-3)),i&&r.ineg(),r},e.bn2Compact=function(t){if(t.isZero())return 0;let e,i=t.byteLength(),r=(i<=3?(e=t.toNumber(),e<<=8*(3-i)):e=t.ushrn(8*(i-3)).toNumber(),8388608&e&&(e>>=8,i++),i<<24|e);return t.isNeg()&&(r|=8388608),r>>>0},e.verifyPOW=function(t,i){return!(i=e.compact2BN(i)).isNeg()&&!i.isZero()&&!new s(t,"le").gt(i)},e.getReward=function(t,i){return r(0<=t,"Bad height for reward."),33<=(t=Math.floor(t/i))?0:0===t?e.BASE_REWARD:e.HALF_REWARD>>>t-1},e.hasBit=function(t,i){return(t&e.VERSION_TOP_MASK)>>>0===e.VERSION_TOP_BITS&&0!=(t&1<<i)}},function(t,e,i){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var r=i(0),s=r.Buffer;function n(t,e){for(var i in t)e[i]=t[i]}function o(t,e,i){return s(t,e,i)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=r:(n(r,e),e.Buffer=o),o.prototype=Object.create(s.prototype),n(s,o),o.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return s(t,e,i)},o.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");return t=s(t),void 0!==e?"string"==typeof i?t.fill(e,i):t.fill(e):t.fill(0),t},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return s(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e){var i,r;t=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}try{i="function"==typeof setTimeout?setTimeout:s}catch(t){i=s}try{r="function"==typeof clearTimeout?clearTimeout:n}catch(t){r=n}function o(t){if(i===setTimeout)return setTimeout(t,0);if((i===s||!i)&&setTimeout)return(i=setTimeout)(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}var a,h=[],c=!1,u=-1;function l(){c&&a&&(c=!1,a.length?h=a.concat(h):u=-1,h.length)&&f()}function f(){if(!c){for(var t=o(l),e=(c=!0,h.length);e;){for(a=h,h=[];++u<e;)a&&a[u].run();u=-1,e=h.length}a=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===n||!r)&&clearTimeout)return(r=clearTimeout)(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function p(){}t.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];h.push(new d(t,e)),1!==h.length||c||o(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=p,t.addListener=p,t.once=p,t.off=p,t.removeListener=p,t.removeAllListeners=p,t.emit=p,t.prependListener=p,t.prependOnceListener=p,t.listeners=function(t){return[]},t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(t,e){var i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";(function(e){
/*!
 * address.js - address object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=i(18),n=i(4),o=i(3),a=i(8),h=i(2),c=i(6),u=i(56),l=i(226);class f{constructor(t){this.hash=n.ZERO_HASH160,this.type=f.types.PUBKEYHASH,this.version=-1,this.network=s.primary,t&&this.fromOptions(t)}fromOptions(t){return"string"==typeof t?this.fromString(t):this.fromHash(t.hash,t.type,t.version,t.network)}static fromOptions(t){return(new f).fromOptions(t)}getHash(t){return"hex"===t?this.hash.toString(t):this.hash}isNull(){if(20===this.hash.length)return this.hash.equals(n.ZERO_HASH160);if(32===this.hash.length)return this.hash.equals(n.ZERO_HASH);for(let t=0;t<this.hash.length;t++)if(0!==this.hash[t])return!1;return!0}equals(t){return r(t instanceof f),this.network===t.network&&this.type===t.type&&this.version===t.version&&this.hash.equals(t.hash)}getType(){return f.typesByVal[this.type].toLowerCase()}getPrefix(t){t=t||this.network;var e=(t=s.get(t)).addressPrefix;switch(this.type){case f.types.PUBKEYHASH:return e.pubkeyhash;case f.types.SCRIPTHASH:return e.scripthash;case f.types.WITNESS:if(20===this.hash.length)return e.witnesspubkeyhash;if(32===this.hash.length)return e.witnessscripthash}return-1}getSize(){let t=5+this.hash.length;return-1!==this.version&&(t+=2),t}toRaw(t){var e=this.getSize();e=new c(e),t=this.getPrefix(t);return r(-1!==t,"Not a valid address prefix."),e.writeU8(t),-1!==this.version&&(e.writeU8(this.version),e.writeU8(0)),e.writeBytes(this.hash),e.writeChecksum(),e.render()}toBase58(t){return u.encode(this.toRaw(t))}toBech32(t){var e=this.version,i=this.hash;r(-1!==e,"Cannot convert non-program address to bech32."),t=t||this.network,t=(t=s.get(t)).addressPrefix.bech32;return l.encode(t,e,i)}fromString(t,e){if(r("string"==typeof t),r(0<t.length),r(t.length<=100),function(t){let e=!1,i=!1;for(let n=0;n<t.length;n++){var s=t.charCodeAt(n);if(!(48<=s&&s<=57)&&(32&s?(r(97<=s&&s<=122),e=!0):(r(65<=s&&s<=90),i=!0),e&&i))return 1}}(t))return this.fromBase58(t,e);try{return this.fromBech32(t,e)}catch(i){return this.fromBase58(t,e)}}static fromString(t,e){return(new f).fromString(t,e)}toString(t){return-1!==this.version?this.toBech32(t):this.toBase58(t)}fromBase58(t,e){if(r("string"==typeof t),55<t.length)throw new Error("Address is too long.");return this.fromRaw(u.decode(t),e)}fromBech32(t,e){r("string"==typeof t);var i=f.types.WITNESS;t=l.decode(t);return e=s.fromBech32(t.hrp,e),this.fromHash(t.hash,i,t.version,e)}static fromBech32(t,e){return(new f).fromBech32(t,e)}static fromBase58(t,e){return(new f).fromBase58(t,e)}inspect(){return"<Address: type="+this.getType()+" version="+this.version+" str="+this.toString()+">"}fromRaw(t,e){var i=new h(t,!0);if(40<t.length)throw new Error("Address is too long.");var r=i.readU8();e=s.fromAddress(r,e),r=f.getType(r,e);let n=-1;if(25<t.length&&(n=i.readU8(),0!==i.readU8()))throw new Error("Address version padding is non-zero.");return t=i.readBytes(i.left()-4),i.verifyChecksum(),this.fromHash(t,r,n,e)}static fromRaw(t,e){return(new f).fromRaw(t,e)}fromScript(t){var e=t.getPubkey();return e?(this.hash=a.hash160(e),this.type=f.types.PUBKEYHASH,this.version=-1,this):(e=t.getPubkeyhash())?(this.hash=e,this.type=f.types.PUBKEYHASH,this.version=-1,this):(e=t.getScripthash())?(this.hash=e,this.type=f.types.SCRIPTHASH,this.version=-1,this):(e=t.getProgram())&&!e.isMalformed()?(this.hash=e.data,this.type=f.types.WITNESS,this.version=e.version,this):t.isMultisig()?(this.hash=t.hash160(),this.type=f.types.SCRIPTHASH,this.version=-1,this):null}static fromScript(t){return(new f).fromScript(t)}fromWitness(t){var[,e]=t.getPubkeyhashInput();return e?(this.hash=a.hash160(e),this.type=f.types.WITNESS,this.version=0,this):(e=t.getScripthashInput())?(this.hash=a.sha256(e),this.type=f.types.WITNESS,this.version=0,this):null}fromInputScript(t){var[,e]=t.getPubkeyhashInput();return e?(this.hash=a.hash160(e),this.type=f.types.PUBKEYHASH,this.version=-1,this):(e=t.getScripthashInput())?(this.hash=a.hash160(e),this.type=f.types.SCRIPTHASH,this.version=-1,this):null}static fromWitness(t){return(new f).fromWitness(t)}static fromInputScript(t){return(new f).fromInputScript(t)}fromHash(t,i,n,a){return"string"==typeof t&&(t=e.from(t,"hex")),"string"==typeof i&&(i=f.types[i.toUpperCase()],r(null!=i,"Not a valid address type.")),null==i&&(i=f.types.PUBKEYHASH),null==n&&(n=-1),a=s.get(a),r(e.isBuffer(t)),r(o.isU8(i)),r(o.isI8(n)),r(i>=f.types.PUBKEYHASH&&i<=f.types.WITNESS,"Not a valid address type."),-1===n?(r(i!==f.types.WITNESS,"Wrong version (witness)"),r(20===t.length,"Hash is the wrong size.")):(r(i===f.types.WITNESS,"Wrong version (non-witness)."),r(0<=n&&n<=16,"Bad program version."),0===n&&i===f.types.WITNESS&&r(20===t.length||32===t.length,"Witness program hash is the wrong size."),r(2<=t.length&&t.length<=40,"Hash is the wrong size.")),this.hash=t,this.type=i,this.version=n,this.network=a,this}static fromHash(t,e,i,r){return(new f).fromHash(t,e,i,r)}fromPubkeyhash(t,e){var i=f.types.PUBKEYHASH;return r(20===t.length,"P2PKH must be 20 bytes."),this.fromHash(t,i,-1,e)}static fromPubkeyhash(t,e){return(new f).fromPubkeyhash(t,e)}fromScripthash(t,e){var i=f.types.SCRIPTHASH;return r(t&&20===t.length,"P2SH must be 20 bytes."),this.fromHash(t,i,-1,e)}static fromScripthash(t,e){return(new f).fromScripthash(t,e)}fromWitnessPubkeyhash(t,e){var i=f.types.WITNESS;return r(t&&20===t.length,"P2WPKH must be 20 bytes."),this.fromHash(t,i,0,e)}static fromWitnessPubkeyhash(t,e){return(new f).fromWitnessPubkeyhash(t,e)}fromWitnessScripthash(t,e){var i=f.types.WITNESS;return r(t&&32===t.length,"P2WPKH must be 32 bytes."),this.fromHash(t,i,0,e)}static fromWitnessScripthash(t,e){return(new f).fromWitnessScripthash(t,e)}fromProgram(t,i,s){var n=f.types.WITNESS;return r(0<=t,"Bad version for witness program."),"string"==typeof i&&(i=e.from(i,"hex")),this.fromHash(i,n,t,s)}static fromProgram(t,e,i){return(new f).fromProgram(t,e,i)}isPubkeyhash(){return this.type===f.types.PUBKEYHASH}isScripthash(){return this.type===f.types.SCRIPTHASH}isWitnessPubkeyhash(){return 0===this.version&&20===this.hash.length}isWitnessScripthash(){return 0===this.version&&32===this.hash.length}isWitnessMasthash(){return 1===this.version&&32===this.hash.length}isProgram(){return-1!==this.version}isUnknown(){return-1!==this.version&&(0<this.version||20!==this.hash.length&&32!==this.hash.length)}static getHash(t,i,r){if(!t)throw new Error("Object is not an address.");let n;if("string"==typeof t){if(40===t.length||64===t.length)return"hex"===i?t:e.from(t,"hex");n=f.fromString(t,r).hash}else if(e.isBuffer(t)){if(20!==t.length&&32!==t.length)throw new Error("Object is not an address.");n=t}else{if(!(t instanceof f))throw new Error("Object is not an address.");if(n=t.hash,r&&(r=s.get(r),t.network!==r))throw new Error("Network mismatch for address.")}return"hex"===i?n.toString("hex"):n}static getType(t,e){switch(e=e.addressPrefix,t){case e.pubkeyhash:return f.types.PUBKEYHASH;case e.scripthash:return f.types.SCRIPTHASH;case e.witnesspubkeyhash:case e.witnessscripthash:return f.types.WITNESS;default:throw new Error("Unknown address prefix.")}}}f.types={PUBKEYHASH:2,SCRIPTHASH:3,WITNESS:4},f.typesByVal=o.reverse(f.types),t.exports=f}).call(this,i(0).Buffer)},function(t,e,i){"use strict";var r="object"==typeof Reflect?Reflect:null,s=r&&"function"==typeof r.apply?r.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)},n=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)},o=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(t,e){return new Promise((function(i,r){function s(i){t.removeListener(e,n),r(i)}function n(){"function"==typeof t.removeListener&&t.removeListener("error",s),i([].slice.call(arguments))}var o,a,h;m(t,e,n,{once:!0}),"error"!==e&&(a=s,h={once:!0},"function"==typeof(o=t).on)&&m(o,"error",a,h)}))},(a.EventEmitter=a).prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var h=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function l(t,e,i,r){var s,n;return c(i),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,i.listener||i),s=t._events),n=s[e]),void 0===n?(n=s[e]=i,++t._eventsCount):("function"==typeof n?n=s[e]=r?[i,n]:[n,i]:r?n.unshift(i):n.push(i),0<(s=u(t))&&n.length>s&&!n.warned&&(n.warned=!0,(r=new Error("Possible EventEmitter memory leak detected. "+n.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",r.emitter=t,r.type=e,r.count=n.length,i=r,console)&&console.warn&&console.warn(i)),t}function f(t,e,i){return(e=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(t={fired:!1,wrapFn:void 0,target:t,type:e,listener:i})).listener=i,t.wrapFn=e}function d(t,e,i){if(void 0===(t=t._events))return[];if(void 0===(t=t[e]))return[];if("function"==typeof t)return i?[t.listener||t]:[t];if(i){for(var r=t,s=new Array(r.length),n=0;n<s.length;++n)s[n]=r[n].listener||r[n];return s}return g(t,t.length)}function p(t){var e=this._events;if(void 0!==e){if("function"==typeof(e=e[t]))return 1;if(void 0!==e)return e.length}return 0}function g(t,e){for(var i=new Array(e),r=0;r<e;++r)i[r]=t[r];return i}function m(t,e,i,r){if("function"==typeof t.on)r.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function s(n){r.once&&t.removeEventListener(e,s),i(n)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");h=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var r="error"===t,n=this._events;if(void 0!==n)r=r&&void 0===n.error;else if(!r)return!1;if(r){if((o=0<e.length?e[0]:o)instanceof Error)throw o;throw(r=new Error("Unhandled error."+(o?" ("+o.message+")":""))).context=o,r}var o=n[t];if(void 0===o)return!1;if("function"==typeof o)s(o,this,e);else{var a=o.length,h=g(o,a);for(i=0;i<a;++i)s(h[i],this,e)}return!0},a.prototype.on=a.prototype.addListener=function(t,e){return l(this,t,e,!1)},a.prototype.prependListener=function(t,e){return l(this,t,e,!0)},a.prototype.once=function(t,e){return c(e),this.on(t,f(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,f(this,t,e)),this},a.prototype.off=a.prototype.removeListener=function(t,e){var i,r,s,n,o;if(c(e),void 0!==(r=this._events)&&void 0!==(i=r[t]))if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(s=-1,n=i.length-1;0<=n;n--)if(i[n]===e||i[n].listener===e){o=i[n].listener,s=n;break}if(s<0)return this;if(0===s)i.shift();else{for(var a=i,h=s;h+1<a.length;h++)a[h]=a[h+1];a.pop()}1===i.length&&(r[t]=i[0]),void 0!==r.removeListener&&this.emit("removeListener",t,o||e)}return this},a.prototype.removeAllListeners=function(t){var e,i=this._events;if(void 0!==i)if(void 0===i.removeListener)0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]);else if(0===arguments.length){for(var r,s=Object.keys(i),n=0;n<s.length;++n)"removeListener"!==(r=s[n])&&this.removeAllListeners(r);this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0}else if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;0<=n;n--)this.removeListener(t,e[n]);return this},a.prototype.listeners=function(t){return d(this,t,!0)},a.prototype.rawListeners=function(t){return d(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},a.prototype.listenerCount=p,a.prototype.eventNames=function(){return 0<this._eventsCount?n(this._events):[]}},function(t,e,i){const r=i(7).BlockFinalType;t.exports=class{constructor(t,e){this.data=t,(this.options=e).env&&(this.mode=e.env.mode)}async insert(){}async confirm(){}async unconfirm(){}async erase(){}async verify(){}async onPacking(){return{derive:[]}}isBlockFinal(){return r.Final}get oper(){return this.data&&this.data.oper||"unknown"}isPreVerify(){return!1}async checkFees(){return r.Final!=await this.isBlockFinal()}}},function(t,e,i){"use strict";(function(e){
/*!
 * script.js - script interpreter for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=e.alloc(0),s=i(1),n=i(227),o=i(152),a=i(114),h=i(99),c=i(89),u=i(22),l=u.opcodes,f=u.types,d=u.outputLockType,p=i(9),g=i(26),m=i(8),w=i(133),y=i(23),b=i(4),v=i(314),k=i(3),S=i(20),_=i(2),x=i(6),R=i(13),{ContractType:E,ContractStatus:A}=i(7),M=i(153),O={199:{len:11,list:[6,8]},197:{len:22,list:[9,18]},198:{len:19,list:[6,15]}},I=2;class C{constructor(t){this.raw=r,this.code=[],this.indicator=v.inst(0),t&&this.fromOptions(t)}createScript(t,e=f.PUBKEYHASH){switch(this.clear(),e){case f.PUBKEY:this.$fromPubkey(t);break;case f.PUBKEYHASH:this.$fromPubkeyhash(t);break;case f.PROPEXTEND:this.$fromPkhExtend(t);break;case f.MULTISIG:var[i,r,s]=t;this.$fromMultisig(i,r,s);break;case f.SCRIPTHASH:this.$fromScripthash(t);break;case f.NULLDATA:this.$fromNulldata(t);break;case f.WITNESS:var[i,r,s]=t;this.$fromProgram(i,r,s)}return 0<this.code.length&&this.compile(),this}static createScript(t,e=f.PUBKEYHASH){return(new C).createScript(t,e)}$fromNulldata(t){s(e.isBuffer(t)),s(t.length<=g.MAX_OP_RETURN,"Nulldata too large."),this.pushOp(l.OP_RETURN),this.pushData(t)}$fromPubkey(t){s(e.isBuffer(t)&&(33===t.length||65===t.length)),this.code.push(o.fromPush(t)),this.code.push(o.fromOp(l.OP_CHECKSIG))}$fromPubkeyhash(t){s(e.isBuffer(t)&&20===t.length),this.code.push(o.fromOp(l.OP_DUP)),this.code.push(o.fromOp(l.OP_HASH160)),this.code.push(o.fromPush(t)),this.code.push(o.fromOp(l.OP_EQUALVERIFY)),this.code.push(o.fromOp(l.OP_CHECKSIG))}$fromPkhExtend(t){s(e.isBuffer(t.info)&&t.info.length<=g.MAX_OP_INFO),s(e.isBuffer(t.hash)&&20===t.hash.length),this.code.push(o.fromOp(t.opcode)),this.code.push(o.fromPush(t.info)),this.code.push(o.fromOp(l.OP_DROP)),this.code.push(o.fromOp(l.OP_DUP)),this.code.push(o.fromOp(l.OP_HASH160)),this.code.push(o.fromPush(t.hash)),this.code.push(o.fromOp(l.OP_EQUALVERIFY)),this.code.push(o.fromOp(l.OP_CHECKSIG))}$fromMultisig(t,e,i){s(k.isU8(t)&&k.isU8(e)),s(Array.isArray(i)),s(i.length===e,"`n` keys are required for multisig."),s(1<=t&&t<=e),s(1<=e&&e<=15),this.clear(),this.pushSmall(t);for(const t of i.slice().sort((t,e)=>t.compare(e)))this.pushData(t);this.pushSmall(e),this.pushOp(l.OP_CHECKMULTISIG)}$fromScripthash(t){s(e.isBuffer(t)&&20===t.length),this.code.push(o.fromOp(l.OP_HASH160)),this.code.push(o.fromPush(t)),this.code.push(o.fromOp(l.OP_EQUAL))}$fromProgram(t,i,r){var n;s(k.isU8(t)&&0<=t&&t<=16),s(e.isBuffer(i)&&2<=i.length&&i.length<=40),r&&(n=e.from(JSON.stringify(r)),s(e.isBuffer(n)&&n.length<=g.MAX_OP_INFO),u.OperCodeFromType[r.oper])&&(this.code.push(o.fromOp(u.OperCodeFromType[r.oper])),this.code.push(o.fromPush(n)),this.code.push(o.fromOp(l.OP_DROP))),this.code.push(o.fromSmall(t)),this.code.push(o.fromPush(i))}get length(){return this.code.length}set length(t){return this.code.length=t,this.code.length}fromOptions(t){if(s(t,"Script data is required."),e.isBuffer(t))return this.fromRaw(t);if(Array.isArray(t))return this.fromArray(t);if(t.raw){if(!t.code)return this.fromRaw(t.raw);s(e.isBuffer(t.raw),"Raw must be a Buffer."),this.raw=t.raw}if(t.code){if(!t.raw)return this.fromArray(t.code);s(Array.isArray(t.code),"Code must be an array."),this.code=t.code}return this}static fromOptions(t){return(new C).fromOptions(t)}entries(){return this.code.entries()}[Symbol.iterator](){return this.code[Symbol.iterator]()}toArray(){return this.code.slice()}fromArray(t){s(Array.isArray(t)),this.clear();for(const e of t)this.push(e);return this.compile()}static fromArray(t){return(new C).fromArray(t)}toItems(){var t=[];for(const i of this.code){var e=i.toPush();if(!e)throw new Error("Non-push opcode in script.");t.push(e)}return t}fromItems(t,e=!0){s(Array.isArray(t));var i=[];if(e)this.clear();else{let t=this.shift();for(;t;)i.push(t),t=this.shift()}for(const e of t)this.pushData(e);for(const t of i)this.push(t);return this.compile()}static fromItems(t){return(new C).fromItems(t)}toStack(){return new a(this.toItems())}fromStack(t,e=!0){return this.fromItems(t.items,e)}static fromStack(t){return(new C).fromStack(t)}clone(){return(new C).inject(this)}inject(t){return this.raw=t.raw,this.code=t.code.slice(),this}equals(t){return s(C.isScript(t)),this.raw.equals(t.raw)}compare(t){return s(C.isScript(t)),this.raw.compare(t.raw)}clear(){return this.raw=r,this.code.length=0,this}inspect(){return`<Script: ${this.toString()}>`}toString(){var t=[];for(const e of this.code)t.push(e.toFormat());return t.join(" ")}toASM(t){this.isNulldata()&&(t=!1);var e=[];for(const i of this.code)e.push(i.toASM(t));return e.join(" ")}compile(){if(0===this.code.length)return this.clear();let t=0;for(const e of this.code)t+=e.getSize();var e=new x(t);for(const t of this.code)t.toWriter(e);return this.raw=e.render(),this}toWriter(t){return t.writeVarBytes(this.raw),t}toRaw(){return this.raw}toJSON(){return this.toRaw().toString("hex")}fromJSON(t){return s("string"==typeof t,"Code must be a string."),this.fromRaw(e.from(t,"hex"))}static fromJSON(t){return(new C).fromJSON(t)}getSubscript(t){if(0===t)return this.clone();var e=new C;for(let r=t;r<this.code.length;r++){var i=this.code[r];if(-1===i.value)break;e.code.push(i)}return e.compile()}removeSeparators(){let t=!1;for(const e of this.code){if(-1===e.value)break;if(e.value===l.OP_CODESEPARATOR){t=!0;break}}if(!t)return this;var e=new C;for(const t of this.code){if(-1===t.value)break;t.value!==l.OP_CODESEPARATOR&&e.code.push(t)}return e.compile()}getLocktime(){return 2<=this.code.length&&this.getOp(1)==l.OP_CHECKLOCKTIMEVERIFY?this.getInt(0,!1,5):-1}getSequence(){return 2<=this.code.length&&this.getOp(1)==l.OP_CHECKSEQUENCEVERIFY?this.getInt(0,!1,5):-1}getLockStatus(){let t=d.NOCHECK,e=-1,i=-1;var r,s;return 2<=this.code.length&&this.getOp(1)==l.OP_CHECKLOCKTIMEVERIFY&&((r=this.getInt(0,!1,5))<p.LOCKTIME_THRESHOLD?(t=d.CHECKABSOLUTEBLOCK,e=r):(t=d.CHECKABSOLUTETIME,i=r)),2<=this.code.length&&this.getOp(1)==l.OP_CHECKSEQUENCEVERIFY&&((r=this.getInt(0,!1,5))&p.SEQUENCE_DISABLE_FLAG||(s=r&p.SEQUENCE_MASK,r&p.SEQUENCE_TYPE_FLAG?(t=d.CHECKRELATIVETIME,i=s):(t=d.CHECKRELATIVEBLOCK,e=s))),[t,e,i]}execute(t,e,i,r,n,o,a){if(null==e&&(e=C.flags.STANDARD_VERIFY_FLAGS),null==a&&(a=0),this.raw.length>p.MAX_SCRIPT_SIZE)throw new h("SCRIPT_SIZE");var u=[],f=[];let d=0,g=0,w=0,y=!1;e&C.flags.VERIFY_MINIMALDATA&&(y=!0);for(let Y=0;Y<this.code.length;Y++){var b=this.code[Y];if(-1===b.value)throw new h("BAD_OPCODE",b,Y);if(b.data&&b.data.length>p.MAX_SCRIPT_PUSH)throw new h("PUSH_SIZE",b,Y);if(b.value>l.OP_16&&++g>p.MAX_SCRIPT_OPS)throw new h("OP_COUNT",b,Y);if(b.isDisabled())throw new h("DISABLED_OPCODE",b,Y);if(w&&!b.isBranch()){if(t.length+f.length>p.MAX_SCRIPT_STACK)throw new h("STACK_SIZE",b,Y)}else if(b.data){if(y&&!b.isMinimal())throw new h("MINIMALDATA",b,Y);if(t.push(b.data),t.length+f.length>p.MAX_SCRIPT_STACK)throw new h("STACK_SIZE",b,Y)}else{switch(b.value){case l.OP_PROPCREATE:case l.OP_PROPEXCHANGE:case l.OP_CPREGISTER:case l.OP_CPCHANGE:case l.OP_HTLCSUGGEST:case l.OP_HTLCASSENT:case l.OP_COMMENT:case l.OP_COINBASE:break;case l.OP_PROMISE:this.indicator.set(I);break;case l.OP_RETURN:throw new h("OP_RETURN",b,Y);case l.OP_0:t.pushInt(0);break;case l.OP_1NEGATE:t.pushInt(-1);break;case l.OP_1:case l.OP_2:case l.OP_3:case l.OP_4:case l.OP_5:case l.OP_6:case l.OP_7:case l.OP_8:case l.OP_9:case l.OP_10:case l.OP_11:case l.OP_12:case l.OP_13:case l.OP_14:case l.OP_15:case l.OP_16:t.pushInt(b.value-80);break;case l.OP_NOP:break;case l.OP_CHECKLOCKTIMEVERIFY:if(!(e&C.flags.VERIFY_CHECKLOCKTIMEVERIFY)){if(e&C.flags.VERIFY_DISCOURAGE_UPGRADABLE_NOPS)throw new h("DISCOURAGE_UPGRADABLE_NOPS",b,Y);break}if(!i)throw new h("UNKNOWN_ERROR","No TX passed in.");if(0===t.length)throw new h("INVALID_STACK_OPERATION",b,Y);var v=t.getNum(-1,y,5);if(v.isNeg())throw new h("NEGATIVE_LOCKTIME",b,Y);if(v=v.toDouble(),i.verifyLocktime(r,v))break;throw new h("UNSATISFIED_LOCKTIME",b,Y);case l.OP_CHECKSEQUENCEVERIFY:if(!(e&C.flags.VERIFY_CHECKSEQUENCEVERIFY)){if(e&C.flags.VERIFY_DISCOURAGE_UPGRADABLE_NOPS)throw new h("DISCOURAGE_UPGRADABLE_NOPS",b,Y);break}if(!i)throw new h("UNKNOWN_ERROR","No TX passed in.");if(0===t.length)throw new h("INVALID_STACK_OPERATION",b,Y);if((v=t.getNum(-1,y,5)).isNeg())throw new h("NEGATIVE_LOCKTIME",b,Y);var k=v.toDouble();if(i.verifySequence(r,k))break;throw new h("UNSATISFIED_LOCKTIME",b,Y);case l.OP_NOP1:case l.OP_NOP4:case l.OP_NOP5:case l.OP_NOP6:case l.OP_NOP7:case l.OP_NOP8:case l.OP_NOP9:case l.OP_NOP10:if(e&C.flags.VERIFY_DISCOURAGE_UPGRADABLE_NOPS)throw new h("DISCOURAGE_UPGRADABLE_NOPS",b,Y);break;case l.OP_IF:case l.OP_NOTIF:{let i=!1;if(!w){if(t.length<1)throw new h("UNBALANCED_CONDITIONAL",b,Y);if(1===a&&e&C.flags.VERIFY_MINIMALIF){if(1<(k=t.get(-1)).length)throw new h("MINIMALIF");if(1===k.length&&1!==k[0])throw new h("MINIMALIF")}i=t.getBool(-1),b.value===l.OP_NOTIF&&(i=!i),t.pop()}u.push(i),i||(w+=1);break}case l.OP_ELSE:if(0===u.length)throw new h("UNBALANCED_CONDITIONAL",b,Y);u[u.length-1]=!u[u.length-1],u[u.length-1]?--w:w+=1;break;case l.OP_ENDIF:if(0===u.length)throw new h("UNBALANCED_CONDITIONAL",b,Y);u.pop()||--w;break;case l.OP_VERIFY:if(0===t.length)throw new h("INVALID_STACK_OPERATION",b,Y);if(!t.getBool(-1))throw new h("VERIFY",b,Y);t.pop();break;case l.OP_TOALTSTACK:if(0===t.length)throw new h("INVALID_STACK_OPERATION",b,Y);f.push(t.pop());break;case l.OP_FROMALTSTACK:if(0===f.length)throw new h("INVALID_ALTSTACK_OPERATION",b,Y);t.push(f.pop());break;case l.OP_2DROP:if(t.length<2)throw new h("INVALID_STACK_OPERATION",b,Y);t.pop(),t.pop();break;case l.OP_2DUP:if(t.length<2)throw new h("INVALID_STACK_OPERATION",b,Y);var S=t.get(-2),_=t.get(-1);t.push(S),t.push(_);break;case l.OP_3DUP:if(t.length<3)throw new h("INVALID_STACK_OPERATION",b,Y);S=t.get(-3),_=t.get(-2);var x=t.get(-1);t.push(S),t.push(_),t.push(x);break;case l.OP_2OVER:if(t.length<4)throw new h("INVALID_STACK_OPERATION",b,Y);x=t.get(-4);var R=t.get(-3);t.push(x),t.push(R);break;case l.OP_2ROT:if(t.length<6)throw new h("INVALID_STACK_OPERATION",b,Y);R=t.get(-6);var E=t.get(-5);t.erase(-6,-4),t.push(R),t.push(E);break;case l.OP_2SWAP:if(t.length<4)throw new h("INVALID_STACK_OPERATION",b,Y);t.swap(-4,-2),t.swap(-3,-1);break;case l.OP_IFDUP:if(0===t.length)throw new h("INVALID_STACK_OPERATION",b,Y);t.getBool(-1)&&(E=t.get(-1),t.push(E));break;case l.OP_DEPTH:t.pushInt(t.length);break;case l.OP_DROP:if(0===t.length)throw new h("INVALID_STACK_OPERATION",b,Y);var A=t.pop();if(this.indicator.check(I)){this.indicator.unSet(I);try{var O=JSON.parse(A.toString());new M(O,o).run(t)}catch(o){}}break;case l.OP_DUP:if(0===t.length)throw new h("INVALID_STACK_OPERATION",b,Y);t.push(t.get(-1));break;case l.OP_NIP:if(t.length<2)throw new h("INVALID_STACK_OPERATION",b,Y);t.remove(-2);break;case l.OP_OVER:if(t.length<2)throw new h("INVALID_STACK_OPERATION",b,Y);t.push(t.get(-2));break;case l.OP_PICK:case l.OP_ROLL:if(t.length<2)throw new h("INVALID_STACK_OPERATION",b,Y);if(A=t.getInt(-1,y,4),t.pop(),A<0||A>=t.length)throw new h("INVALID_STACK_OPERATION",b,Y);var N=t.get(-A-1);b.value===l.OP_ROLL&&t.remove(-A-1),t.push(N);break;case l.OP_ROT:if(t.length<3)throw new h("INVALID_STACK_OPERATION",b,Y);t.swap(-3,-2),t.swap(-2,-1);break;case l.OP_SWAP:if(t.length<2)throw new h("INVALID_STACK_OPERATION",b,Y);t.swap(-2,-1);break;case l.OP_TUCK:if(t.length<2)throw new h("INVALID_STACK_OPERATION",b,Y);t.insert(-2,t.get(-1));break;case l.OP_SIZE:if(t.length<1)throw new h("INVALID_STACK_OPERATION",b,Y);t.pushInt(t.get(-1).length);break;case l.OP_EQUAL:case l.OP_EQUALVERIFY:if(t.length<2)throw new h("INVALID_STACK_OPERATION",b,Y);N=t.get(-2);var L=t.get(-1);L=N.equals(L);if(t.pop(),t.pop(),t.pushBool(L),b.value===l.OP_EQUALVERIFY){if(!L)throw new h("EQUALVERIFY",b,Y);t.pop()}break;case l.OP_1ADD:case l.OP_1SUB:case l.OP_NEGATE:case l.OP_ABS:case l.OP_NOT:case l.OP_0NOTEQUAL:{if(t.length<1)throw new h("INVALID_STACK_OPERATION",b,Y);let e,i=t.getNum(-1,y,4);switch(b.value){case l.OP_1ADD:i.iaddn(1);break;case l.OP_1SUB:i.isubn(1);break;case l.OP_NEGATE:i.ineg();break;case l.OP_ABS:i.iabs();break;case l.OP_NOT:e=i.isZero(),i=c.fromBool(e);break;case l.OP_0NOTEQUAL:e=!i.isZero(),i=c.fromBool(e);break;default:s(!1,"Fatal script error.")}t.pop(),t.pushNum(i);break}case l.OP_ADD:case l.OP_SUB:case l.OP_BOOLAND:case l.OP_BOOLOR:case l.OP_NUMEQUAL:case l.OP_NUMEQUALVERIFY:case l.OP_NUMNOTEQUAL:case l.OP_LESSTHAN:case l.OP_GREATERTHAN:case l.OP_LESSTHANOREQUAL:case l.OP_GREATERTHANOREQUAL:case l.OP_MIN:case l.OP_MAX:{if(t.length<2)throw new h("INVALID_STACK_OPERATION",b,Y);var H=t.getNum(-2,y,4),U=t.getNum(-1,y,4);let e,i;switch(b.value){case l.OP_ADD:e=H.iadd(U);break;case l.OP_SUB:e=H.isub(U);break;case l.OP_BOOLAND:i=H.toBool()&&U.toBool(),e=c.fromBool(i);break;case l.OP_BOOLOR:i=H.toBool()||U.toBool(),e=c.fromBool(i);break;case l.OP_NUMEQUAL:case l.OP_NUMEQUALVERIFY:i=H.eq(U),e=c.fromBool(i);break;case l.OP_NUMNOTEQUAL:i=!H.eq(U),e=c.fromBool(i);break;case l.OP_LESSTHAN:i=H.lt(U),e=c.fromBool(i);break;case l.OP_GREATERTHAN:i=H.gt(U),e=c.fromBool(i);break;case l.OP_LESSTHANOREQUAL:i=H.lte(U),e=c.fromBool(i);break;case l.OP_GREATERTHANOREQUAL:i=H.gte(U),e=c.fromBool(i);break;case l.OP_MIN:e=c.min(H,U);break;case l.OP_MAX:e=c.max(H,U);break;default:s(!1,"Fatal script error.")}if(t.pop(),t.pop(),t.pushNum(e),b.value===l.OP_NUMEQUALVERIFY){if(!t.getBool(-1))throw new h("NUMEQUALVERIFY",b,Y);t.pop()}break}case l.OP_WITHIN:if(t.length<3)throw new h("INVALID_STACK_OPERATION",b,Y);L=t.getNum(-3,y,4);var D=t.getNum(-2,y,4),z=t.getNum(-1,y,4);D=D.lte(L)&&L.lt(z);t.pop(),t.pop(),t.pop(),t.pushBool(D);break;case l.OP_RIPEMD160:if(0===t.length)throw new h("INVALID_STACK_OPERATION",b,Y);t.push(m.ripemd160(t.pop()));break;case l.OP_SHA1:if(0===t.length)throw new h("INVALID_STACK_OPERATION",b,Y);t.push(m.sha1(t.pop()));break;case l.OP_SHA256:if(0===t.length)throw new h("INVALID_STACK_OPERATION",b,Y);t.push(m.sha256(t.pop()));break;case l.OP_HASH160:if(0===t.length)throw new h("INVALID_STACK_OPERATION",b,Y);t.push(m.hash160(t.pop()));break;case l.OP_HASH256:if(0===t.length)throw new h("INVALID_STACK_OPERATION",b,Y);t.push(m.hash256(t.pop()));break;case l.OP_CODESEPARATOR:d=Y+1;break;case l.OP_CHECKSIG:case l.OP_CHECKSIGVERIFY:{if(!i)throw new h("UNKNOWN_ERROR","No TX passed in.");if(t.length<2)throw new h("INVALID_STACK_OPERATION",b,Y);z=t.get(-2),D=t.get(-1);var V,F=this.getSubscript(d);0===a&&F.findAndDelete(z),P(z,e),T(D,e,a);let s=!1;if(0<z.length&&(V=z[z.length-1],s=B(F=i.signatureHash(r,F,n,V,a),z,D)),!s&&e&C.flags.VERIFY_NULLFAIL&&0!==z.length)throw new h("NULLFAIL",b,Y);if(t.pop(),t.pop(),t.pushBool(s),b.value===l.OP_CHECKSIGVERIFY){if(!s)throw new h("CHECKSIGVERIFY",b,Y);t.pop()}break}case l.OP_CHECKMULTISIG:case l.OP_CHECKMULTISIGVERIFY:{if(!i)throw new h("UNKNOWN_ERROR","No TX passed in.");let s=1;if(t.length<s)throw new h("INVALID_STACK_OPERATION",b,Y);let o,c,u=t.getInt(-s,y,4),f=u+2;if(u<0||u>p.MAX_MULTISIG_PUBKEYS)throw new h("PUBKEY_COUNT",b,Y);if((g+=u)>p.MAX_SCRIPT_OPS)throw new h("OP_COUNT",b,Y);if(s+=1,o=s,s+=u,t.length<s)throw new h("INVALID_STACK_OPERATION",b,Y);let m=t.getInt(-s,y,4);if(m<0||m>u)throw new h("SIG_COUNT",b,Y);if(s+=1,c=s,s+=m,t.length<s)throw new h("INVALID_STACK_OPERATION",b,Y);var j=this.getSubscript(d);for(let e=0;e<m;e++){var K=t.get(-c-e);0===a&&j.findAndDelete(K)}let w=!0;for(;w&&0<m;){var q,W=t.get(-c),X=t.get(-o);P(W,e),T(X,e,a),0<W.length&&(q=W[W.length-1],B(i.signatureHash(r,j,n,q,a),W,X))&&(c+=1,--m),o+=1,--u,m>u&&(w=!1)}for(;1<s;){if(!w&&e&C.flags.VERIFY_NULLFAIL&&0===f&&0!==t.get(-1).length)throw new h("NULLFAIL",b,Y);0<f&&--f,t.pop(),--s}if(t.length<1)throw new h("INVALID_STACK_OPERATION",b,Y);if(e&C.flags.VERIFY_NULLDUMMY&&0!==t.get(-1).length)throw new h("SIG_NULLDUMMY",b,Y);if(t.pop(),t.pushBool(w),b.value===l.OP_CHECKMULTISIGVERIFY){if(!w)throw new h("CHECKMULTISIGVERIFY",b,Y);t.pop()}break}default:throw new h("BAD_OPCODE",b,Y)}if(t.length+f.length>p.MAX_SCRIPT_STACK)throw new h("STACK_SIZE",b,Y)}}if(0!==u.length)throw new h("UNBALANCED_CONDITIONAL")}findAndDelete(t){var e=o.fromPush(t);if(this.raw.length<e.getSize())return 0;let i=!1;for(const t of this.code){if(-1===t.value)break;if(t.equals(e)){i=!0;break}}if(!i)return 0;var r=[];let s=0;for(const t of this.code){if(-1===t.value)break;t.equals(e)?s+=1:r.push(t)}return this.code=r,this.compile(),s}indexOf(t){for(let i=0;i<this.code.length;i++){var e=this.code[i];if(-1===e.value)break;if(e.data&&e.data.equals(t))return i}return-1}isCode(){for(const t of this.code){if(-1===t.value)return!1;if(t.isDisabled())return!1;switch(t.value){case l.OP_RESERVED:case l.OP_NOP:case l.OP_VER:case l.OP_VERIF:case l.OP_VERNOTIF:case l.OP_RESERVED1:case l.OP_RESERVED2:case l.OP_NOP1:return!1}if(t.value>l.OP_PROPMAX)return!1}return!0}fromAddress(t,i){"string"==typeof t&&(t=R.fromString(t)),s(t instanceof R,"Not an address.");let r=!1;if(t.isPubkeyhash())if(i&&i.oper)switch(i.oper){case E.cpRegister:this.createScript({opcode:C.opcodes.OP_CPREGISTER,hash:t.hash,info:e.from(JSON.stringify(i))},C.types.PROPEXTEND);break;case E.cpChange:this.createScript({opcode:C.opcodes.OP_CPCHANGE,hash:t.hash,info:e.from(JSON.stringify(i))},C.types.PROPEXTEND);break;case E.propCreate:this.createScript({opcode:C.opcodes.OP_PROPCREATE,hash:t.hash,info:e.from(JSON.stringify(i))},C.types.PROPEXTEND);break;case E.propExchange:this.createScript({opcode:C.opcodes.OP_PROPEXCHANGE,hash:t.hash,info:e.from(JSON.stringify(i))},C.types.PROPEXTEND);break;case E.coinbase:this.createScript({opcode:C.opcodes.OP_COINBASE,hash:t.hash,info:e.from(JSON.stringify(i))},C.types.PROPEXTEND)}else this.createScript(t.hash);else t.isScripthash()?this.createScript(t.hash,C.types.SCRIPTHASH):t.isProgram()&&this.createScript([t.version,t.hash,i],C.types.WITNESS);if(i&&i.locktype&&(!i.oper||u.unspendableCodes.indexOf(i.oper)<0))switch(i.locktype){case d.CHECKABSOLUTEBLOCK:case d.CHECKABSOLUTETIME:this.code.unshift(o.fromOp(l.OP_DROP)),this.code.unshift(o.fromOp(l.OP_CHECKLOCKTIMEVERIFY)),this.code.unshift(o.fromInt(i.locktime)),r=!0;break;case d.CHECKRELATIVEBLOCK:case d.CHECKRELATIVETIME:i.locktype===d.CHECKRELATIVETIME&&(i.locktime=i.locktime|p.SEQUENCE_TYPE_FLAG),this.code.unshift(o.fromOp(l.OP_DROP)),this.code.unshift(o.fromOp(l.OP_CHECKSEQUENCEVERIFY)),this.code.unshift(o.fromInt(i.locktime)),r=!0}if(r&&this.compile(),0<this.code.length)return this;throw new Error("Unknown address type.")}static fromAddress(t,e){return(new C).fromAddress(t,e)}fromCommitment(t,e){var i=new x(36);return i.writeU32BE(2854332909),i.writeHash(t),this.clear(),this.pushOp(l.OP_RETURN),this.pushData(i.render()),e&&this.pushData(e),this.compile()}static fromCommitment(t,e){return(new C).fromCommitment(t,e)}getRedeem(){let t=null;for(const e of this.code){if(-1===e.value)return null;if(e.value>l.OP_16)return null;t=e.data}return t?C.fromRaw(t):null}getType(){return this.isPubkey()?f.PUBKEY:this.isPubkeyhash()?f.PUBKEYHASH:this.isScripthash()?f.SCRIPTHASH:this.isWitnessPubkeyhash()?f.WITNESSPUBKEYHASH:this.isWitnessScripthash()?f.WITNESSSCRIPTHASH:this.isWitnessMasthash()?f.WITNESSMASTHASH:this.isMultisig()?f.MULTISIG:this.isNulldata()?f.NULLDATA:f.NONSTANDARD}isPubkey(t){return t?35<=this.raw.length&&(33===this.raw[0]||65===this.raw[0])&&this.raw[0]+2===this.raw.length&&this.raw[this.raw.length-1]===l.OP_CHECKSIG:2===this.code.length&&(33===(t=this.getLength(0))||65===t)&&this.getOp(1)===l.OP_CHECKSIG}isPubkeyhash(t){if(t||25===this.raw.length)return 25===this.raw.length&&this.raw[0]===l.OP_DUP&&this.raw[1]===l.OP_HASH160&&20===this.raw[2]&&this.raw[23]===l.OP_EQUALVERIFY&&this.raw[24]===l.OP_CHECKSIG;let e=0;for(var i of this.code)if(i.value==l.OP_DUP){e=this.code.indexOf(i);break}return this.getOp(0+e)===l.OP_DUP&&this.getOp(1+e)===l.OP_HASH160&&20===this.getLength(2+e)&&this.getOp(3+e)===l.OP_EQUALVERIFY&&this.getOp(4+e)===l.OP_CHECKSIG}isMultisig(t){if(this.code.length<4||19<this.code.length)return!1;if(this.getOp(-1)!==l.OP_CHECKMULTISIG)return!1;var e=this.getSmall(0);if(e<1)return!1;var i=this.getSmall(-2);if(i<1||i<e)return!1;if(this.code.length!==i+3)return!1;for(let e=1;e<i+1;e++){var r=this.code[e],s=r.toLength();if(33!==s&&65!==s)return!1;if(t&&!r.isMinimal())return!1}return!0}isUnknown(){return this.getType()===f.NONSTANDARD}isStandard(){var[t,e]=this.getMultisig();return-1!==t?!(e<1||3<e||t<1||e<t):this.isNulldata()?this.raw.length<=g.MAX_OP_RETURN_BYTES:this.getType()!==f.NONSTANDARD}isScripthash(){return 23===this.raw.length&&this.raw[0]===l.OP_HASH160&&20===this.raw[1]&&this.raw[22]===l.OP_EQUAL}isNulldata(t){if(0===this.code.length)return!1;if(this.getOp(0)!==l.OP_RETURN)return!1;if(1!==this.code.length){if(t&&this.raw.length>g.MAX_OP_RETURN_BYTES)return!1;for(let i=1;i<this.code.length;i++){var e=this.code[i];if(-1===e.value)return!1;if(e.value>l.OP_16)return!1;if(t&&!e.isMinimal())return!1}}return!0}isCommitment(){return 38<=this.raw.length&&this.raw[0]===l.OP_RETURN&&36===this.raw[1]&&2854332909===this.raw.readUInt32BE(2,!0)}isWitnessPubkeyhash(){return 22===this.raw.length&&this.raw[0]===l.OP_0&&20===this.raw[1]||5==this.code.length&&this.code[2].value==l.OP_DROP&&this.code[3].value==l.OP_0&&20==this.code[4].value}getWitnessPubkeyhash(){return this.isWitnessPubkeyhash()?5==this.code.length?this.getData(4):this.getData(1):null}isWitnessScripthash(){return 34===this.raw.length&&this.raw[0]===l.OP_0&&32===this.raw[1]}getWitnessScripthash(){return this.isWitnessScripthash()?this.getData(1):null}isProgram(){if(2==this.code.length){if(4<=this.raw.length&&this.raw.length<=42&&(this.raw[0]==l.OP_0||this.raw[0]>=l.OP_1&&this.raw[0]<=l.OP_16)&&this.raw[1]+2==this.raw.length)return!0}else if(5==this.code.length&&4<=this.raw.length&&this.code[2].value==l.OP_DROP&&(this.code[3].value==l.OP_0||this.code[3].value>=l.OP_1&&this.code[3].value<=l.OP_16))return!0;return!1}isWitnessMasthash(){return 34===this.raw.length&&this.raw[0]===l.OP_1&&32===this.raw[1]}isUnspendable(){return this.raw.length>p.MAX_SCRIPT_SIZE||0<this.raw.length&&this.raw[0]===l.OP_RETURN}getSize(){return this.raw.length}getVarSize(){return b.sizeVarBytes(this.raw)}getReturnData(t){if(!(this.code&&this.code[0]&&this.code[1]&&this.code[1].data))return null;if(t)if(Array.isArray(t)){let i=!1;for(var e of t)if(this.code[0].value===e){i=!0;break}if(!i)return null}else if(this.code[0].value!==t)return null;try{return k.parseJson(this.code[1].data.toString())}catch(t){return null}}getReturnType(t){if(!this.code||!this.code[0])return null;if(t)if(Array.isArray(t)){let i=!1;for(var e of t)if(this.code[0].value===e){i=!0;break}if(!i)return null}else if(this.code[0].value!==t)return null;return this.code[0].value}hash160(t){let e=m.hash160(this.toRaw());return"hex"===t?e.toString("hex"):e}sha256(t){let e=m.sha256(this.toRaw());return"hex"===t?e.toString("hex"):e}getPubkey(t){return this.isPubkey(t)?t?this.raw.slice(1,1+this.raw[0]):this.getData(0):null}getMultiPubkeyhash(){var t=O[this.getOp(0)];return t&&this.code.length==t.len?t.list.map(t=>this.getData(t)):null}getPubkeyhash(t){if(this.isPubkeyhash(t)){if(t)return this.raw.slice(3,23);for(var e of this.code)if(e.value==l.OP_CHECKSIG)return this.getData(this.code.indexOf(e)-2)}return null}getMultisig(t){return this.isMultisig(t)?[this.getSmall(0),this.getSmall(-2)]:[-1,-1]}getScripthash(){return this.isScripthash()?this.getData(1):null}getNulldata(t){if(!this.isNulldata(t))return null;for(let t=1;t<this.code.length;t++){var e=this.code[t].toPush();if(e)return e}return r}getCommitment(){return this.isCommitment()?this.raw.slice(6,38):null}getProgram(){return this.isProgram()?2==this.code.length?new n(this.getSmall(0),this.getData(1)):5==this.code.length?new n(this.getSmall(3),this.getData(4)):null:null}forWitness(){var t;return this.isProgram()?this.clone():(t=this.getPubkey())?(t=m.hash160(t),C.createScript([0,t],C.types.WITNESS)):(t=this.getPubkeyhash())?C.createScript([0,t],C.types.WITNESS):C.createScript([0,this.sha256()],C.types.WITNESS)}getWitnessMasthash(){return this.isWitnessMasthash()?this.getData(1):null}getInputType(){return this.isPubkeyInput()?f.PUBKEY:this.isPubkeyhashInput()?f.PUBKEYHASH:this.isScripthashInput()?f.SCRIPTHASH:this.isMultisigInput()?f.MULTISIG:f.NONSTANDARD}isPubkeyhashInput(){var t,e;return 2===this.code.length&&(t=this.getLength(0),e=this.getLength(1),9<=t)&&t<=73&&(33===e||65===e)}isUnknownInput(){return this.getInputType()===f.NONSTANDARD}isPubkeyInput(){var t;return 1===this.code.length&&9<=(t=this.getLength(0))&&t<=73}isScripthashInput(){var t;return!(this.code.length<2||!(t=this.getData(-1))||0===t.length||u.isSignatureEncoding(t)||u.isKeyEncoding(t)||!(t=C.fromRaw(t)).isCode()||t.isUnspendable()||!this.isPushOnly())}isMultisigInput(){if(this.code.length<2)return!1;if(this.getOp(0)!==l.OP_0)return!1;if(this.getOp(1)>l.OP_PUSHDATA4)return!1;if(this.isScripthashInput())return!1;for(let e=1;e<this.code.length;e++){var t=this.getLength(e);if(t<9||73<t)return!1}return!0}getPubkeyInput(){return this.isPubkeyInput()?this.getData(0):null}getPubkeyhashInput(){return this.isPubkeyhashInput()?[this.getData(0),this.getData(1)]:[null,null]}getMultisigInput(){if(!this.isMultisigInput())return null;var t=[];for(let e=1;e<this.code.length;e++)t.push(this.getData(e));return t}getScripthashInput(){return this.isScripthashInput()?this.getData(-1):null}getCoinbaseHeight(){return C.getCoinbaseHeight(this.raw)}static getCoinbaseHeight(t){var e;return 0===t.length?-1:t[0]>=l.OP_1&&t[0]<=l.OP_16?t[0]-80:6<t[0]?-1:(e=(t=o.fromRaw(t)).toNum())?!e.isNeg()&&t.equals(o.fromNum(e))?e.toDouble():-1:1}test(t){for(const e of this.code){if(-1===e.value)break;if(e.data&&0!==e.data.length){if(t.test(e.data))return!0;if(33==e.data.length&&t.test(m.hash160(e.data)))return!0}}return!1}isPushOnly(){for(const t of this.code){if(-1===t.value)return!1;if(t.value>l.OP_16)return!1}return!0}getSigops(t){let e=0,i=-1;for(const r of this.code){if(-1===r.value)break;switch(r.value){case l.OP_CHECKSIG:case l.OP_CHECKSIGVERIFY:e+=1;break;case l.OP_CHECKMULTISIG:case l.OP_CHECKMULTISIGVERIFY:t&&i>=l.OP_1&&i<=l.OP_16?e+=i-80:e+=p.MAX_MULTISIG_PUBKEYS}i=r.value}return e}getScripthashSigops(t){return this.isScripthash()?(t=t.getRedeem())?t.getSigops(!0):0:this.getSigops(!0)}getWitnessSigops(t,e){let i=this.getProgram();if(i||this.isScripthash()&&(t=t.getRedeem())&&(i=t.getProgram()),i&&0===i.version){if(20===i.data.length)return 1;if(32===i.data.length&&0<e.items.length)return e.getRedeem().getSigops(!0)}return 0}get(t){return t<0&&(t+=this.code.length),t<0||t>=this.code.length?null:this.code[t]}pop(){return this.code.pop()||null}shift(){return this.code.shift()||null}remove(t){return t<0&&(t+=this.code.length),t<0||t>=this.code.length||0===(t=this.code.splice(t,1)).length?null:t[0]}set(t,e){return t<0&&(t+=this.code.length),s(o.isOpcode(e)),s(0<=t&&t<=this.code.length),this.code[t]=e,this}push(t){return s(o.isOpcode(t)),this.code.push(t),this}unshift(t){return s(o.isOpcode(t)),this.code.unshift(t),this}insert(t,e){return t<0&&(t+=this.code.length),s(o.isOpcode(e)),s(0<=t&&t<=this.code.length),this.code.splice(t,0,e),this}getOp(t){return(t=this.get(t))?t.value:-1}popOp(){var t=this.pop();return t?t.value:-1}shiftOp(){var t=this.shift();return t?t.value:-1}removeOp(t){return(t=this.remove(t))?t.value:-1}setOp(t,e){return this.set(t,o.fromOp(e))}pushOp(t){return this.push(o.fromOp(t))}unshiftOp(t){return this.unshift(o.fromOp(t))}insertOp(t,e){return this.insert(t,o.fromOp(e))}getData(t){return(t=this.get(t))?t.data:null}popData(){var t=this.pop();return t?t.data:null}shiftData(){var t=this.shift();return t?t.data:null}removeData(t){return(t=this.remove(t))?t.data:null}setData(t,e){return this.set(t,o.fromData(e))}pushData(t){return this.push(o.fromData(t))}unshiftData(t){return this.unshift(o.fromData(t))}insertData(t,e){return this.insert(t,o.fromData(e))}getLength(t){return(t=this.get(t))?t.toLength():-1}getPush(t){return(t=this.get(t))?t.toPush():null}popPush(){var t=this.pop();return t?t.toPush():null}shiftPush(){var t=this.shift();return t?t.toPush():null}removePush(t){return(t=this.remove(t))?t.toPush():null}setPush(t,e){return this.set(t,o.fromPush(e))}pushPush(t){return this.push(o.fromPush(t))}unshiftPush(t){return this.unshift(o.fromPush(t))}insertPush(t,e){return this.insert(t,o.fromPush(e))}getString(t,e){return(t=this.get(t))?t.toString(e):null}popString(t){var e=this.pop();return e?e.toString(t):null}shiftString(t){var e=this.shift();return e?e.toString(t):null}removeString(t,e){return(t=this.remove(t))?t.toString(e):null}setString(t,e,i){return this.set(t,o.fromString(e,i))}pushString(t,e){return this.push(o.fromString(t,e))}unshiftString(t,e){return this.unshift(o.fromString(t,e))}insertString(t,e,i){return this.insert(t,o.fromString(e,i))}getSmall(t){return(t=this.get(t))?t.toSmall():-1}popSmall(){var t=this.pop();return t?t.toSmall():-1}shiftSmall(){var t=this.shift();return t?t.toSmall():-1}removeSmall(t){return(t=this.remove(t))?t.toSmall():-1}setSmall(t,e){return this.set(t,o.fromSmall(e))}pushSmall(t){return this.push(o.fromSmall(t))}unshiftSmall(t){return this.unshift(o.fromSmall(t))}insertSmall(t,e){return this.insert(t,o.fromSmall(e))}getNum(t,e,i){return(t=this.get(t))?t.toNum(e,i):null}popNum(t,e){var i=this.pop();return i?i.toNum(t,e):null}shiftNum(t,e){var i=this.shift();return i?i.toNum(t,e):null}removeNum(t,e,i){return(t=this.remove(t))?t.toNum(e,i):null}setNum(t,e){return this.set(t,o.fromNum(e))}pushNum(t){return this.push(o.fromNum(t))}unshiftNum(t){return this.unshift(o.fromNum(t))}insertNum(t,e){return this.insert(t,o.fromNum(e))}getInt(t,e,i){return(t=this.get(t))?t.toInt(e,i):-1}popInt(t,e){var i=this.pop();return i?i.toInt(t,e):-1}shiftInt(t,e){var i=this.shift();return i?i.toInt(t,e):-1}removeInt(t,e,i){return(t=this.remove(t))?t.toInt(e,i):-1}setInt(t,e){return this.set(t,o.fromInt(e))}pushInt(t){return this.push(o.fromInt(t))}unshiftInt(t){return this.unshift(o.fromInt(t))}insertInt(t,e){return this.insert(t,o.fromInt(e))}getBool(t){return!!(t=this.get(t))&&t.toBool()}popBool(){var t=this.pop();return!!t&&t.toBool()}shiftBool(){var t=this.shift();return!!t&&t.toBool()}removeBool(t){return!!(t=this.remove(t))&&t.toBool()}setBool(t,e){return this.set(t,o.fromBool(e))}pushBool(t){return this.push(o.fromBool(t))}unshiftBool(t){return this.unshift(o.fromBool(t))}insertBool(t,e){return this.insert(t,o.fromBool(e))}getSym(t){return(t=this.get(t))?t.toSymbol():null}popSym(){var t=this.pop();return t?t.toSymbol():null}shiftSym(){var t=this.shift();return t?t.toSymbol():null}removeSym(t){return(t=this.remove(t))?t.toSymbol():null}setSym(t,e){return this.set(t,o.fromSymbol(e))}pushSym(t){return this.push(o.fromSymbol(t))}unshiftSym(t){return this.unshift(o.fromSymbol(t))}insertSym(t,e){return this.insert(t,o.fromSymbol(e))}fromString(t){if(s("string"==typeof t),0===(t=t.trim()).length)return this;t=t.split(/\s+/);var i=new S;for(const u of t){let t=u;k.isUpperCase(t)||(t=t.toUpperCase()),k.startsWith(t,"OP_")||(t="OP_"+t);var r,n,a,h=l[t];null==h?"'"===u[0]?(s("'"===u[u.length-1],"Invalid string."),r=u.slice(1,-1),r=o.fromString(r),i.writeBytes(r.toRaw())):/^-?\d+$/.test(u)?(r=c.fromString(u,10),n=o.fromNum(r),i.writeBytes(n.toRaw())):(s(0===u.indexOf("0x"),"Unknown opcode."),n=u.substring(2),a=e.from(n,"hex"),s(a.length===n.length/2,"Invalid hex string."),i.writeBytes(a)):i.writeU8(h)}return this.fromRaw(i.render())}static fromString(t){return(new C).fromString(t)}static verifyScript(t,e,i,r,n,c,u,l){if((u=null==u?C.flags.STANDARD_VERIFY_FLAGS:u)&C.flags.VERIFY_SIGPUSHONLY&&!t.isPushOnly())throw new h("SIG_PUSHONLY");null==l&&(l=A.None);let f,d=new a;if(t.execute(d,u,r,n,c,l,0),u&C.flags.VERIFY_P2SH&&(f=d.clone()),i.execute(d,u,r,n,c,l,0),0===d.length||!d.getBool(-1))throw new h("EVAL_FALSE");let p=!1;if(u&C.flags.VERIFY_WITNESS&&i.isProgram()){if(p=!0,0!==t.raw.length)throw new h("WITNESS_MALLEATED");C.verifyProgram(e,i,u,r,n,c,l),d.length=1}if(u&C.flags.VERIFY_P2SH&&i.isScripthash()){if(!t.isPushOnly())throw new h("SIG_PUSHONLY");if(0===(d=f).length)throw new h("EVAL_FALSE");i=d.pop();var g=C.fromRaw(i);if(g.execute(d,u,r,n,c,l,0),0===d.length||!d.getBool(-1))throw new h("EVAL_FALSE");if(u&C.flags.VERIFY_WITNESS&&g.isProgram()){if(p=!0,!t.raw.equals(o.fromPush(i).toRaw()))throw new h("WITNESS_MALLEATED_P2SH");C.verifyProgram(e,g,u,r,n,c,l),d.length=1}}if(u&C.flags.VERIFY_CLEANSTACK&&(s(0!=(u&C.flags.VERIFY_P2SH)),1!==d.length))throw new h("CLEANSTACK");if(u&C.flags.VERIFY_WITNESS&&(s(0!=(u&C.flags.VERIFY_P2SH)),!p)&&0<e.items.length)throw new h("WITNESS_UNEXPECTED")}static verifyProgram(t,e,i,r,n,o,a){var c=e.getProgram(),u=(s(c,"verifyProgram called on non-witness-program."),s(0!=(i&C.flags.VERIFY_WITNESS)),t.toStack());let l;if(0!==c.version){if(i&C.flags.VERIFY_MAST&&1===c.version)C.verifyMast(c,u,e,i,r,n,a);else if(i&C.flags.VERIFY_DISCOURAGE_UPGRADABLE_WITNESS_PROGRAM)throw new h("DISCOURAGE_UPGRADABLE_WITNESS_PROGRAM")}else{if(32===c.data.length){if(0===u.length)throw new h("WITNESS_PROGRAM_WITNESS_EMPTY");if(t=u.pop(),!m.sha256(t).equals(c.data))throw new h("WITNESS_PROGRAM_MISMATCH");l=C.fromRaw(t)}else{if(20!==c.data.length)throw new h("WITNESS_PROGRAM_WRONG_LENGTH");if(2!==u.length)throw new h("WITNESS_PROGRAM_MISMATCH");l=C.createScript(c.data)}for(let t=0;t<u.length;t++)if(u.get(t).length>p.MAX_SCRIPT_PUSH)throw new h("PUSH_SIZE");if(l.execute(u,i,r,n,o,a,1),1!==u.length||!u.getBool(-1))throw new h("EVAL_FALSE")}}static verifyMast(t,e,i,r,n,o,a,c){if(s(1===t.version),s(0!=(r&C.flags.VERIFY_MAST)),e.length<4)throw new h("INVALID_MAST_STACK");var u=e.get(-1);if(u.length<1||5<u.length)throw new h("INVALID_MAST_STACK");var l=u[0];if(0===l||e.length<l+3)throw new h("INVALID_MAST_STACK");var f=l;let d=new S;if(d.writeU8(l),0===u[u.length-1])throw new h("INVALID_MAST_STACK");let g=0;for(let t=1;t<u.length;t++)g|=u[t]<<8*(t-1);if(g<0&&(g+=4294967296),0<g&&r&C.flags.DISCOURAGE_UPGRADABLE_WITNESS_PROGRAM)throw new h("DISCOURAGE_UPGRADABLE_WITNESS_PROGRAM");let y=new S;y.writeU32(g);var b=e.get(-2);if(31&b.length)throw new h("INVALID_MAST_STACK");var v=b.length>>>5;if(32<v)throw new h("INVALID_MAST_STACK");if(0===g&&(f+=v)>p.MAX_SCRIPT_OPS)throw new h("OP_COUNT");var k=[];for(let t=0;t<v;t++)k.push(b.slice(32*t,32*t+32));var _=e.get(-3);if(4<_.length)throw new h("INVALID_MAST_STACK");let x=0;if(0<_.length){if(0===_[_.length-1])throw new h("INVALID_MAST_STACK");for(let t=0;t<_.length;t++)x|=_[t]<<8*t;x<0&&(x+=4294967296)}if(v<32&&x>=1<<v>>>0)throw new h("INVALID_MAST_STACK");let R=new S;R.writeBytes(i.raw);for(let t=0;t<l;t++){var E=e.get(-(4+t));if(0===g&&R.offset+E.length>p.MAX_SCRIPT_SIZE)throw new h("SCRIPT_SIZE");d.writeBytes(m.hash256(E)),R.writeBytes(E)}if(d=m.hash256(d.render()),d=w.verifyBranch(d,k,x),y.writeBytes(d),!(y=m.hash256(y.render())).equals(t.data))throw new h("WITNESS_PROGRAM_MISMATCH");if(0===g){e.length-=3+l;for(let t=0;t<e.length;t++)if(e.get(t).length>p.MAX_SCRIPT_PUSH)throw new h("PUSH_SIZE");if(R=R.render(),(i=C.fromRaw(R)).execute(e,r,n,o,a,c,1),0!==e.length)throw new h("EVAL_FALSE")}}fromReader(t){return this.fromRaw(t.readVarBytes())}fromRaw(t){var e=new _(t,!0);for(this.raw=t;e.left();)this.code.push(o.fromReader(e));return this}static fromReader(t){return(new C).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new C).fromRaw(t)}static isScript(t){return t instanceof C}}function T(t,i,r){if(s(e.isBuffer(t)),s("number"==typeof i),s("number"==typeof r),i&C.flags.VERIFY_STRICTENC&&!u.isKeyEncoding(t))throw new h("PUBKEYTYPE");if(1===r&&i&C.flags.VERIFY_WITNESS_PUBKEYTYPE&&!u.isCompressedEncoding(t))throw new h("WITNESS_PUBKEYTYPE")}function P(t,i){if(s(e.isBuffer(t)),s("number"==typeof i),0!==t.length){if((i&C.flags.VERIFY_DERSIG||i&C.flags.VERIFY_LOW_S||i&C.flags.VERIFY_STRICTENC)&&!u.isSignatureEncoding(t))throw new h("SIG_DER");if(i&C.flags.VERIFY_LOW_S&&!u.isLowDER(t))throw new h("SIG_HIGH_S");if(i&C.flags.VERIFY_STRICTENC&&!u.isHashType(t))throw new h("SIG_HASHTYPE")}}function B(t,e,i){return y.verify(t,e.slice(0,-1),i)}C.opcodes=u.opcodes,C.opcodesByVal=u.opcodesByVal,C.flags=u.flags,C.hashType=u.hashType,C.hashTypeByVal=u.hashTypeByVal,C.types=u.types,C.typesByVal=u.typesByVal,C.outputLockType=u.outputLockType,C.unspendableCodes=u.unspendableCodes,C.TradeType={btc:1},t.exports=C}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * packetTypes.js - worker packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */t.exports={ENV:0,EVENT:1,LOG:2,ERROR:3,ERRORRESULT:4,CHECK:5,CHECKRESULT:6,SIGN:7,SIGNRESULT:8,CHECKINPUT:9,CHECKINPUTRESULT:10,SIGNINPUT:11,SIGNINPUTRESULT:12,ECVERIFY:13,ECVERIFYRESULT:14,ECSIGN:15,ECSIGNRESULT:16,MINE:17,MINERESULT:18,SCRYPT:19,SCRYPTRESULT:20}},function(t,e,i){"use strict";
/*!
 * network.js - network object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1),s=i(3),n=i(132),o=i(9),a=i(225);class h{constructor(t){r(!h[t.type],"Cannot create two networks."),this.type=t.type,this.typeId=t.typeId,this.seeds=t.seeds,this.txcheckpoint=t.txcheckpoint,this.txchecktime=t.txchecktime,this.magic=t.magic,this.port=t.port,this.wsport=t.wsport,this.publicPort=t.publicPort,this.checkpointMap=t.checkpointMap,this.lastCheckpoint=t.lastCheckpoint,this.checkpoints=[],this.halvingInterval=t.halvingInterval,this.genesis=t.genesis,this.pow=t.pow,this.block=t.block,this.activationThreshold=t.activationThreshold,this.minerWindow=t.minerWindow,this.deployments=t.deployments,this.deploys=t.deploys,this.keyPrefix=t.keyPrefix,this.addressPrefix=t.addressPrefix,this.requireStandard=t.requireStandard,this.httpPort=t.httpPort,this.minRelay=t.minRelay,this.feeRate=t.feeRate,this.maxFeeRate=t.maxFeeRate,this.selfConnect=t.selfConnect,this.requestMempool=t.requestMempool,this.genesisId=t.genesisId,this.tokenFix=t.tokenFix,this.tokenReg=t.tokenReg,this.stratumHost=t.stratumHost,this.stratumPort=t.stratumPort,this.stratumPublicHost=t.stratumPublicHost,this.stratumPublicPort=t.stratumPublicPort,this.stratumMaxInbound=t.stratumMaxInbound,this.stratumDifficulty=t.stratumDifficulty,this.stratumDynamic=t.stratumDynamic,this.stratumPassword=t.stratumPassword,this.unknownBits=~o.VERSION_TOP_MASK,this.time=new a,this._init()}_init(){let t=0;for(const e of this.deploys)t|=1<<e.bit;t|=o.VERSION_TOP_MASK,this.unknownBits=~t;for(const t of Object.keys(this.checkpointMap)){var e=this.checkpointMap[t],i=Number(t);this.checkpoints.push({hash:e,height:i})}this.checkpoints.sort(u)}byBit(t){return-1===(t=s.binarySearch(this.deploys,t,c))?null:this.deploys[t]}now(){return this.time.now()}ms(){return this.time.ms()}toString(){return this.type}inspect(){return`<Network: ${this.type}>`}static create(t){return"string"==typeof t&&(t=n[t]),r(t,"Unknown network."),h[t.type]||(t=new h(t),h[t.type]=t,h.primary||(h.primary=t),t)}static set(t){return r("string"==typeof t,"Bad network."),h.primary=h.get(t),h.type=t,h.primary}static get(t){if(!t)return r(h.primary,"No default network."),h.primary;if(t instanceof h)return t;if("string"==typeof t)return h.create(t);throw new Error("Unknown network.")}static ensure(t){if(t){if(t instanceof h)return t;if("string"==typeof t&&n[t])return h.create(t)}return r(h.primary,"No default network."),h.primary}static by(t,e,i,r){if(i){if(e(i=h.get(i),t))return i;throw new Error(`Network mismatch for ${r}.`)}for(const r of n.types)if(e(i=n[r],t))return h.get(r);throw new Error(`Network not found for ${r}.`)}static fromMagic(t,e){return h.by(t,l,e,"magic number")}static fromWIF(t,e){return h.by(t,f,e,"WIF")}static fromPublic(t,e){return h.by(t,d,e,"xpubkey")}static fromPrivate(t,e){return h.by(t,p,e,"xprivkey")}static fromPublic58(t,e){return h.by(t,g,e,"xpubkey")}static fromPrivate58(t,e){return h.by(t,m,e,"xprivkey")}static fromAddress(t,e){return h.by(t,w,e,"base58 address")}static fromBech32(t,e){return h.by(t,y,e,"bech32 address")}static isNetwork(t){return t instanceof h}}function c(t,e){return t.bit-e}function u(t,e){return t.height-e.height}function l(t,e){return t.magic===e}function f(t,e){return t.keyPrefix.privkey===e}function d(t,e){return t.keyPrefix.xpubkey===e}function p(t,e){return t.keyPrefix.xprivkey===e}function g(t,e){return t.keyPrefix.xpubkey58===e}function m(t,e){return t.keyPrefix.xprivkey58===e}function w(t,e){switch(t=t.addressPrefix,e){case t.pubkeyhash:case t.scripthash:case t.witnesspubkeyhash:case t.witnessscripthash:return!0}return!1}function y(t,e){return t.addressPrefix.bech32===e}h.primary=null,h.type=null,h.main=null,h.testnet=null,h.regtest=null,h.simnet=null,h.set("testnet"),t.exports=h},function(t,e,i){"use strict";(function(e){
/*!
 * tx.js - transaction object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(3),n=i(4),o=i(8),a=i(23),h=i(31),c=i(18),u=i(16),l=i(2),f=i(6),d=i(100),p=i(25),g=i(41),m=i(48),w=i(90),y=i(9),b=i(26),v=i(99),{opcodes:k,hashType:S}=i(22);function _(t,e){this.data=null,this.size=t,this.witness=e}i(47),t.exports=class t{constructor(t){t=t||{},this.version=1,this.inputs=t.inputs||[],this.outputs=t.outputs||[],this.locktime=0,this.mutable=!1,this._hash=null,this._hhash=null,this._whash=null,this._raw=null,this._size=-1,this._witness=-1,this._sigops=-1,this._hashPrevouts=null,this._hashSequence=null,this._hashOutputs=null,t&&this.fromOptions(t)}fromOptions(t){if(r(t,"TX data is required."),null!=t.version&&(r(s.isU32(t.version),"Version must be a uint32."),this.version=t.version),t.inputs){this.inputs=[],r(Array.isArray(t.inputs),"Inputs must be an array.");for(const e of t.inputs)this.inputs.push(new d(e))}if(t.outputs){this.outputs=[],r(Array.isArray(t.outputs),"Outputs must be an array.");for(const e of t.outputs)this.outputs.push(new p(e))}return null!=t.locktime&&(r(s.isU32(t.locktime),"Locktime must be a uint32."),this.locktime=t.locktime),this}static fromOptions(e){return(new t).fromOptions(e)}clone(){return(new t).inject(this)}inject(t,e=0){this.version=t.version;for(const i of t.inputs)if(this.inputs.push(i.clone()),0!=e&&this.inputs.length>=e)break;for(const i of t.outputs)if(this.outputs.push(i.clone()),0!=e&&this.outputs.length>=e)break;return this.locktime=t.locktime,this}refresh(){this._hash=null,this._hhash=null,this._whash=null,this._raw=null,this._size=-1,this._witness=-1,this._sigops=-1,this._hashPrevouts=null,this._hashSequence=null,this._hashOutputs=null}hash(t){let e=this._hash;if(e||(e=o.hash256(this.toNormal()),this.mutable)||(this._hash=e),"hex"===t){let t=this._hhash;t||(t=e.toString("hex"),this.mutable)||(this._hhash=t),e=t}return e}witnessHash(t){if(!this.hasWitness())return this.hash(t);let e=this._whash;return e||(e=o.hash256(this.toRaw()),this.mutable)||(this._whash=e),"hex"===t?e.toString("hex"):e}toRaw(){return this.frame().data}toNormal(){return this.hasWitness()?this.frameNormal().data:this.toRaw()}toWriter(t){return this.mutable?this.hasWitness()?this.writeWitness(t):this.writeNormal(t):(t.writeBytes(this.toRaw()),t)}toNormalWriter(t){return this.hasWitness()?(this.writeNormal(t),t):this.toWriter(t)}frame(){if(this.mutable)return r(!this._raw),this.hasWitness()?this.frameWitness():this.frameNormal();if(this._raw){r(0<=this._size),r(0<=this._witness);const t=new _(this._size,this._witness);return t.data=this._raw,t}let t;return t=this.hasWitness()?this.frameWitness():this.frameNormal(),this._raw=t.data,this._size=t.size,this._witness=t.witness,t}getSizes(){return this.mutable?this.hasWitness()?this.getWitnessSizes():this.getNormalSizes():this.frame()}getVirtualSize(){var t=y.WITNESS_SCALE_FACTOR;return(this.getWeight()+t-1)/t|0}getSigopsSize(t){var e=y.WITNESS_SCALE_FACTOR,i=b.BYTES_PER_SIGOP;return(Math.max(this.getWeight(),t*i)+e-1)/e|0}getWeight(){var t=this.getSizes();return(t.size-t.witness)*(y.WITNESS_SCALE_FACTOR-1)+t.size}getSize(){return this.getSizes().size}getBaseSize(){var t=this.getSizes();return t.size-t.witness}hasWitness(){if(-1!==this._witness)return 0!==this._witness;for(const t of this.inputs)if(0<t.witness.items.length)return!0;return!1}signatureHash(t,e,i,s,n){if(r(0<=t&&t<this.inputs.length),r(e instanceof u),r("number"==typeof i),r("number"==typeof s),0===n)return this.signatureHashV0(t,e,s);if(1===n)return this.signatureHashV1(t,e,i,s);throw new Error("Unknown sighash version.")}get opr(){var t={};return 0<this.outputs.length&&(t.data=this.outputs[0].getReturnData([k.OP_RETURN]),t.data)&&"inner"==t.data.$tag&&(t.isDerived=!0),t}signatureHashV0(t,i,r){if((31&r)===S.SINGLE){if(t>=this.outputs.length)return e.from(n.ONE_HASH)}else if((31&r)===S.ZERO&&0==this.outputs.length)return e.from(n.ONE_HASH);i=i.removeSeparators();var s=this.hashSize(t,i,r),a=f.pool(s);if(a.writeU32(this.version),r&S.ANYONECANPAY)s=this.inputs[t],a.writeVarint(1),s.prevout.toWriter(a),a.writeVarBytes(i.toRaw()),a.writeU32(s.sequence);else{a.writeVarint(this.inputs.length);for(let e=0;e<this.inputs.length;e++){var h=this.inputs[e];if(h.prevout.toWriter(a),e===t)a.writeVarBytes(i.toRaw()),a.writeU32(h.sequence);else switch(a.writeVarint(0),31&r){case S.NONE:case S.SINGLE:case S.ZERO:a.writeU32(0);break;default:a.writeU32(h.sequence)}}}switch(31&r){case S.NONE:a.writeVarint(0);break;case S.SINGLE:var c=this.outputs[t];a.writeVarint(t+1);for(let e=0;e<t;e++)a.writeI64(-1),a.writeVarint(0);c.toWriter(a);break;case S.ZERO:c=this.outputs[0],a.writeVarint(1),c.toWriter(a);break;default:a.writeVarint(this.outputs.length);for(const t of this.outputs)t.toWriter(a)}return a.writeU32(this.locktime),a.writeU32(r),o.hash256(a.render())}hashSize(t,e,i){let r=0;switch(r+=4,r=i&S.ANYONECANPAY?(r=r+1+36)+e.getVarSize()+4:(r=(r+=n.sizeVarint(this.inputs.length))+41*(this.inputs.length-1)+36)+e.getVarSize()+4,31&i){case S.NONE:r+=1;break;case S.SINGLE:r=(r=r+n.sizeVarint(t+1)+9*t)+this.outputs[t].getSize();break;case S.ZERO:0<this.outputs.length?r=(r+=n.sizeVarint(1))+this.outputs[0].getSize():r+=1;break;default:r+=n.sizeVarint(this.outputs.length);for(const t of this.outputs)r+=t.getSize()}return r+8}signatureHashV1(t,e,i,r){const s=this.inputs[t];let a=n.ZERO_HASH,h=n.ZERO_HASH,c=n.ZERO_HASH;if(!(r&S.ANYONECANPAY))if(this._hashPrevouts)a=this._hashPrevouts;else{const t=f.pool(36*this.inputs.length);for(const e of this.inputs)e.prevout.toWriter(t);a=o.hash256(t.render()),this.mutable||(this._hashPrevouts=a)}if(!(r&S.ANYONECANPAY)&&(31&r)!==S.ZERO&&(31&r)!==S.SINGLE&&(31&r)!==S.NONE)if(this._hashSequence)h=this._hashSequence;else{const t=f.pool(4*this.inputs.length);for(const e of this.inputs)t.writeU32(e.sequence);h=o.hash256(t.render()),this.mutable||(this._hashSequence=h)}if((31&r)!==S.SINGLE&&(31&r)!==S.ZERO&&(31&r)!==S.NONE)if(this._hashOutputs)c=this._hashOutputs;else{let t=0;for(const e of this.outputs)t+=e.getSize();const e=f.pool(t);for(const t of this.outputs)t.toWriter(e);c=o.hash256(e.render()),this.mutable||(this._hashOutputs=c)}else(31&r)===S.SINGLE?t<this.outputs.length&&(t=this.outputs[t],c=o.hash256(t.toRaw())):(31&r)===S.ZERO&&0<this.outputs.length&&(t=this.outputs[0],c=o.hash256(t.toRaw()));t=156+e.getVarSize();const u=f.pool(t);return u.writeU32(this.version),u.writeBytes(a),u.writeBytes(h),u.writeHash(s.prevout.hash),u.writeU32(s.prevout.index),u.writeVarBytes(e.toRaw()),u.writeI64(i),u.writeU32(s.sequence),u.writeBytes(c),u.writeU32(this.locktime),u.writeU32(r),o.hash256(u.render())}checksig(t,e,i,r,s,n){var o;return 0!==r.length&&(o=r[r.length-1],t=this.signatureHash(t,e,i,o,n),a.verify(t,r.slice(0,-1),s))}signature(t,e,i,r,s,n){return null==s&&(s=S.ALL),t=this.signatureHash(t,e,i,s,n=null==n?0:n),e=a.sign(t,r),(i=new f(e.length+1)).writeBytes(e),i.writeU8(s),i.render()}check(t,e,i){if(0===this.inputs.length)throw new v("UNKNOWN_ERROR","No inputs.");if(!this.isCoinbase())for(let s=0;s<this.inputs.length;s++){var r=this.inputs[s].prevout;if(!(r=t.getOutput(r)))throw new v("UNKNOWN_ERROR","No coin available.");this.checkInput(s,r,e,i)}}checkInput(t,e,i,s){var n=this.inputs[t];r(n,"Input does not exist."),r(e,"No coin passed.");try{u.verifyScript(n.script,n.witness,e.script,this,t,e.value,i,s)}catch(t){throw t}}async checkAsync(t,e,i,r){if(0===this.inputs.length)throw new v("UNKNOWN_ERROR","No inputs.");this.isCoinbase()||(r&&r.enabled?await r.check(this,t,e,i):this.check(t,e,i))}verify(t,e,i){try{this.check(t,e,i)}catch(t){if("ScriptError"===t.type)return!1;throw t}return!0}verifyInputs(t,e){var[t]=this.checkInputs(t,e);return-1!==t}verifyInput(t,e,i,r){try{this.checkInput(t,e,i,r)}catch(t){if("ScriptError"===t.type)return!1;throw t}return!0}async verifyAsync(t,e,i,r){try{await this.checkAsync(t,e,i,r)}catch(t){if("ScriptError"===t.type)return!1;throw t}return!0}isCoinbase(){return 1===this.inputs.length&&this.inputs[0].prevout.isNull()}isRBF(){if(2!==this.version)for(const t of this.inputs)if(t.isRBF())return!0;return!1}getFee(t){return this.hasCoins(t)?this.getInputValue(t)-this.getOutputValue():0}getInputValue(t){let e=0;for(var{prevout:i}of this.inputs){if(!(i=t.getOutput(i)))return 0;e+=i.value}return e}getOutputValue(){let t=0;for(const e of this.outputs)t+=e.value;return t}_getInputAddresses(t){var e=Object.create(null),i=[];if(!this.isCoinbase())for(const n of this.inputs){var r,s=t?t.getOutputFor(n):null;!(s=n.getAddress(s))||e[r=s.getHash("hex")]||(e[r]=!0,i.push(s))}return[i,e]}_getOutputAddresses(){var t=Object.create(null),e=[];for(const s of this.outputs){var i,r=s.getAddress();!r||t[i=r.getHash("hex")]||(t[i]=!0,e.push(r))}return[e,t]}_getAddresses(t){var[e,i]=this._getInputAddresses(t);for(const t of this.getOutputAddresses()){var r=t.getHash("hex");i[r]||(i[r]=!0,e.push(t))}return[e,i]}getInputAddresses(t){var[t]=this._getInputAddresses(t);return t}getOutputAddresses(){var[t]=this._getOutputAddresses();return t}getAddresses(t){var[t]=this._getAddresses(t);return t}getInputHashes(t,e){if("hex"===e)return[,e]=this._getInputAddresses(t),Object.keys(e);var i=[];for(const e of this.getInputAddresses(t))i.push(e.getHash());return i}getOutputHashes(t){if("hex"===t)return[,t]=this._getOutputAddresses(),Object.keys(t);var e=[];for(const t of this.getOutputAddresses())e.push(t.getHash());return e}getHashes(t,e){if("hex"===e)return[,e]=this._getAddresses(t),Object.keys(e);var i=[];for(const e of this.getAddresses(t))i.push(e.getHash());return i}hasCoins(t){if(0===this.inputs.length)return!1;for(var{prevout:e}of this.inputs)if(!t.hasEntry(e))return!1;return!0}isFinal(t,e){var i=y.LOCKTIME_THRESHOLD;if(0!==this.locktime&&!(this.locktime<(this.locktime<i?t:e)))for(const t of this.inputs)if(4294967295!==t.sequence)return!1;return!0}static mergeOrder(t){return r(Array.isArray(t)),t.reduce((t,e)=>null==t||1==t.outputs.length||1<e.outputs.length&&e.outputs[1].value>t.outputs[1].value?e:t,null)}verifyLocktime(t,e){var i=y.LOCKTIME_THRESHOLD;t=this.inputs[t];return r(t,"Input does not exist."),r(0<=e,"Locktime must be non-negative."),this.locktime<i==e<i&&!(e>this.locktime)&&4294967295!==t.sequence}verifySequence(t,e){var i=y.SEQUENCE_DISABLE_FLAG,s=y.SEQUENCE_TYPE_FLAG,n=y.SEQUENCE_MASK;t=this.inputs[t];return r(t,"Input does not exist."),r(0<=e,"Locktime must be non-negative."),!!(e&i)||!(this.version<2||t.sequence&i||(t.sequence&s)!=(e&s)||(e&n)>(t.sequence&n))}getLegacySigops(){if(-1!==this._sigops)return this._sigops;let t=0;for(const e of this.inputs)t+=e.script.getSigops(!1);for(const e of this.outputs)t+=e.script.getSigops(!1);return this.mutable||(this._sigops=t),t}getScripthashSigops(t){if(this.isCoinbase())return 0;let e=0;for(const r of this.inputs){var i=t.getOutputFor(r);i&&i.script.isScripthash()&&(e+=i.script.getScripthashSigops(r.script))}return e}getWitnessSigops(t){if(this.isCoinbase())return 0;let e=0;for(const r of this.inputs){var i=t.getOutputFor(r);i&&(e+=i.script.getWitnessSigops(r.script,r.witness))}return e}getSigopsCost(t,e){null==e&&(e=u.flags.STANDARD_VERIFY_FLAGS);var i=y.WITNESS_SCALE_FACTOR;let r=this.getLegacySigops()*i;return e&u.flags.VERIFY_P2SH&&(r+=this.getScripthashSigops(t)*i),e&u.flags.VERIFY_WITNESS&&(r+=this.getWitnessSigops(t)),r}getSigops(t,e){var i=y.WITNESS_SCALE_FACTOR;return(this.getSigopsCost(t,e)+i-1)/i|0}isSane(){var[t]=this.checkSanity();return t}checkSanity(){if(0===this.inputs.length)return[!1,"bad-txns-vin-empty",100];if(0===this.outputs.length)return[!1,"bad-txns-vout-empty",100];if(this.getBaseSize()>y.MAX_BLOCK_SIZE)return[!1,"bad-txns-oversize",100];let t=0;for(const e of this.outputs){if(e.value<0)return[!1,"bad-txns-vout-negative",100];if(e.value>y.MAX_MONEY)return[!1,"bad-txns-vout-toolarge",100];if((t+=e.value)<0||t>y.MAX_MONEY)return[!1,"bad-txns-txouttotal-toolarge",100]}var e=new Set;for(const t of this.inputs){var i=t.prevout.toKey();if(e.has(i))return[!1,"bad-txns-inputs-duplicate",100];e.add(i)}if(this.isCoinbase()){var r=this.inputs[0].script.getSize();if(r<2||100<r)return[!1,"bad-cb-length",100]}else for(const t of this.inputs)if(t.prevout.isNull())return[!1,"bad-txns-prevout-null",10];return[!0,"valid",0]}isStandard(){var[t]=this.checkStandard();return t}checkStandard(){if(this.version<1||this.version>b.MAX_TX_VERSION)return[!1,"version",0];if(this.getWeight()>=b.MAX_TX_WEIGHT)return[!1,"tx-size",0];for(const t of this.inputs){if(1650<t.script.getSize())return[!1,"scriptsig-size",0];if(!t.script.isPushOnly())return[!1,"scriptsig-not-pushonly",0]}let t=0;for(const e of this.outputs){if(!e.script.isStandard())return[!1,"scriptpubkey",0];if(e.script.isNulldata())t++;else{if(e.script.isMultisig()&&!b.BARE_MULTISIG)return[!1,"bare-multisig",0];if(e.isDust())return[!1,"dust",0]}}return 1<t?[!1,"multi-op-return",0]:[!0,"valid",0]}hasStandardInputs(t){if(!this.isCoinbase())for(const r of this.inputs){var e=t.getOutputFor(r);if(!e)return!1;if(!e.script.isPubkeyhash())if(e.script.isScripthash()){var i=r.script.getRedeem();if(!i)return!1;if(i.getSigops(!0)>b.MAX_P2SH_SIGOPS)return!1}else if(e.script.isUnknown())return!1}return!0}hasStandardWitness(t){if(!this.isCoinbase())for(const r of this.inputs){var e,i=r.witness;if((e=t.getOutputFor(r))&&0!==i.items.length){let t=e.script;if(t.isScripthash()&&!(t=r.script.getRedeem()))return!1;if(!t.isProgram())return!1;if(t.isWitnessPubkeyhash()){if(2!==i.items.length)return!1;if(73<i.items[0].length)return!1;if(65<i.items[1].length)return!1}else if(t.isWitnessScripthash()){if(i.items.length-1>b.MAX_P2WSH_STACK)return!1;for(let t=0;t<i.items.length-1;t++)if(i.items[t].length>b.MAX_P2WSH_PUSH)return!1;if((e=i.items[i.items.length-1]).length>b.MAX_P2WSH_SIZE)return!1;if((e=u.fromRaw(e)).isPubkey()){if(i.items.length-1!=1)return!1;if(73<i.items[0].length)return!1}else if(e.isPubkeyhash()){if(r.witness.items.length-1!=2)return!1;if(73<i.items[0].length)return!1;if(65<i.items[1].length)return!1}else{var[e]=e.getMultisig();if(-1!==e){if(i.items.length-1!==e+1)return!1;if(0!==i.items[0].length)return!1;for(let t=1;t<i.items.length-1;t++)if(73<i.items[t].length)return!1}}}else{if(i.items.length>b.MAX_P2WSH_STACK)return!1;for(const t of i.items)if(t.length>b.MAX_P2WSH_PUSH)return!1}}}return!0}checkInputs(t,e){r("number"==typeof e);let i=0;for(var{prevout:s}of this.inputs){var n=t.getEntry(s);if(!n)return[-1,"bad-txns-inputs-missingorspent",0];if(n.coinbase&&0<n.height&&e<n.height+y.COINBASE_MATURITY)return[-1,"bad-txns-premature-spend-of-coinbase",0];if(n=t.getOutput(s),r(n),n.value<0||n.value>y.MAX_MONEY)return[-1,"bad-txns-inputvalues-outofrange",100];if((i+=n.value)<0||i>y.MAX_MONEY)return[-1,"bad-txns-inputvalues-outofrange",100]}var o=this.getOutputValue();return i<o?[-1,"bad-txns-in-belowout",100]:(o=i-o)<0?[-1,"bad-txns-fee-negative",100]:o>y.MAX_MONEY?[-1,"bad-txns-fee-outofrange",100]:[o,"valid",0]}getModifiedSize(t){null==t&&(t=this.getVirtualSize());for(const i of this.inputs){var e=41+Math.min(110,i.script.getSize());e<t&&(t-=e)}return t}getPriority(t,e,i){if(r("number"==typeof e,"Must pass in height."),this.isCoinbase())return 0;null==i&&(i=this.getVirtualSize());let s=0;for(var{prevout:n}of this.inputs){var o=t.getOutput(n);o&&-1!==(n=t.getHeight(n))&&n<=e&&(s+=o.value*(e-n))}return Math.floor(s/i)}getChainValue(t){if(this.isCoinbase())return 0;let e=0;for(var{prevout:i}of this.inputs){var r=t.getOutput(i);r&&-1!==t.getHeight(i)&&(e+=r.value)}return e}isFree(t,e,i){return this.getPriority(t,e,i)>b.FREE_THRESHOLD}getMinFee(t,e){return null==t&&(t=this.getVirtualSize()),b.getMinFee(t,e)}getRoundFee(t,e){return null==t&&(t=this.getVirtualSize()),b.getRoundFee(t,e)}getRate(t,e){return(t=this.getFee(t))<0?0:(null==e&&(e=this.getVirtualSize()),b.getRate(e,t))}getPrevout(){if(this.isCoinbase())return[];var t=Object.create(null);for(const e of this.inputs)t[e.prevout.hash]=!0;return Object.keys(t)}isWatched(t){let e=!1;t.test(this.hash())&&(e=!0);for(let r=0;r<this.outputs.length;r++){var i=this.outputs[r];i.script.test(t)&&((t.update===w.flags.ALL||t.update===w.flags.PUBKEY_ONLY&&(i.script.isPubkey()||i.script.isMultisig()))&&(i=g.fromTX(this,r),t.add(i.toRaw())),e=!0)}if(e)return e;for(const e of this.inputs){var r=e.prevout;if(t.test(r.toRaw()))return!0;if(e.script.test(t))return!0}return!1}rhash(){return s.revHex(this.hash("hex"))}rwhash(){return s.revHex(this.witnessHash("hex"))}txid(){return this.rhash()}wtxid(){return this.rwhash()}toInv(){return new m(m.types.TX,this.hash("hex"))}inspect(){return this.format()}format(t,e,i){let r=0,n=0,o=-1,a=null,c=0,u=null;return t&&(n=this.getFee(t),r=this.getRate(t),Number.isSafeInteger(r)||(r=0)),e&&(o=e.height,a=s.revHex(e.hash),c=e.time,u=s.date(c)),null==i&&(i=-1),{hash:this.txid(),witnessHash:this.wtxid(),size:this.getSize(),virtualSize:this.getVirtualSize(),value:h.btc(this.getOutputValue()),fee:h.btc(n),rate:h.btc(r),minFee:h.btc(this.getMinFee()),height:o,block:a,time:c,date:u,index:i,version:this.version,inputs:this.inputs.map(e=>{var i=t?t.getOutputFor(e):null;return e.format(i)}),outputs:this.outputs,locktime:this.locktime}}formatInsight(t,e=0){return null==t&&(t=-1),{hash:this.hash("hex"),rhash:this.txid(),witnessHash:this.wtxid(),txid:function(){return this.rhash},ps:e,index:t,version:this.version,flag:1,locktime:this.locktime,raw:this.toRaw(),inputs:this.inputs.map(t=>t.formatInsight()),outputs:this.outputs.map(t=>t.formatInsight())}}static EncodeSpenderValue(t,i,r,s){var n=e.allocUnsafe(72);return n.write(t,0,"hex"),n.writeUInt32BE(i,32,!0),n.writeUInt32BE(r,36,!0),n.write(s,40,"hex"),n}static DecodeSpenderValue(t){return r(e.isBuffer(t)),r(72===t.length),{txid:t.toString("hex",0,32),inputIndex:t.readUInt32BE(32,!0),blockHeight:t.readUInt32BE(36,!0),blockHash:t.toString("hex",40,32)}}toJSON(){return this.getJSON()}getJSON(t,e,i,r){let n,o,a,h,u,l;return e&&(o=this.getFee(e),n=this.getRate(e),Number.isSafeInteger(n)||(n=0)),i&&(a=i.height,h=s.revHex(i.hash),u=i.time,l=s.date(u)),t=c.get(t),{hash:this.txid(),witnessHash:this.wtxid(),fee:o,rate:n,mtime:s.now(),height:a,block:h,time:u,date:l,index:r,version:this.version,inputs:this.inputs.map(i=>{var r=e?e.getCoinFor(i):null;return i.getJSON(t,r)}),outputs:this.outputs.map(e=>e.getJSON(t)),locktime:this.locktime,hex:this.toRaw().toString("hex")}}fromJSON(t){r(t,"TX data is required."),r(s.isU32(t.version),"Version must be a uint32."),r(Array.isArray(t.inputs),"Inputs must be an array."),r(Array.isArray(t.outputs),"Outputs must be an array."),r(s.isU32(t.locktime),"Locktime must be a uint32."),this.version=t.version;for(const e of t.inputs)this.inputs.push(d.fromJSON(e));for(const e of t.outputs)this.outputs.push(p.fromJSON(e));return this.locktime=t.locktime,this}static fromJSON(e){return(new t).fromJSON(e)}static fromRaw(i,r){return"string"==typeof i&&(i=e.from(i,r)),(new t).fromRaw(i)}static fromReader(e){return(new t).fromReader(e)}fromRaw(t){return this.fromReader(new l(t))}fromReader(t){if(!((e=t).left()<6)&&0===e.data[e.offset+4]&&0!==e.data[e.offset+5])return this.fromWitnessReader(t);t.start(),this.version=t.readU32();var e,i=t.readVarint();for(let e=0;e<i;e++)this.inputs.push(d.fromReader(t));var r=t.readVarint();for(let e=0;e<r;e++)this.outputs.push(p.fromReader(t));return this.locktime=t.readU32(),this.mutable?t.end():(this._raw=t.endData(),this._size=this._raw.length,this._witness=0),this}fromWitnessReader(t){t.start(),this.version=t.readU32(),r(0===t.readU8(),"Non-zero marker.");let e=t.readU8();r(0!==e,"Flags byte is zero.");var i=t.readVarint();for(let e=0;e<i;e++)this.inputs.push(d.fromReader(t));var s=t.readVarint();for(let e=0;e<s;e++)this.outputs.push(p.fromReader(t));let n=0,o=!1;if(1&e){e^=1,n=t.offset;for(const e of this.inputs)e.witness.fromReader(t),0<e.witness.items.length&&(o=!0);n=t.offset-n+2}if(0!==e)throw new Error("Unknown witness flag.");if(0===this.inputs.length&&0!==this.outputs.length)throw new Error("Zero input witness tx.");return this.locktime=t.readU32(),!this.mutable&&o?(this._raw=t.endData(),this._size=this._raw.length,this._witness=n):t.end(),this}frameNormal(){var t=this.getNormalSizes(),e=new f(t.size);return this.writeNormal(e),t.data=e.render(),t}frameWitness(){var t=this.getWitnessSizes(),e=new f(t.size);return this.writeWitness(e),t.data=e.render(),t}writeNormal(t){if(0===this.inputs.length&&0!==this.outputs.length)throw new Error("Cannot serialize zero-input tx.");t.writeU32(this.version),t.writeVarint(this.inputs.length);for(const e of this.inputs)e.toWriter(t);t.writeVarint(this.outputs.length);for(const e of this.outputs)e.toWriter(t);return t.writeU32(this.locktime),t}writeWitness(t){if(0===this.inputs.length&&0!==this.outputs.length)throw new Error("Cannot serialize zero-input tx.");t.writeU32(this.version),t.writeU8(0),t.writeU8(1),t.writeVarint(this.inputs.length);for(const e of this.inputs)e.toWriter(t);t.writeVarint(this.outputs.length);for(const e of this.outputs)e.toWriter(t);var e=t.offset;for(const e of this.inputs)e.witness.toWriter(t);if(e=t.offset-e,t.writeU32(this.locktime),e===this.inputs.length)throw new Error("Cannot serialize empty-witness tx.");return t}getNormalSizes(){let t=0;t=(t+=4)+n.sizeVarint(this.inputs.length);for(const e of this.inputs)t+=e.getSize();t+=n.sizeVarint(this.outputs.length);for(const e of this.outputs)t+=e.getSize();return new _(t+=4,0)}getWitnessSizes(){let t=0,e=0;t+=4,e+=2,t+=n.sizeVarint(this.inputs.length);for(const i of this.inputs)t+=i.getSize(),e+=i.witness.getVarSize();t+=n.sizeVarint(this.outputs.length);for(const e of this.outputs)t+=e.getSize();return new _((t+=4)+e,e)}static isTX(e){return e instanceof t}}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * writer.js - buffer writer for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=i(4),n=i(8);function o(){if(!(this instanceof o))return new o;this.ops=[],this.offset=0}function a(t,e,i,r){this.type=t,this.value=e,this.enc=i,this.size=r}o.prototype.render=function(){var t=e.allocUnsafe(this.offset);let i=0;for(const e of this.ops)switch(e.type){case 0:i+=e.value;break;case 1:e.value>>>=0,i=t.writeUInt8(e.value,i,!0);break;case 2:e.value>>>=0,i=t.writeUInt16LE(e.value,i,!0);break;case 3:e.value>>>=0,i=t.writeUInt16BE(e.value,i,!0);break;case 4:e.value>>>=0,i=t.writeUInt32LE(e.value,i,!0);break;case 5:e.value>>>=0,i=t.writeUInt32BE(e.value,i,!0);break;case 6:i=s.writeU64(t,e.value,i);break;case 7:i=s.writeU64BE(t,e.value,i);break;case 8:i=s.writeU64N(t,e.value,i);break;case 9:i=s.writeU64BEN(t,e.value,i);break;case 10:i=t.writeInt8(e.value,i,!0);break;case 11:i=t.writeInt16LE(e.value,i,!0);break;case 12:i=t.writeInt16BE(e.value,i,!0);break;case 13:i=t.writeInt32LE(e.value,i,!0);break;case 14:i=t.writeInt32BE(e.value,i,!0);break;case 15:i=s.writeI64(t,e.value,i);break;case 16:i=s.writeI64BE(t,e.value,i);break;case 17:i=s.writeI64N(t,e.value,i);break;case 18:i=s.writeI64BEN(t,e.value,i);break;case 19:i=t.writeFloatLE(e.value,i,!0);break;case 20:i=t.writeFloatBE(e.value,i,!0);break;case 21:i=t.writeDoubleLE(e.value,i,!0);break;case 22:i=t.writeDoubleBE(e.value,i,!0);break;case 23:i=s.writeVarint(t,e.value,i);break;case 24:i=s.writeVarintN(t,e.value,i);break;case 25:i=s.writeVarint2(t,e.value,i);break;case 26:i=s.writeVarint2N(t,e.value,i);break;case 27:i+=e.value.copy(t,i);break;case 28:i+=t.write(e.value,i,e.enc);break;case 29:i+=n.hash256(t.slice(0,i)).copy(t,i,0,4);break;case 30:t.fill(e.value,i,i+e.size),i+=e.size;break;default:r(!1,"Bad type.")}return r(i===t.length),this.destroy(),t},o.prototype.getSize=function(){return this.offset},o.prototype.seek=function(t){this.offset+=t,this.ops.push(new a(0,t))},o.prototype.destroy=function(){this.ops.length=0,this.offset=0},o.prototype.writeU8=function(t){this.offset+=1,this.ops.push(new a(1,t))},o.prototype.writeU16=function(t){this.offset+=2,this.ops.push(new a(2,t))},o.prototype.writeU16BE=function(t){this.offset+=2,this.ops.push(new a(3,t))},o.prototype.writeU32=function(t){this.offset+=4,this.ops.push(new a(4,t))},o.prototype.writeU32BE=function(t){this.offset+=4,this.ops.push(new a(5,t))},o.prototype.writeU64=function(t){this.offset+=8,this.ops.push(new a(6,t))},o.prototype.writeU64BE=function(t){this.offset+=8,this.ops.push(new a(7,t))},o.prototype.writeU64N=function(t){this.offset+=8,this.ops.push(new a(8,t))},o.prototype.writeU64BEN=function(t){this.offset+=8,this.ops.push(new a(9,t))},o.prototype.writeI8=function(t){this.offset+=1,this.ops.push(new a(10,t))},o.prototype.writeI16=function(t){this.offset+=2,this.ops.push(new a(11,t))},o.prototype.writeI16BE=function(t){this.offset+=2,this.ops.push(new a(12,t))},o.prototype.writeI32=function(t){this.offset+=4,this.ops.push(new a(13,t))},o.prototype.writeI32BE=function(t){this.offset+=4,this.ops.push(new a(14,t))},o.prototype.writeI64=function(t){this.offset+=8,this.ops.push(new a(15,t))},o.prototype.writeI64BE=function(t){this.offset+=8,this.ops.push(new a(16,t))},o.prototype.writeI64N=function(t){this.offset+=8,this.ops.push(new a(17,t))},o.prototype.writeI64BEN=function(t){this.offset+=8,this.ops.push(new a(18,t))},o.prototype.writeFloat=function(t){this.offset+=4,this.ops.push(new a(19,t))},o.prototype.writeFloatBE=function(t){this.offset+=4,this.ops.push(new a(20,t))},o.prototype.writeDouble=function(t){this.offset+=8,this.ops.push(new a(21,t))},o.prototype.writeDoubleBE=function(t){this.offset+=8,this.ops.push(new a(22,t))},o.prototype.writeVarint=function(t){this.offset+=s.sizeVarint(t),this.ops.push(new a(23,t))},o.prototype.writeVarintN=function(t){this.offset+=s.sizeVarintN(t),this.ops.push(new a(24,t))},o.prototype.writeVarint2=function(t){this.offset+=s.sizeVarint2(t),this.ops.push(new a(25,t))},o.prototype.writeVarint2N=function(t){this.offset+=s.sizeVarint2N(t),this.ops.push(new a(26,t))},o.prototype.writeBytes=function(t){0!==t.length&&(this.offset+=t.length,this.ops.push(new a(27,t)))},o.prototype.writeVarBytes=function(t){this.offset+=s.sizeVarint(t.length),this.ops.push(new a(23,t.length)),0!==t.length&&(this.offset+=t.length,this.ops.push(new a(27,t)))},o.prototype.copy=function(t,e,i){r(e<=i),t=t.slice(e,i),this.writeBytes(t)},o.prototype.writeString=function(t,i){0!==t.length&&(this.offset+=e.byteLength(t,i),this.ops.push(new a(28,t,i)))},o.prototype.writeHash=function(t){"string"!=typeof t?(r(32===t.length),this.writeBytes(t)):(r(64===t.length),this.writeString(t,"hex"))},o.prototype.writeVarString=function(t,i){var r;0===t.length?this.ops.push(new a(23,0)):(r=e.byteLength(t,i),this.offset+=s.sizeVarint(r),this.offset+=r,this.ops.push(new a(23,r)),this.ops.push(new a(28,t,i)))},o.prototype.writeNullString=function(t,e){this.writeString(t,e),this.writeU8(0)},o.prototype.writeChecksum=function(){this.offset+=4,this.ops.push(new a(29))},o.prototype.fill=function(t,e){r(0<=e),0!==e&&(this.offset+=e,this.ops.push(new a(30,t,null,e)))},t.exports=o}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * Packet.js - worker packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(144);i(326);class s{constructor(){this.id=++s.id>>>0,this.cmd=-1}getSize(){throw new Error("Abstract method.")}toWriter(){throw new Error("Abstract method.")}fromRaw(){throw new Error("Abstract method.")}static fromRaw(){throw new Error("Abstract method.")}workerHandle(t){t.resolveJob(this.id,this)}masterHandle(t){var e=r.execute(this);e.id=this.id,t.send(e)}jobsHandle(t){throw new Error(`Unknown command: "${this.cmd}".`)}}s.id=0,t.exports=s},function(t,e,i){"use strict";(function(t){
/*!
 * common.js - common script functions for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1);var s=i(3);const n=i(23),o=i(89);var a=i(7).ContractType;(s=((s=(e.opcodes={OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_CHECKLOCKTIMEVERIFY:177,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_PROPCREATE:192,OP_PROPEXCHANGE:193,OP_PROPSALE:194,OP_CPREGISTER:195,OP_CPCHANGE:196,OP_HTLCSUGGEST:197,OP_HTLCASSENT:198,OP_PROMISE:199,OP_COINBASE:200,OP_COMMENT:201,OP_PROPMAX:207,OP_SMALLDATA:249,OP_SMALLINTEGER:250,OP_PUBKEYS:251,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255},e.opcodesByVal=s.reverse(e.opcodes),e.small=[t.from([129]),t.from([]),t.from([1]),t.from([2]),t.from([3]),t.from([4]),t.from([5]),t.from([6]),t.from([7]),t.from([8]),t.from([9]),t.from([10]),t.from([11]),t.from([12]),t.from([13]),t.from([14]),t.from([15]),t.from([16])],e.flags={VERIFY_NONE:0,VERIFY_P2SH:1,VERIFY_STRICTENC:2,VERIFY_DERSIG:4,VERIFY_LOW_S:8,VERIFY_NULLDUMMY:16,VERIFY_SIGPUSHONLY:32,VERIFY_MINIMALDATA:64,VERIFY_DISCOURAGE_UPGRADABLE_NOPS:128,VERIFY_CLEANSTACK:256,VERIFY_CHECKLOCKTIMEVERIFY:512,VERIFY_CHECKSEQUENCEVERIFY:1024,VERIFY_WITNESS:2048,VERIFY_DISCOURAGE_UPGRADABLE_WITNESS_PROGRAM:4096,VERIFY_MINIMALIF:8192,VERIFY_NULLFAIL:16384,VERIFY_WITNESS_PUBKEYTYPE:32768,VERIFY_MAST:65536},e.flags.MANDATORY_VERIFY_FLAGS=e.flags.VERIFY_P2SH,e.flags.STANDARD_VERIFY_FLAGS=0|e.flags.MANDATORY_VERIFY_FLAGS|e.flags.VERIFY_DERSIG|e.flags.VERIFY_STRICTENC|e.flags.VERIFY_MINIMALDATA|e.flags.VERIFY_NULLDUMMY|e.flags.VERIFY_DISCOURAGE_UPGRADABLE_NOPS|e.flags.VERIFY_CLEANSTACK|e.flags.VERIFY_MINIMALIF|e.flags.VERIFY_NULLFAIL|e.flags.VERIFY_CHECKLOCKTIMEVERIFY|e.flags.VERIFY_CHECKSEQUENCEVERIFY|e.flags.VERIFY_LOW_S|e.flags.VERIFY_WITNESS|e.flags.VERIFY_DISCOURAGE_UPGRADABLE_WITNESS_PROGRAM|e.flags.VERIFY_WITNESS_PUBKEYTYPE,e.flags.ONLY_STANDARD_VERIFY_FLAGS=e.flags.STANDARD_VERIFY_FLAGS&~e.flags.MANDATORY_VERIFY_FLAGS,e.hashType={ALL:1,NONE:2,SINGLE:3,ZERO:4,ANYONECANPAY:128},e.hashTypeByVal=s.reverse(e.hashType),e.types={NONSTANDARD:0,PUBKEY:1,PUBKEYHASH:2,SCRIPTHASH:3,MULTISIG:4,NULLDATA:5,WITNESS:9,PROPEXTEND:114,WITNESSMALFORMED:128,WITNESSSCRIPTHASH:129,WITNESSPUBKEYHASH:130,WITNESSMASTHASH:131},e.typesByVal=s.reverse(e.types),e.isHashType=function(i){return r(t.isBuffer(i)),0!==i.length&&(i=i[i.length-1]&~e.hashType.ANYONECANPAY)>=e.hashType.ALL&&i<=e.hashType.ZERO},e.isLowDER=function(t){return!!e.isSignatureEncoding(t)&&n.isLowS(t.slice(0,-1))},e.isKeyEncoding=function(e){if(r(t.isBuffer(e)),e.length<33)return!1;if(4===e[0]){if(65!==e.length)return!1}else{if(2!==e[0]&&3!==e[0])return!1;if(33!==e.length)return!1}return!0},e.isCompressedEncoding=function(e){return r(t.isBuffer(e)),33===e.length&&(2===e[0]||3===e[0])},e.isSignatureEncoding=function(e){var i,s;return r(t.isBuffer(e)),!(e.length<9||73<e.length||48!==e[0]||e[1]!==e.length-3||5+(i=e[3])>=e.length||i+(s=e[5+i])+7!==e.length||2!==e[2]||0===i||128&e[4]||1<i&&0===e[4]&&!(128&e[5])||2!==e[i+4]||0===s||128&e[i+6]||1<s&&0===e[i+6]&&!(128&e[i+7]))},e.toASM=function(t,i){if(t.length<=4)return o.decode(t).toString(10);if(i&&e.isSignatureEncoding(t)){i=t[t.length-1];let r=e.hashTypeByVal[31&i]||"";return r&&(i&e.hashType.ANYONECANPAY&&(r+="|ANYONECANPAY"),r=`[${r}]`),t.slice(0,-1).toString("hex")+r}return t.toString("hex")},e.outputLockType={NOCHECK:"no",CHECKABSOLUTEBLOCK:"clb",CHECKABSOLUTETIME:"clt",CHECKRELATIVEBLOCK:"csb",CHECKRELATIVETIME:"cst"},e.nestingCodes=[e.opcodes.OP_PROPCREATE,e.opcodes.OP_PROPEXCHANGE,e.opcodes.OP_HTLCSUGGEST,e.opcodes.OP_HTLCASSENT,e.opcodes.OP_COMMENT],e.espicalCodes=[e.opcodes.OP_RETURN,e.opcodes.OP_CPREGISTER,e.opcodes.OP_CPCHANGE,e.opcodes.OP_PROMISE,e.opcodes.OP_COINBASE],e.unspendableCodes=[e.opcodes.OP_RETURN,e.opcodes.OP_CPREGISTER,e.opcodes.OP_CPCHANGE,e.opcodes.OP_PROMISE].concat(e.nestingCodes),{}))[a.propCreate]=e.opcodes.OP_PROPCREATE,s[a.propExchange]=e.opcodes.OP_PROPEXCHANGE,s[a.propSale]=e.opcodes.OP_PROPSALE,s[a.coinbase]=e.opcodes.OP_COINBASE,s[a.cpRegister]=e.opcodes.OP_CPREGISTER,s[a.cpChange]=e.opcodes.OP_CPCHANGE,s[a.contractPromise]=e.opcodes.OP_PROMISE,s[a.htlcSuggest]=e.opcodes.OP_HTLCSUGGEST,s[a.htlcAssent]=e.opcodes.OP_HTLCASSENT,s[a.comment]=e.opcodes.OP_COMMENT,e.OperCodeFromType=s,{}))[e.opcodes.OP_PROPCREATE]=a.propCreate,s[e.opcodes.OP_PROPEXCHANGE]=a.propExchange,s[e.opcodes.OP_PROPSALE]=a.propSale,s[e.opcodes.OP_COINBASE]=a.coinbase,s[e.opcodes.OP_CPREGISTER]=a.cpRegister,s[e.opcodes.OP_CPCHANGE]=a.cpChange,s[e.opcodes.OP_PROMISE]=a.contractPromise,s[e.opcodes.OP_HTLCASSENT]=a.htlcAssent,s[e.opcodes.OP_COMMENT]=a.comment,e.ContractTypeFromCode=s}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(t){
/*!
 * secp256k1-elliptic.js - wrapper for elliptic
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(88).ec("secp256k1"),n=i(207),o=i(38),a=s.curve,h=e;function c(t,e){var i=t[e++];if(!(128&i))return[i,e];var r=15&i;let s=0;for(let i=0;i<r;i++)s=(s<<=8)|t[e++];return[s,e]}h.binding=!1,h.generatePrivateKey=function(){return s.genKeyPair().getPrivate().toArrayLike(t,"be",32)},h.publicKeyCreate=function(e,i){return null==i&&(i=!0),r(t.isBuffer(e)),e=s.keyPair({priv:e}),t.from(e.getPublic(i,"array"))},h.publicKeyConvert=function(e,i){return null==i&&(i=!0),e=a.decodePoint(e),t.from(e.encode("array",i))},h.privateKeyTweakAdd=function(e,i){if(i=new o(i).add(new o(e)).mod(a.n).toArrayLike(t,"be",32),h.privateKeyVerify(i))return i;throw new Error("Private key is invalid.")},h.publicKeyTweakAdd=function(e,i,r){if(null==r&&(r=!0),e=a.decodePoint(e),i=a.g.mul(new o(i)).add(e),e=t.from(i.encode("array",r)),h.publicKeyVerify(e))return e;throw new Error("Public key is invalid.")},h.ecdh=function(e,i){return i=s.keyPair({priv:i}),e=s.keyPair({pub:e}),i.derive(e.getPublic()).toArrayLike(t,"be",32)},h.recover=function(e,i,r,n){let o;r=r||0,null==n&&(n=!0);try{o=s.recoverPubKey(e,i,r)}catch(e){return null}return t.from(o.encode("array",n))},h.verify=function(e,i,n){if(r(t.isBuffer(e)),r(t.isBuffer(i)),r(t.isBuffer(n)),0===i.length)return!1;if(0===n.length)return!1;i=function(t){let e,i=t,r=0;return 48!==i[r++]?t:([e,r]=c(i,1),i.length>e+r&&(i=i.slice(0,e+r)),2!==i[r++]?t:([e,r]=c(i,r),r+=e,2!==i[r++]?t:([e,r]=c(i,r),i.length>e+r&&(i=i.slice(0,e+r)),i)))}(i);try{return s.verify(e,i,n)}catch(e){return!1}},h.publicKeyVerify=function(t){try{return s.keyPair({pub:t}).validate()}catch(t){return!1}},h.privateKeyVerify=function(t){return 32===t.length&&!(t=new o(t)).isZero()&&t.lt(a.n)},h.sign=function(e,i){return r(t.isBuffer(e)),r(t.isBuffer(i)),e=s.sign(e,i,{canonical:!0}),t.from(e.toDER())},h.fromDER=function(e){r(t.isBuffer(e));e=new n(e);var i=t.allocUnsafe(64);return e.r.toArrayLike(t,"be",32).copy(i,0),e.s.toArrayLike(t,"be",32).copy(i,32),i},h.toDER=function(e){return r(t.isBuffer(e)),e=new n({r:new o(e.slice(0,32),"be"),s:new o(e.slice(32,64),"be")}),t.from(e.toDER())},h.isLowS=function(t){let e;try{e=new n(t)}catch(t){return!1}return!e.s.isZero()&&!e.s.gt(s.nh)}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * packetType.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */t.exports={VERSION:0,VERACK:1,PING:2,PONG:3,GETADDR:4,ADDR:5,INV:6,GETDATA:7,NOTFOUND:8,GETBLOCKS:9,GETHEADERS:10,HEADERS:11,SENDHEADERS:12,BLOCK:13,TX:14,REJECT:15,MEMPOOL:16,FILTERLOAD:17,FILTERADD:18,FILTERCLEAR:19,MERKLEBLOCK:20,FEEFILTER:21,SENDCMPCT:22,CMPCTBLOCK:23,GETBLOCKTXN:24,BLOCKTXN:25,ENCINIT:26,ENCACK:27,AUTHCHALLENGE:28,AUTHREPLY:29,AUTHPROPOSE:30,UNKNOWN:31,INTERNAL:100,DATA:101}},function(t,e,i){"use strict";(function(e){
/*!
 * output.js - output object for vallnet
 * Copyright (c) 2018-2020, Bookman Software (MIT License)
 */
const r=i(1),s=i(3),n=i(31),o=i(18),a=i(13),h=i(16),c=i(6),u=i(2),l=i(9),f=i(26);class d{constructor(t){this.value=0,this.script=new h,t&&this.fromOptions(t)}getReturnData(t){return this.script.getReturnData(t)}getReturnType(t){return this.script.getReturnType(t)}fromOptions(t){return r(t,"Output data is required."),t.value&&(r(s.isU64(t.value),"Value must be a uint64.$6"),this.value=t.value),t.script&&this.script.fromOptions(t.script),t.address&&this.script.fromAddress(t.address,t),this}static fromOptions(t){return(new d).fromOptions(t)}fromScript(t,e,i){return(t="string"==typeof t?a.fromString(t):t)instanceof a&&(t=h.fromAddress(t,i)),r(t instanceof h,"Script must be a Script."),r(s.isU64(e),"Value must be a uint64.$7"),this.script=t,this.value=e,this}static fromScript(t,e,i){return(new d).fromScript(t,e,i)}get isColored(){let t=!1;return!!this.getReturnType(h.unspendableCodes)||t}clone(){var t=new d;return t.value=this.value,t.script.inject(this.script),t}equals(t){return r(d.isOutput(t)),this.value===t.value&&this.script.equals(t.script)}compare(t){r(d.isOutput(t));var e=this.value-t.value;return 0!=e?e:this.script.compare(t.script)}getType(){return h.typesByVal[this.script.getType()].toLowerCase()}getAddress(){return a.fromScript(this.script)}getAddresses(){var t=[],e=this.script.getMultiPubkeyhash();if(e&&Array.isArray(e))for(var i of e){var r=new a;r.hash=i,r.type=a.types.PUBKEYHASH,this.version=-1,t.push(r)}else t.push((new a).fromScript(this.script));return t}getHash(t){var e=this.getAddress();return e?e.getHash(t):null}getHashs(t){var e=[],i=this.getAddresses();if(i)if(Array.isArray(i))for(var r of i)e.push(r.getHash(t));else e.push(i.getHash(t));return e}inspect(){return{type:this.getType(),value:n.btc(this.value),script:this.script,address:this.getAddress()}}formatInsight(){return{value:n.btc(this.value),script:this.script,address:this.getAddress()}}toJSON(){return this.getJSON()}getJSON(t){let e=this.getAddress();return t=o.get(t),e=e&&e.toString(t),{value:this.value,script:this.script.toJSON(),address:e}}getDustThreshold(){var t=l.WITNESS_SCALE_FACTOR;if(this.script.isUnspendable())return 0;let e=this.getSize();return this.script.isProgram()?e+=37+(107/t|0)+4:e+=148,3*f.getMinFee(e)}getSize(){return 8+this.script.getVarSize()}isDust(){return this.value<this.getDustThreshold()}fromJSON(t){return r(t,"Output data is required."),r(s.isU64(t.value),"Value must be a uint64.$8"),this.value=t.value,this.script.fromJSON(t.script),this}static fromJSON(t){return(new d).fromJSON(t)}toWriter(t){return t.writeI64(this.value),t.writeVarBytes(this.script.toRaw()),t}toRaw(){var t=this.getSize();return this.toWriter(new c(t)).render()}fromReader(t){return this.value=t.readI64(),this.script.fromRaw(t.readVarBytes()),this}fromRaw(t){return this.fromReader(new u(t))}static fromReader(t){return(new d).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new d).fromRaw(t)}static isOutput(t){return t instanceof d}}t.exports=d}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * policy.js - bitcoin constants for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1);i=i(9),e.BASE_PORT=2e3,e.setPort=function(t,i=0){t.port=i+100*t.typeId+e.BASE_PORT,t.httpPort=i+100*t.typeId+e.BASE_PORT+2,t.publicPort=i+100*t.typeId+e.BASE_PORT+3,t.wsport=i+100*t.typeId+e.BASE_PORT+4,t.stratumPort=i+100*t.typeId+e.BASE_PORT+5},e.MAX_TX_VERSION=2,e.MAX_TX_SIZE=i.MAX_BLOCK_SIZE/10,e.MAX_TX_WEIGHT=i.MAX_BLOCK_WEIGHT/10,e.MAX_TX_SIGOPS=i.MAX_BLOCK_SIGOPS/5,e.MAX_TX_SIGOPS_COST=i.MAX_BLOCK_SIGOPS_COST/5,e.BYTES_PER_SIGOP=20,e.MIN_RELAY=1e3,e.BARE_MULTISIG=!0,e.FREE_THRESHOLD=144*i.COIN/250,e.MAX_P2SH_SIGOPS=15,e.MAX_OP_RETURN=2048,e.MAX_OP_INFO=2048,e.MAX_OP_RETURN_BYTES=e.MAX_OP_RETURN+3,e.MAX_P2WSH_STACK=100,e.MAX_P2WSH_PUSH=80,e.MAX_P2WSH_SIZE=3600,e.MEMPOOL_MAX_ANCESTORS=2e4,e.MEMPOOL_MAX_SIZE=1e3,e.MEMPOOL_EXPIRY_TIME=259200,e.MEMPOOL_MAX_ORPHANS=5e4,e.MIN_BLOCK_WEIGHT=8192,e.MAX_BLOCK_WEIGHT=1e7*i.WITNESS_SCALE_FACTOR,e.BLOCK_PRIORITY_WEIGHT=0,e.BLOCK_PRIORITY_THRESHOLD=e.FREE_THRESHOLD,e.getMinFee=function(t,i){if(null==i&&(i=e.MIN_RELAY),r(0<=t),r(0<=i),0===t)return 0;let s=Math.floor(i*t/1e3);return 0===s&&0<i?i:s},e.getRoundFee=function(t,i){if(null==i&&(i=e.MIN_RELAY),r(0<=t),r(0<=i),0===t)return 0;let s=i*Math.ceil(t/1e3);return 0===s&&0<i?i:s},e.getRate=function(t,e){return r(0<=t),r(0<=e),0===t?0:Math.floor(1e3*e/t)}},function(t,e,i){"use strict";(function(e){
/*!
 * Packet.js - Base Packet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=e.alloc(0);i(2),i(20);const n=i(544);t.exports=class{constructor(t){n[t]?(this.type=t,this.cmd=n[t]):(this.type=-1,this.cmd="")}getSize(){return 0}toWriter(t){return t}toRaw(){return s}fromReader(t){return this}fromRaw(t){return this}async poolHandle(t,e){r(!1,"Pool Get Bad packet type: "+this.type)}async peerHandle(t){}}}).call(this,i(0).Buffer)},function(t,e,i){(function(e){Array.prototype.array_diff=function(...t){return this.reduce((e,i)=>{let r=!1;for(let e=0;e<t.length;e++)-1!=t[e].indexOf(i)&&(r=!0);return r||e.push(i),e},[])},t.exports=class t{constructor(t){this.$dirty=!0,this.items=null,this.data=new Map,this.account=new Map,t&&this.load(t)}merge(t){for(var e of(this.$dirty=!0,this.items=null,t.data.keys()))this.data.set(e,t.data.get(e));for(var i of t.account.keys())this.account.set(i,t.account.get(i));return this}query(e,i,r){e=e||[];let s,n,o=10,a=1;var h=[];for(let t=0;t<e.length;t++){var c=e[t];c&&Array.isArray(c)?"size"==c[0]?(o=c[1],delete e[t]):"page"==c[0]?(a=c[1],delete e[t]):"@total"==c[0]||"@sum"==c[0]?(h.push(["sum",c[1]]),o=4294967295,delete e[t]):"@max"==c[0]?(h.push(["max",c[1]]),o=4294967295,delete e[t]):"@min"==c[0]?(h.push(["min",c[1]]),o=4294967295,delete e[t]):"@average"==c[0]?(h.push(["average",c[1]]),o=4294967295,delete e[t]):"wid"==c[0]?(s=c[1],delete e[t]):"account"==c[0]&&(n=c[1],delete e[t],s=s||1):delete e[t]}let u=this;if(s&&void 0!==n&&null!=n){var l=this.account.get(s+"."+n);if(!l)return{list:[],count:0,page:0,cur:0};u=new t(l.entries())}let f=u.where(e);return(f=Array.isArray(i)&&2<i.length?f.orderby(i[0],i[1]):f).paginate(o,a,h).result(r)}get dirty(){return this.$dirty}set dirty(t){this.$dirty=t}orderby(t,e){switch(this.items||(this.items=this.ToArray()),e){case"desc":this.items=this.items.sort((e,i)=>i[t]-e[t]);break;case"asc":this.items=this.items.sort((e,i)=>e[t]-i[t])}return this}paginate(t,e,i){return this.items||(this.items=this.ToArray()),e=e||1,this.pageSize=t||10,0<this.pageSize?this.items.length%this.pageSize==0?this.pageNum=this.items.length/this.pageSize|0:this.pageNum=1+(this.items.length/this.pageSize|0):(this.pageNum=1,this.pageSize=this.items.length),this.count=this.items.length,this.pageCur=e,this.statistic=i,this}result(t){let e={list:this.records(t||null),count:this.count,page:this.pageNum,cur:this.pageCur,countCur:this.countCur};return Array.isArray(this.statistic)&&this.statistic.map(t=>{e[t[1]]=this[t[1]]}),e}records(t){if(this.items||(this.items=this.ToArray()),0==this.items.length)return[];this.pageSize||(this.pageSize=this.items.length,this.pageNum=1,this.pageCur=1);var e=[];let i=this;if(!(this.pageCur>this.pageNum)){this.countCur=0;for(let r=this.pageSize*(this.pageCur-1);r<this.pageSize*this.pageCur&&this.items[r];r++){this.countCur++;let s=null;s=Array.isArray(t)?t.reduce((t,e)=>(t[e]=i.items[r][e],t),{}):this.items[r],Array.isArray(this.statistic)&&0<this.statistic.length?this.statistic.map(t=>{i[t[1]]=i[t[1]]||null;let e=null;var s;for(s of t[1].split("."))if(void 0===(e=(e||i.items[r])[s]))break;if(e)switch(t[0]){case"sum":i[t[1]]||(i[t[1]]=0),i[t[1]]+=e;break;case"max":(!i[t[1]]||i[t[1]]<e)&&(i[t[1]]=e);break;case"min":(!i[t[1]]||i[t[1]]>e)&&(i[t[1]]=e)}}):e.push(s)}}return e}async predict(e){var i,r,s=[];for([i,r]of[...this.data])await e(i,r)&&s.push([i,r]);return new t(s)}where(e){let i=[...this.data];for(var r of e)if(r&&Array.isArray(r)&&!(r.length<2)){let t={k:r[0],sign:2==r.length?"==":r[1],v:2==r.length?r[1]:r[2]};t.k&&void 0!==t.v&&(i=i.filter(([,e])=>{let i=null;var r;for(r of t.k.split("."))if(void 0===(i=(i||e)[r]))return!1;switch(t.sign){case"==":return i==t.v;case">":return i>t.v;case"<":return i<t.v;case"!=":return i!=t.v;case">=":return i>=t.v;case"<=":return i<=t.v;case"like":return"string"==typeof t.v&&"string"==typeof i&&(-1!=i.indexOf(t.v)||-1!=t.v.indexOf(i));case"notlike":return"string"!=typeof t.v||"string"!=typeof i||-1==i.indexOf(t.v)&&-1==t.v.indexOf(i);case"include":return!("string"!=typeof t.v&&!Array.isArray(t.v)||!i||-1==t.v.indexOf(i));case"exclude":return"string"!=typeof t.v&&!Array.isArray(t.v)||!i||-1==t.v.indexOf(i);default:return!1}}))}return new t(i)}excludeCids(t){return t=t||[],Array.isArray(t)?(t=Array.from(new Set(t))).reduce((t,e)=>(this.has(e)||t.push(e),t),[]):[]}diff(...t){return[...this.data.keys()].array_diff(...t.map(t=>[...t.data.keys()]))}has(t){return"object"==typeof t&&e.isBuffer(t)&&(t=t.toString("hex")),this.data.has(t)}set(t,i){var r;i&&("object"==typeof t&&e.isBuffer(t)&&(t=t.toString("hex")),i.wid&&void 0!==i.account&&null!=i.account&&(r=i.wid+"."+i.account,this.account.get(r)||this.account.set(r,new Map),this.account.get(r).set(t,i)),this.data.set(t,i),this.items=null)}get(t,i){return"object"==typeof t&&e.isBuffer(t)&&(t=t.toString("hex")),i&&(t+=i),this.data.get(t)}getAccount(t,e){return(t=this.account.get(t+"."+e))?[...t.values()]:[]}remove(t){return this.delete(t)}delete(t){"object"==typeof t&&e.isBuffer(t)&&(t=t.toString("hex")),(i=this.get(t))&&i.wid&&void 0!==i.account&&null!=i.account&&(i=this.account.get(i.wid+"."+i.account))&&i.delete(t);var i=this.data.delete(t);return this.items=null,i}deletes(t){var e;for(e of this.where(t).getKeys())this.data.delete(e);this.items=null}load(t,e=!0){for(var i of(e&&(this.data.clear(),this.items=null),t))this.set(i[0],i[1])}clear(){this.data.clear(),this.items=null}forEach(t,e){this.data.forEach(t,e||this)}ToArray(){return[...this.data.values()]}getKeys(){return[...this.data.keys()]}getSize(){return this.data.size}}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * lock.js - lock and queue for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */const r=i(1);function s(t,e,i){this.resolve=t,this.reject=e,this.name=i||null}function n(){}t.exports=class{constructor(t){this.noted=!0===t,this.destroyed=!1,this.map=new Map,this.jobs=[],this.busy=!1,this.current=null,this.unlocker=this.unlock.bind(this)}has(t){return r(this.noted,"Must use named jobs."),this.current===t||null!=(t=this.map.get(t))&&0<t}hasPending(t){return r(this.noted,"Must use named jobs."),null!=(t=this.map.get(t))&&0<t}lock(t,e){let i,r;if(r=this.noted?(i=t||null,e):(i=null,t),this.destroyed)return Promise.reject(new Error("Lock is destroyed."));if(r)return Promise.resolve(n);if(this.busy){if(i){let t=this.map.get(i);t=t||0,this.map.set(i,t+1)}return new Promise((t,e)=>{this.jobs.push(new s(t,e,i))})}return this.busy=!0,this.current=i,Promise.resolve(this.unlocker)}unlock(){var t,e;!this.destroyed&&this.busy&&(this.busy=!1,this.current=null,0!==this.jobs.length)&&((t=this.jobs.shift()).name&&(e=this.map.get(t.name),r(0<e),0==--e?this.map.delete(t.name):this.map.set(t.name,e)),this.busy=!0,this.current=t.name,t.resolve(this.unlocker))}destroy(){if(!this.destroyed){this.destroyed=!0,this.busy=!1,this.current=null;var t=this.jobs;this.jobs=[],this.map.clear();for(const e of t)e.reject(new Error("Lock was destroyed."))}}}},function(t,e,i){"use strict";
/*!
 * errors.js - error objects for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1);class s extends Error{constructor(t,e,i,n,o){super(),r("string"==typeof e),r("string"==typeof i),r(0<=n),this.type="VerifyError",this.message="",this.code=e,this.reason=i,this.score=n,this.hash=t.hash("hex"),this.malleated=o||!1,this.message="Verification failure: "+i+` (code=${e} score=${n} hash=${t.rhash()})`,Error.captureStackTrace&&Error.captureStackTrace(this,s)}}e.VerifyError=s},function(t,e,i){"use strict";
/*!
 * amount.js - amount object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */const r=i(1),s=i(3);function n(t,e){if(!(this instanceof n))return new n(t,e);this.value=0,null!=t&&this.fromOptions(t,e)}n.prototype.fromOptions=function(t,e){return"string"==typeof e?this.from(e,t):"number"==typeof t?this.fromValue(t):this.fromBTC(t)},n.prototype.toValue=function(){return this.value},n.prototype.toSatoshis=function(t){return t?this.value:this.value.toString(10)},n.prototype.toBits=function(t){return n.encode(this.value,2,t)},n.prototype.toMBTC=function(t){return n.encode(this.value,5,t)},n.prototype.toBTC=function(t){return n.encode(this.value,8,t)},n.prototype.to=function(t,e){switch(t){case"sat":return this.toSatoshis(e);case"ubtc":case"bits":return this.toBits(e);case"mbtc":return this.toMBTC(e);case"btc":return this.toBTC(e)}throw new Error(`Unknown unit "${t}".`)},n.prototype.toString=function(){return this.toBTC()},n.prototype.fromValue=function(t){return r(s.isI64(t),"Value must be an int64."),this.value=t,this},n.prototype.fromSatoshis=function(t){return this.value=n.decode(t,0),this},n.prototype.fromBits=function(t){return this.value=n.decode(t,2),this},n.prototype.fromMBTC=function(t){return this.value=n.decode(t,5),this},n.prototype.fromBTC=function(t){return this.value=n.decode(t,8),this},n.prototype.from=function(t,e){switch(t){case"sat":return this.fromSatoshis(e);case"ubtc":case"bits":return this.fromBits(e);case"mbtc":return this.fromMBTC(e);case"btc":return this.fromBTC(e)}throw new Error(`Unknown unit "${t}".`)},n.fromOptions=function(t,e){return(new n).fromOptions(t,e)},n.fromValue=function(t){return(new n).fromValue(t)},n.fromSatoshis=function(t){return(new n).fromSatoshis(t)},n.fromBits=function(t){return(new n).fromBits(t)},n.fromMBTC=function(t){return(new n).fromMBTC(t)},n.fromBTC=function(t){return(new n).fromBTC(t)},n.from=function(t,e){return(new n).from(t,e)},n.prototype.inspect=function(){return`<Amount: ${this.toString()}>`},n.btc=function(t,e){return"string"==typeof t?t:n.encode(t,8,e)},n.value=function(t){return"number"==typeof t?t:n.decode(t,8)},n.encode=function(t,e,i){return i?s.toFloat(t,e):s.toFixed(t,e)},n.decode=function(t,e){return"number"==typeof t?s.fromFloat(t,e):s.fromFixed(t,e)},t.exports=n},function(t,e,i){"use strict";(function(e){
/*!
 * keyring.js - keyring object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=i(4),n=i(8),o=i(18),a=i(2),h=i(6),c=i(56),u=i(16),l=i(13),f=i(25),d=i(23),p=i(3);function g(t){return t&&(t.privateKey||t.publicKey||t)}t.exports=class t{constructor(t,e){this.network=o.primary,this.witness=!1,this.nested=!1,this.publicKey=s.ZERO_KEY,this.privateKey=null,this.script=null,this._keyHash=null,this._keyAddress=null,this._program=null,this._nestedHash=null,this._nestedAddress=null,this._scriptHash160=null,this._scriptHash256=null,this._scriptAddress=null,t&&this.fromOptions(t,e)}fromOptions(t,i){i=i||t.network;let s=g(t);if(null!=t.witness&&(r("boolean"==typeof t.witness),this.witness=t.witness),null!=t.nested&&(r("boolean"==typeof t.nested),this.nested=t.nested),e.isBuffer(s))return this.fromKey(s,i);s=g(t.key),t.publicKey&&(s=g(t.publicKey)),t.privateKey&&(s=g(t.privateKey));var n=t.script;t=t.compressed;return n?this.fromScript(s,n,t,i):this.fromKey(s,t,i)}static fromOptions(e){return(new t).fromOptions(e)}refresh(){this._keyHash=null,this._keyAddress=null,this._program=null,this._nestedHash=null,this._nestedAddress=null,this._scriptHash160=null,this._scriptHash256=null,this._scriptAddress=null}fromPrivate(t,i,s){return r(e.isBuffer(t),"Private key must be a buffer."),r(d.privateKeyVerify(t),"Not a valid private key."),"boolean"!=typeof i&&(s=i,i=null),this.network=o.get(s),this.privateKey=t,this.publicKey=d.publicKeyCreate(t,!1!==i),this}static fromPrivate(e,i,r){return(new t).fromPrivate(e,i,r)}fromPublic(t,i){return r(e.isBuffer(t),"Public key must be a buffer."),r(d.publicKeyVerify(t),"Not a valid public key."),this.network=o.get(i),this.publicKey=t,this}generate(t,e){"boolean"!=typeof t&&(e=t,t=null);var i=d.generatePrivateKey();return this.fromKey(i,t,e)}static generate(e,i){return(new t).generate(e,i)}static fromPublic(e,i){return(new t).fromPublic(e,i)}fromKey(t,i,s){return r(e.isBuffer(t),"Key must be a buffer."),"boolean"!=typeof i&&(s=i,i=null),32===t.length?this.fromPrivate(t,!1!==i,s):this.fromPublic(t,s)}static fromKey(e,i,r){return(new t).fromKey(e,i,r)}fromScript(t,e,i,s){return r(e instanceof u,"Non-script passed into KeyRing."),"boolean"!=typeof i&&(s=i,i=null),this.fromKey(t,i,s),this.script=e,this}static fromScript(e,i,r,s){return(new t).fromScript(e,i,r,s)}getSecretSize(){let t=0;return t=(t+=1)+this.privateKey.length,33===this.publicKey.length&&(t+=1),t+4}toSecret(t){var e=this.getSecretSize();e=new h(e);return r(this.privateKey,"Cannot serialize without private key."),t=t||this.network,t=o.get(t),e.writeU8(t.keyPrefix.privkey),e.writeBytes(this.privateKey),33===this.publicKey.length&&e.writeU8(1),e.writeChecksum(),c.encode(e.render())}fromSecret(t,e){var i=(t=new a(c.decode(t),!0)).readU8();e=o.fromWIF(i,e),i=t.readBytes(32);let s=!1;return 4<t.left()&&(r(1===t.readU8(),"Bad compression flag."),s=!0),t.verifyChecksum(),this.fromPrivate(i,s,e)}static fromSecret(e,i){return(new t).fromSecret(e,i)}getPrivateKey(t){return this.privateKey?"base58"===t?this.toSecret():"hex"===t?this.privateKey.toString("hex"):this.privateKey:null}getPublicKey(t){return"base58"===t?c.encode(this.publicKey):"hex"===t?this.publicKey.toString("hex"):this.publicKey}getScript(){return this.script}getProgram(){if(!this.witness)return null;if(!this._program){let t;t=this.script?this.script.sha256():n.hash160(this.publicKey),this._program=u.createScript([0,t],u.types.WITNESS)}return this._program}getNestedHash(t){return this.witness?(this._nestedHash||(this._nestedHash=this.getProgram().hash160()),"hex"===t?this._nestedHash.toString("hex"):this._nestedHash):null}getNestedAddress(t){var e;return this.witness?(this._nestedAddress||(e=this.getNestedHash(),e=l.fromScripthash(e,this.network),this._nestedAddress=e),"base58"===t?this._nestedAddress.toBase58():"string"===t?this._nestedAddress.toString():this._nestedAddress):null}getScriptHash(t){return this.witness?this.getScriptHash256(t):this.getScriptHash160(t)}getScriptHash160(t){return this.script?(this._scriptHash160||(this._scriptHash160=this.script.hash160()),"hex"===t?this._scriptHash160.toString("hex"):this._scriptHash160):null}getScriptHash256(t){return this.script?(this._scriptHash256||(this._scriptHash256=this.script.sha256()),"hex"===t?this._scriptHash256.toString("hex"):this._scriptHash256):null}getScriptAddress(t){if(!this.script)return null;if(!this._scriptAddress){let t;var e;t=this.witness?(e=this.getScriptHash256(),l.fromWitnessScripthash(e,this.network)):(e=this.getScriptHash160(),l.fromScripthash(e,this.network)),this._scriptAddress=t}return"base58"===t?this._scriptAddress.toBase58():"string"===t?this._scriptAddress.toString():this._scriptAddress}getKeyHash(t){return this._keyHash||(this._keyHash=n.hash160(this.publicKey)),"hex"===t?this._keyHash.toString("hex"):this._keyHash}getKeyAddress(t){if(!this._keyAddress){var e=this.getKeyHash();let t;t=this.witness?l.fromWitnessPubkeyhash(e,this.network):l.fromPubkeyhash(e,this.network),this._keyAddress=t}return"base58"===t?this._keyAddress.toBase58():"string"===t?this._keyAddress.toString():this._keyAddress}getHash(t){return this.nested?this.getNestedHash(t):this.script?this.getScriptHash(t):this.getKeyHash(t)}getAddress(t){return this.nested?this.getNestedAddress(t):this.script?this.getScriptAddress(t):this.getKeyAddress(t)}ownHash(t){if(!t)return!1;let e=!1;if(Array.isArray(t)){for(var i of t)e=e||this.ownHash(i);return e}return!!t.equals(this.getKeyHash())||!(!this.script||!t.equals(this.getScriptHash()))||!(!this.witness||!t.equals(this.getNestedHash()))}ownOutput(t,e){let i;return t instanceof f?i=t:(i=t.outputs[e],r(i,"Output does not exist.")),this.ownHash(i.getHashs())}getRedeem(t){if(this.witness&&t.equals(this.getNestedHash()))return this.getProgram();if(this.script){if(t.equals(this.getScriptHash160()))return this.script;if(t.equals(this.getScriptHash256()))return this.script}return null}sign(t){return r(this.privateKey,"Cannot sign without private key."),d.sign(t,this.privateKey)}verify(t,e){return d.verify(t,e,this.publicKey)}signData(t,i="bookman"){return(t=t||{}).cid||(t.cid=i),t.time&&(t.time=p.now()/300|0),t.addr=this.getAddress("string"),t.pubkey=this.publicKey.toString("hex"),i={data:t},t=n.hash256(e.from(p.stringify(i.data))),i.sig=this.sign(t).toString("hex"),i}getVersion(){return!this.witness||this.nested?-1:0}getType(){return this.nested?l.types.SCRIPTHASH:this.witness?l.types.WITNESS:this.script?l.types.SCRIPTHASH:l.types.PUBKEYHASH}inspect(){return this.toJSON()}toJSON(){return{network:this.network.type,witness:this.witness,nested:this.nested,publicKey:this.publicKey.toString("hex"),script:this.script?this.script.toRaw().toString("hex"):null,program:this.witness?this.getProgram().toRaw().toString("hex"):null,type:l.typesByVal[this.getType()].toLowerCase(),address:this.getAddress("string")}}fromJSON(t){return r(t),r("string"==typeof t.network),r("boolean"==typeof t.witness),r("boolean"==typeof t.nested),r("string"==typeof t.publicKey),r(!t.script||"string"==typeof t.script),this.nework=o.get(t.network),this.witness=t.witness,this.nested=t.nested,this.publicKey=e.from(t.publicKey,"hex"),t.script&&(this.script=e.from(t.script,"hex")),this}static fromJSON(e){return(new t).fromJSON(e)}getSize(){let t=0;return t+=1,this.privateKey?t=t+s.sizeVarBytes(this.privateKey)+1:t+=s.sizeVarBytes(this.publicKey),t+(this.script?this.script.getVarSize():1)}toWriter(t){let e=0;return this.witness&&(e|=1),this.nested&&(e|=2),t.writeU8(e),this.privateKey?(t.writeVarBytes(this.privateKey),t.writeU8(33===this.publicKey.length)):t.writeVarBytes(this.publicKey),this.script?t.writeVarBytes(this.script.toRaw()):t.writeVarint(0),t}toRaw(){var t=this.getSize();return this.toWriter(new h(t)).render()}fromReader(t,e){this.network=o.get(e),e=t.readU8(),this.witness=0!=(1&e),this.nested=0!=(2&e),32===(e=t.readVarBytes()).length?(i=1===t.readU8(),this.privateKey=e,this.publicKey=d.publicKeyCreate(e,i)):(this.publicKey=e,r(d.publicKeyVerify(e),"Invalid public key."));var i=t.readVarBytes();return 0<i.length&&(this.script=u.fromRaw(i)),this}fromRaw(t,e){return this.fromReader(new a(t),e)}static fromReader(e){return(new t).fromReader(e)}static fromRaw(e){return(new t).fromRaw(e)}static isKeyRing(e){return e instanceof t}}}).call(this,i(0).Buffer)},function(t,e){(t.exports=function(t,e){if(!t)throw new Error(e||"Assertion failed")}).equal=function(t,e,i){if(t!=e)throw new Error(i||"Assertion failed: "+t+" != "+e)}},function(t,e,i){"use strict";var r=e,s=i(45);e=i(33),i=i(228);r.assert=e,r.toArray=i.toArray,r.zero2=i.zero2,r.toHex=i.toHex,r.encode=i.encode,r.getNAF=function(t,e,i){for(var r=new Array(Math.max(t.bitLength(),i)+1),s=(r.fill(0),1<<e+1),n=t.clone(),o=0;o<r.length;o++){var a,h=n.andln(s-1);n.isOdd()?n.isubn(a=(s>>1)-1<h?(s>>1)-h:h):a=0,r[o]=a,n.iushrn(1)}return r},r.getJSF=function(t,e){for(var i,r=[[],[]],s=(t=t.clone(),e=e.clone(),0),n=0;0<t.cmpn(-s)||0<e.cmpn(-n);){var o,a=t.andln(3)+s&3,h=e.andln(3)+n&3;3===h&&(h=-1),o=0==(1&(a=3===a?-1:a))?0:3!=(i=t.andln(7)+s&7)&&5!==i||2!==h?a:-a,r[0].push(o),a=0==(1&h)?0:3!=(i=e.andln(7)+n&7)&&5!==i||2!==a?h:-h,r[1].push(a),2*s===o+1&&(s=1-s),2*n===a+1&&(n=1-n),t.iushrn(1),e.iushrn(1)}return r},r.cachedProperty=function(t,e,i){var r="_"+e;t.prototype[e]=function(){return void 0!==this[r]?this[r]:this[r]=i.call(this)}},r.parseBytes=function(t){return"string"==typeof t?r.toArray(t,"hex"):t},r.intFromLE=function(t){return new s(t,"hex","le")}},function(t,e){t.exports=class{constructor(t,e){this.prefix=t||"",this.events=e||[],this._subscriptions={}}subscribe(t,e){this._subscriptions[t]||(this._subscriptions[t]=[]),this._subscriptions[t].push(e)}unsubscribe(t,e){this._subscriptions[t]&&-1<(e=this._subscriptions[t].indexOf(e))&&this._subscriptions[t].splice(e,1)}broadcast(t,e){if(this._subscriptions[t])for(var i=0;i<this._subscriptions[t].length;i++)this._subscriptions[t][i].emit(this.prefix+"/"+t,e)}getPublishEvents(){return this.events.reduce((t,e)=>(t.push({name:this.prefix+"/"+e,scope:this,subscribe:this.subscribe.bind(this,e),unsubscribe:this.unsubscribe.bind(this,e)}),t),[])}}},function(t,e,i){"use strict";(function(r){
/*!
 * co.js - promise and generator control flow for vallnet
 * Originally based on yoursnetwork's "asink" module.
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const s=i(1);function n(t){return new Promise((e,i)=>{const r=(o,a)=>{let h;try{h=a?t.throw(o):t.next(o)}catch(o){return void i(o)}h.done?e(h.value):(a=h.value)&&"function"==typeof a.then?h.value.then(s,n):r(h.value,!1)},s=t=>{r(t,!1)},n=t=>{r(t,!0)};r(void 0,!1)})}function o(t){return function(){return n(t.apply(this,arguments))}}function a(t,e){return function(i,r){i?e(i):t(r)}}function h(t,e){this.resolve=t,this.reject=e}(e=o).exec=n,e.spawn=function(t,e){return n(t.call(e))},e.co=o,e.wait=function(){return new Promise(t=>r(t))},e.timeout=function(t){return new Promise(e=>setTimeout(e,t))},e.wrap=a,e.promisify=function(t){return function(...e){return new Promise((i,r)=>{e.push(a(i,r)),t.call(this,...e)})}},e.callbackify=function(t){return function(...e){if(0===e.length||"function"!=typeof e[e.length-1])throw new Error((t.name||"Function")+" requires a callback.");const i=e.pop();t.call(this,...e).then(t=>{r(()=>i(null,t))},t=>{r(()=>i(t))})}},e.every=async function(t){for(const e of await Promise.all(t))if(!e)return!1;return!0},e.setInterval=function(t,e,i){const r={timer:null,stopped:!1,running:!1,resolve:null},n=async()=>{s(null!=r.timer),r.timer=null;try{r.running=!0,await t.call(i)}finally{r.running=!1,r.stopped?r.resolve&&r.resolve():r.timer=setTimeout(n,e)}};return r.timer=setTimeout(n,e),r},e.clearInterval=function(t){return s(t),null!=t.timer&&(clearTimeout(t.timer),t.timer=null),t.stopped=!0,t.running?new Promise(e=>{t.resolve=e}):Promise.resolve()},e.setTimeout=function(t,e,i){return{timer:setTimeout(t.bind(i),e),stopped:!1}},e.clearTimeout=function(t){s(t),null!=t.timer&&(clearTimeout(t.timer),t.timer=null),t.stopped=!0},e.job=function(t,e){return new h(t,e)},t.exports=e}).call(this,i(78).setImmediate)},function(t,e,i){
/*!
 * event.js - Intelligent RPC function for vallnet.
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
let r=[];[i(402),i(403),i(404),i(405),i(406),i(407),i(408),i(409),i(410),i(411),i(412),i(413)].map(t=>{e[t.prefix]=t,r=r.concat(t.getPublishEvents())}),e.eventList=r,e.broadcast=function(t,i){(t=t.split("/"))&&2<=t.length&&e[t[0]]&&e[t[0]].broadcast(t[1],i)}},function(t,e,i){"use strict";
/*!
 * bn.js - big numbers for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */t.exports=i(40)},function(t,e,i){"use strict";var r=i(33);i=i(5);function s(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function n(t){return 1===t.length?"0"+t:t}function o(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=i,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var i,r,s=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),o=0;o<t.length;o+=2)s.push(parseInt(t[o]+t[o+1],16))}else for(var n=0,o=0;o<t.length;o++){var a=t.charCodeAt(o);a<128?s[n++]=a:a<2048?(s[n++]=a>>6|192,s[n++]=63&a|128):(r=o,55296!=(64512&(i=t).charCodeAt(r))||r<0||r+1>=i.length||56320!=(64512&i.charCodeAt(r+1))?s[n++]=a>>12|224:(a=65536+((1023&a)<<10)+(1023&t.charCodeAt(++o)),s[n++]=a>>18|240,s[n++]=a>>12&63|128),s[n++]=a>>6&63|128,s[n++]=63&a|128)}else for(o=0;o<t.length;o++)s[o]=0|t[o];return s},e.toHex=function(t){for(var e="",i=0;i<t.length;i++)e+=n(t[i].toString(16));return e},e.htonl=s,e.toHex32=function(t,e){for(var i="",r=0;r<t.length;r++){var n=t[r];i+=o((n="little"===e?s(n):n).toString(16))}return i},e.zero2=n,e.zero8=o,e.join32=function(t,e,i,s){r((i-=e)%4==0);for(var n=new Array(i/4),o=0,a=e;o<n.length;o++,a+=4){var h="big"===s?t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a];n[o]=h>>>0}return n},e.split32=function(t,e){for(var i=new Array(4*t.length),r=0,s=0;r<t.length;r++,s+=4){var n=t[r];"big"===e?(i[s]=n>>>24,i[s+1]=n>>>16&255,i[s+2]=n>>>8&255,i[s+3]=255&n):(i[s+3]=n>>>24,i[s+2]=n>>>16&255,i[s+1]=n>>>8&255,i[s]=255&n)}return i},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,i){return t+e+i>>>0},e.sum32_4=function(t,e,i,r){return t+e+i+r>>>0},e.sum32_5=function(t,e,i,r,s){return t+e+i+r+s>>>0},e.sum64=function(t,e,i,r){var s=t[e],n=r+t[e+1]>>>0;t[e]=(n<r?1:0)+i+s>>>0,t[e+1]=n},e.sum64_hi=function(t,e,i,r){return(e+r>>>0<e?1:0)+t+i>>>0},e.sum64_lo=function(t,e,i,r){return e+r>>>0},e.sum64_4_hi=function(t,e,i,r,s,n,o,a){var h=0;return t+i+s+o+((h+=(t=e+r>>>0)<e?1:0)+((t=t+n>>>0)<n?1:0)+(t+a>>>0<a?1:0))>>>0},e.sum64_4_lo=function(t,e,i,r,s,n,o,a){return e+r+n+a>>>0},e.sum64_5_hi=function(t,e,i,r,s,n,o,a,h,c){return t+i+s+o+h+(0+((t=e+r>>>0)<e?1:0)+((t=t+n>>>0)<n?1:0)+((t=t+a>>>0)<a?1:0)+(t+c>>>0<c?1:0))>>>0},e.sum64_5_lo=function(t,e,i,r,s,n,o,a,h,c){return e+r+n+a+c>>>0},e.rotr64_hi=function(t,e,i){return(e<<32-i|t>>>i)>>>0},e.rotr64_lo=function(t,e,i){return(t<<32-i|e>>>i)>>>0},e.shr64_hi=function(t,e,i){return t>>>i},e.shr64_lo=function(t,e,i){return(t<<32-i|e>>>i)>>>0}},function(t,e,i){(function(t){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function s(t,e){function i(){}t.super_=e,i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function n(t,e,i){if(n.isBN(t))return t;this.negative=0,this.words=null,this.length=0,(this.red=null)!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var o;"object"==typeof t?t.exports=n:e.BN=n,(n.BN=n).wordSize=26;try{o=i(356).Buffer}catch(t){}function a(t,e,i){for(var r=0,s=Math.min(t.length,i),n=e;n<s;n++){var o=t.charCodeAt(n)-48;r=r<<4|(49<=o&&o<=54?o-49+10:17<=o&&o<=22?o-17+10:15&o)}return r}function h(t,e,i,r){for(var s=0,n=Math.min(t.length,i),o=e;o<n;o++){var a=t.charCodeAt(o)-48;s=s*r+(49<=a?a-49+10:17<=a?a-17+10:a)}return s}n.isBN=function(t){return t instanceof n||null!==t&&"object"==typeof t&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,e){return 0<t.cmp(e)?t:e},n.min=function(t,e){return t.cmp(e)<0?t:e},n.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);r((e="hex"===e?16:e)===(0|e)&&2<=e&&e<=36);var s=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&s++,16===e?this._parseHex(t,s):this._parseBase(t,e,s),"-"===t[0]&&(this.negative=1),this.strip(),"le"===i&&this._initArray(this.toArray(),e,i)},n.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},n.prototype._initArray=function(t,e,i){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var s,n,o=0;o<this.length;o++)this.words[o]=0;var a=0;if("be"===i)for(o=t.length-1,s=0;0<=o;o-=3)n=t[o]|t[o-1]<<8|t[o-2]<<16,this.words[s]|=n<<a&67108863,this.words[s+1]=n>>>26-a&67108863,26<=(a+=24)&&(a-=26,s++);else if("le"===i)for(s=o=0;o<t.length;o+=3)n=t[o]|t[o+1]<<8|t[o+2]<<16,this.words[s]|=n<<a&67108863,this.words[s+1]=n>>>26-a&67108863,26<=(a+=24)&&(a-=26,s++);return this.strip()},n.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var i,r=0;r<this.length;r++)this.words[r]=0;for(var s=0,n=(r=t.length-6,0);e<=r;r-=6)i=a(t,r,r+6),this.words[n]|=i<<s&67108863,this.words[n+1]|=i>>>26-s&4194303,26<=(s+=24)&&(s-=26,n++);r+6!==e&&(i=a(t,e,r+6),this.words[n]|=i<<s&67108863,this.words[n+1]|=i>>>26-s&4194303),this.strip()},n.prototype._parseBase=function(t,e,i){this.words=[0];for(var r=0,s=this.length=1;s<=67108863;s*=e)r++;s=s/e|0;for(var n=t.length-i,o=n%--r,a=Math.min(n,n-o)+i,c=0,u=i;u<a;u+=r)c=h(t,u,u+r,e),this.imuln(s),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!=o){var l=1;for(c=h(t,u,t.length,e),u=0;u<o;u++)l*=e;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},n.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0,s=(r=(i.length=r)-1|0,(o=(0|t.words[0])*(0|e.words[0]))/67108864|0);i.words[0]=67108863&o;for(var n=1;n<r;n++){for(var o,a=s>>>26,h=67108863&s,c=Math.min(n,e.length-1),u=Math.max(0,n-t.length+1);u<=c;u++)a+=(o=(0|t.words[n-u|0])*(0|e.words[u])+h)/67108864|0,h=67108863&o;i.words[n]=0|h,s=0|a}return 0!==s?i.words[n]=0|s:i.length--,i.strip()}n.prototype.toString=function(t,e){if(e=0|e||1,16===(t=t||10)||"hex"===t){h="";for(var i=0,s=0,n=0;n<this.length;n++){var o=this.words[n],a=(16777215&(o<<i|s)).toString(16),h=0!=(s=o>>>24-i&16777215)||n!==this.length-1?c[6-a.length]+a+h:a+h;26<=(i+=2)&&(i-=26,n--)}for(0!==s&&(h=s.toString(16)+h);h.length%e!=0;)h="0"+h;return 0!==this.negative?"-"+h:h}if(t===(0|t)&&2<=t&&t<=36){var f=u[t],d=l[t];for(h="",(p=this.clone()).negative=0;!p.isZero();){var p,g=p.modn(d).toString(t);h=(p=p.idivn(d)).isZero()?g+h:c[f-g.length]+g+h}for(this.isZero()&&(h="0"+h);h.length%e!=0;)h="0"+h;return 0!==this.negative?"-"+h:h}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:2<this.length&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(t,e){return r(void 0!==o),this.toArrayLike(o,t,e)},n.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},n.prototype.toArrayLike=function(t,e,i){var s,n,o=this.byteLength(),a=i||Math.max(1,o),h=(i=(r(o<=a,"byte array longer than desired length"),r(0<a,"Requested array length <= 0"),this.strip(),"le"===e),new t(a)),c=this.clone();if(i){for(n=0;!c.isZero();n++)s=c.andln(255),c.iushrn(8),h[n]=s;for(;n<a;n++)h[n]=0}else{for(n=0;n<a-o;n++)h[n]=0;for(n=0;!c.isZero();n++)s=c.andln(255),c.iushrn(8),h[a-n-1]=s}return h},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var e=0;return 4096<=t&&(e+=13,t>>>=13),64<=t&&(e+=7,t>>>=7),8<=t&&(e+=4,t>>>=4),2<=t&&(e+=2,t>>>=2),e+t},n.prototype._zeroBits=function(t){var e;return 0===t?26:((e=0)==(8191&(t=t))&&(e+=13,t>>>=13),0==(127&t)&&(e+=7,t>>>=7),0==(15&t)&&(e+=4,t>>>=4),0==(3&t)&&(e+=2,t>>>=2),0==(1&t)&&e++,e)},n.prototype.bitLength=function(){var t=this.words[this.length-1];t=this._countBits(t);return 26*(this.length-1)+t},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},n.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){for(var e=this.length>t.length?t:this,i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},n.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){for(var e,i=this.length>t.length?(e=this,t):(e=t,this),r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},n.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){r("number"==typeof t&&0<=t);var e=0|Math.ceil(t/26);t%=26;this._expand(e),0<t&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return 0<t&&(this.words[i]=~this.words[i]&67108863>>26-t),this.strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,e){r("number"==typeof t&&0<=t);var i=t/26|0;t%=26;return this._expand(1+i),this.words[i]=e?this.words[i]|1<<t:this.words[i]&~(1<<t),this.strip()},n.prototype.iadd=function(t){var e,i;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();for(var r=this.length>t.length?(i=this,t):(i=t,this),s=0,n=0;n<r.length;n++)e=(0|i.words[n])+(0|r.words[n])+s,this.words[n]=67108863&e,s=e>>>26;for(;0!==s&&n<i.length;n++)e=(0|i.words[n])+s,this.words[n]=67108863&e,s=e>>>26;if(this.length=i.length,0!==s)this.words[this.length]=s,this.length++;else if(i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this},n.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){var e;if(0!==t.negative)return t.negative=0,e=this.iadd(t),t.negative=1,e._normSign();if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;for(var s=0<r?(i=this,t):(i=t,this),n=0,o=0;o<s.length;o++)n=(e=(0|i.words[o])-(0|s.words[o])+n)>>26,this.words[o]=67108863&e;for(;0!==n&&o<i.length;o++)n=(e=(0|i.words[o])+n)>>26,this.words[o]=67108863&e;if(0===n&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,i){var r,s=t.words,n=e.words,o=i.words,a=8191&(h=0|s[0]),h=h>>>13,c=8191&(u=0|s[1]),u=u>>>13,l=8191&(f=0|s[2]),f=f>>>13,d=8191&(p=0|s[3]),p=p>>>13,g=8191&(m=0|s[4]),m=m>>>13,w=8191&(y=0|s[5]),y=y>>>13,b=8191&(v=0|s[6]),v=v>>>13,k=8191&(S=0|s[7]),S=S>>>13,_=8191&(x=0|s[8]),x=x>>>13,R=8191&(s=0|s[9]),E=(s=s>>>13,8191&(A=0|n[0])),A=A>>>13,M=8191&(O=0|n[1]),O=O>>>13,I=8191&(C=0|n[2]),C=C>>>13,T=8191&(P=0|n[3]),P=P>>>13,B=8191&(N=0|n[4]),N=N>>>13,L=8191&(H=0|n[5]),H=H>>>13,U=8191&(D=0|n[6]),D=D>>>13,z=8191&(V=0|n[7]),V=V>>>13,F=8191&(j=0|n[8]),j=j>>>13,K=8191&(n=0|n[9]),q=(n=n>>>13,e=(i.negative=t.negative^e.negative,i.length=19,(0+Math.imul(a,E)|0)+((8191&(t=Math.imul(a,A)+Math.imul(h,E)|0))<<13)|0),(Math.imul(h,A)+(t>>>13)|0)+(e>>>26)|0);e&=67108863,r=Math.imul(c,E),t=Math.imul(c,A)+Math.imul(u,E)|0,W=Math.imul(u,A);var W,X=(q+(r+Math.imul(a,M)|0)|0)+((8191&(t=(t+Math.imul(a,O)|0)+Math.imul(h,M)|0))<<13)|0,Y=(q=((W+Math.imul(h,O)|0)+(t>>>13)|0)+(X>>>26)|0,X&=67108863,r=Math.imul(l,E),t=Math.imul(l,A)+Math.imul(f,E)|0,W=Math.imul(f,A),r=r+Math.imul(c,M)|0,t=(t+Math.imul(c,O)|0)+Math.imul(u,M)|0,W=W+Math.imul(u,O)|0,(q+(r+Math.imul(a,I)|0)|0)+((8191&(t=(t+Math.imul(a,C)|0)+Math.imul(h,I)|0))<<13)|0),G=(q=((W+Math.imul(h,C)|0)+(t>>>13)|0)+(Y>>>26)|0,Y&=67108863,r=Math.imul(d,E),t=Math.imul(d,A)+Math.imul(p,E)|0,W=Math.imul(p,A),r=r+Math.imul(l,M)|0,t=(t+Math.imul(l,O)|0)+Math.imul(f,M)|0,W=W+Math.imul(f,O)|0,r=r+Math.imul(c,I)|0,t=(t+Math.imul(c,C)|0)+Math.imul(u,I)|0,W=W+Math.imul(u,C)|0,(q+(r+Math.imul(a,T)|0)|0)+((8191&(t=(t+Math.imul(a,P)|0)+Math.imul(h,T)|0))<<13)|0),$=(q=((W+Math.imul(h,P)|0)+(t>>>13)|0)+(G>>>26)|0,G&=67108863,r=Math.imul(g,E),t=Math.imul(g,A)+Math.imul(m,E)|0,W=Math.imul(m,A),r=r+Math.imul(d,M)|0,t=(t+Math.imul(d,O)|0)+Math.imul(p,M)|0,W=W+Math.imul(p,O)|0,r=r+Math.imul(l,I)|0,t=(t+Math.imul(l,C)|0)+Math.imul(f,I)|0,W=W+Math.imul(f,C)|0,r=r+Math.imul(c,T)|0,t=(t+Math.imul(c,P)|0)+Math.imul(u,T)|0,W=W+Math.imul(u,P)|0,(q+(r+Math.imul(a,B)|0)|0)+((8191&(t=(t+Math.imul(a,N)|0)+Math.imul(h,B)|0))<<13)|0),J=(q=((W+Math.imul(h,N)|0)+(t>>>13)|0)+($>>>26)|0,$&=67108863,r=Math.imul(w,E),t=Math.imul(w,A)+Math.imul(y,E)|0,W=Math.imul(y,A),r=r+Math.imul(g,M)|0,t=(t+Math.imul(g,O)|0)+Math.imul(m,M)|0,W=W+Math.imul(m,O)|0,r=r+Math.imul(d,I)|0,t=(t+Math.imul(d,C)|0)+Math.imul(p,I)|0,W=W+Math.imul(p,C)|0,r=r+Math.imul(l,T)|0,t=(t+Math.imul(l,P)|0)+Math.imul(f,T)|0,W=W+Math.imul(f,P)|0,r=r+Math.imul(c,B)|0,t=(t+Math.imul(c,N)|0)+Math.imul(u,B)|0,W=W+Math.imul(u,N)|0,(q+(r+Math.imul(a,L)|0)|0)+((8191&(t=(t+Math.imul(a,H)|0)+Math.imul(h,L)|0))<<13)|0),Z=(q=((W+Math.imul(h,H)|0)+(t>>>13)|0)+(J>>>26)|0,J&=67108863,r=Math.imul(b,E),t=Math.imul(b,A)+Math.imul(v,E)|0,W=Math.imul(v,A),r=r+Math.imul(w,M)|0,t=(t+Math.imul(w,O)|0)+Math.imul(y,M)|0,W=W+Math.imul(y,O)|0,r=r+Math.imul(g,I)|0,t=(t+Math.imul(g,C)|0)+Math.imul(m,I)|0,W=W+Math.imul(m,C)|0,r=r+Math.imul(d,T)|0,t=(t+Math.imul(d,P)|0)+Math.imul(p,T)|0,W=W+Math.imul(p,P)|0,r=r+Math.imul(l,B)|0,t=(t+Math.imul(l,N)|0)+Math.imul(f,B)|0,W=W+Math.imul(f,N)|0,r=r+Math.imul(c,L)|0,t=(t+Math.imul(c,H)|0)+Math.imul(u,L)|0,W=W+Math.imul(u,H)|0,(q+(r+Math.imul(a,U)|0)|0)+((8191&(t=(t+Math.imul(a,D)|0)+Math.imul(h,U)|0))<<13)|0),Q=(q=((W+Math.imul(h,D)|0)+(t>>>13)|0)+(Z>>>26)|0,Z&=67108863,r=Math.imul(k,E),t=Math.imul(k,A)+Math.imul(S,E)|0,W=Math.imul(S,A),r=r+Math.imul(b,M)|0,t=(t+Math.imul(b,O)|0)+Math.imul(v,M)|0,W=W+Math.imul(v,O)|0,r=r+Math.imul(w,I)|0,t=(t+Math.imul(w,C)|0)+Math.imul(y,I)|0,W=W+Math.imul(y,C)|0,r=r+Math.imul(g,T)|0,t=(t+Math.imul(g,P)|0)+Math.imul(m,T)|0,W=W+Math.imul(m,P)|0,r=r+Math.imul(d,B)|0,t=(t+Math.imul(d,N)|0)+Math.imul(p,B)|0,W=W+Math.imul(p,N)|0,r=r+Math.imul(l,L)|0,t=(t+Math.imul(l,H)|0)+Math.imul(f,L)|0,W=W+Math.imul(f,H)|0,r=r+Math.imul(c,U)|0,t=(t+Math.imul(c,D)|0)+Math.imul(u,U)|0,W=W+Math.imul(u,D)|0,(q+(r+Math.imul(a,z)|0)|0)+((8191&(t=(t+Math.imul(a,V)|0)+Math.imul(h,z)|0))<<13)|0),tt=(q=((W+Math.imul(h,V)|0)+(t>>>13)|0)+(Q>>>26)|0,Q&=67108863,r=Math.imul(_,E),t=Math.imul(_,A)+Math.imul(x,E)|0,W=Math.imul(x,A),r=r+Math.imul(k,M)|0,t=(t+Math.imul(k,O)|0)+Math.imul(S,M)|0,W=W+Math.imul(S,O)|0,r=r+Math.imul(b,I)|0,t=(t+Math.imul(b,C)|0)+Math.imul(v,I)|0,W=W+Math.imul(v,C)|0,r=r+Math.imul(w,T)|0,t=(t+Math.imul(w,P)|0)+Math.imul(y,T)|0,W=W+Math.imul(y,P)|0,r=r+Math.imul(g,B)|0,t=(t+Math.imul(g,N)|0)+Math.imul(m,B)|0,W=W+Math.imul(m,N)|0,r=r+Math.imul(d,L)|0,t=(t+Math.imul(d,H)|0)+Math.imul(p,L)|0,W=W+Math.imul(p,H)|0,r=r+Math.imul(l,U)|0,t=(t+Math.imul(l,D)|0)+Math.imul(f,U)|0,W=W+Math.imul(f,D)|0,r=r+Math.imul(c,z)|0,t=(t+Math.imul(c,V)|0)+Math.imul(u,z)|0,W=W+Math.imul(u,V)|0,(q+(r+Math.imul(a,F)|0)|0)+((8191&(t=(t+Math.imul(a,j)|0)+Math.imul(h,F)|0))<<13)|0);q=((W+Math.imul(h,j)|0)+(t>>>13)|0)+(tt>>>26)|0,tt&=67108863,r=Math.imul(R,E),t=Math.imul(R,A)+Math.imul(s,E)|0,W=Math.imul(s,A),r=r+Math.imul(_,M)|0,t=(t+Math.imul(_,O)|0)+Math.imul(x,M)|0,W=W+Math.imul(x,O)|0,r=r+Math.imul(k,I)|0,t=(t+Math.imul(k,C)|0)+Math.imul(S,I)|0,W=W+Math.imul(S,C)|0,r=r+Math.imul(b,T)|0,t=(t+Math.imul(b,P)|0)+Math.imul(v,T)|0,W=W+Math.imul(v,P)|0,r=r+Math.imul(w,B)|0,t=(t+Math.imul(w,N)|0)+Math.imul(y,B)|0,W=W+Math.imul(y,N)|0,r=r+Math.imul(g,L)|0,t=(t+Math.imul(g,H)|0)+Math.imul(m,L)|0,W=W+Math.imul(m,H)|0,r=r+Math.imul(d,U)|0,t=(t+Math.imul(d,D)|0)+Math.imul(p,U)|0,W=W+Math.imul(p,D)|0,r=r+Math.imul(l,z)|0,t=(t+Math.imul(l,V)|0)+Math.imul(f,z)|0,W=W+Math.imul(f,V)|0,r=r+Math.imul(c,F)|0,t=(t+Math.imul(c,j)|0)+Math.imul(u,F)|0,W=W+Math.imul(u,j)|0,E=(q+(r+Math.imul(a,K)|0)|0)+((8191&(t=(t+Math.imul(a,n)|0)+Math.imul(h,K)|0))<<13)|0,q=((W+Math.imul(h,n)|0)+(t>>>13)|0)+(E>>>26)|0,E&=67108863,r=Math.imul(R,M),t=Math.imul(R,O)+Math.imul(s,M)|0,W=Math.imul(s,O),r=r+Math.imul(_,I)|0,t=(t+Math.imul(_,C)|0)+Math.imul(x,I)|0,W=W+Math.imul(x,C)|0,r=r+Math.imul(k,T)|0,t=(t+Math.imul(k,P)|0)+Math.imul(S,T)|0,W=W+Math.imul(S,P)|0,r=r+Math.imul(b,B)|0,t=(t+Math.imul(b,N)|0)+Math.imul(v,B)|0,W=W+Math.imul(v,N)|0,r=r+Math.imul(w,L)|0,t=(t+Math.imul(w,H)|0)+Math.imul(y,L)|0,W=W+Math.imul(y,H)|0,r=r+Math.imul(g,U)|0,t=(t+Math.imul(g,D)|0)+Math.imul(m,U)|0,W=W+Math.imul(m,D)|0,r=r+Math.imul(d,z)|0,t=(t+Math.imul(d,V)|0)+Math.imul(p,z)|0,W=W+Math.imul(p,V)|0,r=r+Math.imul(l,F)|0,t=(t+Math.imul(l,j)|0)+Math.imul(f,F)|0,W=W+Math.imul(f,j)|0,A=(q+(r+Math.imul(c,K)|0)|0)+((8191&(t=(t+Math.imul(c,n)|0)+Math.imul(u,K)|0))<<13)|0,q=((W+Math.imul(u,n)|0)+(t>>>13)|0)+(A>>>26)|0,A&=67108863,r=Math.imul(R,I),t=Math.imul(R,C)+Math.imul(s,I)|0,W=Math.imul(s,C),r=r+Math.imul(_,T)|0,t=(t+Math.imul(_,P)|0)+Math.imul(x,T)|0,W=W+Math.imul(x,P)|0,r=r+Math.imul(k,B)|0,t=(t+Math.imul(k,N)|0)+Math.imul(S,B)|0,W=W+Math.imul(S,N)|0,r=r+Math.imul(b,L)|0,t=(t+Math.imul(b,H)|0)+Math.imul(v,L)|0,W=W+Math.imul(v,H)|0,r=r+Math.imul(w,U)|0,t=(t+Math.imul(w,D)|0)+Math.imul(y,U)|0,W=W+Math.imul(y,D)|0,r=r+Math.imul(g,z)|0,t=(t+Math.imul(g,V)|0)+Math.imul(m,z)|0,W=W+Math.imul(m,V)|0,r=r+Math.imul(d,F)|0,t=(t+Math.imul(d,j)|0)+Math.imul(p,F)|0,W=W+Math.imul(p,j)|0,a=(q+(r+Math.imul(l,K)|0)|0)+((8191&(t=(t+Math.imul(l,n)|0)+Math.imul(f,K)|0))<<13)|0,q=((W+Math.imul(f,n)|0)+(t>>>13)|0)+(a>>>26)|0,a&=67108863,r=Math.imul(R,T),t=Math.imul(R,P)+Math.imul(s,T)|0,W=Math.imul(s,P),r=r+Math.imul(_,B)|0,t=(t+Math.imul(_,N)|0)+Math.imul(x,B)|0,W=W+Math.imul(x,N)|0,r=r+Math.imul(k,L)|0,t=(t+Math.imul(k,H)|0)+Math.imul(S,L)|0,W=W+Math.imul(S,H)|0,r=r+Math.imul(b,U)|0,t=(t+Math.imul(b,D)|0)+Math.imul(v,U)|0,W=W+Math.imul(v,D)|0,r=r+Math.imul(w,z)|0,t=(t+Math.imul(w,V)|0)+Math.imul(y,z)|0,W=W+Math.imul(y,V)|0,r=r+Math.imul(g,F)|0,t=(t+Math.imul(g,j)|0)+Math.imul(m,F)|0,W=W+Math.imul(m,j)|0,h=(q+(r+Math.imul(d,K)|0)|0)+((8191&(t=(t+Math.imul(d,n)|0)+Math.imul(p,K)|0))<<13)|0,q=((W+Math.imul(p,n)|0)+(t>>>13)|0)+(h>>>26)|0,h&=67108863,r=Math.imul(R,B),t=Math.imul(R,N)+Math.imul(s,B)|0,W=Math.imul(s,N),r=r+Math.imul(_,L)|0,t=(t+Math.imul(_,H)|0)+Math.imul(x,L)|0,W=W+Math.imul(x,H)|0,r=r+Math.imul(k,U)|0,t=(t+Math.imul(k,D)|0)+Math.imul(S,U)|0,W=W+Math.imul(S,D)|0,r=r+Math.imul(b,z)|0,t=(t+Math.imul(b,V)|0)+Math.imul(v,z)|0,W=W+Math.imul(v,V)|0,r=r+Math.imul(w,F)|0,t=(t+Math.imul(w,j)|0)+Math.imul(y,F)|0,W=W+Math.imul(y,j)|0,M=(q+(r+Math.imul(g,K)|0)|0)+((8191&(t=(t+Math.imul(g,n)|0)+Math.imul(m,K)|0))<<13)|0,q=((W+Math.imul(m,n)|0)+(t>>>13)|0)+(M>>>26)|0,M&=67108863,r=Math.imul(R,L),t=Math.imul(R,H)+Math.imul(s,L)|0,W=Math.imul(s,H),r=r+Math.imul(_,U)|0,t=(t+Math.imul(_,D)|0)+Math.imul(x,U)|0,W=W+Math.imul(x,D)|0,r=r+Math.imul(k,z)|0,t=(t+Math.imul(k,V)|0)+Math.imul(S,z)|0,W=W+Math.imul(S,V)|0,r=r+Math.imul(b,F)|0,t=(t+Math.imul(b,j)|0)+Math.imul(v,F)|0,W=W+Math.imul(v,j)|0,O=(q+(r+Math.imul(w,K)|0)|0)+((8191&(t=(t+Math.imul(w,n)|0)+Math.imul(y,K)|0))<<13)|0,q=((W+Math.imul(y,n)|0)+(t>>>13)|0)+(O>>>26)|0,O&=67108863,r=Math.imul(R,U),t=Math.imul(R,D)+Math.imul(s,U)|0,W=Math.imul(s,D),r=r+Math.imul(_,z)|0,t=(t+Math.imul(_,V)|0)+Math.imul(x,z)|0,W=W+Math.imul(x,V)|0,r=r+Math.imul(k,F)|0,t=(t+Math.imul(k,j)|0)+Math.imul(S,F)|0,W=W+Math.imul(S,j)|0,c=(q+(r+Math.imul(b,K)|0)|0)+((8191&(t=(t+Math.imul(b,n)|0)+Math.imul(v,K)|0))<<13)|0,q=((W+Math.imul(v,n)|0)+(t>>>13)|0)+(c>>>26)|0,c&=67108863,r=Math.imul(R,z),t=Math.imul(R,V)+Math.imul(s,z)|0,W=Math.imul(s,V),r=r+Math.imul(_,F)|0,t=(t+Math.imul(_,j)|0)+Math.imul(x,F)|0,W=W+Math.imul(x,j)|0,u=(q+(r+Math.imul(k,K)|0)|0)+((8191&(t=(t+Math.imul(k,n)|0)+Math.imul(S,K)|0))<<13)|0,q=((W+Math.imul(S,n)|0)+(t>>>13)|0)+(u>>>26)|0,u&=67108863,r=Math.imul(R,F),t=Math.imul(R,j)+Math.imul(s,F)|0,W=Math.imul(s,j),I=(q+(r+Math.imul(_,K)|0)|0)+((8191&(t=(t+Math.imul(_,n)|0)+Math.imul(x,K)|0))<<13)|0,q=((W+Math.imul(x,n)|0)+(t>>>13)|0)+(I>>>26)|0,I&=67108863,C=(q+Math.imul(R,K)|0)+((8191&(t=Math.imul(R,n)+Math.imul(s,K)|0))<<13)|0;return q=(Math.imul(s,n)+(t>>>13)|0)+(C>>>26)|0,C&=67108863,o[0]=e,o[1]=X,o[2]=Y,o[3]=G,o[4]=$,o[5]=J,o[6]=Z,o[7]=Q,o[8]=tt,o[9]=E,o[10]=A,o[11]=a,o[12]=h,o[13]=M,o[14]=O,o[15]=c,o[16]=u,o[17]=I,o[18]=C,0!=q&&(o[19]=q,i.length++),i};function p(t,e,i){return(new g).mulp(t,e,i)}function g(t,e){this.x=t,this.y=e}Math.imul||(d=f),n.prototype.mulTo=function(t,e){var i=this.length+t.length;return i=(10===this.length&&10===t.length?d:i<63?f:i<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,s=0,n=0;n<i.length-1;n++){for(var o=s,a=(s=0,67108863&r),h=Math.min(n,e.length-1),c=Math.max(0,n-t.length+1);c<=h;c++){var u,l=(0|t.words[n-c])*(0|e.words[c]);a=67108863&(u=(67108863&l)+a|0);s+=(o=(o=o+(l/67108864|0)|0)+(u>>>26)|0)>>>26,o&=67108863}i.words[n]=a,r=o,o=s}return 0!==r?i.words[n]=r:i.length--,i.strip()}:p)(this,t,e)},g.prototype.makeRBT=function(t){for(var e=new Array(t),i=n.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},g.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,s=0;s<e;s++)r|=(1&t)<<e-s-1,t>>=1;return r},g.prototype.permute=function(t,e,i,r,s,n){for(var o=0;o<n;o++)r[o]=e[t[o]],s[o]=i[t[o]]},g.prototype.transform=function(t,e,i,r,s,n){this.permute(n,t,e,i,r,s);for(var o=1;o<s;o<<=1)for(var a=o<<1,h=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),u=0;u<s;u+=a)for(var l=h,f=c,d=0;d<o;d++){var p=i[u+d],g=r[u+d],m=i[u+d+o],w=l*m-f*(y=r[u+d+o]),y=l*y+f*m;i[u+d]=p+(m=w),r[u+d]=g+y,i[u+d+o]=p-m,r[u+d+o]=g-y,d!==a&&(w=h*l-c*f,f=h*f+c*l,l=w)}},g.prototype.guessLen13b=function(t,e){e=1&(r=1|Math.max(e,t));for(var i=0,r=r/2|0;r;r>>>=1)i++;return 1<<i+1+e},g.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var s=t[r];t[r]=t[i-r-1],t[i-r-1]=s,s=e[r],e[r]=-e[i-r-1],e[i-r-1]=-s}},g.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var s=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&s,i=s<67108864?0:s/67108864|0}return t},g.prototype.convert13b=function(t,e,i,s){for(var n=0,o=0;o<e;o++)n+=0|t[o],i[2*o]=8191&n,i[2*o+1]=8191&(n>>>=13),n>>>=13;for(o=2*e;o<s;++o)i[o]=0;r(0===n),r(0==(-8192&n))},g.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},g.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),s=this.makeRBT(r),n=this.stub(r),o=new Array(r),a=new Array(r),h=new Array(r),c=new Array(r),u=new Array(r),l=new Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,c,r),this.transform(o,n,a,h,r,s),this.transform(c,n,u,l,r,s);for(var d=0;d<r;d++){var p=a[d]*u[d]-h[d]*l[d];h[d]=a[d]*l[d]+h[d]*u[d],a[d]=p}return this.conjugate(a,h,r),this.transform(a,h,f,n,r,s),this.conjugate(f,n,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},n.prototype.mul=function(t){var e=new n(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},n.prototype.mulf=function(t){var e=new n(null);return e.words=new Array(this.length+t.length),p(this,t,e)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,i=0;i<this.length;i++){var s=(0|this.words[i])*t,n=(67108863&s)+(67108863&e);e=(e>>=26)+(s/67108864|0)+(n>>>26);this.words[i]=67108863&n}return 0!==e&&(this.words[i]=e,this.length++),this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i%26;e[i]=(t.words[i/26|0]&1<<r)>>>r}return e}(t);if(0===e.length)return new n(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var s=i.sqr();r<e.length;r++,s=s.sqr())0!==e[r]&&(i=i.mul(s));return i},n.prototype.iushln=function(t){r("number"==typeof t&&0<=t);var e=t%26,i=(t-e)/26,s=67108863>>>26-e<<26-e;if(0!=e){for(var n=0,o=0;o<this.length;o++){var a=this.words[o]&s,h=(0|this.words[o])-a<<e;this.words[o]=h|n,n=a>>>26-e}n&&(this.words[o]=n,this.length++)}if(0!=i){for(o=this.length-1;0<=o;o--)this.words[o+i]=this.words[o];for(o=0;o<i;o++)this.words[o]=0;this.length+=i}return this.strip()},n.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},n.prototype.iushrn=function(t,e,i){r("number"==typeof t&&0<=t),s=e?(e-e%26)/26:0;var s,n=t%26,o=Math.min((t-n)/26,this.length),a=67108863^67108863>>>n<<n,h=i;if(s-=o,s=Math.max(0,s),h){for(var c=0;c<o;c++)h.words[c]=this.words[c];h.length=o}if(0!==o)if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;0<=c&&(0!==u||s<=c);c--){var l=0|this.words[c];this.words[c]=u<<26-n|l>>>n,u=l&a}return h&&0!==u&&(h.words[h.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(t,e,i){return r(0===this.negative),this.iushrn(t,e,i)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){r("number"==typeof t&&0<=t);var e=t%26;t=(t-e)/26;return!(this.length<=t||!(this.words[t]&1<<e))},n.prototype.imaskn=function(t){r("number"==typeof t&&0<=t);var e=t%26;t=(t-e)/26;return r(0===this.negative,"imaskn works only with positive numbers"),this.length<=t?this:(0!=e&&t++,this.length=Math.min(t,this.length),0!=e&&(this.words[this.length-1]&=67108863^67108863>>>e<<e),this.strip())},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&67108864<=this.words[e];e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},n.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,--this.words[e+1];return this.strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,e,i){for(var s=t.length+i,n=(this._expand(s),0),o=0;o<t.length;o++){var a=(0|this.words[o+i])+n,h=(0|t.words[o])*e;n=((a-=67108863&h)>>26)-(h/67108864|0);this.words[o+i]=67108863&a}for(;o<this.length-i;o++)n=(a=(0|this.words[o+i])+n)>>26,this.words[o+i]=67108863&a;if(0!==n){for(r(-1===n),o=n=0;o<this.length;o++)n=(a=-(0|this.words[o])+n)>>26,this.words[o]=67108863&a;this.negative=1}return this.strip()},n.prototype._wordDiv=function(t,e){this.length,t.length;var i,r=this.clone(),s=t,o=0|s.words[s.length-1],a=(0!=(t=26-this._countBits(o))&&(s=s.ushln(t),r.iushln(t),o=0|s.words[s.length-1]),r.length-s.length);if("mod"!==e){(i=new n(null)).length=1+a,i.words=new Array(i.length);for(var h=0;h<i.length;h++)i.words[h]=0}var c=r.clone()._ishlnsubmul(s,1,a);0===c.negative&&(r=c,i)&&(i.words[a]=1);for(var u=a-1;0<=u;u--){var l=67108864*(0|r.words[s.length+u])+(0|r.words[s.length+u-1]);l=Math.min(l/o|0,67108863);for(r._ishlnsubmul(s,l,u);0!==r.negative;)l--,r.negative=0,r._ishlnsubmul(s,1,u),r.isZero()||(r.negative^=1);i&&(i.words[u]=l)}return i&&i.strip(),r.strip(),"div"!==e&&0!=t&&r.iushrn(t),{div:i||null,mod:r}},n.prototype.divmod=function(t,e,i){var s,o,a;return r(!t.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(s=a.div.neg()),"div"!==e&&(o=a.mod.neg(),i)&&0!==o.negative&&o.iadd(t),{div:s,mod:o}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),{div:s="mod"!==e?a.div.neg():s,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(o=a.mod.neg(),i)&&0!==o.negative&&o.isub(t),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new n(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new n(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modn(t.words[0]))}:this._wordDiv(t,e)},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var e,i,r=this.divmod(t);return r.mod.isZero()||(i=0!==r.div.negative?r.mod.isub(t):r.mod,e=t.ushrn(1),t=t.andln(1),(i=i.cmp(e))<0)||1===t&&0===i?r.div:0!==r.div.negative?r.div.isubn(1):r.div.iaddn(1)},n.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,i=0,s=this.length-1;0<=s;s--)i=(e*i+(0|this.words[s]))%t;return i},n.prototype.idivn=function(t){r(t<=67108863);for(var e=0,i=this.length-1;0<=i;i--){var s=(0|this.words[i])+67108864*e;this.words[i]=s/t|0,e=s%t}return this.strip()},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());for(var e=this,i=t.clone(),s=(e=0!==e.negative?e.umod(t):e.clone(),new n(1)),o=new n(0),a=new n(0),h=new n(1),c=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++c;for(var u=i.clone(),l=e.clone();!e.isZero();){for(var f=0,d=1;0==(e.words[0]&d)&&f<26;++f,d<<=1);if(0<f)for(e.iushrn(f);0<f--;)(s.isOdd()||o.isOdd())&&(s.iadd(u),o.isub(l)),s.iushrn(1),o.iushrn(1);for(var p=0,g=1;0==(i.words[0]&g)&&p<26;++p,g<<=1);if(0<p)for(i.iushrn(p);0<p--;)(a.isOdd()||h.isOdd())&&(a.iadd(u),h.isub(l)),a.iushrn(1),h.iushrn(1);0<=e.cmp(i)?(e.isub(i),s.isub(a),o.isub(h)):(i.isub(e),a.isub(s),h.isub(o))}return{a:a,b:h,gcd:i.iushln(c)}},n.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());for(var e,i=this,s=t.clone(),o=(i=0!==i.negative?i.umod(t):i.clone(),new n(1)),a=new n(0),h=s.clone();0<i.cmpn(1)&&0<s.cmpn(1);){for(var c=0,u=1;0==(i.words[0]&u)&&c<26;++c,u<<=1);if(0<c)for(i.iushrn(c);0<c--;)o.isOdd()&&o.iadd(h),o.iushrn(1);for(var l=0,f=1;0==(s.words[0]&f)&&l<26;++l,f<<=1);if(0<l)for(s.iushrn(l);0<l--;)a.isOdd()&&a.iadd(h),a.iushrn(1);0<=i.cmp(s)?(i.isub(s),o.isub(a)):(s.isub(i),a.isub(o))}return(e=0===i.cmpn(1)?o:a).cmpn(0)<0&&e.iadd(t),e},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0;for(var r=i.negative=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var s=e.cmp(i);if(s<0){var n=e;e=i,i=n}else if(0===s||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return 0==(1&this.words[0])},n.prototype.isOdd=function(){return 1==(1&this.words[0])},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){r("number"==typeof t);t=(t-(e=t%26))/26;var e=1<<e;if(this.length<=t)this._expand(1+t),this.words[t]|=e;else{for(var i=e,s=t;0!==i&&s<this.length;s++){var n=0|this.words[s];i=(n+=i)>>>26;n&=67108863,this.words[s]=n}0!==i&&(this.words[s]=i,this.length++)}return this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(t){var e=t<0;return 0===this.negative||e?0===this.negative&&e?1:(this.strip(),e=1<this.length?1:(r((t=e?-t:t)<=67108863,"Number is too big"),(e=0|this.words[0])===t?0:e<t?-1:1),0!==this.negative?0|-e:e):-1},n.prototype.cmp=function(t){return 0!==this.negative&&0===t.negative?-1:0===this.negative&&0!==t.negative?1:(t=this.ucmp(t),0!==this.negative?0|-t:t)},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;0<=i;i--){var r=0|this.words[i],s=0|t.words[i];if(r!=s){r<s?e=-1:s<r&&(e=1);break}}return e},n.prototype.gtn=function(t){return 1===this.cmpn(t)},n.prototype.gt=function(t){return 1===this.cmp(t)},n.prototype.gten=function(t){return 0<=this.cmpn(t)},n.prototype.gte=function(t){return 0<=this.cmp(t)},n.prototype.ltn=function(t){return-1===this.cmpn(t)},n.prototype.lt=function(t){return-1===this.cmp(t)},n.prototype.lten=function(t){return this.cmpn(t)<=0},n.prototype.lte=function(t){return this.cmp(t)<=0},n.prototype.eqn=function(t){return 0===this.cmpn(t)},n.prototype.eq=function(t){return 0===this.cmp(t)},n.red=function(t){return new S(t)},n.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var m={k256:null,p224:null,p192:null,p25519:null};function w(t,e){this.name=t,this.p=new n(e,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function v(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function k(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){var e;"string"==typeof t?(e=n._prime(t),this.m=e.p,this.prime=e):(r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null)}function _(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var t=new n(null);return t.words=new Array(Math.ceil(this.n/13)),t},w.prototype.ireduce=function(t){for(var e,i=t;this.split(i,this.tmp),(e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength())>this.n;);return 0===(t=e<this.n?-1:i.ucmp(this.p))?(i.words[0]=0,i.length=1):0<t?i.isub(this.p):i.strip(),i},w.prototype.split=function(t,e){t.iushrn(this.n,0,e)},w.prototype.imulK=function(t){return t.imul(this.k)},s(y,w),y.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)t.words[0]=0,t.length=1;else{var s=t.words[9];for(e.words[e.length++]=4194303&s,r=10;r<t.length;r++){var n=0|t.words[r];t.words[r-10]=(4194303&n)<<4|s>>>22,s=n}0==(t.words[r-10]=s>>>=22)&&10<t.length?t.length-=10:t.length-=9}},y.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1])&&t.length--,t},s(b,w),s(v,w),s(k,w),k.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,s=67108863&r;r>>>=26,t.words[i]=s,e=r}return 0!==e&&(t.words[t.length++]=e),t},n._prime=function(t){if(m[t])return m[t];var e;if("k256"===t)e=new y;else if("p224"===t)e=new b;else if("p192"===t)e=new v;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new k}return m[t]=e},S.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},S.prototype.imod=function(t){return(this.prime?this.prime.ireduce(t):t.umod(this.m))._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,e){return this._verify2(t,e),0<=(t=t.add(e)).cmp(this.m)&&t.isub(this.m),t._forceRed(this)},S.prototype.iadd=function(t,e){return this._verify2(t,e),0<=(t=t.iadd(e)).cmp(this.m)&&t.isub(this.m),t},S.prototype.sub=function(t,e){return this._verify2(t,e),(t=t.sub(e)).cmpn(0)<0&&t.iadd(this.m),t._forceRed(this)},S.prototype.isub=function(t,e){return this._verify2(t,e),(t=t.isub(e)).cmpn(0)<0&&t.iadd(this.m),t},S.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},S.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},S.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e)return e=this.m.add(new n(1)).iushrn(2),this.pow(t,e);for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());for(var o=new n(1).toRed(this),a=o.redNeg(),h=this.m.subn(1).iushrn(1),c=new n(2*(c=this.m.bitLength())*c).toRed(this);0!==this.pow(c,h).cmp(a);)c.redIAdd(a);for(var u=this.pow(c,i),l=this.pow(t,i.addn(1).iushrn(1)),f=this.pow(t,i),d=s;0!==f.cmp(o);){for(var p=f,g=0;0!==p.cmp(o);g++)p=p.redSqr();r(g<d);var m=this.pow(u,new n(1).iushln(d-g-1));l=l.redMul(m),u=m.redSqr(),f=f.redMul(u),d=g}return l},S.prototype.invm=function(t){return 0!==(t=t._invmp(this.m)).negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(t,e){if(e.isZero())return new n(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new n(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var s=i[0],o=0,a=0,h=e.bitLength()%26;for(0===h&&(h=26),r=e.length-1;0<=r;r--){for(var c=e.words[r],u=h-1;0<=u;u--){var l=c>>u&1;s!==i[0]&&(s=this.sqr(s)),0==l&&0===o?a=0:(o=o<<1|l,(4==++a||0===r&&0===u)&&(s=this.mul(s,i[o]),o=a=0))}h=26}return s},S.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},S.prototype.convertFrom=function(t){return(t=t.clone()).red=null,t},n.mont=function(t){return new _(t)},s(_,S),_.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},_.prototype.convertFrom=function(t){return(t=this.imod(t.mul(this.rinv))).red=null,t},_.prototype.imul=function(t,e){return t.isZero()||e.isZero()?(t.words[0]=0,t.length=1,t):(e=(t=t.imul(e)).maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),0<=(e=t=t.isub(e).iushrn(this.shift)).cmp(this.m)?e=t.isub(this.m):t.cmpn(0)<0&&(e=t.iadd(this.m)),e._forceRed(this))},_.prototype.mul=function(t,e){return(t.isZero()||e.isZero()?new n(0):(e=(t=t.mul(e)).maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),0<=(e=t=t.isub(e).iushrn(this.shift)).cmp(this.m)?e=t.isub(this.m):t.cmpn(0)<0&&(e=t.iadd(this.m)),e))._forceRed(this)},_.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,i(98)(t))},function(t,e,i){"use strict";
/*!
 * outpoint.js - outpoint object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1),s=i(3),n=i(6),o=i(2),a=i(4);class h{constructor(t,e){this.hash=a.NULL_HASH,this.index=4294967295,null!=t&&(r("string"==typeof t,"Hash must be a string."),r(s.isU32(e),"3 - Index must be a uint32."),this.hash=t,this.index=e)}fromOptions(t){return r(t,"Outpoint data is required."),r("string"==typeof t.hash,"Hash must be a string."),r(s.isU32(t.index),"4 - Index must be a uint32."),this.hash=t.hash,this.index=t.index,this}static fromOptions(t){return(new h).fromOptions(t)}clone(){var t=new h;return t.hash=this.value,t.index=this.index,t}equals(t){return r(h.isOutpoint(t)),this.hash===t.hash&&this.index===t.index}compare(t){r(h.isOutpoint(t));var e=s.strcmp(this.txid(),t.txid());return 0!==e?e:this.index-t.index}isNull(){return 4294967295===this.index&&this.hash===a.NULL_HASH}rhash(){return s.revHex(this.hash)}txid(){return this.rhash()}toKey(){return h.toKey(this.hash,this.index)}fromKey(t){return r(64<t.length),this.hash=t.slice(0,64),this.index=parseInt(t.slice(64),10),this}static fromKey(t){return(new h).fromKey(t)}toWriter(t){return t.writeHash(this.hash),t.writeU32(this.index),t}getSize(){return 36}toRaw(){return this.toWriter(new n(36)).render()}fromReader(t){return this.hash=t.readHash("hex"),this.index=t.readU32(),this}fromRaw(t){return this.fromReader(new o(t))}static fromReader(t){return(new h).fromReader(t)}static fromRaw(t){return(new h).fromRaw(t)}fromJSON(t){return r(t,"Outpoint data is required."),r("string"==typeof t.hash,"Hash must be a string."),r(s.isU32(t.index),"5 - Index must be a uint32."),this.hash=s.revHex(t.hash),this.index=t.index,this}toJSON(){return{hash:s.revHex(this.hash),index:this.index}}static fromJSON(t){return(new h).fromJSON(t)}fromTX(t,e){return r(t),r("number"==typeof e),r(0<=e),this.hash=t.hash("hex"),this.index=e,this}static fromTX(t,e){return(new h).fromTX(t,e)}static toKey(t,e){return r("string"==typeof t),r(64===t.length),r(0<=e),t+e}inspect(){return`<Outpoint: ${this.rhash()}/${this.index}>`}static isOutpoint(t){return t instanceof h}}t.exports=h},function(t,e,i){"use strict";
/*!
 * facade.js - 门面对象
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */const r=i(4),s=i(3),{ContractType:n,ContractTypeExecutable:o}=i(7),a=Object.values(o);i(15);const h=i(208),c=i(157),{opcodes:u,unspendableCodes:l,espicalCodes:f}=i(22);i=new class{async FactoryOfContract(t){t.facade=this,t.hash=t.tx.hash("hex"),t.raw=t.tx.toRaw().toString("hex"),t.coinbaseHeight||(t.coinbaseHeight=t.block?t.block.height:-1);let e={};var i;return t.contract?e=t.contract:t.env&&(i=await t.env.finder(t.tx.inputs[0].prevout.hash),e=this.parseContract(t.tx,i,t.tx.inputs[0].prevout.index)),new(c(e))(e,t)}parseContract(t,e,i){if(e&&1==t.inputs.length&&t.inputs[0].prevout.hash!=r.NULL_HASH&&1==t.outputs.length&&!t.outputs[0].getReturnType(l)&&(e=e.outputs[i])&&(i=e.getReturnData([u.OP_PROPEXCHANGE,u.OP_PROPCREATE])))return{oper:n.propFound,ori:i,addr:e.getAddress().toString()};if(!t.outputs[0])return null;let s=t.outputs[0].getReturnData(f);if(!s||-1==a.indexOf(s.oper))return null;switch(s.oper){case n.coinbase:var o={sig:s.sig,oper:n.coinbase};Reflect.deleteProperty(s,"sig"),o.data=s,s=o;break;case n.contractCreate:if(2<=t.outputs.length)try{var h=t.outputs[1].getReturnData();h.ori=s,s=h}catch(t){return console.error(t),null}}return s}async checkSum(t,e,i){if(t.txcheckpoint&&t.txcheckpoint.getCheck&&0<t.txcheckpoint.getCheck(e).length)try{var r=t.txcheckpoint.getCheck(e);if(0<r.length){var n=r[Math.floor(Math.random()*r.length)],o=s.sprintf(n.url,i,0),a=await h.pGetUrl(o);if(n.check(a))return!0}}catch(t){console.log(t.message)}return!1}},t.exports=i},function(t,e,i){"use strict";(function(e){
/*!
 * coin.js - coin object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=i(3),n=i(31);var o=i(25);const a=i(16),h=i(18),c=i(9),u=i(2),l=i(6),f=i(4);class d extends o{constructor(t){super(t),this.version=1,this.height=-1,this.time=0,this.value=0,this.script=new a,this.coinbase=!1,this.hash=f.NULL_HASH,this.index=0,t&&this.fromOptions(t)}fromOptions(t){return r(t,"Coin data is required."),null!=t.version&&(r(s.isU32(t.version),"Version must be a uint32."),this.version=t.version),null!=t.height&&(-1!==t.height?(r(s.isU32(t.height),"Height must be a uint32."),this.height=t.height):this.height=-1),null!=t.time&&(-1!==t.time?(r(s.isU32(t.time),"time must be a uint32."),this.time=t.time):this.time=0),null!=t.value&&(r(s.isU64(t.value),"Value must be a uint64.$1"),this.value=t.value),t.script&&this.script.fromOptions(t.script),null!=t.coinbase&&(r("boolean"==typeof t.coinbase,"Coinbase must be a boolean."),this.coinbase=t.coinbase),null!=t.hash&&(r("string"==typeof t.hash,"Hash must be a string."),this.hash=t.hash),null!=t.index&&(r(s.isU32(t.index),"1 - Index must be a uint32."),this.index=t.index),this}static fromOptions(t){return(new d).fromOptions(t)}clone(){r(!1,"Coins are not cloneable.")}getDepth(t){return r("number"==typeof t,"Must pass a height."),-1===this.height||-1===t||t<this.height?0:t-this.height+1}toKey(){return this.hash+this.index}getLocktime(){return this.script.getLocktime()}lockedByLocktime(t,e){var i=this.getLocktime();if(0<i){if(i<=c.LOCKTIME_THRESHOLD&&t<i)return!0;if(i>c.LOCKTIME_THRESHOLD&&e<i)return!0}return!1}getSequence(){return this.script.getSequence()}lockedBySequence(t,e){var i=this.getSequence();if(!(i&c.SEQUENCE_DISABLE_FLAG))if(i&c.SEQUENCE_TYPE_FLAG){var r=(i&c.SEQUENCE_MASK)<<c.SEQUENCE_GRANULARITY;if(0==this.time||e-this.time<r)return!0}else if(e=i&c.SEQUENCE_MASK,this.getDepth(t)<e)return!0;return!1}getLockStatus(){return this.script.getLockStatus()}fromKey(t){return r(64<t.length),this.hash=t.slice(0,64),this.index=parseInt(t.slice(64),10),this}static fromKey(t){return(new d).fromKey(t)}rhash(){return s.revHex(this.hash)}txid(){return this.rhash()}inspect(){return{type:this.getType(),version:this.version,height:this.height,value:n.btc(this.value),script:this.script,coinbase:this.coinbase,hash:this.hash?s.revHex(this.hash):null,index:this.index,address:this.getAddress()}}toJSON(){return this.getJSON()}getJSON(t,e){let i=this.getAddress();return t=h.get(t),i=i&&i.toString(t),{version:this.version,height:this.height,time:this.time,value:this.value,script:this.script.toJSON(),address:i,coinbase:this.coinbase,hash:e?void 0:this.rhash(),index:e?void 0:this.index}}fromJSON(t){return r(t,"Coin data required."),r(s.isU32(t.version),"Version must be a uint32."),r(-1===t.height||s.isU32(t.height),"Height must be a uint32."),r(s.isU32(t.time),"Time must be a uint32."),r(s.isU64(t.value),"Value must be a uint64.$2"),r("boolean"==typeof t.coinbase,"Coinbase must be a boolean."),this.version=t.version,this.height=t.height,this.time=t.time,this.value=t.value,this.script.fromJSON(t.script),this.coinbase=t.coinbase,null!=t.hash&&(r("string"==typeof t.hash,"Hash must be a string."),r(64===t.hash.length,"Hash must be a string."),r(s.isU32(t.index),"2 - Index must be a uint32."),this.hash=s.revHex(t.hash),this.index=t.index),this}static fromJSON(t){return(new d).fromJSON(t)}getSize(){return 21+this.script.getVarSize()}toWriter(t){let e=this.height;return-1===e&&(e=2147483647),t.writeU32(this.version),t.writeU32(e),t.writeU32(this.time),t.writeI64(this.value),t.writeVarBytes(this.script.toRaw()),t.writeU8(this.coinbase?1:0),t}toRaw(){var t=this.getSize();return this.toWriter(new l(t)).render()}fromReader(t){return this.version=t.readU32(),this.height=t.readU32(),this.time=t.readU32(),this.value=t.readI64(),this.script.fromRaw(t.readVarBytes()),this.coinbase=1===t.readU8(),2147483647===this.height&&(this.height=-1),this}fromRaw(t){return this.fromReader(new u(t))}static fromReader(t){return(new d).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new d).fromRaw(t)}fromTX(t,e,i,s){return r("number"==typeof e),r("number"==typeof i),r(0<=e&&e<t.outputs.length),this.version=t.version,this.height=i,this.time=s,this.value=t.outputs[e].value,this.script=t.outputs[e].script,this.coinbase=t.isCoinbase(),this.hash=t.hash("hex"),this.index=e,this}static fromTX(t,e,i,r){return(new d).fromTX(t,e,i,r)}static isCoin(t){return t instanceof d}}t.exports=d}).call(this,i(0).Buffer)},function(t,e,i){"use strict";var r=i(382).Buffer,s=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"==typeof e||r.isEncoding!==s&&s(t))return e||t;throw new Error("Unknown encoding: "+t)}(t),this.encoding){case"utf16le":this.text=h,this.end=c,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=u,this.end=l,e=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function o(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e,i=this.lastTotal-this.lastNeed,r=(e=this,128!=(192&(r=t)[0])?(e.lastNeed=0,"�"):1<e.lastNeed&&1<r.length?128!=(192&r[1])?(e.lastNeed=1,"�"):2<e.lastNeed&&2<r.length&&128!=(192&r[2])?(e.lastNeed=2,"�"):void 0:void 0);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,i,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,i,0,t.length),void(this.lastNeed-=t.length))}function h(t,e){if((t.length-e)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1);if(e=t.toString("utf16le",e)){var i=e.charCodeAt(e.length-1);if(55296<=i&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],e.slice(0,-1)}return e}function c(t){var e;t=t&&t.length?this.write(t):"";return this.lastNeed?(e=this.lastTotal-this.lastNeed,t+this.lastChar.toString("utf16le",0,e)):t}function u(t,e){var i=(t.length-e)%3;return 0==i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1==i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function l(t){return t=t&&t.length?this.write(t):"",this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}(e.StringDecoder=n).prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},n.prototype.end=function(t){return t=t&&t.length?this.write(t):"",this.lastNeed?t+"�":t},n.prototype.text=function(t,e){var i=function(t,e,i){var r=e.length-1;if(!(r<i)){var s=o(e[r]);if(0<=s)return 0<s&&(t.lastNeed=s-1),s;if(!(--r<i||-2===s)){if(0<=(s=o(e[r])))return 0<s&&(t.lastNeed=s-2),s;if(!(--r<i||-2===s)&&0<=(s=o(e[r])))return 0<s&&(2===s?s=0:t.lastNeed=s-3),s}}return 0}(this,t,e);return this.lastNeed?(this.lastTotal=i,i=t.length-(i-this.lastNeed),t.copy(this.lastChar,0,i),t.toString("utf8",e,i)):t.toString("utf8",e)},n.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,i){(function(t){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function s(t,e){function i(){}t.super_=e,i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function n(t,e,i){if(n.isBN(t))return t;this.negative=0,this.words=null,this.length=0,(this.red=null)!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var o;"object"==typeof t?t.exports=n:e.BN=n,(n.BN=n).wordSize=26;try{o=("undefined"!=typeof window&&void 0!==window.Buffer?window:i(362)).Buffer}catch(t){}function a(t,e){return 65<=(t=t.charCodeAt(e))&&t<=70?t-55:97<=t&&t<=102?t-87:t-48&15}function h(t,e,i){var r=a(t,i);return e<=i-1&&(r|=a(t,i-1)<<4),r}function c(t,e,i,r){for(var s=0,n=Math.min(t.length,i),o=e;o<n;o++){var a=t.charCodeAt(o)-48;s=s*r+(49<=a?a-49+10:17<=a?a-17+10:a)}return s}n.isBN=function(t){return t instanceof n||null!==t&&"object"==typeof t&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,e){return 0<t.cmp(e)?t:e},n.min=function(t,e){return t.cmp(e)<0?t:e},n.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);r((e="hex"===e?16:e)===(0|e)&&2<=e&&e<=36);var s=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(s++,this.negative=1),s<t.length&&(16===e?this._parseHex(t,s,i):(this._parseBase(t,e,s),"le"===i&&this._initArray(this.toArray(),e,i)))},n.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},n.prototype._initArray=function(t,e,i){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var s,n,o=0;o<this.length;o++)this.words[o]=0;var a=0;if("be"===i)for(o=t.length-1,s=0;0<=o;o-=3)n=t[o]|t[o-1]<<8|t[o-2]<<16,this.words[s]|=n<<a&67108863,this.words[s+1]=n>>>26-a&67108863,26<=(a+=24)&&(a-=26,s++);else if("le"===i)for(s=o=0;o<t.length;o+=3)n=t[o]|t[o+1]<<8|t[o+2]<<16,this.words[s]|=n<<a&67108863,this.words[s+1]=n>>>26-a&67108863,26<=(a+=24)&&(a-=26,s++);return this.strip()},n.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,n=0,o=0;if("be"===i)for(r=t.length-1;e<=r;r-=2)s=h(t,e,r)<<n,this.words[o]|=67108863&s,18<=n?(n-=18,this.words[o+=1]|=s>>>26):n+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)s=h(t,e,r)<<n,this.words[o]|=67108863&s,18<=n?(n-=18,this.words[o+=1]|=s>>>26):n+=8;this.strip()},n.prototype._parseBase=function(t,e,i){this.words=[0];for(var r=0,s=this.length=1;s<=67108863;s*=e)r++;s=s/e|0;for(var n=t.length-i,o=n%--r,a=Math.min(n,n-o)+i,h=0,u=i;u<a;u+=r)h=c(t,u,u+r,e),this.imuln(s),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!=o){var l=1;for(h=c(t,u,t.length,e),u=0;u<o;u++)l*=e;this.imuln(l),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this.strip()},n.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0,s=(r=(i.length=r)-1|0,(o=(0|t.words[0])*(0|e.words[0]))/67108864|0);i.words[0]=67108863&o;for(var n=1;n<r;n++){for(var o,a=s>>>26,h=67108863&s,c=Math.min(n,e.length-1),u=Math.max(0,n-t.length+1);u<=c;u++)a+=(o=(0|t.words[n-u|0])*(0|e.words[u])+h)/67108864|0,h=67108863&o;i.words[n]=0|h,s=0|a}return 0!==s?i.words[n]=0|s:i.length--,i.strip()}n.prototype.toString=function(t,e){if(e=0|e||1,16===(t=t||10)||"hex"===t){h="";for(var i=0,s=0,n=0;n<this.length;n++){var o=this.words[n],a=(16777215&(o<<i|s)).toString(16),h=0!=(s=o>>>24-i&16777215)||n!==this.length-1?u[6-a.length]+a+h:a+h;26<=(i+=2)&&(i-=26,n--)}for(0!==s&&(h=s.toString(16)+h);h.length%e!=0;)h="0"+h;return 0!==this.negative?"-"+h:h}if(t===(0|t)&&2<=t&&t<=36){var c=l[t],d=f[t];for(h="",(p=this.clone()).negative=0;!p.isZero();){var p,g=p.modn(d).toString(t);h=(p=p.idivn(d)).isZero()?g+h:u[c-g.length]+g+h}for(this.isZero()&&(h="0"+h);h.length%e!=0;)h="0"+h;return 0!==this.negative?"-"+h:h}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:2<this.length&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(t,e){return r(void 0!==o),this.toArrayLike(o,t,e)},n.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},n.prototype.toArrayLike=function(t,e,i){var s,n,o=this.byteLength(),a=i||Math.max(1,o),h=(i=(r(o<=a,"byte array longer than desired length"),r(0<a,"Requested array length <= 0"),this.strip(),"le"===e),new t(a)),c=this.clone();if(i){for(n=0;!c.isZero();n++)s=c.andln(255),c.iushrn(8),h[n]=s;for(;n<a;n++)h[n]=0}else{for(n=0;n<a-o;n++)h[n]=0;for(n=0;!c.isZero();n++)s=c.andln(255),c.iushrn(8),h[a-n-1]=s}return h},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var e=0;return 4096<=t&&(e+=13,t>>>=13),64<=t&&(e+=7,t>>>=7),8<=t&&(e+=4,t>>>=4),2<=t&&(e+=2,t>>>=2),e+t},n.prototype._zeroBits=function(t){var e;return 0===t?26:((e=0)==(8191&(t=t))&&(e+=13,t>>>=13),0==(127&t)&&(e+=7,t>>>=7),0==(15&t)&&(e+=4,t>>>=4),0==(3&t)&&(e+=2,t>>>=2),0==(1&t)&&e++,e)},n.prototype.bitLength=function(){var t=this.words[this.length-1];t=this._countBits(t);return 26*(this.length-1)+t},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},n.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){for(var e=this.length>t.length?t:this,i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},n.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){for(var e,i=this.length>t.length?(e=this,t):(e=t,this),r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},n.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){r("number"==typeof t&&0<=t);var e=0|Math.ceil(t/26);t%=26;this._expand(e),0<t&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return 0<t&&(this.words[i]=~this.words[i]&67108863>>26-t),this.strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,e){r("number"==typeof t&&0<=t);var i=t/26|0;t%=26;return this._expand(1+i),this.words[i]=e?this.words[i]|1<<t:this.words[i]&~(1<<t),this.strip()},n.prototype.iadd=function(t){var e,i;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();for(var r=this.length>t.length?(i=this,t):(i=t,this),s=0,n=0;n<r.length;n++)e=(0|i.words[n])+(0|r.words[n])+s,this.words[n]=67108863&e,s=e>>>26;for(;0!==s&&n<i.length;n++)e=(0|i.words[n])+s,this.words[n]=67108863&e,s=e>>>26;if(this.length=i.length,0!==s)this.words[this.length]=s,this.length++;else if(i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this},n.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){var e;if(0!==t.negative)return t.negative=0,e=this.iadd(t),t.negative=1,e._normSign();if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;for(var s=0<r?(i=this,t):(i=t,this),n=0,o=0;o<s.length;o++)n=(e=(0|i.words[o])-(0|s.words[o])+n)>>26,this.words[o]=67108863&e;for(;0!==n&&o<i.length;o++)n=(e=(0|i.words[o])+n)>>26,this.words[o]=67108863&e;if(0===n&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,i){var r,s=t.words,n=e.words,o=i.words,a=8191&(h=0|s[0]),h=h>>>13,c=8191&(u=0|s[1]),u=u>>>13,l=8191&(f=0|s[2]),f=f>>>13,d=8191&(p=0|s[3]),p=p>>>13,g=8191&(m=0|s[4]),m=m>>>13,w=8191&(y=0|s[5]),y=y>>>13,b=8191&(v=0|s[6]),v=v>>>13,k=8191&(S=0|s[7]),S=S>>>13,_=8191&(x=0|s[8]),x=x>>>13,R=8191&(s=0|s[9]),E=(s=s>>>13,8191&(A=0|n[0])),A=A>>>13,M=8191&(O=0|n[1]),O=O>>>13,I=8191&(C=0|n[2]),C=C>>>13,T=8191&(P=0|n[3]),P=P>>>13,B=8191&(N=0|n[4]),N=N>>>13,L=8191&(H=0|n[5]),H=H>>>13,U=8191&(D=0|n[6]),D=D>>>13,z=8191&(V=0|n[7]),V=V>>>13,F=8191&(j=0|n[8]),j=j>>>13,K=8191&(n=0|n[9]),q=(n=n>>>13,e=(i.negative=t.negative^e.negative,i.length=19,(0+Math.imul(a,E)|0)+((8191&(t=Math.imul(a,A)+Math.imul(h,E)|0))<<13)|0),(Math.imul(h,A)+(t>>>13)|0)+(e>>>26)|0);e&=67108863,r=Math.imul(c,E),t=Math.imul(c,A)+Math.imul(u,E)|0,W=Math.imul(u,A);var W,X=(q+(r+Math.imul(a,M)|0)|0)+((8191&(t=(t+Math.imul(a,O)|0)+Math.imul(h,M)|0))<<13)|0,Y=(q=((W+Math.imul(h,O)|0)+(t>>>13)|0)+(X>>>26)|0,X&=67108863,r=Math.imul(l,E),t=Math.imul(l,A)+Math.imul(f,E)|0,W=Math.imul(f,A),r=r+Math.imul(c,M)|0,t=(t+Math.imul(c,O)|0)+Math.imul(u,M)|0,W=W+Math.imul(u,O)|0,(q+(r+Math.imul(a,I)|0)|0)+((8191&(t=(t+Math.imul(a,C)|0)+Math.imul(h,I)|0))<<13)|0),G=(q=((W+Math.imul(h,C)|0)+(t>>>13)|0)+(Y>>>26)|0,Y&=67108863,r=Math.imul(d,E),t=Math.imul(d,A)+Math.imul(p,E)|0,W=Math.imul(p,A),r=r+Math.imul(l,M)|0,t=(t+Math.imul(l,O)|0)+Math.imul(f,M)|0,W=W+Math.imul(f,O)|0,r=r+Math.imul(c,I)|0,t=(t+Math.imul(c,C)|0)+Math.imul(u,I)|0,W=W+Math.imul(u,C)|0,(q+(r+Math.imul(a,T)|0)|0)+((8191&(t=(t+Math.imul(a,P)|0)+Math.imul(h,T)|0))<<13)|0),$=(q=((W+Math.imul(h,P)|0)+(t>>>13)|0)+(G>>>26)|0,G&=67108863,r=Math.imul(g,E),t=Math.imul(g,A)+Math.imul(m,E)|0,W=Math.imul(m,A),r=r+Math.imul(d,M)|0,t=(t+Math.imul(d,O)|0)+Math.imul(p,M)|0,W=W+Math.imul(p,O)|0,r=r+Math.imul(l,I)|0,t=(t+Math.imul(l,C)|0)+Math.imul(f,I)|0,W=W+Math.imul(f,C)|0,r=r+Math.imul(c,T)|0,t=(t+Math.imul(c,P)|0)+Math.imul(u,T)|0,W=W+Math.imul(u,P)|0,(q+(r+Math.imul(a,B)|0)|0)+((8191&(t=(t+Math.imul(a,N)|0)+Math.imul(h,B)|0))<<13)|0),J=(q=((W+Math.imul(h,N)|0)+(t>>>13)|0)+($>>>26)|0,$&=67108863,r=Math.imul(w,E),t=Math.imul(w,A)+Math.imul(y,E)|0,W=Math.imul(y,A),r=r+Math.imul(g,M)|0,t=(t+Math.imul(g,O)|0)+Math.imul(m,M)|0,W=W+Math.imul(m,O)|0,r=r+Math.imul(d,I)|0,t=(t+Math.imul(d,C)|0)+Math.imul(p,I)|0,W=W+Math.imul(p,C)|0,r=r+Math.imul(l,T)|0,t=(t+Math.imul(l,P)|0)+Math.imul(f,T)|0,W=W+Math.imul(f,P)|0,r=r+Math.imul(c,B)|0,t=(t+Math.imul(c,N)|0)+Math.imul(u,B)|0,W=W+Math.imul(u,N)|0,(q+(r+Math.imul(a,L)|0)|0)+((8191&(t=(t+Math.imul(a,H)|0)+Math.imul(h,L)|0))<<13)|0),Z=(q=((W+Math.imul(h,H)|0)+(t>>>13)|0)+(J>>>26)|0,J&=67108863,r=Math.imul(b,E),t=Math.imul(b,A)+Math.imul(v,E)|0,W=Math.imul(v,A),r=r+Math.imul(w,M)|0,t=(t+Math.imul(w,O)|0)+Math.imul(y,M)|0,W=W+Math.imul(y,O)|0,r=r+Math.imul(g,I)|0,t=(t+Math.imul(g,C)|0)+Math.imul(m,I)|0,W=W+Math.imul(m,C)|0,r=r+Math.imul(d,T)|0,t=(t+Math.imul(d,P)|0)+Math.imul(p,T)|0,W=W+Math.imul(p,P)|0,r=r+Math.imul(l,B)|0,t=(t+Math.imul(l,N)|0)+Math.imul(f,B)|0,W=W+Math.imul(f,N)|0,r=r+Math.imul(c,L)|0,t=(t+Math.imul(c,H)|0)+Math.imul(u,L)|0,W=W+Math.imul(u,H)|0,(q+(r+Math.imul(a,U)|0)|0)+((8191&(t=(t+Math.imul(a,D)|0)+Math.imul(h,U)|0))<<13)|0),Q=(q=((W+Math.imul(h,D)|0)+(t>>>13)|0)+(Z>>>26)|0,Z&=67108863,r=Math.imul(k,E),t=Math.imul(k,A)+Math.imul(S,E)|0,W=Math.imul(S,A),r=r+Math.imul(b,M)|0,t=(t+Math.imul(b,O)|0)+Math.imul(v,M)|0,W=W+Math.imul(v,O)|0,r=r+Math.imul(w,I)|0,t=(t+Math.imul(w,C)|0)+Math.imul(y,I)|0,W=W+Math.imul(y,C)|0,r=r+Math.imul(g,T)|0,t=(t+Math.imul(g,P)|0)+Math.imul(m,T)|0,W=W+Math.imul(m,P)|0,r=r+Math.imul(d,B)|0,t=(t+Math.imul(d,N)|0)+Math.imul(p,B)|0,W=W+Math.imul(p,N)|0,r=r+Math.imul(l,L)|0,t=(t+Math.imul(l,H)|0)+Math.imul(f,L)|0,W=W+Math.imul(f,H)|0,r=r+Math.imul(c,U)|0,t=(t+Math.imul(c,D)|0)+Math.imul(u,U)|0,W=W+Math.imul(u,D)|0,(q+(r+Math.imul(a,z)|0)|0)+((8191&(t=(t+Math.imul(a,V)|0)+Math.imul(h,z)|0))<<13)|0),tt=(q=((W+Math.imul(h,V)|0)+(t>>>13)|0)+(Q>>>26)|0,Q&=67108863,r=Math.imul(_,E),t=Math.imul(_,A)+Math.imul(x,E)|0,W=Math.imul(x,A),r=r+Math.imul(k,M)|0,t=(t+Math.imul(k,O)|0)+Math.imul(S,M)|0,W=W+Math.imul(S,O)|0,r=r+Math.imul(b,I)|0,t=(t+Math.imul(b,C)|0)+Math.imul(v,I)|0,W=W+Math.imul(v,C)|0,r=r+Math.imul(w,T)|0,t=(t+Math.imul(w,P)|0)+Math.imul(y,T)|0,W=W+Math.imul(y,P)|0,r=r+Math.imul(g,B)|0,t=(t+Math.imul(g,N)|0)+Math.imul(m,B)|0,W=W+Math.imul(m,N)|0,r=r+Math.imul(d,L)|0,t=(t+Math.imul(d,H)|0)+Math.imul(p,L)|0,W=W+Math.imul(p,H)|0,r=r+Math.imul(l,U)|0,t=(t+Math.imul(l,D)|0)+Math.imul(f,U)|0,W=W+Math.imul(f,D)|0,r=r+Math.imul(c,z)|0,t=(t+Math.imul(c,V)|0)+Math.imul(u,z)|0,W=W+Math.imul(u,V)|0,(q+(r+Math.imul(a,F)|0)|0)+((8191&(t=(t+Math.imul(a,j)|0)+Math.imul(h,F)|0))<<13)|0);q=((W+Math.imul(h,j)|0)+(t>>>13)|0)+(tt>>>26)|0,tt&=67108863,r=Math.imul(R,E),t=Math.imul(R,A)+Math.imul(s,E)|0,W=Math.imul(s,A),r=r+Math.imul(_,M)|0,t=(t+Math.imul(_,O)|0)+Math.imul(x,M)|0,W=W+Math.imul(x,O)|0,r=r+Math.imul(k,I)|0,t=(t+Math.imul(k,C)|0)+Math.imul(S,I)|0,W=W+Math.imul(S,C)|0,r=r+Math.imul(b,T)|0,t=(t+Math.imul(b,P)|0)+Math.imul(v,T)|0,W=W+Math.imul(v,P)|0,r=r+Math.imul(w,B)|0,t=(t+Math.imul(w,N)|0)+Math.imul(y,B)|0,W=W+Math.imul(y,N)|0,r=r+Math.imul(g,L)|0,t=(t+Math.imul(g,H)|0)+Math.imul(m,L)|0,W=W+Math.imul(m,H)|0,r=r+Math.imul(d,U)|0,t=(t+Math.imul(d,D)|0)+Math.imul(p,U)|0,W=W+Math.imul(p,D)|0,r=r+Math.imul(l,z)|0,t=(t+Math.imul(l,V)|0)+Math.imul(f,z)|0,W=W+Math.imul(f,V)|0,r=r+Math.imul(c,F)|0,t=(t+Math.imul(c,j)|0)+Math.imul(u,F)|0,W=W+Math.imul(u,j)|0,E=(q+(r+Math.imul(a,K)|0)|0)+((8191&(t=(t+Math.imul(a,n)|0)+Math.imul(h,K)|0))<<13)|0,q=((W+Math.imul(h,n)|0)+(t>>>13)|0)+(E>>>26)|0,E&=67108863,r=Math.imul(R,M),t=Math.imul(R,O)+Math.imul(s,M)|0,W=Math.imul(s,O),r=r+Math.imul(_,I)|0,t=(t+Math.imul(_,C)|0)+Math.imul(x,I)|0,W=W+Math.imul(x,C)|0,r=r+Math.imul(k,T)|0,t=(t+Math.imul(k,P)|0)+Math.imul(S,T)|0,W=W+Math.imul(S,P)|0,r=r+Math.imul(b,B)|0,t=(t+Math.imul(b,N)|0)+Math.imul(v,B)|0,W=W+Math.imul(v,N)|0,r=r+Math.imul(w,L)|0,t=(t+Math.imul(w,H)|0)+Math.imul(y,L)|0,W=W+Math.imul(y,H)|0,r=r+Math.imul(g,U)|0,t=(t+Math.imul(g,D)|0)+Math.imul(m,U)|0,W=W+Math.imul(m,D)|0,r=r+Math.imul(d,z)|0,t=(t+Math.imul(d,V)|0)+Math.imul(p,z)|0,W=W+Math.imul(p,V)|0,r=r+Math.imul(l,F)|0,t=(t+Math.imul(l,j)|0)+Math.imul(f,F)|0,W=W+Math.imul(f,j)|0,A=(q+(r+Math.imul(c,K)|0)|0)+((8191&(t=(t+Math.imul(c,n)|0)+Math.imul(u,K)|0))<<13)|0,q=((W+Math.imul(u,n)|0)+(t>>>13)|0)+(A>>>26)|0,A&=67108863,r=Math.imul(R,I),t=Math.imul(R,C)+Math.imul(s,I)|0,W=Math.imul(s,C),r=r+Math.imul(_,T)|0,t=(t+Math.imul(_,P)|0)+Math.imul(x,T)|0,W=W+Math.imul(x,P)|0,r=r+Math.imul(k,B)|0,t=(t+Math.imul(k,N)|0)+Math.imul(S,B)|0,W=W+Math.imul(S,N)|0,r=r+Math.imul(b,L)|0,t=(t+Math.imul(b,H)|0)+Math.imul(v,L)|0,W=W+Math.imul(v,H)|0,r=r+Math.imul(w,U)|0,t=(t+Math.imul(w,D)|0)+Math.imul(y,U)|0,W=W+Math.imul(y,D)|0,r=r+Math.imul(g,z)|0,t=(t+Math.imul(g,V)|0)+Math.imul(m,z)|0,W=W+Math.imul(m,V)|0,r=r+Math.imul(d,F)|0,t=(t+Math.imul(d,j)|0)+Math.imul(p,F)|0,W=W+Math.imul(p,j)|0,a=(q+(r+Math.imul(l,K)|0)|0)+((8191&(t=(t+Math.imul(l,n)|0)+Math.imul(f,K)|0))<<13)|0,q=((W+Math.imul(f,n)|0)+(t>>>13)|0)+(a>>>26)|0,a&=67108863,r=Math.imul(R,T),t=Math.imul(R,P)+Math.imul(s,T)|0,W=Math.imul(s,P),r=r+Math.imul(_,B)|0,t=(t+Math.imul(_,N)|0)+Math.imul(x,B)|0,W=W+Math.imul(x,N)|0,r=r+Math.imul(k,L)|0,t=(t+Math.imul(k,H)|0)+Math.imul(S,L)|0,W=W+Math.imul(S,H)|0,r=r+Math.imul(b,U)|0,t=(t+Math.imul(b,D)|0)+Math.imul(v,U)|0,W=W+Math.imul(v,D)|0,r=r+Math.imul(w,z)|0,t=(t+Math.imul(w,V)|0)+Math.imul(y,z)|0,W=W+Math.imul(y,V)|0,r=r+Math.imul(g,F)|0,t=(t+Math.imul(g,j)|0)+Math.imul(m,F)|0,W=W+Math.imul(m,j)|0,h=(q+(r+Math.imul(d,K)|0)|0)+((8191&(t=(t+Math.imul(d,n)|0)+Math.imul(p,K)|0))<<13)|0,q=((W+Math.imul(p,n)|0)+(t>>>13)|0)+(h>>>26)|0,h&=67108863,r=Math.imul(R,B),t=Math.imul(R,N)+Math.imul(s,B)|0,W=Math.imul(s,N),r=r+Math.imul(_,L)|0,t=(t+Math.imul(_,H)|0)+Math.imul(x,L)|0,W=W+Math.imul(x,H)|0,r=r+Math.imul(k,U)|0,t=(t+Math.imul(k,D)|0)+Math.imul(S,U)|0,W=W+Math.imul(S,D)|0,r=r+Math.imul(b,z)|0,t=(t+Math.imul(b,V)|0)+Math.imul(v,z)|0,W=W+Math.imul(v,V)|0,r=r+Math.imul(w,F)|0,t=(t+Math.imul(w,j)|0)+Math.imul(y,F)|0,W=W+Math.imul(y,j)|0,M=(q+(r+Math.imul(g,K)|0)|0)+((8191&(t=(t+Math.imul(g,n)|0)+Math.imul(m,K)|0))<<13)|0,q=((W+Math.imul(m,n)|0)+(t>>>13)|0)+(M>>>26)|0,M&=67108863,r=Math.imul(R,L),t=Math.imul(R,H)+Math.imul(s,L)|0,W=Math.imul(s,H),r=r+Math.imul(_,U)|0,t=(t+Math.imul(_,D)|0)+Math.imul(x,U)|0,W=W+Math.imul(x,D)|0,r=r+Math.imul(k,z)|0,t=(t+Math.imul(k,V)|0)+Math.imul(S,z)|0,W=W+Math.imul(S,V)|0,r=r+Math.imul(b,F)|0,t=(t+Math.imul(b,j)|0)+Math.imul(v,F)|0,W=W+Math.imul(v,j)|0,O=(q+(r+Math.imul(w,K)|0)|0)+((8191&(t=(t+Math.imul(w,n)|0)+Math.imul(y,K)|0))<<13)|0,q=((W+Math.imul(y,n)|0)+(t>>>13)|0)+(O>>>26)|0,O&=67108863,r=Math.imul(R,U),t=Math.imul(R,D)+Math.imul(s,U)|0,W=Math.imul(s,D),r=r+Math.imul(_,z)|0,t=(t+Math.imul(_,V)|0)+Math.imul(x,z)|0,W=W+Math.imul(x,V)|0,r=r+Math.imul(k,F)|0,t=(t+Math.imul(k,j)|0)+Math.imul(S,F)|0,W=W+Math.imul(S,j)|0,c=(q+(r+Math.imul(b,K)|0)|0)+((8191&(t=(t+Math.imul(b,n)|0)+Math.imul(v,K)|0))<<13)|0,q=((W+Math.imul(v,n)|0)+(t>>>13)|0)+(c>>>26)|0,c&=67108863,r=Math.imul(R,z),t=Math.imul(R,V)+Math.imul(s,z)|0,W=Math.imul(s,V),r=r+Math.imul(_,F)|0,t=(t+Math.imul(_,j)|0)+Math.imul(x,F)|0,W=W+Math.imul(x,j)|0,u=(q+(r+Math.imul(k,K)|0)|0)+((8191&(t=(t+Math.imul(k,n)|0)+Math.imul(S,K)|0))<<13)|0,q=((W+Math.imul(S,n)|0)+(t>>>13)|0)+(u>>>26)|0,u&=67108863,r=Math.imul(R,F),t=Math.imul(R,j)+Math.imul(s,F)|0,W=Math.imul(s,j),I=(q+(r+Math.imul(_,K)|0)|0)+((8191&(t=(t+Math.imul(_,n)|0)+Math.imul(x,K)|0))<<13)|0,q=((W+Math.imul(x,n)|0)+(t>>>13)|0)+(I>>>26)|0,I&=67108863,C=(q+Math.imul(R,K)|0)+((8191&(t=Math.imul(R,n)+Math.imul(s,K)|0))<<13)|0;return q=(Math.imul(s,n)+(t>>>13)|0)+(C>>>26)|0,C&=67108863,o[0]=e,o[1]=X,o[2]=Y,o[3]=G,o[4]=$,o[5]=J,o[6]=Z,o[7]=Q,o[8]=tt,o[9]=E,o[10]=A,o[11]=a,o[12]=h,o[13]=M,o[14]=O,o[15]=c,o[16]=u,o[17]=I,o[18]=C,0!=q&&(o[19]=q,i.length++),i};function g(t,e,i){return(new m).mulp(t,e,i)}function m(t,e){this.x=t,this.y=e}Math.imul||(p=d),n.prototype.mulTo=function(t,e){var i=this.length+t.length;return i=(10===this.length&&10===t.length?p:i<63?d:i<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,s=0,n=0;n<i.length-1;n++){for(var o=s,a=(s=0,67108863&r),h=Math.min(n,e.length-1),c=Math.max(0,n-t.length+1);c<=h;c++){var u,l=(0|t.words[n-c])*(0|e.words[c]);a=67108863&(u=(67108863&l)+a|0);s+=(o=(o=o+(l/67108864|0)|0)+(u>>>26)|0)>>>26,o&=67108863}i.words[n]=a,r=o,o=s}return 0!==r?i.words[n]=r:i.length--,i.strip()}:g)(this,t,e)},m.prototype.makeRBT=function(t){for(var e=new Array(t),i=n.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},m.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,s=0;s<e;s++)r|=(1&t)<<e-s-1,t>>=1;return r},m.prototype.permute=function(t,e,i,r,s,n){for(var o=0;o<n;o++)r[o]=e[t[o]],s[o]=i[t[o]]},m.prototype.transform=function(t,e,i,r,s,n){this.permute(n,t,e,i,r,s);for(var o=1;o<s;o<<=1)for(var a=o<<1,h=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),u=0;u<s;u+=a)for(var l=h,f=c,d=0;d<o;d++){var p=i[u+d],g=r[u+d],m=i[u+d+o],w=l*m-f*(y=r[u+d+o]),y=l*y+f*m;i[u+d]=p+(m=w),r[u+d]=g+y,i[u+d+o]=p-m,r[u+d+o]=g-y,d!==a&&(w=h*l-c*f,f=h*f+c*l,l=w)}},m.prototype.guessLen13b=function(t,e){e=1&(r=1|Math.max(e,t));for(var i=0,r=r/2|0;r;r>>>=1)i++;return 1<<i+1+e},m.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var s=t[r];t[r]=t[i-r-1],t[i-r-1]=s,s=e[r],e[r]=-e[i-r-1],e[i-r-1]=-s}},m.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var s=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&s,i=s<67108864?0:s/67108864|0}return t},m.prototype.convert13b=function(t,e,i,s){for(var n=0,o=0;o<e;o++)n+=0|t[o],i[2*o]=8191&n,i[2*o+1]=8191&(n>>>=13),n>>>=13;for(o=2*e;o<s;++o)i[o]=0;r(0===n),r(0==(-8192&n))},m.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},m.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),s=this.makeRBT(r),n=this.stub(r),o=new Array(r),a=new Array(r),h=new Array(r),c=new Array(r),u=new Array(r),l=new Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,c,r),this.transform(o,n,a,h,r,s),this.transform(c,n,u,l,r,s);for(var d=0;d<r;d++){var p=a[d]*u[d]-h[d]*l[d];h[d]=a[d]*l[d]+h[d]*u[d],a[d]=p}return this.conjugate(a,h,r),this.transform(a,h,f,n,r,s),this.conjugate(f,n,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},n.prototype.mul=function(t){var e=new n(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},n.prototype.mulf=function(t){var e=new n(null);return e.words=new Array(this.length+t.length),g(this,t,e)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,i=0;i<this.length;i++){var s=(0|this.words[i])*t,n=(67108863&s)+(67108863&e);e=(e>>=26)+(s/67108864|0)+(n>>>26);this.words[i]=67108863&n}return 0!==e&&(this.words[i]=e,this.length++),this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i%26;e[i]=(t.words[i/26|0]&1<<r)>>>r}return e}(t);if(0===e.length)return new n(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var s=i.sqr();r<e.length;r++,s=s.sqr())0!==e[r]&&(i=i.mul(s));return i},n.prototype.iushln=function(t){r("number"==typeof t&&0<=t);var e=t%26,i=(t-e)/26,s=67108863>>>26-e<<26-e;if(0!=e){for(var n=0,o=0;o<this.length;o++){var a=this.words[o]&s,h=(0|this.words[o])-a<<e;this.words[o]=h|n,n=a>>>26-e}n&&(this.words[o]=n,this.length++)}if(0!=i){for(o=this.length-1;0<=o;o--)this.words[o+i]=this.words[o];for(o=0;o<i;o++)this.words[o]=0;this.length+=i}return this.strip()},n.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},n.prototype.iushrn=function(t,e,i){r("number"==typeof t&&0<=t),s=e?(e-e%26)/26:0;var s,n=t%26,o=Math.min((t-n)/26,this.length),a=67108863^67108863>>>n<<n,h=i;if(s-=o,s=Math.max(0,s),h){for(var c=0;c<o;c++)h.words[c]=this.words[c];h.length=o}if(0!==o)if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;0<=c&&(0!==u||s<=c);c--){var l=0|this.words[c];this.words[c]=u<<26-n|l>>>n,u=l&a}return h&&0!==u&&(h.words[h.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(t,e,i){return r(0===this.negative),this.iushrn(t,e,i)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){r("number"==typeof t&&0<=t);var e=t%26;t=(t-e)/26;return!(this.length<=t||!(this.words[t]&1<<e))},n.prototype.imaskn=function(t){r("number"==typeof t&&0<=t);var e=t%26;t=(t-e)/26;return r(0===this.negative,"imaskn works only with positive numbers"),this.length<=t?this:(0!=e&&t++,this.length=Math.min(t,this.length),0!=e&&(this.words[this.length-1]&=67108863^67108863>>>e<<e),this.strip())},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&67108864<=this.words[e];e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},n.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,--this.words[e+1];return this.strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,e,i){for(var s=t.length+i,n=(this._expand(s),0),o=0;o<t.length;o++){var a=(0|this.words[o+i])+n,h=(0|t.words[o])*e;n=((a-=67108863&h)>>26)-(h/67108864|0);this.words[o+i]=67108863&a}for(;o<this.length-i;o++)n=(a=(0|this.words[o+i])+n)>>26,this.words[o+i]=67108863&a;if(0!==n){for(r(-1===n),o=n=0;o<this.length;o++)n=(a=-(0|this.words[o])+n)>>26,this.words[o]=67108863&a;this.negative=1}return this.strip()},n.prototype._wordDiv=function(t,e){this.length,t.length;var i,r=this.clone(),s=t,o=0|s.words[s.length-1],a=(0!=(t=26-this._countBits(o))&&(s=s.ushln(t),r.iushln(t),o=0|s.words[s.length-1]),r.length-s.length);if("mod"!==e){(i=new n(null)).length=1+a,i.words=new Array(i.length);for(var h=0;h<i.length;h++)i.words[h]=0}var c=r.clone()._ishlnsubmul(s,1,a);0===c.negative&&(r=c,i)&&(i.words[a]=1);for(var u=a-1;0<=u;u--){var l=67108864*(0|r.words[s.length+u])+(0|r.words[s.length+u-1]);l=Math.min(l/o|0,67108863);for(r._ishlnsubmul(s,l,u);0!==r.negative;)l--,r.negative=0,r._ishlnsubmul(s,1,u),r.isZero()||(r.negative^=1);i&&(i.words[u]=l)}return i&&i.strip(),r.strip(),"div"!==e&&0!=t&&r.iushrn(t),{div:i||null,mod:r}},n.prototype.divmod=function(t,e,i){var s,o,a;return r(!t.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(s=a.div.neg()),"div"!==e&&(o=a.mod.neg(),i)&&0!==o.negative&&o.iadd(t),{div:s,mod:o}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),{div:s="mod"!==e?a.div.neg():s,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(o=a.mod.neg(),i)&&0!==o.negative&&o.isub(t),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new n(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new n(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modn(t.words[0]))}:this._wordDiv(t,e)},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var e,i,r=this.divmod(t);return r.mod.isZero()||(i=0!==r.div.negative?r.mod.isub(t):r.mod,e=t.ushrn(1),t=t.andln(1),(i=i.cmp(e))<0)||1===t&&0===i?r.div:0!==r.div.negative?r.div.isubn(1):r.div.iaddn(1)},n.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,i=0,s=this.length-1;0<=s;s--)i=(e*i+(0|this.words[s]))%t;return i},n.prototype.idivn=function(t){r(t<=67108863);for(var e=0,i=this.length-1;0<=i;i--){var s=(0|this.words[i])+67108864*e;this.words[i]=s/t|0,e=s%t}return this.strip()},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());for(var e=this,i=t.clone(),s=(e=0!==e.negative?e.umod(t):e.clone(),new n(1)),o=new n(0),a=new n(0),h=new n(1),c=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++c;for(var u=i.clone(),l=e.clone();!e.isZero();){for(var f=0,d=1;0==(e.words[0]&d)&&f<26;++f,d<<=1);if(0<f)for(e.iushrn(f);0<f--;)(s.isOdd()||o.isOdd())&&(s.iadd(u),o.isub(l)),s.iushrn(1),o.iushrn(1);for(var p=0,g=1;0==(i.words[0]&g)&&p<26;++p,g<<=1);if(0<p)for(i.iushrn(p);0<p--;)(a.isOdd()||h.isOdd())&&(a.iadd(u),h.isub(l)),a.iushrn(1),h.iushrn(1);0<=e.cmp(i)?(e.isub(i),s.isub(a),o.isub(h)):(i.isub(e),a.isub(s),h.isub(o))}return{a:a,b:h,gcd:i.iushln(c)}},n.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());for(var e,i=this,s=t.clone(),o=(i=0!==i.negative?i.umod(t):i.clone(),new n(1)),a=new n(0),h=s.clone();0<i.cmpn(1)&&0<s.cmpn(1);){for(var c=0,u=1;0==(i.words[0]&u)&&c<26;++c,u<<=1);if(0<c)for(i.iushrn(c);0<c--;)o.isOdd()&&o.iadd(h),o.iushrn(1);for(var l=0,f=1;0==(s.words[0]&f)&&l<26;++l,f<<=1);if(0<l)for(s.iushrn(l);0<l--;)a.isOdd()&&a.iadd(h),a.iushrn(1);0<=i.cmp(s)?(i.isub(s),o.isub(a)):(s.isub(i),a.isub(o))}return(e=0===i.cmpn(1)?o:a).cmpn(0)<0&&e.iadd(t),e},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0;for(var r=i.negative=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var s=e.cmp(i);if(s<0){var n=e;e=i,i=n}else if(0===s||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return 0==(1&this.words[0])},n.prototype.isOdd=function(){return 1==(1&this.words[0])},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){r("number"==typeof t);t=(t-(e=t%26))/26;var e=1<<e;if(this.length<=t)this._expand(1+t),this.words[t]|=e;else{for(var i=e,s=t;0!==i&&s<this.length;s++){var n=0|this.words[s];i=(n+=i)>>>26;n&=67108863,this.words[s]=n}0!==i&&(this.words[s]=i,this.length++)}return this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(t){var e=t<0;return 0===this.negative||e?0===this.negative&&e?1:(this.strip(),e=1<this.length?1:(r((t=e?-t:t)<=67108863,"Number is too big"),(e=0|this.words[0])===t?0:e<t?-1:1),0!==this.negative?0|-e:e):-1},n.prototype.cmp=function(t){return 0!==this.negative&&0===t.negative?-1:0===this.negative&&0!==t.negative?1:(t=this.ucmp(t),0!==this.negative?0|-t:t)},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;0<=i;i--){var r=0|this.words[i],s=0|t.words[i];if(r!=s){r<s?e=-1:s<r&&(e=1);break}}return e},n.prototype.gtn=function(t){return 1===this.cmpn(t)},n.prototype.gt=function(t){return 1===this.cmp(t)},n.prototype.gten=function(t){return 0<=this.cmpn(t)},n.prototype.gte=function(t){return 0<=this.cmp(t)},n.prototype.ltn=function(t){return-1===this.cmpn(t)},n.prototype.lt=function(t){return-1===this.cmp(t)},n.prototype.lten=function(t){return this.cmpn(t)<=0},n.prototype.lte=function(t){return this.cmp(t)<=0},n.prototype.eqn=function(t){return 0===this.cmpn(t)},n.prototype.eq=function(t){return 0===this.cmp(t)},n.red=function(t){return new _(t)},n.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function y(t,e){this.name=t,this.p=new n(e,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function v(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function _(t){var e;"string"==typeof t?(e=n._prime(t),this.m=e.p,this.prime=e):(r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null)}function x(t){_.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var t=new n(null);return t.words=new Array(Math.ceil(this.n/13)),t},y.prototype.ireduce=function(t){for(var e,i=t;this.split(i,this.tmp),(e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength())>this.n;);return 0===(t=e<this.n?-1:i.ucmp(this.p))?(i.words[0]=0,i.length=1):0<t?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},y.prototype.split=function(t,e){t.iushrn(this.n,0,e)},y.prototype.imulK=function(t){return t.imul(this.k)},s(b,y),b.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)t.words[0]=0,t.length=1;else{var s=t.words[9];for(e.words[e.length++]=4194303&s,r=10;r<t.length;r++){var n=0|t.words[r];t.words[r-10]=(4194303&n)<<4|s>>>22,s=n}0==(t.words[r-10]=s>>>=22)&&10<t.length?t.length-=10:t.length-=9}},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1])&&t.length--,t},s(v,y),s(k,y),s(S,y),S.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,s=67108863&r;r>>>=26,t.words[i]=s,e=r}return 0!==e&&(t.words[t.length++]=e),t},n._prime=function(t){if(w[t])return w[t];var e;if("k256"===t)e=new b;else if("p224"===t)e=new v;else if("p192"===t)e=new k;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new S}return w[t]=e},_.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},_.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},_.prototype.imod=function(t){return(this.prime?this.prime.ireduce(t):t.umod(this.m))._forceRed(this)},_.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},_.prototype.add=function(t,e){return this._verify2(t,e),0<=(t=t.add(e)).cmp(this.m)&&t.isub(this.m),t._forceRed(this)},_.prototype.iadd=function(t,e){return this._verify2(t,e),0<=(t=t.iadd(e)).cmp(this.m)&&t.isub(this.m),t},_.prototype.sub=function(t,e){return this._verify2(t,e),(t=t.sub(e)).cmpn(0)<0&&t.iadd(this.m),t._forceRed(this)},_.prototype.isub=function(t,e){return this._verify2(t,e),(t=t.isub(e)).cmpn(0)<0&&t.iadd(this.m),t},_.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},_.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},_.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},_.prototype.isqr=function(t){return this.imul(t,t.clone())},_.prototype.sqr=function(t){return this.mul(t,t)},_.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e)return e=this.m.add(new n(1)).iushrn(2),this.pow(t,e);for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());for(var o=new n(1).toRed(this),a=o.redNeg(),h=this.m.subn(1).iushrn(1),c=new n(2*(c=this.m.bitLength())*c).toRed(this);0!==this.pow(c,h).cmp(a);)c.redIAdd(a);for(var u=this.pow(c,i),l=this.pow(t,i.addn(1).iushrn(1)),f=this.pow(t,i),d=s;0!==f.cmp(o);){for(var p=f,g=0;0!==p.cmp(o);g++)p=p.redSqr();r(g<d);var m=this.pow(u,new n(1).iushln(d-g-1));l=l.redMul(m),u=m.redSqr(),f=f.redMul(u),d=g}return l},_.prototype.invm=function(t){return 0!==(t=t._invmp(this.m)).negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},_.prototype.pow=function(t,e){if(e.isZero())return new n(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new n(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var s=i[0],o=0,a=0,h=e.bitLength()%26;for(0===h&&(h=26),r=e.length-1;0<=r;r--){for(var c=e.words[r],u=h-1;0<=u;u--){var l=c>>u&1;s!==i[0]&&(s=this.sqr(s)),0==l&&0===o?a=0:(o=o<<1|l,(4==++a||0===r&&0===u)&&(s=this.mul(s,i[o]),o=a=0))}h=26}return s},_.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},_.prototype.convertFrom=function(t){return(t=t.clone()).red=null,t},n.mont=function(t){return new x(t)},s(x,_),x.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},x.prototype.convertFrom=function(t){return(t=this.imod(t.mul(this.rinv))).red=null,t},x.prototype.imul=function(t,e){return t.isZero()||e.isZero()?(t.words[0]=0,t.length=1,t):(e=(t=t.imul(e)).maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),0<=(e=t=t.isub(e).iushrn(this.shift)).cmp(this.m)?e=t.isub(this.m):t.cmpn(0)<0&&(e=t.iadd(this.m)),e._forceRed(this))},x.prototype.mul=function(t,e){return(t.isZero()||e.isZero()?new n(0):(e=(t=t.mul(e)).maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),0<=(e=t=t.isub(e).iushrn(this.shift)).cmp(this.m)?e=t.isub(this.m):t.cmpn(0)<0&&(e=t.iadd(this.m)),e))._forceRed(this)},x.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,i(98)(t))},function(t,e,i){i(58),i(25),i(19),t.exports=class{constructor(t){this.options=t}async insert(){}async erase(){}async confirm(){}async unconfirm(){}async spent(){}async verify(){return!0}}},function(t,e,i){"use strict";
/*!
 * coinview.js - coin viewpoint object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */const r=i(315),s=i(230),n=i(135);t.exports=class t{constructor(){this.map=new Map,this.undo=new s}clone(){var e,i,r=new t;for([e,i]of this.map)r.map.set(e,i.clone());return r.undo=s.fromRaw(this.undo.toRaw()),r}get(t){return this.map.get(t)}has(t){return this.map.has(t)}add(t,e){return this.map.set(t,e),e}ensure(t){return this.map.get(t)||this.add(t,new r)}remove(t){var e=this.map.get(t);return e?(this.map.delete(t),e):null}addTX(t,e,i){var s=t.hash("hex");t=r.fromTX(t,e,i);return this.add(s,t)}removeTX(t,e,i){var s=t.hash("hex");for(const s of(t=r.fromTX(t,e,i)).outputs.values())s.spent=!0;return this.add(s,t)}addEntry(t,e){var{hash:t,index:i}=t;return this.ensure(t).add(i,e)}addIndex(t,e,i,r){var s=t.hash("hex");return this.ensure(s).add(e,n.fromTX(t,e,i,r))}addCoin(t){return this.ensure(t.hash).addCoin(t)}addOutput(t,e){var{hash:t,index:i}=t;return this.ensure(t).addOutput(i,e)}spendEntry(t){var{hash:t,index:e}=t;return(t=(t=this.get(t))&&t.spend(e))?(this.undo.push(t),t):null}removeEntry(t){var{hash:t,index:e}=t;return(t=this.get(t))?t.remove(e):null}hasEntry(t){var{hash:t,index:e}=t;return!!(t=this.get(t))&&t.has(e)}getEntry(t){var{hash:t,index:e}=t;return(t=this.get(t))?t.get(e):null}isUnspent(t){var{hash:t,index:e}=t;return!!(t=this.get(t))&&t.isUnspent(e)}getCoin(t){var e=this.get(t.hash);return e?e.getCoin(t):null}getOutput(t){var{hash:t,index:e}=t;return(t=this.get(t))?t.getOutput(e):null}getHeight(t){return(t=this.getEntry(t))?t.height:-1}isCoinbase(t){return!!(t=this.getEntry(t))&&t.coinbase}hasEntryFor(t){return this.hasEntry(t.prevout)}getEntryFor(t){return this.getEntry(t.prevout)}isUnspentFor(t){return this.isUnspent(t.prevout)}getCoinFor(t){return this.getCoin(t.prevout)}getOutputFor(t){return this.getOutput(t.prevout)}getHeightFor(t){return this.getHeight(t.prevout)}isCoinbaseFor(t){return this.isCoinbase(t.prevout)}async readCoin(t,e){var i=this.getEntry(e);return i||((i=await t.readCoin(e))?this.addEntry(e,i):null)}async readInputs(t,e){let i=!0;for(var{prevout:r}of e.inputs)await this.readCoin(t,r)||(i=!1);return i}async spendInputs(t,e){let i=0;for(;i<e.inputs.length;){for(var r=Math.min(i+4,e.inputs.length),s=[];i<r;i++){var n=e.inputs[i].prevout;s.push(this.readCoin(t,n))}for(const t of await Promise.all(s)){if(!t||t.spent)return!1;t.spent=!0,this.undo.push(t)}}return!0}getSize(t){let e=0;for(var{prevout:i}of(e+=t.inputs.length,t.inputs))(i=this.getEntry(i))&&(e+=i.getSize());return e}toWriter(t,e){for(var{prevout:i}of e.inputs)(i=this.getEntry(i))?(t.writeU8(1),i.toWriter(t)):t.writeU8(0);return t}fromReader(t,e){for(var{prevout:i}of e.inputs){var r;0!==t.readU8()&&(r=n.fromReader(t),this.addEntry(i,r))}return this}static fromReader(e,i){return(new t).fromReader(e,i)}}},function(t,e,i){"use strict";(function(e){
/*!
 * invitem.js - inv item object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(2);i(20);const s=i(6),n=i(3);class o{constructor(t,e){this.type=t,this.hash=e}getSize(){return 36}formatInsight(){return{type:this.type,hash:{type:"Buffer",data:this.toRaw()}}}toWriter(t){return t.writeU32(this.type),t.writeHash(this.hash),t}toRaw(){return this.toWriter(new s(36)).render()}fromReader(t){return this.type=t.readU32(),this.hash=t.readHash("hex"),this}fromRaw(t){return this.fromReader(new r(t))}static fromReader(t){return(new o).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new o).fromRaw(t)}isBlock(){switch(this.type){case o.types.BLOCK:case o.types.WITNESS_BLOCK:case o.types.FILTERED_BLOCK:case o.types.WITNESS_FILTERED_BLOCK:case o.types.CMPCT_BLOCK:return!0;default:return!1}}isTX(){switch(this.type){case o.types.TX:case o.types.WITNESS_TX:return!0;default:return!1}}hasWitness(){return 0!=(this.type&o.WITNESS_FLAG)}rhash(){return n.revHex(this.hash)}}o.types={ERROR:0,TX:1,BLOCK:2,FILTERED_BLOCK:3,WITNESS_TX:1|1<<30,WITNESS_BLOCK:2|1<<30,WITNESS_FILTERED_BLOCK:3|1<<30,CMPCT_BLOCK:4},o.typesByVal=n.reverse(o.types),o.WITNESS_FLAG=1<<30,t.exports=o}).call(this,i(0).Buffer)},function(t,e,i){"use strict";e.unsupported=!0},function(t,e,i){var r=i(10).Buffer,s=i(442).Transform,n=i(44).StringDecoder;function o(t){s.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}i(5)(o,s),o.prototype.update=function(t,e,i){return"string"==typeof t&&(t=r.from(t,e)),e=this._update(t),this.hashMode?this:i?this._toString(e,i):e},o.prototype.setAutoPadding=function(){},o.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},o.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},o.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},o.prototype._transform=function(t,e,i){var r;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(t){r=t}finally{i(r)}},o.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(t){e=t}t(e)},o.prototype._finalOrDigest=function(t){var e=this.__final()||r.alloc(0);return t?this._toString(e,t,!0):e},o.prototype._toString=function(t,e,i){if(this._decoder||(this._decoder=new n(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");return e=this._decoder.write(t),i&&(e+=this._decoder.end()),e},t.exports=o},function(t,e,i){"use strict";(function(e){
/*!
 * mtx.js - mutable transaction object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=i(3),n=i(16),o=i(19),a=i(100),h=i(25),c=i(43),u=i(41),l=i(47);i(13);const f=i(4),d=i(9);i(31);const p=i(114),g=i(303);i(214),i(32);const m=i(7).ContractType,w=i(42);class y extends o{constructor(t){super(),this.mutable=!0,this.changeIndex=-1,this.view=new l,t&&this.fromOptions(t)}fromOptions(t){if(null!=t.version&&(r(s.isU32(t.version),"Version must a be uint32."),this.version=t.version),t.inputs){r(Array.isArray(t.inputs),"Inputs must be an array.");for(const e of t.inputs)this.addInput(e)}if(t.outputs){r(Array.isArray(t.outputs),"Outputs must be an array.");for(const e of t.outputs)this.addOutput(e)}return null!=t.locktime&&(r(s.isU32(t.locktime),"Locktime must be a uint32."),this.locktime=t.locktime),null!=t.changeIndex&&(-1!==t.changeIndex?(r(s.isU32(t.changeIndex),"Change index must be a uint32."),this.changeIndex=t.changeIndex):this.changeIndex=-1),this}static fromOptions(t){return(new y).fromOptions(t)}clone(){var t=new y;return t.inject(this),t.changeIndex=this.changeIndex,t.view=this.view.clone(),t}addInput(t){return t=a.fromOptions(t),this.inputs.push(t),t}addOutpoint(t){return t=u.fromOptions(t),t=a.fromOutpoint(t),this.inputs.push(t),t}addCoin(t){r(t instanceof c,"Cannot add non-coin.");var e,i=a.fromCoin(t);return(e=((e=(this.inputs.push(i),this.view.addCoin(t),t.getLocktime()))>this.locktime&&this.setLocktime(e),t.getSequence()))&d.SEQUENCE_DISABLE_FLAG||(t=e&d.SEQUENCE_TYPE_FLAG,this.setSequence(this.inputs.length-1,e,t)),i}addInputFromTx(t,e,i,s){r(t instanceof o,"Cannot add non-transaction."),null==i&&(i=-1),null==s&&(s=0);var n=a.fromTX(t,e);return this.inputs.push(n),this.view.addIndex(t,e,i,s),n}addOutput(t,e){let i;return i=null!=e?(r(s.isU64(e),"Value must be a uint64.$3"),h.fromScript(t,e)):h.fromOptions(t),this.outputs.push(i),i}propCreate(t,e){let i=null;if(e.gold)return r(s.isU64(e.gold),"Value must be a uint64.$4"),i=h.fromScript(t,e.gold,{oper:e.oper,pid:e.pid,cid:e.cid,oid:e.oid}),this.outputs.push(i),i;throw new Error("invalid value param.")}propExchange(t,e,i){var r=t.outputs[e].value,s=t.outputs[e].getReturnData();if(!s||s.oper!=m.propExchange&&s.oper!=m.propCreate)throw new Error("not a valid exchange transaction.");return t=this.addInputFromTx(t,e),e=h.fromScript(i,r,{oper:m.propExchange,pid:s.pid,cid:s.cid,oid:s.oid,prev:{hash:t.prevout.hash,index:t.prevout.index}}),this.outputs.push(e),this}cpRegister(t,e,i){let n=null;if(null==e)throw new Error("invalid value param.");return r(s.isU64(e),"Value must be a uint64.$5"),n=h.fromScript(t,e,i),this.outputs.push(n),n}static cpChange(t,e){var{cid:i,newName:r,addr:s}=e,n=t.outputs[0].value,o=w.parseContract(t);if(!o||i!=o.cid||o.oper!=m.cpRegister&&o.oper!=m.cpChange)throw new Error("not a valid cp transaction.");return t=(i=new y).addInputFromTx(t,0),e.ip=e.ip||o.ip,e.oper=m.cpChange,e.grate||0===e.grate?e.grate=e.grate:e.grate=o.grate,e.cls=e.cls||o.cls,o={oper:m.cpChange,cid:o.cid,name:r,ip:e.ip,grate:e.grate,cls:e.cls,prev:{hash:t.prevout.hash,index:t.prevout.index}},r=h.fromScript(s,n,o),i.outputs.push(r),i}propSale(t,e){this.addInputFromTx(t,e)}check(t){return super.check(this.view,t)}async checkAsync(t,e){return super.checkAsync(this.view,t,e)}verify(t){try{this.check(t)}catch(t){if("ScriptError"===t.type)return!1;throw t}return!0}async verifyAsync(t,e){try{await this.checkAsync(t,e)}catch(t){if("ScriptError"===t.type)return!1;throw t}return!0}getFee(){return super.getFee(this.view)}getInputValue(){return super.getInputValue(this.view)}getInputAddresses(){return super.getInputAddresses(this.view)}getAddresses(){return super.getAddresses(this.view)}getInputHashes(t){return super.getInputHashes(this.view,t)}getHashes(t){return super.getHashes(this.view,t)}hasCoins(){return super.hasCoins(this.view)}getSigops(t){return super.getSigops(this.view,t)}getSigopsCost(t){return super.getSigopsCost(this.view,t)}getSigopsSize(){return super.getSigopsSize(this.getSigopsCost())}verifyInputs(t){var[t]=this.checkInputs(t);return-1!==t}checkInputs(t){return super.checkInputs(this.view,t)}scriptInput(t,e,i){if(t=this.inputs[t],r(t,"Input does not exist."),r(e,"No coin passed."),0===t.script.raw.length&&0===t.witness.items.length){var s=(e=e.script).getScripthash();if(s){if(!(s=i.getRedeem(s)))return!1;if(s.isProgram())return(a=s.getWitnessScripthash())?!!(a=i.getRedeem(a))&&!!(o=this.scriptVector(a,i))&&(o.push(a.toRaw()),t.witness.fromStack(o),t.script.fromItems([s.toRaw()]),!0):!!(a=s.getWitnessPubkeyhash())&&(o=n.createScript(a),!!(a=this.scriptVector(o,i)))&&(t.witness.fromStack(a),t.script.fromItems([s.toRaw()]),!0);const e=this.scriptVector(s,i);return!!e&&(e.push(s.toRaw()),t.script.fromStack(e),!0)}if(e.isProgram()){var o=e.getWitnessScripthash();if(o){var a=i.getRedeem(o);if(!a)return!1;const e=this.scriptVector(a,i);return!!e&&(e.push(a.toRaw()),t.witness.fromStack(e),!0)}if(s=e.getWitnessPubkeyhash()){o=n.createScript(s);const e=this.scriptVector(o,i);return!!e&&(t.witness.fromStack(e),!0)}return!1}const r=this.scriptVector(e,i);if(!r)return!1;t.script.fromStack(r,!1)}return!0}scriptVector(t,e){var i;if(i=t.getPubkey())return i.equals(e.publicKey)?((i=new p).pushInt(0),i):null;if((i=t.getMultiPubkeyhash())&&Array.isArray(i)){for(var r of i)if(r.equals(e.getKeyHash()))return(r=new p).pushInt(0),r.pushData(e.publicKey),r;return null}if(i=t.getPubkeyhash())return i.equals(e.getKeyHash())?((i=new p).pushInt(0),i.pushData(e.publicKey),i):null;var[,s]=t.getMultisig();if(-1===s)return null;if(-1===t.indexOf(e.publicKey))return null;var n=new p;n.pushInt(0);for(let t=0;t<s;t++)n.pushInt(0);return n}$signVector(t,e,i,n){var o=t.getPubkey();if(o){if(!n.publicKey.equals(o))return null;if(0===e.length)throw new Error("Input has not been templated.");return 0<e.get(0).length||e.set(0,i),e}if((o=t.getMultiPubkeyhash())&&Array.isArray(o)){for(var a of o)if(n.getKeyHash().equals(a)){if(0===e.length)throw new Error("Input has not been templated.");return 0<e.get(0).length||e.set(0,i),e}return null}if(o=t.getPubkeyhash()){if(!n.getKeyHash().equals(o))return null;if(e.length<2)throw new Error("Input has not been templated.");if(0===e.get(1).length)throw new Error("Input has not been templated.");return 0<e.get(0).length||e.set(0,i),e}var[h,c]=t.getMultisig();if(-1===h)return null;{if(e.length<2)throw new Error("Input has not been templated.");if(0!==e.get(0).length)throw new Error("Input has not been templated.");if(e.length-1>c)throw new Error("Input has not been templated.");let a=0;for(let t=1;t<e.length;t++)0<e.get(t).length&&a++;if(a!==h||e.length-1!==h){for(;e.length-1<c;)e.pushInt(0);var u=[];for(const e of t.code)e.data&&u.push(e.data);if(-1===(o=s.indexOf(u,n.publicKey)))return null;if(++o<e.length&&a<h&&0===e.get(o).length&&(e.set(o,i),a++),a>=h){for(let t=e.length-1;1<=t;t--)0===e.get(t).length&&e.remove(t);for(;a>h;)e.pop(),a--;r(a===h),r(e.length-1===h)}}return e}}signInput(t,e,i,s){var o=this.inputs[t],a=i.privateKey,h=(r(o,"Input does not exist."),r(e,"No coin passed."),e.value);let c=e.script,u=o.script,l=0,f=!1;if(c.isScripthash()){if(!(c=o.script.getRedeem()))throw new Error("Input has not been templated.");f=!0}if(c.isWitnessScripthash()){if(!(c=o.witness.getRedeem()))throw new Error("Input has not been templated.");u=o.witness,f=!0,l=1}else(e=c.getWitnessPubkeyhash())&&(c=n.createScript(e),u=o.witness,f=!1,l=1);if(e=this.signature(t,c,h,a,s,l),f){const t=u.toStack(),r=t.pop(),s=this.$signVector(c,t,e,i);return!!s&&(s.push(r),u.fromStack(s),!0)}const d=u.toStack(),p=this.$signVector(c,d,e,i);return!!p&&(u.fromStack(p,!0),!0)}getMultisig(t){var e={m:-1,n:-1,c:0};for(let t=0;t<this.inputs.length;t++){var i=this.inputs[t].prevout;if(i=this.view.getOutput(i)){var r=this.inputs[t];let o=i.script,a=r.script,h=!1;if(o.isScripthash()){if(!(o=r.script.getRedeem()))continue;h=!0}if(o.isWitnessScripthash()){if(!(o=r.witness.getRedeem()))continue;a=r.witness,h=!0}else(i=o.getWitnessPubkeyhash())&&(o=n.createScript(i),a=r.witness,h=!1);var s=a.toStack();if(h&&s.pop(),!o.isPubkey()&&!o.isPubkeyhash()){var[i,r]=o.getMultisig();if(e.m=i,e.n=r,-1!==i)for(let t=1;t<s.length;t++)0<s.get(t).length&&e.c++;break}}}return e}isSigned(){for(let e=0;e<this.inputs.length;e++){var t=this.inputs[e].prevout;if(!(t=this.view.getOutput(t)))return!1;if(!this.$isInputSigned(e,t))return!1}return!0}$isInputSigned(t,e){t=this.inputs[t],r(t,"Input does not exist."),r(e,"No coin passed.");let i=e.script,s=t.script,o=!1;if(i.isScripthash()){if(!(i=t.script.getRedeem()))return!1;o=!0}if(i.isWitnessScripthash()){if(!(i=t.witness.getRedeem()))return!1;s=t.witness,o=!0}else(e=i.getWitnessPubkeyhash())&&(i=n.createScript(e),s=t.witness,o=!1);return e=s.toStack(),o&&e.pop(),this.isVectorSigned(i,e)}isVectorSigned(t,e){if(t.isPubkey())return 1===e.length&&0!==e.get(0).length;if(t.isPubkeyhash())return 2===e.length&&0!==e.get(0).length&&0!==e.get(1).length;var[t]=t.getMultisig();if(-1===t)return!1;if(e.length-1!==t)return!1;for(let t=1;t<e.length;t++)if(0===e.get(t).length)return!1;return!0}sign(t,e,i,s){if(s=s||[],Array.isArray(t)){let r=0;for(const n of t)r+=this.sign(n,e,i,s);return r}e&&r(t.privateKey,"No private key available.");let n=0;for(let r=0;r<this.inputs.length;r++){var o;-1!=s.indexOf(r)?n++:(o=this.inputs[r].prevout,(o=this.view.getOutput(o))&&t.ownOutput(o)&&this.scriptInput(r,o,t)&&(!e||this.signInput(r,o,t,i))&&n++)}return n}async signAsync(t,e,i,r){return this.sign(t,!0,e,r=r||[])}async estimateSize(t){var e,i=d.WITNESS_SCALE_FACTOR;let r=0;r=(r=(r=(r+=4)+f.sizeVarint(this.inputs.length))+40*this.inputs.length)+f.sizeVarint(this.outputs.length);for(const t of this.outputs)r+=t.getSize();for({prevout:e}of(r+=4,this.inputs)){var s=this.view.getOutput(e);if(s)if((s=s.script).isPubkey())r=r+1+74;else if(s.isPubkeyhash())r=(r+=1)+74+34;else{var[n]=s.getMultisig();if(-1!==n){var o=0;++o,r+=o=(o+=74*n)+f.sizeVarint(o)}else if(s.isWitnessPubkeyhash()){n=0;var n=74+ ++n+34;r+=n=(109+i-1)/i|0}else{if(t&&-1!==(o=await t(s))){r+=o;continue}s.isScripthash()?r=r+1+149:s.isWitnessScripthash()?(n=0,++n,n+=149,r+=n=(150+i-1)/i|0):r+=110}}else r+=110}return r}subtractFee(t,e){r("number"==typeof t);let i=0;for(let t=0;t<this.outputs.length;t++){var s=this.outputs[t];e&&!e.has(t)||s.script.isUnspendable()||(i+=1)}if(0!==i){var n=t%i,o=(t-n)/i;for(let t=0;t<this.outputs.length;t++){var a=this.outputs[t];if((!e||e.has(t))&&!a.script.isUnspendable()){if(a.value<o+a.getDustThreshold())throw new Error("Could not subtract fee.");a.value-=o}}for(let t=0;t<this.outputs.length;t++){var h=this.outputs[t];if((!e||e.has(t))&&!h.script.isUnspendable()&&h.value>=n+h.getDustThreshold())return void(h.value-=n)}}throw new Error("Could not subtract fee.")}async fund(t,e){r(e,"Options are required."),r(e.changeAddress,"Change address is required."),r(e.allowPreInput||0===this.inputs.length,"TX is already funded."),t=await new g(this,e).select(t);for(const e of t.chosen)this.addCoin(e);t.subtractFee&&this.subtractFee(t.fee,t.subtractIndex);var i=new h;return i.value=t.change,i.script.fromAddress(t.changeAddress),e.noChange||i.isDust()?(this.changeIndex=-1,r.strictEqual(this.getFee(),t.fee+t.change)):(this.outputs.push(i),this.changeIndex=this.outputs.length-1,r.strictEqual(this.getFee(),t.fee)),t}sortMembers(){let t=null;-1!==this.changeIndex&&(t=this.outputs[this.changeIndex],r(t)),this.inputs.sort(b),this.outputs.sort(v),-1!==this.changeIndex&&(this.changeIndex=this.outputs.indexOf(t),r(-1!==this.changeIndex))}setLocktime(t){r(s.isU32(t),"Locktime must be a uint32."),r(0<this.inputs.length,"Cannot set sequence with no inputs.");for(const t of this.inputs)4294967295===t.sequence&&(t.sequence=4294967294);this.locktime=t}setSequence(t,e,i){t=this.inputs[t],r(t,"Input does not exist."),r(s.isU32(e),"Locktime must be a uint32."),this.version=2,e&=d.SEQUENCE_MASK,i&&(e|=d.SEQUENCE_TYPE_FLAG),t.sequence=e}inspect(){return this.format()}format(){return super.format(this.view)}toJSON(){return super.getJSON(null,this.view)}getJSON(t){return super.getJSON(t,this.view)}static fromJSON(t){return(new y).fromJSON(t)}static fromReader(t){return(new y).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new y).fromRaw(t)}toTX(){return(new o).inject(this)}commit(){return[this.toTX(),this.view]}static fromTX(t,e=0){return(new y).inject(t,e)}static isMTX(t){return t instanceof y}}function b(t,e){return t.compare(e)}function v(t,e){return t.compare(e)}t.exports=y}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * lru.js - LRU cache for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */const r=i(1),s=i(247);function n(t,e){this.key=t,this.value=e,this.next=null,this.prev=null}t.exports=class{constructor(t=1e3,e){this.map=new Map,this.size=0,this.items=0,this.head=null,this.tail=null,this.pending=null,r("number"==typeof t,"Capacity must be a number."),r(0<=t,"Capacity cannot be negative."),r(!e||"function"==typeof e,"Bad size callback."),this.capacity=t,this.getSize=e}_getSize(t){return this.getSize?120+Math.floor(1.375*t.key.length)+this.getSize(t.value):1}_compact(){if(!(this.size<=this.capacity)){let t,e;for(t=this.head;t&&!(this.size<=this.capacity);t=e)this.size-=this._getSize(t),this.items--,this.map.delete(t.key),e=t.next,t.prev=null,t.next=null;t?(this.head=t).prev=null:(this.head=null,this.tail=null)}}reset(){let t,e;for(t=this.head;t;t=e)this.map.delete(t.key),this.items--,e=t.next,t.prev=null,t.next=null;r(!t),this.size=0,this.head=null,this.tail=null}set(t,e){if(0!==this.capacity){t=String(t);let i=this.map.get(t);i?(this.size-=this._getSize(i),i.value=e,this.size+=this._getSize(i),this._removeList(i),this._appendList(i)):(i=new n(t,e),this.map.set(t,i),this._appendList(i),this.size+=this._getSize(i),this.items++),this._compact()}}get(t){return 0===this.capacity?null:(t=String(t),(t=this.map.get(t))?(this._removeList(t),this._appendList(t),t.value):null)}has(t){return 0!==this.capacity&&this.map.has(String(t))}remove(t){if(0===this.capacity)return!1;t=String(t);var e=this.map.get(t);return!!e&&(this.size-=this._getSize(e),this.items--,this.map.delete(t),this._removeList(e),!0)}_prependList(t){this._insertList(null,t)}_appendList(t){this._insertList(this.tail,t)}_insertList(t,e){r(!e.next),r(!e.prev),null==t?this.head?((this.head.prev=e).next=this.head,this.head=e):(this.head=e,this.tail=e):(e.next=t.next,(e.prev=t).next=e,t===this.tail&&(this.tail=e))}_removeList(t){t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev||this.head),this.head||r(!this.tail),this.tail||r(!this.head),t.prev=null,t.next=null}keys(){var t=[];for(let e=this.head;e;e=e.next)e===this.head&&r(!e.prev),e.prev||r(e===this.head),e.next||r(e===this.tail),t.push(e.key);return t}values(){var t=[];for(let e=this.head;e;e=e.next)t.push(e.value);return t}toArray(){var t=[];for(let e=this.head;e;e=e.next)t.push(e);return t}batch(){return new s(this)}start(){r(!this.pending),this.pending=this.batch()}clear(){r(this.pending),this.pending.clear()}drop(){r(this.pending),this.pending=null}commit(){r(this.pending),this.pending.commit(),this.pending=null}push(t,e){r(this.pending),0!==this.capacity&&this.pending.set(t,e)}unpush(t){r(this.pending),0!==this.capacity&&this.pending.remove(t)}}},function(t,e,i){"use strict";(function(t){
/*!
 * ip.js - ip utils for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=i(209),n=i(210),o=i(137),a=e,h=t.from("00000000000000000000000000000000","hex"),c=t.from("00000000000000000000000000000001","hex"),u=t.from("0064ff9b0000000000000000","hex"),l=t.from("fe80000000000000","hex"),f=t.from("0000000000000000ffff0000","hex"),d=t.from("fd87d87eeb43","hex"),p=t.from("00000000000000ffff","hex"),g=/^(\d{1,3}\.){3}\d{1,3}$/,m=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;function w(t,e,i,r,s){this.host=t||"0.0.0.0",this.port=e||0,this.type=i||a.types.IPV4,this.hostname=r||"0.0.0.0:0",this.raw=s||h}a.ZERO_IP=h,a.types={DNS:-1,IPV4:4,IPV6:6,ONION:10,TEREDO:11},a.fromHostname=function(t,e){let i,s;if(r("string"==typeof t),r(0<t.length,"Bad address."),"["===t[0])s="]"===t[t.length-1]?(i=t.slice(1,-1),null):(o=(t=t.slice(1)).split("]:"),r(2===o.length,"Bad IPv6 address."),i=o[0],o[1]);else{var n=t.split(":");switch(n.length){case 2:i=n[0],s=n[1];break;case 1:i=n[0],s=null;break;default:r(a.isV6String(t),"Bad IPv6 address."),i=t,s=null}}r(0<i.length,"Bad host."),s=null!=s?(r(/^\d+$/.test(s),"Bad port."),parseInt(s,10)):e||0;var o=a.getStringType(i);let h,c;return o!==a.types.DNS&&(h=a.toBuffer(i),i=a.toString(h)),c=o===a.types.IPV6?`[${i}]:`+s:i+":"+s,new w(i,s,o,c,h)},a.toHostname=function(t,e){r("string"==typeof t),r(0<t.length),r("number"==typeof e),r(0<=e&&e<=65535),r(!/[\[\]]/.test(t),"Bad host.");var i=a.getStringType(t);return-1!==t.indexOf(":")&&r(i===a.types.IPV6,"Bad host."),i!==a.types.DNS&&(t=a.normalize(t)),i===a.types.IPV6?`[${t}]:`+e:t+":"+e},a.getStringType=function(t){return a.isV4String(t)?a.types.IPV4:a.isV6String(t)?a.types.IPV6:a.isOnionString(t)?a.types.ONION:a.types.DNS},a.isV4String=function(t){return r("string"==typeof t),!(t.length<7||15<t.length)&&g.test(t)},a.isV6String=function(t){return r("string"==typeof t),!(t.length<2||39<t.length)&&m.test(t)},a.isOnionString=function(t){return r("string"==typeof t),!(t.length<7)&&".onion"===t.slice(-6)},a.isMapped=function(e){return r(t.isBuffer(e)),r(16===e.length),0===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&0===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&255===e[10]&&255===e[11]},a.toBuffer=function(e){r("string"==typeof e);var i,s=t.allocUnsafe(16);return a.isV4String(e)?(s.fill(0),s[10]=255,s[11]=255,a.parseV4(e,s,12)):a.isOnionString(e)?(d.copy(s,0),i=n.decode(e.slice(0,-6)),r(10===i.length,"Invalid onion address."),i.copy(s,6),s):a.parseV6(e,s,0)},a.parseV4=function(t,e,i){var s;t=t.split(".");for(s of(r(4===t.length),t))r(0<s.length),r(s.length<=3),s=parseInt(s,10),r(0<=s&&s<=255),e[i++]=s;return e},a.parseV6=function(t,e,i){var s=t.split(":");let n=8-s.length;r(2<=s.length,"Not an IPv6 address.");for(const t of s)a.isV4String(t)&&n--;t=i;let o=!1;for(let t=0;t<s.length;t++){let h=s[t];if(0===h.length){for(r(!o,"Overuse of double colon in IPv6 address."),o=!0,n+=1;t+1<s.length&&0===(h=s[t+1]).length;)n+=1,t++;for(;0<n;)e[i++]=0,e[i++]=0,n--}else a.isV4String(h)?(a.parseV4(h,e,i),i+=4):(r(h.length<=4),h=parseInt(h,16),r(h==h,"Non-number in IPv6 address."),e[i++]=h>>8&255,e[i++]=255&h)}return r(0===n,"IPv6 address has missing sections."),r.strictEqual(i,t+16),e},a.toString=function(e){var i;if(r(t.isBuffer(e)),4===e.length)return i="",(i=(i=(i+=e[0])+"."+e[1])+"."+e[2])+"."+e[3];if(16!==e.length)throw new Error(`Invalid IP address: ${e.toString("hex")}.`);{if(a.isMapped(e))return i="",(i=(i=(i+=e[12])+"."+e[13])+"."+e[14])+"."+e[15];if(a.isOnion(e))return n.encode(e.slice(6))+".onion";let t="";t+=e.readUInt16BE(0,!0).toString(16);for(let i=2;i<16;i+=2)t=(t+=":")+e.readUInt16BE(i,!0).toString(16);return t=(t=t.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3")).replace(/:{3,4}/,"::")}},a.normalize=function(t){return a.toString(a.toBuffer(t))},a.isIPv4=function(t){return a.isMapped(t)},a.isIPv6=function(t){return!a.isMapped(t)&&!a.isOnion(t)},a.getType=function(t){if(a.isIPv4(t))return a.types.IPV4;if(a.isIPv6(t))return a.types.IPV6;if(a.isOnion(t))return a.types.ONION;throw new Error("Unknown type.")},a.getNetwork=function(t){return a.isRFC4380(t)?a.types.TEREDO:a.getType(t)},a.isNull=function(t){return a.isIPv4(t)?0===t[12]&&0===t[13]&&0===t[14]&&0===t[15]:a.isEqual(t,h)},a.isBroadcast=function(t){return!!a.isIPv4(t)&&255===t[12]&&255===t[13]&&255===t[14]&&255===t[15]},a.isRFC1918=function(t){return!!a.isIPv4(t)&&(10===t[12]||192===t[12]&&168===t[13]||172===t[12]&&16<=t[13]&&t[13]<=31)},a.isRFC2544=function(t){return!!a.isIPv4(t)&&(198===t[12]&&(18===t[13]||19===t[13])||169===t[12]&&254===t[13])},a.isRFC3927=function(t){return!!a.isIPv4(t)&&169===t[12]&&254===t[13]},a.isRFC6598=function(t){return!!a.isIPv4(t)&&100===t[12]&&64<=t[13]&&t[13]<=127},a.isRFC5737=function(t){return!!a.isIPv4(t)&&(192===t[12]&&0===t[13]&&2===t[14]||198===t[12]&&51===t[13]&&100===t[14]||203===t[12]&&0===t[13]&&113===t[14])},a.isRFC3849=function(t){return 32===t[0]&&1===t[1]&&13===t[2]&&184===t[3]},a.isRFC3964=function(t){return 32===t[0]&&2===t[1]},a.isRFC6052=function(t){return a.hasPrefix(t,u)},a.isRFC4380=function(t){return 32===t[0]&&1===t[1]&&0===t[2]&&0===t[3]},a.isRFC4862=function(t){return a.hasPrefix(t,l)},a.isRFC4193=function(t){return 252==(254&t[0])},a.isRFC6145=function(t){return a.hasPrefix(t,f)},a.isRFC4843=function(t){return 32===t[0]&&1===t[1]&&0===t[2]&&16==(240&t[3])},a.isOnion=function(t){return a.hasPrefix(t,d)},a.isLocal=function(t){return a.isIPv4(t)?127===t[12]&&0===t[13]:!!a.isEqual(t,c)},a.isMulticast=function(t){return a.isIPv4(t)?224==(240&t[12]):255===t[0]},a.isValid=function(t){return!(a.hasPrefix(t,p)||a.isNull(t)||a.isBroadcast(t)||a.isRFC3849(t))},a.isRoutable=function(t){return!!a.isValid(t)&&!(a.isRFC1918(t)||a.isRFC2544(t)||a.isRFC3927(t)||a.isRFC4862(t)||a.isRFC6598(t)||a.isRFC5737(t)||a.isRFC4193(t)&&!a.isOnion(t)||a.isRFC4843(t)||!o.localhost&&a.isLocal(t))},a.getReachability=function(t,e){if(!a.isRoutable(t))return 0;var i=a.getNetwork(t),r=(e=a.getNetwork(e),a.types);switch(e){case r.IPV4:return i!==r.IPV4?1:4;case r.IPV6:switch(i){case r.TEREDO:return 2;case r.IPV4:return 4;case r.IPV6:return a.isRFC3964(t)||a.isRFC6052(t)||a.isRFC6145(t)?3:5;default:return 1}break;case r.ONION:switch(i){case r.IPV4:return 4;case r.ONION:return 6;default:return 1}break;case r.TEREDO:switch(i){case r.TEREDO:return 2;case r.IPV6:return 3;case r.IPV4:return 4;default:return 1}break;default:switch(i){case r.TEREDO:return 2;case r.IPV6:return 3;case r.IPV4:return 4;case r.ONION:return 6;default:return 1}}},a.hasPrefix=function(e,i){r(t.isBuffer(e)),r(t.isBuffer(i)),r(e.length>=i.length);for(let t=0;t<i.length;t++)if(e[t]!==i[t])return!1;return!0},a.isEqual=function(t,e){return r(16===t.length),r(16===e.length),t.equals(e)},a.getInterfaces=function(t,e){var i=s.networkInterfaces(),r=[];for(const s of Object.keys(i))for(const o of i[s]){var n=o.family.toLowerCase();if(!(e&&n!==e||o.internal)){let i;try{i=a.toBuffer(o.address)}catch(e){continue}if(!a.isNull(i)&&!a.isLocal(i)){if("public"===t){if(!a.isRoutable(i))continue}else if("private"===t&&a.isRoutable(i))continue;r.push(a.toString(i))}}}return r},a.getPrivate=function(t){return a.getInterfaces("private",t)},a.getPublic=function(t){return a.getInterfaces("public",t)},a.Address=w}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * private.js - hd private keys for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(3),n=i(8),o=i(81),a=i(72),h=i(23),c=i(18),u=i(6),l=i(2),f=i(56),d=i(4),p=i(123),g=i(166),m=i(251);class w{constructor(t){if(!(this instanceof w))return new w(t);this.disableCache=!1,this.network=c.primary,this.depth=0,this.parentFingerPrint=0,this.childIndex=0,this.chainCode=d.ZERO_HASH,this.privateKey=d.ZERO_HASH,this.publicKey=d.ZERO_KEY,this.fingerPrint=-1,this._xprivkey=null,this._hdPublicKey=null,t&&this.fromOptions(t)}static getHmac(t,i){i=i||d.DefaultChainCode;i=w.fromKey(n.sha256(e.concat([e.from(t),i])),i);var r={id:"primary"};r.cid=t,r.pubkey=i.publicKey.toString("hex"),r.time=s.now()/3600|0,t=n.hash256(e.from(s.stringify(r))),t=h.sign(t,i.privateKey).toString("hex");return{token:r.pubkey,random:t}}fromOptions(t){return r(t,"No options for HD private key."),r(s.isU8(t.depth)),r(s.isU32(t.parentFingerPrint)),r(s.isU32(t.childIndex)),r(e.isBuffer(t.chainCode)),r(e.isBuffer(t.privateKey)),t.network&&(this.network=c.get(t.network)),this.depth=t.depth,this.parentFingerPrint=t.parentFingerPrint,this.childIndex=t.childIndex,this.chainCode=t.chainCode,this.privateKey=t.privateKey,this.publicKey=h.publicKeyCreate(t.privateKey,!0),this}static fromOptions(t){return(new w).fromOptions(t)}toPublic(){let t=this._hdPublicKey;return t||((t=new m).network=this.network,t.depth=this.depth,t.parentFingerPrint=this.parentFingerPrint,t.childIndex=this.childIndex,t.chainCode=this.chainCode,t.publicKey=this.publicKey,this._hdPublicKey=t),t}xprivkey(){return this._xprivkey||(this._xprivkey=this.toBase58()),this._xprivkey}xpubkey(){return this.toPublic().xpubkey()}destroy(t){this.depth=0,this.childIndex=0,this.parentFingerPrint=0,o(this.chainCode),o(this.privateKey),o(this.publicKey),this.fingerPrint=-1,this._hdPublicKey&&(t&&this._hdPublicKey.destroy(),this._hdPublicKey=null),this._xprivkey=null}derive(t,e){if(r("number"==typeof t),t>>>0!==t)throw new Error("Index out of range.");if(255<=this.depth)throw new Error("Depth too high.");if((e&&(t=(t|p.HARDENED)>>>0),e=this.getID(t),!this.disableCache)&&(i=p.cache.get(e)))return i;var i=u.pool(37),s=(i=(t&p.HARDENED?(i.writeU8(0),i.writeBytes(this.privateKey)):i.writeBytes(this.publicKey),i.writeU32BE(t),i.render()),(i=n.hmac("sha512",i,this.chainCode)).slice(0,32));i=i.slice(32,64);let o;try{o=h.privateKeyTweakAdd(this.privateKey,s)}catch(e){return this.derive(t+1)}return-1===this.fingerPrint&&(s=n.hash160(this.publicKey),this.fingerPrint=s.readUInt32BE(0,!0)),(s=new w).disableCache=this.disableCache,s.network=this.network,s.depth=this.depth+1,s.parentFingerPrint=this.fingerPrint,s.childIndex=t,s.chainCode=i,s.privateKey=o,s.publicKey=h.publicKeyCreate(o,!0),this.disableCache||p.cache.set(e,s),s}getID(t){return this.network.keyPrefix.xprivkey58+this.publicKey.toString("hex")+t}deriveAccount(t,e){return r(s.isU32(t),"Purpose must be a number."),r(s.isU32(e),"Account index must be a number."),r(this.isMaster(),"Cannot derive account index."),this.derive(t,!0).derive(this.network.keyPrefix.coinType,!0).derive(e,!0)}isMaster(){return p.isMaster(this)}isAccount(t){return p.isAccount(this,t)}static isBase58(t,e){if("string"!=typeof t)return!1;if(t.length<4)return!1;t=t.substring(0,4);try{return c.fromPrivate58(t,e),!0}catch(t){return!1}}static isRaw(t,i){if(!e.isBuffer(t))return!1;if(t.length<4)return!1;t=t.readUInt32BE(0,!0);try{return c.fromPrivate(t,i),!0}catch(t){return!1}}static isValidPath(t){try{return p.parsePath(t,!0),!0}catch(t){return!1}}derivePath(t){let e=this;for(const i of p.parsePath(t,!0))e=e.derive(i);return e}equals(t){return r(w.isHDPrivateKey(t)),this.network===t.network&&this.depth===t.depth&&this.parentFingerPrint===t.parentFingerPrint&&this.childIndex===t.childIndex&&this.chainCode.equals(t.chainCode)&&this.privateKey.equals(t.privateKey)}compare(t){r(w.isHDPrivateKey(t));var e=this.depth-t.depth;return 0!=e||0!=(e=this.parentFingerPrint-t.parentFingerPrint)||0!=(e=this.childIndex-t.childIndex)||0!==(e=this.chainCode.compare(t.chainCode))||0!==(e=this.privateKey.compare(t.privateKey))?e:0}fromSeed(t,i){if(r(e.isBuffer(t)),8*t.length<p.MIN_ENTROPY||8*t.length>p.MAX_ENTROPY)throw new Error("Entropy not in range.");var s=(t=n.hmac("sha512",t,d.SEED_SALT)).slice(0,32);t=t.slice(32,64);if(h.privateKeyVerify(s))return this.network=c.get(i),this.depth=0,this.parentFingerPrint=0,this.childIndex=0,this.chainCode=t,this.privateKey=s,this.publicKey=h.publicKeyCreate(s,!0),this;throw new Error("Master private key is invalid.")}static fromSeed(t,e){return(new w).fromSeed(t,e)}fromMnemonic(t,e){return r(t instanceof g),this.fromSeed(t.toSeed(),e)}static fromMnemonic(t,e){return(new w).fromMnemonic(t,e)}fromPhrase(t,e){return t=g.fromPhrase(t),this.fromMnemonic(t,e),this}static fromPhrase(t,e){return(new w).fromPhrase(t,e)}static getAes(t,i){var r=e.from(t),s=e.alloc(32);for(let t=0;t<Math.max(32,r.length);t++){var n=t%32;s[n]=r[n]^d.RANDOM_HASH[n]}return w.fromKey(d.RANDOM_HASH,s,i).getAes(t)}fromKey(t,i,s){return r(e.isBuffer(t)&&32===t.length),r(e.isBuffer(i)&&32===i.length),this.network=c.get(s),this.depth=0,this.parentFingerPrint=0,this.childIndex=0,this.chainCode=i,this.privateKey=t,this.publicKey=h.publicKeyCreate(t,!0),this}getAes(t){t=w.getHmac(t,this.chainCode).token;let i=n.hash256(e.from(t));return{aeskey:i.toString("base64").slice(0,32),aesiv:(i=n.hash256(i)).toString("base64").slice(0,16)}}static fromKey(t,e,i){return(new w).fromKey(t,e,i)}static eccEncrypt(t,i){var r=w.generate(),{aeskey:i,aesiv:n}=(i=h.ecdh(i,r.privateKey),w.getAes(i.toString()));return{pub:r.publicKey,msg:s.encrypt(i,n,e.from(t).toString("hex"))}}static eccDecrypt(t,i){i=h.ecdh(t.pub,i);var{aeskey:i,aesiv:r}=w.getAes(i.toString());return e.from(s.decrypt(i,r,t.msg),"hex").toString()}static generate(t){var e=h.generatePrivateKey(),i=a.randomBytes(32);return w.fromKey(e,i,t)}fromBase58(t,e){return r("string"==typeof t),this._xprivkey=t,this.fromRaw(f.decode(t),e)}fromReader(t,e){var i=t.readU32BE();return this.network=c.fromPrivate(i,e),this.depth=t.readU8(),this.parentFingerPrint=t.readU32BE(),this.childIndex=t.readU32BE(),this.chainCode=t.readBytes(32),r(0===t.readU8()),this.privateKey=t.readBytes(32),this.publicKey=h.publicKeyCreate(this.privateKey,!0),t.verifyChecksum(),this}fromRaw(t,e){return this.fromReader(new l(t),e)}toBase58(t){return f.encode(this.toRaw(t))}getSize(){return 82}toWriter(t,e){return e=e||this.network,e=c.get(e),t.writeU32BE(e.keyPrefix.xprivkey),t.writeU8(this.depth),t.writeU32BE(this.parentFingerPrint),t.writeU32BE(this.childIndex),t.writeBytes(this.chainCode),t.writeU8(0),t.writeBytes(this.privateKey),t.writeChecksum(),t}toRaw(t){return this.toWriter(new u(82),t).render()}static fromBase58(t,e){return(new w).fromBase58(t,e)}static fromReader(t,e){return(new w).fromReader(t,e)}static fromRaw(t,e){return(new w).fromRaw(t,e)}toJSON(){return{xprivkey:this.xprivkey(),pubkey:this.publicKey.toString("hex")}}fromJSON(t,e){return r(t.xprivkey,"Could not handle key JSON."),this.fromBase58(t.xprivkey,e),this}static fromJSON(t,e){return(new w).fromJSON(t,e)}static isHDPrivateKey(t){return t instanceof w}}t.exports=w}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * common.js - commonly required functions for wallet.
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */e.parseWallets=function(t){var e=t.readU32(),i=new Set;for(let r=0;r<e;r++)i.add(t.readU32());return i},e.sizeWallets=function(t){return 4+4*t.size},e.serializeWallets=function(t,e){t.writeU32(e.size);for(const i of e)t.writeU32(i);return t},e.isName=function(t){if("string"!=typeof t)return!1;if(0===t.length)return!1;if(!/^[\-\.@_0-9A-Za-z]+$/.test(t))return!1;switch(t[0]){case"_":case"-":case".":return!1}switch(t[t.length-1]){case"_":case"-":case".":return!1}return 1<=t.length&&t.length<=60},e.sortTX=function(t){return t.sort((t,e)=>t.mtime-e.mtime)},e.sortCoins=function(t){return t.sort((t,e)=>(t=-1===t.height?2147483647:t.height)-(-1===e.height?2147483647:e.height))}},function(t,e,i){"use strict";(function(t){
/*!
 * base58.js - base58 for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1);var s=i(57).binding;const n="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",o={};for(let t=0;t<n.length;t++)o[n[t]]=t;e.encode=function(e){let i=0,s=0;for(;s<e.length&&0===e[s];s++)i++;var o=t.allocUnsafe(1+(138*e.length/100|0));o.fill(0);let a=0;for(;s<e.length;s++){let t=e[s],i=0;for(let e=o.length-1;0<=e&&!(0===t&&i>=a);e--,i++)t+=256*o[e],o[e]=t%58,t=t/58|0;r(0===t),a=i}for(s=o.length-a;s<o.length&&0===o[s];)s++;let h="";for(let t=0;t<i;t++)h+="1";for(;s<o.length;s++)h+=n[o[s]];return h},s&&(e.encode=s.toBase58),e.decode=function(e){let i=0,s=0;for(;s<e.length&&"1"===e[s];s++)i++;var n=t.allocUnsafe(1+(733*e.length/1e3|0));n.fill(0);let a=0;for(;s<e.length;s++){var h=o[e[s]];if(null==h)throw new Error("Non-base58 character.");let t=h,i=0;for(let e=n.length-1;0<=e&&!(0===t&&i>=a);e--,i++)t+=58*n[e],n[e]=t%256,t=t/256|0;r(0===t),a=i}for(s=0;s<n.length&&0===n[s];)s++;var c=t.allocUnsafe(i+(n.length-s));let u;for(u=0;u<i;u++)c[u]=0;for(;s<n.length;)c[u++]=n[s++];return c},s&&(e.decode=s.fromBase58)}).call(this,i(0).Buffer)},function(t,e,i){"use strict";e.binding=null},function(t,e,i){"use strict";(function(e){
/*!
 * block.js - block object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=i(3),n=i(4),o=i(8),a=i(133),h=i(9);var c=i(101);const u=i(2),l=i(6),f=i(19),d=i(117),p=i(71),g=i(18),m=i(118),w=i(22).opcodes,y=i(7).PropStatus;class b extends c{constructor(t,e){super(),this.txs=e||[],this._raw=null,this._size=-1,this._witness=-1,t&&this.fromOptions(t)}fromOptions(t){if(this.parseOptions(t),t.txs){r(Array.isArray(t.txs));for(const e of t.txs)r(e instanceof f),this.txs.push(e)}}static fromOptions(t){return(new b).fromOptions(t)}async propViewer(){if(!this.pviewer)for(var t of(this.pviewer=new m,this.txs))for(let r=0;r<t.outputs.length;r++){var e=t.outputs[r],i=e.getReturnData([w.OP_PROPEXCHANGE,w.OP_PROPCREATE]);!i||e.getReturnType(w.OP_PROPCREATE)&&!await this.pviewer.getVp(i.pid)&&(i.current={hash:t.hash("hex"),index:r,address:e.getAddress().toString()},i.gold=e.value,i.height=this.height,i.pst=y.Ready,await this.pviewer.setVp(i))}return this.pviewer}refresh(t){if(this._refresh(),this._raw=null,this._size=-1,this._witness=-1,t)for(const t of this.txs)t.refresh()}toRaw(){return this.frame().data}toNormal(){return this.hasWitness()?this.frameNormal().data:this.toRaw()}toWriter(t){var e;return this.mutable?this.writeWitness(t):(e=this.frame(),t.writeBytes(e.data),t)}toNormalWriter(t){return this.hasWitness()?(this.writeNormal(t),t):this.toWriter(t)}frame(){if(this.mutable)return r(!this._raw),this.frameWitness();if(this._raw){r(0<=this._size),r(0<=this._witness);const t=new v(this._size,this._witness);return t.data=this._raw,t}const t=this.frameWitness();return this._raw=t.data,this._size=t.size,this._witness=t.witness,t}getSizes(){return this.mutable?this.getWitnessSizes():this.frame()}getVirtualSize(){var t=h.WITNESS_SCALE_FACTOR;return(this.getWeight()+t-1)/t|0}getWeight(){var t=this.getSizes();return(t.size-t.witness)*(h.WITNESS_SCALE_FACTOR-1)+t.size}getSize(){return this.getSizes().size}getBaseSize(){var t=this.getSizes();return t.size-t.witness}hasWitness(){if(-1!==this._witness)return 0!==this._witness;for(const t of this.txs)if(t.hasWitness())return!0;return!1}hasTX(t){return-1!==this.indexOf(t)}indexOf(t){for(let e=0;e<this.txs.length;e++)if(this.txs[e].hash("hex")===t)return e;return-1}createMerkleRoot(t){var e=[];for(const t of this.txs)e.push(t.hash());var[i,r]=a.createRoot(e);return r?null:"hex"===t?i.toString("hex"):i}createWitnessNonce(){return e.from(n.ZERO_HASH)}createCommitmentHash(t){var e=this.getWitnessNonce(),i=[];r(e,"No witness nonce present."),i.push(n.ZERO_HASH);for(let t=1;t<this.txs.length;t++){var s=this.txs[t];i.push(s.witnessHash())}var[h]=a.createRoot(i),h=o.root256(h,e);return"hex"===t?h.toString("hex"):h}getMerkleRoot(t){return"hex"===t?this.merkleRoot:e.from(this.merkleRoot,"hex")}getWitnessNonce(){var t;return 0===this.txs.length||1!==(t=this.txs[0]).inputs.length||1!==(t=t.inputs[0]).witness.items.length||32!==t.witness.items[0].length?null:t.witness.items[0]}getCommitmentHash(t){if(0===this.txs.length)return null;var e=this.txs[0];let i;for(let t=e.outputs.length-1;0<=t;t--){var r=e.outputs[t];if(r.script.isCommitment()){i=r.script.getCommitment();break}}return i?"hex"===t?i.toString("hex"):i:null}verifyBody(){var[t]=this.checkBody();return t}checkBody(){var t=this.createMerkleRoot("hex");if(!t)return[!1,"bad-txns-duplicate",100];if(this.merkleRoot!==t)return[!1,"bad-txnmrklroot",100];if(0===this.txs.length||this.txs.length>(h.MAX_BLOCK_SIZE-81)/60||this.getBaseSize()>h.MAX_BLOCK_SIZE)return[!1,"bad-blk-length",100];if(0===this.txs.length||!this.txs[0].isCoinbase())return[!1,"bad-cb-missing",100];var e=h.WITNESS_SCALE_FACTOR;let i=0;for(let t=0;t<this.txs.length;t++){var r=this.txs[t];if(0<t&&r.isCoinbase())return[!1,"bad-cb-multiple",100];var[s,n,o]=r.checkSanity();if(!s)return[s,n,o];if((i+=r.getLegacySigops())*e>h.MAX_BLOCK_SIGOPS_COST)return[!1,"bad-blk-sigops",100]}return[!0,"valid",0]}get height(){return this.getCoinbaseHeight()}getCoinbaseHeight(){var t;return this.version<2||0===this.txs.length||0===(t=this.txs[0]).inputs.length?-1:t.inputs[0].script.getCoinbaseHeight()}getClaimed(){return r(0<this.txs.length),r(this.txs[0].isCoinbase()),this.txs[0].getOutputValue()}getPrevout(){var t=Object.create(null);for(let e=1;e<this.txs.length;e++)for(const i of this.txs[e].inputs)t[i.prevout.hash]=!0;return Object.keys(t)}inspect(){return this.format()}format(t,e){var i=this.getCommitmentHash("hex");return{hash:this.rhash(),height:null!=e?e:-1,size:this.getSize(),virtualSize:this.getVirtualSize(),date:s.date(this.time),version:s.hex32(this.version),prevBlock:s.revHex(this.prevBlock),merkleRoot:s.revHex(this.merkleRoot),commitmentHash:i?s.revHex(i):null,time:this.time,bits:this.bits,nonce:this.nonce,txs:this.txs.map((e,i)=>e.format(t,null,i))}}formatInsight(){return{hash:this.rhash(),rhash:()=>this.hash,version:s.hex32(this.version),prevBlock:s.revHex(this.prevBlock),merkleRoot:s.revHex(this.merkleRoot),raw:this.toRaw(),ts:this.time,bits:this.bits,nonce:this.nonce,txs:this.txs.map((t,e)=>t.formatInsight(e,this.time))}}toJSON(){return this.getJSON()}getJSON(t,e,i,r){return t=g.get(t),{hash:this.rhash(),height:i,confirmations:r,version:this.version,prevBlock:s.revHex(this.prevBlock),merkleRoot:s.revHex(this.merkleRoot),time:this.time,bits:this.bits,nonce:this.nonce,txs:this.txs.map((i,r)=>i.getJSON(t,e,null,r))}}fromJSON(t){r(t,"Block data is required."),r(Array.isArray(t.txs)),this.parseJSON(t);for(const e of t.txs)this.txs.push(f.fromJSON(e));return this}static fromJSON(t){return(new b).fromJSON(t)}fromReader(t){t.start(),this.readHead(t);var e=t.readVarint();let i=0;for(let s=0;s<e;s++){var r=f.fromReader(t);i+=r._witness,this.txs.push(r)}return this.mutable||(this._raw=t.endData(),this._size=this._raw.length,this._witness=i),this}fromRaw(t){return this.fromReader(new u(t))}static fromReader(t){return(new b).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new b).fromRaw(t)}toMerkle(t){return d.fromBlock(this,t)}writeNormal(t){this.writeHead(t),t.writeVarint(this.txs.length);for(const e of this.txs)e.toNormalWriter(t);return t}writeWitness(t){this.writeHead(t),t.writeVarint(this.txs.length);for(const e of this.txs)e.toWriter(t);return t}frameNormal(){var t=this.getNormalSizes(),e=new l(t.size);return this.writeNormal(e),t.data=e.render(),t}frameWitness(){var t=this.getWitnessSizes(),e=new l(t.size);return this.writeWitness(e),t.data=e.render(),t}toHeaders(){return p.fromBlock(this)}getNormalSizes(){let t=0;t=(t+=80)+n.sizeVarint(this.txs.length);for(const e of this.txs)t+=e.getBaseSize();return new v(t,0)}getWitnessSizes(){let t=0,e=0;t=(t+=80)+n.sizeVarint(this.txs.length);for(const r of this.txs){var i=r.getSizes();t+=i.size,e+=i.witness}return new v(t,e)}static isBlock(t){return t instanceof b}}function v(t,e){this.data=null,this.size=t,this.witness=e}t.exports=b}).call(this,i(0).Buffer)},function(t,e,i){(function(e){const r=i(3),s=i(23),n=i(8),o=i(13);t.exports={verifyData:function(t){try{var i=e.from(t.data.pubkey,"hex"),a=e.from(r.stringify(t.data));if(s.verify(n.hash256(a),e.from(t.sig,"hex"),i)&&o.fromString(t.data.addr).hash.toString("hex")==n.hash160(i).toString("hex"))return!0}catch(t){}return!1},generateKey:function(t){"string"==typeof(t=t||s.generatePrivateKey())&&(t=e.from(t,"hex"));var i=s.publicKeyCreate(t,!0);return{private:t.toString("hex"),public:i.toString("hex")}},signObj:function(t,i){return"string"==typeof i&&(i=e.from(i,"hex")),t=e.isBuffer(t)?n.hash256(t):n.hash256(e.from(r.stringify(t))),s.sign(t,i).toString("hex")},verifyObj:function(t,i,o){return t=e.isBuffer(t)?n.hash256(t):n.hash256(e.from(r.stringify(t))),"string"==typeof i&&(i=e.from(i,"hex")),"string"==typeof o&&(o=e.from(o,"hex")),s.verify(t,i,o)}}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e,r){
/*!
 * logger.js - basic logger for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const s=i(1),n=i(49),o=i(3),a=i(36),h=i(29),c=i(80);class u{constructor(t){if(!(this instanceof u))return new u(t);this.level=u.levels.NONE,this.colors=u.HAS_TTY,this.console=!0,this.shrink=!0,this.closed=!0,this.closing=!1,this.$filename=null,this.stream=null,this.contexts=Object.create(null),this.locker=new h,this.refreshTimestamp(),t&&this.set(t)}refreshTimestamp(){var t=`${(t=new Date).getFullYear()}.${t.getMonth()+1}.`+t.getDate();return!(this.hisTimestamp&&this.hisTimestamp==t||(this.hisTimestamp=t,0))}get filename(){return c.join(this.$filepath,this.hisTimestamp+"_"+this.$filename)}set(t){s(t),s(this.closed),"string"==typeof t?this.setLevel(t):(null!=t.level&&(s("string"==typeof t.level),this.setLevel(t.level)),null!=t.colors&&u.HAS_TTY&&(s("boolean"==typeof t.colors),this.colors=t.colors),null!=t.console&&(s("boolean"==typeof t.console),this.console=t.console),null!=t.shrink&&(s("boolean"==typeof t.shrink),this.shrink=t.shrink),null!=t.filename&&(s("string"==typeof t.filename,"Bad file."),this.$filename=t.filename),null!=t.filepath&&(s("string"==typeof t.filepath,"Bad file."),this.$filepath=t.filepath))}async open(){var t=await this.locker.lock();try{return await this._open()}finally{t()}}async _open(){this.$filename&&(this.stream||n.unsupported||(this.shrink&&await this.truncate(),this.stream=await f(this.filename),this.stream.once("error",this.handleError.bind(this)))),this.closed=!1}async close(){var t=await this.locker.lock();try{return await this._close()}finally{t()}}async _close(){if(null!=this.timer&&(a.clearTimeout(this.timer),this.timer=null),n.unsupported)this.closed=!0,this.stream=null;else{if(this.stream){try{this.closing=!0,t=this.stream,await new Promise((e,i)=>{const r=()=>{t.removeListener("error",s),t.removeListener("close",n)},s=t=>{r(),i(t)},n=()=>{r(),e(t)};t.removeAllListeners("error"),t.removeAllListeners("close"),t.once("error",s),t.once("close",n),t.close()})}finally{this.closing=!1}this.stream=null}var t;this.closed=!0}}async truncate(){if(this.$filename&&!n.unsupported){let o;s(!this.stream);try{o=await n.stat(this.filename)}catch(t){if("ENOENT"===t.code)return;throw t}var t,i,r=u.MAX_FILE_SIZE;o.size<=r+r/10||(this.debug("Truncating log file to %d bytes.",r),t=await n.open(this.filename,"r+"),i=e.allocUnsafe(r),await n.read(t,i,0,r,o.size-r),await n.ftruncate(t,r),await n.write(t,i,0,r,0),await n.close(t))}}handleError(t){try{this.stream.close()}catch(t){}this.stream=null,this.retry()}async reopen(){var t=await this.locker.lock();try{return await this._reopen()}finally{t()}}async _reopen(){if(!this.stream&&!this.closed&&!n.unsupported){try{this.stream=await f(this.filename)}catch(t){return void this.retry()}this.stream.once("error",this.handleError.bind(this))}}retry(){s(null==this.timer),this.timer=a.setTimeout(()=>{this.timer=null,this.reopen()},1e4,this)}setFile(t){s("string"==typeof t),s(!this.stream,"Log stream has already been created."),this.$filename=t}setLevel(t){t=u.levels[t.toUpperCase()],s(null!=t,"Invalid log level."),this.level=t}error(...t){var e;this.level<u.levels.ERROR||((e=t[0])instanceof Error?this.logError(u.levels.ERROR,null,e):this.log(u.levels.ERROR,null,t))}warning(...t){var e;this.level<u.levels.WARNING||((e=t[0])instanceof Error?this.logError(u.levels.WARNING,null,e):this.log(u.levels.WARNING,null,t))}info(...t){var e;this.level<u.levels.INFO||((e=t[0])instanceof Error?this.logError(u.levels.INFO,null,e):this.log(u.levels.INFO,null,t))}debug(...t){var e;this.level<u.levels.DEBUG||((e=t[0])instanceof Error?this.logError(u.levels.DEBUG,null,e):this.log(u.levels.DEBUG,null,t))}spam(...t){var e;this.level<u.levels.SPAM||((e=t[0])instanceof Error?this.logError(u.levels.SPAM,null,e):this.log(u.levels.SPAM,null,t))}log(t,e,i){this.closed||this.level<t||(this.writeConsole(t,e,i),this.writeStream(t,e,i))}context(t){let e=this.contexts[t];return e||(e=new l(this,t),this.contexts[t]=e),e}writeConsole(t,e,i){var n,a=u.levelsByVal[t];if(s(a,"Invalid log level."),!this.console)return!1;if(!r.stdout){let r=`[${a}] [${o.dataOfUTC()}] `;return e&&(r+=`(${e}) `),"object"==typeof i[0]?t===u.levels.ERROR?console.error(r,i[0]):console.log(r,i[0]):(r+=o.format(i,!1),t===u.levels.ERROR?console.error(r):console.log(r),!0)}let h;return h=this.colors?(n=u.styles[t],s(n),`[${n}m[${a}] [${o.dataOfUTC()}][m `):`[${a}] [${o.dataOfUTC()}] `,e&&(h+=`(${e}) `),h=h+o.format(i,this.colors)+"\n",(t===u.levels.ERROR?r.stderr:r.stdout).write(h)}writeStream(t,e,i){if(t=u.prefixByVal[t],s(t,"Invalid log level."),this.stream&&!this.closing){let r=`[${t}] [${o.dataOfUTC()}] `;if(e&&(r+=`(${e}) `),r=r+o.format(i,!1)+"\n",this.refreshTimestamp()){try{this.stream.close()}catch(t){}this.stream=null,this.reopen().then(()=>{this.stream.write(r)}).catch(t=>{})}else this.stream.write(r)}}logError(t,e,i){if(!this.closed){n.unsupported&&this.console&&t<=u.levels.WARNING&&console.error(i);let r=String(i.message).replace(/^ *Error: */,"");t!==u.levels.ERROR&&(r="Error: "+r),this.log(t,e,[r]),t<=u.levels.WARNING&&this.stream&&this.stream.write(i.stack+"\n")}}memory(t){var e=o.memoryUsage();this.log(u.levels.DEBUG,t,["Memory: rss=%dmb, js-heap=%d/%dmb native-heap=%dmb",e.total,e.jsHeap,e.jsHeapTotal,e.nativeHeap])}}class l{constructor(t,e){s("string"==typeof e),this.logger=t,this.module=e}open(){return this.logger.open()}close(){return this.logger.close()}setFile(t){this.logger.setFile(t)}setLevel(t){this.logger.setLevel(t)}error(...t){var e;this.logger.level<u.levels.ERROR||((e=t[0])instanceof Error?this.logError(u.levels.ERROR,e):this.log(u.levels.ERROR,t))}warning(...t){var e;this.logger.level<u.levels.WARNING||((e=t[0])instanceof Error?this.logError(u.levels.WARNING,e):this.log(u.levels.WARNING,t))}info(...t){var e;this.logger.level<u.levels.INFO||((e=t[0])instanceof Error?this.logError(u.levels.INFO,e):this.log(u.levels.INFO,t))}debug(...t){var e;this.logger.level<u.levels.DEBUG||((e=t[0])instanceof Error?this.logError(u.levels.DEBUG,e):this.log(u.levels.DEBUG,t))}spam(...t){var e;this.logger.level<u.levels.SPAM||((e=t[0])instanceof Error?this.logError(u.levels.SPAM,e):this.log(u.levels.SPAM,t))}log(t,e){this.logger.log(t,this.module,e)}context(t){return new l(this.logger,t)}logError(t,e){this.logger.logError(t,this.module,e)}memory(){this.logger.memory(this.module)}}function f(t){return new Promise((e,i)=>{const r=n.createWriteStream(t,{flags:"a"}),s=()=>{r.removeListener("error",o),r.removeListener("open",a)},o=t=>{try{r.close()}catch(t){}s(),i(t)},a=()=>{s(),e(r)};r.once("error",o),r.once("open",a)})}u.HAS_TTY=Boolean(r.stdout&&r.stdout.isTTY),u.MAX_FILE_SIZE=20<<20,u.levels={NONE:0,ERROR:1,WARNING:2,INFO:3,DEBUG:4,SPAM:5},u.levelsByVal=["none","error","warning","info","debug","spam"],u.prefixByVal=["N","E","W","I","D","S"],u.styles=["0","1;31","1;33","94","90","90"],u.global=new u,t.exports=u}).call(this,i(0).Buffer,i(11))},function(t,e){t.exports=class{constructor(t){this.options=t||{}}async run(){var t,e=this.options.contract;return"indate"===this.options.data.params.oper&&(t=this.options.height+52560,e.options.indate=Math.min(t,e.options.indate+parseInt(this.options.data.params.date))),{derive:[]}}async confirm(){return!0}async unconfirm(){return!0}async verify(){if("indate"===this.options.data.params.oper)try{parseInt(this.options.data.params.date)}catch(t){return!1}return!0}}},function(t,e,i){"use strict";var r=i(125),s=Object.keys||function(t){var e,i=[];for(e in t)i.push(e);return i},n=((t=(t.exports=u,Object.create(i(93)))).inherits=i(5),i(263)),o=i(194);t.inherits(u,n);for(var a=s(o.prototype),h=0;h<a.length;h++){var c=a[h];u.prototype[c]||(u.prototype[c]=o.prototype[c])}function u(t){if(!(this instanceof u))return new u(t);n.call(this,t),o.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",l)}function l(){this.allowHalfOpen||this._writableState.ended||r.nextTick(f,this)}function f(t){t.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),u.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},function(t,e,i){"use strict";
/*!
 * async.js - async object class for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1),s=i(29);(i=i(14)).defaultMaxListeners=20;t.exports=class extends i{constructor(){super(),this._asyncLock=new s,this._hooks=Object.create(null),this.loading=!1,this.closing=!1,this.loaded=!1,this.$eid=""}get eid(){return this.$eid}set eid(t){this.$eid=t}async open(t){var e=await this._asyncLock.lock();try{return await this.__open(t)}catch(t){throw t}finally{e()}}async __open(t){let e=null;if(!this.loaded){await this.fire("preopen"),this.loading=!0;try{e=await this._open(t)}catch(t){throw this.loading=!1,this.emit("error",t),t}return this.loading=!1,this.loaded=!0,await this.fire("open"),e}}async destroy(){return this.close()}async close(){var t=await this._asyncLock.lock();try{return await this.__close()}finally{t()}}async __close(){if(this.loaded){await this.fire("preclose"),this.closing=!0;try{await this._close()}catch(t){throw this.closing=!1,this.emit("error",t),t}this.closing=!1,this.loaded=!1,await this.fire("close")}}_open(t){throw new Error("Abstract method.")}_close(t){throw new Error("Abstract method.")}hook(t,e){r("string"==typeof t,"`type` must be a string."),this._hooks[t]||(this._hooks[t]=[]),this._hooks[t].push(e)}async fire(){await this.fireNoBubble.apply(this,arguments),this.emit.apply(this,arguments)}async fireNoBubble(t){if(r("string"==typeof t,"`type` must be a string."),(t=this._hooks[t])&&0!==t.length){let e;for(const i of t)switch(arguments.length){case 1:await i();break;case 2:await i(arguments[1]);break;case 3:await i(arguments[1],arguments[2]);break;case 4:await i(arguments[1],arguments[2],arguments[3]);break;default:if(!e){e=new Array(arguments.length-1);for(let t=1;t<arguments.length;t++)e[t-1]=arguments[t]}await i.apply(null,e)}}}}},function(t,e,i){const r=i(1);class s extends Error{constructor(t,e){super(),r("number"==typeof t),r("string"==typeof e),this.type="RPCError",this.message=String(e),this.code=t>>>0,Error.captureStackTrace&&Error.captureStackTrace(this,s)}}t.exports=s},function(t,e,i){"use strict";(function(e){
/*!
 * rpcbase.js - json rpc for vallnet.
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1);var s=i(14);const n=i(29),o=i(60),a=i(64),h=i(13),c=i(32),u=i(122),l=i(53),f=i(54),d=i(8),p=i(59).signObj,g=i(9),m=i(103);class w extends s{constructor(t){super(),this.logger=o.global,this.calls=Object.create(null),this.mounts=[],this.locker=new n,this.network=t.network}async isReady(){return!0}async execute(t,e,i){(t="string"==typeof t?{method:t}:t).params||(t.params=[]),t.cid||(t.cid=g.ROOT);var r=this.calls[t.method];if(r){if(await this.isReady(i))return r.call(this,t.params,e,i);throw new a(w.errors.METHOD_NOT_FOUND,`sync not ready: ${t.method}.`)}for(const r of this.mounts)if(r.calls[t.method])return r.execute(t,e,i);throw new a(w.errors.METHOD_NOT_FOUND,`Method not found: ${t.method}.`)}async calles(t,i){let r=t,s=[],n=!0;Array.isArray(r)||(r=[r],n=!1);for(const n of r)if(n&&"object"==typeof n)if(n.id&&"object"==typeof n.id)s.push({result:null,code:w.errors.INVALID_REQUEST,error:{type:"RPCError",message:"Invalid ID."},id:null});else if(n.id||(n.id=null),n.params||(n.params=[]),"string"!=typeof n.method)s.push({code:w.errors.METHOD_NOT_FOUND,result:null,error:{type:"RPCError",message:"Method not found."},id:n.id});else if(Array.isArray(n.params)){let r;"getwork"!==n.method&&"block.template.admin"!==n.method&&"block.best"!==n.method&&(this.logger.debug("Handling RPC call: %s.",n.method),"block.submit.admin"!==n.method)&&"getmemorypool"!==n.method&&this.logger.debug(n.params);try{r=await this.execute(n,!1,i)}catch(t){let e;switch(t.type){case"RPCError":e=t.code;break;case"ValidationError":e=w.errors.TYPE_ERROR;break;case"EncodingError":e=w.errors.DESERIALIZATION_ERROR;break;case"FundingError":e=w.errors.WALLET_INSUFFICIENT_FUNDS;break;default:e=w.errors.INTERNAL_ERROR,this.logger.error("RPC internal error."),this.logger.error(t)}s.push({code:e,error:{type:t.type,message:t.message},result:null,id:n.id});continue}void 0===r&&(r=null);var o=f.getHmac(n.cid,this.keys.hmacSalt).token;o=m.generateKey(d.hash256(e.from(o)));let a=null;null!=r&&(a=p(r,o.private)),s.push({code:0,error:null,result:r,sig:a,id:n.id})}else s.push({code:w.errors.INVALID_PARAMS,result:null,error:{type:"RPCError",message:"Invalid params."},id:n.id});else s.push({code:w.errors.INVALID_REQUEST,result:null,error:{type:"RPCError",message:"Invalid request."},id:null});return n||delete(s=s[0]).id,s}add(t,e){try{r("function"==typeof e,"Handler must be a function."),Array.isArray(t)?t.map(t=>this.add(t,e)):(r(!this.calls[t],`Duplicate RPC call ${t}.`),this.calls[t]=e)}catch(t){console.error(t)}}mount(t){r(t,"RPC must be an object."),r("function"==typeof t.execute,"Execute must be a method."),this.mounts.push(t)}static parseAddress(t,e){try{return h.fromString(t,e)}catch(t){throw new a(w.errors.INVALID_ADDRESS_OR_KEY,"Invalid address.")}}static parseSecret(t,e){try{return c.fromSecret(t,e)}catch(t){throw new a(w.errors.INVALID_ADDRESS_OR_KEY,"Invalid key.")}}static parseHash(t,e){return w.parseAddress(t,e).getHash("hex")}static parseNetAddress(t,e){try{return u.fromHostname(t,e)}catch(t){throw new a(w.errors.CLIENT_INVALID_IP_OR_SUBNET,"Invalid IP address or subnet.")}}static parseIP(t,e){try{return l.fromHostname(t,e.port)}catch(t){throw new a(errs.CLIENT_INVALID_IP_OR_SUBNET,"Invalid IP address or subnet.")}}}w.errors={INVALID_REQUEST:-32600,METHOD_NOT_FOUND:-32601,INVALID_PARAMS:-32602,INTERNAL_ERROR:-32603,PARSE_ERROR:-32700,MISC_ERROR:-1,FORBIDDEN_BY_SAFE_MODE:-2,TYPE_ERROR:-3,INVALID_ADDRESS_OR_KEY:-5,OUT_OF_MEMORY:-7,INVALID_PARAMETER:-8,DATABASE_ERROR:-20,DESERIALIZATION_ERROR:-22,VERIFY_ERROR:-25,VERIFY_REJECTED:-26,VERIFY_ALREADY_IN_CHAIN:-27,IN_WARMUP:-28,TRANSACTION_ERROR:-25,TRANSACTION_REJECTED:-26,TRANSACTION_ALREADY_IN_CHAIN:-27,CLIENT_NOT_CONNECTED:-9,CLIENT_IN_INITIAL_DOWNLOAD:-10,CLIENT_NODE_ALREADY_ADDED:-23,CLIENT_NODE_NOT_ADDED:-24,CLIENT_NODE_NOT_CONNECTED:-29,CLIENT_INVALID_IP_OR_SUBNET:-30,CLIENT_P2P_DISABLED:-31,WALLET_ERROR:-4,WALLET_INSUFFICIENT_FUNDS:-6,WALLET_INVALID_ACCOUNT_NAME:-11,WALLET_KEYPOOL_RAN_OUT:-12,WALLET_UNLOCK_NEEDED:-13,WALLET_PASSPHRASE_INCORRECT:-14,WALLET_WRONG_ENC_STATE:-15,WALLET_ENCRYPTION_FAILED:-16,WALLET_ALREADY_UNLOCKED:-17,PROP_MINVALUE:-1001},w.MAGIC_STRING="Gamegold Signed Message:\n",t.exports=w}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * common.js - p2p constants for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */i=i(79),e.PROTOCOL_VERSION=70015,e.MIN_VERSION=70001,e.HEADERS_VERSION=31800,e.PONG_VERSION=6e4,e.BLOOM_VERSION=70011,e.COMPACT_VERSION=70014,e.COMPACT_WITNESS_VERSION=70015,e.services={NETWORK:1,GETUTXO:2,BLOOM:4,WITNESS:8},e.LOCAL_SERVICES=0|e.services.NETWORK|e.services.WITNESS,e.REQUIRED_SERVICES=0|e.services.NETWORK,e.USER_AGENT=`/${i.protocol}:${i.version}/`,e.MAX_MESSAGE=5e7,e.BAN_TIME=86400,e.BAN_SCORE=100},function(t,e,i){"use strict";(function(e,r){var s=i(10).Buffer,n=e.crypto||e.msCrypto;n&&n.getRandomValues?t.exports=function(t,e){if(4294967295<t)throw new RangeError("requested too many random bytes");var i=s.allocUnsafe(t);if(0<t)if(65536<t)for(var o=0;o<t;o+=65536)n.getRandomValues(i.slice(o,o+65536));else n.getRandomValues(i);return"function"!=typeof e?i:r.nextTick((function(){e(null,i)}))}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,i(12),i(11))},function(t,e,i){"use strict";
/*!
 * layout-browser.js - walletdb and txdb layout for browser.
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1),s=i(3).pad32;(i=e).walletdb={binary:!1,p:function(t){return r("string"==typeof t),"p"+t},V:"V",CV:"CV",version:function(t){return s(t)},equalVersion:function(t,e){return t.toString()==s(e)},pp:function(t){return r("string"==typeof t),t.slice(1)},P:function(t,e){return r("string"==typeof e),"P"+s(t)+e},Pp:function(t){return r("string"==typeof t),t.slice(11)},r:function(t,e,i){return r("string"==typeof i),"r"+s(t)+s(e)+i},rr:function(t){return r("string"==typeof t),t.slice(21)},w:function(t){return"w"+s(t)},ww:function(t){return r("string"==typeof t),parseInt(t.slice(1),10)},l:function(t){return r("string"==typeof t),"l"+t},ll:function(t){return r("string"==typeof t),t.slice(1)},log:function(t,e,i,n){return r("number"==typeof t),r("number"==typeof e),r("number"==typeof i),r("string"==typeof n),"log"+s(t)+s(e)+s(i)+n},a:function(t,e){return"a"+s(t)+s(e)},i:function(t,e){return r("number"==typeof t),r("string"==typeof e),"i"+s(t)+e},ii:function(t){return r("string"==typeof t),[parseInt(t.slice(1,11),10),t.slice(11)]},n:function(t,e){return"n"+s(t)+s(e)},ms:function(t,e){return"ms"+t+e},R:"R",h:function(t){return"h"+s(t)},b:function(t){return"b"+s(t)},bb:function(t){return r("string"==typeof t),parseInt(t.slice(1),10)},o:function(t,e){return r("string"==typeof t),"o"+t+s(e)},oo:function(t){return[t.slice(1,65),parseInt(t.slice(65),10)]}},i.txdb={binary:!1,prefix:function(t,e){return r("string"==typeof e),"t"+s(t)+e},pre:function(t){return r("string"==typeof t),parseInt(t.slice(1,11),10)},R:"R",hi:function(t,e,i){return r("string"==typeof e),t+e+s(i)},hii:function(t){return r("string"==typeof t),[(t=t.slice(12)).slice(0,64),parseInt(t.slice(64),10)]},ih:function(t,e,i){return r("string"==typeof i),t+s(e)+i},ihh:function(t){return r("string"==typeof t),t=t.slice(12),[parseInt(t.slice(0,10),10),t.slice(10)]},iih:function(t,e,i,n){return r("string"==typeof n),t+s(e)+s(i)+n},iihh:function(t){return r("string"==typeof t),t=t.slice(12),[parseInt(t.slice(0,10),10),parseInt(t.slice(10,20),10),t.slice(20)]},ihi:function(t,e,i,n){return r("string"==typeof i),t+s(e)+i+s(n)},ihii:function(t){return r("string"==typeof t),t=t.slice(12),[parseInt(t.slice(0,10),10),t.slice(10,74),parseInt(t.slice(74),10)]},ha:function(t,e){return r("string"==typeof e),t+e},haa:function(t){return r("string"==typeof t),t.slice(12)},AU:function(t){return r("string"==typeof t),"AU"+t},C:function(t,e,i){return this.ihi("C",t,e,i)},Cc:function(t){return this.ihii(t)},CT:function(t){return r("string"==typeof t),"CT"+t},ER:function(t){return r("string"==typeof t),"ER"+t},ERR:function(t,e,i){return r("string"==typeof t),r("string"==typeof e),r("string"==typeof i),"ERR"+t+e+i},ERRR:function(t){return[(t=t.toString()).slice(3,69),t.slice(69,133),t.slice(133,197)]},ERA:function(t){return r("string"==typeof t),"ERA"+t},H:function(t,e,i){return this.iih("H",t,e,i)},Hh:function(t){return this.iihh(t)},S:function(t,e){return this.hi("S",t,e)},Ss:function(t){return this.hii(t)},T:function(t,e){return this.ih("T",t,e)},Tt:function(t){return this.ihh(t)},M:function(t,e,i){return this.iih("M",t,e,i)},Mm:function(t){return this.iihh(t)},P:function(t,e){return this.ih("P",t,e)},Pp:function(t){return this.ihh(t)},VC:function(t,e){return"VC"+t+s(e)},VP:function(t){return"VP"+t},VPc:function(t){return r("string"==typeof t),r(38===t.length),t.slice(2,38)},VH:function(t,e){return"VH"+t+s(e)},b:function(t){return"b"+s(t)},bb:function(t){return r("string"==typeof t),t=t.slice(12),parseInt(t.slice(0),10)},c:function(t,e){return this.hi("c",t,e)},cc:function(t){return this.hii(t)},cp:function(t){return"cp"+t},cpp:function(t){return r("string"==typeof t),r(38===t.length),t.slice(2)},d:function(t,e){return this.hi("d",t,e)},dd:function(t){return this.hii(t)},de:function(t){return this.ha("de",t)},h:function(t,e){return this.ih("h",t,e)},hh:function(t){return this.ihh(t)},m:function(t,e){return this.ih("m",t,e)},mm:function(t){return this.ihh(t)},p:function(t){return this.ha("p",t)},pp:function(t){return this.haa(t)},r:function(t){return this.ha("r",t)},s:function(t,e){return this.hi("s",t,e)},ss:function(t){return this.hii(t)},t:function(t){return this.ha("t",t)},tt:function(t){return this.haa(t)},tx:function(t){return"tx"+t},v:function(t){return"v"+t},vv:function(t){return r("string"==typeof t),r(37===t.length),t.slice(1)}}},function(t,e,i){"use strict";var r={};function s(t,e,i){var s=function(t){var i,r;function s(i,r,s){return t.call(this,(i=i,r=r,s=s,"string"==typeof e?e:e(i,r,s)))||this}return r=t,(i=s).prototype=Object.create(r.prototype),(i.prototype.constructor=i).__proto__=r,s}(i=i||Error);s.prototype.name=i.name,s.prototype.code=t,r[t]=s}s("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),s("ERR_INVALID_ARG_TYPE",(function(t,e,i){var r,s,n,o,a;return"string"==typeof e&&(o="not ",e.substr(!n||n<0?0:+n,o.length)===o)?(r="must not be",e=e.replace(/^not /,"")):r="must be",n=t,o=" argument",(void 0===a||a>n.length)&&(a=n.length),(n=(n.substring(a-o.length,a)===o?"The ".concat(t," "):(a=(s="number"!=typeof s?0:s)+(n=".").length>(a=t).length||-1===a.indexOf(n,s)?"argument":"property",'The "'.concat(t,'" ').concat(a," "))).concat(r," ").concat(function(t,e){var i;return Array.isArray(t)?(i=t.length,t=t.map((function(t){return String(t)})),2<i?"one of ".concat(e," ").concat(t.slice(0,i-1).join(", "),", or ")+t[i-1]:2===i?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])):"of ".concat(e," ").concat(String(t))}(e,"type")))+". Received type ".concat(typeof i)}),TypeError),s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),s("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),s("ERR_STREAM_PREMATURE_CLOSE","Premature close"),s("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),s("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),s("ERR_STREAM_WRITE_AFTER_END","write after end"),s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),s("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=r},function(t,e,i){"use strict";(function(e){var r=Object.keys||function(t){var e,i=[];for(e in t)i.push(e);return i},s=(t.exports=c,i(233)),n=i(237);i(5)(c,s);for(var o=r(n.prototype),a=0;a<o.length;a++){var h=o[a];c.prototype[h]||(c.prototype[h]=n.prototype[h])}function c(t){if(!(this instanceof c))return new c(t);s.call(this,t),n.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen)&&(this.allowHalfOpen=!1,this.once("end",u))}function u(){this._writableState.ended||e.nextTick(l,this)}function l(t){t.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this,i(11))},function(t,e,i){"use strict";(function(e){
/*!
 * headers.js - headers object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(3);var s=i(101);const n=i(6),o=i(2);class a extends s{constructor(t){super(),t&&this.parseOptions(t)}verifyBody(t){return!0}getSize(){return 81}toWriter(t){return this.writeHead(t),t.writeVarint(0),t}toRaw(){var t=this.getSize();return this.toWriter(new n(t)).render()}fromReader(t){return this.readHead(t),t.readVarint(),this}fromRaw(t){return this.fromReader(new o(t))}static fromReader(t){return(new a).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new a).fromRaw(t)}static fromHead(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new a).fromHead(t)}static fromEntry(t){var i=new a;return i.version=t.version,i.prevBlock=t.prevBlock,i.merkleRoot=t.merkleRoot,i.time=t.time,i.bits=t.bits,i.nonce=t.nonce,i._hash=e.from(t.hash,"hex"),i._hhash=t.hash,i}toHeaders(){return this}static fromBlock(t){var e=new a(t);return e._hash=t._hash,e._hhash=t._hhash,e}formatInsight(){return{hash:this.rhash(),version:this.version,prevHash:r.revHex(this.prevBlock),merkleRoot:r.revHex(this.merkleRoot),time:this.time,bits:this.bits,nonce:this.nonce}}toJSON(){return this.getJSON()}getJSON(t,e,i){return{hash:this.rhash(),height:i,version:this.version,prevBlock:r.revHex(this.prevBlock),merkleRoot:r.revHex(this.merkleRoot),time:this.time,bits:this.bits,nonce:this.nonce}}fromJSON(t){return this.parseJSON(t),this}static fromJSON(t){return(new a).fromJSON(t)}inspect(){return this.format()}format(t,e){return{hash:this.rhash(),height:null!=e?e:-1,date:r.date(this.time),version:r.hex32(this.version),prevBlock:r.revHex(this.prevBlock),merkleRoot:r.revHex(this.merkleRoot),time:this.time,bits:this.bits,nonce:this.nonce}}static isHeaders(t){return t instanceof a}}t.exports=a}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(t,i){
/*!
 * random-browser.js - randomness for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=t.crypto||t.msCrypto||{};e.randomBytes=function(t){return t=new Uint8Array(t),r.getRandomValues(t),i.from(t.buffer)},r.getRandomValues||(e.randomBytes=function(t){var e=i.allocUnsafe(t);for(let t=0;t<e.length;t++)e[t]=Math.floor(256*Math.random());return e}),e.randomInt=function(){return e.randomBytes(4).readUInt32LE(0,!0)},e.randomRange=function(t,i){var r=e.randomInt();return Math.floor(r/4294967296*(i-t)+t)}}).call(this,i(12),i(0).Buffer)},function(t,e,i){"use strict";var r={};function s(t,e,i){var s=function(t){var i,r;function s(i,r,s){return t.call(this,(i=i,r=r,s=s,"string"==typeof e?e:e(i,r,s)))||this}return r=t,(i=s).prototype=Object.create(r.prototype),(i.prototype.constructor=i).__proto__=r,s}(i=i||Error);s.prototype.name=i.name,s.prototype.code=t,r[t]=s}s("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),s("ERR_INVALID_ARG_TYPE",(function(t,e,i){var r,s,n,o,a;return"string"==typeof e&&(o="not ",e.substr(!n||n<0?0:+n,o.length)===o)?(r="must not be",e=e.replace(/^not /,"")):r="must be",n=t,o=" argument",(void 0===a||a>n.length)&&(a=n.length),(n=(n.substring(a-o.length,a)===o?"The ".concat(t," "):(a=(s="number"!=typeof s?0:s)+(n=".").length>(a=t).length||-1===a.indexOf(n,s)?"argument":"property",'The "'.concat(t,'" ').concat(a," "))).concat(r," ").concat(function(t,e){var i;return Array.isArray(t)?(i=t.length,t=t.map((function(t){return String(t)})),2<i?"one of ".concat(e," ").concat(t.slice(0,i-1).join(", "),", or ")+t[i-1]:2===i?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])):"of ".concat(e," ").concat(String(t))}(e,"type")))+". Received type ".concat(typeof i)}),TypeError),s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),s("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),s("ERR_STREAM_PREMATURE_CLOSE","Premature close"),s("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),s("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),s("ERR_STREAM_WRITE_AFTER_END","write after end"),s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),s("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=r},function(t,e,i){"use strict";(function(e){var r=Object.keys||function(t){var e,i=[];for(e in t)i.push(e);return i},s=(t.exports=c,i(255)),n=i(259);i(5)(c,s);for(var o=r(n.prototype),a=0;a<o.length;a++){var h=o[a];c.prototype[h]||(c.prototype[h]=n.prototype[h])}function c(t){if(!(this instanceof c))return new c(t);s.call(this,t),n.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen)&&(this.allowHalfOpen=!1,this.once("end",u))}function u(){this._writableState.ended||e.nextTick(l,this)}function l(t){t.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this,i(11))},function(t,e,i){var r=i(10).Buffer;function s(t,e){this._block=r.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}s.prototype.update=function(t,e){"string"==typeof t&&(t=r.from(t,e=e||"utf8"));for(var i=this._block,s=this._blockSize,n=t.length,o=this._len,a=0;a<n;){for(var h=o%s,c=Math.min(n-a,s-h),u=0;u<c;u++)i[h+u]=t[a+u];a+=c,(o+=c)%s==0&&this._update(i)}return this._len+=n,this},s.prototype.digest=function(t){var e=this._len%this._blockSize;(e=(this._block[e]=128,this._block.fill(0,1+e),e>=this._finalSize&&(this._update(this._block),this._block.fill(0)),8*this._len))<=4294967295||this._block.writeUInt32BE((e-(e=(4294967295&e)>>>0))/4294967296,this._blockSize-8),this._block.writeUInt32BE(e,this._blockSize-4),this._update(this._block),e=this._hash();return t?e.toString(t):e},s.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=s},function(t,e,i){"use strict";var r={};function s(t,e,i){var s=function(t){var i,r;function s(i,r,s){return t.call(this,(i=i,r=r,s=s,"string"==typeof e?e:e(i,r,s)))||this}return r=t,(i=s).prototype=Object.create(r.prototype),(i.prototype.constructor=i).__proto__=r,s}(i=i||Error);s.prototype.name=i.name,s.prototype.code=t,r[t]=s}s("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),s("ERR_INVALID_ARG_TYPE",(function(t,e,i){var r,s,n,o,a;return"string"==typeof e&&(o="not ",e.substr(!n||n<0?0:+n,o.length)===o)?(r="must not be",e=e.replace(/^not /,"")):r="must be",n=t,o=" argument",(void 0===a||a>n.length)&&(a=n.length),(n=(n.substring(a-o.length,a)===o?"The ".concat(t," "):(a=(s="number"!=typeof s?0:s)+(n=".").length>(a=t).length||-1===a.indexOf(n,s)?"argument":"property",'The "'.concat(t,'" ').concat(a," "))).concat(r," ").concat(function(t,e){var i;return Array.isArray(t)?(i=t.length,t=t.map((function(t){return String(t)})),2<i?"one of ".concat(e," ").concat(t.slice(0,i-1).join(", "),", or ")+t[i-1]:2===i?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])):"of ".concat(e," ").concat(String(t))}(e,"type")))+". Received type ".concat(typeof i)}),TypeError),s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),s("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),s("ERR_STREAM_PREMATURE_CLOSE","Premature close"),s("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),s("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),s("ERR_STREAM_WRITE_AFTER_END","write after end"),s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),s("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=r},function(t,e,i){"use strict";(function(e){var r=Object.keys||function(t){var e,i=[];for(e in t)i.push(e);return i},s=(t.exports=c,i(284)),n=i(288);i(5)(c,s);for(var o=r(n.prototype),a=0;a<o.length;a++){var h=o[a];c.prototype[h]||(c.prototype[h]=n.prototype[h])}function c(t){if(!(this instanceof c))return new c(t);s.call(this,t),n.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen)&&(this.allowHalfOpen=!1,this.once("end",u))}function u(){this._writableState.ended||e.nextTick(l,this)}function l(t){t.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this,i(11))},function(t,e,i){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,s=Function.prototype.apply;function n(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new n(s.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new n(s.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},i(387),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i(12))},function(t,e,i){"use strict";
/*!
 * pkg.js - package constants
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */e.protocol="vallnet",e.version="v5.0.9",e.url="https://github.com/bookmansoft/gamegold"},function(t,e,i){(function(t){function i(t,e){for(var i=0,r=t.length-1;0<=r;r--){var s=t[r];"."===s?t.splice(r,1):".."===s?(t.splice(r,1),i++):i&&(t.splice(r,1),i--)}if(e)for(;i--;)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var i=[],r=0;r<t.length;r++)e(t[r],r,t)&&i.push(t[r]);return i}e.resolve=function(){for(var e="",s=!1,n=arguments.length-1;-1<=n&&!s;n--){var o=0<=n?arguments[n]:t.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,s="/"===o.charAt(0))}return(s?"/":"")+(e=i(r(e.split("/"),(function(t){return!!t})),!s).join("/"))||"."},e.normalize=function(t){var n=e.isAbsolute(t),o="/"===s(t,-1);return(t=(t=i(r(t.split("/"),(function(t){return!!t})),!n).join("/"))||n?t:".")&&o&&(t+="/"),(n?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,i){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;0<=i&&""===t[i];i--);return i<e?[]:t.slice(e,i-e+1)}t=e.resolve(t).substr(1),i=e.resolve(i).substr(1);for(var s=r(t.split("/")),n=r(i.split("/")),o=Math.min(s.length,n.length),a=o,h=0;h<o;h++)if(s[h]!==n[h]){a=h;break}var c=[];for(h=a;h<s.length;h++)c.push("..");return(c=c.concat(n.slice(a))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=47===t.charCodeAt(0),i=-1,r=!0,s=t.length-1;1<=s;--s)if(47===t.charCodeAt(s)){if(!r){i=s;break}}else r=!1;return-1===i?e?"/":".":e&&1===i?"/":t.slice(0,i)},e.basename=function(t,e){return t=function(t){"string"!=typeof t&&(t+="");for(var e=0,i=-1,r=!0,s=t.length-1;0<=s;--s)if(47===t.charCodeAt(s)){if(!r){e=s+1;break}}else-1===i&&(r=!1,i=s+1);return-1===i?"":t.slice(e,i)}(t),e&&t.substr(-1*e.length)===e?t.substr(0,t.length-e.length):t},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,i=0,r=-1,s=!0,n=0,o=t.length-1;0<=o;--o){var a=t.charCodeAt(o);if(47===a){if(s)continue;i=o+1;break}-1===r&&(s=!1,r=o+1),46===a?-1===e?e=o:1!==n&&(n=1):-1!==e&&(n=-1)}return-1===e||-1===r||0===n||1===n&&e===r-1&&e===i+1?"":t.slice(e,r)};var s="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(this,i(11))},function(t,e,i){"use strict";
/*!
 * cleanse.js - memzero for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */i=i(57).binding;let r=0;t.exports=function(t){let e=r;for(let i=0;i<t.length;i++)t[i]=255&e,e+=i;r=e>>>0},i&&(e.cleanse=i.cleanse)},function(t,e,i){"use strict";function r(t){if(t){var e,i=t;for(e in r.prototype)i[e]=r.prototype[e];return i}}i.d(e,"a",(function(){return r})),r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)this._callbacks={};else{var i=this._callbacks["$"+t];if(i)if(1==arguments.length)delete this._callbacks["$"+t];else{for(var r,s=0;s<i.length;s++)if((r=i[s])===e||r.fn===e){i.splice(s,1);break}0===i.length&&delete this._callbacks["$"+t]}}return this},r.prototype.emitReserved=r.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),i=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(i){r=0;for(var s=(i=i.slice(0)).length;r<s;++r)i[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,i){"use strict";i.d(e,"c",(function(){return s})),i.d(e,"b",(function(){return a})),i.d(e,"a",(function(){return h}));var r=i(84);function s(t,...e){return e.reduce((e,i)=>(t.hasOwnProperty(i)&&(e[i]=t[i]),e),{})}const n=setTimeout,o=clearTimeout;function a(t,e){e.useNativeTimers?(t.setTimeoutFn=n.bind(r.a),t.clearTimeoutFn=o.bind(r.a)):(t.setTimeoutFn=setTimeout.bind(r.a),t.clearTimeoutFn=clearTimeout.bind(r.a))}function h(t){if("string"!=typeof t)return Math.ceil(1.33*(t.byteLength||t.size));{var e=t;let i=0,r=0;for(let t=0,s=e.length;t<s;t++)(i=e.charCodeAt(t))<128?r+=1:i<2048?r+=2:i<55296||57344<=i?r+=3:(t++,r+=4);return r}}},function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));const r="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},function(t,e,i){"use strict";i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return s})),i.d(e,"d",(function(){return n})),i.d(e,"b",(function(){return o})),e=i(84);const r="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),s=e.a.WebSocket||e.a.MozWebSocket,n=!0,o="arraybuffer"},function(t,e,i){"use strict";var r=i(39),s=i(33);function n(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}(e.BlockHash=n).prototype.update=function(t,e){if(t=r.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){e=(t=this.pending).length%this._delta8,this.pending=t.slice(t.length-e,t.length),0===this.pending.length&&(this.pending=null),t=r.join32(t,0,t.length-e,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this},n.prototype.digest=function(t){return this.update(this._pad()),s(null===this.pending),this._digest(t)},n.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,i=e-(t+this.padLength)%e,r=new Array(i+this.padLength);r[0]=128;for(var s=1;s<i;s++)r[s]=0;if(t<<=3,"big"===this.endian){for(var n=8;n<this.padLength;n++)r[s++]=0;r[s++]=0,r[s++]=0,r[s++]=0,r[s++]=0,r[s++]=t>>>24&255,r[s++]=t>>>16&255,r[s++]=t>>>8&255,r[s++]=255&t}else for(r[s++]=255&t,r[s++]=t>>>8&255,r[s++]=t>>>16&255,r[s++]=t>>>24&255,r[s++]=0,r[s++]=0,r[s++]=0,r[s++]=0,n=8;n<this.padLength;n++)r[s++]=0;return r}},function(t,e,i){"use strict";
/*!
 * checkcontract.js - check contract outside of gamegold chain.
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(9);i=e;class s{constructor(){this.checks=[]}getCheck(t){return this.checks.filter(e=>e.coinType==t)}}class n{constructor(t,e,i,r){this.coinType=t,this.url=e,this.check=i,this.verify=r}}function o(t,e,i){return 0==t}function a(t,e,i){return t>=e.dst}function h(t,e,i){return 0==t.n_tx}function c(t,e,i){let r=!1;return!!(t&&t.total_received>=e.dst)||r}function u(t,e,i){return!(0!==t.err_no||!t.data||0!==t.data.received)}function l(t,e,i){let r=!1;return!!(0===t.err_no&&t.data&&t.data.received>=e.dst)||r}function f(t,e,i){return!("success"!=t.status||!t.data||0!=Number(t.data.confirmed_received_value*r.COIN))}function d(t,e,i){let s=!1;return!!("success"==t.status&&t.data&&Number(t.data.confirmed_received_value*r.COIN)>=e.dst)||s}function p(t,e,i){return!!(1==t.success&&t.address&&t.address.total&&t.address.total.received&&0==Number(t.address.total.received*r.COIN))}function g(t,e,i){let s=!1;return!!(1==t.success&&t.address&&t.address.total&&t.address.total.received&&Number(t.address.total.received*r.COIN)>=e.dst)||s}function m(t,e,i){return t.totalReceived&&t.totalReceived*r.COIN==0&&(verified=!0),!1}function w(t,e,i){return verified=!!(t.totalReceived&&t.totalReceived*r.COIN>=e.dst)||verified}i.main=new class extends s{constructor(){super(),this.checks.push(new n(1,"https://blockchain.info/q/getreceivedbyaddress/%s?confirmations=%d",o,a)),this.checks.push(new n(1,"https://explorer.bitcoin.com/api/btc/addr/%s",m,w)),this.checks.push(new n(1,"https://api.blockcypher.com/v1/btc/main/addrs/%s",h,c)),this.checks.push(new n(1,"https://chain.api.btc.com/v3/address/%s",u,l)),this.checks.push(new n(1,"https://chain.so/api/v2/get_address_received/BTC/%s",f,d)),this.checks.push(new n(1,"https://api.smartbit.com.au/v1/blockchain/addr/%s?dir=desc&limit=10&next=&prev=&sort=block_index",p,g))}},i.testnet=new class extends s{constructor(){super(),this.checks.push(new n(1,"https://api.blockcypher.com/v1/btc/test3/addrs/%s",h,c)),this.checks.push(new n(1,"https://tchain.api.btc.com/v3/address/%s/",u,l)),this.checks.push(new n(1,"https://chain.so/api/v2/get_address_received/BTCTEST/%s",f,d)),this.checks.push(new n(1,"https://testnet-api.smartbit.com.au/v1/blockchain/addr/%s?dir=desc&limit=10&next=&prev=&sort=block_index",p,g))}},i.regtest=new s,i.simnet=new s},function(t,e,i){"use strict";e.version=i(361).version,e.utils=i(34),e.rand=i(150),e.curve=i(229),e.curves=i(151),e.ec=i(368),e.eddsa=i(371)},function(t,e,i){"use strict";(function(e){
/*!
 * scriptnum.js - script number object for vallnet.
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(97).I64,n=i(99),o=e.alloc(0);class a extends s{constructor(t,e){super(t,e)}getInt(){return this.lt(s.INT32_MIN)?s.LONG_MIN:this.gt(s.INT32_MAX)?s.LONG_MAX:this.toInt()}toRaw(){let t=this;if(t.isZero())return o;let i=!1;t.isNeg()&&(t=t.neg(),i=!0);var s=t.byteLength();let n=0;t.testn(8*s-1)&&(n=1);var a=e.allocUnsafe(s+n);switch(s){case 8:a[7]=t.hi>>>24&255;case 7:a[6]=t.hi>>16&255;case 6:a[5]=t.hi>>8&255;case 5:a[4]=255&t.hi;case 4:a[3]=t.lo>>>24&255;case 3:a[2]=t.lo>>16&255;case 2:a[1]=t.lo>>8&255;case 1:a[0]=255&t.lo}return 128&a[s-1]?(r(1===n),r(a.length===s+n),a[s]=i?128:0):i?(r(0===n),r(a.length===s),a[s-1]|=128):(r(0===n),r(a.length===s)),a}fromRaw(t){if(r(e.isBuffer(t)),0!==t.length){switch(t.length){case 8:this.hi|=t[7]<<24;case 7:this.hi|=t[6]<<16;case 6:this.hi|=t[5]<<8;case 5:this.hi|=t[4];case 4:this.lo|=t[3]<<24;case 3:this.lo|=t[2]<<16;case 2:this.lo|=t[1]<<8;case 1:this.lo|=t[0];break;default:for(let e=0;e<t.length;e++)this.orb(e,t[e])}128&t[t.length-1]&&(this.setn(8*t.length-1,0),this.ineg())}return this}encode(){return this.toRaw()}decode(t,i,s){if(r(e.isBuffer(t)),null!=s&&t.length>s)throw new n("UNKNOWN_ERROR","Script number overflow.");if(i&&!a.isMinimal(t))throw new n("UNKNOWN_ERROR","Non-minimal script number.");return this.fromRaw(t)}inspect(){return`<ScriptNum: ${this.toString(10)}>`}static isMinimal(t){if(r(e.isBuffer(t)),0!==t.length&&0==(127&t[t.length-1])){if(1===t.length)return!1;if(0==(128&t[t.length-2]))return!1}return!0}static decode(t,e,i){return(new a).decode(t,e,i)}static isScriptNum(t){return t instanceof a}}t.exports=a}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * bloom.js - bloom filter for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=i(134),n=i(2),o=i(6),a=i(4),h=s.sum32,c=s.mul32,u=e.alloc(0);class l{constructor(t,e,i,r){this.filter=u,this.size=0,this.n=0,this.tweak=0,this.update=l.flags.NONE,null!=t&&this.fromOptions(t,e,i,r)}fromOptions(t,i,s,n){r("number"==typeof t,"`size` must be a number."),r(0<t,"`size` must be greater than zero."),r(Number.isSafeInteger(t),"`size` must be an integer.");var o=e.allocUnsafe((t-=t%8)/8);return o.fill(0),null!=s&&-1!==s||(s=4294967296*Math.random()>>>0),"string"==typeof(n=null!=n&&-1!==n?n:l.flags.NONE)&&(n=l.flags[n.toUpperCase()],r(null!=n,"Unknown update flag.")),r(0<t,"`size` must be greater than zero."),r(0<i,"`n` must be greater than zero."),r(Number.isSafeInteger(i),"`n` must be an integer."),r("number"==typeof s,"`tweak` must be a number."),r(Number.isSafeInteger(s),"`tweak` must be an integer."),r(l.flagsByVal[n],"Unknown update flag."),this.filter=o,this.size=t,this.n=i,this.tweak=s,this.update=n,this}static fromOptions(t,e,i,r){return(new l).fromOptions(t,e,i,r)}hash(t,e){return s(t,h(c(e,4221880213),this.tweak))%this.size}reset(){this.filter.fill(0)}add(t,i){"string"==typeof t&&(t=e.from(t,i));for(let e=0;e<this.n;e++){var r=this.hash(t,e);this.filter[r>>>3]|=1<<(7&r)}}test(t,i){"string"==typeof t&&(t=e.from(t,i));for(let e=0;e<this.n;e++){var r=this.hash(t,e);if(0==(this.filter[r>>>3]&1<<(7&r)))return!1}return!0}added(t,i){let r=!1;"string"==typeof t&&(t=e.from(t,i));for(let e=0;e<this.n;e++){var s=this.hash(t,e);r||0!=(this.filter[s>>>3]&1<<(7&s))||(r=!0),this.filter[s>>>3]|=1<<(7&s)}return r}static fromRate(t,e,i){return r("number"==typeof t,"`items` must be a number."),r(0<t,"`items` must be greater than zero."),r(Number.isSafeInteger(t),"`items` must be an integer."),r("number"==typeof e,"`rate` must be a number."),r(0<=e&&e<=1,"`rate` must be between 0.0 and 1.0."),e=-2.0813689810056077*t*Math.log(e)|0,e=Math.max(8,e),-1!==i&&r(e<=8*l.MAX_BLOOM_FILTER_SIZE,"Bloom filter size violates policy limits!"),t=Math.max(1,e/t*.6931471805599453|0),-1!==i&&r(t<=l.MAX_HASH_FUNCS,"Bloom filter size violates policy limits!"),new l(e,t,-1,i)}isWithinConstraints(){return!(this.size>8*l.MAX_BLOOM_FILTER_SIZE||this.n>l.MAX_HASH_FUNCS)}getSize(){return a.sizeVarBytes(this.filter)+13}toWriter(t){return t.writeVarBytes(this.filter),t.writeU32(this.n),t.writeU32(this.tweak),t.writeU32(this.size),t.writeU8(this.update),t}toRaw(){var t=this.getSize();return this.toWriter(new o(t)).render()}fromReader(t){return this.filter=t.readVarBytes(),this.n=t.readU32(),this.tweak=t.readU32(),this.size=t.readU32(),this.update=t.readU8(),r(null!=l.flagsByVal[this.update],"Unknown update flag."),this}fromRaw(t){return this.fromReader(new n(t))}static fromReader(t){return(new l).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new l).fromRaw(t)}}l.MAX_BLOOM_FILTER_SIZE=36e3,l.MAX_HASH_FUNCS=50,l.flags={NONE:0,ALL:1,PUBKEY_ONLY:2},l.flagsByVal={0:"NONE",1:"ALL",2:"PUBKEY_ONLY"},t.exports=l}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * mempool.js - mempool for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(9),s=i(72),n=i(3),o=i(208),a=i(7).ContractStatus;t.exports=class{constructor(t,e){this.checkpoint=t,this.data=e,this.id=e.type+"."+e.addr}async execute(t){var e=t.curHeight;if(this.checkpoint.getCheck(this.data.type)){try{var i=this.checkpoint.getCheck(this.data.type),h=s.randomRange(0,i.length);for(let s=0;s<i.length;s++){var c=i[(h+s)%i.length],u=n.sprintf(c.url,this.data.addr,r.contractConfirmation),l=await o.pGetUrl(u);if(!l||!c.verify(l,this.data,r.contractConfirmation))return e>this.data.period?(await t.transactionList.confirmContract(this.data,a.Expired,!1),[!0,a.Expired]):[!1,a.Promised]}return await t.transactionList.confirmContract(this.data,a.Confirmed,!1),[!0,a.Confirmed]}catch(t){}return[!1,a.Promised]}return await t.transactionList.confirmContract(this.data,a.Expired,!0),[!0,a.Expired]}}},function(t,e,i){"use strict";var r=i(5),s=i(188),n=i(190),o=i(191),a=i(50);function h(t){a.call(this,"digest"),this._hash=t}r(h,a),h.prototype._update=function(t){this._hash.update(t)},h.prototype._final=function(){return this._hash.digest()},t.exports=function(t){return"md5"===(t=t.toLowerCase())?new s:"rmd160"===t||"ripemd160"===t?new n:new h(o(t))}},function(t,e,i){function r(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===r(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===r(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===r(t)},e.isError=function(t){return"[object Error]"===r(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=i(0).Buffer.isBuffer},function(t,e,i){(function(e){t.exports=function(t,i){for(var r=Math.min(t.length,i.length),s=new e(r),n=0;n<r;++n)s[n]=t[n]^i[n];return s}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";var r=i(5);const s=i(202).Reporter,n=i(200).Buffer;function o(t,e){s.call(this,e),n.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function a(t,e){if(Array.isArray(t))this.length=0,this.value=t.map((function(t){return a.isEncoderBuffer(t)||(t=new a(t,e)),this.length+=t.length,t}),this);else if("number"==typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"==typeof t)this.value=t,this.length=n.byteLength(t);else{if(!n.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}r(o,s),(e.DecoderBuffer=o).isDecoderBuffer=function(t){return t instanceof o||"object"==typeof t&&n.isBuffer(t.base)&&"DecoderBuffer"===t.constructor.name&&"number"==typeof t.offset&&"number"==typeof t.length&&"function"==typeof t.save&&"function"==typeof t.restore&&"function"==typeof t.isEmpty&&"function"==typeof t.readUInt8&&"function"==typeof t.skip&&"function"==typeof t.raw},o.prototype.save=function(){return{offset:this.offset,reporter:s.prototype.save.call(this)}},o.prototype.restore=function(t){var e=new o(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,s.prototype.restore.call(this,t.reporter),e},o.prototype.isEmpty=function(){return this.offset===this.length},o.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},o.prototype.skip=function(t,e){var i;return this.offset+t<=this.length?((i=new o(this.base))._reporterState=this._reporterState,i.offset=this.offset,i.length=this.offset+t,this.offset+=t,i):this.error(e||"DecoderBuffer overrun")},o.prototype.raw=function(t){return this.base.slice((t||this).offset,this.length)},(e.EncoderBuffer=a).isEncoderBuffer=function(t){return t instanceof a||"object"==typeof t&&"EncoderBuffer"===t.constructor.name&&"number"==typeof t.length&&"function"==typeof t.join},a.prototype.join=function(t,e){return t=t||n.alloc(this.length),e=e||0,0!==this.length&&(Array.isArray(this.value)?this.value.forEach((function(i){i.join(t,e),e+=i.length})):("number"==typeof this.value?t[e]=this.value:"string"==typeof this.value?t.write(this.value,e):n.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length)),t}},function(t,e,i){"use strict";
/*!
 * path.js - path object for wallets
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1),s=i(2),n=i(6),o=i(4),a=i(13);class h{constructor(t){this.keyType=h.types.HD,this.id=null,this.wid=-1,this.name=null,this.account=0,this.branch=-1,this.index=-1,this.encrypted=!1,this.data=null,this.type=a.types.PUBKEYHASH,this.version=-1,this.hash=null,t&&this.fromOptions(t)}fromOptions(t){return this.keyType=t.keyType,this.id=t.id,this.wid=t.wid,this.name=t.name,this.account=t.account,this.branch=t.branch,this.index=t.index,this.encrypted=t.encrypted,this.data=t.data,this.type=t.type,this.version=t.version,this.hash=t.hash,this}static fromOptions(t){return(new h).fromOptions(t)}clone(){var t=new h;return t.keyType=this.keyType,t.id=this.id,t.wid=this.wid,t.name=this.name,t.account=this.account,t.branch=this.branch,t.index=this.index,t.encrypted=this.encrypted,t.data=this.data,t.type=this.type,t.version=this.version,t.hash=this.hash,t}fromRaw(t){var e=new s(t);switch(this.account=e.readU32(),this.keyType=e.readU8(),this.keyType){case h.types.HD:this.branch=e.readU32(),this.index=e.readU32();break;case h.types.KEY:this.encrypted=1===e.readU8(),this.data=e.readVarBytes();break;case h.types.ADDRESS:break;default:r(!1)}return this.version=e.readI8(),this.type=e.readU8(),129!==this.type&&130!==this.type||(this.type=4),this}static fromRaw(t){return(new h).fromRaw(t)}getSize(){let t=0;switch(t+=5,this.keyType){case h.types.HD:t+=8;break;case h.types.KEY:t=(t+=1)+o.sizeVarBytes(this.data)}return t+2}toRaw(){var t=this.getSize(),e=new n(t);switch(e.writeU32(this.account),e.writeU8(this.keyType),this.keyType){case h.types.HD:r(!this.data),r(-1!==this.index),e.writeU32(this.branch),e.writeU32(this.index);break;case h.types.KEY:r(this.data),r(-1===this.index),e.writeU8(this.encrypted?1:0),e.writeVarBytes(this.data);break;case h.types.ADDRESS:r(!this.data),r(-1===this.index);break;default:r(!1)}return e.writeI8(this.version),e.writeU8(this.type),e.render()}fromAddress(t,e){return this.keyType=h.types.ADDRESS,this.id=t.id,this.wid=t.wid,this.name=t.name,this.account=t.accountIndex,this.version=e.version,this.type=e.type,this.hash=e.getHash("hex"),this}static fromAddress(t,e){return(new h).fromAddress(t,e)}toPath(){return this.keyType!==h.types.HD?null:`m/${this.account}'/${this.branch}/`+this.index}toAddress(t){return a.fromHash(this.hash,this.type,this.version,t)}toJSON(){return{name:this.name,account:this.account,change:1===this.branch,derivation:this.toPath()}}inspect(){return`<Path: ${this.id}(${this.wid})/${this.name}:${this.toPath()}>`}}h.types={HD:0,KEY:1,ADDRESS:2},t.exports=h},function(t,e,i){"use strict";
/*!
 * int64.js - int64s for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */t.exports=i(346)},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){"use strict";
/*!
 * scripterror.js - script error for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */class r extends Error{constructor(t,e,i){super(),this.type="ScriptError",this.code=t,this.message=t,this.op=-1,this.ip=-1,"string"==typeof e?this.message=e:e&&(this.message=`${t} (op=${e.toSymbol()}, ip=${i})`,this.op=e.value,this.ip=i),Error.captureStackTrace&&Error.captureStackTrace(this,r)}}t.exports=r},function(t,e,i){"use strict";(function(e){
/*!
 * input.js - input object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=i(3),n=i(18),o=i(16),a=i(115),h=i(41),c=i(6),u=i(2),l=i(13),f=i(9);class d{constructor(t){this.prevout=new h,this.script=new o,this.sequence=4294967295,this.witness=new a,t&&this.fromOptions(t)}fromOptions(t){return r(t,"Input data is required."),this.prevout.fromOptions(t.prevout),t.script&&this.script.fromOptions(t.script),null!=t.sequence&&(r(s.isU32(t.sequence),"Sequence must be a uint32."),this.sequence=t.sequence),t.witness&&this.witness.fromOptions(t.witness),this}static fromOptions(t){return(new d).fromOptions(t)}clone(){var t=new d;return t.prevout=this.prevout,t.script.inject(this.script),t.sequence=this.sequence,t.witness.inject(this.witness),t}equals(t){return r(d.isInput(t)),this.prevout.equals(t.prevout)}compare(t){return r(d.isInput(t)),this.prevout.compare(t.prevout)}getType(t){if(this.isCoinbase())return"coinbase";if(t)return t.getType();let e;return e=(0<this.witness.items.length?this.witness:this.script).getInputType(),o.typesByVal[e].toLowerCase()}getRedeem(t){if(this.isCoinbase())return null;if(!t)return this.witness.isScripthashInput()?this.witness.getRedeem():this.script.isScripthashInput()?this.script.getRedeem():null;let e=t.script,i=null;return e.isScripthash()&&(e=this.script.getRedeem(),i=e),e&&e.isWitnessScripthash()&&(e=this.witness.getRedeem(),i=e),i}getSubtype(t){return!this.isCoinbase()&&(t=this.getRedeem(t))?(t=t.getType(),o.typesByVal[t].toLowerCase()):null}getAddress(t){return this.isCoinbase()?null:t?t.getAddress():0<this.witness.items.length?l.fromWitness(this.witness):l.fromInputScript(this.script)}getHash(t){var e=this.getAddress();return e?e.getHash(t):null}isFinal(){return 4294967295===this.sequence}isRBF(){return this.sequence<4294967294}isCoinbase(){return this.prevout.isNull()}inspect(){return this.format()}format(t){return{type:this.getType(t),subtype:this.getSubtype(t),address:this.getAddress(t),script:this.script,witness:this.witness,redeem:this.getRedeem(t),sequence:this.sequence,prevout:this.prevout,coin:t||null}}formatInsight(){return{prevout:{hash:this.prevout.hash,index:this.prevout.index},script:this.script,witness:this.witness,sequence:this.sequence,address:this.getAddress(),isCoinbase:this.isCoinbase()}}toJSON(t,e){return this.getJSON()}getJSON(t,e){let i;return t=n.get(t),e||(i=(i=this.getAddress())&&i.toString(t)),{prevout:this.prevout.toJSON(),script:this.script.toJSON(),witness:this.witness.toJSON(),sequence:this.sequence,address:i,coin:e?e.getJSON(t,!0):void 0}}fromJSON(t){return r(t,"Input data is required."),r(s.isU32(t.sequence),"Sequence must be a uint32."),this.prevout.fromJSON(t.prevout),this.script.fromJSON(t.script),this.witness.fromJSON(t.witness),this.sequence=t.sequence,this}static fromJSON(t){return(new d).fromJSON(t)}getSize(){return 40+this.script.getVarSize()}toRaw(){var t=this.getSize();return this.toWriter(new c(t)).render()}toWriter(t){return this.prevout.toWriter(t),t.writeVarBytes(this.script.toRaw()),t.writeU32(this.sequence),t}fromReader(t){return this.prevout.fromReader(t),this.script.fromRaw(t.readVarBytes()),this.sequence=t.readU32(),this}fromRaw(t){return this.fromReader(new u(t))}static fromReader(t){return(new d).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new d).fromRaw(t)}fromOutpoint(t){return r("string"==typeof t.hash),r("number"==typeof t.index),this.prevout.hash=t.hash,this.prevout.index=t.index,this}static fromOutpoint(t){return(new d).fromOutpoint(t)}fromCoin(t){return r("string"==typeof t.hash),r("number"==typeof t.index),this.prevout.hash=t.hash,this.prevout.index=t.index,(t=t.getSequence())&f.SEQUENCE_DISABLE_FLAG||(this.sequence=t),this}static fromCoin(t){return(new d).fromCoin(t)}fromTX(t,e){return r(t),r("number"==typeof e),r(0<=e&&e<t.outputs.length),this.prevout.hash=t.hash("hex"),this.prevout.index=e,this}static fromTX(t,e){return(new d).fromTX(t,e)}static isInput(t){return t instanceof d}}t.exports=d}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * abstractblock.js - abstract block object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */const r=i(1),s=i(3),n=i(8),o=i(2),a=i(6),h=i(48),c=i(4),u=i(9);t.exports=class{constructor(){this.version=1,this.prevBlock=c.NULL_HASH,this.merkleRoot=c.NULL_HASH,this.time=0,this.bits=0,this.nonce=0,this.mutable=!1,this._hash=null,this._hhash=null}parseOptions(t){return r(t,"Block data is required."),r(s.isU32(t.version)),r("string"==typeof t.prevBlock),r("string"==typeof t.merkleRoot),r(s.isU32(t.time)),r(s.isU32(t.bits)),r(s.isU32(t.nonce)),this.version=t.version,this.prevBlock=t.prevBlock,this.merkleRoot=t.merkleRoot,this.time=t.time,this.bits=t.bits,this.nonce=t.nonce,null!=t.mutable&&(this.mutable=Boolean(t.mutable)),this}parseJSON(t){return r(t,"Block data is required."),r(s.isU32(t.version)),r("string"==typeof t.prevBlock),r("string"==typeof t.merkleRoot),r(s.isU32(t.time)),r(s.isU32(t.bits)),r(s.isU32(t.nonce)),this.version=t.version,this.prevBlock=s.revHex(t.prevBlock),this.merkleRoot=s.revHex(t.merkleRoot),this.time=t.time,this.bits=t.bits,this.nonce=t.nonce,this}isMemory(){return!1}_refresh(){this._hash=null,this._hhash=null}refresh(){return this._refresh()}hash(t){let e=this._hash;if(e||(e=n.hash256(this.toHead()),this.mutable)||(this._hash=e),"hex"===t){let t=this._hhash;t||(t=e.toString("hex"),this.mutable)||(this._hhash=t),e=t}return e}toHead(){return this.writeHead(new a(80)).render()}fromHead(t){return this.readHead(new o(t))}writeHead(t){return t.writeU32(this.version),t.writeHash(this.prevBlock),t.writeHash(this.merkleRoot),t.writeU32(this.time),t.writeU32(this.bits),t.writeU32(this.nonce),t}readHead(t){return this.version=t.readU32(),this.prevBlock=t.readHash("hex"),this.merkleRoot=t.readHash("hex"),this.time=t.readU32(),this.bits=t.readU32(),this.nonce=t.readU32(),this}verify(){return!!this.verifyPOW()&&!!this.verifyBody()}verifyPOW(){return u.verifyPOW(this.hash(),this.bits)}verifyBody(){throw new Error("Abstract method.")}rhash(){return s.revHex(this.hash("hex"))}toInv(){return new h(h.types.BLOCK,this.hash("hex"))}}},function(t,e,i){
/*!
 * selector.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(22).opcodes;function s(t){let e=null;var i=s.list[t.type];return new(i?i.path:s.list[r.OP_INVALIDOPCODE])(t)}i(46),(s.list={})[r.OP_PROPCREATE]={name:"propcreate",path:i(159),desc:"道具创建"},s.list[r.OP_PROPEXCHANGE]={name:"propexchange",path:i(160),desc:"道具交易"},s.list[r.OP_HTLCSUGGEST]={name:"htlcsuggest",path:i(119),desc:"HTLC提议"},s.list[r.OP_HTLCASSENT]={name:"htlcassent",path:i(120),desc:"HTLC应答"},s.list[r.OP_COMMENT]={name:"comment",path:i(121),desc:"附言输出"},s.list[r.OP_INVALIDOPCODE]={name:"default",path:i(46),desc:""},t.exports=s},function(t,e,i){"use strict";
/*!
 * utils/index.js - utils for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */e.ASN1=i(231),e.AsyncObject=i(63),e.base32=i(210),e.base58=i(56),e.bech32=i(226),e.Bloom=i(90),e.co=i(36),e.encoding=i(4),e.enforce=i(425),e.fs=i(49),e.GCSFilter=i(426),e.Heap=i(253),e.Int64=i(97),e.IP=i(53),e.List=i(167),e.Lock=i(29),e.LRU=i(52),e.MappedLock=i(168),e.murmur3=i(134),e.nfkd=i(250),e.PEM=i(232),e.ProtoWriter=i(149),e.ProtoReader=i(148),e.RBT=i(246),e.BufferReader=i(2),e.RollingFilter=i(211),e.StaticWriter=i(6),e.util=i(3),e.Validator=i(104),e.BufferWriter=i(20);var{verifyData:r,signObj:s,verifyObj:n,generateKey:o}=i(59),r=(e.verifyData=r,e.signObj=s,e.verifyObj=n,e.generateKey=o,i(124)).sortWithSeq;e.sortWithSeq=r},function(t,e,i){"use strict";(function(e){
/*!
 * validator.js - validator for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(3);class n extends Error{constructor(t,e){super(),this.type="ValidationError",this.message=`${t=t,"number"==typeof(t=Array.isArray(t)?t[0]:t)?"Param #"+t:t} must be a ${e}.`,Error.captureStackTrace&&Error.captureStackTrace(this,n)}}t.exports=class{constructor(t){this.data=[],t&&this.init(t)}init(t){r(t&&"object"==typeof t),Array.isArray(t)||(t=[t]),this.data=t.map(t=>Array.isArray(t)?t.map(t=>t&&"string"==typeof t?t.replace(/\'/g,'"'):t):t&&"string"==typeof t?t.replace(/\'/g,'"'):t)}has(t){r("string"==typeof t||"number"==typeof t,"Key must be a string or number.");for(const e of this.data)if(null!=e[t])return!0;return!1}get(t,e){if(void 0===e&&(e=null),Array.isArray(t)){var i=t;for(const t of i){var s=this.get(t);if(null!==s)return s}}else{r("string"==typeof t||"number"==typeof t,"Key must be a string or number.");for(const e of this.data){if(!e||"object"!=typeof e)throw new n("data","object");var o=e[t];if(null!=o)return o}}return e}typeOf(t){return null==(t=this.get(t))?"null":typeof t}str(t,e){let i=this.get(t);if(void 0===e&&(e=null),null===i)return e;if("string"!=typeof(i="number"==typeof i?String(i):i))throw new n(t,"number");return i}int(t,e){var i=this.get(t);if(void 0===e&&(e=null),null===i)return e;if("string"!=typeof i){if("number"==typeof i&&Number.isSafeInteger(i))return i}else if(/^\-?\d+$/.test(i)&&(i=parseInt(i,10),Number.isSafeInteger(i)))return i;throw new n(t,"int")}uint(t,e){var i=this.int(t);if(void 0===e&&(e=null),null===i)return e;if(i<0)throw new n(t,"uint");return i}float(t,e){var i=this.get(t);if(void 0===e&&(e=null),null===i)return e;if("string"!=typeof i){if("number"==typeof i&&isFinite(i))return i}else if(/^\-?\d*(?:\.\d*)?$/.test(i)&&/\d/.test(i)&&(i=parseFloat(i),isFinite(i)))return i;throw new n(t,"float")}ufloat(t,e){var i=this.float(t);if(void 0===e&&(e=null),null===i)return e;if(i<0)throw new n(t,"positive float");return i}fixed(t,e,i){var r=this.float(t);if(void 0===i&&(i=null),null===r)return i;try{return s.fromFloat(r,e||0)}catch(e){throw new n(t,"fixed number")}}ufixed(t,e,i){if(void 0===i&&(i=null),null===(e=this.fixed(t,e)))return i;if(e<0)throw new n(t,"positive fixed number");return e}i8(t,e){var i=this.int(t);if(void 0===e&&(e=null),null===i)return e;if(i<-128||127<i)throw new n(t,"i8");return i}i16(t,e){var i=this.int(t);if(void 0===e&&(e=null),null===i)return e;if(i<-32768||32767<i)throw new n(t,"i16");return i}i32(t,e){var i=this.int(t);if(void 0===e&&(e=null),null===i)return e;if((0|i)!==i)throw new n(t,"int32");return i}i64(t,e){return this.int(t,e)}u8(t,e){var i=this.uint(t);if(void 0===e&&(e=null),null===i)return e;if((255&i)!==i)throw new n(t,"uint8");return i}u16(t,e){var i=this.uint(t);if(void 0===e&&(e=null),null===i)return e;if((65535&i)!==i)throw new n(t,"uint16");return i}u32(t,e){var i=this.uint(t);if(void 0===e&&(e=null),null===i)return e;if(i>>>0!==i)throw new n(t,"uint32");return i}u64(t,e){return this.uint(t,e)}hash(t,i){var r=this.get(t);if(void 0===i&&(i=null),null===r)return i;if("string"!=typeof r){if(!e.isBuffer(r))throw new n(t,"hash");if(32!==r.length)throw new n(t,"hash");return r.toString("hex")}if(64!==r.length)throw new n(t,"hex string");if(!/^[0-9a-f]+$/i.test(r))throw new n(t,"hex string");let s="";for(let t=0;t<r.length;t+=2)s=r.slice(t,t+2)+s;return s}numhash(t,e){return"string"===this.typeOf(t)?this.hash(t,e):this.uint(t,e)}bool(t,e){var i=this.get(t);if(void 0===e&&(e=null),null===i)return e;if("number"==typeof i){if(1===i)return!0;if(0===i)return!1}if("string"!=typeof i){if("boolean"!=typeof i)throw new n(t,"boolean");return i}if("true"===i||"1"===i)return!0;if("false"===i||"0"===i)return!1;throw new n(t,"boolean")}buf(t,i,r){var s=this.get(t);if(r=r||"hex",void 0===i&&(i=null),null===s)return i;if("string"!=typeof s){if(e.isBuffer(s))return s;throw new n(t,"buffer")}if((i=e.from(s,r)).length!==e.byteLength(s,r))throw new n(t,r+" string");return i}array(t,e){var i=this.get(t);if(void 0===e&&(e=null),null===i)return e;if("string"!=typeof i){if(Array.isArray(i))return i;throw new n(t,"list/array")}try{var r=JSON.parse(i);if(Array.isArray(r))return r}catch(t){}var s=[];for(const t of i.trim().split(/\s*,\s*/))0!==t.length&&s.push(t);return s}obj(t,e){let i=this.get(t);if(void 0===e&&(e=null),null===i)return e;if(i.constructor==String)try{i=JSON.parse(i)}catch(e){throw new n(t,"object")}if("object"!=typeof i)throw new n(t,"object");return i}func(t,e){var i=this.get(t);if(void 0===e&&(e=null),null===i)return e;if("function"!=typeof i)throw new n(t,"function");return i}}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * wallet.js - wallet object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1);var s=i(14);const n=i(18),o=i(3),a=i(4),h=i(29),c=i(168),u=i(124).sortWithSeq,l=i(8),f=i(81),d=i(2),p=i(6),g=i(56),m=i(325);i(204);const w=i(96),y=i(55),b=i(13),v=i(51),k=i(16),S=i(205),_=i(145),x=i(25),R=i(146),E=i(327),A=i(52),M=i(23),O=i(26),I=i(9),C=i(303),T=i(32),P=_.Mnemonic,{opcodes:B,hashType:N}=i(22),L=i(152),H=i(64),U=i(65),D=i(130),z=i(41),V=i(19),F=i(42),j=i(43),{NotifyMsg:K,ContractStatus:q,ContractType:W,PropStatus:X}=i(7),Y=i(30).VerifyError,G=i(142).ErItem,$=i(143).ErAbolishItem,J=i(212).EnchancementItem,Z=i(54),Q=i(49),tt=i(79),et=i(68).txdb,it=i(28);class rt extends s{constructor(t,e){super(),r(t,"DB required."),this.db=t,this.network=t.network,this.logger=t.logger,this.readLock=new c,this.writeLock=new h,this.sendLock=new h,this.indexCache=new A(1e4),this.accountCache=new A(1e4),this.pathCache=new A(1e5),this.current=null,this.wid=0,this.id=null,this.initialized=!1,this.watchOnly=!1,this.accountDepth=0,this.token=a.ZERO_HASH,this.tokenDepth=0,this.master=new E,this.txdb=new m(this),this.account=null,e&&this.fromOptions(e)}fromOptions(t){let i,s,n=t.master;return n?("string"==typeof n&&(n=_.PrivateKey.fromBase58(n,this.network)),r(_.isPrivate(n),"Must create wallet with hd private key.")):(s=new P(t.mnemonic),n=_.fromMnemonic(s,this.network)),r(n.network===this.network,"Network mismatch for master key."),this.master.fromKey(n,s),null!=t.wid&&(r(o.isU32(t.wid)),this.wid=t.wid),t.id&&(r(y.isName(t.id),"Bad wallet ID."),i=t.id),null!=t.initialized&&(r("boolean"==typeof t.initialized),this.initialized=t.initialized),null!=t.watchOnly&&(r("boolean"==typeof t.watchOnly),this.watchOnly=t.watchOnly),null!=t.accountDepth&&(r(o.isU32(t.accountDepth)),this.accountDepth=t.accountDepth),t.token&&(r(e.isBuffer(t.token)),r(32===t.token.length),this.token=t.token),i=i||this.getID(),this.id=i,this}static fromOptions(t,e){return new rt(t).fromOptions(e)}async init(t){var e=t.passphrase;r(!this.initialized),this.initialized=!0,e&&await this.master.encrypt(e),t=await this._createAccount(t,e);r(t),this.account=t,this.logger.info("Wallet initialized (%s).",this.id),await this.txdb.open()}async open(){r(this.initialized);var t=await this.getAccount(0);if(!t)throw new Error("Default account not found.");this.account=t,this.logger.info("Wallet opened (%s).",this.id),await this.txdb.open()}async ensureNotifyKey(){this.notifyKey||(await this.ensureAccount({name:"alliance",witness:!0}),this.notifyKey=await this.createReceive("alliance",1,this.master),this.notifyAddress=this.notifyKey.getAddress("string"))}async createAllianceInfo(t,i,r){var s={alliancename:t,nodeid:i};return t?(s.alliancePrivateKey=l.hash256(e.concat([e.from(t),this.master.key.privateKey])),r?(s.prv=e.alloc(0),s.pub=e.from(r,"hex"),s.awardAddress=b.fromWitnessPubkeyhash(l.hash160(s.pub),this.network.type).toString(this.network.type),s.mnemonic=new P):(r=l.hash256(e.concat([e.from(t+"-"+i),this.master.key.privateKey])),s.mnemonic=new P({entropy:r,language:this.master.mnemonic.language,passphrase:this.master.mnemonic.passphrase}),s.prv=l.hash256(e.from(s.mnemonic.toSeed().toString("hex"))),s.pub=M.publicKeyCreate(s.prv,!0),t=E.fromKey(_.fromMnemonic(s.mnemonic),this.network.type).key.deriveAccount(44,0).derive(9).derive(1),s.awardAddress=b.fromWitnessPubkeyhash(l.hash160(t.publicKey),this.network.type).toString(this.network.type))):(s.mnemonic=P.fromOptions(this.master.mnemonic),s.prv=l.hash256(e.from(s.mnemonic.toSeed().toString("hex"))),s.pub=M.publicKeyCreate(s.prv,!0),s.awardAddress=b.fromWitnessPubkeyhash(l.hash160(s.pub),this.network.type).toString(this.network.type)),s.address=b.fromWitnessPubkeyhash(l.hash160(s.pub),this.network.type).toString(),s}async destroy(){var t=await this.writeLock.lock(),e=await this.sendLock.lock();try{this.db.unregister(this),await this.master.destroy(),this.readLock.destroy(),this.writeLock.destroy(),this.sendLock.destroy()}finally{e(),t()}}async addSharedKey(t,e){var i=await this.writeLock.lock();try{return await this._addSharedKey(t,e)}finally{i()}}async _addSharedKey(t,e){if(e||(e=t,t=null),!(t=await this.getAccount(t=null==t?0:t)))throw new Error("Account not found.");let i;this.start();try{i=await t.addSharedKey(e)}catch(t){throw this.drop(),t}return await this.commit(),i}async removeSharedKey(t,e){var i=await this.writeLock.lock();try{return await this._removeSharedKey(t,e)}finally{i()}}async _removeSharedKey(t,e){if(e||(e=t,t=null),!(t=await this.getAccount(t=null==t?0:t)))throw new Error("Account not found.");let i;this.start();try{i=await t.removeSharedKey(e)}catch(t){throw this.drop(),t}return await this.commit(),i}async setPassphrase(t,e){t&&await this.decrypt(t),e&&await this.encrypt(e)}async encrypt(t){var e=await this.writeLock.lock();try{return await this._encrypt(t)}finally{e()}}async _encrypt(t){t=await this.master.encrypt(t,!0),this.start();try{await this.db.encryptKeys(this,t)}catch(e){throw f(t),this.drop(),e}f(t),this.save(),await this.commit()}async decrypt(t){var e=await this.writeLock.lock();try{return await this._decrypt(t)}finally{e()}}async _decrypt(t){t=await this.master.decrypt(t,!0),this.start();try{await this.db.decryptKeys(this,t)}catch(e){throw f(t),this.drop(),e}f(t),this.save(),await this.commit()}async rename(t){var e=await this.writeLock.lock();try{return await this.db.rename(this,t)}finally{e()}}async writeBalanceLog(t){var e=await this.writeLock.lock();try{return await this.db.writeBalanceLog(this,t)}finally{e()}}async renameAccount(t,e){var i=await this.writeLock.lock();try{return await this._renameAccount(t,e)}finally{i()}}async _renameAccount(t,e){if(!y.isName(e))throw new Error("Bad account name.");var i=await this.getAccount(t);if(!i)throw new Error("Account not found.");if(0===i.accountIndex)throw new Error("Cannot rename default account.");if(await this.hasAccount(e))throw new Error("Account name not available.");t=i.name,this.start(),this.db.renameAccount(i,e),await this.commit(),this.indexCache.remove(t),t=this.pathCache.values();for(const r of t)r.account===i.accountIndex&&(r.name=e)}async lock(){var t=await this.writeLock.lock(),e=await this.sendLock.lock();try{await this.master.lock()}finally{e(),t()}}unlock(t,e){return this.master.unlock(t,e)}getID(){r(this.master.key,"Cannot derive id.");var t,e=this.master.key.derive(44);(t=new p(37)).writeBytes(e.publicKey),t.writeU32(this.network.magic),e=l.hash160(t.render());return(t=new p(27)).writeU8(3),t.writeU8(190),t.writeU8(4),t.writeBytes(e),t.writeChecksum(),g.encode(t.render())}async createAccount(t,e){var i=await this.writeLock.lock();try{return await this._createAccount(t,e)}finally{i()}}async _createAccount(t,e){let i,s,n=t.name,a=(n=n||this.accountDepth.toString(10),0);if(0!=this.accountDepth&&(a=o.hashInt(n)),await this.hasAccountIndex(a))throw new Error("Account Index Conflict.");if(await this.hasAccount(n))throw new Error("Account already exists.");if(await this.unlock(e),this.watchOnly&&t.accountKey){if("string"==typeof(i=t.accountKey)&&(i=_.PublicKey.fromBase58(i,this.network)),!_.isPublic(i))throw new Error("Must add HD public keys to watch only wallet.");r(i.network===this.network,"Network mismatch for watch only key.")}else r(this.master.key),i=(i=this.master.key.deriveAccount(44,a)).toPublic();e={wid:this.wid,id:this.id,name:0===this.accountDepth?"default":n,witness:t.witness,watchOnly:this.watchOnly,accountKey:i,accountIndex:a,type:t.type,m:t.m,n:t.n,keys:t.keys},this.start();try{(s=R.fromOptions(this.db,e)).wallet=this,await s.init()}catch(t){throw this.drop(),t}return this.logger.info("Created account %s/%s/%d.",s.id,s.name,s.accountIndex),this.accountDepth++,this.save(),await this.commit(),s}async ensureAccount(t,e){var i=t.name;return(i=await this.getAccount(i))||this.createAccount(t,e)}getAccounts(){return this.db.getAccounts(this.wid)}getAddressHashes(t){return null!=t?this.getAccountHashes(t):this.db.getWalletHashes(this.wid)}async getAccountHashes(t){return t=await this.ensureIndex(t,!0),this.db.getAccountHashes(this.wid,t)}async getAccount(t){if(this.account&&(null==t||"default"===t||"number"==typeof t&&0===t||"string"==typeof t&&0===t.length))return this.account;if(-1===(t=await this.getAccountIndex(t)))return null;var e=await this.readLock.lock(t);try{return await this._getAccount(t)}finally{e()}}async _getAccount(t){var e=this.accountCache.get(t);return e||((e=await this.db.getAccount(this.wid,t))?(e.wallet=this,e.wid=this.wid,e.id=this.id,e.watchOnly=this.watchOnly,await e.open(),this.accountCache.set(t,e),e):null)}async getAccountIndex(t){var e;return null==t?-1:"number"==typeof t?t:null!=(e=this.indexCache.get(t))?e:-1===(e=await this.db.getAccountIndex(this.wid,t))?-1:(this.indexCache.set(t,e),e)}async getAccountName(t){var e;return"string"==typeof t?t:(e=this.accountCache.get(t))?e.name:this.db.getAccountName(this.wid,t)}async hasAccount(t){return-1!==(t=await this.getAccountIndex(t))&&(!!this.accountCache.has(t)||this.db.hasAccount(this.wid,t))}async hasAccountIndex(t){return!!this.accountCache.has(t)||this.db.hasAccount(this.wid,t)}createReceive(t,e=0,i=null){return this.createKey(t,0,e,i)}createChange(t){return this.createKey(t,1)}createNested(t){return this.createKey(t,2)}async createKey(t,e,i=0,r=null){var s=await this.writeLock.lock();try{return await this._createKey(t,e,i,r)}finally{s()}}async _createKey(t,e,i=0,r=null){if(null==e&&(e=t,t=null),!(t=await this.getAccount(t=t||0)))throw new Error("Account not found.");let s;this.start();try{s=await t.createKey(e,i,r)}catch(t){throw this.drop(),t}return await this.commit(),s}async deriveKey(t,e,i,r=null){let s=null;var n=await this.writeLock.lock();try{this.start(),s=await this._deriveKey(t,e,i,r),await this.commit()}catch(t){throw this.drop(),t}finally{n()}return s}async _deriveKey(t,e,i=0,r=null){if(null==e&&(e=t,t=null),t=t||0,t=parseInt(t),t=await this.getAccount(t))return e=await t.deriveKey(e,i,r),await t.saveKey(e),e;throw new Error("Account not found.")}save(){return this.db.save(this)}async saveAccount(t){var e=await this.writeLock.lock();try{this.start(),t._save(),await this.commit(),0==t.accountIndex&&(this.account=t)}finally{e()}}start(){return this.db.start(this)}drop(){return this.db.drop(this)}clear(){return this.db.clear(this)}commit(){return this.db.commit(this)}async hasAddress(t){return t=b.getHash(t,"hex"),null!=await this.getPath(t)}async getPath(t){return(t=await this.readPath(t))?(t.name=await this.getAccountName(t.account),r(t.name),this.pathCache.set(t.hash,t),t):null}async readPath(t){t=b.getHash(t,"hex");var e=this.pathCache.get(t);return e||((e=await this.db.getPath(this.wid,t))?(e.id=this.id,e):null)}async hasPath(t){return t=b.getHash(t,"hex"),!!this.pathCache.has(t)||this.db.hasPath(this.wid,t)}async getPaths(t){if(null!=t)return this.getAccountPaths(t);var e=[];for(const t of await this.db.getWalletPaths(this.wid))t.id=this.id,t.name=await this.getAccountName(t.account),r(t.name),this.pathCache.set(t.hash,t),e.push(t);return e}async getAccountPaths(t){var e=await this.ensureIndex(t,!0),i=await this.getAccountHashes(e),s=await this.getAccountName(t),n=(r(s),[]);for(const t of i){var o=await this.readPath(t);r(o),r(o.account===e),o.name=s,this.pathCache.set(o.hash,o),n.push(o)}return n}async importKey(t,e,i){var r=await this.writeLock.lock();try{return await this._importKey(t,e,i)}finally{r()}}async _importKey(t,e,i){if(t&&"object"==typeof t&&(i=e,e=t,t=null),null==t&&(t=0),r(e.network===this.network,"Network mismatch for key."),this.watchOnly){if(e.privateKey)throw new Error("Cannot import privkey into watch-only wallet.")}else if(!e.privateKey)throw new Error("Cannot import pubkey into non watch-only wallet.");var s=e.getHash("hex");if(await this.getPath(s))throw new Error("Key already exists.");if(!(s=await this.getAccount(t)))throw new Error("Account not found.");if(s.type!==R.types.PUBKEYHASH)throw new Error("Cannot import into non-pkh account.");await this.unlock(i),t=S.fromRing(s,e).toPath(),this.master.encrypted&&(t.data=this.master.encipher(t.data,t.hash),r(t.data),t.encrypted=!0),this.start();try{await s.savePath(t)}catch(t){throw this.drop(),t}await this.commit()}async importAddress(t,e){var i=await this.writeLock.lock();try{return await this._importAddress(t,e)}finally{i()}}async _importAddress(t,e){if(e||(e=t,t=null),null==t&&(t=0),e.network!==this.network)throw new Error("Network mismatch for address.");if(!this.watchOnly)throw new Error("Cannot import address into non watch-only wallet.");if(await this.getPath(e))throw new Error("Address already exists.");if(!(t=await this.getAccount(t)))throw new Error("Account not found.");if(t.type!==R.types.PUBKEYHASH)throw new Error("Cannot import into non-pkh account.");e=w.fromAddress(t,e),this.start();try{await t.savePath(e)}catch(t){throw this.drop(),t}await this.commit()}async fund(t,e){var i=await this.writeLock.lock();try{return await this._fund(t,e)}finally{i()}}async _fund(t,e){if(e=e||{},!this.initialized)throw new Error("Wallet is not initialized.");if(this.watchOnly)throw new Error("Cannot fund from watch-only wallet.");let i;if(null!=e.account){if(!(i=await this.getAccount(e.account)))throw new Error("Account not found.")}else i=this.account;if(!i.initialized)throw new Error("Account is not initialized.");let s,n=e.rate;return null==n&&(n=await this.db.estimateFee(e.blocks)),s=e.smart?await this.getSmartCoins(i.name):(s=await this.getCoins(i.name),this.txdb.filterConserved(s)),await t.fund(s,{allowPreInput:e.allowPreInput,noChange:e.noChange,selection:e.selection,round:e.round,depth:e.depth,hardFee:e.hardFee,subtractFee:e.subtractFee,subtractIndex:e.subtractIndex,changeAddress:i.change.getAddress(),height:this.db.curHeight,rate:n,maxFee:e.maxFee,estimate:t=>this.estimateSize(t),network:this.network}),!e.allowInfiniteFee&&e.noChange&&r(t.getFee()<=C.MAX_FEE,"TX exceeds MAX_FEE."),s}async getAccountByAddress(t){return t=b.getHash(t,"hex"),(t=await this.getPath(t))?this.getAccount(t.account):null}async estimateSize(t){var e=I.WITNESS_SCALE_FACTOR,i=b.fromScript(t);if(!i)return-1;var r=await this.getAccountByAddress(i);if(!r)return-1;let s=0;if(t.isScripthash()&&r.witness)switch(r.type){case R.types.PUBKEYHASH:s=4*(s+23);break;case R.types.MULTISIG:s=4*(s+35)}switch(r.type){case R.types.PUBKEYHASH:s=s+74+34;break;case R.types.MULTISIG:s=(s=(s=(s=(s+=1)+74*r.m)+3+1)+34*r.n)+1+1}return r.witness?s=((s+=1)+e-1)/e|0:s+=a.sizeVarint(s),s}async createTX(t){var i=t.outputs,s=new v;r(Array.isArray(i),"Outputs must be an array."),r(0<i.length,"No outputs available."),t.comment&&("object"==typeof t.comment&&(t.comment=JSON.stringify(t.comment)),s.outputs.push(x.fromScript(k.createScript(e.from(t.comment),k.types.NULLDATA),0)));for(const t of i){var n=new x(t),o=n.getAddress();if(n.isDust())throw new Error("Output is dust.");if(0<n.value){if(!o)throw new Error("Cannot send to unknown address.");if(o.isNull())throw new Error("Cannot send to null address.")}s.outputs.push(n)}let a=null;if(t.inputs)for(const e of t.inputs){var h=await this.getTX(e.hash);h&&(h=j.fromTX(h.tx,e.index,-1,0))&&(a=h.getAddress(),t.allowPreInput=!0,s.addCoin(h))}else await this.fund(s,t);if(a&&((i=new x).value=s.getFee()-C.MIN_FEE,i.script.fromAddress(a),s.outputs.push(i),s.changeIndex=s.outputs.length-1),!1!==t.sort&&s.sortMembers(),null!=t.locktime&&s.setLocktime(t.locktime),r(s.isSane(),"TX failed sanity check."),r(s.verifyInputs(this.db.curHeight+1),"TX failed context check."),0===await this.template(s))throw new Error("Templating failed.");return s}async send(t,e){var i=await this.sendLock.lock();try{return await this._send(t,e)}finally{i()}}async _send(t,e){return e&&(t.account=e),e=await this.createTX(t,!0),await this.sign(e),this.sendMTX(e,{sendafter:t.sendafter})}async sendMTX(t,e={}){if(!t.isSigned())throw new Error("TX could not be fully signed.");var i=t.toTX();if(i.getSigopsCost(t.view)>O.MAX_TX_SIGOPS_COST)throw new Error("TX exceeds policy sigops.");if(i.getWeight()>O.MAX_TX_WEIGHT)throw new Error("TX exceeds policy weight.");return e.sendafter||(this.logger.debug("Sending wallet tx (%s): %s",this.id,i.txid()),await this.db.addTX(i),await this.db.send(i)),i}async resend(){var t=await this.getPending(),e=(0<t.length&&this.logger.info("Rebroadcasting %d transactions.",t.length),[]);for(const i of t)e.push(i.tx);for(const t of u(e))await this.db.send(t);return e}async deriveInputs(t){r(t.mutable);var e=[];for(const r of await this.getInputPaths(t)){var i=await this.getAccount(r.account);i&&(i=i.derivePath(r,this.master))&&e.push(i)}return e}async getKey(t){var e;t=b.getHash(t,"hex",this.network.type);return(t=await this.getPath(t))&&(e=await this.getAccount(t.account))?e.derivePath(t,this.master):null}async exportToFile(t){if(!Q.unsupported){var i=await this.db.getTip(),r=o.date();let h="",c=[o.fmt("# Wallet Dump created by %s %s",tt.protocol,tt.version),o.fmt("# * Created on %s",r),o.fmt("# * Best block at time of backup was %d (%s).",i.height,o.revHex(i.hash)),o.fmt("# * File: %s",t.file),""];var s,n;i=o.fmt("W %s wid= %s",this.toRaw().toString("base64"),this.wid),i=(c.push(i),await this.getAccounts());for(const t of i){var a=await this.getAccount(t);a=o.fmt("C %s name= %s index= %d",a.toRaw().toString("base64"),a.name,a.accountIndex);c.push(a)}for(const i of await this.getAddressHashes())this.watchOnly?(s=b.fromWitnessPubkeyhash(e.from(i,"hex"),this.network.type).toString(),s=o.fmt("A %s %s label= account= %s branch= %s index= %s addr= %s","S",r,0,-1,-1,s),c.push(s)):(s=await this.getPrivateKey(i))&&(n=s.getAddress("string"),n=o.fmt("A %s %s label= account= %s branch= %s index= %s addr= %s",s.toSecret(),r,s.account,s.branch,s.index,n),c.push(n),t.fragment)&&1e5<c.length&&(h=c.join("\n"),await Q.writeFile(t.file.split(".").reduce((t,e)=>(t?t+="."+e:t=e+"-1",t),""),h,"utf8"),c=[]);c.push(""),c.push("# End of dump"),c.push(""),h=c.join("\n"),await Q.writeFile(t.file,h,"utf8")}}async getPrivateKey(t,e){if(t=b.getHash(t,"hex"),!(t=await this.getPath(t)))return null;var i=await this.getAccount(t.account);return i?(await this.unlock(e),(e=i.derivePath(t,this.master)).privateKey?e:null):null}async getInputPaths(t){if(r(t.mutable),!t.hasCoins())throw new Error("Not all coins available.");var e=[];for(const r of t.getInputHashes("hex")){var i=await this.getPath(r);i&&e.push(i)}return e}async getOutputPaths(t){var e=[];for(const r of t.getOutputHashes("hex")){var i=await this.getPath(r);i&&e.push(i)}return e}async setLookahead(t,e){var i=await this.writeLock.lock();try{return this._setLookahead(t,e)}finally{i()}}async _setLookahead(t,e){if(null==e&&(e=t,t=null),!(t=await this.getAccount(t=null==t?0:t)))throw new Error("Account not found.");this.start();try{await t.setLookahead(e)}catch(t){throw this.drop(),t}await this.commit()}async syncOutputDepth(t){var e=new Map;for(const r of t.outputs){var i=r.path;i&&-1!==i.index&&(e.has(i.account)||e.set(i.account,[]),e.get(i.account).push(i))}var s,n,o=[];for([s,n]of e){let t=-1,e=-1,i=-1;for(const r of n)switch(r.branch){case 0:r.index>t&&(t=r.index);break;case 1:r.index>e&&(e=r.index);break;case 2:r.index>i&&(i=r.index)}t+=2,e+=2,i+=2;var a=await this.getAccount(s);(a=(r(a),await a.syncDepth(t,e,i)))&&o.push(a)}return o}async getRedeem(t){"string"==typeof t&&(t=e.from(t,"hex"));var i=await this.getKey(t.toString("hex"));return i?i.getRedeem(t):null}async template(t){var e=await this.deriveInputs(t);return t.sign(e)}async onSaleList(t,e){return(await(await this.getPropList()).predict(async(t,i)=>!!i.bid&&await this.belongToAccount(e,i.bid.address))).where([["pst",X.Sale]]).paginate(10,t).records()}async mySaleList(t,e){return(await(await this.getPropList()).predict(async(t,i)=>this.belongToAccount(e,i.current.address))).where([["pst",X.Sale]]).paginate(10,t).records()}async getPropList(){const t=await this.db.loadVpList();var e=[];for(let i=0;i<t.length;i++){let r=t[i];e.push((async()=>{await this.getPrivateKey(r.current.address)&&(t[i]=[r.pid,r])})())}return await Promise.all(e),new it(t)}async propCreate(t,e){var i,s=new v;for(i of t){var n=await this.ensureCp(i.cid,!0);!n||i.cid==this.network.genesisId||(i.gold=(0|i.gold)>>>0,i.gold<I.MINPROPVALUE)||(i.pid||(i.pid=D()),s.propCreate(n.current.address,i),i.index=s.outputs.length-1)}if(0<s.outputs.length){e?await this.fund(s,{account:e}):await this.fund(s),await this.sign(s);var o,a=s.commit();for(o of(await this.db.addTX(a[0]),await this.db.send(a[0]),r(a[0].verify(a[1],k.flags.STANDARD_VERIFY_FLAGS)),t))o.hash=a[0].hash("hex"),o.txid=a[0].txid();return a}return[]}async sendSecret(t,e,i){let r=this.db.$contacts.get(t);if(!r||!r.sender){var s=(await this.createReceive(i)).getAddress("string");if(t==s)throw new H(U.errors.TYPE_ERROR,"Forbid Sending to Self Address.");r=await this.db.ensureContact({contact:t,messenger:s,wallet:this,account:i})}if(r)return r.send(e);throw new H(U.errors.TYPE_ERROR,"Invalid Address.")}async commNotify(t){r(!!t),r(!!t.dst),r(!!t.content);var e=new v,i=t.src||this.getReceive().toString(),s=(i=new K(W.notify,D(),this.db.curHeight,{src:i,content:t.content}),x.fromScript(k.createScript(i.toRaw(),k.types.NULLDATA),0));e.outputs.push(s),s={address:t.dst,locktime:I.BLOCK_DAY,locktype:"csb",value:.1*I.COIN},e.outputs.push(new x(s)),t.account?await this.fund(e,{account:t.account,noChange:!0,allowInfiniteFee:!0}):await this.fund(e,{noChange:!0,allowInfiniteFee:!0}),await this.sign(e),s=e.commit();return r(s[0].verify(s[1],k.flags.STANDARD_VERIFY_FLAGS)),await this.db.addTX(s[0]),this.logger.debug("Sending tx on wallet(%s): %s",this.id,s[0].txid()),await this.db.send(s[0]),i.hash=s[0].hash("hex"),i.height=-1,i}async cpRegister(t,e,i,s){if(r(!!e&&"object"==typeof e),!await this.db.client.execute("canExecute",[{confirm:!1,cid:e.cid,name:e.name,oper:W.cpRegister}]))throw new H(U.errors.TYPE_ERROR,"Invalid CP Register Info.");const n=new v;t||(o=await this.createReceive(i),t=o.getAddress());var o=await this.getKey(t);if(!o)throw new H(U.errors.TYPE_ERROR,"Invalid CP Register Address, Not along to this wallet.");if(e.pubAddress=t.toString(),e.pubKey=o.getPublicKey("hex"),e.signMethod="secp256k1",o=await this.createAllianceInfo(),e.register=o.pub.toString("hex"),n.cpRegister(t,I.registerFee,e),o=async()=>{i?await this.fund(n,{account:i}):await this.fund(n),await this.sign(n);var s=n.commit();return r(s[0].verify(s[1],k.flags.STANDARD_VERIFY_FLAGS)),await this.db.addTX(s[0]),await this.db.send(s[0]),e.txid=s[0].txid(),e.addr=t.toString(),s},!s)return o();o()}getSCAddress(t){return t=Z.fromMnemonic(P.fromOptions(I.SmartContractMnemonic),this.network).deriveAccount(44,t).derive(9).derive(1),b.fromWitnessPubkeyhash(l.hash160(t.publicKey),this.network)}async cpChange(t,e){var i=await this.ensureCp(t.cid);if(i.cid==this.network.genesisId||"ATHENA"==i.name)throw new H(U.errors.TYPE_ERROR,"Invalid cp name.");var s=await this.getTX(i.current.hash);if(!s)throw new H(U.errors.TYPE_ERROR,"Do not have permission to change this info.");if(s=s.tx,!await this.belongToAccount(e,s.outputs[0].getAddress()))throw new H(U.errors.TYPE_ERROR,"Invalid account info.");if(t.newName){if(!await this.db.client.execute("canExecute",[{confirm:!1,cid:i.cid,name:t.newName,oper:W.cpChange}]))throw new H(U.errors.TYPE_ERROR,"Invalid CP Change Info.")}else t.newName=i.name;return t.addr||(t.addr=b.fromString(i.current.address)),i=v.cpChange(s,t),e?await this.fund(i,{allowPreInput:!0,account:e}):await this.fund(i,{allowPreInput:!0}),await this.sign(i),s=i.commit(),await this.db.send(s[0]),r(s[0].verify(s[1],k.flags.STANDARD_VERIFY_FLAGS)),t.txid=s[0].txid(),s}async propExchangeList(t,e,i=!1){var s,n,o,a=new v,h=[];for([s,n,o]of t){var c,u=null;if(u=await this.getTX(s.hash)){if(u=u.tx,c=s.index,u&&u.outputs&&!(u.outputs.length<=c)){if(i){if(!await this.hasAddress(u.outputs[c].getAddress())){this.logger.error("not owned prop:",s.hash,s.index);continue}}else if(!await this.belongToAccount(e,u.outputs[c].getAddress())){this.logger.error("not owned prop:",s.hash,s.index);continue}var l=u.outputs[c].getReturnData();l&&(a.propExchange(u,c,n),l.index=a.outputs.length-1,l.addr=n.toString(),h.push(l))}}else this.logger.error("tx not find:",s.hash,o)}return e?await this.fund(a,{allowPreInput:!0,account:e}):await this.fund(a,{allowPreInput:!0}),await this.sign(a),t=a.commit(),await this.db.addTX(t[0]),await this.db.send(t[0]),r(t[0].verify(t[1],k.flags.STANDARD_VERIFY_FLAGS)),t.push(h),t}async propDonate(t,i){var r=t.index;if(!(t=await this.getTX(t.hash))||!t.tx||!t.tx.outputs||t.tx.outputs.length<=r)throw new H(U.errors.TYPE_ERROR,"Invalid tx info.");if(!await this.belongToAccount(i,t.tx.outputs[r].getAddress()))throw new H(U.errors.TYPE_ERROR,"Props that do not belong to you.");if(!(i=t.tx.outputs[r].getReturnData()))throw new H(U.errors.TYPE_ERROR,"Invalid tx info.");if(i.cid&&i.cid==this.network.genesisId)throw new Y(t.tx,"invalid","Special props that can not to donate",100);var s=new v;return(t=(s.addInputFromTx(t.tx,r),s.addOutput(k.createScript(e.from(JSON.stringify({value:t.tx.outputs[r].value,cid:i.cid,pid:i.pid,oid:i.oid,gaddr:this.getAddress().toString(this.network)})),k.types.NULLDATA),0),await this.sign(s,null,N.NONE|N.ANYONECANPAY),s.commit())).push(i),t}async propReceive(t,e){var i=(t=v.fromTX(t,1)).inputs[0].prevout,r=t.outputs[0].getReturnData();t.view.addOutput({hash:t.inputs[0].prevout.hash,index:t.inputs[0].prevout.index},new x({value:r.value})),t.outputs.pop();let s=this.getAddress().toString(this.network);e&&(n={cid:r.cid,uid:e},s=(n=await this.tokenCreate(n,e)).data.addr),t.outputs.push(x.fromScript(s,r.value,{oper:W.propExchange,pid:r.pid,cid:r.cid,oid:r.oid,prev:{hash:i.hash,index:i.index}})),e?await this.fund(t,{allowPreInput:!0,account:e}):await this.fund(t,{allowPreInput:!0}),await this.sign(t,null,N.ALL,[0]);var n=t.commit();return await this.db.send(n[0]),r.simAddr=s,[n[0],null,r]}async belongToAccount(t,e){return!!e&&!(!(e=await this.getAccountByAddress(e))||t&&e.name!==t)}async propExchange(t,e,i){let s=null,n=0;var o;return Array.isArray(t)?(s=t[0],n=t[1]):(o=await this.getTX(t.hash))&&(s=o.tx,n=t.index),!s||!s.outputs||s.outputs.length<=n?(this.logger.error("Invalid tx info."),null):await this.belongToAccount(i,s.outputs[n].getAddress())?(o=s.outputs[n].getReturnData())?(t=(new v).propExchange(s,n,e),o.index=t.outputs.length-1,i?await this.fund(t,{allowPreInput:!0,account:i}):await this.fund(t,{allowPreInput:!0}),await this.sign(t),e=t.commit(),await this.db.addTX(e[0]),await this.db.send(e[0]),r(e[0].verify(e[1],k.flags.STANDARD_VERIFY_FLAGS)),e.push(o),e):(this.logger.error("Invalid tx info."),null):(this.logger.error("Invalid user."),null)}async propFound(t,e){if(t=await this.getTX(t),r(t),!(t=t.tx))throw new H(U.errors.TYPE_ERROR,"Invalid hex string.");let i=0;3<=t.outputs.length&&(i=2);var s=(o=t.outputs[i]).getReturnData();if(!s||s.oper!==W.propExchange&&s.oper!==W.propCreate)throw new H(U.errors.TYPE_ERROR,"Invalid tx type.");if(s.cid==this.network.genesisId)throw new Y(block,"invalid","prop found supertoken",100);var n=new v,o=(t=(n.addInputFromTx(t,i),x.fromScript(o.getAddress(),o.value)),n.outputs.push(t),e?await this.fund(n,{allowPreInput:!0,subtractFee:!0,account:e}):await this.fund(n,{allowPreInput:!0,subtractFee:!0}),await this.sign(n),n.commit());return await this.db.send(o[0]),r(o[0].verify(o[1],k.flags.STANDARD_VERIFY_FLAGS)),o.push(s),o}async propSale(t,i,s,n){let o=await this.getTX(t);if(!o)throw new H(U.errors.TYPE_ERROR,"Invalid tx info.");if(o.getDepth(this.db.curHeight)<=0)throw new H(U.errors.TYPE_ERROR,"No enough confirmations.");if(!(o=o.tx))throw new H(U.errors.TYPE_ERROR,"Invalid tx info.");o.outputs[0].getReturnType(k.opcodes.OP_RETURN)&&(i=2);var a=o.outputs[i].getReturnData([k.opcodes.OP_PROPEXCHANGE,k.opcodes.OP_PROPCREATE]);if(!a)throw new H(U.errors.TYPE_ERROR,"Invalid tx type.");if(!await this.belongToAccount(n,o.outputs[i].getAddress()))throw new H(U.errors.TYPE_ERROR,"Invalid tx info.");if(!(n=await this.getCoin(t,i))||-1===n.height)throw new H(U.errors.WALLET_INSUFFICIENT_FUNDS,"Invalid coin.");if(await this.txdb.isSpent(t,i))throw new H(U.errors.WALLET_INSUFFICIENT_FUNDS,"Invalid coin.");if(s<=o.outputs[i].value)throw new H(U.errors.TYPE_ERROR,"Invalid fixed price.");if(a.cid==this.network.genesisId)throw new Y(o,"invalid","prop not for sale",100);return t=(n=new v).addInputFromTx(o,i),i={oper:W.propSale,pid:a.pid,prev:{hash:t.prevout.hash,index:t.prevout.index},fixed:s,period:this.db.curHeight+I.BLOCK_DAY},a=x.fromScript(k.createScript(e.from(JSON.stringify(i)),k.types.NULLDATA),0),n.outputs.push(a),await this.sign(n,null,N.SINGLE|N.ANYONECANPAY),t=n.commit(),r(t[0].verify(t[1],k.flags.STANDARD_VERIFY_FLAGS)),await this.db.send(t[0]),t}async propBuy(t,i,r){if(!(t=this.db.propList.get(t))||!t.bid||!t.bid.raw)throw new H(U.errors.INVALID_PARAMS,"Invalid Tx Hash.");var s=V.fromRaw(e.from(t.bid.raw,"hex")),n=(await this.createReceive(r)).getAddress(),o=t.gold,a=b.fromString(t.current.address,this.network).getHash();if(i<o)throw new Error("wrong price");if(1<s.outputs.length&&i<s.outputs[1].value)throw new Error("low bid price than before");var h=v.fromTX(s,1);if(!h.outputs[0].getReturnType(B.OP_RETURN))throw new Error("not a sale order");return await this.remove(s.hash("hex")),h.view.addOutput({hash:h.inputs[0].prevout.hash,index:h.inputs[0].prevout.index},new x({value:t.gold})),a=x.fromScript(k.createScript(a),i),h.outputs.push(a),i={oper:W.propExchange,pid:t.pid,cid:t.cid,oid:t.oid,prev:{hash:h.inputs[0].prevout.hash,index:h.inputs[0].prevout.index}},a=x.fromScript(n,o,i),h.outputs.push(a),r?await this.fund(h,{allowPreInput:!0,account:r}):await this.fund(h,{allowPreInput:!0}),await this.sign(h,null,N.ALL,[0]),n=h.commit(),t.owned||this.db.client.watchOutpoint((new z).fromOptions(s.inputs[0].prevout)),await this.db.send(n[0]),n}async getTXByAmount(t,e){let i=null;var r;for(r of await this.getCoins(e))if(!(r.height<=0)&&r.value==t){i=r;break}return i&&(e=await this.getTX(i.hash))?[e.tx,i.index,i.height]:[]}async contractCreate(t,i,s,n,o){if(this.db.transactionList.query(t,n)!=q.None)throw new H(U.errors.TYPE_ERROR,"Contract with the same address finded.");if(0!=parseInt(i%1e3,10))throw new H(U.errors.TYPE_ERROR,"Contract source should an integer multiple of 1000.");if(!await F.checkSum(this.network,t,n))throw new H(U.errors.TYPE_ERROR,"Create contract with an invalid Address or a Address with old transations.");let a=!1,[h,c,u]=await this.getTXByAmount(i,o);if(!h){a=!0;var l=new v;let t="";t=(o?await this.createReceive(o):this).getAddress(),l.outputs.push(x.fromScript(t,i)),o?await this.fund(l,{allowPreInput:!0,account:o}):await this.fund(l,{allowPreInput:!0}),await this.sign(l),l=l.commit(),r(l[0].verify(l[1],k.flags.STANDARD_VERIFY_FLAGS)),h=l[0],c=0,u=-1}(l=new v).addInputFromTx(h,c,u);let f="";f=(o?await this.createReceive(o):this).getAddress();var d=await this.getKey(f);t={oper:W.contractCreate,type:t,addr:n,src:i,dst:s,srcact:o,alice:d.getPublicKey("hex"),period:this.db.curHeight+I.TRANSACTION_PERIOD},n=x.fromScript(k.createScript(e.from(JSON.stringify(t)),k.types.NULLDATA),0),l.outputs.push(n),await this.sign(l,null,N.SINGLE|N.ANYONECANPAY),i=l.commit();return a&&await this.db.send(h),await this.db.send(i[0]),i}async contractPromise(t,i){if(!(t=this.db.transactionList.get(t))||t.transStatus!=q.CreatedOnMem)throw new H(U.errors.INVALID_PARAMS,"Invalid Tx id.");if(!(t=V.fromRaw(e.from(t.raw,"hex"))))throw new H(U.errors.TYPE_ERROR,"Invalid Tx id.");var r=F.parseContract(t);if(!r||r.oper!==W.contractCreate)throw new H(U.errors.TYPE_ERROR,"Invalid tx type.");var s=v.fromTX(t,1);if(!s.outputs[0].getReturnType(B.OP_RETURN))throw new Error("not a valid contract");s.view.addOutput({hash:s.inputs[0].prevout.hash,index:s.inputs[0].prevout.index},new x({value:r.src}));let n="";n=(i?await this.createReceive(i):this).getAddress();var o=await this.getKey(n);t={oper:W.contractPromise,prevhash:t.hash("hex"),type:r.type,addr:r.addr,dst:r.dst,srcact:r.srcact,dstact:i,bob:o.getPublicKey("hex"),period:r.period},i=new k([L.fromSymbol("promise"),L.fromData(e.from(JSON.stringify(t))),L.fromSymbol("drop"),L.fromSymbol("greaterthan"),L.fromSymbol("drop"),L.fromSymbol("if"),L.fromData(l.hash160(e.from(t.bob,"hex"))),L.fromSymbol("else"),L.fromData(l.hash160(e.from(r.alice,"hex"))),L.fromSymbol("endif"),L.fromSymbol("checksig")]),s.outputs.push(x.fromScript(i,r.src)),await this.remove(t.prevhash),await this.sign(s,null,N.ALL,[0]),o=s.commit();return await this.db.send(o[0]),t.current={hash:o[0].hash("hex"),index:0},t.raw=o[0].toRaw().toString("hex"),t.transStatus=q.Promised,this.db.transactionList.saveContract(t,!0),o}async contractExecute(t,i){if(!(t=this.db.transactionList.get(t))||t.transStatus!=q.Confirmed&&t.transStatus!=q.Expired)throw new H(U.errors.INVALID_PARAMS,"Invalid Tx id.");if(!(t=V.fromRaw(e.from(t.raw,"hex"))))throw new H(U.errors.TYPE_ERROR,"Invalid Tx id.");i=i||1;var s=F.parseContract(t);if(!s||s.oper!==W.contractPromise)throw new H(U.errors.TYPE_ERROR,"Invalid tx type.");var n=t.outputs[1].getReturnData();if(!n||n.oper!==W.contractPromise)throw new H(U.errors.TYPE_ERROR,"Invalid tx type.");r.strictEqual(s.addr,n.addr),r.strictEqual(s.type,n.type),r.strictEqual(s.dst,n.dst),r.strictEqual(s.period,n.period),r.strictEqual(s.srcact,n.srcact),r.strictEqual(s.dstact,n.dstact);var o=this.db.transactionList.query(s.type,s.addr);if(o!=q.Confirmed&&o!=q.Expired)throw new H(U.errors.TYPE_ERROR,"Contract Promise not Check yet.");if(o==q.Expired&&1!=i||o==q.Confirmed&&2!=i)throw new H(U.errors.TYPE_ERROR,"Invalid Executor.");let a=s.srcact,h=(2==i&&(a=s.dstact),"");h=(a?await this.createReceive(a):this).getAddress();var c=new v,u=(c.addInputFromTx(t,1),{oper:W.contractExecute,type:s.type,addr:s.addr,master:i});u=x.fromScript(k.createScript(e.from(JSON.stringify(u)),k.types.NULLDATA),0),c.outputs.push(u),u=x.fromScript(h,t.outputs[1].value),c.outputs.push(u),t=1==i?await T.fromPublic(e.from(s.ori.alice,"hex")):await T.fromPublic(e.from(n.bob,"hex")),u=await this.getKey(t.getAddress()),await c.signAsync(u,k.hashType.ALL,this.db.workers),i=c.commit();return r(i[0].verify(i[1],k.flags.STANDARD_VERIFY_FLAGS,o)),await this.db.send(i[0]),i}async htlcDeal(t,i){var r=await this.getTX(t.hash);let s=null;if(i){if(!(i=await this.getAccount(i)))throw new H(U.errors.TYPE_ERROR,"Invalid Account.");s=i.getReceive().toString()}else s=this.getReceive().toString();i=new v;var n=(new k).pushOp(B.OP_1);t.suggest&&n.pushData(e.from(t.sa,"hex")),i.addInput({prevout:{hash:t.hash,index:t.index},script:n}),i.addOutput(s,r.tx.outputs[t.index].value-1e4),i.view.addOutput({hash:t.hash,index:t.index},new x(r.tx.outputs[t.index])),await this.sign(i,null,N.ALL),n=i.commit();return await this.db.send(n[0]),n}async htlcCancel(t,i){let r=null;var s=await this.getTX(t.hash);if(!(r=s?s.tx.outputs[t.index]:r))throw new H(U.errors.TYPE_ERROR,"Invalid Input.");let n=null;if(i){if(!(s=await this.getAccount(i)))throw new H(U.errors.TYPE_ERROR,"Invalid Account.");n=s.getReceive().toString()}else n=this.getReceive().toString();return i=new v,s=(new k).pushOp(B.OP_0),t.suggest&&s.pushData(e.from(t.sa,"hex")),i.addInput({prevout:{hash:t.hash,index:t.index},script:s}),t.suggest?i.setSequence(0,2*I.HTLC_CANCEL_PERIOD,!1):i.setSequence(0,I.HTLC_CANCEL_PERIOD,!1),i.addOutput(n,r.value-1e4),i.view.addOutput({hash:t.hash,index:t.index},new x(r)),s=await this.getKey(t.master),await i.signAsync(s,k.hashType.ALL,this.db.workers),t=i.commit(),await this.db.send(t[0]),t}async sendContracts(t,e,i){var r,s=new v;for(r of t)s.outputs.push(i.create(r));return e?await this.fund(s,{account:e}):await this.fund(s),await this.sign(s),t=s.commit(),await this.db.addTX(t[0]),await this.db.send(t[0]),t}async tokenCreate(t,e="",i){r(t&&"object"==typeof t,"Token data should be a object"),r(t.cid,"Token data should has a cid property"),r(t.uid,"Token data should has a uid property"),t.time=!0,await this.ensureAccount({name:e,witness:!0});let s=null;if(i){if(!await this.belongToAccount(e,i))throw new H(U.errors.TYPE_ERROR,`tokenCreate address error: addr:${i} is not belongs to account:`+e);s=await this.getKey(i)}else s=await this.createReceive(e,o.hashInt(t.cid),this.master);return s.signData(t)}async sign(t,e,i=k.hashType.ALL,r){if(this.watchOnly)throw new Error("Cannot sign from a watch-only wallet.");return await this.unlock(e),e=await this.deriveInputs(t),t.signAsync(e,i,this.db.workers,r)}getCoinView(t){return this.txdb.getCoinView(t)}getSpentView(t){return this.txdb.getSpentView(t)}toDetails(t){return this.txdb.toDetails(t)}getDetails(t){return this.txdb.getDetails(t)}async getCoin(t,e){return this.txdb.getCoin(t,e)}async getCredit(t,e){return this.txdb.getCredit(t,e)}async getStatusOfSC(t){return this.txdb.getStatusOfSC(t)}async setStatusOfSC(t,e){var i=await this.writeLock.lock();try{this.txdb.start();try{await this.txdb._setStatusOfSC(t,e),await this.txdb.commit()}catch(t){throw this.txdb.drop(),t}}finally{i()}}getLockedCoins(){return this.txdb.lockedCoins.values}getTX(t){return this.txdb.getTX(t)}getBlocks(){return this.txdb.getBlocks()}getBlock(t){return this.txdb.getBlock(t)}async add(t,e,i){var r=await this.writeLock.lock();try{return await this._add(t,e,i)}finally{r()}}async _add(t,e,i){let r,s;this.txdb.start();try{(r=await this.txdb._add(t,e,i))&&(s=await this.syncOutputDepth(r)),await this.txdb.commit()}catch(t){throw this.txdb.drop(),t}return s&&0<s.length&&(this.db.emit("address",this.id,s),this.emit("address",s)),r}async resetBalance(){var t=await this.writeLock.lock();try{this.txdb.start();try{this.txdb.pending.unconfirmed=0,this.txdb.pending.confirmed=0;for(const t of await this.getAccounts()){var e=await this.getBalance(t);this.txdb.pending.unconfirmed+=e.unconfirmed,this.txdb.pending.confirmed+=e.confirmed}this.txdb.put(et.R,this.txdb.pending.commit()),await this.txdb.commit()}catch(t){throw this.txdb.drop(),t}}finally{t()}return this.txdb.state.toBalance()}async unconfirm(t){var e=await this.writeLock.lock();try{return await this.txdb.unconfirm(t)}finally{e()}}async remove(t){var e=await this.writeLock.lock();try{return await this.txdb.remove(t)}finally{e()}}async zap(t,e){var i=await this.writeLock.lock();try{return await this._zap(t,e)}finally{i()}}async _zap(t,e){return t=await this.ensureIndex(t),this.txdb.zap(t,e)}async abandon(t){var e=await this.writeLock.lock();try{return await this._abandon(t)}finally{e()}}_abandon(t){return this.txdb.abandon(t)}conserveCoin(t){return this.txdb.conserveCoin(t)}unConserveCoin(t){return this.txdb.unConserveCoin(t)}isConserved(t){return this.txdb.isConserved(t)}getConserved(){return this.txdb.getConserved()}async getHistory(t){return t=await this.ensureIndex(t),this.txdb.getHistory(t)}async getCoins(t){return t=await this.ensureIndex(t),this.txdb.getCoins(t)}async getCredits(t){return t=await this.ensureIndex(t),this.txdb.getCredits(t)}async getSmartCoins(t){var e=[];for(const r of await this.getCredits(t)){var i=r.coin;r.spent||this.txdb.isConserved(i)||-1===i.height&&!r.own||e.push(i)}return e}async getPending(t){return t=await this.ensureIndex(t),this.txdb.getPending(t)}async getBalance(t){return t=await this.ensureIndex(t),this.txdb.getBalance(t)}async queryBalanceLog(t,e=0){return(t=await this.ensureIndex(t))?this.db.queryBalanceLog(this.wid,t,e):[]}async getRange(t,e){return t&&"object"==typeof t&&(e=t,t=null),t=await this.ensureIndex(t),this.txdb.getRange(t,e)}async getLast(t,e){return t=await this.ensureIndex(t),this.txdb.getLast(t,e)}async ensureIndex(t,e){if(null==t){if(e)throw new Error("No account provided.");return null}if(-1===(e=await this.getAccountIndex(t)))throw new Error("Account not found.");return e}getAddress(t){return this.account.getAddress(t)}getReceive(t){return this.account.getReceive(t)}getChange(t){return this.account.getChange(t)}getNested(t){return this.account.getNested(t)}inspect(){return{wid:this.wid,id:this.id,network:this.network.type,initialized:this.initialized,accountDepth:this.accountDepth,token:this.token.toString("hex"),tokenDepth:this.tokenDepth,state:this.txdb.state?this.txdb.state.toJSON(!0):null,master:this.master,account:this.account}}toJSON(t){return{network:this.network.type,wid:this.wid,id:this.id,initialized:this.initialized,watchOnly:this.watchOnly,accountDepth:this.accountDepth,token:this.token.toString("hex"),tokenDepth:this.tokenDepth,height:this.db.curHeight,state:this.txdb.state.toJSON(!0),master:this.master.toJSON(t),account:this.account.toJSON(!0)}}getSize(){var t=0;return(t+=50)+a.sizeVarString(this.id,"ascii")+a.sizeVarlen(this.master.getSize())}toRaw(){var t=this.getSize();return(t=new p(t)).writeU32(this.network.magic),t.writeU32(this.wid),t.writeVarString(this.id,"ascii"),t.writeU8(this.initialized?1:0),t.writeU8(this.watchOnly?1:0),t.writeU32(this.accountDepth),t.writeBytes(this.token),t.writeU32(this.tokenDepth),t.writeVarBytes(this.master.toRaw()),t.render()}fromRaw(t){t=new d(t);var e=n.fromMagic(t.readU32());return this.wid=t.readU32(),this.id=t.readVarString("ascii"),this.initialized=1===t.readU8(),this.watchOnly=1===t.readU8(),this.accountDepth=t.readU32(),this.token=t.readBytes(32),this.tokenDepth=t.readU32(),this.master.fromRaw(t.readVarBytes()),r(e===this.db.network,"Wallet network mismatch."),this}static fromRaw(t,e){return new rt(t).fromRaw(e)}static isWallet(t){return t instanceof rt}async issueCreate(t,i,r){var s=new G(t),n=((n=(s.source.subjectName||(s.source.subjectName=s.erid),T.fromPrivate(e.from(t.key,"hex"),!0,this.network))).witness=!0,s.sign(n,!0,this.network),s.toOptions(!0));return r?this.send({outputs:[{address:t.address,value:1e4}],comment:n},i):(s=await this.send({outputs:[{address:t.address,value:1e4}],comment:n},i),n.txid=s.txid()),n}async caAbolish(t,i,r){var s=T.fromPrivate(e.from(t.key,"hex"),!0,this.network),n=(s.witness=!0,await this.db.client.execute("ca.byId",[t.erid]));if(!n)throw new H(U.errors.TYPE_ERROR,"ca.abolish: Invalid erid.");if(n.source.cid!=t.cid)throw new H(U.errors.TYPE_ERROR,"ca.abolish: Invalid cid.");if(n.source.uid!=t.uid)throw new H(U.errors.TYPE_ERROR,"ca.abolish: Invalid uid.");var o=n.signature;if(n.sign(s,!0,this.network),n.witness!=t.witness||n.signature!=o)throw new H(U.errors.TYPE_ERROR,"ca.abolish: You have no permission to abolish this witness.");return(n=new $(t)).sign(s),o=n.toOptions(!0),r?this.send({outputs:[{address:t.address,value:1e4}],comment:o},i):await this.send({outputs:[{address:t.address,value:1e4}],comment:o},i),o}async enchanceCp(t,e){var i=((t=new J(t)).oper="enchanceCp",await this.ensureCp(t.to)),r=await this.ensureCp(t.from);if(!(r=await this.getKey(r.pubAddress)))throw new H(U.errors.TYPE_ERROR,"Invalid cid, Not along to this wallet.");return t.sign(r),r=t.toOptions(!0),[await this.send({outputs:[{address:i.pubAddress,value:1e4}],comment:r},e),r]}async ensureCp(t,e=!1){if(await this.db.flushCP([t]),(t=this.db.cpList.getItem(t))||e)return t;throw new H(U.errors.TYPE_ERROR,"Invalid cid, cannot find cp.")}}t.exports=rt}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * BlockMeta.js - walletdb records
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(3),s=i(4),n=i(2),o=i(6);t.exports=class t{constructor(t,e,i,r){this.hash=t||s.NULL_HASH,this.height=null!=e?e:-1,this.time=i||0,this.mtp=r||this.time}clone(){return new t(this.hash,this.height,this.time,this.mtp)}toHash(){return e.from(this.hash,"hex")}fromEntry(t){return this.hash=t.hash,this.height=t.height,this.time=t.time,this.mtp=t.mtp,this}fromJSON(t){return this.hash=r.revHex(t.hash),this.height=t.height,this.time=t.time,this.mtp=t.mtp,this}fromRaw(t){return t=new n(t),this.hash=t.readHash("hex"),this.height=t.readU32(),this.time=t.readU32(),this.mtp=t.readU32(),this}static fromEntry(e){return(new t).fromEntry(e)}static fromJSON(e){return(new t).fromJSON(e)}static fromRaw(e){return(new t).fromRaw(e)}toRaw(){var t=new o(46);return t.writeHash(this.hash),t.writeU32(this.height),t.writeU32(this.time),t.writeU32(this.mtp),t.render()}toJSON(){return{hash:r.revHex(this.hash),height:this.height,time:this.time,mtp:this.mtp}}}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * packets.js - worker packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(17),s=i(506),n=i(508),o=i(509),a=i(305),h=i(510),c=i(511),u=i(306),l=i(512),f=i(513),d=i(514),p=i(515),g=i(516),m=i(517),w=i(518),y=i(519),b=i(520),v=i(521),k=i(522),S=i(523),_=i(524),x=i(525);e.parsePacket=function(t,e){switch(t.cmd){case r.ENV:return s.fromRaw(e);case r.EVENT:return n.fromRaw(e);case r.LOG:return o.fromRaw(e);case r.ERROR:return a.fromRaw(e);case r.ERRORRESULT:return h.fromRaw(e);case r.CHECK:return c.fromRaw(e);case r.CHECKRESULT:return u.fromRaw(e);case r.SIGN:return l.fromRaw(e);case r.SIGNRESULT:return f.fromRaw(e);case r.CHECKINPUT:return d.fromRaw(e);case r.CHECKINPUTRESULT:return p.fromRaw(e);case r.SIGNINPUT:return g.fromRaw(e);case r.SIGNINPUTRESULT:return m.fromRaw(e);case r.ECVERIFY:return w.fromRaw(e);case r.ECVERIFYRESULT:return y.fromRaw(e);case r.ECSIGN:return b.fromRaw(e);case r.ECSIGNRESULT:return v.fromRaw(e);case r.MINE:return k.fromRaw(e);case r.MINERESULT:return S.fromRaw(e);case r.SCRYPT:return _.fromRaw(e);case r.SCRYPTRESULT:return x.fromRaw(e);default:throw new Error("Unknown packet.")}},e.types=r,e.EnvPacket=s,e.EventPacket=n,e.LogPacket=o,e.ErrorPacket=a,e.ErrorResultPacket=h,e.CheckPacket=c,e.CheckResultPacket=u,e.SignPacket=l,e.SignResultPacket=f,e.CheckInputPacket=d,e.CheckInputResultPacket=p,e.SignInputPacket=g,e.SignInputResultPacket=m,e.ECVerifyPacket=w,e.ECVerifyResultPacket=y,e.ECSignPacket=b,e.ECSignResultPacket=v,e.MinePacket=k,e.MineResultPacket=S,e.ScryptPacket=_,e.ScryptResultPacket=x},function(t,e,i){"use strict";(function(e){
/*!
 * mnemonic.js - hd mnemonics for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(3),s=i(54),n=i(49);class o{static async readFile(t){if(!n.unsupported)try{var e,i;if(t&&n.existsSync(t))return e=await n.readFile(t,"utf8"),(i=JSON.parse(e)).isGenesisParams=!0,i}catch(t){throw t}}static async writeFile(t,e){n.unsupported||await n.writeFile(e,JSON.stringify(t),"utf8")}static async readEncryptFile(t){if(!n.unsupported)try{var e;if(t.file&&n.existsSync(t.file))return t.body=await n.readFile(t.file,"utf8"),(e=o.decrypt(t)).isGenesisEncrypt=!0,e}catch(t){throw t}}static async writeEncryptFile(t){n.unsupported||await n.writeFile(t.file,o.encrypt(t),"utf8")}static encrypt(t){var{aeskey:i,aesiv:n}=s.getAes(t.password||"bookmansoft",t.network);return r.encrypt(i,n,e.from(JSON.stringify(t.body)).toString("hex"))}static decrypt(t){var{aeskey:i,aesiv:n}=s.getAes(t.password||"bookmansoft",t.network),i=e.from(r.decrypt(i,n,t.body),"hex").toString();return JSON.parse(i)}}t.exports=o}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * common.js - constants for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */const r=e;r.lockFlags={VERIFY_SEQUENCE:1,MEDIAN_TIME_PAST:2},r.lockFlags.MANDATORY_LOCKTIME_FLAGS=0,r.lockFlags.STANDARD_LOCKTIME_FLAGS=0|e.lockFlags.VERIFY_SEQUENCE|e.lockFlags.MEDIAN_TIME_PAST,r.thresholdStates={DEFINED:0,STARTED:1,LOCKED_IN:2,ACTIVE:3,FAILED:4,getName:t=>{let i;switch(t){case e.thresholdStates.DEFINED:i="defined";break;case e.thresholdStates.STARTED:i="started";break;case e.thresholdStates.LOCKED_IN:i="locked_in";break;case e.thresholdStates.ACTIVE:i="active";break;case e.thresholdStates.FAILED:i="failed";break;default:assert(!1,"Bad state.")}return i}},r.flags={VERIFY_NONE:0,VERIFY_POW:1,VERIFY_BODY:2},r.flags.DEFAULT_FLAGS=0|e.flags.VERIFY_POW|e.flags.VERIFY_BODY,r.transfromToGraph=function(t){var e=new Map,i=t.size;let r=0;var s,n,o=Array(i);for(s of t.keys()){e.set(s,r);var a=Array(i).fill(0);o[r]=a,r++}for(n of t.keys()){var h,c,u=t.get(n),l=e.get(n);for(h of t.keys())u.has(h)&&(c=e.get(h),o[l][c]=1)}return o},r.dfsVisit=function(t,e,i){var s=t.length;i[e]=1;for(let n=0;n<s;n++)if(n!=e&&1===t[e][n]){if(1===i[n])return!0;if(0==i[n]&&r.dfsVisit(t,n,i))return!0}return!(i[e]=2)},r.dfsVerifyCircle=function(t){var e=t.length,i=Array(e);for(let t=0;t<e;t++)i[t]=0;for(let s=0;s<e;s++)if(0==i[s]&&r.dfsVisit(t,s,i))return!0;return!1}},function(t,e,i){"use strict";i.d(e,"e",(function(){return y})),i.d(e,"c",(function(){return c})),i.d(e,"d",(function(){return m})),i.d(e,"a",(function(){return p})),i.d(e,"b",(function(){return w}));const r=Object.create(null),s=(r.open="0",r.close="1",r.ping="2",r.pong="3",r.message="4",r.upgrade="5",r.noop="6",Object.create(null)),n=(Object.keys(r).forEach(t=>{s[r[t]]=t}),{type:"error",data:"parser error"}),o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),a="function"==typeof ArrayBuffer,h=(t,e)=>{const i=new FileReader;return i.onload=function(){var t=i.result.split(",")[1];e("b"+t)},i.readAsDataURL(t)};var c=({type:t,data:e},i,s)=>{var n;return o&&e instanceof Blob?i?s(e):h(e,s):a&&(e instanceof ArrayBuffer||(n=e,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer))?i?s(e):h(new Blob([e]),s):s(r[t]+(e||""))};const u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let t=0;t<u.length;t++)l[u.charCodeAt(t)]=t;const f="function"==typeof ArrayBuffer,d=(t,e)=>"blob"===e&&t instanceof ArrayBuffer?new Blob([t]):t;var p=(t,e)=>{var i;return"string"!=typeof t?{type:"message",data:d(t,e)}:"b"===(i=t.charAt(0))?{type:"message",data:((t,e)=>{if(f){const i=(t=>{let e,i,r,s,n,o=.75*t.length,a=t.length,h=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2])&&o--;var c=new ArrayBuffer(o),u=new Uint8Array(c);for(e=0;e<a;e+=4)i=l[t.charCodeAt(e)],r=l[t.charCodeAt(e+1)],s=l[t.charCodeAt(e+2)],n=l[t.charCodeAt(e+3)],u[h++]=i<<2|r>>4,u[h++]=(15&r)<<4|s>>2,u[h++]=(3&s)<<6|63&n;return c})(t);return d(i,e)}return{base64:!0,data:t}})(t.substring(1),e)}:s[i]?1<t.length?{type:s[i],data:t.substring(1)}:{type:s[i]}:n};const g=String.fromCharCode(30),m=(t,e)=>{const i=t.length,r=new Array(i);let s=0;t.forEach((t,n)=>{c(t,!1,t=>{r[n]=t,++s===i&&e(r.join(g))})})},w=(t,e)=>{var i=t.split(g),r=[];for(let t=0;t<i.length;t++){var s=p(i[t],e);if(r.push(s),"error"===s.type)break}return r},y=4},function(t,e,i){e.utils=i(39),e.common=i(86),e.sha=i(347),e.ripemd=i(351),e.hmac=i(352),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160},function(t,e,i){"use strict";(function(t){
/*!
 * aes.js - aes128/192/256 for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=e,n=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],o=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],a=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],h=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],c=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],u=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],l=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],f=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],d=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],p=[16777216,33554432,67108864,134217728,268435456,536870912,1073741824,2147483648,452984832,905969664];function g(e,i){if(!(this instanceof g))return new g(e,i);switch(this.rounds=null,this.userKey=e,this.bits=i,this.bits){case 128:this.rounds=10;break;case 192:this.rounds=12;break;case 256:this.rounds=14;break;default:throw new Error("Bad key size.")}r(t.isBuffer(e)),r(e.length===this.bits/8),this.decryptKey=null,this.encryptKey=null}function m(t,e,i,s){if(!(this instanceof m))return new m(t,e,s);r("ecb"===s||"cbc"===s,"Unknown mode."),this.key=new g(t,i),this.mode=s,this.prev=e,this.waiting=null}function w(t,e,i,s){if(!(this instanceof w))return new w(t,e,s);r("ecb"===s||"cbc"===s,"Unknown mode."),this.key=new g(t,i),this.mode=s,this.prev=e,this.waiting=null,this.lastBlock=null}function y(e,i){var r=t.allocUnsafe(e.length);for(let t=0;t<e.length;t++)r[t]=e[t]^i[t];return r}function b(t,e){return t[e+0]<<24^t[e+1]<<16^t[e+2]<<8^t[e+3]}function v(t,e,i){t[i+0]=e>>>24&255,t[i+1]=e>>>16&255,t[i+2]=e>>>8&255,t[i+3]=255&e}function k(e,i){var r=t.allocUnsafe(e.length+i.length);return e.copy(r,0),i.copy(r,e.length),r}g.prototype.destroy=function(){if(r(this.userKey,"Already destroyed."),this.userKey=null,this.decryptKey){for(let t=0;t<this.decryptKey.length;t++)this.decryptKey[t]=0;this.decryptKey=null}if(this.encryptKey){for(let t=0;t<this.encryptKey.length;t++)this.encryptKey[t]=0;this.encryptKey=null}},g.prototype.getEncryptKey=function(){if(r(this.userKey,"Cannot use key once it is destroyed."),this.encryptKey)return this.encryptKey;var t=new Uint32Array(60);let e=0,i=0;if(t[e+0]=b(this.userKey,0),t[e+1]=b(this.userKey,4),t[e+2]=b(this.userKey,8),t[e+3]=b(this.userKey,12),this.encryptKey=t,128===this.bits)for(;;){var s=t[e+3];if(t[e+4]=t[e+0]^4278190080&a[s>>>16&255]^16711680&h[s>>>8&255]^65280&n[s>>>0&255]^255&o[s>>>24&255]^p[i],t[e+5]=t[e+1]^t[e+4],t[e+6]=t[e+2]^t[e+5],t[e+7]=t[e+3]^t[e+6],10==++i)return t;e+=4}if(t[e+4]=b(this.userKey,16),t[e+5]=b(this.userKey,20),192===this.bits)for(;;){var c=t[e+5];if(t[e+6]=t[e+0]^4278190080&a[c>>>16&255]^16711680&h[c>>>8&255]^65280&n[c>>>0&255]^255&o[c>>>24&255]^p[i],t[e+7]=t[e+1]^t[e+6],t[e+8]=t[e+2]^t[e+7],t[e+9]=t[e+3]^t[e+8],8==++i)return t;t[e+10]=t[e+4]^t[e+9],t[e+11]=t[e+5]^t[e+10],e+=6}if(t[e+6]=b(this.userKey,24),t[e+7]=b(this.userKey,28),256===this.bits)for(;;){var u=t[e+7];if(t[e+8]=t[e+0]^4278190080&a[u>>>16&255]^16711680&h[u>>>8&255]^65280&n[u>>>0&255]^255&o[u>>>24&255]^p[i],t[e+9]=t[e+1]^t[e+8],t[e+10]=t[e+2]^t[e+9],t[e+11]=t[e+3]^t[e+10],7==++i)return t;u=t[e+11],t[e+12]=t[e+4]^4278190080&a[u>>>24&255]^16711680&h[u>>>16&255]^65280&n[u>>>8&255]^255&o[u>>>0&255],t[e+13]=t[e+5]^t[e+12],t[e+14]=t[e+6]^t[e+13],t[e+15]=t[e+7]^t[e+14],e+=8}return t},g.prototype.getDecryptKey=function(){if(r(this.userKey,"Cannot use key once it is destroyed."),this.decryptKey)return this.decryptKey;var t=this.getEncryptKey(),e=new Uint32Array(60);let i=0;for(let i=0;i<t.length;i++)e[i]=t[i];this.decryptKey=e;for(let t=0,r=4*this.rounds;t<r;t+=4,r-=4){var s=e[i+t+0];e[i+t+0]=e[i+r+0],e[i+r+0]=s,s=e[i+t+1],e[i+t+1]=e[i+r+1],e[i+r+1]=s,s=e[i+t+2],e[i+t+2]=e[i+r+2],e[i+r+2]=s,s=e[i+t+3],e[i+t+3]=e[i+r+3],e[i+r+3]=s}for(let t=1;t<this.rounds;t++)e[(i+=4)+0]=c[255&o[e[i+0]>>>24&255]]^u[255&o[e[i+0]>>>16&255]]^l[255&o[e[i+0]>>>8&255]]^f[255&o[e[i+0]>>>0&255]],e[i+1]=c[255&o[e[i+1]>>>24&255]]^u[255&o[e[i+1]>>>16&255]]^l[255&o[e[i+1]>>>8&255]]^f[255&o[e[i+1]>>>0&255]],e[i+2]=c[255&o[e[i+2]>>>24&255]]^u[255&o[e[i+2]>>>16&255]]^l[255&o[e[i+2]>>>8&255]]^f[255&o[e[i+2]>>>0&255]],e[i+3]=c[255&o[e[i+3]>>>24&255]]^u[255&o[e[i+3]>>>16&255]]^l[255&o[e[i+3]>>>8&255]]^f[255&o[e[i+3]>>>0&255]];return e},g.prototype.encryptBlock=function(e){r(this.userKey,"Cannot use key once it is destroyed.");var i=this.getEncryptKey();let s,c,u,l,f=0,d=b(e,0)^i[0],p=b(e,4)^i[1],g=b(e,8)^i[2],m=b(e,12)^i[3],w=this.rounds>>>1;for(;s=n[d>>>24&255]^o[p>>>16&255]^a[g>>>8&255]^h[m>>>0&255]^i[f+4],c=n[p>>>24&255]^o[g>>>16&255]^a[m>>>8&255]^h[d>>>0&255]^i[f+5],u=n[g>>>24&255]^o[m>>>16&255]^a[d>>>8&255]^h[p>>>0&255]^i[f+6],l=n[m>>>24&255]^o[d>>>16&255]^a[p>>>8&255]^h[g>>>0&255]^i[f+7],f+=8,0!=--w;)d=n[s>>>24&255]^o[c>>>16&255]^a[u>>>8&255]^h[l>>>0&255]^i[f+0],p=n[c>>>24&255]^o[u>>>16&255]^a[l>>>8&255]^h[s>>>0&255]^i[f+1],g=n[u>>>24&255]^o[l>>>16&255]^a[s>>>8&255]^h[c>>>0&255]^i[f+2],m=n[l>>>24&255]^o[s>>>16&255]^a[c>>>8&255]^h[u>>>0&255]^i[f+3];return d=4278190080&a[s>>>24&255]^16711680&h[c>>>16&255]^65280&n[u>>>8&255]^255&o[l>>>0&255]^i[f+0],p=4278190080&a[c>>>24&255]^16711680&h[u>>>16&255]^65280&n[l>>>8&255]^255&o[s>>>0&255]^i[f+1],g=4278190080&a[u>>>24&255]^16711680&h[l>>>16&255]^65280&n[s>>>8&255]^255&o[c>>>0&255]^i[f+2],m=4278190080&a[l>>>24&255]^16711680&h[s>>>16&255]^65280&n[c>>>8&255]^255&o[u>>>0&255]^i[f+3],v(e=t.allocUnsafe(16),d,0),v(e,p,4),v(e,g,8),v(e,m,12),e},g.prototype.decryptBlock=function(e){r(this.userKey,"Cannot use AESKey once it is destroyed.");var i=this.getDecryptKey();let s,n,o,a,h=0,p=b(e,0)^i[h+0],g=b(e,4)^i[h+1],m=b(e,8)^i[h+2],w=b(e,12)^i[h+3],y=this.rounds>>>1;for(;s=c[p>>>24&255]^u[w>>>16&255]^l[m>>>8&255]^f[g>>>0&255]^i[h+4],n=c[g>>>24&255]^u[p>>>16&255]^l[w>>>8&255]^f[m>>>0&255]^i[h+5],o=c[m>>>24&255]^u[g>>>16&255]^l[p>>>8&255]^f[w>>>0&255]^i[h+6],a=c[w>>>24&255]^u[m>>>16&255]^l[g>>>8&255]^f[p>>>0&255]^i[h+7],h+=8,0!=--y;)p=c[s>>>24&255]^u[a>>>16&255]^l[o>>>8&255]^f[n>>>0&255]^i[h+0],g=c[n>>>24&255]^u[s>>>16&255]^l[a>>>8&255]^f[o>>>0&255]^i[h+1],m=c[o>>>24&255]^u[n>>>16&255]^l[s>>>8&255]^f[a>>>0&255]^i[h+2],w=c[a>>>24&255]^u[o>>>16&255]^l[n>>>8&255]^f[s>>>0&255]^i[h+3];return p=d[s>>>24&255]<<24^d[a>>>16&255]<<16^d[o>>>8&255]<<8^d[n>>>0&255]<<0^i[h+0],g=d[n>>>24&255]<<24^d[s>>>16&255]<<16^d[a>>>8&255]<<8^d[o>>>0&255]<<0^i[h+1],m=d[o>>>24&255]<<24^d[n>>>16&255]<<16^d[s>>>8&255]<<8^d[a>>>0&255]<<0^i[h+2],w=d[a>>>24&255]<<24^d[o>>>16&255]<<16^d[n>>>8&255]<<8^d[s>>>0&255]<<0^i[h+3],v(e=t.allocUnsafe(16),p,0),v(e,g,4),v(e,m,8),v(e,w,12),e},m.prototype.update=function(e){var i=[],r=(this.waiting&&(e=k(this.waiting,e),this.waiting=null),e.length%16),s=e.length-r;for(let t=0;t<s;t+=16){let r=e.slice(t,t+16);"cbc"===this.mode&&(r=y(r,this.prev)),this.prev=this.key.encryptBlock(r),i.push(this.prev)}return 0<r&&(this.waiting=e.slice(s)),t.concat(i)},m.prototype.final=function(){let e;var i,r;return this.waiting?(i=16-this.waiting.length,(r=t.allocUnsafe(i)).fill(i),e=k(this.waiting,r)):(e=t.allocUnsafe(16)).fill(16),"cbc"===this.mode&&(e=y(e,this.prev)),e=this.key.encryptBlock(e),this.key.destroy(),e},w.prototype.update=function(e){var i=[],r=(this.waiting&&(e=k(this.waiting,e),this.waiting=null),e.length%16),s=e.length-r;for(let t=0;t<s;t+=16){var n=this.prev;this.prev=e.slice(t,t+16);let r=this.key.decryptBlock(this.prev);"cbc"===this.mode&&(r=y(r,n)),i.push(r)}return 0<r&&(this.waiting=e.slice(s)),this.lastBlock&&(i.unshift(this.lastBlock),this.lastBlock=null),this.lastBlock=i.pop(),t.concat(i)},w.prototype.final=function(){this.key.destroy(),r(!this.waiting,"Bad decrypt (trailing bytes)."),r(this.lastBlock,"Bad decrypt (no data).");let e=this.lastBlock,i=16;var s=e[i-1];if(0===s||s>i)throw new Error("Bad decrypt (padding).");for(let t=0;t<s;t++)if(e[--i]!==s)throw new Error("Bad decrypt (padding).");return 16===s?t.alloc(0):e=e.slice(0,-s)},s.encrypt=function(t,e,i,r,s){return k((e=new m(e,i,r,s)).update(t),e.final())},s.decrypt=function(t,e,i,r,s){return k((e=new w(e,i,r,s)).update(t),e.final())},s.encipher=function(e,i,n){return r(t.isBuffer(e)),r(32===i.length),r(16===n.length),s.encrypt(e,i,n,256,"cbc")},s.decipher=function(e,i,n){return r(t.isBuffer(e)),r(32===i.length),r(16===n.length),s.decrypt(e,i,n,256,"cbc")}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";var r=i(45),s=i(34),n=s.getNAF,o=s.getJSF,a=s.assert;function h(t,e){this.type=t,this.p=new r(e.p,16),this.red=e.prime?r.red(e.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=e.n&&new r(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0,!(t=this.n&&this.p.div(this.n))||0<t.cmpn(100)?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(t,e){this.curve=t,this.type=e,this.precomputed=null}(t.exports=h).prototype.point=function(){throw new Error("Not implemented")},h.prototype.validate=function(){throw new Error("Not implemented")},h.prototype._fixedNafMul=function(t,e){a(t.precomputed);for(var i=t._getDoubles(),r=n(e,1,this._bitLength),s=(t=(1<<i.step+1)-(i.step%2==0?2:1),t/=3,[]),o=0;o<r.length;o+=i.step){for(var h=0,c=o+i.step-1;o<=c;c--)h=(h<<1)+r[c];s.push(h)}for(var u=this.jpoint(null,null,null),l=this.jpoint(null,null,null),f=t;0<f;f--){for(o=0;o<s.length;o++)(h=s[o])===f?l=l.mixedAdd(i.points[o]):h===-f&&(l=l.mixedAdd(i.points[o].neg()));u=u.add(l)}return u.toP()},h.prototype._wnafMul=function(t,e){for(var i=t._getNAFPoints(4),r=i.wnd,s=i.points,o=n(e,r,this._bitLength),h=this.jpoint(null,null,null),c=o.length-1;0<=c;c--){for(var u=0;0<=c&&0===o[c];c--)u++;if(0<=c&&u++,h=h.dblp(u),c<0)break;var l=o[c];a(0!==l),h="affine"===t.type?0<l?h.mixedAdd(s[l-1>>1]):h.mixedAdd(s[-l-1>>1].neg()):0<l?h.add(s[l-1>>1]):h.add(s[-l-1>>1].neg())}return"affine"===t.type?h.toP():h},h.prototype._wnafMulAdd=function(t,e,i,r,s){for(var a=this._wnafT1,h=this._wnafT2,c=this._wnafT3,u=0,l=0;l<r;l++){var f,d=(f=e[l])._getNAFPoints(t);a[l]=d.wnd,h[l]=d.points}for(l=r-1;1<=l;l-=2){var p=l-1,g=l;if(1!==a[p]||1!==a[g])c[p]=n(i[p],a[p],this._bitLength),c[g]=n(i[g],a[g],this._bitLength),u=Math.max(c[p].length,u),u=Math.max(c[g].length,u);else{var m=[e[p],null,null,e[g]],w=(0===e[p].y.cmp(e[g].y)?(m[1]=e[p].add(e[g]),m[2]=e[p].toJ().mixedAdd(e[g].neg())):0===e[p].y.cmp(e[g].y.redNeg())?(m[1]=e[p].toJ().mixedAdd(e[g]),m[2]=e[p].add(e[g].neg())):(m[1]=e[p].toJ().mixedAdd(e[g]),m[2]=e[p].toJ().mixedAdd(e[g].neg())),[-3,-1,-5,-7,0,7,5,1,3]),y=o(i[p],i[g]);u=Math.max(y[0].length,u);for(c[p]=new Array(u),c[g]=new Array(u),R=0;R<u;R++){var b=0|y[0][R],v=0|y[1][R];c[p][R]=w[3*(1+b)+(1+v)],c[g][R]=0,h[p]=m}}}var k=this.jpoint(null,null,null),S=this._wnafT4;for(l=u;0<=l;l--){for(var _=0;0<=l;){for(var x=!0,R=0;R<r;R++)S[R]=0|c[R][l],0!==S[R]&&(x=!1);if(!x)break;_++,l--}if(0<=l&&_++,k=k.dblp(_),l<0)break;for(R=0;R<r;R++){var E=S[R];0!==E&&(0<E?f=h[R][E-1>>1]:E<0&&(f=h[R][-E-1>>1].neg()),k="affine"===f.type?k.mixedAdd(f):k.add(f))}}for(l=0;l<r;l++)h[l]=null;return s?k:k.toP()},(h.BasePoint=c).prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},h.prototype.decodePoint=function(t,e){if(t=s.toArray(t,e),e=this.p.byteLength(),(4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*e)return 6===t[0]?a(t[t.length-1]%2==0):7===t[0]&&a(t[t.length-1]%2==1),this.point(t.slice(1,1+e),t.slice(1+e,1+2*e));if(2!==t[0]&&3!==t[0]||t.length-1!==e)throw new Error("Unknown point format");return this.pointFromX(t.slice(1,1+e),3===t[0])},c.prototype.encodeCompressed=function(t){return this.encode(t,!0)},c.prototype._encode=function(t){var e=this.curve.p.byteLength(),i=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",e))},c.prototype.encode=function(t,e){return s.encode(this._encode(e),t)},c.prototype.precompute=function(t){var e;return this.precomputed||((e={doubles:null,naf:null,beta:null}).naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e),this},c.prototype._hasDoubles=function(t){var e;return!!this.precomputed&&!!(e=this.precomputed.doubles)&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},c.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],r=this,s=0;s<e;s+=t){for(var n=0;n<t;n++)r=r.dbl();i.push(r)}return{step:t,points:i}},c.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],i=(1<<t)-1,r=1==i?null:this.dbl(),s=1;s<i;s++)e[s]=e[s-1].add(r);return{wnd:t,points:e}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(t){for(var e=this,i=0;i<t;i++)e=e.dbl();return e}},function(t,e,i){"use strict";(function(e){
/*!
 * stack.js - stack object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=i(22),n=i(89);function o(t){if(!(this instanceof o))return new o(t);this.items=t||[]}Object.defineProperty(o.prototype,"length",{get(){return this.items.length},set(t){return this.items.length=t,this.items.length}}),o.prototype[Symbol.iterator]=function(){return this.items[Symbol.iterator]()},o.prototype.values=function(){return this.items.values()},o.prototype.entries=function(){return this.items.entries()},o.prototype.inspect=function(){return`<Stack: ${this.toString()}>`},o.prototype.toString=function(){var t=[];for(const e of this.items)t.push(e.toString("hex"));return t.join(" ")},o.prototype.toASM=function(t){var e=[];for(const i of this.items)e.push(s.toASM(i,t));return e.join(" ")},o.prototype.clone=function(){return new o(this.items.slice())},o.prototype.clear=function(){return this.items.length=0,this},o.prototype.get=function(t){return t<0&&(t+=this.items.length),t<0||t>=this.items.length?null:this.items[t]},o.prototype.pop=function(){return this.items.pop()||null},o.prototype.shift=function(){return this.items.shift()||null},o.prototype.remove=function(t){return t<0&&(t+=this.items.length),t<0||t>=this.items.length||0===(t=this.items.splice(t,1)).length?null:t[0]},o.prototype.set=function(t,i){return t<0&&(t+=this.items.length),r(e.isBuffer(i)),r(0<=t&&t<=this.items.length),this.items[t]=i,this},o.prototype.push=function(t){return r(e.isBuffer(t)),this.items.push(t),this},o.prototype.unshift=function(t){return r(e.isBuffer(t)),this.items.unshift(t),this},o.prototype.insert=function(t,i){return t<0&&(t+=this.items.length),r(e.isBuffer(i)),r(0<=t&&t<=this.items.length),this.items.splice(t,0,i),this},o.prototype.erase=function(t,e){t<0&&(t=this.items.length+t),e<0&&(e=this.items.length+e),this.items.splice(t,e-t)},o.prototype.swap=function(t,e){t<0&&(t=this.items.length+t),e<0&&(e=this.items.length+e);var i=this.items[t],r=this.items[e];this.items[t]=r,this.items[e]=i},o.prototype.getData=function(t){return this.get(t)},o.prototype.popData=function(){return this.pop()},o.prototype.shiftData=function(){return this.shift()},o.prototype.removeData=function(t){return this.remove(t)},o.prototype.setData=function(t,e){return this.set(t,e)},o.prototype.pushData=function(t){return this.push(t)},o.prototype.unshiftData=function(t){return this.unshift(t)},o.prototype.insertData=function(t,e){return this.insert(t,e)},o.prototype.getLength=function(t){return(t=this.get(t))?t.length:-1},o.prototype.getString=function(t,e){return(t=this.get(t))?o.toString(t,e):null},o.prototype.popString=function(t){var e=this.pop();return e?o.toString(e,t):null},o.prototype.shiftString=function(t){var e=this.shift();return e?o.toString(e,t):null},o.prototype.removeString=function(t,e){return(t=this.remove(t))?o.toString(t,e):null},o.prototype.setString=function(t,e,i){return this.set(t,o.fromString(e,i))},o.prototype.pushString=function(t,e){return this.push(o.fromString(t,e))},o.prototype.unshiftString=function(t,e){return this.unshift(o.fromString(t,e))},o.prototype.insertString=function(t,e,i){return this.insert(t,o.fromString(e,i))},o.prototype.getNum=function(t,e,i){return(t=this.get(t))?o.toNum(t,e,i):null},o.prototype.popNum=function(t,e){var i=this.pop();return i?o.toNum(i,t,e):null},o.prototype.shiftNum=function(t,e){var i=this.shift();return i?o.toNum(i,t,e):null},o.prototype.removeNum=function(t,e,i){return(t=this.remove(t))?o.toNum(t,e,i):null},o.prototype.setNum=function(t,e){return this.set(t,o.fromNum(e))},o.prototype.pushNum=function(t){return this.push(o.fromNum(t))},o.prototype.unshiftNum=function(t){return this.unshift(o.fromNum(t))},o.prototype.insertNum=function(t,e){return this.insert(t,o.fromNum(e))},o.prototype.getInt=function(t,e,i){return(t=this.get(t))?o.toInt(t,e,i):-1},o.prototype.popInt=function(t,e){var i=this.pop();return i?o.toInt(i,t,e):-1},o.prototype.shiftInt=function(t,e){var i=this.shift();return i?o.toInt(i,t,e):-1},o.prototype.removeInt=function(t,e,i){return(t=this.remove(t))?o.toInt(t,e,i):-1},o.prototype.setInt=function(t,e){return this.set(t,o.fromInt(e))},o.prototype.pushInt=function(t){return this.push(o.fromInt(t))},o.prototype.unshiftInt=function(t){return this.unshift(o.fromInt(t))},o.prototype.insertInt=function(t,e){return this.insert(t,o.fromInt(e))},o.prototype.getBool=function(t){return!!(t=this.get(t))&&o.toBool(t)},o.prototype.popBool=function(){var t=this.pop();return!!t&&o.toBool(t)},o.prototype.shiftBool=function(){var t=this.shift();return!!t&&o.toBool(t)},o.prototype.removeBool=function(t){return!!(t=this.remove(t))&&o.toBool(t)},o.prototype.setBool=function(t,e){return this.set(t,o.fromBool(e))},o.prototype.pushBool=function(t){return this.push(o.fromBool(t))},o.prototype.unshiftBool=function(t){return this.unshift(o.fromBool(t))},o.prototype.insertBool=function(t,e){return this.insert(t,o.fromBool(e))},o.isStack=function(t){return t instanceof o},o.toString=function(t,i){return r(e.isBuffer(t)),t.toString(i||"utf8")},o.fromString=function(t,i){return r("string"==typeof t),e.from(t,i||"utf8")},o.toNum=function(t,e,i){return n.decode(t,e,i)},o.fromNum=function(t){return r(n.isScriptNum(t)),t.encode()},o.toInt=function(t,e,i){return o.toNum(t,e,i).getInt()},o.fromInt=function(t){return r("number"==typeof t),-1<=t&&t<=16?s.small[t+1]:(t=n.fromNumber(t),o.fromNum(t))},o.toBool=function(t){r(e.isBuffer(t));for(let e=0;e<t.length;e++)if(0!==t[e])return e!==t.length-1||128!==t[e];return!1},o.fromBool=function(t){return r("boolean"==typeof t),o.fromInt(t?1:0)},t.exports=o}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * witness.js - witness object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=i(3),n=i(16),o=i(22),a=i(4),h=i(2),c=i(6);i(13);const u=i(114),l=o.types;class f extends u{constructor(t){super([]),t&&this.fromOptions(t)}fromOptions(t){return r(t,"Witness data is required."),Array.isArray(t)?this.fromArray(t):t.items?this.fromArray(t.items):this}static fromOptions(t){return(new f).fromOptions(t)}toArray(){return this.items.slice()}fromArray(t){return r(Array.isArray(t)),this.items=t,this}static fromArray(t){return(new f).fromArray(t)}toItems(){return this.items.slice()}fromItems(t){return r(Array.isArray(t)),this.items=t,this}static fromItems(t){return(new f).fromItems(t)}toStack(){return new u(this.toArray())}fromStack(t){return this.fromArray(t.items)}static fromStack(t){return(new f).fromStack(t)}inspect(){return`<Witness: ${this.toString()}>`}clone(){return(new f).inject(this)}inject(t){return this.items=t.items.slice(),this}compile(){return this}getInputType(){return this.isPubkeyhashInput()?l.WITNESSPUBKEYHASH:this.isScripthashInput()?l.WITNESSSCRIPTHASH:l.NONSTANDARD}isPubkeyInput(){return!1}getPubkeyInput(){return null}isPubkeyhashInput(){return 2===this.items.length&&o.isSignatureEncoding(this.items[0])&&o.isKeyEncoding(this.items[1])}getPubkeyhashInput(){return this.isPubkeyhashInput()?[this.items[0],this.items[1]]:[null,null]}isMultisigInput(){return!1}getMultisigInput(){return null}isScripthashInput(){return 0<this.items.length&&!this.isPubkeyhashInput()}getScripthashInput(){return this.isScripthashInput()?this.items[this.items.length-1]:null}isUnknownInput(){return this.getInputType()===l.NONSTANDARD}test(t){for(const e of this.items)if(0!==e.length&&t.test(e))return!0;return!1}getRedeem(){var t;return 0!==this.items.length&&(t=this.items[this.items.length-1])?n.fromRaw(t):null}indexOf(t){return s.indexOf(this.items,t)}getSize(){let t=0;for(const e of this.items)t+=a.sizeVarBytes(e);return t}getVarSize(){return a.sizeVarint(this.items.length)+this.getSize()}toWriter(t){t.writeVarint(this.items.length);for(const e of this.items)t.writeVarBytes(e);return t}toRaw(){var t=this.getVarSize();return this.toWriter(new c(t)).render()}toJSON(){return this.toRaw().toString("hex")}fromJSON(t){return r("string"==typeof t,"Witness must be a string."),this.fromRaw(e.from(t,"hex"))}static fromJSON(t){return(new f).fromJSON(t)}fromReader(t){var e=t.readVarint();for(let i=0;i<e;i++)this.items.push(t.readVarBytes());return this}fromRaw(t){return this.fromReader(new h(t))}static fromReader(t){return(new f).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new f).fromRaw(t)}fromString(t){if(!Array.isArray(t)){if(r("string"==typeof t),0===(t=t.trim()).length)return this;t=t.split(/\s+/)}for(const i of t)this.items.push(e.from(i,"hex"));return this}static fromString(t){return(new f).fromString(t)}static isWitness(t){return t instanceof f}}t.exports=f}).call(this,i(0).Buffer)},function(t,e,i){(function(e){function i(t){try{if(!e.localStorage)return}catch(t){return}return null!=(t=e.localStorage[t])&&"true"===String(t).toLowerCase()}t.exports=function(t,e){if(i("noDeprecation"))return t;var r=!1;return function(){if(!r){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,i(12))},function(t,e,i){"use strict";(function(e){
/*!
 * merkleblock.js - merkleblock object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(3),n=i(2),o=i(6),a=i(4),h=i(8),c=i(9);var u=i(101);const l=i(71),f=e.from([0]);class d extends u{constructor(t){super(),this.txs=[],this.hashes=[],this.flags=f,this.totalTX=0,this._tree=null,t&&this.fromOptions(t)}fromOptions(t){if(this.parseOptions(t),r(t,"MerkleBlock data is required."),r(Array.isArray(t.hashes)),r(e.isBuffer(t.flags)),r(s.isU32(t.totalTX)),t.hashes)for(var i of t.hashes)"string"==typeof i&&(i=e.from(i,"hex")),r(e.isBuffer(i)),this.hashes.push(i);return t.flags&&(r(e.isBuffer(t.flags)),this.flags=t.flags),null!=t.totalTX&&(r(s.isU32(t.totalTX)),this.totalTX=t.totalTX),this}static fromOptions(t){return(new d).fromOptions(t)}refresh(t){if(this._refresh(),this._tree=null,t)for(const t of this.txs)t.refresh()}hasTX(t){return-1!==this.indexOf(t)}indexOf(t){return null==(t=this.getTree().map.get(t))?-1:t}verifyBody(){var[t]=this.checkBody();return t}checkBody(){return this.getTree().root!==this.merkleRoot?[!1,"bad-txnmrklroot",100]:[!0,"valid",0]}getTree(){if(!this._tree)try{this._tree=this.extractTree()}catch(t){this._tree=new p}return this._tree}extractTree(){const t=[],e=[],i=new Map,r=this.hashes,s=this.flags,n=this.totalTX;let o=0,u=0,l=!1,f=0;const d=t=>n+(1<<t)-1>>>t,g=(n,c)=>{if(o>=8*s.length)return l=!0,a.ZERO_HASH;var f,p=s[o/8|0]>>>o%8&1;if(o++,0===n||!p)return u>=r.length?(l=!0,a.ZERO_HASH):(f=r[u++],0===n&&p&&(p=f.toString("hex"),t.push(f),e.push(c),i.set(p,c)),f);let m;return p=g(n-1,2*c),2*c+1<d(n-1)?(m=g(n-1,2*c+1)).equals(p)&&(l=!0):m=p,h.root256(p,m)};if(0===n)throw new Error("Zero transactions.");if(n>(c.MAX_BLOCK_SIZE-81)/60)throw new Error("Too many transactions.");if(r.length>n)throw new Error("Too many hashes.");if(8*s.length<r.length)throw new Error("Flags too small.");for(;1<d(f);)f++;var m=g(f,0);if(l)throw new Error("Mutated merkle tree.");if(((o+7)/8|0)!==s.length)throw new Error("Too many flag bits.");if(u!==r.length)throw new Error("Incorrect number of hashes.");return new p(m,t,e,i)}getCoinbaseHeight(){return-1}inspect(){return this.format()}format(t,e){return{hash:this.rhash(),height:null!=e?e:-1,date:s.date(this.time),version:s.hex32(this.version),prevBlock:s.revHex(this.prevBlock),merkleRoot:s.revHex(this.merkleRoot),time:this.time,bits:this.bits,nonce:this.nonce,totalTX:this.totalTX,hashes:this.hashes.map(t=>t.toString("hex")),flags:this.flags,map:this.getTree().map,txs:this.txs.length}}getSize(){return 84+a.sizeVarint(this.hashes.length)+32*this.hashes.length+a.sizeVarint(this.flags.length)+this.flags.length}toWriter(t){this.writeHead(t),t.writeU32(this.totalTX),t.writeVarint(this.hashes.length);for(const e of this.hashes)t.writeHash(e);return t.writeVarBytes(this.flags),t}toRaw(){var t=this.getSize();return this.toWriter(new o(t)).render()}fromReader(t){this.readHead(t),this.totalTX=t.readU32();var e=t.readVarint();for(let i=0;i<e;i++)this.hashes.push(t.readHash());return this.flags=t.readVarBytes(),this}fromRaw(t){return this.fromReader(new n(t))}static fromReader(t){return(new d).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new d).fromRaw(t)}toJSON(){return this.getJSON()}getJSON(t,e,i){return{hash:this.rhash(),height:i,version:this.version,prevBlock:s.revHex(this.prevBlock),merkleRoot:s.revHex(this.merkleRoot),time:this.time,bits:this.bits,nonce:this.nonce,totalTX:this.totalTX,hashes:this.hashes.map(t=>s.revHex(t.toString("hex"))),flags:this.flags.toString("hex")}}fromJSON(t){for(var i of(r(t,"MerkleBlock data is required."),r(Array.isArray(t.hashes)),r("string"==typeof t.flags),r(s.isU32(t.totalTX)),this.parseJSON(t),t.hashes))i=s.revHex(i),this.hashes.push(e.from(i,"hex"));return this.flags=e.from(t.flags,"hex"),this.totalTX=t.totalTX,this}static fromJSON(t){return(new d).fromJSON(t)}static fromBlock(t,e){var i=[];for(const r of t.txs)i.push(r.isWatched(e)?1:0);return d.fromMatches(t,i)}static fromHashes(t,i){var r,s=new Set;for(r of i)e.isBuffer(r)&&(r=r.toString("hex")),s.add(r);var n=[];for(const e of t.txs){var o=e.hash("hex");n.push(s.has(o)?1:0)}return d.fromMatches(t,n)}static fromMatches(t,i){var r=[],s=[];const n=[],o=[],a=t.txs.length;let c=0;const u=t=>a+(1<<t)-1>>>t,l=(t,e,i)=>{if(0===t)return i[e];var r=l(t-1,2*e,i);let s;return s=2*e+1<u(t-1)?l(t-1,2*e+1,i):r,h.root256(r,s)},f=(t,e,i,r)=>{let s=0;for(let i=e<<t;i<e+1<<t&&i<a;i++)s|=r[i];n.push(s),0!==t&&s?(f(t-1,2*e,i,r),2*e+1<u(t-1)&&f(t-1,2*e+1,i,r)):o.push(l(t,e,i))};for(let e=0;e<t.txs.length;e++){var p=t.txs[e];i[e]&&r.push(p),s.push(p.hash())}for(;1<u(c);)c++;f(c,0,s,i);var g=e.allocUnsafe((n.length+7)/8|0);g.fill(0);for(let t=0;t<n.length;t++)g[t/8|0]|=n[t]<<t%8;var m=new d;return m._hash=t._hash,m._hhash=t._hhash,m.version=t.version,m.prevBlock=t.prevBlock,m.merkleRoot=t.merkleRoot,m.time=t.time,m.bits=t.bits,m.nonce=t.nonce,m.totalTX=a,m.hashes=o,m.flags=g,m.txs=r,m}static isMerkleBlock(t){return t instanceof d}toHeaders(){return l.fromBlock(this)}}function p(t,e,i,r){this.root=t?t.toString("hex"):a.NULL_HASH,this.matches=e||[],this.indexes=i||[],this.map=r||new Map}t.exports=d}).call(this,i(0).Buffer)},function(t,e,i){(function(e){const r=i(7).PropStatus;var s=i(28);class n extends s{constructor(t){super(),this.db=t||{getVp:async t=>this.get(t),setVp:t=>{this.set(t.pid,t)},delVp:t=>{this.delete(t)},loadVpList:()=>{}}}async loadHistory(){}setAccount(t,e,i){var r;t&&t.wid&&t.account&&(r=t.wid+"."+t.account,this.account.get(r))&&this.account.get(r).delete(t.pid),t.wid=e,t.account=i,e&&i&&(r=t.wid+"."+t.account,this.account.get(r)||this.account.set(r,new Map),this.account.get(r).set(t.pid,t))}delAccount(t){var e;t&&t.wid&&t.account&&(e=t.wid+"."+t.account,this.account.get(e))&&this.account.get(e).delete(t.pid)}async getVp(t){return this.db.getVp(t)}async getVpByAddress(t){return this.db.getVpByAddress(t)}async getVpByOid(t){return this.db.getVpByOid(t)}async setVp(t,e){t=new o(t),await this.db.setVp(t,e)}async delVp(t){this.delete(t.pid),await this.db.delVp(t)}}class o{constructor(t){this.fromOptions(t=t||{})}fromOptions(t){this.pid=t.pid,this.cid=t.cid||"",this.oid=t.oid||"",this.gold=t.gold,this.current=null,t.current&&(this.current={},this.current.hash=t.current.hash,this.current.index=t.current.index,this.current.address=t.current.address),this.height=t.height,this.pst=t.pst||r.Ready,this.wid=t.wid||0,this.account=t.account||"",this.bid=null,t.bid&&(this.bid={},this.bid.raw=t.bid.raw||"",this.bid.fixed=t.bid.fixed||0,this.bid.period=t.bid.period||0,this.bid.hash=t.bid.hash||"",this.bid.value=t.bid.value||0,this.bid.address=t.bid.address||"")}toRaw(){var t={};return t.pid=this.pid,t.cid=this.cid||"",t.oid=this.oid||"",t.gold=this.gold,this.current&&(t.current={},t.current.hash=this.current.hash,t.current.index=this.current.index,t.current.address=this.current.address),t.height=this.height,t.pst=this.pst||r.Ready,t.wid=this.wid||0,t.account=this.account||"",this.bid&&(t.bid={},t.bid.raw=this.bid.raw||"",t.bid.fixed=this.bid.fixed||0,t.bid.period=this.bid.period||0,t.bid.hash=this.bid.hash||"",t.bid.value=this.bid.value||0,t.bid.address=this.bid.address||""),e.from(JSON.stringify(t),"utf-8")}fromRaw(t){return t=JSON.parse(t.toString("utf8")),this.fromOptions(t),this}static fromRaw(t){return(new o).fromRaw(t)}}n.vpItem=o,t.exports=n}).call(this,i(0).Buffer)},function(t,e,i){(function(e){var r=i(46);const s=i(79),n=i(16),o=i(25),a=i(9),h=i(1),{Transform:c,ContractType:u,HtlcStatus:l,ContractEnvType:f}=i(7),d=new c("\n    /*携带合约信息*/\n    HTLCSUGGEST var_contract DROP\n    /*校验秘密，持有秘密者才可执行*/\n    HASH160 var_ab EQUALVERIFY \n    IF\n        /*Bob确认时执行: 校验Bob签名*/\n        DUP HASH160 var_ba EQUALVERIFY CHECKSIG\n    ELSE\n        /*Alice取消时执行: 校验延时和Alice签名*/\n        var_period CHECKSEQUENCEVERIFY DROP\n        DUP HASH160 var_aa EQUALVERIFY CHECKSIG\n    ENDIF\n");t.exports=class extends r{async confirm(){var{env:t,output:e,hash:i,i:r,data:n,height:o}=this.options,a=e.getHashs("hex"),i={type:"suggest",src:s.protocol+"."+t.network.type,dst:n.dst,shash:i,sidx:r,sheight:o,pst:l.Sent,amount:e.value,rate:n.rate,ab:e.script.code[4].data.toString("hex"),aa:a[1],ba:a[0]};await t.setSuggest(i),t.mode==f.Block&&t.node.transmit("htlcsuggest.receive",i)}async unconfirm(){var{env:t,data:e}=this.options,e={shash:e.hash,sidx:e.index};await t.delHtlc(e)}async spent(t){var e=this.options.env,i=e.htlcList.get(""+t.prevout.hash+t.prevout.index);i&&(81==t.script.code[2].value?(i.pst=l.Finished,await e.setSuggest(i),e.mode==f.Block&&e.node.transmit("htlcsuggest.deal",i)):(i.pst=l.Cancel,await e.setSuggest(i),e.mode==f.Block&&e.node.transmit("htlcsuggest.cancel",i)))}async verify(){var{output:t,data:i}=this.options,r=(i={oper:u.htlcSuggest,rate:i.rate,dst:i.dst},t.getHashs("hex")),s=t.script.code[4].data.toString("hex"),i={contract:"0x"+e.from(JSON.stringify(i)).toString("hex"),ab:"0x"+s.toString("hex"),aa:"0x"+r[1].toString("hex"),ba:"0x"+r[0].toString("hex"),period:2*a.HTLC_CANCEL_PERIOD};s=n.fromString(d.replace(i));return h(s.toString()===t.script.toString()),!0}static create(t){var i={oper:u.htlcSuggest,rate:t.rate,dst:t.dst};i={contract:"0x"+e.from(JSON.stringify(i)).toString("hex"),ab:"0x"+t.ab.toString("hex"),aa:"0x"+t.aa.toString("hex"),ba:"0x"+t.ba.toString("hex"),period:2*a.HTLC_CANCEL_PERIOD},i=n.fromString(d.replace(i));return o.fromScript(i,t.amount)}}}).call(this,i(0).Buffer)},function(t,e,i){(function(e){var r=i(46);const s=i(79),n=i(16),o=i(25),a=i(9),{Transform:h,ContractType:c,HtlcStatus:u,ContractEnvType:l}=i(7),f=new h("\n    /*携带合约信息*/\n    HTLCASSENT var_contract DROP\n    IF\n        /*Alice确认时执行: 校验签名*/\n        DUP HASH160 var_ab EQUALVERIFY CHECKSIG\n    ELSE\n        /*Bob取消时执行: 校验延时和签名*/\n        var_period CHECKSEQUENCEVERIFY DROP\n        DUP HASH160 var_bb EQUALVERIFY CHECKSIG\n    ENDIF\n");t.exports=class extends r{async confirm(){var{env:t,i:e,output:i,hash:r,height:n,data:o}=this.options,i=i.getHashs("hex"),r={src:o.src,dst:s.protocol+"."+t.network.type,shash:o.hash,sidx:o.index,ahash:r,aidx:e,aheight:n,pst:u.Assent,amount:o.value,rate:o.rate,ab:i[0],bb:i[1]};await t.setAssent(r),t.mode==l.Block&&t.node.transmit("htlcassent.receive",r)}async unconfirm(){var{env:t,data:e}=this.options,e={shash:e.hash,sidx:e.index};await t.delHtlc(e)}async spent(t){var e=this.options.env,i=e.htlcList.query([["ahash",t.prevout.hash],["aidx",t.prevout.index]]);i&&1===i.list.length&&i.list[0].pst===u.Assent&&(i=i.list[0],81==t.script.code[2].value?(i.secret=t.script.code[1].data.toString("hex"),i.pst=u.Deal,await e.setAssent(i),e.mode==l.Block&&e.node.transmit("htlcassent.deal",i)):(i.pst=u.Cancel,await e.setAssent(i),e.mode==l.Block&&e.node.transmit("htlcassent.cancel",i)))}async verify(){var{env:t,output:i,data:r}=this.options;return r.dst==s.protocol+"."+t.network.type&&(t={oper:c.htlcAssent,hash:r.hash,index:r.index},r=i.getHashs("hex"),t=n.fromString(f.replace({contract:"0x"+e.from(JSON.stringify(t)).toString("hex"),ab:"0x"+r[0].toString("hex"),bb:"0x"+r[1].toString("hex"),period:a.HTLC_CANCEL_PERIOD})),assert(t.toString()===i.script.toString()),!0)}static create(t){var i={oper:c.htlcAssent,hash:t.hash,index:t.index};i=n.fromString(f.replace({contract:"0x"+e.from(JSON.stringify(i)).toString("hex"),ab:"0x"+t.ab.toString("hex"),bb:"0x"+t.bb.toString("hex"),period:a.HTLC_CANCEL_PERIOD}));return o.fromScript(i,t.amount)}}}).call(this,i(0).Buffer)},function(t,e,i){(function(e){var r=i(46);const s=i(16),n=i(25),o=i(1),{Transform:a,ContractType:h,ContractEnvType:c}=i(7),u=i(13),l=i(59).verifyData,f=new a("\n    /*携带合约信息*/\n    COMMENT var_contract DROP\n    /*Bob确认时执行: 校验Bob签名*/\n    DUP HASH160 var_bob EQUALVERIFY CHECKSIG\n");t.exports=class extends r{async insert(){var{env:t,output:e,hash:i,i:r,data:s}=this.options,e=u.fromWitnessPubkeyhash(e.getHash(),t.network).toString(),i={shash:i,sidx:r,alice:s.payload.addr,bob:e,body:s.payload.body};t.mode==c.Wallet&&await t.setComment(i)}async erase(){var{env:t,hash:e,i:i}=this.options,e={shash:e,sidx:i};t.mode==c.Wallet&&await t.delComment(e)}async verify(){var{output:t,data:i}=this.options,r=t.getHash();r=s.fromString(f.replace({contract:"0x"+e.from(JSON.stringify(i)).toString("hex"),bob:"0x"+r.toString("hex")})),o(r.toString()===t.script.toString()),r=i.payload.sig;return delete(i=i.payload).sig,o.strictEqual(!0,l({data:i,sig:r})),!0}static create(t){var i={oper:h.comment,payload:t};i={contract:"0x"+e.from(JSON.stringify(i)).toString("hex"),bob:"0x"+u.fromString(t.bob).hash.toString("hex")},i=s.fromString(f.replace(i));return n.fromScript(i,t.amount)}}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * netaddress.js - network address object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1);var s=i(66);const n=i(18),o=i(3),a=i(53),h=i(6),c=i(2);function u(t){if(!(this instanceof u))return new u(t);this.host="0.0.0.0",this.port=0,this.services=0,this.time=0,this.hostname="0.0.0.0:0",this.raw=a.ZERO_IP,t&&this.fromOptions(t)}u.DEFAULT_SERVICES=0|s.services.NETWORK|s.services.WITNESS|s.services.BLOOM,u.prototype.fromOptions=function(t){return r("string"==typeof t.host),r("number"==typeof t.port),this.raw=a.toBuffer(t.host),this.host=a.toString(this.raw),this.port=t.port,t.services&&(r("number"==typeof t.services),this.services=t.services),t.time&&(r("number"==typeof t.time),this.time=t.time),this.hostname=a.toHostname(this.host,this.port),this},u.fromOptions=function(t){return(new u).fromOptions(t)},u.prototype.hasServices=function(t){return(this.services&t)===t},u.isIPv4=function(){return a.isIPv4(this.raw)},u.isIPv6=function(){return a.isIPv6(this.raw)},u.prototype.isNull=function(){return a.isNull(this.raw)},u.prototype.isLocal=function(){return a.isLocal(this.raw)},u.prototype.isValid=function(){return a.isValid(this.raw)},u.prototype.isRoutable=function(){return a.isRoutable(this.raw)},u.prototype.isOnion=function(){return a.isOnion(this.raw)},u.prototype.equal=function(t){return 0===this.compare(t)},u.prototype.compare=function(t){var e=this.raw.compare(t.raw);return 0!==e?e:this.port-t.port},u.prototype.getReachability=function(t){return a.getReachability(this.raw,t.raw)},u.prototype.setNull=function(){this.raw=a.ZERO_IP,this.host="0.0.0.0",this.hostname=a.toHostname(this.host,this.port)},u.prototype.setHost=function(t){this.raw=a.toBuffer(t),this.host=a.toString(this.raw),this.hostname=a.toHostname(this.host,this.port)},u.prototype.setPort=function(t){r(0<=t&&t<=65535),this.port=t,this.hostname=a.toHostname(this.host,t)},u.prototype.fromHost=function(t,e,i){return i=n.get(i),r(0<=e&&e<=65535),this.raw=a.toBuffer(t),this.host=a.toString(this.raw),this.port=e,this.services=u.DEFAULT_SERVICES,this.time=i.now(),this.hostname=a.toHostname(this.host,this.port),this},u.fromHost=function(t,e,i){return(new u).fromHost(t,e,i)},u.prototype.fromHostname=function(t,e){return e=n.get(e),t=a.fromHostname(t,e.port),this.fromHost(t.host,t.port,e)},u.fromHostname=function(t,e){return(new u).fromHostname(t,e)},u.prototype.fromSocket=function(t,e){var i=t.remoteAddress;t=t.remotePort;return r("string"==typeof i),r("number"==typeof t),this.fromHost(a.normalize(i),t,e)},u.fromSocket=function(t,e){return(new u).fromSocket(t,e)},u.prototype.fromReader=function(t,e){return this.time=e?t.readU32():0,this.services=t.readU32(),t.readU32(),this.raw=t.readBytes(16),this.host=a.toString(this.raw),this.port=t.readU16BE(),this.hostname=a.toHostname(this.host,this.port),this},u.prototype.fromRaw=function(t,e){return this.fromReader(new c(t),e)},u.fromReader=function(t,e){return(new u).fromReader(t,e)},u.fromRaw=function(t,e){return(new u).fromRaw(t,e)},u.prototype.toWriter=function(t,e){return e&&t.writeU32(this.time),t.writeU32(this.services),t.writeU32(0),t.writeBytes(this.raw),t.writeU16BE(this.port),t},u.prototype.getSize=function(t){return 26+(t?4:0)},u.prototype.toRaw=function(t){var e=this.getSize(t);return this.toWriter(new h(e),t).render()},u.prototype.toJSON=function(){return{host:this.host,port:this.port,services:this.services,time:this.time}},u.prototype.fromJSON=function(t){return r(o.isU16(t.port)),r(o.isU32(t.services)),r(o.isU32(t.time)),this.raw=a.toBuffer(t.host),this.host=t.host,this.port=t.port,this.services=t.services,this.time=t.time,this.hostname=a.toHostname(this.host,this.port),this},u.fromJSON=function(t){return(new u).fromJSON(t)},u.prototype.inspect=function(){return"<NetAddress: hostname="+this.hostname+" services="+this.services.toString(2)+" date="+o.date(this.time)+">"},t.exports=u},function(t,e,i){"use strict";
/*!
 * common.js - common functions for hd
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1);i=i(52);const s=e;s.HARDENED=2147483648,s.MIN_ENTROPY=128,s.MAX_ENTROPY=512,s.cache=new i(500),s.parsePath=function(t,e){r("string"==typeof t),r("boolean"==typeof e),r(1<=t.length),r(t.length<=3062);var i=t.split("/");if("m"!==(t=i[0])&&"M"!==t&&"m'"!==t&&"M'"!==t)throw new Error("Invalid path root.");var n=[];for(let t=1;t<i.length;t++){let r=i[t];var o="'"===r[r.length-1];if(10<(r=o?r.slice(0,-1):r).length)throw new Error("Path index too large.");if(!/^\d+$/.test(r))throw new Error("Path index is non-numeric.");let a=parseInt(r,10);if(a>>>0!==a)throw new Error("Path index out of range.");if(o&&(a=(a|s.HARDENED)>>>0),!e&&a&s.HARDENED)throw new Error("Path index cannot be hardened.");n.push(a)}return n},s.isMaster=function(t){return 0===t.depth&&0===t.childIndex&&0===t.parentFingerPrint},s.isAccount=function(t,e){return(null==e||(e=(s.HARDENED|e)>>>0,t.childIndex===e))&&(3===t.depth&&0!=(t.childIndex&s.HARDENED))}},function(t,e,i){"use strict";
/*!
 * txsorter.js - commonly required functions utils.
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(139);e.sortWithSeq=function(t){var e,i,s=[],n=new Map,o=new Set,a=new Map;for(e of t){let t;(t=e instanceof r?e.tx:e).$txid=t.txid(),a.has(t.$txid)||(a.set(t.$txid,{raw:e,tx:t,hash:t.$txid}),o.add(t))}for(i of o){var h,c=a.get(i.$txid);for({prevout:h}of i.inputs){var u=h.rhash();a.has(u)&&(c.depCount+=1,n.has(u)||n.set(u,[]),n.get(u).push(c))}}for(var l=o.size;s.length<l;)for(var f of o){var d=a.get(f.$txid);if(!(0<d.depCount)){if(s.push(d.raw),d=n.get(f.$txid))for(var p of d)--p.depCount;o.delete(f);break}}return s}},function(t,e,i){"use strict";(function(e){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,i,r,s){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var n,o,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,i)}));case 3:return e.nextTick((function(){t.call(null,i,r)}));case 4:return e.nextTick((function(){t.call(null,i,r,s)}));default:for(n=new Array(a-1),o=0;o<n.length;)n[o++]=arguments[o];return e.nextTick((function(){t.apply(null,n)}))}}}:t.exports=e}).call(this,i(11))},function(t,e,i){var r=i(10).Buffer;function s(t){for(var e=(t=r.isBuffer(t)?t:r.from(t)).length/4|0,i=new Array(e),s=0;s<e;s++)i[s]=t.readUInt32BE(4*s);return i}function n(t){for(;0<t.length;t++)t[0]=0}function o(t,e,i,r,s){for(var n,o,a,h,c=i[0],u=i[1],l=i[2],f=i[3],d=t[0]^e[0],p=t[1]^e[1],g=t[2]^e[2],m=t[3]^e[3],w=4,y=1;y<s;y++)n=c[d>>>24]^u[p>>>16&255]^l[g>>>8&255]^f[255&m]^e[w++],o=c[p>>>24]^u[g>>>16&255]^l[m>>>8&255]^f[255&d]^e[w++],a=c[g>>>24]^u[m>>>16&255]^l[d>>>8&255]^f[255&p]^e[w++],h=c[m>>>24]^u[d>>>16&255]^l[p>>>8&255]^f[255&g]^e[w++],d=n,p=o,g=a,m=h;return n=(r[d>>>24]<<24|r[p>>>16&255]<<16|r[g>>>8&255]<<8|r[255&m])^e[w++],o=(r[p>>>24]<<24|r[g>>>16&255]<<16|r[m>>>8&255]<<8|r[255&d])^e[w++],a=(r[g>>>24]<<24|r[m>>>16&255]<<16|r[d>>>8&255]<<8|r[255&p])^e[w++],h=(r[m>>>24]<<24|r[d>>>16&255]<<16|r[p>>>8&255]<<8|r[255&g])^e[w++],[n>>>=0,o>>>=0,a>>>=0,h>>>=0]}var a=[0,1,2,4,8,16,32,64,128,27,54],h=function(){for(var t=new Array(256),e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var i=[],r=[],s=[[],[],[],[]],n=[[],[],[],[]],o=0,a=0,h=0;h<256;++h){var c=a^a<<1^a<<2^a<<3^a<<4,u=(i[o]=c=c>>>8^255&c^99,t[r[c]=o]),l=t[u],f=t[l],d=257*t[c]^16843008*c;s[0][o]=d<<24|d>>>8,s[1][o]=d<<16|d>>>16,s[2][o]=d<<8|d>>>24,s[3][o]=d,n[0][c]=(d=16843009*f^65537*l^257*u^16843008*o)<<24|d>>>8,n[1][c]=d<<16|d>>>16,n[2][c]=d<<8|d>>>24,n[3][c]=d,0===o?o=a=1:(o=u^t[t[t[f^u]]],a^=t[t[a]])}return{SBOX:i,INV_SBOX:r,SUB_MIX:s,INV_SUB_MIX:n}}();function c(t){this._key=s(t),this._reset()}c.blockSize=16,c.keySize=32,c.prototype.blockSize=c.blockSize,c.prototype.keySize=c.keySize,c.prototype._reset=function(){for(var t=this._key,e=t.length,i=e+6,r=4*(i+1),s=[],n=0;n<e;n++)s[n]=t[n];for(n=e;n<r;n++){var o=s[n-1];n%e==0?(o=h.SBOX[(o=o<<8|o>>>24)>>>24]<<24|h.SBOX[o>>>16&255]<<16|h.SBOX[o>>>8&255]<<8|h.SBOX[255&o],o^=a[n/e|0]<<24):6<e&&n%e==4&&(o=h.SBOX[o>>>24]<<24|h.SBOX[o>>>16&255]<<16|h.SBOX[o>>>8&255]<<8|h.SBOX[255&o]),s[n]=s[n-e]^o}for(var c=[],u=0;u<r;u++){var l=r-u,f=s[l-(u%4?0:4)];c[u]=u<4||l<=4?f:h.INV_SUB_MIX[0][h.SBOX[f>>>24]]^h.INV_SUB_MIX[1][h.SBOX[f>>>16&255]]^h.INV_SUB_MIX[2][h.SBOX[f>>>8&255]]^h.INV_SUB_MIX[3][h.SBOX[255&f]]}this._nRounds=i,this._keySchedule=s,this._invKeySchedule=c},c.prototype.encryptBlockRaw=function(t){return o(t=s(t),this._keySchedule,h.SUB_MIX,h.SBOX,this._nRounds)},c.prototype.encryptBlock=function(t){t=this.encryptBlockRaw(t);var e=r.allocUnsafe(16);return e.writeUInt32BE(t[0],0),e.writeUInt32BE(t[1],4),e.writeUInt32BE(t[2],8),e.writeUInt32BE(t[3],12),e},c.prototype.decryptBlock=function(t){var e=(t=s(t))[1];t[1]=t[3],t[3]=e,e=o(t,this._invKeySchedule,h.INV_SUB_MIX,h.INV_SBOX,this._nRounds);return(t=r.allocUnsafe(16)).writeUInt32BE(e[0],0),t.writeUInt32BE(e[3],4),t.writeUInt32BE(e[2],8),t.writeUInt32BE(e[1],12),t},c.prototype.scrub=function(){n(this._keySchedule),n(this._invKeySchedule),n(this._key)},t.exports.AES=c},function(t,e,i){var r=i(10).Buffer,s=i(188);t.exports=function(t,e,i,n){if(r.isBuffer(t)||(t=r.from(t,"binary")),e&&8!==(e=r.isBuffer(e)?e:r.from(e,"binary")).length)throw new RangeError("salt should be Buffer with 8 byte length");for(var o=i/8,a=r.alloc(o),h=r.alloc(n||0),c=r.alloc(0);0<o||0<n;){var u,l,f=((f=new s).update(c),f.update(t),e&&f.update(e),c=f.digest(),0);0<o&&(u=a.length-o,f=Math.min(o,c.length),c.copy(a,u,0,f),o-=f),f<c.length&&0<n&&(u=h.length-n,l=Math.min(n,c.length-f),c.copy(h,u,f,f+l),n-=l)}return c.fill(0),{key:a,iv:h}}},function(t,e,i){var r=i(485),s=i(492),n=i(493),o=i(196),a=i(270),h=i(10).Buffer;(t.exports=function(t){"object"!=typeof t||h.isBuffer(t)||(e=t.passphrase,t=t.key),"string"==typeof t&&(t=h.from(t));var e,i,c,u,l,f,d,p,g,m,w=(t=n(t,e)).tag,y=t.data;switch(w){case"CERTIFICATE":c=r.certificate.decode(y,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(i=(c=c||r.PublicKey.decode(y,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPublicKey.decode(c.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return c.subjectPrivateKey=c.subjectPublicKey,{type:"ec",data:c};case"1.2.840.10040.4.1":return c.algorithm.params.pub_key=r.DSAparam.decode(c.subjectPublicKey.data,"der"),{type:"dsa",data:c.algorithm.params};default:throw new Error("unknown key id "+i)}case"ENCRYPTED PRIVATE KEY":l=e,f=(u=y=r.EncryptedPrivateKey.decode(y,"der")).algorithm.decrypt.kde.kdeparams.salt,d=parseInt(u.algorithm.decrypt.kde.kdeparams.iters.toString(),10),p=s[u.algorithm.decrypt.cipher.algo.join(".")],g=u.algorithm.decrypt.cipher.iv,u=u.subjectPrivateKey,m=parseInt(p.split("-")[1],10)/8,l=a.pbkdf2Sync(l,f,d,m,"sha1"),f=o.createDecipheriv(p,l,g),(d=[]).push(f.update(u)),d.push(f.final()),y=h.concat(d);case"PRIVATE KEY":switch(i=(c=r.PrivateKey.decode(y,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPrivateKey.decode(c.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:c.algorithm.curve,privateKey:r.ECPrivateKey.decode(c.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return c.algorithm.params.priv_key=r.DSAparam.decode(c.subjectPrivateKey,"der"),{type:"dsa",params:c.algorithm.params};default:throw new Error("unknown key id "+i)}case"RSA PUBLIC KEY":return r.RSAPublicKey.decode(y,"der");case"RSA PRIVATE KEY":return r.RSAPrivateKey.decode(y,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:r.DSAPrivateKey.decode(y,"der")};case"EC PRIVATE KEY":return{curve:(y=r.ECPrivateKey.decode(y,"der")).parameters.value,privateKey:y.privateKey};default:throw new Error("unknown key type "+w)}}).signature=r.signature},function(t,e,i){"use strict";(function(t){
/*!
 * common.js - mining utils
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(9),n=i(38),o=e;o.swap32=function(t){for(let i=0;i<t.length;i+=4){var e=t.readUInt32LE(i,!0);t.writeUInt32BE(e,i,!0)}return t},o.swap32hex=function(e){return e=t.from(e,"hex"),o.swap32(e).toString("hex")},o.rcmp=function(t,e){r(t.length===e.length);for(let i=t.length-1;0<=i;i--){if(t[i]<e[i])return-1;if(t[i]>e[i])return 1}return 0},o.double256=function(t){var e=0;return r(32===t.length),(e+=6277101735386681e42*(4294967296*t.readUInt32LE(28,!0)+t.readUInt32LE(24,!0)))+3402823669209385e23*(4294967296*t.readUInt32LE(20,!0)+t.readUInt32LE(16,!0))+0x10000000000000000*(4294967296*t.readUInt32LE(12,!0)+t.readUInt32LE(8,!0))+ +(4294967296*t.readUInt32LE(4,!0)+t.readUInt32LE(0,!0))},o.getDifficulty=function(t){var e=2695953529101131e52;return 0===(t=o.double256(t))?e:Math.floor(e/t)},o.bits2Diff=function(t){let e=t>>>24&255,i=65535/(16777215&t);for(;e<29;)i*=256,e++;for(;29<e;)i/=256,e--;return i},o.bits2Hash=function(e){if((e=s.compact2BN(e)).isNeg())throw new Error("Target is negative.");if(e.isZero())throw new Error("Target is zero.");return e.toArrayLike(t,"le",32)},o.hash2Bits=function(t){if((t=new n(t,"le")).isZero())throw new Error("Target is zero.");return s.bn2Compact(t)}}).call(this,i(0).Buffer)},function(t,e,i){var r,s,n=i(526),o=i(527),a=0,h=0;t.exports=function(t,e,i){var c=e&&i||0,u=e||[],l=(t=t||{}).node||r,f=(i=void 0!==t.clockseq?t.clockseq:s,null!=l&&null!=i||(f=n(),null==l&&(l=r=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==i&&(i=s=16383&(f[6]<<8|f[7]))),void 0!==t.msecs?t.msecs:(new Date).getTime()),d=void 0!==t.nsecs?t.nsecs:h+1,p=f-a+(d-h)/1e4;if(p<0&&void 0===t.clockseq&&(i=i+1&16383),1e4<=(d=(p<0||a<f)&&void 0===t.nsecs?0:d))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=f,s=i,p=(1e4*(268435455&(f+=122192928e5))+(h=d))%4294967296,u[c++]=p>>>24&255,u[c++]=p>>>16&255,u[c++]=p>>>8&255,u[c++]=255&p,t=f/4294967296*1e4&268435455,u[c++]=t>>>8&255,u[c++]=255&t,u[c++]=t>>>24&15|16,u[c++]=t>>>16&255,u[c++]=i>>>8|128,u[c++]=255&i;for(var g=0;g<6;++g)u[c+g]=l[g];return e||o(u)}},function(t,e,i){(function(t){var r,s=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),i={},r=0;r<e.length;r++)i[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return i},n=/%[sdj%]/g,o=(e.format=function(t){if(!w(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(a(arguments[i]));return e.join(" ")}i=1;for(var r=arguments,s=r.length,o=String(t).replace(n,(function(t){if("%%"===t)return"%";if(s<=i)return t;switch(t){case"%s":return String(r[i++]);case"%d":return Number(r[i++]);case"%j":try{return JSON.stringify(r[i++])}catch(t){return"[Circular]"}default:return t}})),h=r[i];i<s;h=r[++i])g(h)||!v(h)?o+=" "+h:o+=" "+a(h);return o},e.deprecate=function(i,r){var s;return void 0!==t&&!0===t.noDeprecation?i:void 0===t?function(){return e.deprecate(i,r).apply(this,arguments)}:(s=!1,function(){if(!s){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),s=!0}return i.apply(this,arguments)})},{});function a(t,i){var r={seen:[],stylize:c};return 3<=arguments.length&&(r.depth=arguments[2]),4<=arguments.length&&(r.colors=arguments[3]),p(i)?r.showHidden=i:i&&e._extend(r,i),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=h),u(r,t,r.depth)}function h(t,e){return(e=a.styles[e])?"["+a.colors[e][0]+"m"+t+"["+a.colors[e][1]+"m":t}function c(t,e){return t}function u(t,i,r){if(t.customInspect&&i&&_(i.inspect)&&i.inspect!==e.inspect&&(!i.constructor||i.constructor.prototype!==i))return w(n=i.inspect(r,t))?n:u(t,n,r);if(n=function(t,e){return y(e)?t.stylize("undefined","undefined"):w(e)?(i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",t.stylize(i,"string")):m(e)?t.stylize(""+e,"number"):p(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0;var i}(t,i))return n;var s,n=Object.keys(i),o=(s={},n.forEach((function(t,e){s[t]=!0})),s);if(t.showHidden&&(n=Object.getOwnPropertyNames(i)),S(i)&&(0<=n.indexOf("message")||0<=n.indexOf("description")))return l(i);if(0===n.length){if(_(i))return h=i.name?": "+i.name:"",t.stylize("[Function"+h+"]","special");if(b(i))return t.stylize(RegExp.prototype.toString.call(i),"regexp");if(k(i))return t.stylize(Date.prototype.toString.call(i),"date");if(S(i))return l(i)}var a,h="",c=!1,v=["{","}"];return d(i)&&(c=!0,v=["[","]"]),_(i)&&(h=" [Function"+(i.name?": "+i.name:"")+"]"),b(i)&&(h=" "+RegExp.prototype.toString.call(i)),k(i)&&(h=" "+Date.prototype.toUTCString.call(i)),S(i)&&(h=" "+l(i)),0!==n.length||c&&0!=i.length?r<0?b(i)?t.stylize(RegExp.prototype.toString.call(i),"regexp"):t.stylize("[Object]","special"):(t.seen.push(i),a=c?function(t,e,i,r,s){for(var n=[],o=0,a=e.length;o<a;++o)A(e,String(o))?n.push(f(t,e,i,r,String(o),!0)):n.push("");return s.forEach((function(s){s.match(/^\d+$/)||n.push(f(t,e,i,r,s,!0))})),n}(t,i,r,o,n):n.map((function(e){return f(t,i,r,o,e,c)})),t.seen.pop(),60<a.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)?v[0]+(""===h?"":h+"\n ")+" "+a.join(",\n  ")+" "+v[1]:v[0]+h+" "+a.join(", ")+" "+v[1]):v[0]+h+v[1]}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,i,r,s,n){var o,a;if((e=Object.getOwnPropertyDescriptor(e,s)||{value:e[s]}).get?a=e.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):e.set&&(a=t.stylize("[Setter]","special")),A(r,s)||(o="["+s+"]"),a||(t.seen.indexOf(e.value)<0?-1<(a=g(i)?u(t,e.value,null):u(t,e.value,i-1)).indexOf("\n")&&(a=n?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),y(o)){if(n&&s.match(/^\d+$/))return a;o=(o=JSON.stringify(""+s)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),t.stylize(o,"string"))}return o+": "+a}function d(t){return Array.isArray(t)}function p(t){return"boolean"==typeof t}function g(t){return null===t}function m(t){return"number"==typeof t}function w(t){return"string"==typeof t}function y(t){return void 0===t}function b(t){return v(t)&&"[object RegExp]"===x(t)}function v(t){return"object"==typeof t&&null!==t}function k(t){return v(t)&&"[object Date]"===x(t)}function S(t){return v(t)&&("[object Error]"===x(t)||t instanceof Error)}function _(t){return"function"==typeof t}function x(t){return Object.prototype.toString.call(t)}function R(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(i){var s;return y(r)&&(r=t.env.NODE_DEBUG||""),i=i.toUpperCase(),o[i]||(new RegExp("\\b"+i+"\\b","i").test(r)?(s=t.pid,o[i]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",i,s,t)}):o[i]=function(){}),o[i]},(e.inspect=a).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=p,e.isNull=g,e.isNullOrUndefined=function(t){return null==t},e.isNumber=m,e.isString=w,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=y,e.isRegExp=b,e.isObject=v,e.isDate=k,e.isError=S,e.isFunction=_,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=i(344);var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,i;console.log("%s - %s",(i=[R((t=new Date).getHours()),R(t.getMinutes()),R(t.getSeconds())].join(":"),[t.getDate(),E[t.getMonth()],i].join(" ")),e.format.apply(e,arguments))},e.inherits=i(345),e._extend=function(t,e){if(e&&v(e))for(var i=Object.keys(e),r=i.length;r--;)t[i[r]]=e[i[r]];return t};var M="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function O(t,e){var i;return t||((i=new Error("Promise was rejected with a falsy value")).reason=t,t=i),e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(M&&t[M]){var e;if("function"!=typeof(e=t[M]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,M,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,i,r=new Promise((function(t,r){e=t,i=r})),s=[],n=0;n<arguments.length;n++)s.push(arguments[n]);s.push((function(t,r){t?i(t):e(r)}));try{t.apply(this,s)}catch(r){i(r)}return r}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),M&&Object.defineProperty(e,M,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,s(t))},e.promisify.custom=M,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function i(){for(var i=[],r=0;r<arguments.length;r++)i.push(arguments[r]);var s=i.pop();if("function"!=typeof s)throw new TypeError("The last argument must be of type Function");function n(){return s.apply(o,arguments)}var o=this;e.apply(this,i).then((function(e){t.nextTick(n,null,e)}),(function(e){t.nextTick(O,e,n)}))}return Object.setPrototypeOf(i,Object.getPrototypeOf(e)),Object.defineProperties(i,s(e)),i}}).call(this,i(11))},function(t,e,i){"use strict";
/*!
 * network.js - bitcoin networks for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 * @note 新增子链类型:
 * 1. 在 ./config/ 目录下生成新的子链的配置文件，注意子链的[type]和[magic]字段必须有别于其它子链
 * 2. 在本文件中引入该配置文件，并且添加到 networks 中
 */const r={main:i(355),regtest:i(357),simnet:i(358),testnet:i(359),evidence:i(360)};r.types=Object.keys(r).map(t=>r[t].type),t.exports=r},function(t,e,i){"use strict";(function(t){
/*!
 * merkle.js - merkle trees for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(8);e.createTree=function(e){var i=e;let s=e.length,n=!1,o=0;if(0===s)i.push(t.alloc(32));else for(;1<s;){for(let t=0;t<s;t+=2){var a=Math.min(t+1,s-1),h=i[o+t],c=i[o+a];a=(a===t+1&&a+1===s&&h.equals(c)&&(n=!0),r.root256(h,c));i.push(a)}o+=s,s=s+1>>>1}return[i,n]},e.createRoot=function(t){var[t,i]=e.createTree(t);return[t[t.length-1],i]},e.createBranch=function(t,i){let r=i.length;var[s]=e.createTree(i),n=[];let o=0;for(;1<r;){var a=Math.min(1^t,r-1);n.push(s[o+a]),t>>>=1,o+=r,r=r+1>>>1}return n},e.deriveRoot=function(t,e,i){let s=t;for(const t of e)s=1&i?r.root256(t,s):r.root256(s,t),i>>>=1;return s}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * murmur3.js - murmur3 hash for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */function r(t,e){var i=t.length-t.length%4;let r,a=e;for(let e=0;e<i;e+=4)r=s(r=t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e],3432918353),r=s(r=o(r,15),461845907),a=n(s(a=o(a^=r,13),5),3864292196);switch(r=0,3&t.length){case 3:r^=t[2+i]<<16;case 2:r^=t[1+i]<<8;case 1:r=s(r^=t[0+i],3432918353),r=s(r=o(r,15),461845907),a^=r}return a=s(a=(a^=t.length)^a>>>16,2246822507),a=s(a^=a>>>13,3266489909),(a^=a>>>16)<0&&(a+=4294967296),a}function s(t,e){var i=65535&t,r=65535&e,s=i*r;t=(t>>>16)*r+(e>>>16)*i&65535;let n=(t+=s>>>16)<<16|(s&=65535);return n<0&&(n+=4294967296),n}function n(t,e){let i=t+e&4294967295;return i<0&&(i+=4294967296),i}function o(t,e){return t<<e|t>>>32-e}(e=r=(i=i(57).binding)?i.murmur3:r).murmur3=r,e.mul32=s,e.sum32=n,e.rotl32=o,t.exports=e},function(t,e,i){"use strict";
/*!
 * coinentry.js - coin entry object for vallnet
 */const r=i(1),s=i(25),n=i(2),o=i(6),a=i(4),h=i(316),c=i(43);t.exports=class t{constructor(){this.version=1,this.height=-1,this.time=0,this.coinbase=!1,this.output=new s,this.spent=!1,this.raw=null}toOutput(){return this.output}toCoin(t){var e=new c;return e.version=this.version,e.height=this.height,e.time=this.time,e.coinbase=this.coinbase,e.script=this.output.script,e.value=this.output.value,e.hash=t.hash,e.index=t.index,e}fromOutput(t){return this.output=t,this}static fromOutput(e){return(new t).fromOutput(e)}fromCoin(t){return this.version=t.version,this.height=t.height,this.time=t.time,this.coinbase=t.coinbase,this.output.script=t.script,this.output.value=t.value,this}static fromCoin(e){return(new t).fromCoin(e)}fromTX(t,e,i,s){return r("number"==typeof e),r("number"==typeof i),r("number"==typeof s),r(0<=e&&e<t.outputs.length),this.version=t.version,this.height=i,this.time=s,this.coinbase=t.isCoinbase(),this.output=t.outputs[e],this}static fromTX(e,i,r,s){return(new t).fromTX(e,i,r,s)}getSize(){return this.raw?this.raw.length:0+a.sizeVarint(this.version)+4+4+h.size(this.output)}toWriter(t){if(this.raw)t.writeBytes(this.raw);else{let e=this.height,i=0;this.coinbase&&(i|=1),-1===e&&(e=2147483647),i|=e<<1,t.writeVarint(this.version),i>>>=0,t.writeU32(i),t.writeU32(this.time),h.pack(this.output,t)}return t}toRaw(){var t;return this.raw||(t=this.getSize(),t=new o(t),this.toWriter(t),this.raw=t.render()),this.raw}fromReader(t){var e=t.readVarint(),i=t.readU32();let r=i>>>1;return 2147483647===r&&(r=-1),this.version=e,this.coinbase=0!=(1&i),this.height=r,this.time=t.readU32(),h.unpack(this.output,t),this}static fromReader(e){return(new t).fromReader(e)}fromRaw(t){return this.fromReader(new n(t)),this.raw=t,this}static fromRaw(e){return(new t).fromRaw(e)}}},function(t,e,i){"use strict";(function(e){
/*!
 * ccmp.js - constant-time compare for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1);t.exports=function(t,i){if(r(e.isBuffer(t)),r(e.isBuffer(i)),0===i.length)return 0===t.length;let s=t.length^i.length;for(let e=0;e<t.length;e++)s|=t[e]^i[e%i.length];return 0===s}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * general.js - bitcoin constants for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */t.exports={unittest:!1,localhost:!1}},function(t,e,i){"use strict";(function(t,r){
/*!
 * pbkdf2.js - pbkdf2 for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const s=i(8),n=(t.crypto||t.msCrypto||{}).subtle||{};e.derive=function(t,e,i,n,o){var a=s.hash(o,r.alloc(0)).length,h=Math.ceil(n/a),c=r.allocUnsafe(n),u=r.allocUnsafe(e.length+4),l=r.allocUnsafe(a);let f=0;e.copy(u,0);for(let r=0;r<h;r++){u.writeUInt32BE(r+1,e.length,!0);let n=s.hmac(o,u,t);n.copy(l,0);for(let e=1;e<i;e++){n=s.hmac(o,n,t);for(let t=0;t<a;t++)l[t]^=n[t]}l.copy(c,f),f+=a}return c},e.deriveAsync=async function(t,i,s,o,a){var h,c;return n.importKey&&n.deriveBits?(c={name:"PBKDF2",salt:i,iterations:s,hash:function(t){switch(t){case"sha1":return"SHA-1";case"sha256":return"SHA-256";case"sha384":return"SHA-384";case"sha512":return"SHA-512";default:throw new Error(`Algorithm not supported: ${t}.`)}}(a)},h=await n.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]),c=await n.deriveBits(c,h,8*o),r.from(c)):e.derive(t,i,s,o,a)}}).call(this,i(12),i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * mempoolentry.js - mempool entry object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(26),s=i(3),n=i(16),o=i(2),a=i(6),h=i(19);i(47),t.exports=class t{constructor(t){this.tx=null,this.height=-1,this.size=0,this.sigops=0,this.priority=0,this.fee=0,this.deltaFee=0,this.time=0,this.value=0,this.coinbase=!1,this.dependencies=!1,this.descFee=0,this.descSize=0,t&&this.fromOptions(t)}fromOptions(t){return this.tx=t.tx,this.height=t.height,this.size=t.size,this.sigops=t.sigops,this.priority=t.priority,this.fee=t.fee,this.deltaFee=t.deltaFee,this.time=t.time,this.value=t.value,this.coinbase=t.coinbase,this.dependencies=t.dependencies,this.descFee=t.descFee,this.descSize=t.descSize,this}static fromOptions(e){return(new t).fromOptions(e)}fromTX(t,e,i){var r=n.flags.STANDARD_VERIFY_FLAGS,o=t.getChainValue(e),a=(r=t.getSigopsCost(e,r),t.getSigopsSize(r)),h=t.getPriority(e,i,a),c=t.getFee(e);let u=!1;var l,f=t.isCoinbase();for({prevout:l}of t.inputs)if(-1===e.getHeight(l)){u=!0;break}return this.tx=t,this.height=i,this.size=a,this.sigops=r,this.priority=h,this.fee=c,this.deltaFee=c,this.time=s.now(),this.value=o,this.coinbase=f,this.dependencies=u,this.descFee=c,this.descSize=a,this}static fromTX(e,i,r){return(new t).fromTX(e,i,r)}hash(t){return this.tx.hash(t)}txid(){return this.tx.txid()}getPriority(t){return t=(t-this.height)*this.value/this.size,Math.max(0,this.priority+Math.floor(t))}getFee(){return this.fee}getDeltaFee(){return this.deltaFee}getRate(){return r.getRate(this.size,this.fee)}getDeltaRate(){return r.getRate(this.size,this.deltaFee)}getDescRate(){return r.getRate(this.descSize,this.descFee)}memUsage(){var t=this.tx;let e=0;e=(e=(e=(e=(e=e+176+48)+48+208)+80+88)+80+80)+48+32;for(const i of t.inputs){e=(e=(e=(e=e+120+104)+88+40)+80+32)+40*i.script.code.length;for(const t of i.script.code)t.data&&(e+=80);e=(e=e+96+32)+80*i.witness.items.length}e+=32;for(const i of t.outputs){e=(e=(e=e+104+40)+80+32)+40*i.script.code.length;for(const t of i.script.code)t.data&&(e+=80)}return e}isFree(t){return this.getPriority(t)>r.FREE_THRESHOLD}getSize(){return this.tx.getSize()+42}toRaw(){var t=new a(this.getSize());return t.writeBytes(this.tx.toRaw()),t.writeU32(this.height),t.writeU32(this.size),t.writeU32(this.sigops),t.writeDouble(this.priority),t.writeU64(this.fee),t.writeU32(this.time),t.writeU64(this.value),t.writeU8(this.coinbase?1:0),t.writeU8(this.dependencies?1:0),t.render()}fromRaw(t){return t=new o(t),this.tx=h.fromReader(t),this.height=t.readU32(),this.size=t.readU32(),this.sigops=t.readU32(),this.priority=t.readDouble(),this.fee=t.readU64(),this.time=t.readU32(),this.value=t.readU64(),this.coinbase=1===t.readU8(),this.dependencies=1===t.readU8(),this.deltaFee=this.fee,this.descFee=this.fee,this.descSize=this.size,this}static fromRaw(e){return(new t).fromRaw(e)}}},function(t,e,i){var r=i(28);const s=i(6),n=i(2),o=i(4);i(20);const a=i(3);class h extends r{constructor(t){super(),this.env=t}async loadHistory(){var t;for(t of await this.env.getScs())this.set(t.id,t)}async addItem(t){this.set(t.id,t),await this.env.setSc(t)}async delItem(t){await this.env.delSc(t.id),this.delete(t.id)}getItem(t){return this.has(t)?this.get(t):null}}class c{constructor(t){this.options=t||{},this.history=[]}do(){var t=JSON.stringify(this.options);this.history.push(a.parseJson(t)),144<this.history.length&&this.history.shift()}undo(){var t;1<this.history.length&&(this.history.pop(),t=JSON.stringify(this.history[0]),this.options=a.parseJson(t))}get id(){return this.options.addr}getSize(){return 0+o.sizeVarString(JSON.stringify(this.history),"utf8")}toWriter(t){return t.writeVarString(JSON.stringify(this.history),"utf8"),t}toRaw(){var t=this.getSize();return this.toWriter(new s(t)).render()}fromReader(t){return t=t.readVarString("utf8"),this.history=a.parseJson(t),t=JSON.stringify(this.history[0]),this.options=a.parseJson(t),this}fromRaw(t){return this.fromReader(new n(t))}clone(){return c.fromRaw(this.toRaw())}static fromReader(t){return(new c).fromReader(t)}static fromRaw(t){return(new c).fromRaw(t)}}h.scItem=c,t.exports=h},function(t,e,i){
/*!
 * selector.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
function r(t){let e=null;var i=r.list[t.contract.options.type];return i?new(e=i.path)(t):e}r.list={relay:{name:"relay",path:i(173),desc:"中继合约，调用第三方合约"},vem:{name:"vem",path:i(174),desc:"自动售货机，销售道具"},example:{name:"example",path:i(175),desc:"示例合约，调用者转入1VC，合约自动转回0.5VC"},issue:{name:"issue",path:i(176),desc:"公共服务-签证合约"},multisig:{name:"multisig",path:i(177),desc:"多重签名合约"}},t.exports=r},function(t,e,i){(function(e){var r=i(28);const s=i(6),n=i(4),o=i(8),a=i(52);class h extends r{constructor(t){super(),this.db=t||{getEr:()=>{},setEr:()=>{},delEr:()=>{}},this.cache=new a(1e4)}async loadHistory(){}async getEr(t){return this.cache.get(t)||this.db.getEr(t)}async setEr(t,e){(t=new c(t)).txid=e.txid(),await this.db.setEr(t,e),this.cache.set(t.erid,t)}async delEr(t,e){t.txid=e.txid(),await this.db.delEr(t),this.cache.remove(t.erid)}async query(t){let e=!1,i=null,r=[];for(var s of t)if(s&&Array.isArray(s)){if("erid"==s[0])return{list:[await this.getEr(s[1])],page:0,count:1};"merge"==s[0]?e=s[1]:"pubkey"==s[0]?i=s[1]:r.push(s)}return i?this.db.byPubkey(i,r,e):{list:[],page:0,count:1}}}class c{constructor(t){this.fromOptions(t=t||{})}fromOptions(t){this.oper=t.oper||"erIssue",this.erid=t.erid,this.witness=t.witness||"",this.validHeight=t.validHeight,this.startHeight=t.startHeight||0,this.signature=t.signature||"",this.source=null,t.source&&(this.source={},this.source.subjectName=t.source.subjectName,this.source.pubkey=t.source.pubkey,this.source.subjectHash=t.source.subjectHash,this.source.cluster=t.source.cluster,this.source.cid=t.source.cid,this.source.uid=t.source.uid),this.wid=t.wid||0,this.account=t.account||""}toRaw(){return e.from(JSON.stringify(this.toOptions(!0)),"utf-8")}toOptions(t=!1){var e={};return e.oper=this.oper||"erIssue",e.erid=this.erid,e.witness=this.witness||"",e.validHeight=this.validHeight,t&&(e.startHeight=this.startHeight,e.signature=this.signature||""),this.source&&(e.source={},e.source.subjectName=this.source.subjectName,e.source.pubkey=this.source.pubkey,e.source.subjectHash=this.source.subjectHash,e.source.cluster=this.source.cluster||"",e.source.cid=this.source.cid||"",e.source.uid=this.source.uid||0),e}getSignObjSize(t){let e=0;return e=(e=(e=(e+=n.sizeVarString(t.oper,"utf8"))+n.sizeVarString(t.erid,"utf8"))+n.sizeVarString(t.witness,"ascii"))+4+4,t.source?(e=(e=(e=(e+=n.sizeVarString(t.source.subjectName,"utf8"))+n.sizeVarString(t.source.pubkey,"utf8"))+n.sizeVarString(t.source.subjectHash,"utf8"))+n.sizeVarString(t.source.cluster,"utf8"))+n.sizeVarString(t.source.cid,"utf8")+4:e}toWriter(t,e){return e.writeVarString(t.oper,"utf8"),e.writeVarString(t.erid,"utf8"),e.writeVarString(t.witness,"ascii"),e.writeU32(t.validHeight),e.writeU32(t.startHeight),t.source&&(e.writeVarString(t.source.subjectName,"utf8"),e.writeVarString(t.source.pubkey,"utf8"),e.writeVarString(t.source.subjectHash,"utf8"),e.writeVarString(t.source.cluster,"utf8"),e.writeVarString(t.source.cid,"utf8"),e.writeU32(t.source.uid)),e}toHash(){var t=this.toOptions();return o.hash256(this.toWriter(t,new s(this.getSignObjSize(t))).render())}fromRaw(t){return t=JSON.parse(t.toString("utf8")),this.fromOptions(t),this}static fromRaw(t){return(new c).fromRaw(t)}sign(t){this.signature=t.sign(this.toHash()).toString("hex")}verifying(t){return t.verify(this.toHash(),e.from(this.signature,"hex"))}}h.ErItem=c,t.exports=h}).call(this,i(0).Buffer)},function(t,e,i){(function(e){var r=i(28);const s=i(6),n=i(4),o=i(8);class a extends r{constructor(t){super(),this.db=t||{getErAbolish:()=>{},setErAbolish:()=>{},delErAbolish:()=>{},loadErAbolishList:()=>{}}}async loadHistory(){}async getErAb(t){return this.db.getErAbolish(t)}async setErAb(t,e){t=new h(t),await this.db.setErAbolish(t),this.set(t.erid,t)}async delErAb(t,e){await this.db.delErAbolish(t),this.delete(t.erid)}async query(t){let e=!1;for(var i of t)"cluster"==i[0]&&(e=i[1]);for(var r of t){if("erid"==r[0])return{list:[await this.getErAb(r[1])],page:0,count:1};if("pubkey"==r[0])return this.db.byPubkey(r[1],e)}return{list:[],page:0,count:1}}}class h{constructor(t){this.fromOptions(t=t||{})}fromOptions(t){this.oper=t.oper||"erAbolish",this.erid=t.erid,this.witness=t.witness||"",this.abolishHeight=t.abolishHeight,this.startHeight=t.startHeight||0,this.signature=t.signature||""}toOptions(t){var e={};return e.oper=this.oper||"erAbolish",e.erid=this.erid,e.witness=this.witness||"",e.abolishHeight=this.abolishHeight,t&&(e.startHeight=this.startHeight,e.signature=this.signature||""),e}getMsgSize(){var t=0;return(t+=n.sizeVarString(this.oper,"utf8"))+n.sizeVarString(this.erid,"utf8")+n.sizeVarString(this.witness,"ascii")+4+4}toWriter(t,e){return e.writeVarString(this.oper,"utf8"),e.writeVarString(this.erid,"utf8"),e.writeVarString(this.witness,"ascii"),e.writeU32(this.abolishHeight),e.writeU32(this.startHeight),e}toHash(){var t=this.toOptions();return o.hash256(this.toWriter(t,new s(this.getMsgSize(t))).render())}toRaw(){return e.from(JSON.stringify(this.toOptions(!0)),"utf-8")}fromReader(t){return t=JSON.parse(t.toString("utf8")),this.fromOptions(t),this}fromRaw(t){return this.fromReader(t)}static fromRaw(t){return(new h).fromRaw(t)}sign(t){this.signature=t.sign(this.toHash()).toString("hex")}verifying(t){return t.verify(this.toHash(),e.from(this.signature,"hex"))}}a.ErAbolishItem=h,t.exports=a}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * jobs.js - worker jobs for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(23),s=i(215).derive,n=i(304),o=i(107);i(51),i(21);var{}=i(7);const a=e;a.execute=function(t){try{return a.handle(t)}catch(t){return new o.ErrorResultPacket(t)}},a.handle=function(t){return t.jobsHandle(a)},a.check=function(t,e,i,r){try{t.check(e,i,r)}catch(t){if("ScriptError"===t.type)return new o.CheckResultPacket(t);throw t}return new o.CheckResultPacket},a.checkInput=function(t,e,i,r,s){try{t.checkInput(e,i,r,s)}catch(t){if("ScriptError"===t.type)return new o.CheckInputResultPacket(t);throw t}return new o.CheckInputResultPacket},a.sign=function(t,e,i,r){return e=t.sign(e,!0,i,r),o.SignResultPacket.fromTX(t,e)},a.signInput=function(t,e,i,r,s){return i=t.signInput(t,e,i,r,s),o.SignInputResultPacket.fromTX(t,e,i)},a.ecVerify=function(t,e,i){return t=r.verify(t,e,i),new o.ECVerifyResultPacket(t)},a.ecSign=function(t,e){return t=r.sign(t,e),new o.ECSignResultPacket(t)},a.mine=function(t,e,i,r){return t=n(t,e,i,r),new o.MineResultPacket(t)},a.scrypt=function(t,e,i,r,n,a){return t=s(t,e,i,r,n,a),new o.ScryptResultPacket(t)}},function(t,e,i){"use strict";
/*!
 * hd.js - hd keys for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1);var s=i(123),n=i(166),o=i(108);const a=i(54),h=i(251);i=i(248);const c=e;c.fromBase58=function(t,e){return(a.isBase58(t)?a:h).fromBase58(t,e)},c.generate=function(t){return a.generate(t)},c.fromSeed=function(t,e){return a.fromSeed(t,e)},c.fromMnemonic=function(t,e){return a.fromMnemonic(t,e)},c.fromJSON=function(t,e){return(t.xprivkey?a:h).fromJSON(t,e)},c.fromRaw=function(t,e){return(a.isRaw(t,e)?a:h).fromRaw(t,e)},c.from=function(t,e){if(r(t,"Options required."),c.isHD(t))return t;if(c.isBase58(t,e))return c.fromBase58(t,e);if(c.isRaw(t,e))return c.fromRaw(t,e);if(t&&"object"==typeof t)return c.fromMnemonic(t,e);throw new Error("Cannot create HD key from bad options.")},c.isBase58=function(t,e){return a.isBase58(t,e)||h.isBase58(t,e)},c.isRaw=function(t,e){return a.isRaw(t,e)||h.isRaw(t,e)},c.isHD=function(t){return a.isHDPrivateKey(t)||h.isHDPublicKey(t)},c.isPrivate=function(t){return a.isHDPrivateKey(t)},c.isPublic=function(t){return h.isHDPublicKey(t)},c.common=s,(c.HD=c).Mnemonic=n,c.MnemonicHelper=o,c.PrivateKey=a,c.PublicKey=h,c.wordlist=i},function(t,e,i){"use strict";
/*!
 * account.js - account object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */const r=i(3),s=i(1),n=i(2),o=i(6),a=i(4),h=i(96),c=i(55),u=i(16),l=i(205),f=i(145);class d{constructor(t,e){s(t,"Database is required."),this.db=t,this.network=t.network,this.wallet=null,this.receive=null,this.change=null,this.nested=null,this.wid=0,this.id=null,this.name=null,this.accountIndex=0,this.initialized=!1,this.witness=!0===this.db.options.witness,this.watchOnly=!1,this.type=d.types.PUBKEYHASH,this.m=1,this.n=1,this.receiveDepth=0,this.changeDepth=0,this.nestedDepth=0,this.lookahead=10,this.accountKey=null,this.keys=[],e&&this.fromOptions(e)}fromOptions(t){if(s(t,"Options are required."),s(r.isU32(t.wid)),s(c.isName(t.id),"Bad Wallet ID."),s(f.isHD(t.accountKey),"Account key is required."),s(r.isU32(t.accountIndex),"Account index is required."),this.wid=t.wid,this.id=t.id,null!=t.name&&(s(c.isName(t.name),"Bad account name."),this.name=t.name),null!=t.initialized&&(s("boolean"==typeof t.initialized),this.initialized=t.initialized),null!=t.witness&&(s("boolean"==typeof t.witness),this.witness=t.witness),null!=t.watchOnly&&(s("boolean"==typeof t.watchOnly),this.watchOnly=t.watchOnly),null!=t.type&&("string"==typeof t.type?(this.type=d.types[t.type.toUpperCase()],s(null!=this.type)):(s("number"==typeof t.type),this.type=t.type,s(d.typesByVal[this.type]))),null!=t.m&&(s(r.isU8(t.m)),this.m=t.m),null!=t.n&&(s(r.isU8(t.n)),this.n=t.n),null!=t.accountIndex&&(s(r.isU32(t.accountIndex)),this.accountIndex=t.accountIndex),null!=t.receiveDepth&&(s(r.isU32(t.receiveDepth)),this.receiveDepth=t.receiveDepth),null!=t.changeDepth&&(s(r.isU32(t.changeDepth)),this.changeDepth=t.changeDepth),null!=t.nestedDepth&&(s(r.isU32(t.nestedDepth)),this.nestedDepth=t.nestedDepth),null!=t.lookahead&&(s(r.isU32(t.lookahead)),s(0<=t.lookahead),s(t.lookahead<=d.MAX_LOOKAHEAD),this.lookahead=t.lookahead),this.accountKey=t.accountKey,1<this.n&&(this.type=d.types.MULTISIG),this.name||(this.name=this.accountIndex.toString(10)),this.m<1||this.m>this.n)throw new Error("m ranges between 1 and n");if(t.keys){s(Array.isArray(t.keys));for(const e of t.keys)this.pushKey(e)}return this}static fromOptions(t,e){return new d(t).fromOptions(e)}async init(){this.keys.length!==this.n-1?(s(!this.initialized),this._save()):(s(0===this.receiveDepth),s(0===this.changeDepth),s(0===this.nestedDepth),this.initialized=!0,await this.initDepth())}open(){return this.initialized&&!this.receive&&(this.receive=this.deriveReceive(this.receiveDepth-1),this.change=this.deriveChange(this.changeDepth-1),this.witness)&&(this.nested=this.deriveNested(this.nestedDepth-1)),Promise.resolve()}pushKey(t){if("string"==typeof t&&(t=f.PublicKey.fromBase58(t,this.network)),s(t.network===this.network,"Network mismatch for account key."),!f.isPublic(t))throw new Error("Must add HD keys to wallet.");if(!t.isAccount())throw new Error("Must add HD account keys to BIP44 wallet.");if(this.type!==d.types.MULTISIG)throw new Error("Cannot add keys to non-multisig wallet.");if(t.equals(this.accountKey))throw new Error("Cannot add own key.");if(-1===r.binaryInsert(this.keys,t,p,!0))return!1;if(this.keys.length>this.n-1)throw r.binaryRemove(this.keys,t,p),new Error("Cannot add more keys.");return!0}spliceKey(t){if("string"==typeof t&&(t=f.PublicKey.fromBase58(t,this.network)),s(t.network===this.network,"Network mismatch for account key."),!f.isPublic(t))throw new Error("Must add HD keys to wallet.");if(!t.isAccount())throw new Error("Must add HD account keys to BIP44 wallet.");if(this.type!==d.types.MULTISIG)throw new Error("Cannot remove keys from non-multisig wallet.");if(this.keys.length===this.n-1)throw new Error("Cannot remove key.");return r.binaryRemove(this.keys,t,p)}async addSharedKey(t){var e=this.pushKey(t);if(await this.hasDuplicate())throw this.spliceKey(t),new Error("Cannot add a key from another account.");return await this.init(),e}hasDuplicate(){var t;return this.keys.length===this.n-1&&(t=this.deriveReceive(0).getScriptHash("hex"),this.wallet.hasAddress(t))}removeSharedKey(t){return!!this.spliceKey(t)&&(this._save(),!0)}createReceive(){return this.createKey(0)}createChange(){return this.createKey(1)}createNested(){return this.createKey(2)}async createKey(t,e=0,i=null){let r,s;if(0<(e=(0|e)>>>0))r=this.deriveKey(9,e,i),await this.saveKey(r);else switch(t){case 0:r=this.deriveReceive(this.receiveDepth,i),await this.saveKey(r),s=this.deriveReceive(this.receiveDepth+this.lookahead,i),await this.saveKey(s),this.receiveDepth++,this.receive=r;break;case 1:r=this.deriveChange(this.changeDepth,i),await this.saveKey(r),s=this.deriveChange(this.changeDepth+this.lookahead,i),await this.saveKey(s),this.changeDepth++,this.change=r;break;case 2:r=this.deriveNested(this.nestedDepth,i),await this.saveKey(r),s=this.deriveNested(this.nestedDepth+this.lookahead,i),await this.saveKey(s),this.nestedDepth++,this.nested=r;break;default:throw new Error(`Bad branch: ${t}.`)}return this._save(),r}deriveReceive(t,e){return this.deriveKey(0,t,e)}deriveChange(t,e){return this.deriveKey(1,t,e)}deriveNested(t,e){if(this.witness)return this.deriveKey(2,t,e);throw new Error("Cannot derive nested on non-witness account.")}derivePath(t,e){switch(t.keyType){case h.types.HD:return this.deriveKey(t.branch,t.index,e);case h.types.KEY:{s(this.type===d.types.PUBKEYHASH);let i=t.data;return t.encrypted&&!(i=e.decipher(i,t.hash))?null:l.fromImport(this,i)}case h.types.ADDRESS:return null;default:throw new Error("Bad key type.")}}deriveKey(t,e,i){s("number"==typeof t);var r=[];let n;n=(i&&i.key&&!this.watchOnly?n=i.key.deriveAccount(44,this.accountIndex):this.accountKey).derive(t).derive(e);var o=l.fromHD(this,n,t,e);switch(this.type){case d.types.PUBKEYHASH:break;case d.types.MULTISIG:r.push(n.publicKey);for(const i of this.keys){const s=i.derive(t).derive(e);r.push(s.publicKey)}o.script=u.createScript([this.m,this.n,r],u.types.MULTISIG)}return o}async save(){this.wallet.start(),this.db.saveAccount(this),await this.wallet.commit()}_save(){return this.db.saveAccount(this)}saveKey(t){return this.db.saveKey(this.wallet,t)}savePath(t){return this.db.savePath(this.wallet,t)}async initDepth(){this.receive=this.deriveReceive(0),this.receiveDepth=1,await this.saveKey(this.receive);for(let e=0;e<this.lookahead;e++){var t=this.deriveReceive(e+1);await this.saveKey(t)}this.change=this.deriveChange(0),this.changeDepth=1,await this.saveKey(this.change);for(let t=0;t<this.lookahead;t++){var e=this.deriveChange(t+1);await this.saveKey(e)}if(this.witness){this.nested=this.deriveNested(0),this.nestedDepth=1,await this.saveKey(this.nested);for(let t=0;t<this.lookahead;t++){var i=this.deriveNested(t+1);await this.saveKey(i)}}this._save()}async syncDepth(t,e,i){let r=!1,s=null;if(t>this.receiveDepth){var n=this.receiveDepth+this.lookahead;if(t<=n+1){for(let e=n;e<t+this.lookahead;e++){var o=this.deriveReceive(e);await this.saveKey(o)}this.receive=this.deriveReceive(t-1),this.receiveDepth=t,r=!0,s=this.receive}}if(e>this.changeDepth&&e<=(n=this.changeDepth+this.lookahead)+1){for(let t=n;t<e+this.lookahead;t++){var a=this.deriveChange(t);await this.saveKey(a)}this.change=this.deriveChange(e-1),this.changeDepth=e,r=!0}if(this.witness&&i>this.nestedDepth&&i<=(n=this.nestedDepth+this.lookahead)+1){for(let t=n;t<i+this.lookahead;t++){var h=this.deriveNested(t);await this.saveKey(h)}this.nested=this.deriveNested(i-1),this.nestedDepth=i,r=!0,s=this.nested}return r&&this._save(),s}async setLookahead(t){if(t===this.lookahead)this.db.logger.warning("Lookahead is not changing for: %s/%s.",this.id,this.name);else{if(t<this.lookahead)e=this.lookahead-t,this.receiveDepth+=e,this.receive=this.deriveReceive(this.receiveDepth-1),this.changeDepth+=e,this.change=this.deriveChange(this.changeDepth-1),this.witness&&(this.nestedDepth+=e,this.nested=this.deriveNested(this.nestedDepth-1));else{var e=this.receiveDepth+this.lookahead,i=this.receiveDepth+t;for(let t=e;t<i;t++){var r=this.deriveReceive(t);await this.saveKey(r)}e=this.changeDepth+this.lookahead;var s=this.changeDepth+t;for(let t=e;t<s;t++){var n=this.deriveChange(t);await this.saveKey(n)}if(this.witness){e=this.nestedDepth+this.lookahead;var o=this.nestedDepth+t;for(let t=e;t<o;t++){var a=this.deriveNested(t);await this.saveKey(a)}}}this.lookahead=t,this._save()}}getAddress(t){return this.getReceive(t)}getReceive(t){return this.receive?this.receive.getAddress(t):null}getChange(t){return this.change?this.change.getAddress(t):null}getNested(t){return this.nested?this.nested.getAddress(t):null}inspect(){return{wid:this.wid,name:this.name,network:this.network,initialized:this.initialized,witness:this.witness,watchOnly:this.watchOnly,type:d.typesByVal[this.type].toLowerCase(),m:this.m,n:this.n,accountIndex:this.accountIndex,receiveDepth:this.receiveDepth,changeDepth:this.changeDepth,nestedDepth:this.nestedDepth,lookahead:this.lookahead,address:this.initialized?this.receive.getAddress():null,nestedAddress:this.initialized&&this.nested?this.nested.getAddress():null,accountKey:this.accountKey.toBase58(),keys:this.keys.map(t=>t.toBase58())}}toJSON(t){return{wid:t?void 0:this.wid,id:t?void 0:this.id,name:this.name,initialized:this.initialized,witness:this.witness,watchOnly:this.watchOnly,type:d.typesByVal[this.type].toLowerCase(),m:this.m,n:this.n,accountIndex:this.accountIndex,receiveDepth:this.receiveDepth,changeDepth:this.changeDepth,nestedDepth:this.nestedDepth,lookahead:this.lookahead,receiveAddress:this.receive?this.receive.getAddress("string"):null,nestedAddress:this.nested?this.nested.getAddress("string"):null,changeAddress:this.change?this.change.getAddress("string"):null,accountKey:this.accountKey.toBase58(),keys:this.keys.map(t=>t.toBase58())}}getSize(){var t=0;return(t+=a.sizeVarString(this.name,"ascii"))+105+82*this.keys.length}toRaw(){var t=this.getSize(),e=new o(t);e.writeVarString(this.name,"ascii"),e.writeU8(this.initialized?1:0),e.writeU8(this.witness?1:0),e.writeU8(this.type),e.writeU8(this.m),e.writeU8(this.n),e.writeU32(this.accountIndex),e.writeU32(this.receiveDepth),e.writeU32(this.changeDepth),e.writeU32(this.nestedDepth),e.writeU8(this.lookahead),e.writeBytes(this.accountKey.toRaw()),e.writeU8(this.keys.length);for(const t of this.keys)e.writeBytes(t.toRaw());return e.render()}fromRaw(t){var e=new n(t),i=(this.name=e.readVarString("ascii"),this.initialized=1===e.readU8(),this.witness=1===e.readU8(),this.type=e.readU8(),this.m=e.readU8(),this.n=e.readU8(),this.accountIndex=e.readU32(),this.receiveDepth=e.readU32(),this.changeDepth=e.readU32(),this.nestedDepth=e.readU32(),this.lookahead=e.readU8(),this.accountKey=f.PublicKey.fromRaw(e.readBytes(82)),s(d.typesByVal[this.type]),e.readU8());for(let t=0;t<i;t++){var r=f.PublicKey.fromRaw(e.readBytes(82));this.pushKey(r)}return this}static fromRaw(t,e){return new d(t).fromRaw(e)}static isAccount(t){return t instanceof d}}function p(t,e){return t.compare(e)}d.types={PUBKEYHASH:0,MULTISIG:1},d.typesByVal={0:"pubkeyhash",1:"multisig"},d.MAX_LOOKAHEAD=40,t.exports=d},function(t,e,i){let r=i(529);const s=i(130);t.exports=class{constructor(t){this.parent=t,this.updateRecord={},this.inCheck=!1;let e=this;new r(5e3).tick(0,async()=>{try{0==this.inCheck&&(this.inCheck=!0,await e.checkTask.apply(e),this.inCheck=!1)}catch(t){console.error(t),this.inCheck=!1}})}addTask(t,e=3e4){"function"==typeof t&&(t={execute:t,id:s()}),this.updateRecord[t.id]||(t.$taskTime=new r(e),this.updateRecord[t.id]=t)}async checkTask(){try{let i=5;for(var t of Object.keys(this.updateRecord)){var e;0<i&&this.updateRecord[t].$taskTime.check()&&(i--,[e]=await this.updateRecord[t].execute(this.parent),e)&&Reflect.deleteProperty(this.updateRecord,t)}return Object.keys(this.updateRecord).length}catch(t){console.error(t)}}}},function(t,e,i){"use strict";
/*!
 * protoreader.js - protobufs for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1),s=i(2),n=0,o=1,a=2,h=3,c=4,u=5;function l(t,e){if(!(this instanceof l))return new l(t,e);s.call(this,t,e)}function f(t){this.tag=t>>>3,this.type=7&t,this.size=0,this.value=0,this.data=null,this.group=null}function d(t,e){this.size=t,this.value=e}Object.setPrototypeOf(l.prototype,s.prototype),l.prototype.readVarint=function(){var{size:t,value:e}=function(t,e){let i=0,s=128,n=0;for(;128&s;){if(e>=t.length){i=0;break}switch(s=t[e++],n){case 0:case 1:case 2:case 3:i+=(127&s)<<7*n;break;case 4:i+=(127&s)*(1<<7*n);break;default:i+=(127&s)*Math.pow(2,7*n)}n++,r(n<7,"Number exceeds 2^53-1.")}return new d(n,i)}(this.data,this.offset);return this.offset+=t,e},l.prototype.readFieldValue=function(t,e){return(t=this.readField(t,e))?(r(null!=t.value),t.value):-1},l.prototype.readFieldU64=function(t,e){return(t=this.readField(t,e))?(r(t.type===n||t.type===o),t.value):-1},l.prototype.readFieldU32=function(t,e){return(t=this.readField(t,e))?(r(t.type===n||t.type===u),t.value):-1},l.prototype.readFieldBytes=function(t,e){return(t=this.readField(t,e))?(r(t.data),t.data):null},l.prototype.readFieldString=function(t,e,i){return(t=this.readField(t,e))?(r(t.data),t.data.toString(i||"utf8")):null},l.prototype.nextTag=function(){var t;return 0===this.left()?-1:(t=this.readField(),this.seek(-t.size),t.tag)},l.prototype.readField=function(t,e){var i=this.offset,s=new f(this.readVarint());if(null!=t&&s.tag!==t)return r(e,"Non-optional field not present."),this.offset=i,null;switch(s.type){case n:s.value=this.readVarint();break;case o:s.value=this.readU64();break;case a:s.data=this.readVarBytes();break;case h:for(s.group=[];;){var l=this.readField();if(l.type===c)break;s.group.push(l)}break;case c:r(!1,"Unexpected end group.");break;case u:s.value=this.readU32();break;default:r(!1,"Bad wire type.")}return s.size=this.offset-i,s},t.exports=l},function(t,e,i){"use strict";(function(e){
/*!
 * protowriter.js - protobufs for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(20),n=0,o=2;function a(){if(!(this instanceof a))return new a;s.call(this)}function h(t){r(Number.isSafeInteger(t),"Number exceeds 2^53-1.");let e=0,i=0;do{r(i<7);let s=127&t;0!=(t=(t-t%128)/128)&&(s|=128),e=(e*=256)+s,i++}while(0<t);return e}Object.setPrototypeOf(a.prototype,s.prototype),a.prototype.writeVarint=function(t){var i=function(t){r(Number.isSafeInteger(t),"Number exceeds 2^53-1.");let e=0;for(;e++,0<(t=(t-t%128)/128););return e}(t);switch(i){case 6:var s=h(t);this.writeU32BE(s/65536|0),this.writeU16BE(65535&s);break;case 5:s=h(t),this.writeU32BE(s/256|0),this.writeU8(255&s);break;case 4:s=h(t),this.writeU32BE(s);break;case 3:s=h(t),this.writeU16BE(s>>8),this.writeU8(255&s);break;case 2:s=h(t),this.writeU16BE(s);break;case 1:s=h(t),this.writeU8(s);break;default:var n=s=e.allocUnsafe(i),o=t,a=0;r(Number.isSafeInteger(o),"Number exceeds 2^53-1.");do{r(a<n.length);let t=127&o;0!=(o=(o-o%128)/128)&&(t|=128),n[a]=t,a++}while(0<o);this.writeBytes(s)}},a.prototype.writeFieldVarint=function(t,e){t=t<<3|n,this.writeVarint(t),this.writeVarint(e)},a.prototype.writeFieldU64=function(t,e){r(Number.isSafeInteger(e)),this.writeFieldVarint(t,e)},a.prototype.writeFieldU32=function(t,e){r(e<=4294967295),this.writeFieldVarint(t,e)},a.prototype.writeFieldBytes=function(t,e){t=t<<3|o,this.writeVarint(t),this.writeVarint(e.length),this.writeBytes(e)},a.prototype.writeFieldString=function(t,i,r){"string"==typeof i&&(i=e.from(i,r||"utf8")),this.writeFieldBytes(t,i)},t.exports=a}).call(this,i(0).Buffer)},function(t,e,i){var r;function s(t){this.rand=t}if(t.exports=function(t){return(r=r||new s(null)).generate(t)},(t.exports.Rand=s).prototype.generate=function(t){return this._rand(t)},s.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),i=0;i<e.length;i++)e[i]=this.rand.getByte();return e},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?s.prototype._rand=function(t){return t=new Uint8Array(t),self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?s.prototype._rand=function(t){return t=new Uint8Array(t),self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(s.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var n=i(363);if("function"!=typeof n.randomBytes)throw new Error("Not supported");s.prototype._rand=function(t){return n.randomBytes(t)}}catch(t){}},function(t,e,i){"use strict";var r,s=e,n=(e=i(111),i(229)),o=i(34).assert;function a(t){"short"===t.type?this.curve=new n.short(t):"edwards"===t.type?this.curve=new n.edwards(t):this.curve=new n.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function h(t,e){Object.defineProperty(s,t,{configurable:!0,enumerable:!0,get:function(){var i=new a(e);return Object.defineProperty(s,t,{configurable:!0,enumerable:!0,value:i}),i}})}s.PresetCurve=a,h("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:e.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),h("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:e.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),h("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:e.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),h("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:e.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),h("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:e.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),h("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:e.sha256,gRed:!1,g:["9"]}),h("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:e.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=i(367)}catch(t){r=void 0}h("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:e.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})},function(t,e,i){"use strict";(function(e){
/*!
 * opcode.js - opcode object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=i(89),n=i(3),o=i(22),a=i(2),h=i(6),c=o.opcodes,u=[];let l=null;class f{constructor(t,e){this.value=t||0,this.data=e||null}isMinimal(){if(this.data){if(1===this.data.length){if(129===this.data[0])return!1;if(1<=this.data[0]&&this.data[0]<=16)return!1}if(this.data.length<=75)return this.value===this.data.length;if(this.data.length<=255)return this.value===c.OP_PUSHDATA1;if(this.data.length<=65535)return this.value===c.OP_PUSHDATA2;r(this.value===c.OP_PUSHDATA4)}return!0}isDisabled(){switch(this.value){case c.OP_CAT:case c.OP_SUBSTR:case c.OP_LEFT:case c.OP_RIGHT:case c.OP_INVERT:case c.OP_AND:case c.OP_OR:case c.OP_XOR:case c.OP_2MUL:case c.OP_2DIV:case c.OP_MUL:case c.OP_DIV:case c.OP_MOD:case c.OP_LSHIFT:case c.OP_RSHIFT:return!0}return!1}isBranch(){return this.value>=c.OP_IF&&this.value<=c.OP_ENDIF}equals(t){return r(f.isOpcode(t)),this.value===t.value&&(this.data?(r(t.data),this.data.equals(t.data)):(r(!t.data),!0))}toOp(){return this.value}toData(){return this.data}toLength(){return this.data?this.data.length:-1}toPush(){return this.value===c.OP_0?o.small[1]:this.value===c.OP_1NEGATE?o.small[0]:this.value>=c.OP_1&&this.value<=c.OP_16?o.small[this.value-80+1]:this.toData()}toString(t){var e=this.toPush();return e?e.toString(t||"utf8"):null}toSmall(){return this.value===c.OP_0?0:this.value>=c.OP_1&&this.value<=c.OP_16?this.value-80:-1}toNum(t,e){return this.value===c.OP_0?s.fromInt(0):this.value===c.OP_1NEGATE?s.fromInt(-1):this.value>=c.OP_1&&this.value<=c.OP_16?s.fromInt(this.value-80):this.data?s.decode(this.data,t,e):null}toInt(t,e){return(t=this.toNum(t,e))?t.getInt():-1}toBool(){var t=this.toSmall();return-1!==t&&1===t}toSymbol(){return-1===this.value?"OP_INVALIDOPCODE":o.opcodesByVal[this.value]||"0x"+n.hex8(this.value)}getSize(){if(!this.data)return 1;switch(this.value){case c.OP_PUSHDATA1:return 2+this.data.length;case c.OP_PUSHDATA2:return 3+this.data.length;case c.OP_PUSHDATA4:return 5+this.data.length;default:return 1+this.data.length}}toWriter(t){if(-1===this.value)throw new Error("Cannot reserialize a parse error.");if(this.data)switch(this.value){case c.OP_PUSHDATA1:t.writeU8(this.value),t.writeU8(this.data.length),t.writeBytes(this.data);break;case c.OP_PUSHDATA2:t.writeU8(this.value),t.writeU16(this.data.length),t.writeBytes(this.data);break;case c.OP_PUSHDATA4:t.writeU8(this.value),t.writeU32(this.data.length),t.writeBytes(this.data);break;default:r(this.value===this.data.length),t.writeU8(this.value),t.writeBytes(this.data)}else t.writeU8(this.value);return t}toRaw(){var t=this.getSize();return this.toWriter(new h(t)).render()}toFormat(){if(-1===this.value)return"0x01";if(this.data){if(this.data.length<=4){var t=this.toNum();if(this.equals(f.fromNum(t)))return t.toString(10)}const e=o.opcodesByVal[this.value];if(t=this.data.toString("hex"),!e)return`0x${n.hex8(this.value)} 0x`+t;let i=this.data.length.toString(16);if(i.length%2!=0&&(i="0"+i),i=n.revHex(i),this.data.length<=75)return`${e} 0x${i} 0x`+t;if(this.data.length<=255)return`${e} 0x4c 0x${i} 0x`+t;if(this.data.length<=65535)return`${e} 0x4d 0x${i} 0x`+t;if(this.data.length<=4294967295)return`${e} 0x4e 0x${i} 0x`+t}return o.opcodesByVal[this.value]||"0x"+n.hex8(this.value)}toASM(t){return-1===this.value?"[error]":this.data?o.toASM(this.data,t):o.opcodesByVal[this.value]||"OP_UNKNOWN"}static fromOp(t){return r("number"==typeof t),t=u[t],r(t,"Bad opcode."),t}static fromData(t){if(r(e.isBuffer(t)),1===t.length){if(129===t[0])return f.fromOp(c.OP_1NEGATE);if(1<=t[0]&&t[0]<=16)return f.fromOp(t[0]+80)}return f.fromPush(t)}static fromPush(t){if(r(e.isBuffer(t)),0===t.length)return f.fromOp(c.OP_0);if(t.length<=75)return new f(t.length,t);if(t.length<=255)return new f(c.OP_PUSHDATA1,t);if(t.length<=65535)return new f(c.OP_PUSHDATA2,t);if(t.length<=4294967295)return new f(c.OP_PUSHDATA4,t);throw new Error("Pushdata size too large.")}static fromString(t,i){return r("string"==typeof t),t=e.from(t,i||"utf8"),f.fromData(t)}static fromSmall(t){return r(n.isU8(t)&&0<=t&&t<=16),f.fromOp(0===t?0:t+80)}static fromNum(t){return r(s.isScriptNum(t)),f.fromData(t.encode())}static fromInt(t){return r(n.isInt(t)),0===t?f.fromOp(c.OP_0):-1===t?f.fromOp(c.OP_1NEGATE):1<=t&&t<=16?f.fromOp(t+80):f.fromNum(s.fromNumber(t))}static fromBool(t){return r("boolean"==typeof t),f.fromSmall(t?1:0)}static fromSymbol(t){r("string"==typeof t),r(0<t.length),n.isUpperCase(t)||(t=t.toUpperCase()),n.startsWith(t,"OP_")||(t="OP_"+t);var e=o.opcodes[t];return null!=e||(r(n.startsWith(t,"OP_0X"),"Unknown opcode."),r(7===t.length,"Unknown opcode."),e=parseInt(t.substring(5),16),r(n.isU8(e),"Unknown opcode.")),f.fromOp(e)}static fromReader(t){var e,i=t.readU8(),r=u[i];if(r)return r;switch(i){case c.OP_PUSHDATA1:return t.left()<1?l:(e=t.readU8(),t.left()<e?(t.seek(t.left()),l):(e=t.readBytes(e),new f(i,e)));case c.OP_PUSHDATA2:return t.left()<2?(t.seek(t.left()),l):(e=t.readU16(),t.left()<e?(t.seek(t.left()),l):(e=t.readBytes(e),new f(i,e)));case c.OP_PUSHDATA4:return t.left()<4?(t.seek(t.left()),l):(e=t.readU32(),t.left()<e?(t.seek(t.left()),l):(e=t.readBytes(e),new f(i,e)));default:return t.left()<i?(t.seek(t.left()),l):(e=t.readBytes(i),new f(i,e))}}static fromRaw(t){return f.fromReader(new a(t))}static isOpcode(t){return t instanceof f}}l=Object.freeze(new f(-1));for(let t=0;t<=255;t++){var d;1<=t&&t<=78?u.push(null):(d=new f(t),u.push(Object.freeze(d)))}t.exports=f}).call(this,i(0).Buffer)},function(t,e,i){const r=i(7).ContractStatus;t.exports=class extends class{constructor(t){this.period=t.period}run(t){var e=this.getResult();if(e&&Array.isArray(e)&&e.length<=10)for(var i of e)t.pushInt(i)}getResult(){return[]}}{constructor(t,e){super(t),this.type=t.type,this.addr=t.addr,this.dst=t.dst,this.status=e}getResult(){return this.status===r.Expired||this.status===r.Backed?[1,2]:this.status===r.Confirmed||this.status===r.Exchanged?[2,1]:[]}}},function(t,e,i){"use strict";const r=i(1),s=i(318),n=i(319);function o(t){var e=(i=o.getBackend(t)).backend,i=i.location;return new s(e,i,t)}o.getName=function(t){let e,i;switch(t=t||"memory"){case"ldb":case"leveldb":case"leveldown":e="leveldown",i="ldb";break;case"rdb":case"rocksdb":case"rocksdown":e="rocksdown",i="rdb";break;case"mdb":case"lmdb":e="lmdb",i="mdb";break;case"mem":case"memory":case"rbt":e="memory",i="mem";break;default:e=t,i="db"}return[e,i]},o.getBackend=function(t){var[e,i]=o.getName(t.db),s=n.get(e);let a=t.location;return"string"!=typeof a&&(r("memory"===e,"Location required."),a="memory"),{backend:s,location:a+"."+i}},t.exports=o},function(t,e,i){"use strict";var r=i(69).codes.ERR_STREAM_PREMATURE_CLOSE;function s(){}t.exports=function t(e,i,n){var o,a,h,c,u,l,f,d,p,g,m,w,y;return"function"==typeof i?t(e,null,i):(o=n||s,a=!1,n=function(){if(!a){a=!0;for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];o.apply(this,e)}},h=(i=i||{}).readable||!1!==i.readable&&e.readable,c=i.writable||!1!==i.writable&&e.writable,u=function(){e.writable||f()},l=e._writableState&&e._writableState.finished,f=function(){l=!(c=!1),h||n.call(e)},d=e._readableState&&e._readableState.endEmitted,p=function(){d=!(h=!1),c||n.call(e)},g=function(t){n.call(e,t)},m=function(){var t;return h&&!d?(e._readableState&&e._readableState.ended||(t=new r),n.call(e,t)):c&&!l?(e._writableState&&e._writableState.ended||(t=new r),n.call(e,t)):void 0},w=function(){e.req.on("finish",f)},(y=e).setHeader&&"function"==typeof y.abort?(e.on("complete",f),e.on("abort",m),e.req?w():e.on("request",w)):c&&!e._writableState&&(e.on("end",u),e.on("close",u)),e.on("end",p),e.on("finish",f),!1!==i.error&&e.on("error",g),e.on("close",m),function(){e.removeListener("complete",f),e.removeListener("abort",m),e.removeListener("request",w),e.req&&e.req.removeListener("finish",f),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",f),e.removeListener("end",p),e.removeListener("error",g),e.removeListener("close",m)})}},function(t,e,i){"use strict";const r=i(241);t.exports=function(t,...e){0===e.length?r(t):r(()=>t(...e))}},function(t,e,i){
/*!
 * selector.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * 
 * 系统目前支持若干交易级合约，若干输出级合约，如下所示：
 * 1. 交易级合约: OP_RETURN OP_CPREGISTER OP_CPCHANGE OP_COINBASE OP_PROMISE
 *      交易级合约内容由一笔交易承载，除少量特殊类型，基本都是通过[OP_RETURN]进行扩展的凭证类合约，如通告/道具拍卖/发起交易对等
 * 2. 输出级合约: OP_PROPCREATE OP_PROPEXCHANGE OP_HTLCSUGGEST OP_HTLCASSENT OP_COMMENT
 *      输出级合约内容由单一输出承载，因此一笔交易中可同时承载多笔不同类型的输出级合约
 * 
 * 开发用户自定义智能合约需要执行如下步骤：
 * 1. 在 ContractType 中新增一个类型枚举
 * 2. 在 lib/contract 目录下书写对应的智能合约类
 * 3. 在 lib/contract/selector 中手工注册两者间的映射关系
 * 
 * @note 为了让打包程序正常工作，没有使用自动化方案来引入类文件
 */
const r=i(7).ContractType;t.exports=function(t){if(!t)return i(158);switch(t.oper){case r.cpRegister:return i(161);case r.cpChange:return i(163);case r.coinbase:return i(164);case r.contractPromise:return i(165);case r.scRegister:return i(169);case r.scUpdate:return i(170);case r.scState:return i(171);case r.scRun:return i(172);case r.scNotify:return i(178);case r.propFound:return i(179);case r.vote:return i(180);case r.propSale:return i(181);case r.notify:return i(182);case r.contractCreate:return i(183);case r.contractExecute:return i(184);case r.erIssue:return i(185);case r.erAbolish:return i(186);case r.enchanceCp:return i(187);default:try{return i(428)("./"+t.oper)}catch(t){return i(15)}}}},function(t,e,i){var r=i(15);const s=i(22).nestingCodes,n=i(102);t.exports=class extends r{async insert(){var t=this.getOpt();for(let i=0;i<t.tx.outputs.length;i++){var e=""+t.hash+i;t.env.middleHashMem.has(e)||this.setOptIndex(t,i)&&(await n(t).insert(),t.env.middleHashMem.add(e))}}async erase(){var t=this.getOpt();for(let e=0;e<t.tx.outputs.length;e++)t.env.middleHashMem.delete(""+t.hash+e),this.setOptIndex(t,e)&&await n(t).erase()}async confirm(){var t=this.getOpt();for(let i=0;i<t.tx.outputs.length;i++){var e=""+t.hash+i;t.env.middleHashChain.has(e)||this.setOptIndex(t,i)&&(await n(t).confirm(),t.env.middleHashChain.add(e))}}async unconfirm(){var t=this.getOpt();for(let e=0;e<t.tx.outputs.length;e++)t.env.middleHashChain.delete(""+t.hash+e),this.setOptIndex(t,e)&&await n(t).unconfirm()}async verify(){var t=this.getOpt();for(let e=0;e<t.tx.outputs.length;e++)if(this.setOptIndex(t,e)&&!await n(t).verify())return!1;return!0}getOpt(){return{env:this.options.env,tx:this.options.tx,block:this.options.block,height:this.options.coinbaseHeight,hash:this.options.hash}}setOptIndex(t,e){return t.i=e,t.output=t.tx.outputs[e],t.type=t.output.getReturnType(),t.data=t.output.getReturnData(s),!!t.data}}},function(t,e,i){const r=i(7).PropStatus;var s=i(46);const n=i(9),o=i(137);t.exports=class extends s{async confirm(){var{env:t,i:e,output:i,data:s,hash:n,tx:o}=this.options,a=await t.propList.getVp(s.pid);a&&(a.current.hash!=n||a.current.index!=e)||(s.current={hash:n,index:e,address:i.getAddress().toString()},s.height=0<t.curHeight?t.curHeight+1:0,s.pst=r.Ready,s.gold=i.value,await t.propList.setVp(s,o))}async unconfirm(){var t,{env:e,i:i,data:t,hash:r}=this.options;(t=await e.propList.getVp(t.pid))&&t.current.hash==r&&t.current.index==i&&await e.propList.delVp(t)}async verify(){var{env:t,i:e,output:i,data:r,hash:s}=this.options;if(!o.unittest){var a=t.cpList.getItem(r.cid);if(!a||a.current.address!=i.getAddress().toString())return!1}return!(i.value<n.MINPROPVALUE||t.network.tokenReg.test(r.pid)||(a=await t.propList.getVp(r.pid))&&(a.current.hash!=s||a.current.index!=e))}}},function(t,e,i){const r=i(1),s=i(22).opcodes,n=i(37).broadcast,o=i(118).vpItem;var a=i(46);const{ContractEnvType:h,PropStatus:c}=i(7);t.exports=class extends a{async confirm(){let{env:t,i:e,output:i,data:r,hash:a,tx:u,block:l}=this.options;if(t.mode==h.Wallet){var f=await t.propList.getVp(r.pid);if(f&&(f.current.hash!=r.prev.hash||f.current.index!=r.prev.index))return;f=new o({pid:r.pid,cid:r.cid,oid:r.oid,gold:i.value,current:{hash:a,index:e,address:i.getAddress().toString()},height:t.curHeight,pst:c.Ready,wid:0,account:""}),await t.propList.setVp(f,u),f={pid:f.pid,address:f.current.address,wid:f.wid,account:f.account,time:l.time,height:f.height,cid:f.cid},t.emit("prop/receive",f),n("prop/receive",f)}else{if(!(f=await t.propList.getVp(r.pid))||f.current.hash!=r.prev.hash||f.current.index!=r.prev.index)return;f.current.address;var d=i.getAddress().toString();f.current={hash:a,index:e,address:d},f.height=t.curHeight,f.pst=c.Ready,await t.propList.setVp(f,u)}let p=0,g=r;for(;i&&i.getReturnType(s.OP_PROPEXCHANGE)&&p++<2e3;){var m=g.prev,w=(t.middleHashChain.add(m.hash+m.index.toString()),await t.finder(m.hash));if(!w)break;if(i=w.outputs[m.index],!(g=i.getReturnData())||!g.prev||t.middleHashChain.has(g.prev.hash+g.prev.index.toString()))break}}async unconfirm(){var t,e,{env:i,data:r}=this.options,n=await i.finder(r.prev.hash);n&&n.outputs[r.prev.index]&&(e=n.outputs[r.prev.index]).getReturnData([s.OP_PROPEXCHANGE,s.OP_PROPCREATE])&&(t=await i.propList.getVp(r.pid))&&(e=e.getAddress().toString(),t.current.address,t.current.hash=r.prev.hash,t.current.index=r.prev.index,t.current.address=e,await i.propList.setVp(t,n),i.mode,h.Block)}async verify(){var{env:t,tx:e,i:i,data:s}=this.options,e=(r.strictEqual(s.prev.hash,e.inputs[i].prevout.hash),r.strictEqual(s.prev.index,e.inputs[i].prevout.index),await t.propList.getVp(s.pid));if(t.mode==h.Wallet){if(e&&(e.current.hash!=s.prev.hash||e.current.index!=s.prev.index))return!1}else{if(!e)return!1;e.current.hash!=s.prev.hash&&t.logger.warning("not equals:",s.pid,e.current.hash,s.prev.hash),r(e.current.hash==s.prev.hash),r(e.current.index==s.prev.index)}return!0}}},function(t,e,i){var r=i(15);const s=i(7).ContractEnvType,n=i(30).VerifyError;var{}=i(22);const o=i(162);t.exports=class extends r{async insert(){var t=this.options.env,e=this.options.tx,i=e.hash("hex"),r=this.data;r.current={hash:i,index:0,address:e.outputs[0].getAddress().toString()},r.height=-1,await t.cpMemList.addItem(r)}async erase(){var t=this.options.env,e=this.data;await t.cpMemList.delItem(e)}async confirm(){var t=this.options.env,e=this.options.tx,i=e.hash("hex"),r=this.data;r.current={hash:i,index:0,address:e.outputs[0].getAddress().toString()},r.height=this.options.coinbaseHeight,r.status=1,await t.cpList.addItem(r),this.mode==s.Block&&await t.chain.node.mempool.cpMemList.delItem(r)}async unconfirm(){var t=this.options.env,e=this.data;this.options.tx,await t.cpList.delItem(e)}async verify(){var t=this.options.env,e=this.options.tx;if(!this.data)throw new n(e,"invalid","null cpRegister data",100);var i=o.verifyDataFormat(this.data);if(i)throw new n(e,"invalid",i,100);if((this.mode!=s.Block||"spv"!=t.node.nodeType)&&(i=this.mode!=s.Mempool,!await t.rpcExecute({method:"canExecute",params:[{confirm:i,cid:this.data.cid,name:this.data.name,oper:this.data.oper}]})))throw new n(e,"invalid info on "+this.data.oper,"cp.create",0);return!0}}},function(t,e,i){"use strict";
/*!
 * cpHelper.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */const r=i(53);t.exports=class{static verifyDataFormat(t){return t.name&&!/^(?![_.-])(?!.*?[_.-]$)[.a-zA-Z0-9_-]{4,64}$/.test(t.name)?"error name format, length 4~64":t.grate&&(t.grate<0||50<=t.grate)?"error grate value: 0~49":t.cls&&!/^(?![_.-])(?!.*?[_.-]$)[.a-zA-Z0-9_-]{2,20}$/.test(t.cls)?"error class format, length 2~20":!t.ip||r.isIPv4(r.toBuffer(t.ip))||r.isIPv6(r.toBuffer(t.ip))?null:"error ip format"}}},function(t,e,i){const r=i(1);var s=i(15);const n=i(7).ContractEnvType,o=i(30).VerifyError,a=i(22).opcodes,h=i(162);t.exports=class extends s{async insert(){var t=this.options.env,e=(r=this.options.tx).hash("hex");let i=r.outputs[0];var r;(e=((r=this.data).current={hash:e,index:0,address:i.getAddress().toString()},r.height=-1,t.cpMemList.addItem(r),await t.finder(r.prev.hash)))&&e.outputs[r.prev.index]&&(e=(i=e.outputs[r.prev.index]).getReturnData([a.OP_CPCHANGE,a.OP_CPREGISTER]))&&e.name!=r.name&&t.cpMemList.removeNameIndex(e.name)}async erase(){var t,e,i=this.options.env,r=this.data,s=(r=(i.cpMemList.delItem(r),r.prev),await i.getExtendTX(r.hash));s&&(e=(t=s.tx.outputs[r.index]).getReturnData([a.OP_CPCHANGE,a.OP_CPREGISTER]))&&(e.current={hash:r.hash,index:r.index,address:t.getAddress().toString()},e.height=s.height,i.cpMemList.addItem(e))}async confirm(){var t=this.options.env,e=(r=this.options.tx).hash("hex");let i=r.outputs[0];var r;(e=((r=this.data).current={hash:e,index:0,address:i.getAddress().toString()},r.height=this.options.coinbaseHeight,t.cpList.addItem(r),await t.finder(r.prev.hash)))&&e.outputs[r.prev.index]&&(e=(i=e.outputs[r.prev.index]).getReturnData([a.OP_CPCHANGE,a.OP_CPREGISTER]))&&e.name!=r.name&&t.cpList.removeNameIndex(e.name)}async unconfirm(){var t,e,i=this.options.env,r=this.data,s=(r=(i.cpList.delItem(r),r.prev),await i.getExtendTX(r.hash));s&&(e=(t=s.tx.outputs[r.index]).getReturnData([a.OP_CPCHANGE,a.OP_CPREGISTER]))&&(e.current={hash:r.hash,index:r.index,address:t.getAddress().toString()},e.height=s.height,i.cpList.addItem(e))}async verify(){var t=this.options.env,e=this.options.tx,i=this.data;if(!i)throw new o(e,"invalid","null cpChange data",100);var s=h.verifyDataFormat(this.data);if(s)throw new o(e,"invalid",s,100);if(r.strictEqual(i.prev.hash,e.inputs[0].prevout.hash),r.strictEqual(i.prev.index,e.inputs[0].prevout.index),s=await t.finder(i.prev.hash),r(s),s=s.outputs[i.prev.index],r(s),s=s.getReturnData([a.OP_CPREGISTER,a.OP_CPCHANGE]),r(s),r(s.cid===i.cid),this.mode!=n.Block||"spv"!=t.node.nodeType){var c=this.mode!=n.Mempool;if(!await t.rpcExecute({method:"canExecute",params:[{confirm:c,cid:i.cid,name:s.name,oper:i.oper}]}))throw new o(e,"invalid info on "+i.oper,"cp manager",0)}return!0}}},function(t,e,i){const r=i(1),s=i(30).VerifyError;var n=i(15);const{BlockFinalType:o,ContractEnvType:a}=i(7),h=i(59).verifyData;t.exports=class extends n{async confirm(){this.mode==a.Block&&await this.options.env.voteMgr.calcBlock(this.data.data.addr,!0)}async unconfirm(){this.mode==a.Block&&await this.options.env.voteMgr.calcBlock(this.data.data.addr,!1)}async verify(){if(this.mode!=a.Block)return null;var t=this.options.env;if(r.strictEqual(!0,h(this.data)),r(this.data.data.addr,this.options.block.txs[0].outputs[0].getAddress().toString()),(await t.voteMgr.checkVote(this.data.data.addr)).result)return!0;throw new s(this.options.block,"invalid","bad-coinbase address invalid",100)}isBlockFinal(){return o.Final}}},function(t,e,i){(function(e){const r=i(414),s=i(64),n=i(65);var o=i(15);const{BlockFinalType:a,ContractType:h,ContractStatus:c,ContractEnvType:u}=i(7),l=i(91),f=i(22).opcodes;t.exports=class extends o{async confirm(){var t=this.options.env;return this.data.current={hash:this.options.hash,index:0},this.data.raw=this.options.raw,await t.transactionList.promiseContract(this.data,!0),0<t.network.txcheckpoint.getCheck(this.data.type).length&&t.network.txchecktime[this.data.type]&&t.autoTaskMgr.addTask(new l(t.network.txcheckpoint,this.data),t.network.txchecktime[this.data.type]),!0}async unconfirm(){await this.options.env.transactionList.delTransContract(this.data)}async verify(){var t=this.options.env,i=this.options.facade,o=(r(1<this.options.tx.outputs.length),this.options.tx.outputs[1].script.code);if(r.strictEqual(o[0].value,f.OP_PROMISE),r.strictEqual(o[2].value,f.OP_DROP),r.strictEqual(o[3].value,f.OP_GREATERTHAN),r.strictEqual(o[4].value,f.OP_IF),r.bufferEqual(o[5].data,e.from(this.data.bob,"hex")),r.strictEqual(o[6].value,f.OP_ELSE),r.bufferEqual(o[7].data,e.from(this.data.ori.alice,"hex")),r.strictEqual(o[8].value,f.OP_ENDIF),r.strictEqual(o[9].value,f.OP_CHECKSIG),r.strictEqual(this.data.addr,this.data.ori.addr),r.strictEqual(this.data.type,this.data.ori.type),r.strictEqual(this.data.dst,this.data.ori.dst),r.strictEqual(this.data.period,this.data.ori.period),this.mode==u.Mempool&&(o=await t.finder(this.data.prevhash))){if(!(i=await i.FactoryOfContract({tx:o,env:t})).data||i.data.oper!==h.contractCreate)throw new s(n.errors.TYPE_ERROR,"Contract promise: Invalid ori tx type");await t.removeDoubleSpenders(o)}if(this.mode==u.Block){i=this.data;let e=this.options.env.transactionList.query(i.type,i.addr);if(e!==c.Expired&&e!==c.Confirmed&&(o=new l(t.network.txcheckpoint,this.data),[,e]=await o.execute(t)),(this.data.transStatus=e)!==c.Expired&&e!==c.Confirmed)return!1}return!0}isBlockFinal(){var t=this.options.env;return this.data.transStatus===c.Confirmed?a.Final:this.data.period<t.curHeight||this.data.transStatus===c.Expired?(this.data.transStatus=c.Expired,a.Final):a.Waiting}async checkFees(){return!0}}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * mnemonic.js - hd mnemonics for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(3),n=i(8),o=i(81),a=i(72),h=i(138),c=i(6),u=i(2),l=i(4),f=i(248),d=i(123),p=i(250),{languages:g,languageEnum:m}=i(249),w=i(424),y=Object.create(null);class b{constructor(t){this.bits=d.MIN_ENTROPY,this.language=m.English,this.entropy=null,this.phrase=null,this.passphrase="",t&&this.fromOptions(t)}fromOptions(t){return null!=(t="string"==typeof t?{phrase:t}:t).bits&&(r(s.isU16(t.bits)),r(t.bits>=d.MIN_ENTROPY),r(t.bits<=d.MAX_ENTROPY),r(t.bits%32==0),this.bits=t.bits),t.language&&(r("string"==typeof t.language),r(-1!==g.indexOf(t.language)),this.language=t.language),t.passphrase&&(r("string"==typeof t.passphrase),this.passphrase=t.passphrase),t.phrase?this.fromPhrase(t.phrase):t.entropy&&this.fromEntropy(t.entropy),this}static fromOptions(t){return(new b).fromOptions(t)}destroy(){this.bits=d.MIN_ENTROPY,this.language="english",this.entropy&&(o(this.entropy),this.entropy=null),this.phrase=null,this.passphrase=""}toSeed(t){t=t||this.passphrase,this.passphrase=t;var i=p(this.getPhrase());t=p("mnemonic"+t);return h.derive(e.from(i,"utf8"),e.from(t,"utf8"),2048,64,"sha512")}getEntropy(){if(!this.entropy){this.entropy=a.randomBytes(this.bits/8);var t=new w,e=(t.seed(t.int()),t.randomBytes(this.bits/8));for(let t=0;t<this.entropy.length;t++)this.entropy[t]=this.entropy[t]^e[t]}return r(this.bits/8===this.entropy.length),this.entropy}getPhrase(){if(this.phrase)return this.phrase;var t=this.bits+this.bits/32,i=this.getEntropy(),r=n.sha256(i),s=Math.ceil(t/8),o=e.allocUnsafe(s),a=(i.copy(o,0),r.copy(o,i.length),b.getWordlist(this.language));let h=[];for(let e=0;e<t/11;e++){let t=0;for(let i=0;i<11;i++){var c=11*e+i,u=c%8;t=(t<<=1)|o[(c-u)/8]>>>7-u&1}h.push(a.words[t])}return h="japanese"===this.language?h.join("　"):h.join(" "),this.phrase=h}fromPhrase(t){r("string"==typeof t),r(t.length<=1e3);var i=t.trim().split(/[\s\u3000]+/),s=(a=11*i.length)%32,o=(r(0!=s,"Invalid checksum."),a-s),a=(r(o>=d.MIN_ENTROPY),r(o<=d.MAX_ENTROPY),r(o%32==0),Math.ceil(a/8)),h=e.allocUnsafe(a),c=(a=(h.fill(0),b.getLanguage(i[0])),b.getWordlist(a));for(let t=0;t<i.length;t++){var u=i[t],l=c.map[u];if(null==l)throw new Error("Could not find word.");for(let e=0;e<11;e++){var f=11*t+e,p=f%8,g=l>>>10-e&1;h[(f-p)/8]|=g<<7-p}}var m=Math.ceil(s/8),w=h.slice(0,h.length-m),y=h.slice(h.length-m),v=n.sha256(w);for(let t=0;t<s;t++){var k=t%8,S=(t-k)/8;if((y[S]>>>7-k&1)!=(v[S]>>>7-k&1))throw new Error("Invalid checksum.")}return r(o/8===w.length),this.bits=o,this.language=a,this.entropy=w,this.phrase=t,this}static fromPhrase(t){return(new b).fromPhrase(t)}fromEntropy(t,i){return r(e.isBuffer(t)),r(8*t.length>=d.MIN_ENTROPY),r(8*t.length<=d.MAX_ENTROPY),r(8*t.length%32==0),r(!i||-1!==g.indexOf(i)),this.entropy=t,this.bits=8*t.length,i&&(this.language=i),this}static fromEntropy(t,e){return(new b).fromEntropy(t,e)}static getLanguage(t){for(const e of g)if(null!=b.getWordlist(e).map[t])return e;throw new Error("Could not determine language.")}static getWordlist(t){var e=y[t];return e||(e=new v(f.get(t)),y[t]=e)}toJSON(){return{bits:this.bits,language:this.language,entropy:this.getEntropy().toString("hex"),phrase:this.getPhrase(),passphrase:this.passphrase}}fromJSON(t){return r(s.isU16(t.bits)),r("string"==typeof t.language),r("string"==typeof t.entropy),r("string"==typeof t.phrase),r("string"==typeof t.passphrase),r(t.bits>=d.MIN_ENTROPY),r(t.bits<=d.MAX_ENTROPY),r(t.bits%32==0),r(t.bits/8==t.entropy.length/2),this.bits=t.bits,this.language=t.language,this.entropy=e.from(t.entropy,"hex"),this.phrase=t.phrase,this.passphrase=t.passphrase,this}static fromJSON(t){return(new b).fromJSON(t)}getSize(){var t=0;return(t+=3)+this.getEntropy().length+l.sizeVarString(this.getPhrase(),"utf8")+l.sizeVarString(this.passphrase,"utf8")}toWriter(t){var e=g.indexOf(this.language);return r(-1!==e),t.writeU16(this.bits),t.writeU8(e),t.writeBytes(this.getEntropy()),t.writeVarString(this.getPhrase(),"utf8"),t.writeVarString(this.passphrase,"utf8"),t}toRaw(t){var e=this.getSize();return this.toWriter(new c(e)).render()}fromReader(t){var e=t.readU16(),i=(r(e>=d.MIN_ENTROPY),r(e<=d.MAX_ENTROPY),r(e%32==0),g[t.readU8()]);return r(i),this.bits=e,this.language=i,this.entropy=t.readBytes(e/8),this.phrase=t.readVarString("utf8"),this.passphrase=t.readVarString("utf8"),this}fromRaw(t){return this.fromReader(new u(t))}static fromReader(t){return(new b).fromReader(t)}static fromRaw(t){return(new b).fromRaw(t)}toString(){return this.getPhrase()}inspect(){return`<Mnemonic: ${this.getPhrase()}>`}static isMnemonic(t){return t instanceof b}}function v(t){this.words=t,this.map=Object.create(null);for(let i=0;i<t.length;i++){var e=t[i];this.map[e]=i}}t.exports=b}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * list.js - double linked list for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1);function s(){if(!(this instanceof s))return new s;this.head=null,this.tail=null,this.size=0}i(427),s.prototype.reset=function(){let t,e;for(t=this.head;t;t=e)e=t.next,t.prev=null,t.next=null;r(!t),this.head=null,this.tail=null,this.size=0},s.prototype.shift=function(){var t=this.head;return t?(this.remove(t),t):null},s.prototype.unshift=function(t){return this.insert(null,t)},s.prototype.push=function(t){return this.insert(this.tail,t)},s.prototype.pop=function(){var t=this.tail;return t?(this.remove(t),t):null},s.prototype.insert=function(t,e){return!e.prev&&!e.next&&e!==this.head&&(r(!e.prev),r(!e.next),null==t?this.head?((this.head.prev=e).next=this.head,this.head=e):(this.head=e,this.tail=e):(e.next=t.next,(e.prev=t).next=e,t===this.tail&&(this.tail=e)),this.size++,!0)},s.prototype.remove=function(t){return!(!t.prev&&!t.next&&t!==this.head||(t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev||this.head),this.head||r(!this.tail),this.tail||r(!this.head),t.prev=null,t.next=null,this.size--,0))},s.prototype.replace=function(t,e){t.prev&&(t.prev.next=e),t.next&&(t.next.prev=e),e.prev=t.prev,e.next=t.next,t.next=null,t.prev=null,this.head===t&&(this.head=e),this.tail===t&&(this.tail=e)},s.prototype.slice=function(t){var e=[];let i,r;for(null==t&&(t=-1),i=this.head;i&&(r=i.next,i.prev=null,i.next=null,this.size--,e.push(i),e.length!==t);i=r);return r?(this.head=r).prev=null:(this.head=null,this.tail=null),e},s.prototype.toArray=function(){var t=[];for(let e=this.head;e;e=e.next)t.push(e);return t},t.exports=s},function(t,e,i){"use strict";
/*!
 * mappedlock.js - lock and queue for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */function r(t,e){this.resolve=t,this.reject=e}function s(){}t.exports=class{constructor(){this.jobs=new Map,this.busy=new Set,this.destroyed=!1}has(t){return this.busy.has(t)}hasPending(t){return this.jobs.has(t)}lock(t,e){return this.destroyed?Promise.reject(new Error("Lock is destroyed.")):null==t||e?Promise.resolve(s):this.busy.has(t)?new Promise((e,i)=>{this.jobs.has(t)||this.jobs.set(t,[]),this.jobs.get(t).push(new r(e,i))}):(this.busy.add(t),Promise.resolve(this.unlock(t)))}unlock(t){const e=this;return function i(){var r,s;!e.destroyed&&e.busy.has(t)&&(e.busy.delete(t),r=e.jobs.get(t))&&(0===r.length&&e.jobs.delete(t),s=r.shift(),0===r.length&&e.jobs.delete(t),e.busy.add(t),s.resolve(i))}}destroy(){if(!this.destroyed){this.destroyed=!0;var t=this.jobs;this.busy=new Map,this.jobs=new Map;for(const e of t.values())for(const t of e)t.reject(new Error("MappedLock was destroyed."))}}}},function(t,e,i){var r=i(15);const s=i(7).ContractEnvType,n=i(30).VerifyError,o=i(140).scItem,a=i(59).verifyData,h=i(1),c=i(37).broadcast;t.exports=class extends r{async confirm(){var t,e;this.mode==s.Block&&(t=this.options.env,e=this.options.tx,this.data.dst=e.outputs[1].getAddress().toString(),this.data.height=this.options.coinbaseHeight,this.data.indate?this.data.indate=this.data.height+Math.max(144,Math.min(52560,this.data.indate)):this.data.indate=this.data.height+4320,e=new o({type:this.data.type,addr:this.data.addr,dst:this.data.dst,height:this.data.height,state:1,ver:1,indate:this.data.indate}),this.data.cls&&(e.options.cls=this.data.cls,this.mode===s.Block)&&"publish"==this.data.cls&&c("sc/publish",e.options),e.do(),await t.scList.addItem(e))}async unconfirm(){this.mode==s.Block&&await this.options.env.scList.delItem(this.data)}async verify(){var t=this.options.env,e=this.options.tx,i=e.outputs[1];if(!i||1e8!=i.value||!this.data)throw new n(e,"invalid","null scRegister data",100);var r=this.data.sig;delete this.data.sig,h.strictEqual(!0,a({data:this.data,sig:r})),r=await t.node.cdb.get("primary");if(0<t.scList.query([["options.dst",this.data.dst]]).length)throw new n(e,"Contract Register Conflict","another contract already on "+this.data.dst,100);if(await r.ensureAccount({name:this.data.addr,witness:!0}),(await r.createReceive(this.data.addr,1)).getAddress("string")!=i.getAddress().toString())throw new n(e,"Invalid Smart Contract","Receive address error",100);return!0}}},function(t,e,i){var r=i(15);const{ContractEnvType:s,ContractState:n}=i(7),o=i(30).VerifyError;var{}=i(140);const a=i(59).verifyData,h=i(1);t.exports=class extends r{async confirm(){var t,e;this.mode==s.Block&&(t=this.options.env,e=this.options.tx,this.data.dst=e.outputs[1].getAddress().toString(),this.data.height=this.options.coinbaseHeight,1==(e=t.scList.query([["options.dst",this.data.dst]])).list.length)&&(e.list[0].options.ver+=1,e.list[0].options.type=this.data.type,e.list[0].options.height=this.data.height,e.list[0].do(),await t.scList.addItem(e.list[0]))}async unconfirm(){this.mode==s.Block&&await this.options.env.scList.delItem(this.data)}async verify(){var t=this.options.env,e=this.options.tx,i=e.outputs[1];if(!i||1e5!=i.value||!this.data)throw new o(e,"Invalid Smart Contract","null scRegister data",100);var r=this.data.sig;delete this.data.sig,h.strictEqual(!0,a({data:this.data,sig:r})),r=await t.node.cdb.get("primary");if(0==(t=t.scList.query([["options.dst",this.data.dst]])).list.length)throw new o(e,"Contract Not Exists","contract not exists",100);if(t.list[0].options.state!=n.Normal)throw new o(e,"Contract State Error","contract state error",100);if(await r.ensureAccount({name:this.data.addr,witness:!0}),(await r.createReceive(this.data.addr,1)).getAddress("string")!=i.getAddress().toString())throw new o(e,"Invalid Smart Contract","dst address error",100);return!0}}},function(t,e,i){var r=i(15);const{ContractEnvType:s,ContractState:n}=i(7),o=i(30).VerifyError;var{}=i(140);const a=i(59).verifyData,h=i(1);t.exports=class extends r{async confirm(){var t,e;this.mode==s.Block&&(t=this.options.env,e=this.options.tx,this.data.dst=e.outputs[1].getAddress().toString(),this.data.height=this.options.coinbaseHeight,1==(e=t.scList.query([["options.dst",this.data.dst]])).list.length)&&(e.list[0].options.state=this.data.state,e.list[0].options.height=this.data.height,e.list[0].do(),await t.scList.addItem(e.list[0]))}async unconfirm(){this.mode==s.Block&&await this.options.env.scList.delItem(this.data)}async verify(){var t=this.options.env,e=this.options.tx,i=e.outputs[1];if(!i||1e5!=i.value||!this.data)throw new o(e,"Invalid Smart Contract","null scRegister data",100);var r=this.data.sig;delete this.data.sig,h.strictEqual(!0,a({data:this.data,sig:r})),r=await t.node.cdb.get("primary");if(0==(t=t.scList.query([["options.dst",this.data.dst]])).list.length)throw new o(e,"Contract Not Exists","contract not exists",100);switch(t.list[0].options.state){case n.Normal:if(this.data.state!=n.Frozen&&this.data.state!=n.Destroy)throw new o(e,"Contract State Error","contract state error",100);break;case n.Frozen:if(this.data.state!=n.Normal&&this.data.state!=n.Destroy)throw new o(e,"Contract State Error","contract state error",100);break;default:throw new o(e,"Contract State Error","contract state error",100)}if(await r.ensureAccount({name:this.data.addr,witness:!0}),(await r.createReceive(this.data.addr,1)).getAddress("string")!=i.getAddress().toString())throw new o(e,"Invalid Smart Contract","dst address error",100);return!0}}},function(t,e,i){var r=i(15);const{ContractEnvType:s,ContractState:n}=i(7),o=i(30).VerifyError,a=i(9),h=i(141),c=i(42);t.exports=class extends r{async onPacking(){var t=this.options.env,e=this.options.tx.hash("hex"),i=await t.node.cdb.get("primary"),r=this.data.$top;let s={derive:[]};var n=await i.getStatusOfSC(e);if(n.txs)for(var o of n.txs)(o=await i.getTX(o))&&s.derive.push(o.tx);else if((n=await this.getContract())&&(n={height:t.curHeight,data:this.data,tx:this.options.tx,contract:n,wallet:i},n=h(n)))if((s=await n.run()).derive&&s.derive.length<a.MAX_PACKING_SIZE){let n=[];for(var u of s.derive)if((u=await(await c.FactoryOfContract({tx:u,env:t})).onPacking()).derive){if(!(s.derive.length+n.length+u.derive.length<a.MAX_PACKING_SIZE))break;n=n.concat(u.derive)}s.derive=s.derive.concat(n),r||await i.setStatusOfSC(e,s.derive.map(t=>t.hash("hex")))}else s.derive=[];return s}async confirm(){var t,e,i;if(this.mode==s.Block)return t=this.options.env,(e=await this.getContract())&&(i=h({data:this.data,tx:this.options.tx,contract:e,wallet:await this.options.env.node.cdb.get("primary")}))&&(e.do(),await t.scList.addItem(e),await i.confirm()),!0}async unconfirm(){var t,e,i;if(this.mode==s.Block)return t=this.options.env,(e=await this.getContract())&&(i={data:this.data,tx:this.options.tx,contract:e,wallet:await this.options.env.node.cdb.get("primary")},i=h(i))&&(e.undo(),await t.scList.addItem(e),await i.unconfirm()),!0}async verify(){var t=this.options.env,e=this.options.tx,i=await this.getContract();if(!i)throw new o(e,"invalid","contract not found",100);if(i.options.state!=n.Normal)throw new o(e,"invalid","contract version conflict",100);if(this.data.params.ver&&this.data.params.ver!=i.options.ver)throw new o(e,"invalid","contract version conflict",100);if(i.options.indate<t.curHeight)throw new o(e,"invalid","contract expired",100);return e={data:this.data,tx:e,contract:i,wallet:await t.node.cdb.get("primary")},!!(i=h(e))&&i.verify()}async getContract(){if(0<this.options.tx.outputs.length){var t=this.options.tx.outputs[1].getAddress().toString();if((t=await this.options.env.node.chain.db.getSCList([["options.dst",t]]))&&0<t.list.length)return t.list[0]}return null}}},function(t,e,i){i=i(61);t.exports=class extends i{async run(){var t,e,i,r,s,n;return await this.verify()?(t=await super.run(),e=this.options.contract.options.addr,i=this.options.tx.outputs[1].value,r=this.options.wallet,n=this.options.data.params.relay,s=this.options.data.$top||0,n=await r.send({sendafter:!(r=[]),subtractFee:!1,sort:!1,outputs:[{address:n,value:i}],comment:JSON.stringify({$tag:"inner",$top:s+1,oper:"scrun",hash:this.options.tx.hash("hex"),account:e,params:this.options.data.params.params})},e),r.push(n),t.derive=r,t):{derive:[]}}async confirm(){return!0}async unconfirm(){return!0}async verify(){return super.verify()}}},function(t,e,i){i=i(61);t.exports=class extends i{async run(){if(!await this.verify())return{derive:[]};var t=await super.run(),e=[],i=this.options.tx.outputs[1].value,r=this.options.wallet,s=this.options.contract.options.addr;let n=this.options.data.params.sim;n||(n=(o=this.options.tx.inputs[0]).getAddress().toString());var o=this.options.data.$top||0;r=await r.send({sendafter:!1,subtractFee:!1,sort:!1,outputs:[{address:n,value:i/2}],comment:JSON.stringify({$tag:"inner",$top:o+1,hash:this.options.tx.hash("hex"),account:s})},s);return e.push(r),t.derive=e,t}async confirm(){return!0}async unconfirm(){return!0}async verify(){return super.verify()}}},function(t,e,i){i=i(61);t.exports=class extends i{async run(){if(!await this.verify())return{derive:[]};var t=await super.run(),e=[],i=this.options.tx.outputs[1].value,r=this.options.wallet,s=this.options.contract.options.addr;let n=this.options.data.params.sim;n||(n=(o=this.options.tx.inputs[0]).getAddress().toString());var o=this.options.data.$top||0;r=await r.send({sendafter:!1,subtractFee:!1,sort:!1,outputs:[{address:n,value:i/2}],comment:JSON.stringify({$tag:"inner",$top:o+1,hash:this.options.tx.hash("hex"),account:s})},s);return e.push(r),t.derive=e,t}async confirm(){return!0}async unconfirm(){return!0}async verify(){return super.verify()}}},function(t,e,i){i=i(61);t.exports=class extends i{async run(){return await this.verify()?await super.run():{derive:[]}}async confirm(){return!0}async unconfirm(){return!0}async verify(){return super.verify()}}},function(t,e,i){i=i(61);t.exports=class extends i{async run(){if(!await this.verify())return{derive:[]};var t=await super.run(),e=[];let i=this.options.contract;var r=this.options.data.params.oper,s=this.options.wallet,n=i.options.addr;switch(r){case"pubk":{var o,a,h,c=this.options.data.params.addr,u=this.options.data.params.pubk,l=this.options.data.params.partner;"object"==typeof i.options.contacts&&!Array.isArray(i.options.contacts)||(i.options.contacts={}),l&&l.split(",").map(t=>{i.options.contacts[t]||(i.options.contacts[t]={st:0})});let t="";for(o of Object.keys(i.options.contacts))c!=o&&(a=i.options.contacts[o],h=await s.send({sendafter:!1,subtractFee:!1,sort:!1,outputs:[{address:o,value:1e4}],comment:JSON.stringify({oper:"scnotify",type:"mssendpubk",$tag:"inner",hash:this.options.tx.hash("hex"),data:u,m:i.options.m,n:i.options.n,contract:i.options.dst,account:n})},n),e.push(h),a.pubk)&&(t&&(t+=","),t+=a.pubk);t&&(l=await s.send({sendafter:!1,subtractFee:!1,sort:!1,outputs:[{address:c,value:1e4}],comment:JSON.stringify({oper:"scnotify",type:"mssendpubk",$tag:"inner",hash:this.options.tx.hash("hex"),data:t,contract:i.options.dst,account:n})},n),e.push(l)),i.options.contacts[c]?i.options.contacts[c].pubk||(i.options.contacts[c].pubk=u):i.options.contacts[c]={pubk:u,st:0};break}case"puba":{var f,d=this.options.data.params.addr,p=this.options.data.params.puba;let t=!0;for(f of(i.options.puba=i.options.puba||p,Object.keys(i.options.contacts))){var g=i.options.contacts[f];f==d&&i.options.puba==p&&(g.st=1),1!=g.st&&(t=!1)}i.options.status=t;break}case"sign":if(1==i.options.status){var m,w,y=this.options.data.params.addr;for(m of Object.keys(i.options.contacts))m!=y&&(w=await s.send({sendafter:!1,subtractFee:!1,sort:!1,outputs:[{address:m,value:1e4}],comment:JSON.stringify({oper:"scnotify",type:"mssendtx",$tag:"inner",hash:this.options.tx.hash("hex"),data:this.options.data.params.tx,contract:i.options.dst,account:n})},n),e.push(w))}break;default:return t}return t.derive=e,t}async confirm(){return!0}async unconfirm(){return!0}async verify(){return super.verify()}}},function(t,e,i){var r=i(15);const s=i(7).ContractEnvType,n=i(37).broadcast;t.exports=class extends r{async confirm(){var t;this.mode==s.Wallet&&(t=this.options.tx.outputs[1])&&(this.data.addr=t.getAddress().toString(),this.options.env.emit(this.data.type+"/receive",this.data),n(this.data.type+"/receive",this.data))}async verify(){return!0}}},function(t,e,i){const r=i(1);var s=i(15);const n=i(7).PropStatus;t.exports=class extends s{async confirm(){var t=this.options.env,e=await t.propList.getVp(this.data.ori.pid);return e&&(e.pst=n.Delete,await t.propList.setVp(e)),!0}async unconfirm(){var t=this.options.env,e=this.options.tx,i=await t.propList.getVp(this.data.ori.pid);return i&&i.current.hash==e.inputs[0].prevout.hash&&i.current.index==e.inputs[0].prevout.index&&(i.pst=n.Ready,await t.propList.setVp(i)),!0}async verify(){var t=this.options.env,e=this.options.tx,i=this.data;return!(!i.ori||!i.ori.pid||t.network.tokenReg.test(i.ori.pid)||!(t=await t.propList.getVp(i.ori.pid))||t.pst!=n.Ready||(r.strictEqual(t.current.hash,e.inputs[0].prevout.hash),r.strictEqual(t.current.index,e.inputs[0].prevout.index),0))}}},function(t,e,i){(function(e){var r=i(15);const{ContractEnvType:s,ContractType:n}=i(7),o=i(9),a=i(22).opcodes;t.exports=class extends r{async confirm(){return this.options.env,this.options.tx.hash("hex"),this.mode===s.Block&&await this.HandleVoteTrans(!1),!0}async unconfirm(){return this.options.env,this.options.tx,this.mode===s.Block&&await this.HandleVoteTrans(!0),!0}async HandleVoteTrans(t){var i=this.options.env,r=this.options.tx,s=this.options.tx.outputs[0].script.code;if(s[0].value==a.OP_RETURN)try{var h=JSON.parse(e.from(s[1].data).toString());if(h&&h.oper==n.vote)switch(h.type){case"mine":{let e=0;for(var c of r.inputs){var u,l=await i.getExtendTX(c.prevout.hash);l&&i.voteMgr.isIn(l.height)?(u=l.tx.outputs[c.prevout.index])&&u.value?e+=u.value/o.COIN|0:i.logger.warning("Voting: Invalid UTXO Info"):i.logger.warning("Voting: Invalid UTXO Height")}0<e&&await i.voteMgr.calcVote(e,h.ca,t);break}case"oracle":{let e=0;for(var f of r.inputs){var d,p=await i.getExtendTX(f.prevout.hash);p&&i.voteMgr.isIn(p.height)?(d=p.tx.outputs[f.prevout.index])&&d.value?e+=d.value/1e5|0:i.logger.warning("Oracle: Invalid UTXO Info"):i.logger.warning("Oracle: Invalid UTXO Height")}0<e&&await i.voteMgr.calcOracle(e,{k:h.k,v:h.v},t);break}}}catch(s){console.log(s)}}async verify(){return!0}}}).call(this,i(0).Buffer)},function(t,e,i){const r=i(1);var s=i(15);const{BlockFinalType:n,ContractEnvType:o,ContractType:a,PropStatus:h}=i(7),c=i(30).VerifyError,u=i(9),l=i(37).broadcast,f=i(3);t.exports=class extends s{async insert(){var t=this.options.env,e=this.options.tx,i=2<e.outputs.length?e.outputs[2].getReturnData():null,s=await t.propList.getVp(this.data.pid);if(i){if(this.mode==o.Wallet&&s.bid&&(i=await t.getTX(s.bid.hash))&&(i=await t.getWalletsByTX(i)))for(const e of i){var n=await t.get(e);r(n),await n.remove(s.bid.hash)}i=e.outputs[1].value;var a=e.outputs[2].getAddress().toString();i>=this.data.fixed||t.curHeight>=this.data.period&&i>s.gold?(Reflect.deleteProperty(s,"bid"),s.current={hash:this.options.hash,index:2,address:a},s.pst=h.Ready,await t.propList.setVp(s,e),this.mode==o.Wallet&&(e={pid:s.pid,address:s.current.address,wid:s.wid,account:s.account,time:f.now(),height:-1,cid:s.cid},t.emit("prop/auction",e),l("prop/auction",e))):(s.pst=h.Sale,s.bid={},s.bid.raw=this.options.raw,s.bid.fixed=this.data.fixed,s.bid.period=this.data.period,s.bid.hash=this.options.hash,s.bid.value=i,s.bid.address=a,await t.propList.setVp(s))}else s.pst=h.Sale,s.bid={},s.bid.raw=this.options.raw,s.bid.fixed=this.data.fixed,s.bid.period=this.data.period,s.bid.hash=this.options.hash,s.bid.value=s.gold,s.bid.address="",await t.propList.setVp(s);return!0}async erase(){var t,e=this.options.env,i=2<(r=this.options.tx).outputs.length?r.outputs[2].getReturnData():null,r=r.inputs[0],s=await e.propList.getVp(this.data.pid);s&&(i?(i=await e.getExtendTX(r.prevout.hash))&&(t=i.tx.outputs[r.prevout.index],s.current={hash:r.prevout.hash,index:r.prevout.index,address:t.getAddress().toString()},s.bid={hash:this.options.hash,value:s.gold,address:"",raw:this.options.raw,fixed:this.data.fixed,period:this.data.period},s.pst=h.Sale,await e.propList.setVp(s,i.tx)):(Reflect.deleteProperty(s,"bid"),s.pst=h.Ready,await e.propList.setVp(s)))}async confirm(){var t=this.options.env,e=this.options.tx,i=e.hash("hex"),r=e.outputs[2].getAddress().toString(),s=await t.propList.getVp(this.data.pid);return Reflect.deleteProperty(s,"bid"),s.current={hash:i,index:2,address:r},s.height=this.options.coinbaseHeight,s.pst=h.Ready,await t.propList.setVp(s,e),this.mode==o.Wallet&&(i={pid:s.pid,address:s.current.address,wid:s.wid,account:s.account,time:this.options.block.time,height:s.height,cid:s.cid},t.emit("prop/auction",i),l("prop/auction",i)),!0}async unconfirm(){var t,e,i=this.options.env,r=this.options.tx,s=r.inputs[0].prevout,n=await i.getExtendTX(s.hash);return n?(t=(e=n.tx.outputs[s.index]).getReturnData(),(t=await i.propList.getVp(t.pid))&&(t.current={hash:s.hash,index:s.index,address:e.getAddress().toString()},t.height=n.height-1,await i.propList.setVp(t,r)),this.mode==o.Wallet&&(s={pid:t.pid,address:t.current.address,wid:t.wid,account:t.account,time:this.options.block.time,height:t.height,cid:t.cid},i.emit("prop/auction",s),l("prop/auction",s))):this.mode==o.Wallet&&(e=await i.propList.getVp(this.data.pid),await i.propList.delVp(e)),!0}async verify(){var t=this.data,e=this.options.env,i=this.options.tx,s=2<i.outputs.length?i.outputs[2].getReturnData():null,n=await e.propList.getVp(t.pid);if(!n)return!1;switch(this.mode){case o.Mempool:if(r.strictEqual(t.prev.hash,i.inputs[0].prevout.hash),r.strictEqual(t.prev.index,i.inputs[0].prevout.index),r(e.curHeight+u.BLOCK_DAY>=this.data.period),r(t.cid!=e.network.genesisId),s){if(n.period<e.curHeight)throw new c(i,"sale order expired","contract",0);if(r.strictEqual(s.prev.hash,i.inputs[0].prevout.hash),r.strictEqual(s.prev.index,i.inputs[0].prevout.index),r.strictEqual(s.pid,t.pid),r.strictEqual(s.oper,a.propExchange),!n.bid)throw new c(i,"sale order lack bid info","contract",0);if(n.bid.value>=this.data.fixed)throw new c(i,"can not bid on sale order finished","contract",0);if(i.outputs[1].value<=n.bid.value||i.outputs[1].value<=n.gold)throw new c(i,"invalid bid price","contract",0);var l=await e.getTX(n.bid.hash);l&&await e.removeDoubleSpenders(l)}else r(n.pst===h.Ready);break;case o.Block:if(r.strictEqual(t.prev.hash,i.inputs[0].prevout.hash),r.strictEqual(t.prev.index,i.inputs[0].prevout.index),r(t.cid!=e.network.genesisId),r.strictEqual(s.prev.hash,i.inputs[0].prevout.hash),r.strictEqual(s.prev.index,i.inputs[0].prevout.index),r.strictEqual(s.pid,t.pid),r.strictEqual(s.oper,a.propExchange),i.outputs[1].value<=n.gold)throw new c(i,"invalid bid price","contract",0)}return!0}isBlockFinal(){var t=this.options.env,e=this.options.tx;return this.data.period<t.curHeight?n.Expired:2<=e.outputs.length&&(e.outputs[1].value>=this.data.fixed||this.data.period==t.curHeight&&e.outputs[1].value>=e.outputs[2].value)?n.Final:n.Waiting}isPreVerify(){var t=this.options.tx;return!!(2<t.outputs.length&&t.outputs[2].getReturnData())}}},function(t,e,i){(function(e){const r=i(1),s=i(103),{ContractEnvType:n,BlockFinalType:o}=i(7);var a=i(15);const h=i(9),c=i(37).broadcast,u=i(8),l=i(13);t.exports=class extends a{async insert(){var t=this.options.env,i=this.options.tx;switch(this.data.body.dst=i.outputs[1].getAddress().toString(),this.mode){case n.Mempool:try{var o=JSON.parse(this.data.body.content);switch(o.cmd){case"peerdel":r(this.data.body.dst==t.node.config.notifyAddress),r(l.fromString(this.data.body.dst).hash.toString("hex")==u.hash160(e.from(o.pub,"hex")).toString("hex")),r(s.verifyObj(o.payload,o.sig,o.pub)),await t.node.rpc._delPeer([o.payload.host]);break;case"peeradd":r(this.data.body.dst==t.node.config.notifyAddress),r(l.fromString(this.data.body.dst).hash.toString("hex")==u.hash160(e.from(o.pub,"hex")).toString("hex")),r(s.verifyObj(o.payload,o.sig,o.pub)),await t.node.rpc._addPeer([o.payload.host,o.payload.key])}}catch(t){}break;case n.Wallet:if(t.NotifyList.get(this.data.sn))return;var a=this.data.body.dst,[a,h]=await t.getAccountByAddress(a,i);this.data.account=h,this.data.wid=a,t.emit("notify/receive",this.data),c("notify/receive",this.data),await t.NotifyList.set(this.data.sn,this.data)}return!0}async confirm(){}async unconfirm(){}async erase(){var t=this.options.env;return this.options.tx,this.mode===n.Wallet&&(await t.NotifyList.delete(this.data.sn),t.emit("notify/remove",this.data),c("notify/remove",this.data)),!0}async verify(){var t=this.options.env,e=this.options.tx;return!(e.getOutputValue()<.1*h.COIN||2<e.outputs.length||this.data.h>t.curHeight)}isBlockFinal(){var t=this.options.env;return this.data.h<t.curHeight-6?o.Expired:o.Waiting}}}).call(this,i(0).Buffer)},function(t,e,i){var r=i(15);const{ContractEnvType:s,ContractStatus:n,BlockFinalType:o}=i(7),a=i(30).VerifyError;t.exports=class extends r{async insert(){var t=this.options.env;return this.data.period<t.curHeight?await t.transactionList.delTransContract(this.data,!0):(this.data.current={hash:this.options.hash,index:0},this.data.raw=this.options.raw,await t.transactionList.addTransContract(s.Mempool,this.data)),!0}async erase(){var t=this.options.env;switch(this.mode){case s.Mempool:await t.transactionList.delTransContract(this.data);break;case s.Wallet:await t.transactionList.delTransContract(this.data,!0)}}async verify(){var t=this.options.env,e=this.options.tx;if(this.data.period<t.curHeight)throw new a(e,"transaction contract expired","contract",0);if(t.transactionList.query(this.data.type,this.data.addr)!=n.None)throw new a(e,"Same Address Contract Finded","contract",0);return!0}isBlockFinal(){var t=this.options.env;return this.data.period<t.curHeight?o.Expired:o.Waiting}}},function(t,e,i){var r=i(15);const{ContractEnvType:s,ContractStatus:n}=i(7),o=i(91);t.exports=class extends r{async confirm(){var t=this.options.env;let e=n.Backed;switch(2==this.data.master&&(e=n.Exchanged),this.mode){case s.Block:var i=t.transactionList.get(this.data.type+"."+this.data.addr);i?(i.transStatus=e,await t.transactionList.saveContract(i,!0)):await t.transactionList.addTransContract(s.Block,this.data,!0);break;case s.Wallet:(i=t.transactionList.get(this.data.type+"."+this.data.addr))?(i.transStatus=e,await t.transactionList.saveContract(i,!0)):await t.transactionList.addTransContract(s.Wallet,this.data,!0)}return!0}async verify(){var t=this.options.env;switch(this.mode){case s.Mempool:case s.Block:case s.Wallet:{var e=this.data.master,i=t.transactionList.get(this.data.type+"."+this.data.addr);let r=i.transStatus;return r!==n.Expired&&r!==n.Confirmed&&r!==n.Backed&&r!==n.Exchanged&&(i=new o(t.network.txcheckpoint,i),[,r]=await i.execute(t)),(r===n.Expired||r===n.Confirmed||r===n.Backed||r===n.Exchanged)&&!(r==n.Expired&&1!=e||r==n.Confirmed&&2!=e||r==n.Backed&&1!=e||r==n.Exchanged&&2!=e)}}}}},function(t,e,i){(function(e){var r=i(15);const{ContractEnvType:s,VerifyCode:n,ContractType:o}=i(7),a=i(142).ErItem,h=i(32),c=i(8),u=i(13),l=i(37).broadcast;t.exports=class extends r{async insert(){return!0}async confirm(){var t=this.options.env,i=this.options.tx;switch(this.data.startHeight=t.curHeight,await t.erList.setEr(this.data,i),this.mode){case s.Wallet:var r=u.fromWitnessPubkeyhash(c.hash160(e.from(this.data.witness,"hex")),t.network),[r,n]=await t.getAccountByAddress(r,i);r&&n&&(this.data.account=n,this.data.wid=r,t.emit("ca/issue",this.data),l("ca/issue",this.data));break;case s.Block:t.node.transmit("ca.issue",this.data),t.node.config.alliancePrivateKey&&(n=h.fromPrivate(e.from(t.node.config.alliancePrivateKey,"hex"),!0,t.network),h.fromPrivate(c.hash256(e.concat([e.from(this.data.source.cid+"-"+this.data.source.uid),n.privateKey]),!0,t.network)).publicKey.toString("hex")==this.data.witness)&&t.node.transmit("ca.issue.alliance",this.data)}return!0}async unconfirm(){var t=this.options.env,i=this.options.tx;switch(t.erList.delEr(this.data,i),this.mode){case s.Wallet:var r=u.fromWitnessPubkeyhash(c.hash160(e.from(this.data.witness,"hex")),t.network),[r,n]=await t.getAccountByAddress(r,i);this.data.account=n,this.data.wid=r,t.emit("ca/unissue",this.data),l("ca/unissue",this.data);break;case s.Block:t.node.transmit("ca.unissue",this.data)}return!0}async erase(){return!0}async verify(){var t=this.options.env,i=this.data;return i&&i.oper==o.erIssue&&await t.erList.getEr(i.erid)?n.DuplicateEr:(t=h.fromPublic(e.from(i.witness,"hex"),t.network),!!new a(i).verifying(t)||n.SignatureNotMatch)}}}).call(this,i(0).Buffer)},function(t,e,i){(function(e){var r=i(15);const{ContractEnvType:s,VerifyCode:n,ContractType:o}=i(7),a=i(143).ErAbolishItem,h=i(32),c=i(37).broadcast,u=i(8),l=i(13);t.exports=class extends r{async insert(){return!0}async confirm(){var t=this.options.env,i=this.options.tx;switch(this.data.startHeight=t.curHeight,await t.erAbList.setErAb(this.data,i),this.mode){case s.Wallet:var r=l.fromWitnessPubkeyhash(u.hash160(e.from(this.data.witness,"hex")),t.network),[r,n]=await t.getAccountByAddress(r,i);this.data.account=n,this.data.wid=r,t.emit("ca/abolish",this.data),c("ca/abolish",this.data);break;case s.Block:t.node.transmit("ca.abolish",this.data)}return!0}async unconfirm(){var t=this.options.env,i=this.options.tx;switch(t.erAbList.delErAb(this.data,i),this.mode){case s.Wallet:var r=l.fromWitnessPubkeyhash(u.hash160(e.from(this.data.witness,"hex")),t.network),[r,n]=await t.getAccountByAddress(r,i);this.data.account=n,this.data.wid=r,t.emit("ca/unabolish",this.data),c("ca/unabolish",this.data);break;case s.Block:t.node.transmit("ca.unabolish",this.data)}return!0}async erase(){return!0}async verify(){var t=this.options.env,i=this.data,r=await t.erList.getEr(i.erid);return r&&r.witness==i.witness?i&&i.oper==o.erAbolish&&(r=await t.erAbList.getErAb(i.erid))&&i.abolishHeight>=r.abolishHeight?n.NotExistER:(r=h.fromPublic(e.from(i.witness,"hex"),t.network),!!new a(i).verifying(r)||n.SignatureNotMatch):n.SignatureNotMatch}}}).call(this,i(0).Buffer)},function(t,e,i){(function(e){var r=i(15);const{VerifyCode:s,ContractEnvType:n}=i(7),o=i(212).EnchancementItem,a=i(32);t.exports=class extends r{async insert(){return!0}async confirm(){var t,e;return this.mode==n.Block&&(t=this.options.env,e=this.options.tx,this.data.enchanceTx=e.txid(),t.enCpList.setEn(this.data),!0)}async unconfirm(){var t,e;return this.mode==n.Block&&(t=this.options.env,e=this.options.tx,t.enCpList.delEn(this.data,e),!0)}async erase(){return!0}async verify(){var t=this.options.env,i=this.options.tx,r=this.data,n=t.cpList.getItem(r.to);i=i.outputs[1].getAddress().toString();return n&&n.pubAddress&&n.pubAddress==i&&(n=t.cpList.getItem(r.from))&&n.pubAddress&&n.pubKey?(i=a.fromPublic(e.from(n.pubKey,"hex"),t.network),!!new o(r).verifying(i)||s.SignatureNotMatch):s.NotExistCp}}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";var r=i(5),s=i(254),n=i(10).Buffer,o=new Array(16);function a(){s.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function h(t,e){return t<<e|t>>>32-e}function c(t,e,i,r,s,n,o){return h(t+(e&i|~e&r)+s+n|0,o)+e|0}function u(t,e,i,r,s,n,o){return h(t+(e&r|i&~r)+s+n|0,o)+e|0}function l(t,e,i,r,s,n,o){return h(t+(e^i^r)+s+n|0,o)+e|0}function f(t,e,i,r,s,n,o){return h(t+(i^(e|~r))+s+n|0,o)+e|0}r(a,s),a.prototype._update=function(){for(var t=o,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var i=c(this._a,n=this._b,s=this._c,r=this._d,t[0],3614090360,7),r=c(r,i,n,s,t[1],3905402710,12),s=c(s,r,i,n,t[2],606105819,17),n=c(n,s,r,i,t[3],3250441966,22);i=c(i,n,s,r,t[4],4118548399,7),r=c(r,i,n,s,t[5],1200080426,12),s=c(s,r,i,n,t[6],2821735955,17),n=c(n,s,r,i,t[7],4249261313,22),i=c(i,n,s,r,t[8],1770035416,7),r=c(r,i,n,s,t[9],2336552879,12),s=c(s,r,i,n,t[10],4294925233,17),n=c(n,s,r,i,t[11],2304563134,22),i=c(i,n,s,r,t[12],1804603682,7),r=c(r,i,n,s,t[13],4254626195,12),s=c(s,r,i,n,t[14],2792965006,17),i=u(i,n=c(n,s,r,i,t[15],1236535329,22),s,r,t[1],4129170786,5),r=u(r,i,n,s,t[6],3225465664,9),s=u(s,r,i,n,t[11],643717713,14),n=u(n,s,r,i,t[0],3921069994,20),i=u(i,n,s,r,t[5],3593408605,5),r=u(r,i,n,s,t[10],38016083,9),s=u(s,r,i,n,t[15],3634488961,14),n=u(n,s,r,i,t[4],3889429448,20),i=u(i,n,s,r,t[9],568446438,5),r=u(r,i,n,s,t[14],3275163606,9),s=u(s,r,i,n,t[3],4107603335,14),n=u(n,s,r,i,t[8],1163531501,20),i=u(i,n,s,r,t[13],2850285829,5),r=u(r,i,n,s,t[2],4243563512,9),s=u(s,r,i,n,t[7],1735328473,14),i=l(i,n=u(n,s,r,i,t[12],2368359562,20),s,r,t[5],4294588738,4),r=l(r,i,n,s,t[8],2272392833,11),s=l(s,r,i,n,t[11],1839030562,16),n=l(n,s,r,i,t[14],4259657740,23),i=l(i,n,s,r,t[1],2763975236,4),r=l(r,i,n,s,t[4],1272893353,11),s=l(s,r,i,n,t[7],4139469664,16),n=l(n,s,r,i,t[10],3200236656,23),i=l(i,n,s,r,t[13],681279174,4),r=l(r,i,n,s,t[0],3936430074,11),s=l(s,r,i,n,t[3],3572445317,16),n=l(n,s,r,i,t[6],76029189,23),i=l(i,n,s,r,t[9],3654602809,4),r=l(r,i,n,s,t[12],3873151461,11),s=l(s,r,i,n,t[15],530742520,16),i=f(i,n=l(n,s,r,i,t[2],3299628645,23),s,r,t[0],4096336452,6),r=f(r,i,n,s,t[7],1126891415,10),s=f(s,r,i,n,t[14],2878612391,15),n=f(n,s,r,i,t[5],4237533241,21),i=f(i,n,s,r,t[12],1700485571,6),r=f(r,i,n,s,t[3],2399980690,10),s=f(s,r,i,n,t[10],4293915773,15),n=f(n,s,r,i,t[1],2240044497,21),i=f(i,n,s,r,t[8],1873313359,6),r=f(r,i,n,s,t[15],4264355552,10),s=f(s,r,i,n,t[6],2734768916,15),n=f(n,s,r,i,t[13],1309151649,21),i=f(i,n,s,r,t[4],4149444226,6),r=f(r,i,n,s,t[11],3174756917,10),s=f(s,r,i,n,t[2],718787259,15),n=f(n,s,r,i,t[9],3951481745,21),this._a=this._a+i|0,this._b=this._b+n|0,this._c=this._c+s|0,this._d=this._d+r|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,56<this._blockOffset&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=n.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=a},function(t,e,i){"use strict";var r=i(73).codes.ERR_STREAM_PREMATURE_CLOSE;function s(){}t.exports=function t(e,i,n){var o,a,h,c,u,l,f,d,p,g,m,w,y;return"function"==typeof i?t(e,null,i):(o=n||s,a=!1,n=function(){if(!a){a=!0;for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];o.apply(this,e)}},h=(i=i||{}).readable||!1!==i.readable&&e.readable,c=i.writable||!1!==i.writable&&e.writable,u=function(){e.writable||f()},l=e._writableState&&e._writableState.finished,f=function(){l=!(c=!1),h||n.call(e)},d=e._readableState&&e._readableState.endEmitted,p=function(){d=!(h=!1),c||n.call(e)},g=function(t){n.call(e,t)},m=function(){var t;return h&&!d?(e._readableState&&e._readableState.ended||(t=new r),n.call(e,t)):c&&!l?(e._writableState&&e._writableState.ended||(t=new r),n.call(e,t)):void 0},w=function(){e.req.on("finish",f)},(y=e).setHeader&&"function"==typeof y.abort?(e.on("complete",f),e.on("abort",m),e.req?w():e.on("request",w)):c&&!e._writableState&&(e.on("end",u),e.on("close",u)),e.on("end",p),e.on("finish",f),!1!==i.error&&e.on("error",g),e.on("close",m),function(){e.removeListener("complete",f),e.removeListener("abort",m),e.removeListener("request",w),e.req&&e.req.removeListener("finish",f),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",f),e.removeListener("end",p),e.removeListener("error",g),e.removeListener("close",m)})}},function(t,e,i){"use strict";var r=i(0).Buffer,s=i(5),n=i(254),o=new Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],h=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],u=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],l=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0];function d(){n.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(t,e){return t<<e|t>>>32-e}function g(t,e,i,r,s,n,o,a){return p(t+(e^i^r)+n+o|0,a)+s|0}function m(t,e,i,r,s,n,o,a){return p(t+(e&i|~e&r)+n+o|0,a)+s|0}function w(t,e,i,r,s,n,o,a){return p(t+((e|~i)^r)+n+o|0,a)+s|0}function y(t,e,i,r,s,n,o,a){return p(t+(e&r|i&~r)+n+o|0,a)+s|0}function b(t,e,i,r,s,n,o,a){return p(t+(e^(i|~r))+n+o|0,a)+s|0}s(d,n),d.prototype._update=function(){for(var t=o,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);for(var i=0|this._a,r=0|this._b,s=0|this._c,n=0|this._d,d=0|this._e,v=0|this._a,k=0|this._b,S=0|this._c,_=0|this._d,x=0|this._e,R=0;R<80;R+=1){var E,A=R<16?(E=g(i,r,s,n,d,t[a[R]],l[0],c[R]),b(v,k,S,_,x,t[h[R]],f[0],u[R])):R<32?(E=m(i,r,s,n,d,t[a[R]],l[1],c[R]),y(v,k,S,_,x,t[h[R]],f[1],u[R])):R<48?(E=w(i,r,s,n,d,t[a[R]],l[2],c[R]),w(v,k,S,_,x,t[h[R]],f[2],u[R])):R<64?(E=y(i,r,s,n,d,t[a[R]],l[3],c[R]),m(v,k,S,_,x,t[h[R]],f[3],u[R])):(E=b(i,r,s,n,d,t[a[R]],l[4],c[R]),g(v,k,S,_,x,t[h[R]],f[4],u[R]));i=d,d=n,n=p(s,10),s=r,r=E,v=x,x=_,_=p(S,10),S=k,k=A}var M=this._b+s+_|0;this._b=this._c+n+x|0,this._c=this._d+d+v|0,this._d=this._e+i+k|0,this._e=this._a+r+S|0,this._a=M},d.prototype._digest=function(){this._block[this._blockOffset++]=128,56<this._blockOffset&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=r.alloc?r.alloc(20):new r(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},t.exports=d},function(t,e,i){(e=t.exports=function(t){t=t.toLowerCase();var i=e[t];if(i)return new i;throw new Error(t+" is not supported (we accept pull requests)")}).sha=i(438),e.sha1=i(439),e.sha224=i(440),e.sha256=i(261),e.sha384=i(441),e.sha512=i(262)},function(t,e,i){(((e=t.exports=i(263)).Stream=e).Readable=e).Writable=i(194),e.Duplex=i(62),e.Transform=i(266),e.PassThrough=i(446)},function(t,e,i){var r=i(0),s=r.Buffer;function n(t,e){for(var i in t)e[i]=t[i]}function o(t,e,i){return s(t,e,i)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=r:(n(r,e),e.Buffer=o),n(s,o),o.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return s(t,e,i)},o.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");return t=s(t),void 0!==e?"string"==typeof i?t.fill(e,i):t.fill(e):t.fill(0),t},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return s(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,i){"use strict";(function(e,r,s){var n=i(125);function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){var i=e,r=t,s=i.entry;for(i.entry=null;s;){var n=s.callback;r.pendingcb--,n(void 0),s=s.next}r.corkedRequestsFree?r.corkedRequestsFree.next=i:r.corkedRequestsFree=i}}t.exports=g;var a,h,c=!e.browser&&-1<["v0.10","v0.9."].indexOf(e.version.slice(0,5))?r:n.nextTick,u=(r=((e=(g.WritableState=p,Object.create(i(93)))).inherits=i(5),{deprecate:i(116)}),i(264)),l=i(193).Buffer,f=s.Uint8Array||function(){};s=i(265);function d(){}function p(t,e){a=a||i(62),t=t||{};var r=e instanceof a,s=(this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),t.highWaterMark),h=t.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:r&&(h||0===h)?h:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,s=(this.destroyed=!1)===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){t=t,s=(r=(i=e)._writableState).sync,o=r.writecb;var i,r,s,o,a,h,u,l,f=r;f.writing=!1,f.writecb=null,f.length-=f.writelen,f.writelen=0,t?(f=i,h=s,u=t,l=o,--(a=r).pendingcb,h?(n.nextTick(l,u),n.nextTick(k,f,a),f._writableState.errorEmitted=!0,f.emit("error",u)):(l(u),f._writableState.errorEmitted=!0,f.emit("error",u),k(f,a))):((t=b(r))||r.corked||r.bufferProcessing||!r.bufferedRequest||y(i,r),s?c(w,i,r,t,o):w(i,r,t,o))},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}e.inherits(g,u),p.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e};try{Object.defineProperty(p.prototype,"buffer",{get:r.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}function g(t){if(a=a||i(62),!(h.call(g,this)||this instanceof a))return new g(t);this._writableState=new p(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final)&&(this._final=t.final),u.call(this)}function m(t,e,i,r,s,n,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,i?t._writev(s,e.onwrite):t._write(s,n,e.onwrite),e.sync=!1}function w(t,e,i,r){var s;i||(i=t,0===(s=e).length&&s.needDrain&&(s.needDrain=!1,i.emit("drain"))),e.pendingcb--,r(),k(t,e)}function y(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){for(var r=e.bufferedRequestCount,s=new Array(r),n=((r=e.corkedRequestsFree).entry=i,0),a=!0;i;)(s[n]=i).isBuf||(a=!1),i=i.next,n+=1;s.allBuffers=a,m(t,e,!0,e.length,s,"",r.finish),e.pendingcb++,e.lastBufferedRequest=null,r.next?(e.corkedRequestsFree=r.next,r.next=null):e.corkedRequestsFree=new o(e),e.bufferedRequestCount=0}else{for(;i;){var h=i.chunk,c=i.encoding,u=i.callback;if(m(t,e,!1,e.objectMode?1:h.length,h,c,u),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function b(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function v(t,e){t._final((function(i){e.pendingcb--,i&&t.emit("error",i),e.prefinished=!0,t.emit("prefinish"),k(t,e)}))}function k(t,e){var i,r,s=b(e);return s&&(i=t,(r=e).prefinished||r.finalCalled||("function"==typeof i._final?(r.pendingcb++,r.finalCalled=!0,n.nextTick(v,i,r)):(r.prefinished=!0,i.emit("prefinish"))),0===e.pendingcb)&&(e.finished=!0,t.emit("finish")),s}"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(t){return!!h.call(this,t)||this===g&&t&&t._writableState instanceof p}})):h=function(t){return t instanceof this},g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},g.prototype.write=function(t,e,i){var r,s,o,a,h,c,u,p=this._writableState,g=!1,w=!p.objectMode&&(w=t,l.isBuffer(w)||w instanceof f);return w&&!l.isBuffer(t)&&(h=t,t=l.from(h)),"function"==typeof e&&(i=e,e=null),e=w?"buffer":e||p.defaultEncoding,"function"!=typeof i&&(i=d),p.ended?(h=this,c=i,u=new Error("write after end"),h.emit("error",u),n.nextTick(c,u)):(w||(c=this,u=p,s=i,a=!(o=!0),null===(r=t)?a=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||u.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(c.emit("error",a),n.nextTick(s,a),o=!1),o))&&(p.pendingcb++,g=function(t,e,i,r,s,n){i||r!==(a=function(t,e,i){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=l.from(e,i)),e}(e,r,s))&&(i=!0,s="buffer",r=a);var o,a=e.objectMode?1:r.length,h=(e.length+=a,e.length<e.highWaterMark);return h||(e.needDrain=!0),e.writing||e.corked?(o=e.lastBufferedRequest,e.lastBufferedRequest={chunk:r,encoding:s,isBuf:i,callback:n,next:null},o?o.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1):m(t,e,!1,a,r,s,n),h}(this,p,w,t,e,i)),g},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||y(this,t))},g.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase()))return this._writableState.defaultEncoding=t,this;throw new TypeError("Unknown encoding: "+t)},Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),g.prototype._write=function(t,e,i){i(new Error("_write() is not implemented"))},g.prototype._writev=null,g.prototype.end=function(t,e,i){var r=this._writableState;"function"==typeof t?(i=t,e=t=null):"function"==typeof e&&(i=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||(t=this,e=i,(i=r).ending=!0,k(t,i),e&&(i.finished?n.nextTick(e):t.once("finish",e)),i.ended=!0,t.writable=!1)},Object.defineProperty(g.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),g.prototype.destroy=s.destroy,g.prototype._undestroy=s.undestroy,g.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,i(11),i(78).setImmediate,i(12))},function(t,e,i){"use strict";var r=i(33);function s(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}(t.exports=s).prototype._init=function(){},s.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},s.prototype._buffer=function(t,e){for(var i=Math.min(this.buffer.length-this.bufferOff,t.length-e),r=0;r<i;r++)this.buffer[this.bufferOff+r]=t[e+r];return this.bufferOff+=i,i},s.prototype._flushBuffer=function(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},s.prototype._updateEncrypt=function(t){for(var e=0,i=0,r=(this.bufferOff+t.length)/this.blockSize|0,s=new Array(r*this.blockSize),n=(0!==this.bufferOff&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length)&&(i+=this._flushBuffer(s,i)),t.length-(t.length-e)%this.blockSize);e<n;e+=this.blockSize)this._update(t,e,s,i),i+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return s},s.prototype._updateDecrypt=function(t){for(var e=0,i=0,r=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,s=new Array(r*this.blockSize);0<r;r--)e+=this._buffer(t,e),i+=this._flushBuffer(s,i);return e+=this._buffer(t,e),s},s.prototype.final=function(t){var e;return t&&(e=this.update(t)),t="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),e?e.concat(t):t},s.prototype._pad=function(t,e){if(0===e)return!1;for(;e<t.length;)t[e++]=0;return!0},s.prototype._finalEncrypt=function(){var t;return this._pad(this.buffer,this.bufferOff)?(t=new Array(this.blockSize),this._update(this.buffer,0,t,0),t):[]},s.prototype._unpad=function(t){return t},s.prototype._finalDecrypt=function(){r.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)}},function(t,e,i){var r=i(459),s=i(467),n=i(279);e.createCipher=e.Cipher=r.createCipher,e.createCipheriv=e.Cipheriv=r.createCipheriv,e.createDecipher=e.Decipher=s.createDecipher,e.createDecipheriv=e.Decipheriv=s.createDecipheriv,e.listCiphers=e.getCiphers=function(){return Object.keys(n)}},function(t,e,i){var r,s={ECB:i(460),CBC:i(461),CFB:i(462),CFB8:i(463),CFB1:i(464),OFB:i(465),CTR:i(277),GCM:i(277)},n=i(279);for(r in n)n[r].module=s[n[r].mode];t.exports=n},function(t,e,i){"use strict";var r=i(76).codes.ERR_STREAM_PREMATURE_CLOSE;function s(){}t.exports=function t(e,i,n){var o,a,h,c,u,l,f,d,p,g,m,w,y;return"function"==typeof i?t(e,null,i):(o=n||s,a=!1,n=function(){if(!a){a=!0;for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];o.apply(this,e)}},h=(i=i||{}).readable||!1!==i.readable&&e.readable,c=i.writable||!1!==i.writable&&e.writable,u=function(){e.writable||f()},l=e._writableState&&e._writableState.finished,f=function(){l=!(c=!1),h||n.call(e)},d=e._readableState&&e._readableState.endEmitted,p=function(){d=!(h=!1),c||n.call(e)},g=function(t){n.call(e,t)},m=function(){var t;return h&&!d?(e._readableState&&e._readableState.ended||(t=new r),n.call(e,t)):c&&!l?(e._writableState&&e._writableState.ended||(t=new r),n.call(e,t)):void 0},w=function(){e.req.on("finish",f)},(y=e).setHeader&&"function"==typeof y.abort?(e.on("complete",f),e.on("abort",m),e.req?w():e.on("request",w)):c&&!e._writableState&&(e.on("end",u),e.on("close",u)),e.on("end",p),e.on("finish",f),!1!==i.error&&e.on("error",g),e.on("close",m),function(){e.removeListener("complete",f),e.removeListener("abort",m),e.removeListener("request",w),e.req&&e.req.removeListener("finish",f),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",f),e.removeListener("end",p),e.removeListener("error",g),e.removeListener("close",m)})}},function(t,e,i){(function(e){var r=i(482),s=i(67);function n(t){for(var e,i=t.modulus.byteLength();0<=(e=new r(s(i))).cmp(t.modulus)||!e.umod(t.prime1)||!e.umod(t.prime2););return e}function o(t,i){var s={blinder:(s=n(o=i)).toRed(r.mont(o.modulus)).redPow(new r(o.publicExponent)).fromRed(),unblinder:s.invm(o.modulus)},o=i.modulus.byteLength(),a=(t=new r(t).mul(s.blinder).umod(i.modulus)).toRed(r.mont(i.prime1)),h=(t=t.toRed(r.mont(i.prime2)),i.coefficient),c=i.prime1,u=i.prime2;a=a.redPow(i.exponent1).fromRed(),t=t.redPow(i.exponent2).fromRed(),a=a.isub(t).imul(h).umod(c).imul(u);return t.iadd(a).imul(s.unblinder).umod(i.modulus).toArrayLike(e,"be",o)}o.getr=n,t.exports=o}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){var r,s=i(0),n=s.Buffer,o={};for(r in s)s.hasOwnProperty(r)&&"SlowBuffer"!==r&&"Buffer"!==r&&(o[r]=s[r]);var a=o.Buffer={};for(r in n)n.hasOwnProperty(r)&&"allocUnsafe"!==r&&"allocUnsafeSlow"!==r&&(a[r]=n[r]);if(o.Buffer.prototype=n.prototype,a.from&&a.from!==Uint8Array.from||(a.from=function(t,e,i){if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&void 0===t.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return n(t,e,i)}),a.alloc||(a.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||2*(1<<30)<=t)throw new RangeError('The value "'+t+'" is invalid for option "size"');return t=n(t),e&&0!==e.length?"string"==typeof i?t.fill(e,i):t.fill(e):t.fill(0),t}),!o.kStringMaxLength)try{o.kStringMaxLength=e.binding("buffer").kStringMaxLength}catch(e){}o.constants||(o.constants={MAX_LENGTH:o.kMaxLength},o.kStringMaxLength&&(o.constants.MAX_STRING_LENGTH=o.kStringMaxLength)),t.exports=o}).call(this,i(11))},function(t,e,i){"use strict";const r=i(202).Reporter,s=i(95).EncoderBuffer,n=i(95).DecoderBuffer,o=i(33),a=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(i=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"]);function h(t,e,i){var r={};(this._baseState=r).name=i,r.enc=t,r.parent=e||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.contains=null,r.parent||(r.children=[],this._wrap())}t.exports=h;const c=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];h.prototype.clone=function(){const t=this._baseState,e={};c.forEach((function(i){e[i]=t[i]}));var i=new this.constructor(e.parent);return i._baseState=e,i},h.prototype._wrap=function(){const t=this._baseState;a.forEach((function(e){this[e]=function(){var i=new this.constructor(this);return t.children.push(i),i[e].apply(i,arguments)}}),this)},h.prototype._init=function(t){var e=this._baseState;o(null===e.parent),t.call(this),e.children=e.children.filter((function(t){return t._baseState.parent===this}),this),o.equal(e.children.length,1,"Root node can have only one child")},h.prototype._useArgs=function(t){var e=this._baseState,i=t.filter((function(t){return t instanceof this.constructor}),this);t=t.filter((function(t){return!(t instanceof this.constructor)}),this),0!==i.length&&(o(null===e.children),(e.children=i).forEach((function(t){t._baseState.parent=this}),this)),0!==t.length&&(o(null===e.args),e.args=t,e.reverseArgs=t.map((function(t){if("object"!=typeof t||t.constructor!==Object)return t;const e={};return Object.keys(t).forEach((function(i){i==(0|i)&&(i|=0);var r=t[i];e[r]=i})),e})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(t){h.prototype[t]=function(){var e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)}})),i.forEach((function(t){h.prototype[t]=function(){var e=this._baseState,i=Array.prototype.slice.call(arguments);return o(null===e.tag),e.tag=t,this._useArgs(i),this}})),h.prototype.use=function(t){o(t);var e=this._baseState;return o(null===e.use),e.use=t,this},h.prototype.optional=function(){return this._baseState.optional=!0,this},h.prototype.def=function(t){var e=this._baseState;return o(null===e.default),e.default=t,e.optional=!0,this},h.prototype.explicit=function(t){var e=this._baseState;return o(null===e.explicit&&null===e.implicit),e.explicit=t,this},h.prototype.implicit=function(t){var e=this._baseState;return o(null===e.explicit&&null===e.implicit),e.implicit=t,this},h.prototype.obj=function(){var t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},h.prototype.key=function(t){var e=this._baseState;return o(null===e.key),e.key=t,this},h.prototype.any=function(){return this._baseState.any=!0,this},h.prototype.choice=function(t){var e=this._baseState;return o(null===e.choice),e.choice=t,this._useArgs(Object.keys(t).map((function(e){return t[e]}))),this},h.prototype.contains=function(t){var e=this._baseState;return o(null===e.use),e.contains=t,this},h.prototype._decode=function(t,e){var i=this._baseState;if(null===i.parent)return t.wrapResult(i.children[0]._decode(t,e));let r,s=i.default,o=!0,a=null;if(null!==i.key&&(a=t.enterKey(i.key)),i.optional){let r=null;if(null!==i.explicit?r=i.explicit:null!==i.implicit?r=i.implicit:null!==i.tag&&(r=i.tag),null!==r||i.any){if(o=this._peekTag(t,r,i.any),t.isError(o))return o}else{var h=t.save();try{null===i.choice?this._decodeGeneric(i.tag,t,e):this._decodeChoice(t,e),o=!0}catch(a){o=!1}t.restore(h)}}if(i.obj&&o&&(r=t.enterObject()),o){if(null!==i.explicit){if(h=this._decodeTag(t,i.explicit),t.isError(h))return h;t=h}if(h=t.offset,null===i.use&&null===i.choice){let e;i.any&&(e=t.save());var c=this._decodeTag(t,null!==i.implicit?i.implicit:i.tag,i.any);if(t.isError(c))return c;i.any?s=t.raw(e):t=c}if(e&&e.track&&null!==i.tag&&e.track(t.path(),h,t.length,"tagged"),e&&e.track&&null!==i.tag&&e.track(t.path(),t.offset,t.length,"content"),i.any||(s=null===i.choice?this._decodeGeneric(i.tag,t,e):this._decodeChoice(t,e)),t.isError(s))return s;i.any||null!==i.choice||null===i.children||i.children.forEach((function(i){i._decode(t,e)})),!i.contains||"octstr"!==i.tag&&"bitstr"!==i.tag||(c=new n(s),s=this._getUse(i.contains,t._reporterState.obj)._decode(c,e))}return i.obj&&o&&(s=t.leaveObject(r)),null===i.key||null===s&&!0!==o?null!==a&&t.exitKey(a):t.leaveKey(a,i.key,s),s},h.prototype._decodeGeneric=function(t,e,i){var r=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,r.args[0],i):/str$/.test(t)?this._decodeStr(e,t,i):"objid"===t&&r.args?this._decodeObjid(e,r.args[0],r.args[1],i):"objid"===t?this._decodeObjid(e,null,null,i):"gentime"===t||"utctime"===t?this._decodeTime(e,t,i):"null_"===t?this._decodeNull(e,i):"bool"===t?this._decodeBool(e,i):"objDesc"===t?this._decodeStr(e,t,i):"int"===t||"enum"===t?this._decodeInt(e,r.args&&r.args[0],i):null!==r.use?this._getUse(r.use,e._reporterState.obj)._decode(e,i):e.error("unknown tag: "+t)},h.prototype._getUse=function(t,e){var i=this._baseState;return i.useDecoder=this._use(t,e),o(null===i.useDecoder._baseState.parent),i.useDecoder=i.useDecoder._baseState.children[0],i.implicit!==i.useDecoder._baseState.implicit&&(i.useDecoder=i.useDecoder.clone(),i.useDecoder._baseState.implicit=i.implicit),i.useDecoder},h.prototype._decodeChoice=function(t,e){const i=this._baseState;let r=null,s=!1;return Object.keys(i.choice).some((function(n){var o=t.save(),a=i.choice[n];try{var h=a._decode(t,e);if(t.isError(h))return!1;r={type:n,value:h},s=!0}catch(n){return t.restore(o),!1}return!0}),this),s?r:t.error("Choice not matched")},h.prototype._createEncoderBuffer=function(t){return new s(t,this.reporter)},h.prototype._encode=function(t,e,i){var r=this._baseState;if((null===r.default||r.default!==t)&&void 0!==(r=this._encodeValue(t,e,i))&&!this._skipDefault(r,e,i))return r},h.prototype._encodeValue=function(t,e,i){var s=this._baseState;if(null===s.parent)return s.children[0]._encode(t,e||new r);let n=null;if(this.reporter=e,s.optional&&void 0===t){if(null===s.default)return;t=s.default}let o=null,a=!1;if(s.any)n=this._createEncoderBuffer(t);else if(s.choice)n=this._encodeChoice(t,e);else if(s.contains)o=this._getUse(s.contains,i)._encode(t,e),a=!0;else if(s.children)o=s.children.map((function(i){var r;return"null_"===i._baseState.tag?i._encode(null,e,t):null===i._baseState.key?e.error("Child should have a key"):(r=e.enterKey(i._baseState.key),"object"!=typeof t?e.error("Child expected, but input is not object"):(i=i._encode(t[i._baseState.key],e,t),e.leaveKey(r),i))}),this).filter((function(t){return t})),o=this._createEncoderBuffer(o);else if("seqof"===s.tag||"setof"===s.tag){if(!s.args||1!==s.args.length)return e.error("Too many args for : "+s.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");var h=this.clone();h._baseState.implicit=null,o=this._createEncoderBuffer(t.map((function(i){var r=this._baseState;return this._getUse(r.args[0],t)._encode(i,e)}),h))}else null!==s.use?n=this._getUse(s.use,i)._encode(t,e):(o=this._encodePrimitive(s.tag,t),a=!0);return s.any||null!==s.choice||(h=null!==s.implicit?s.implicit:s.tag,i=null===s.implicit?"universal":"context",null===h?null===s.use&&e.error("Tag could be omitted only for .use()"):null===s.use&&(n=this._encodeComposite(h,a,i,o))),null!==s.explicit?this._encodeComposite(s.explicit,!1,"context",n):n},h.prototype._encodeChoice=function(t,e){var i=this._baseState,r=i.choice[t.type];return r||o(!1,t.type+" not found in "+JSON.stringify(Object.keys(i.choice))),r._encode(t.value,e)},h.prototype._encodePrimitive=function(t,e){var i=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if("objid"===t&&i.args)return this._encodeObjid(e,i.reverseArgs[0],i.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,i.args&&i.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);if("objDesc"===t)return this._encodeStr(e,t);throw new Error("Unsupported tag: "+t)},h.prototype._isNumstr=function(t){return/^[0-9 ]*$/.test(t)},h.prototype._isPrintstr=function(t){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(t)}},function(t,e,i){"use strict";function r(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function s(t,e){this.path=t,this.rethrow(e)}i=i(5),(e.Reporter=r).prototype.isError=function(t){return t instanceof s},r.prototype.save=function(){var t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},r.prototype.restore=function(t){var e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen)},r.prototype.enterKey=function(t){return this._reporterState.path.push(t)},r.prototype.exitKey=function(t){var e=this._reporterState;e.path=e.path.slice(0,t-1)},r.prototype.leaveKey=function(t,e,i){var r=this._reporterState;this.exitKey(t),null!==r.obj&&(r.obj[e]=i)},r.prototype.path=function(){return this._reporterState.path.join("/")},r.prototype.enterObject=function(){var t=this._reporterState,e=t.obj;return t.obj={},e},r.prototype.leaveObject=function(t){var e=this._reporterState,i=e.obj;return e.obj=t,i},r.prototype.error=function(t){let e;var i=this._reporterState,r=t instanceof s;if(e=r?t:new s(i.path.map((function(t){return"["+JSON.stringify(t)+"]"})).join(""),t.message||t,t.stack),i.options.partial)return r||i.errors.push(e),e;throw e},r.prototype.wrapResult=function(t){var e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},i(s,Error),s.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,s),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}},function(t,e,i){"use strict";function r(t){const e={};return Object.keys(t).forEach((function(i){(0|i)==i&&(i|=0);var r=t[i];e[r]=i})),e}e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=r(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=r(e.tag)},function(t,e,i){"use strict";
/*!
 * TXRecord.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1),s=i(3),n=i(2),o=i(6),a=i(19),h=i(106);t.exports=class t{constructor(t,e){this.tx=null,this.hash=null,this.mtime=s.now(),this.height=-1,this.block=null,this.index=-1,this.time=0,t&&this.fromTX(t,e)}fromTX(t,e){return this.tx=t,this.hash=t.hash("hex"),e&&this.setBlock(e),this}static fromTX(e,i){return(new t).fromTX(e,i)}setBlock(t){this.height=t.height,this.block=t.hash,this.time=t.time}unsetBlock(){this.height=-1,this.block=null,this.time=0}getBlock(){return-1===this.height?null:new h(this.block,this.height,this.time)}getDepth(t){return r("number"==typeof t,"Must pass in height."),-1===this.height||t<this.height?0:t-this.height+1}getSize(){let t=0;return t=t+this.tx.getSize()+4,this.block?t=(t+=1)+32+12:t+=1,t}toRaw(){var t=this.getSize();t=new o(t);let e=this.index;return this.tx.toWriter(t),t.writeU32(this.mtime),this.block?(-1===e&&(e=2147483647),t.writeU8(1),t.writeHash(this.block),t.writeU32(this.height),t.writeU32(this.time),t.writeU32(e)):t.writeU8(0),t.render()}fromRaw(t){return t=new n(t),this.tx=new a,this.tx.fromReader(t),this.hash=this.tx.hash("hex"),this.mtime=t.readU32(),1===t.readU8()&&(this.block=t.readHash("hex"),this.height=t.readU32(),this.time=t.readU32(),this.index=t.readU32(),2147483647===this.index)&&(this.index=-1),this}static fromRaw(e){return(new t).fromRaw(e)}}},function(t,e,i){"use strict";
/*!
 * walletkey.js - walletkey object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */const r=i(13),s=i(32),n=i(96);class o extends s{constructor(t,e){super(t,e),this.keyType=n.types.HD,this.id=null,this.wid=-1,this.name=null,this.account=-1,this.branch=-1,this.index=-1}static fromOptions(t){return(new o).fromOptions(t)}static fromPrivate(t,e,i){return(new o).fromPrivate(t,e,i)}static generate(t,e){return(new o).generate(t,e)}static fromPublic(t,e){return(new o).fromPublic(t,e)}static fromKey(t,e,i){return(new o).fromKey(t,e,i)}static fromScript(t,e,i,r){return(new o).fromScript(t,e,i,r)}static fromSecret(t,e){return(new o).fromSecret(t,e)}toJSON(t){return{network:this.network.type,wid:this.wid,id:this.id,name:this.name,account:this.account,branch:this.branch,index:this.index,witness:this.witness,nested:this.nested,privateKey:t&&this.privateKey?this.privateKey.toString("hex"):null,private58:t&&this.privateKey?s.fromKey(this.privateKey).toSecret():null,publicKey:this.publicKey.toString("hex"),script:this.script?this.script.toRaw().toString("hex"):null,program:this.witness?this.getProgram().toRaw().toString("hex"):null,type:r.typesByVal[this.getType()].toLowerCase(),address:this.getAddress("string")}}static fromJSON(t){return(new o).fromJSON(t)}static fromRaw(t){return(new o).fromRaw(t)}fromHD(t,e,i,r){return this.keyType=n.types.HD,this.id=t.id,this.wid=t.wid,this.name=t.name,this.account=t.accountIndex,this.branch=i,this.index=r,this.witness=t.witness,this.nested=2===i,e.privateKey?this.fromPrivate(e.privateKey,t.network):this.fromPublic(e.publicKey,t.network)}static fromHD(t,e,i,r){return(new o).fromHD(t,e,i,r)}fromImport(t,e){return this.keyType=n.types.KEY,this.id=t.id,this.wid=t.wid,this.name=t.name,this.account=t.accountIndex,this.witness=t.witness,this.fromRaw(e,t.network)}static fromImport(t,e){return(new o).fromImport(t,e)}fromRing(t,e){return this.keyType=n.types.KEY,this.id=t.id,this.wid=t.wid,this.name=t.name,this.account=t.accountIndex,this.witness=t.witness,this.fromOptions(e,e.network)}static fromRing(t,e){return(new o).fromRing(t,e)}toPath(){var t=new n;switch(t.id=this.id,t.wid=this.wid,t.name=this.name,t.account=this.account,this.keyType){case n.types.HD:t.branch=this.branch,t.index=this.index;break;case n.types.KEY:t.data=this.toRaw()}return t.keyType=this.keyType,t.version=this.getVersion(),t.type=this.getType(),t.hash=this.getHash("hex"),t}static isWalletKey(t){return t instanceof o}}t.exports=o},function(t,e,i){"use strict";
/*!
 * node.js - node object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1);var s=i(63);const n=i(3),o=i(18),a=i(60),h=i(214),c=i(23),u=i(538),l=i(4),f=i(324),d=i(208),p=i(3).stringify,g=i(54),m=i(572),w=i(636),y=i(26),b=i(637);t.exports=class extends s{constructor(t){super(),this.spv=t.spv,this.nodeType=t.nodeType||"full",this.config=new u({module:"gamegold",nodeType:this.nodeType,spv:this.spv}),this.config.inject(t),this.config.load(t),t.config&&(this.config.open(),this.config.inject(t),this.config.load(t)),this.network=o.set(this.config.network),y.setPort(this.network,this.config.uint("port-offset")),t.config&&this.config.changeParams({port:this.config.uint("port")||parseInt(this.network.port),httpPort:this.config.uint("http-port")||parseInt(this.network.httpPort),publicPort:this.config.uint("public-port")||parseInt(this.network.publicPort),wsport:this.config.uint("wsport")||parseInt(this.network.wsport),stratumPort:this.config.uint("stratum-port")||parseInt(this.network.stratumPort)}),this.conn_s2local=null,this.startTime=-1,this.bound=[],this.plugins=Object.create(null),this.stack=[],this.logger=null,this.workers=null,this.chain=null,this.fees=null,this.mempool=null,this.pool=null,this.miner=null,this.http=null,this.conn_s2local=null,this.conn_s2remote=null,this.keys={hmacSalt:this.config.buf("hmac-salt")||l.DefaultChainCode},this.selfish=this.config.bool("selfish")||!1,this.specialCp=new w(this.config),this.acl=new m(this.config),this.init()}transmit(t,e){this.conn_s2local&&this.conn_s2local.listen&&this.conn_s2local.fire(t,e),this.emit(t,e)}async removeTX(t){return Promise.resolve()}async getTXFromAll(t){let e=null;var i;return(e=this.chain?await this.chain.getTX(t):e)||this.mempool&&(e=await this.mempool.getTX(t)),e||(i=this.require("walletdb"))&&(e=await i.getTXFromDb(t)),e}initOptions(){let t=new a;var e=this.config;(t=e.has("logger")?e.obj("logger"):t).set({filename:e.bool("log-file")?this.nodeType+".log":null,filepath:e.bool("log-file")?e.prefix:null,level:e.str("log-level"),console:e.bool("log-console"),shrink:e.bool("log-shrink")}),this.logger=t.context("node"),this.workers=new h({enabled:e.bool("workers"),size:e.uint("workers-size"),timeout:e.uint("workers-timeout"),file:e.str("worker-file")})}init(){this.initOptions(),this.bus=new b({}),this.bus.subscribe("config/changed"),this.bus.on("config/changed",async()=>{this.syncPeerConfig(),await this.saveConfigAsync()}),this.on("error",()=>{}),this.workers.on("spawn",t=>{this.logger.info("Spawning worker process: %d.",t.id)}),this.workers.on("exit",(t,e)=>{this.logger.warning("Worker %d exited: %s.",e.id,t)}),this.workers.on("log",(t,e)=>{this.logger.debug("Worker %d says:",e.id),this.logger.debug(t)}),this.workers.on("error",(t,e)=>{e?this.logger.error("Worker %d error: %s",e.id,t.message):this.emit("error",t)}),this.hook("preopen",()=>this.handlePreopen()),this.hook("preclose",()=>this.handlePreclose()),this.hook("open",()=>this.handleOpen()),this.hook("close",()=>{this.bus.unsubscribe("config/changed"),this.bus.close(),this.handleClose()})}syncPeerConfig(){this.pool&&this.pool.authdb&&(this.config.knownPeers=[],this.pool.authdb.known.forEach((t,e)=>{this.config.knownPeers.push(e+" "+t.toString("hex"))}))}async saveConfigAsync(){await this.config.saveAsync()}async notifyCp(t,e){var i;this.specialCp.has(t.cid)&&(i=g.getHmac(t.cid.toString(),this.keys.hmacSalt).token,i=f.createHmac("sha256",p(t)).update(i).digest("hex"),e="http://"+e.ip,new d(e+"/"+this.network.type).Post("order/confirm",{data:t,sig:i},(t,e)=>{}))}ensure(){return this.config.ensure()}async relay(t){return Promise.resolve()}location(t){return this.config.location(t)}async handlePreopen(){await this.logger.open(),await this.workers.open(),this.bind(this.network.time,"offset",t=>{this.logger.info("Time offset: %d (%d minutes).",t,t/60|0)}),this.bind(this.network.time,"sample",(t,e)=>{this.logger.debug("Added time data: samples=%d, offset=%d (%d minutes).",e,t,t/60|0)}),this.bind(this.network.time,"mismatch",()=>{this.logger.warning("Adjusted time mismatch!"),this.logger.warning("Please make sure your system clock is correct!")})}async handleOpen(){this.startTime=n.now(),c.binding||(this.logger.warning("Warning: secp256k1-node was not built."),this.logger.warning("Verification will be slow.")),this.workers.enabled||(this.logger.warning("Warning: worker pool is disabled."),this.logger.warning("Verification will be slow."))}async handlePreclose(){}async handleClose(){for(var[t,e,i]of this.bound)t.removeListener(e,i);this.bound.length=0,this.startTime=-1,await this.workers.close(),await this.logger.close()}bind(t,e,i){this.bound.push([t,e,i]),t.on(e,i)}error(t){this.logger.error(t),this.emit("error",t)}uptime(){return-1===this.startTime?0:n.now()-this.startTime}use(t){r(t,"Plugin must be an object."),r("function"==typeof t.init,"`init` must be a function."),r(!this.loaded,"Cannot add plugin after node is loaded.");var e=t.init(this);if(r(!e.open||"function"==typeof e.open,"`open` must be a function."),r(!e.close||"function"==typeof e.close,"`close` must be a function."),t.id){switch(r("string"==typeof t.id,"`id` must be a string."),t.id){case"chain":case"fees":case"mempool":case"miner":case"pool":case"rpc":case"http":r(!1,t.id+" is already added.")}r(!this.plugins[t.id],t.id+" is already added."),this.plugins[t.id]=e}return this.stack.push(e),"function"==typeof e.on&&e.on("error",t=>this.error(t)),e}has(t){return null!=this.plugins[t]}get(t){switch(r("string"==typeof t,"Plugin name must be a string."),t){case"chain":return r(this.chain,"chain is not loaded."),this.chain;case"fees":return r(this.fees,"fees is not loaded."),this.fees;case"mempool":return r(this.mempool,"mempool is not loaded."),this.mempool;case"miner":return r(this.miner,"miner is not loaded."),this.miner;case"pool":return r(this.pool,"pool is not loaded."),this.pool;case"rpc":return r(this.rpc,"rpc is not loaded."),this.rpc;case"http":return r(this.http,"http is not loaded."),this.http}return this.plugins[t]||null}require(t){return this.get(t)}loadPlugins(){var t,e=this.config.array("plugins",[]),i=this.config.func("loader");for(t of e)"string"==typeof t&&(r(i,"Must pass a loader function."),t=i(t)),this.use(t)}async $remoteCall(t,e,i){var r=this.require("walletdb");return r?r.jsonp.execute(t.name,e,i):null}async $localCall(t,e,i){return t.callback(this,e,i)}async openPlugins(t){for(const t of this.stack)t.$parent=this,t.bind&&await t.bind();await this.conn_s2local.open(),this.conn_s2remote&&this.conn_s2remote.open();for(const e of this.stack)e.open&&await e.open(t)}async bootstrap(){await this.ensure(),await this.open(),await this.connect(),this.startSync()}startSync(){if(this.pool)return this.pool.startSync()}stopSync(){if(this.pool)return this.pool.stopSync()}connect(){if(this.pool)return this.pool.connect()}disconnect(){if(this.pool)return this.pool.disconnect()}async closePlugins(){for(const t of this.stack)t.close&&await t.close()}async readHostList(){return this.chain.db.readHostList()}writeHostList(t){return this.chain.db.writeHostList(t)}}},function(t,e,i){"use strict";var r=i(45),s=i(34),n=s.assert;function o(t,e){if(t instanceof o)return t;this._importDER(t,e)||(n(t.r&&t.s,"Signature without r or s"),this.r=new r(t.r,16),this.s=new r(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function a(){this.place=0}function h(t,e){var i=t[e.place++];if(!(128&i))return i;var r=15&i;if(0==r||4<r)return!1;for(var s=0,n=0,o=e.place;n<r;n++,o++)s=((s<<=8)|t[o])>>>0;return!(s<=127)&&(e.place=o,s)}function c(t){for(var e=0,i=t.length-1;!t[e]&&!(128&t[e+1])&&e<i;)e++;return 0===e?t:t.slice(e)}function u(t,e){if(!(e<128)){var i=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|i);--i;)t.push(e>>>(i<<3)&255)}t.push(e)}(t.exports=o).prototype._importDER=function(t,e){if(48!==(t=s.toArray(t,e))[(e=new a).place++])return!1;var i=h(t,e);if(!1===i)return!1;if(i+e.place!==t.length)return!1;if(2!==t[e.place++])return!1;if(!1===(i=h(t,e)))return!1;var n=t.slice(e.place,i+e.place);if(e.place+=i,2!==t[e.place++])return!1;if(!1===(i=h(t,e)))return!1;if(t.length!==i+e.place)return!1;if(t=t.slice(e.place,i+e.place),0===n[0]){if(!(128&n[1]))return!1;n=n.slice(1)}if(0===t[0]){if(!(128&t[1]))return!1;t=t.slice(1)}return this.r=new r(n),this.s=new r(t),!(this.recoveryParam=null)},o.prototype.toDER=function(t){var e=this.r.toArray(),i=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&i[0]&&(i=[0].concat(i)),e=c(e),i=c(i);!(i[0]||128&i[1]);)i=i.slice(1);var r;u(r=[2],e.length),(r=r.concat(e)).push(2),u(r,i.length),e=r.concat(i);return u(r=[48],e.length),r=r.concat(e),s.encode(r,t)}},function(t,e){t.exports=class{constructor(t){this.endpoint=t}Get(t,e,i){}Post(t,e,i){}static pGetUrl(t,e){}static pPostUrl(t,e){}}},function(t,e){e.endianness=function(){return"LE"},e.hostname=function(){return"undefined"!=typeof location?location.hostname:""},e.loadavg=function(){return[]},e.uptime=function(){return 0},e.freemem=function(){return Number.MAX_VALUE},e.totalmem=function(){return Number.MAX_VALUE},e.cpus=function(){return[]},e.type=function(){return"Browser"},e.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},e.networkInterfaces=e.getNetworkInterfaces=function(){return{}},e.arch=function(){return"javascript"},e.platform=function(){return"browser"},e.tmpdir=e.tmpDir=function(){return"/tmp"},e.EOL="\n",e.homedir=function(){return"/"}},function(t,e,i){"use strict";(function(t){
/*!
 * base32.js - base32 for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const i="abcdefghijklmnopqrstuvwxyz234567",r=[0,6,4,3,1],s={};for(let t=0;t<i.length;t++)s[i[t]]=t;e.encode=function(t){let e="",s=0,n=0;for(let r=0;r<t.length;r++){var o=t[r];switch(s){case 0:e+=i[o>>>3],n=(7&o)<<2,s=1;break;case 1:e=(e+=i[n|o>>>6])+i[o>>>1&31],n=(1&o)<<4,s=2;break;case 2:e+=i[n|o>>>4],n=(15&o)<<1,s=3;break;case 3:e=(e+=i[n|o>>>7])+i[o>>>2&31],n=(3&o)<<3,s=4;break;case 4:e=(e+=i[n|o>>>5])+i[31&o],s=0}}if(0<s){e+=i[n];for(let t=0;t<r[s];t++)e+="="}return e},e.decode=function(e){var i=t.allocUnsafe(5*e.length/8|0);let r,n=0,o=0,a=0;for(r=0;r<e.length;r++){var h=s[e[r]];if(null==h)break;switch(n){case 0:o=h,n=1;break;case 1:i[a++]=o<<3|h>>>2,o=3&h,n=2;break;case 2:o=o<<5|h,n=3;break;case 3:i[a++]=o<<1|h>>>4,o=15&h,n=4;break;case 4:i[a++]=o<<4|h>>>1,o=1&h,n=5;break;case 5:o=o<<5|h,n=6;break;case 6:i[a++]=o<<2|h>>>3,o=7&h,n=7;break;case 7:i[a++]=o<<5|h,n=0}}switch(n){case 0:break;case 1:case 3:case 6:throw new Error("Invalid base32 string.");case 2:if(0<o)throw new Error("Invalid padding.");if("======"!==e.slice(r,r+6))throw new Error("Invalid base32 character.");if(null!=s[e[r+6]])throw new Error("Invalid padding.");break;case 4:if(0<o)throw new Error("Invalid padding.");if("===="!==e.slice(r,r+4))throw new Error("Invalid base32 character.");if(null!=s[e[r+4]])throw new Error("Invalid padding.");break;case 5:if(0<o)throw new Error("Invalid padding.");if("==="!==e.slice(r,r+3))throw new Error("Invalid base32 character.");if(null!=s[e[r+3]])throw new Error("Invalid padding.");break;case 7:if(0<o)throw new Error("Invalid padding.");if("="!==e[r])throw new Error("Invalid base32 character.");if(null!=s[e[r+1]])throw new Error("Invalid padding.")}return i.slice(0,a)}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * rollingfilter.js - rolling bloom filter for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=i(134),n=s.sum32,o=s.mul32,a=e.alloc(0);function h(t,e){this.hi=t,this.lo=e}function c(t,e){return new h(t.readUInt32LE(e+4,!0),t.readUInt32LE(e,!0))}function u(t,e,i){t.writeUInt32LE(e.hi,i+4,!0),t.writeUInt32LE(e.lo,i,!0)}t.exports=class t{constructor(t,e){this.entries=0,this.generation=1,this.n=0,this.limit=0,this.size=0,this.items=0,this.tweak=0,this.filter=a,null!=t&&this.fromRate(t,e)}fromRate(t,i){r("number"==typeof t,"`items` must be a number."),r(0<t,"`items` must be greater than zero."),r(Number.isSafeInteger(t),"`items` must be an integer."),r("number"==typeof i,"`rate` must be a number."),r(0<=i&&i<=1,"`rate` must be between 0.0 and 1.0.");i=Math.log(i);var s=Math.max(1,Math.min(Math.round(i/Math.log(.5)),50)),n=(t+1)/2|0,o=(i=-1*s*(3*n)/Math.log(1-Math.exp(i/s)),t=(((i=Math.ceil(i))+63)/64|0)<<1,t>>>=0,t=Math.max(1,t),4294967296*Math.random()>>>0),a=e.allocUnsafe(8*t);return a.fill(0),this.n=s,this.limit=n,this.size=i,this.items=t,this.tweak=o,this.filter=a,this}static fromRate(e,i){return(new t).fromRate(e,i)}hash(t,e){return s(t,n(o(e,4221880213),this.tweak))}reset(){0!==this.entries&&(this.entries=0,this.generation=1,this.filter.fill(0))}add(t,i){if("string"==typeof t&&(t=e.from(t,i)),this.entries===this.limit){this.entries=0,this.generation+=1,4===this.generation&&(this.generation=1);var r=4294967295*(1&this.generation),s=4294967295*(this.generation>>>1);for(let t=0;t<this.items;t+=2){var n=8*t,o=8*(t+1),a=c(this.filter,n),h=c(this.filter,o),l=a.hi^r|h.hi^s,f=a.lo^r|h.lo^s;a.hi&=l,a.lo&=f,h.hi&=l,h.lo&=f,a.hi=a.hi>>>0,a.lo=a.lo>>>0,h.hi=h.hi>>>0,h.lo=h.lo>>>0,u(this.filter,a,n),u(this.filter,h,o)}}this.entries+=1;for(let e=0;e<this.n;e++){var d=63&(g=this.hash(t,e)),p=8*(-2&(g=(g>>>6)%this.items)),g=8*(1|g),m=d%8;d=(d-m)/8;this.filter[p+d]&=~(1<<m),this.filter[p+d]|=(1&this.generation)<<m,this.filter[g+d]&=~(1<<m),this.filter[g+d]|=this.generation>>>1<<m}}test(t,i){if(0===this.entries)return!1;"string"==typeof t&&(t=e.from(t,i));for(let e=0;e<this.n;e++){var r=63&(s=this.hash(t,e)),s=(s>>>6)%this.items,n=r%8;r=(r-n)/8;if(0==(this.filter[8*(-2&s)+r]>>>n&1|this.filter[8*(1|s)+r]>>>n&1))return!1}return!0}added(t,i){return"string"==typeof t&&(t=e.from(t,i)),!this.test(t)&&(this.add(t),!0)}}}).call(this,i(0).Buffer)},function(t,e,i){(function(e){var r=i(28);const s=i(6),n=i(4),o=i(8);class a extends r{constructor(t,e){super(),this.db=t||{setEn:()=>{},delEn:()=>{},loadCpEnList:()=>{}},this.options=e,this.rank={}}async loadHistory(){this.clear();let t=[];for(var e of t="cp"===this.options.type?await this.db.loadCpEnList():t)this.rank[e.to]||(this.rank[e.to]=[]),-1==this.rank[e.to].indexOf(e.from)&&this.rank[e.to].push(e.from)}async setEn(t){t&&t.to&&t.from&&(t=new h(t),"cp"===this.options.type&&await this.db.setCpEn(t),this.rank[t.to]||(this.rank[t.to]=[]),-1==this.rank[t.to].indexOf(t.from))&&this.rank[t.to].push(t.from)}async delEn(t){var e;t&&t.to&&t.from&&("cp"===this.options.type&&await this.db.delCpEn(t),this.rank[t.to])&&-1!=(e=this.rank[t.to].indexOf(t.from))&&this.rank[t.to].splice(e,1)}}class h{constructor(t){this.fromOptions(t=t||{})}fromOptions(t){this.oper=t.oper,this.to=t.to,this.from=t.from,this.enchanceHeight=t.enchanceHeight,this.enchanceTx=t.enchanceTx,this.signature=t.signature}toOptions(t){var e={};return e.oper=this.oper,e.to=this.to,e.from=this.from,e.enchanceHeight=this.enchanceHeight,"string"==typeof this.enchanceTx&&(e.enchanceTx=this.enchanceTx),t&&(e.signature=this.signature),e}getSignObjSize(){let t=0;return t=(t=(t+=n.sizeVarString(this.oper,"utf8"))+n.sizeVarString(this.to,"utf8"))+n.sizeVarString(this.from,"utf8")+4,"string"==typeof this.enchanceTx&&(t+=n.sizeVarString(this.enchanceTx,"utf8")),t}toWriter(t,e){return e.writeVarString(this.oper,"utf8"),e.writeVarString(this.to,"utf8"),e.writeVarString(this.from,"utf8"),e.writeU32(this.enchanceHeight),"string"==typeof this.enchanceTx&&e.writeVarString(this.enchanceTx,"utf8"),e}toHash(){var t=this.toOptions();return o.hash256(this.toWriter(t,new s(this.getSignObjSize(t))).render())}toRaw(){return e.from(JSON.stringify(this.toOptions(!0)),"utf-8")}fromRaw(t){return t=JSON.parse(t.toString("utf8")),this.fromOptions(t),this}static fromRaw(t){return(new h).fromRaw(t)}sign(t){this.signature=t.sign(this.toHash()).toString("hex")}verifying(t){return t.verify(this.toHash(),e.from(this.signature,"hex"))}}a.EnchancementItem=h,t.exports=a}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * plugin.js - contract plugin for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(429);(i=e).id="contractdb",i.init=function(t){return new r({network:t.network,logger:t.logger,workers:t.workers,client:t.conn_s2local,prefix:t.config.prefix,coinCache:t.config.uint("coin-cache"),db:"leveldb",eid:"contractdb",checkpoints:!1,spv:t.spv,verify:t.spv,listen:!1})}},function(t,e,i){"use strict";(function(e,r){
/*!
 * workerpool.js - worker processes for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const s=i(1);var n=i(14);const o=i(209),a=i(3),h=i(36),c=i(18),u=i(505),l=i(144),f=i(216),d=i(217),p=i(107);var{}=i(7);class g extends n{constructor(t){super(),this.id=-1,this.framer=new d,this.parser=new f,this.pending=new Map,this.child=new u(t),this.init()}init(){this.child.on("data",t=>{this.parser.feed(t)}),this.child.on("exit",(t,e)=>{this.emit("exit",t,e)}),this.child.on("error",t=>{this.emit("error",t)}),this.parser.on("error",t=>{this.emit("error",t)}),this.parser.on("packet",t=>{this.emit("packet",t)}),this.listen()}listen(){this.on("exit",(t,e)=>{this.killJobs()}),this.on("error",t=>{this.killJobs()}),this.on("packet",t=>{try{t.workerHandle(this)}catch(t){this.emit("error",t)}}),this.sendEnv({GAMEGOLD_WORKER_NETWORK:c.type,GAMEGOLD_WORKER_ISTTY:r.stdout&&r.stdout.isTTY?"1":"0"})}write(t){return this.child.write(t)}send(t){return this.write(this.framer.packet(t))}sendEnv(t){return this.send(new p.EnvPacket(t))}sendEvent(...t){return this.send(new p.EventPacket(t))}destroy(){return this.child.destroy()}execute(t,e){return new Promise((i,r)=>{this._execute(t,e,i,r)})}_execute(t,e,i,r){i=new m(this,t.id,i,r),s(!this.pending.has(t.id),"ID overflow."),this.pending.set(t.id,i),i.start(e),this.send(t)}resolveJob(t,e){var i=this.pending.get(t);if(!i)throw new Error(`Job ${t} is not in progress.`);i.resolve(e)}rejectJob(t,e){var i=this.pending.get(t);if(!i)throw new Error(`Job ${t} is not in progress.`);i.reject(e)}killJobs(){for(const t of this.pending.values())t.destroy()}}class m{constructor(t,e,i,r){this.worker=t,this.id=e,this.job=h.job(i,r),this.timer=null}start(t){!t||t<=0||(this.timer=setTimeout(()=>{this.reject(new Error("Worker timed out."))},t))}destroy(){this.reject(new Error("Job was destroyed."))}cleanup(){var t=this.job;return s(t,"Already finished."),(this.job=null)!=this.timer&&(clearTimeout(this.timer),this.timer=null),s(this.worker.pending.has(this.id)),this.worker.pending.delete(this.id),t}resolve(t){this.cleanup().resolve(t)}reject(t){this.cleanup().reject(t)}}t.exports=class extends n{constructor(t){super(),this.enabled=!1,this.size=Math.max(2,o.cpus().length),this.timeout=12e4,this.file="./gamegold-worker.js",this.children=new Map,this.uid=0,this.set(t)}set(t){t&&(null!=t.enabled&&(s("boolean"==typeof t.enabled),this.enabled=t.enabled),null!=t.size&&(s(a.isU32(t.size)),s(0<t.size),this.size=t.size),null!=t.timeout&&(s(a.isInt(t.timeout)),s(-1<=t.timeout),this.timeout=t.timeout),null!=t.file)&&(s("string"==typeof t.file),this.file=t.file)}async open(){}async close(){this.destroy()}spawn(t){const e=new g(this.file);return e.id=t,e.on("error",t=>{this.emit("error",t,e)}),e.on("exit",i=>{this.emit("exit",i,e),this.children.get(t)===e&&this.children.delete(t)}),e.on("event",t=>{this.emit("event",t,e),this.emit(...t)}),e.on("log",t=>{this.emit("log",t,e)}),this.emit("spawn",e),e}alloc(){var t=this.uid++%this.size;return this.children.has(t)||this.children.set(t,this.spawn(t)),this.children.get(t)}sendEvent(){let t=!0;for(const e of this.children.values())e.sendEvent.apply(e,arguments)||(t=!1);return t}destroy(){for(const t of this.children.values())t.destroy()}execute(t,i){return this.enabled&&u.hasSupport()?(i=i||this.timeout,this.alloc().execute(t,i)):new Promise((i,r)=>{e(()=>{let e;try{e=l.handle(t)}catch(e){return void r(e)}i(e)})})}async check(t,e,i,r){if(t=new p.CheckPacket(t,e,i,r),(e=await this.execute(t,-1)).error)throw e.error;return null}async sign(t,e,i,r){let s=e;return Array.isArray(s)||(s=[s]),e=new p.SignPacket(t,s,i,r),(i=await this.execute(e,-1)).inject(t),i.total}async checkInput(t,e,i,r,s){if(t=new p.CheckInputPacket(t,e,i,r,s),(e=await this.execute(t,-1)).error)throw e.error;return null}async signInput(t,e,i,r,s){return e=new p.SignInputPacket(t,e,i,r,s),(i=await this.execute(e,-1)).inject(t),i.value}async ecVerify(t,e,i){return t=new p.ECVerifyPacket(t,e,i),(await this.execute(t,-1)).value}async ecSign(t,e){return t=new p.ECSignPacket(t,e),(await this.execute(t,-1)).sig}async mine(t,e,i,r){return t=new p.MinePacket(t,e,i,r),(await this.execute(t,-1)).nonce}async scrypt(t,e,i,r,s,n){return t=new p.ScryptPacket(t,e,i,r,s,n),(await this.execute(t,-1)).key}}}).call(this,i(78).setImmediate,i(11))},function(t,e,i){"use strict";(function(t){
/*!
 * scrypt.js - scrypt for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 *
 * Ported from:
 * https://github.com/Tarsnap/scrypt/blob/master/lib/crypto/crypto_scrypt-ref.c
 *
 * Copyright 2009 Colin Percival
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 */
const r=i(36),s=i(138);var n=i(57).binding;function o(e,i,r,n,o,a){if(1<<30<=n*o)throw new Error("EFBIG");if(0!=(r&r-1)||0===r)throw new Error("EINVAL");if(4294967295<r)throw new Error("EINVAL");var h=t.allocUnsafe(256*n),d=t.allocUnsafe(128*n*r),p=s.derive(e,i,1,128*o*n,"sha256");for(let t=0;t<o;t++){void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,_=void 0;var g=p,m=128*t*n,w=n,y=r,b=d,v=h,k=v,S=v;l(k,g,0,m,128*w);for(let t=0;t<y;t++)l(b,k,t*(128*w),0,128*w),c(k,S,128*w,w);for(let t=0;t<y;t++){var _=u(k,w)&y-1;f(k,b,0,128*w*_,128*w),c(k,S,128*w,w)}l(g,k,m,0,128*w)}return s.derive(e,p,1,a,"sha256")}async function a(e,i,n,o,a,h){if(1<<30<=o*a)throw new Error("EFBIG");if(0!=(n&n-1)||0===n)throw new Error("EINVAL");if(4294967295<n)throw new Error("EINVAL");var d=t.allocUnsafe(256*o),p=t.allocUnsafe(128*o*n),g=await s.deriveAsync(e,i,1,128*a*o,"sha256");for(let t=0;t<a;t++){void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,x=void 0;var m=g,w=128*t*o,y=o,b=n,v=p,k=d,S=k,_=k;l(S,m,0,w,128*y);for(let t=0;t<b;t++)l(v,S,t*(128*y),0,128*y),c(S,_,128*y,y),await r.wait();for(let t=0;t<b;t++){var x=u(S,y)&b-1;f(S,v,0,128*y*x,128*y),c(S,_,128*y,y),await r.wait()}l(m,S,w,0,128*y),await 0}return s.deriveAsync(e,g,1,h,"sha256")}function h(t,e){return t<<e|t>>>32-e}function c(e,i,r,s){var n=t.allocUnsafe(64);l(n,e,0,64*(2*s-1),64);for(let t=0;t<2*s;t++){f(n,e,0,64*t,64),c=a=o=void 0;var o=n,a=new Uint32Array(16),c=new Uint32Array(16);for(let t=0;t<16;t++)a[t]=o.readUInt32LE(4*t,!0);for(let t=0;t<16;t++)c[t]=a[t];for(let t=0;t<8;t+=2)c[4]^=h(c[0]+c[12],7),c[8]^=h(c[4]+c[0],9),c[12]^=h(c[8]+c[4],13),c[0]^=h(c[12]+c[8],18),c[9]^=h(c[5]+c[1],7),c[13]^=h(c[9]+c[5],9),c[1]^=h(c[13]+c[9],13),c[5]^=h(c[1]+c[13],18),c[14]^=h(c[10]+c[6],7),c[2]^=h(c[14]+c[10],9),c[6]^=h(c[2]+c[14],13),c[10]^=h(c[6]+c[2],18),c[3]^=h(c[15]+c[11],7),c[7]^=h(c[3]+c[15],9),c[11]^=h(c[7]+c[3],13),c[15]^=h(c[11]+c[7],18),c[1]^=h(c[0]+c[3],7),c[2]^=h(c[1]+c[0],9),c[3]^=h(c[2]+c[1],13),c[0]^=h(c[3]+c[2],18),c[6]^=h(c[5]+c[4],7),c[7]^=h(c[6]+c[5],9),c[4]^=h(c[7]+c[6],13),c[5]^=h(c[4]+c[7],18),c[11]^=h(c[10]+c[9],7),c[8]^=h(c[11]+c[10],9),c[9]^=h(c[8]+c[11],13),c[10]^=h(c[9]+c[8],18),c[12]^=h(c[15]+c[14],7),c[13]^=h(c[12]+c[15],9),c[14]^=h(c[13]+c[12],13),c[15]^=h(c[14]+c[13],18);for(let t=0;t<16;t++)a[t]+=c[t];for(let t=0;t<16;t++)o.writeUInt32LE(a[t],4*t,!0);l(i,n,r+64*t,0,64)}for(let t=0;t<s;t++)l(e,i,64*t,r+2*t*64,64);for(let t=0;t<s;t++)l(e,i,64*(t+s),r+64*(2*t+1),64)}function u(t,e){return t.readUInt32LE(64*(2*e-1),!0)}function l(t,e,i,r,s){e.copy(t,i,r,r+s)}function f(t,e,i,r,s){for(let n=0;n<s;n++)t[i+n]^=e[r+n]}n&&(o=n.scrypt),n&&(a=n.scryptAsync),e.derive=o,e.deriveAsync=a}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * Parser.js - worker parser
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1);var s=i(14);const n=i(107);function o(t,e,i){this.id=t,this.cmd=e,this.size=i}t.exports=class extends s{constructor(){super(),this.waiting=9,this.header=null,this.pending=[],this.total=0}feed(t){if(t&&"number"==typeof t.length)for(this.total+=t.length,this.pending.push(t);this.total>=this.waiting;){var e=this.read(this.waiting);this.parse(e)}}read(t){if(r(this.total>=t,"Reading too much."),0===t)return e.alloc(0);const i=this.pending[0];if(i.length>t){const e=i.slice(0,t);return this.pending[0]=i.slice(t),this.total-=e.length,e}if(i.length===t){const t=this.pending.shift();return this.total-=t.length,t}const s=e.allocUnsafe(t);let n=0;for(;n<s.length;){const t=this.pending[0];var o=t.copy(s,n);o===t.length?this.pending.shift():this.pending[0]=t.slice(o),n+=o}return r.strictEqual(n,s.length),this.total-=s.length,s}parse(t){let e=this.header;if(e){let i;this.waiting=9,this.header=null;try{i=n.parsePacket(e,t)}catch(t){return void this.emit("error",t)}10!==t[t.length-1]?this.emit("error",new Error("No trailing newline.")):(i.id=e.id,this.emit("packet",i))}else{try{e=this.parseHeader(t)}catch(t){return void this.emit("error",t)}this.header=e,this.waiting=e.size+1}}parseHeader(t){return new o(t.readUInt32LE(0,!0),t.readUInt8(4,!0),t.readUInt32LE(5,!0))}}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * framer.js - workers framer
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */const r=i(6);function s(){if(!(this instanceof s))return new s}s.prototype.packet=function(t){var e=10+t.getSize();return(t=((e=new r(e)).writeU32(t.id),e.writeU8(t.cmd),e.seek(4),t.toWriter(e),e.writeU8(10),e.render())).writeUInt32LE(t.length-10,5,!0),t},t.exports=s},function(t,e,i){const r=i(1);e.NONCE_SIZE=4,e.SHARES_PER_MINUTE=8,e.ACTIVE_TIME=60,e.BAN_SCORE=1e3,e.MAX_JOBS=6,e.BAN_TIME=600,e.isJob=function(t){return"string"==typeof t&&12<=t.length&&t.length<=21},e.isSID=function(t){return"string"==typeof t&&8===t.length&&e.isHex(t)},e.isUsername=function(t){return"string"==typeof t&&0<t.length&&t.length<=100},e.isPassword=function(t){return"string"==typeof t&&0<t.length&&t.length<=255},e.isAgent=function(t){return"string"==typeof t&&0<t.length&&t.length<=255},e.isHex=function(t){return"string"==typeof t&&t.length%2==0&&/^[0-9a-f]+$/i.test(t)},e.hex32=function(t){switch(r(t>>>0===t),(t=t.toString(16)).length){case 1:return"0000000"+t;case 2:return"000000"+t;case 3:return"00000"+t;case 4:return"0000"+t;case 5:return"000"+t;case 6:return"00"+t;case 7:return"0"+t;case 8:return""+t;default:throw new Error}}},function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var r=i(110),s=(e=i(82),i(83));class n extends Error{constructor(t,e,i){super(t),this.description=e,this.context=i,this.type="TransportError"}}class o extends e.a{constructor(t){super(),this.writable=!1,Object(s.b)(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e,i){return super.emitReserved("error",new n(t,e,i)),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){t=Object(r.a)(t,this.socket.binaryType),this.onPacket(t)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}}},function(t,e,i){"use strict";function r(t){let e="";for(var i in t)t.hasOwnProperty(i)&&(e.length&&(e+="&"),e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e}function s(t){var e={},i=t.split("&");for(let t=0,s=i.length;t<s;t++){var r=i[t].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}i.d(e,"b",(function(){return r})),i.d(e,"a",(function(){return s}))},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,e,i){"use strict";var r=i(39).rotr32;function s(t,e,i){return t&e^~t&i}function n(t,e,i){return t&e^t&i^e&i}e.ft_1=function(t,e,i,r){return 0===t?s(e,i,r):1===t||3===t?e^i^r:2===t?n(e,i,r):void 0},e.ch32=s,e.maj32=n,e.p32=function(t,e,i){return t^e^i},e.s0_256=function(t){return r(t,2)^r(t,13)^r(t,22)},e.s1_256=function(t){return r(t,6)^r(t,11)^r(t,25)},e.g0_256=function(t){return r(t,7)^r(t,18)^t>>>3},e.g1_256=function(t){return r(t,17)^r(t,19)^t>>>10}},function(t,e,i){"use strict";var r=i(39),s=i(86),n=i(222),o=i(33),a=r.sum32,h=r.sum32_4,c=r.sum32_5,u=n.ch32,l=n.maj32,f=n.s0_256,d=n.s1_256,p=n.g0_256,g=n.g1_256,m=s.BlockHash,w=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;m.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=w,this.W=new Array(64)}r.inherits(y,m),(t.exports=y).blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(t,e){for(var i=this.W,r=0;r<16;r++)i[r]=t[e+r];for(;r<i.length;r++)i[r]=h(g(i[r-2]),i[r-7],p(i[r-15]),i[r-16]);var s=this.h[0],n=this.h[1],m=this.h[2],w=this.h[3],y=this.h[4],b=this.h[5],v=this.h[6],k=this.h[7];for(o(this.k.length===i.length),r=0;r<i.length;r++){var S=c(k,d(y),u(y,b,v),this.k[r],i[r]),_=a(f(s),l(s,n,m));k=v,v=b,b=y,y=a(w,S),w=m,m=n,n=s,s=a(S,_)}this.h[0]=a(this.h[0],s),this.h[1]=a(this.h[1],n),this.h[2]=a(this.h[2],m),this.h[3]=a(this.h[3],w),this.h[4]=a(this.h[4],y),this.h[5]=a(this.h[5],b),this.h[6]=a(this.h[6],v),this.h[7]=a(this.h[7],k)},y.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(t,e,i){"use strict";var r=i(39),s=i(86),n=i(33),o=r.rotr64_hi,a=r.rotr64_lo,h=r.shr64_hi,c=r.shr64_lo,u=r.sum64,l=r.sum64_hi,f=r.sum64_lo,d=r.sum64_4_hi,p=r.sum64_4_lo,g=r.sum64_5_hi,m=r.sum64_5_lo,w=s.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;w.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}r.inherits(b,w),(t.exports=b).blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(t,e){for(var i=this.W,r=0;r<32;r++)i[r]=t[e+r];for(;r<i.length;r+=2){var s=function(t,e){return(e=o(t,e,19)^o(e,t,29)^(t=h(t,e,6)))<0&&(e+=4294967296),e}(i[r-4],i[r-3]),n=function(t,e){return(e=a(t,e,19)^a(e,t,29)^(t=c(t,e,6)))<0&&(e+=4294967296),e}(i[r-4],i[r-3]),u=i[r-14],l=i[r-13],f=function(t,e){return(e=o(t,e,1)^o(t,e,8)^(t=h(t,e,7)))<0&&(e+=4294967296),e}(i[r-30],i[r-29]),g=function(t,e){return(e=a(t,e,1)^a(t,e,8)^(t=c(t,e,7)))<0&&(e+=4294967296),e}(i[r-30],i[r-29]),m=i[r-32],w=i[r-31];i[r]=d(s,n,u,l,f,g,m,w),i[r+1]=p(s,n,u,l,f,g,m,w)}},b.prototype._update=function(t,e){this._prepareBlock(t,e);var i=this.W,r=this.h[0],s=this.h[1],h=this.h[2],c=this.h[3],d=this.h[4],p=this.h[5],w=this.h[6],y=this.h[7],b=this.h[8],v=this.h[9],k=this.h[10],S=this.h[11],_=this.h[12],x=this.h[13],R=this.h[14],E=this.h[15];n(this.k.length===i.length);for(var A=0;A<i.length;A+=2){var M=R,O=E,I=function(t,e){return(t=o(t,e,14)^o(t,e,18)^(e=o(e,t,9)))<0&&(t+=4294967296),t}(b,v),C=function(t,e){return(t=a(t,e,14)^a(t,e,18)^(e=a(e,t,9)))<0&&(t+=4294967296),t}(b,v),T=function(t,e,i){return(e=t&e^~t&i)<0&&(e+=4294967296),e}(b,k,_),P=function(t,e,i){return(e=t&e^~t&i)<0&&(e+=4294967296),e}(v,S,x),B=this.k[A],N=this.k[A+1],L=i[A],H=i[A+1],U=g(M,O,I,C,T,P,B,N,L,H);T=m(M,O,I,C,T,P,B,N,L,H),M=function(t,e){return(t=o(t,e,28)^o(e,t,2)^(e=o(e,t,7)))<0&&(t+=4294967296),t}(r,s),O=function(t,e){return(t=a(t,e,28)^a(e,t,2)^(e=a(e,t,7)))<0&&(t+=4294967296),t}(r,s),I=function(t,e,i){return(t=t&e^t&i^e&i)<0&&(t+=4294967296),t}(r,h,d),C=function(t,e,i){return(t=t&e^t&i^e&i)<0&&(t+=4294967296),t}(s,c,p),P=l(M,O,I,C),B=f(M,O,I,C),R=_,E=x,_=k,x=S,k=b,S=v,b=l(w,y,U,T),v=f(y,y,U,T),w=d,y=p,d=h,p=c,h=r,c=s,r=l(U,T,P,B),s=f(U,T,P,B)}u(this.h,0,r,s),u(this.h,2,h,c),u(this.h,4,d,p),u(this.h,6,w,y),u(this.h,8,b,v),u(this.h,10,k,S),u(this.h,12,_,x),u(this.h,14,R,E)},b.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(t,e,i){"use strict";
/*!
 * timedata.js - time management for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */const r=i(14),s=i(3);function n(t){if(!(this instanceof n))return new n(t);r.call(this),null==t&&(t=200),this.samples=[],this.known=new Map,this.limit=t,this.offset=0,this.checked=!1}function o(t,e){return t-e}Object.setPrototypeOf(n.prototype,r.prototype),n.prototype.add=function(t,e){if(!(this.samples.length>=this.limit||this.known.has(t))&&(e-=s.now(),this.known.set(t,e),s.binaryInsert(this.samples,e,o),this.emit("sample",e,this.samples.length),5<=this.samples.length&&this.samples.length%2==1)){let t=this.samples[this.samples.length>>>1];if(4200<=Math.abs(t)){if(!this.checked){let t=!1;for(const e of this.samples)if(0!==e&&Math.abs(e)<300){t=!0;break}t||(this.checked=!0,this.emit("mismatch"))}t=0}this.offset=t,this.emit("offset",this.offset)}},n.prototype.now=function(){return s.now()+this.offset},n.prototype.adjust=function(t){return t+this.offset},n.prototype.local=function(t){return t-this.offset},n.prototype.ms=function(){return s.ms()+1e3*this.offset},t.exports=n},function(t,e,i){"use strict";(function(t){
/*!
 * bech32.js - bech32 for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 *
 * Parts of this software are based on "bech32".
 * https://github.com/sipa/bech32
 *
 * Copyright (c) 2017 Pieter Wuille
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var r=i(57).binding;const s=t.allocUnsafe(65),n="qpzry9x8gf2tvdw0s3jn54khce6mua7l",o=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,15,-1,10,17,21,20,26,30,7,5,-1,-1,-1,-1,-1,-1,-1,29,-1,24,13,25,9,8,23,-1,18,22,31,27,19,-1,1,0,3,16,11,28,12,14,6,4,2,-1,-1,-1,-1,-1,-1,29,-1,24,13,25,9,8,23,-1,18,22,31,27,19,-1,1,0,3,16,11,28,12,14,6,4,2,-1,-1,-1,-1,-1];function a(t){var e=t>>>25;return(33554431&t)<<5^996825010&-(e>>0&1)^642813549&-(e>>1&1)^513874426&-(e>>2&1)^1027748829&-(e>>3&1)^705979059&-(e>>4&1)}function h(t,e){let i,r=1;for(i=0;i<t.length;i++){var s=t.charCodeAt(i);if(s>>5==0)throw new Error("Invalid bech32 character.");r=a(r)^s>>5}if(90<i+7+e.length)throw new Error("Invalid bech32 data length.");r=a(r);let o="";for(let e=0;e<t.length;e++){var h=t.charCodeAt(e);r=a(r)^31&h,o+=t[e]}o+="1";for(let t=0;t<e.length;t++){var c=e[t];if(c>>5!=0)throw new Error("Invalid bech32 value.");r=a(r)^c,o+=n[c]}for(let t=0;t<6;t++)r=a(r);r^=1;for(let t=0;t<6;t++)o+=n[r>>>5*(5-t)&31];return o}function c(e){let i=0;if(e.length<8||90<e.length)throw new Error("Invalid bech32 string length.");for(;i<e.length&&"1"!==e[e.length-1-i];)i++;var r=e.length-(1+i);if(r<1||i<6)throw new Error("Invalid bech32 data length.");i-=6;var s=t.allocUnsafe(i);let n,h=1,c=!1,u=!1,l="";for(let t=0;t<r;t++){let i=e.charCodeAt(t);if(i<33||126<i)throw new Error("Invalid bech32 character.");97<=i&&i<=122?c=!0:65<=i&&i<=90&&(u=!0,i=i-65+97),l+=String.fromCharCode(i),h=a(h)^i>>5}for(h=a(h),n=0;n<r;n++)h=a(h)^31&e.charCodeAt(n);for(n++;n<e.length;){var f=e.charCodeAt(n),d=128&f?-1:o[f];if(97<=f&&f<=122?c=!0:65<=f&&f<=90&&(u=!0),-1===d)throw new Error("Invalid bech32 character.");h=a(h)^d,n+6<e.length&&(s[n-(1+r)]=d),n++}if(c&&u)throw new Error("Invalid bech32 casing.");if(1!==h)throw new Error("Invalid bech32 checksum.");return[l,s.slice(0,i)]}function u(t,e,i,r,s,n){var o=(1<<r)-1;let a=0,h=0,c=0;-1!==s&&(e[c++]=s);for(let s=n;s<t.length;s++){var u=t[s];if(u>>i!=0)throw new Error("Invalid bech32 bits.");for(a=a<<i|u,h+=i;h>=r;)h-=r,e[c++]=a>>>h&o}if(-1!==s)0<h&&(e[c++]=a<<r-h&o);else if(h>=i||a<<r-h&o)throw new Error("Invalid bech32 bits.");return e.slice(0,c)}function l(t,e,i){var r=s;if(e<0||16<e)throw new Error("Invalid bech32 version.");if(i.length<2||40<i.length)throw new Error("Invalid bech32 data length.");return h(t,u(i,r,8,5,e,0))}function f(t){var[t,e]=c(t);if(0===e.length||65<e.length)throw new Error("Invalid bech32 data length.");if(16<e[0])throw new Error("Invalid bech32 version.");var e,i=e[0];if((e=u(e,e,5,8,-1,1)).length<2||40<e.length)throw new Error("Invalid bech32 data length.");return new d(t,i,e)}function d(t,e,i){this.hrp=t,this.version=e,this.hash=i}r&&(l=r.toBech32),r&&(f=r.fromBech32),e.deserialize=c,e.serialize=h,e.convert=u,e.encode=l,e.decode=f}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * program.js - program object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(3),n=i(22),o=n.types;t.exports=class{constructor(t,i){r(s.isU8(t)),r(0<=t&&t<=16),r(e.isBuffer(i)),r(2<=i.length&&i.length<=40),this.version=t,this.data=i}getType(){return 0===this.version?20===this.data.length?o.WITNESSPUBKEYHASH:32===this.data.length?o.WITNESSSCRIPTHASH:o.WITNESSMALFORMED:1===this.version?32===this.data.length?o.WITNESSMASTHASH:o.WITNESSMALFORMED:o.NONSTANDARD}isUnknown(){var t=this.getType();return t===o.WITNESSMALFORMED||t===o.NONSTANDARD}isMalformed(){return this.getType()===o.WITNESSMALFORMED}inspect(){var t=this.data.toString("hex"),e=n.typesByVal[this.getType()].toLowerCase();return`<Program: version=${this.version} data=${t} type=${e}>`}}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";function r(t){return 1===t.length?"0"+t:t}function s(t){for(var e="",i=0;i<t.length;i++)e+=r(t[i].toString(16));return e}e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var i=[];if("string"!=typeof t)for(var r=0;r<t.length;r++)i[r]=0|t[r];else if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),r=0;r<t.length;r+=2)i.push(parseInt(t[r]+t[r+1],16));else for(r=0;r<t.length;r++){var s=(n=t.charCodeAt(r))>>8,n=255&n;s?i.push(s,n):i.push(n)}return i},e.zero2=r,e.toHex=s,e.encode=function(t,e){return"hex"===e?s(t):t}},function(t,e,i){"use strict";e.base=i(113),e.short=i(364),e.mont=i(365),e.edwards=i(366)},function(t,e,i){"use strict";
/*!
 * undocoins.js - undocoins object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */const r=i(1),s=i(2),n=i(6),o=i(135);function a(){if(!(this instanceof a))return new a;this.items=[]}a.prototype.push=function(t){return this.items.push(t)},a.prototype.getSize=function(){let t=0;t+=4;for(const e of this.items)t+=e.getSize();return t},a.prototype.toRaw=function(){var t=this.getSize(),e=new n(t);e.writeU32(this.items.length);for(const t of this.items)t.toWriter(e);return e.render()},a.prototype.fromRaw=function(t){var e=new s(t),i=e.readU32();for(let t=0;t<i;t++)this.items.push(o.fromReader(e));return this},a.fromRaw=function(t){return(new a).fromRaw(t)},a.prototype.isEmpty=function(){return 0===this.items.length},a.prototype.commit=function(){var t=this.toRaw();return this.items.length=0,t},a.prototype.apply=function(t,e){var i=this.items.pop();r(i),t.addEntry(e,i)},t.exports=a},function(t,e,i){"use strict";(function(t){
/*!
 * asn1.js - asn1 parsing for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 *
 * Parts of this software are based on asn1.js.
 * https://github.com/indutny/asn1.js
 *
 * Copyright Fedor Indutny, 2013.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 */
const r=i(2),s=e;s.readTag=function(t){let e=t.readU8();var i=0==(32&e);if(31==(31&e)){let i=e;for(e=0;128==(128&i);)i=t.readU8(),e=(e<<=7)|127&i}else e&=31;return{type:e,primitive:i,size:s.readSize(t,i)}},s.readSize=function(t,e){let i=t.readU8();if(!e&&128===i)throw new Error("Indefinite size.");if(0!=(128&i)){var r=127&i;if(3<r)throw new Error("Length octet is too long.");for(let e=i=0;e<r;e++)i=(i<<=8)|t.readU8()}return i},s.readSeq=function(t){var e=s.implicit(t,16);return t.readBytes(e.size)},s.implicit=function(t,e){if((t=s.readTag(t)).type!==e)throw new Error(`Unexpected tag: ${t.type}.`);return t},s.explicit=function(t,e){var i=t.offset;return s.readTag(t).type===e||(t.offset=i,!1)},s.seq=function(t){return new r(s.readSeq(t),!0)},s.readInt=function(t,e){var i=s.implicit(t,2);t=t.readBytes(i.size);return e?t.readUIntBE(0,t.length):t},s.readExplicitInt=function(t,e,i){return s.explicit(t,e)?s.readInt(t,i):-1},s.readBitstr=function(t){var e=s.implicit(t,3);t=t.readBytes(e.size);return s.alignBitstr(t)},s.readString=function(t){var e=s.readTag(t);switch(e.type){case 3:var i=t.readBytes(e.size);return s.alignBitstr(i).toString("utf8");case 4:case 18:case 19:case 20:case 21:case 22:case 25:case 12:case 26:case 27:case 28:case 29:case 30:return t.readString("utf8",e.size);default:throw new Error(`Unexpected tag: ${e.type}.`)}},s.alignBitstr=function(e){var i=e[0],r=(i=8*(e.length-1)-i,e.slice(1)),s=8-i%8;if(8==s||0===r.length)return r;var n=t.allocUnsafe(r.length);n[0]=r[0]>>>s;for(let t=1;t<r.length;t++)n[t]=r[t-1]<<8-s,n[t]|=r[t]>>>s;return n},s.readCert=function(t){var e=t;return e.start(),t=s.seq(e),{tbs:s.readTBS(t),sigAlg:s.readAlgIdent(t),sig:s.readBitstr(t),raw:e.endData(!0)}},s.readTBS=function(t){var e=t;return e.start(),t=s.seq(e),{version:s.readExplicitInt(t,0,!0),serial:s.readInt(t),sig:s.readAlgIdent(t),issuer:s.readName(t),validity:s.readValidity(t),subject:s.readName(t),pubkey:s.readPubkey(t),raw:e.endData(!0)}},s.readPubkey=function(t){return t=s.seq(t),{alg:s.readAlgIdent(t),pubkey:s.readBitstr(t)}},s.readName=function(t){var e=[];for(t=s.seq(t);t.left();)s.implicit(t,17),s.implicit(t,16),e.push({type:s.readOID(t),value:s.readString(t)});return e},s.readValidity=function(t){return t=s.seq(t),{notBefore:s.readTime(t),notAfter:s.readTime(t)}},s.readTime=function(t){var e=s.readTag(t),i=t.readString("ascii",e.size);let r,n,o,a,h,c;switch(e.type){case 23:r=0|i.slice(0,2),n=0|i.slice(2,4),o=0|i.slice(4,6),a=0|i.slice(6,8),h=0|i.slice(8,10),c=0|i.slice(10,12),r=r<70?2e3+r:1900+r;break;case 24:r=0|i.slice(0,4),n=0|i.slice(4,6),o=0|i.slice(6,8),a=0|i.slice(8,10),h=0|i.slice(10,12),c=0|i.slice(12,14);break;default:throw new Error(`Unexpected tag: ${e.type}.`)}return Date.UTC(r,n-1,o,a,h,c,0)/1e3},s.readOID=function(t){var e=s.implicit(t,6);t=t.readBytes(e.size);return s.formatOID(t)},s.formatOID=function(t){var e=new r(t),i=[];let s=0,n=0;for(;e.left();)n=e.readU8(),s=(s<<=7)|127&n,0==(128&n)&&(i.push(s),s=0);return 128&n&&i.push(s),[i[0]/40|0,i[0]%40].concat(i.slice(1)).join(".")},s.readAlgIdent=function(t){let e=null;var i;return t=s.seq(t),{alg:s.readOID(t),params:e=0<t.left()&&(i=s.readTag(t),0===(e=t.readBytes(i.size)).length)?null:e}},s.readRSAPublic=function(t){return t=s.seq(t),{modulus:s.readInt(t),publicExponent:s.readInt(t)}},s.readRSAPrivate=function(t){return t=s.seq(t),{version:s.readInt(t,!0),modulus:s.readInt(t),publicExponent:s.readInt(t),privateExponent:s.readInt(t),prime1:s.readInt(t),prime2:s.readInt(t),exponent1:s.readInt(t),exponent2:s.readInt(t),coefficient:s.readInt(t)}},s.parseRSAPublic=function(t){return s.readRSAPublic(new r(t,!0))},s.parseRSAPrivate=function(t){return s.readRSAPrivate(new r(t,!0))},s.parseCert=function(t){return s.readCert(new r(t,!0))},s.parseTBS=function(t){return s.readTBS(new r(t,!0))}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(t){
/*!
 * pem.js - pem parsing for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=e;s.parse=function(e){var i=[];let s,n="";for(;e.length;){var o=/^-----BEGIN ([^\-]+)-----/.exec(e);if(o)e=e.substring(o[0].length),s=o[1];else if(o=/^-----END ([^\-]+)-----/.exec(e)){e=e.substring(o[0].length),r(s===o[1],"Tag mismatch.");var a=s.split(" ")[0].toLowerCase(),h=t.from(n,"base64");i.push({tag:s,type:a,data:h}),n="",s=null}else if(o=/^[a-zA-Z0-9\+=\/]+/.exec(e))e=e.substring(o[0].length),n+=o[0];else{if(!(o=/^\s+/.exec(e)))throw new Error("PEM parse error.");e=e.substring(o[0].length)}}return r(0!==i.length,"PEM parse error."),r(!s,"Un-ended tag."),r(0===n.length,"Trailing data."),i},s.decode=function(t){var e=(t=s.parse(t))[0];let i=null,r=((t=t[1])&&-1!==t.tag.indexOf("PARAMETERS")&&(i=t.data),null);switch(e.type){case"dsa":r="dsa";break;case"rsa":r="rsa";break;case"ec":r="ecdsa"}return{type:e.type,alg:r,data:e.data,params:i}},s.encode=function(t,e,i){let r="";i&&(e+=" "+i),e=e.toUpperCase(),t=t.toString("base64");for(let e=0;e<t.length;e+=64)r+=t.slice(e,e+64)+"\n";return`-----BEGIN ${e}-----\n`+r+`-----END ${e}-----\n`}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e,r){function s(t,e){return t.listeners(e).length}(t.exports=_).ReadableState=S,i(14).EventEmitter;var n,o,a,h,c=i(234),u=i(0).Buffer,l=e.Uint8Array||function(){},f=(e=i(379))&&e.debuglog?e.debuglog("stream"):function(){},d=i(380),p=(e=i(235),i(236).getHighWaterMark),g=i(69).codes,m=g.ERR_INVALID_ARG_TYPE,w=g.ERR_STREAM_PUSH_AFTER_EOF,y=g.ERR_METHOD_NOT_IMPLEMENTED,b=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,v=(i(5)(_,c),e.errorOrDestroy),k=["error","close","destroy","pause","resume"];function S(t,e,r){n=n||i(70),t=t||{},"boolean"!=typeof r&&(r=e instanceof n),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=p(this,t,"readableHighWaterMark",r),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(o=o||i(44).StringDecoder,this.decoder=new o(t.encoding),this.encoding=t.encoding)}function _(t){if(n=n||i(70),!(this instanceof _))return new _(t);var e=this instanceof n;this._readableState=new S(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy)&&(this._destroy=t.destroy),c.call(this)}function x(t,e,i,r,s){f("readableAddChunk",e);var n,o,a,h,c=t._readableState;if(null===e)c.reading=!1,o=t,a=c,f("onEofChunk"),a.ended||(a.decoder&&(h=a.decoder.end())&&h.length&&(a.buffer.push(h),a.length+=a.objectMode?1:h.length),a.ended=!0,a.sync?M(o):(a.needReadable=!1,a.emittedReadable||(a.emittedReadable=!0,O(o))));else if(n=s?n:function(t,e){var i;return!function(t){return u.isBuffer(t)||t instanceof l}(e)&&"string"!=typeof e&&void 0!==e&&!t.objectMode&&(i=new m("chunk",["string","Buffer","Uint8Array"],e)),i}(c,e))v(t,n);else if(c.objectMode||e&&0<e.length)if("string"==typeof e||c.objectMode||Object.getPrototypeOf(e)===u.prototype||(h=e,e=u.from(h)),r)c.endEmitted?v(t,new b):R(t,c,e,!0);else if(c.ended)v(t,new w);else{if(c.destroyed)return!1;c.reading=!1,!c.decoder||i||(e=c.decoder.write(e),c.objectMode)||0!==e.length?R(t,c,e,!1):I(t,c)}else r||(c.reading=!1,I(t,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function R(t,e,i,r){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",i)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&M(t)),I(t,e)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),_.prototype.destroy=e.destroy,_.prototype._undestroy=e.undestroy,_.prototype._destroy=function(t,e){e(t)},_.prototype.push=function(t,e){var i,r=this._readableState;return r.objectMode?i=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=u.from(t,e),e=""),i=!0),x(this,t,e,!1,i)},_.prototype.unshift=function(t){return x(this,t,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(t){for(var e=new(o=o||i(44).StringDecoder)(t),r=(this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding,this._readableState.buffer.head),s="";null!==r;)s+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==s&&this._readableState.buffer.push(s),this._readableState.length=s.length,this};var E=1073741824;function A(t,e){var i;return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?(e.flowing&&e.length?e.buffer.head.data:e).length:(t>e.highWaterMark&&(e.highWaterMark=(E<=(i=t)?i=E:(i--,i=(i=(i=(i=(i|=i>>>1)|i>>>2)|i>>>4)|i>>>8)|i>>>16,i++),i)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function M(t){var e=t._readableState;f("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(f("emitReadable",e.flowing),e.emittedReadable=!0,r.nextTick(O,t))}function O(t){var e=t._readableState;f("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,N(t)}function I(t,e){e.readingMore||(e.readingMore=!0,r.nextTick(C,t,e))}function C(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var i=e.length;if(f("maybeReadMore read 0"),t.read(0),i===e.length)break}e.readingMore=!1}function T(t){var e=t._readableState;e.readableListening=0<t.listenerCount("readable"),e.resumeScheduled&&!e.paused?e.flowing=!0:0<t.listenerCount("data")&&t.resume()}function P(t){f("readable nexttick read 0"),t.read(0)}function B(t,e){f("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),N(t),e.flowing&&!e.reading&&t.read(0)}function N(t){var e=t._readableState;for(f("flow",e.flowing);e.flowing&&null!==t.read(););}function L(t,e){var i;return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):i=e.buffer.consume(t,e.decoder),i)}function H(t){var e=t._readableState;f("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,r.nextTick(U,e,t))}function U(t,e){f("endReadableNT",t.endEmitted,t.length),t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy&&(!(t=e._writableState)||t.autoDestroy&&t.finished)&&e.destroy())}function D(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}_.prototype.read=function(t){f("read",t),t=parseInt(t,10);var e,i=this._readableState,r=t;return 0!==t&&(i.emittedReadable=!1),0===t&&i.needReadable&&((0!==i.highWaterMark?i.length>=i.highWaterMark:0<i.length)||i.ended)?(f("read: emitReadable",i.length,i.ended),(0===i.length&&i.ended?H:M)(this),null):0===(t=A(t,i))&&i.ended?(0===i.length&&H(this),null):(e=i.needReadable,f("need readable",e),(0===i.length||i.length-t<i.highWaterMark)&&f("length less than watermark",e=!0),i.ended||i.reading?f("reading or ended",e=!1):e&&(f("do read"),i.reading=!0,i.sync=!0,0===i.length&&(i.needReadable=!0),this._read(i.highWaterMark),i.sync=!1,i.reading||(t=A(r,i))),null===(e=0<t?L(t,i):null)?(i.needReadable=i.length<=i.highWaterMark,t=0):(i.length-=t,i.awaitDrain=0),0===i.length&&(i.ended||(i.needReadable=!0),r!==t)&&i.ended&&H(this),null!==e&&this.emit("data",e),e)},_.prototype._read=function(t){v(this,new y("_read()"))},_.prototype.pipe=function(t,e){var i=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t)}function o(){f("onend"),t.end()}n.pipesCount+=1,f("pipe count=%d opts=%j",n.pipesCount,e),e=e&&!1===e.end||t===r.stdout||t===r.stderr?g:o,n.endEmitted?r.nextTick(e):i.once("end",e),t.on("unpipe",(function e(r,s){f("onunpipe"),r===i&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,f("cleanup"),t.removeListener("close",d),t.removeListener("finish",p),t.removeListener("drain",h),t.removeListener("error",l),t.removeListener("unpipe",e),i.removeListener("end",o),i.removeListener("end",g),i.removeListener("data",u),c=!0,!n.awaitDrain||t._writableState&&!t._writableState.needDrain||h())})),a=i;var a,h=function(){var t=a._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(a,"data")&&(t.flowing=!0,N(a))},c=(t.on("drain",h),!1);function u(e){f("ondata"),e=t.write(e),f("dest.write",e),!1===e&&((1===n.pipesCount&&n.pipes===t||1<n.pipesCount&&-1!==D(n.pipes,t))&&!c&&(f("false write response, pause",n.awaitDrain),n.awaitDrain++),i.pause())}function l(e){f("onerror",e),g(),t.removeListener("error",l),0===s(t,"error")&&v(t,e)}function d(){t.removeListener("finish",p),g()}function p(){f("onfinish"),t.removeListener("close",d),g()}function g(){f("unpipe"),i.unpipe(t)}return i.on("data",u),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}(t,"error",l),t.once("close",d),t.once("finish",p),t.emit("pipe",i),n.flowing||(f("pipe resume"),i.resume()),t},_.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0!==e.pipesCount)if(1===e.pipesCount)t&&t!==e.pipes||(t=t||e.pipes,e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i));else if(t){var r=D(e.pipes,t);-1!==r&&(e.pipes.splice(r,1),--e.pipesCount,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i))}else{var s=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<n;o++)s[o].emit("unpipe",this,{hasUnpiped:!1})}return this},_.prototype.addListener=_.prototype.on=function(t,e){e=c.prototype.on.call(this,t,e);var i=this._readableState;return"data"===t?(i.readableListening=0<this.listenerCount("readable"),!1!==i.flowing&&this.resume()):"readable"!==t||i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,f("on readable",i.length,i.reading),i.length?M(this):i.reading||r.nextTick(P,this)),e},_.prototype.removeListener=function(t,e){return e=c.prototype.removeListener.call(this,t,e),"readable"===t&&r.nextTick(T,this),e},_.prototype.removeAllListeners=function(t){var e=c.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||r.nextTick(T,this),e},_.prototype.resume=function(){var t,e,i=this._readableState;return i.flowing||(f("resume"),i.flowing=!i.readableListening,t=this,(e=i).resumeScheduled)||(e.resumeScheduled=!0,r.nextTick(B,t,e)),i.paused=!1,this},_.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},_.prototype.wrap=function(t){var e,i=this,r=this._readableState,s=!1;for(e in t.on("end",(function(){var t;f("wrapped end"),r.decoder&&!r.ended&&(t=r.decoder.end())&&t.length&&i.push(t),i.push(null)})),t.on("data",(function(e){f("wrapped data"),r.decoder&&(e=r.decoder.write(e)),r.objectMode&&null==e||(r.objectMode||e&&e.length)&&!i.push(e)&&(s=!0,t.pause())})),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var n=0;n<k.length;n++)t.on(k[n],this.emit.bind(this,k[n]));return this._read=function(e){f("wrapped _read",e),s&&(s=!1,t.resume())},this},"function"==typeof Symbol&&(_.prototype[Symbol.asyncIterator]=function(){return(a=void 0===a?i(383):a)(this)}),Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),_._fromList=L,Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(_.from=function(t,e){return(h=void 0===h?i(384):h)(_,t,e)})}).call(this,i(12),i(11))},function(t,e,i){t.exports=i(14).EventEmitter},function(t,e,i){"use strict";(function(e){function i(t,e){s(t,e),r(t)}function r(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function s(t,e){t.emit("error",e)}t.exports={destroy:function(t,n){var o=this,a=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return a||h?n?n(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(s,this,t)):e.nextTick(s,this,t)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!n&&t?o._writableState?o._writableState.errorEmitted?e.nextTick(r,o):(o._writableState.errorEmitted=!0,e.nextTick(i,o,t)):e.nextTick(i,o,t):n?(e.nextTick(r,o),n(t)):e.nextTick(r,o)}))),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var i=t._readableState,r=t._writableState;i&&i.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this,i(11))},function(t,e,i){"use strict";var r=i(69).codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,i,s){o=s,n=i;var n,o=null!=(e=e).highWaterMark?e.highWaterMark:o?e[n]:null;if(null==o)return t.objectMode?16:16384;if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(s?i:"highWaterMark",o);return Math.floor(o)}}},function(t,e,i){"use strict";(function(e,r){function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){var i=e,r=t,s=i.entry;for(i.entry=null;s;){var n=s.callback;r.pendingcb--,n(void 0),s=s.next}r.corkedRequestsFree.next=i}}(t.exports=x).WritableState=_;var n,o,a={deprecate:i(116)},h=i(234),c=i(0).Buffer,u=e.Uint8Array||function(){},l=(e=i(235),i(236).getHighWaterMark),f=i(69).codes,d=f.ERR_INVALID_ARG_TYPE,p=f.ERR_METHOD_NOT_IMPLEMENTED,g=f.ERR_MULTIPLE_CALLBACK,m=f.ERR_STREAM_CANNOT_PIPE,w=f.ERR_STREAM_DESTROYED,y=f.ERR_STREAM_NULL_VALUES,b=f.ERR_STREAM_WRITE_AFTER_END,v=f.ERR_UNKNOWN_ENCODING,k=e.errorOrDestroy;function S(){}function _(t,e,o){n=n||i(70),t=t||{},"boolean"!=typeof o&&(o=e instanceof n),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=l(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,o=(this.destroyed=!1)===t.decodeStrings,this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){var i=e,s=i._writableState,n=s.sync,o=s.writecb;if("function"!=typeof o)throw new g;var a,h,c,u,l=s;l.writing=!1,l.writecb=null,l.length-=l.writelen,l.writelen=0,t?(l=i,h=n,c=t,u=o,--(a=s).pendingcb,h?(r.nextTick(u,c),r.nextTick(I,l,a),l._writableState.errorEmitted=!0,k(l,c)):(u(c),l._writableState.errorEmitted=!0,k(l,c),I(l,a))):((t=M(s)||i.destroyed)||s.corked||s.bufferProcessing||!s.bufferedRequest||A(i,s),n?r.nextTick(E,i,s,t,o):E(i,s,t,o))},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}i(5)(x,h),_.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e};try{Object.defineProperty(_.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}function x(t){var e=this instanceof(n=n||i(70));if(!e&&!o.call(x,this))return new x(t);this._writableState=new _(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final)&&(this._final=t.final),h.call(this)}function R(t,e,i,r,s,n,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new w("write")):i?t._writev(s,e.onwrite):t._write(s,n,e.onwrite),e.sync=!1}function E(t,e,i,r){var s;i||(i=t,0===(s=e).length&&s.needDrain&&(s.needDrain=!1,i.emit("drain"))),e.pendingcb--,r(),I(t,e)}function A(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){for(var r=e.bufferedRequestCount,n=new Array(r),o=((r=e.corkedRequestsFree).entry=i,0),a=!0;i;)(n[o]=i).isBuf||(a=!1),i=i.next,o+=1;n.allBuffers=a,R(t,e,!0,e.length,n,"",r.finish),e.pendingcb++,e.lastBufferedRequest=null,r.next?(e.corkedRequestsFree=r.next,r.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;i;){var h=i.chunk,c=i.encoding,u=i.callback;if(R(t,e,!1,e.objectMode?1:h.length,h,c,u),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function M(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function O(t,e){t._final((function(i){e.pendingcb--,i&&k(t,i),e.prefinished=!0,t.emit("prefinish"),I(t,e)}))}function I(t,e){var i,s,n=M(e);return n&&(i=t,(s=e).prefinished||s.finalCalled||("function"!=typeof i._final||s.destroyed?(s.prefinished=!0,i.emit("prefinish")):(s.pendingcb++,s.finalCalled=!0,r.nextTick(O,i,s))),0===e.pendingcb)&&(e.finished=!0,t.emit("finish"),e.autoDestroy)&&(!(i=t._readableState)||i.autoDestroy&&i.endEmitted)&&t.destroy(),n}"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(t){return!!o.call(this,t)||this===x&&t&&t._writableState instanceof _}})):o=function(t){return t instanceof this},x.prototype.pipe=function(){k(this,new m)},x.prototype.write=function(t,e,i){var s,n,o,a=this._writableState,h=!1,l=!a.objectMode&&(l=t,c.isBuffer(l)||l instanceof u);return l&&!c.isBuffer(t)&&(s=t,t=c.from(s)),"function"==typeof e&&(i=e,e=null),e=l?"buffer":e||a.defaultEncoding,"function"!=typeof i&&(i=S),a.ending?(s=this,n=i,o=new b,k(s,o),r.nextTick(n,o)):(l||function(t,e,i,s){var n;if(null===i?n=new y:"string"==typeof i||e.objectMode||(n=new d("chunk",["string","Buffer"],i)),!n)return 1;k(t,n),r.nextTick(s,n)}(this,a,t,i))&&(a.pendingcb++,h=function(t,e,i,r,s,n){i||r!==(a=function(t,e,i){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=c.from(e,i)),e}(e,r,s))&&(i=!0,s="buffer",r=a);var o,a=e.objectMode?1:r.length,h=(e.length+=a,e.length<e.highWaterMark);return h||(e.needDrain=!0),e.writing||e.corked?(o=e.lastBufferedRequest,e.lastBufferedRequest={chunk:r,encoding:s,isBuf:i,callback:n,next:null},o?o.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1):R(t,e,!1,a,r,s,n),h}(this,a,l,t,e,i)),h},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||A(this,t))},x.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase()))return this._writableState.defaultEncoding=t,this;throw new v(t)},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),x.prototype._write=function(t,e,i){i(new p("_write()"))},x.prototype._writev=null,x.prototype.end=function(t,e,i){var s=this._writableState;return"function"==typeof t?(i=t,e=t=null):"function"==typeof e&&(i=e,e=null),null!=t&&this.write(t,e),s.corked&&(s.corked=1,this.uncork()),s.ending||(t=this,e=s,s=i,e.ending=!0,I(t,e),s&&(e.finished?r.nextTick(s):t.once("finish",s)),e.ended=!0,t.writable=!1),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),x.prototype.destroy=e.destroy,x.prototype._undestroy=e.undestroy,x.prototype._destroy=function(t,e){e(t)}}).call(this,i(12),i(11))},function(t,e,i){"use strict";t.exports=h;var r=(t=i(69).codes).ERR_METHOD_NOT_IMPLEMENTED,s=t.ERR_MULTIPLE_CALLBACK,n=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=t.ERR_TRANSFORM_WITH_LENGTH_0,a=i(70);function h(t){if(!(this instanceof h))return new h(t);a.call(this,t),this._transformState={afterTransform:function(t,e){var i=this._transformState,r=(i.transforming=!1,i.writecb);if(null===r)return this.emit("error",new s);i.writechunk=null,(i.writecb=null)!=e&&this.push(e),r(t),(i=this._readableState).reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush)&&(this._flush=t.flush),this.on("prefinish",c)}function c(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?u(this,null,null):this._flush((function(e,i){u(t,e,i)}))}function u(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new o;if(t._transformState.transforming)throw new n;t.push(null)}i(5)(h,a),h.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},h.prototype._transform=function(t,e,i){i(new r("_transform()"))},h.prototype._write=function(t,e,i){var r=this._transformState;r.writecb=i,r.writechunk=t,r.writeencoding=e,!r.transforming&&(i=this._readableState,r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)},h.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},h.prototype._destroy=function(t,e){a.prototype._destroy.call(this,t,(function(t){e(t)}))}},function(t,e,i){"use strict";e.AbstractLevelDOWN=i(390),e.AbstractIterator=i(240),e.AbstractChainedBatch=i(242)},function(t,e,i){"use strict";function r(t){if("object"!=typeof t||null===t)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=t,this._ended=!1,this._nexting=!1}r.prototype.next=function(t){let e=this;if(void 0===t)e=new Promise((function(e,i){t=function(t,r,s){t?i(t):void 0===r&&void 0===s?e():e([r,s])}}));else if("function"!=typeof t)throw new Error("next() requires a callback argument");return this._ended?this._nextTick(t,new Error("cannot call next() after end()")):this._nexting?this._nextTick(t,new Error("cannot call next() before previous next() has completed")):(this._nexting=!0,this._next((e,...i)=>{this._nexting=!1,t(e,...i)})),e},r.prototype._next=function(t){this._nextTick(t)},r.prototype.seek=function(t){if(this._ended)throw new Error("cannot call seek() after end()");if(this._nexting)throw new Error("cannot call seek() before next() has completed");t=this.db._serializeKey(t),this._seek(t)},r.prototype._seek=function(t){},r.prototype.end=function(t){let e;if(void 0===t)e=new Promise((function(e,i){t=function(t){t?i(t):e()}}));else if("function"!=typeof t)throw new Error("end() requires a callback argument");return this._ended?this._nextTick(t,new Error("end() already called on iterator")):(this._ended=!0,this._end(t)),e},r.prototype._end=function(t){this._nextTick(t)},r.prototype[Symbol.asyncIterator]=async function*(){try{for(var t;void 0!==(t=await this.next());)yield t}finally{this._ended||await this.end()}},r.prototype._nextTick=i(156),t.exports=r},function(t,e,i){(function(e){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
let i;t.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:e):t=>(i=i||Promise.resolve()).then(t).catch(t=>setTimeout(()=>{throw t},0))}).call(this,i(12))},function(t,e,i){"use strict";const r=Object.freeze({});function s(t){if("object"!=typeof t||null===t)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=t,this._operations=[],this._written=!1}s.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},s.prototype.put=function(t,e,i){this._checkWritten();var s=this.db._checkKey(t)||this.db._checkValue(e);if(s)throw s;return t=this.db._serializeKey(t),e=this.db._serializeValue(e),this._put(t,e,null!=i?i:r),this},s.prototype._put=function(t,e,i){this._operations.push({...i,type:"put",key:t,value:e})},s.prototype.del=function(t,e){this._checkWritten();var i=this.db._checkKey(t);if(i)throw i;return t=this.db._serializeKey(t),this._del(t,null!=e?e:r),this},s.prototype._del=function(t,e){this._operations.push({...e,type:"del",key:t})},s.prototype.clear=function(){return this._checkWritten(),this._clear(),this},s.prototype._clear=function(){this._operations=[]},s.prototype.write=function(t,e){if(this._checkWritten(),"function"!=typeof(e="function"==typeof t?t:e))throw new Error("write() requires a callback argument");"object"==typeof t&&null!==t||(t={}),this._written=!0,this._write(t,e)},s.prototype._write=function(t,e){this.db._batch(this._operations,t,e)},s.prototype._nextTick=i(156),t.exports=s},function(t,e,i){"use strict";e.getCallback=function(t,e){return"function"==typeof t?t:e},e.getOptions=function(t){return"object"==typeof t&&null!==t?t:{}}},function(t,e,i){"use strict";const r=i(397),s=Symbol("none");t.exports=function(t){var e=r.lowerBound(t,s),i=r.upperBound(t,s),n=r.lowerBoundExclusive(t,s);t=r.upperBoundExclusive(t,s);return e!==s&&i!==s?IDBKeyRange.bound(e,i,n,t):e!==s?IDBKeyRange.lowerBound(e,n):i!==s?IDBKeyRange.upperBound(i,t):null}},function(t,e,i){"use strict";(function(e){const r=i(0).Buffer,s=e.TextDecoder?(n=new TextDecoder("utf-8")).decode.bind(n):function(t){return a(t).toString()};var n;const o=e.TextDecoder?(n=new TextDecoder("utf-8")).decode.bind(n):function(t){return r.from(t).toString()};function a(t){var e=r.from(t.buffer);return t.byteLength===t.buffer.byteLength?e:e.slice(t.byteOffset,t.byteOffset+t.byteLength)}t.exports=function(t,e){return t instanceof Uint8Array?(e?a:s)(t):t instanceof ArrayBuffer?e?r.from(t):o(t):e?r.from(String(t)):String(t)}}).call(this,i(12))},function(t,e,i){"use strict";
/*!
 * rbt.js - iterative red black tree for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1);let s;function n(t,e){if(!(this instanceof n))return new n(t,e);r("function"==typeof t),this.root=s,this.compare=t,this.unique=e||!1}function o(t,e){this.tree=t,this.root=e,this.current=e,this.key=null,this.value=null}function a(t,e){this.key=t,this.value=e,this.color=0,this.parent=s,this.left=s,this.right=s}function h(){this.key=null,this.value=null,this.color=1,this.parent=null,this.left=null,this.right=null}function c(t,e){this.key=t,this.value=e}function u(t,e){e.isNull()||(t.left=e.clone(),u((t.left.parent=t).left,e.left),l(t.left,e.right))}function l(t,e){e.isNull()||(t.right=e.clone(),u((t.right.parent=t).right,e.left),l(t.right,e.right))}n.prototype.reset=function(){this.root=s},n.prototype.search=function(t){let e=this.root;for(;!e.isNull();){var i=this.compare(t,e.key);if(0===i)return e;e=i<0?e.left:e.right}return null},n.prototype.insert=function(t,e){let i,r=this.root,s=!1;for(;!r.isNull();){var n=this.compare(t,r.key);if(this.unique&&0===n)return r.key=t,r.value=e,r;i=r,r=n<0?(s=!0,r.left):(s=!1,r.right)}var o=new a(t,e);return i?(o.parent=i,s?i.left=o:i.right=o,this.insertFixup(o)):(this.root=o,this.insertFixup(o)),o},n.prototype.insertFixup=function(t){for(t.color=0;t!==this.root&&0===t.parent.color;){var e;t.parent===t.parent.parent.left?(e=t.parent.parent.right).isNull()||0!==e.color?(t===t.parent.right&&(t=t.parent,this.rotl(t)),t.parent.color=1,t.parent.parent.color=0,this.rotr(t.parent.parent)):(t.parent.color=1,e.color=1,t.parent.parent.color=0,t=t.parent.parent):(e=t.parent.parent.left).isNull()||0!==e.color?(t===t.parent.left&&(t=t.parent,this.rotr(t)),t.parent.color=1,t.parent.parent.color=0,this.rotl(t.parent.parent)):(t.parent.color=1,e.color=1,t.parent.parent.color=0,t=t.parent.parent)}this.root.color=1},n.prototype.remove=function(t){let e=this.root;for(;!e.isNull();){var i=this.compare(t,e.key);if(0===i)return this.removeNode(e),e;e=i<0?e.left:e.right}return null},n.prototype.removeNode=function(t){let e=t;var i=(e=t.left.isNull()||t.right.isNull()?e:this.successor(t)).left.isNull()?e.right:e.left;i.parent=e.parent,e.parent.isNull()?this.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,e!==t&&(t.key=e.key,t.value=e.value),1===e.color&&this.removeFixup(i)},n.prototype.removeFixup=function(t){for(;t!==this.root&&1===t.color;)if(t===t.parent.left){let e=t.parent.right;0===e.color&&(e.color=1,t.parent.color=0,this.rotl(t.parent),e=t.parent.right),t=1===e.left.color&&1===e.right.color?(e.color=0,t.parent):(1===e.right.color&&(e.left.color=1,e.color=0,this.rotr(e),e=t.parent.right),e.color=t.parent.color,t.parent.color=1,e.right.color=1,this.rotl(t.parent),this.root)}else{let e=t.parent.left;0===e.color&&(e.color=1,t.parent.color=0,this.rotr(t.parent),e=t.parent.left),t=1===e.right.color&&1===e.left.color?(e.color=0,t.parent):(1===e.left.color&&(e.right.color=1,e.color=0,this.rotl(e),e=t.parent.left),e.color=t.parent.color,t.parent.color=1,e.left.color=1,this.rotr(t.parent),this.root)}t.color=1},n.prototype.rotl=function(t){var e=t.right;t.right=e.left,e.left.isNull()||(e.left.parent=t),e.parent=t.parent,t.parent.isNull()?this.root=e:t===t.parent.left?t.parent.left=e:t.parent.right=e,(e.left=t).parent=e},n.prototype.rotr=function(t){var e=t.left;t.left=e.right,e.right.isNull()||(e.right.parent=t),e.parent=t.parent,t.parent.isNull()?this.root=e:t===t.parent.right?t.parent.right=e:t.parent.left=e,(e.right=t).parent=e},n.prototype.min=function(t){if(!t.isNull())for(;!t.left.isNull();)t=t.left;return t},n.prototype.max=function(t){if(!t.isNull())for(;!t.right.isNull();)t=t.right;return t},n.prototype.successor=function(t){if(!t.right.isNull()){for(t=t.right;!t.left.isNull();)t=t.left;return t}let e=t.parent;for(;!e.isNull()&&t===e.right;)e=(t=e).parent;return e},n.prototype.predecessor=function(t){if(!t.left.isNull()){for(t=t.left;!t.right.isNull();)t=t.right;return t}let e=t.parent;for(;!e.isNull()&&t===e.left;)e=(t=e).parent;return e},n.prototype.clone=function(){if(this.root.isNull())return s;var t=[];let e,i,n=this.root,o=!0;for(;;)if(n.isNull()){if(0===t.length)break;n=t.pop(),e=n,o=!1,n=n.right}else{var a=n.clone();e&&(a.parent=e),o?e?e.left=a:i=a:e?e.right=a:i=a,t.push(a),e=a,o=!0,n=n.left}return r(i),i},n.prototype.snapshot=function(){var t;return this.root.isNull()?s:(u(t=this.root.clone(),t.left),l(t,t.right),t)},n.prototype.iterator=function(t){return new o(this,t||this.root)},n.prototype.range=function(t,e){var i=this.iterator(),r=[];for(t?i.seekMin(t):i.seekFirst();i.next()&&!(e&&0<i.compare(e));)r.push(i.data());return r},o.prototype.compare=function(t){return r(null!=this.key,"No key."),this.tree.compare(this.key,t)},o.prototype.valid=function(){return!this.current.isNull()},o.prototype.reset=function(){this.current=this.root,this.key=null,this.value=null},o.prototype.seekFirst=function(){this.current=this.tree.min(this.root),this.key=this.current.key,this.value=this.current.value},o.prototype.seekLast=function(){this.current=this.tree.max(this.root),this.key=this.current.key,this.value=this.current.value},o.prototype.seek=function(t){return this.seekMin(t)},o.prototype.seekMin=function(t){r(null!=t,"No key passed to seek.");let e=this.current,i=s;for(;!e.isNull();){var n=this.tree.compare(e.key,t);if(0===n){i=e;break}e=0<n?(i=e).left:e.right}this.current=i,this.key=i.key,this.value=i.value},o.prototype.seekMax=function(t){r(null!=t,"No key passed to seek.");let e=this.current,i=s;for(;!e.isNull();){var n=this.tree.compare(e.key,t);if(0===n){i=e;break}e=n<0?(i=e).right:e.left}this.current=i,this.key=i.key,this.value=i.value},o.prototype.prev=function(){return this.current.isNull()?(this.key=null,this.value=null,!1):(this.key=this.current.key,this.value=this.current.value,this.current=this.tree.predecessor(this.current),!0)},o.prototype.next=function(){return this.current.isNull()?(this.key=null,this.value=null,!1):(this.key=this.current.key,this.value=this.current.value,this.current=this.tree.successor(this.current),!0)},o.prototype.data=function(){return r(null!=this.key,"No data available."),new c(this.key,this.value)},a.prototype.clone=function(){var t=new a(this.key,this.value);return t.color=this.color,t.parent=this.parent,t.left=this.left,t.right=this.right,t},a.prototype.copy=function(){return new c(this.key,this.value)},a.prototype.inspect=function(){return{key:this.key,value:this.value,color:0===this.color?"red":"black",left:this.left,right:this.right}},a.prototype.isNull=function(){return!1},h.prototype.inspect=function(){return"NIL"},h.prototype.isNull=function(){return!0},c.prototype.inspect=function(){return{key:this.key,value:this.value}},s=new h,t.exports=n},function(t,e,i){"use strict";
/*!
 * lrubatch.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */function r(t,e,i){this.remove=t,this.key=e,this.value=i}t.exports=class{constructor(t){this.lru=t,this.ops=[]}set(t,e){this.ops.push(new r(!1,t,e))}remove(t){this.ops.push(new r(!0,t,null))}clear(){this.ops.length=0}commit(){for(const t of this.ops)t.remove?this.lru.remove(t.key):this.lru.set(t.key,t.value);this.ops.length=0}}},function(t,e,i){"use strict";
/*!
 * wordlist.js - wordlists for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(415),s=i(249).languageEnum;e.get=function(t){switch(t){case s.Chinese:return r.chinese.simplified;case s.ChineseTraditional:return r.chinese.traditional;case s.English:return r.english;case s.French:return r.french;case s.Italian:return r.italian;case s.Japanese:return r.japanese;case s.Spanish:return r.spanish;default:throw new Error(`Unknown language: ${t}.`)}}},function(t,e){e.languages=["simplified chinese","traditional chinese","english","french","italian","japanese","spanish"],e.languageEnum={Chinese:"simplified chinese",ChineseTraditional:"traditional chinese",English:"english",French:"french",Italian:"italian",Japanese:"japanese",Spanish:"spanish"}},function(t,e,i){"use strict";
/*!
 * nfkd-browser.js - unicode normalization for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(423);t.exports=function(t){return t.normalize?t.normalize("NFKD"):r.nfkd(t)}},function(t,e,i){"use strict";(function(e){
/*!
 * public.js - hd public keys for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(3),n=i(8),o=i(81),a=i(23),h=i(18),c=i(6),u=i(2),l=i(56),f=i(4),d=i(123);class p{constructor(t){this.network=h.primary,this.depth=0,this.parentFingerPrint=0,this.childIndex=0,this.chainCode=f.ZERO_HASH,this.publicKey=f.ZERO_KEY,this.fingerPrint=-1,this._xpubkey=null,t&&this.fromOptions(t)}fromOptions(t){return r(t,"No options for HDPublicKey"),r(s.isU8(t.depth)),r(s.isU32(t.parentFingerPrint)),r(s.isU32(t.childIndex)),r(e.isBuffer(t.chainCode)),r(e.isBuffer(t.publicKey)),t.network&&(this.network=h.get(t.network)),this.depth=t.depth,this.parentFingerPrint=t.parentFingerPrint,this.childIndex=t.childIndex,this.chainCode=t.chainCode,this.publicKey=t.publicKey,this}static fromOptions(t){return(new p).fromOptions(t)}toPublic(){return this}xprivkey(){return null}xpubkey(){return this._xpubkey||(this._xpubkey=this.toBase58()),this._xpubkey}destroy(){this.depth=0,this.childIndex=0,this.parentFingerPrint=0,o(this.chainCode),o(this.publicKey),this.fingerPrint=-1,this._xpubkey=null}derive(t,e){if(r("number"==typeof t),t>>>0!==t)throw new Error("Index out of range.");if(t&d.HARDENED||e)throw new Error("Cannot derive hardened.");if(255<=this.depth)throw new Error("Depth too high.");e=this.getID(t);if(i=d.cache.get(e))return i;var i=((i=c.pool(37)).writeBytes(this.publicKey),i.writeU32BE(t),i.render()),s=(i=n.hmac("sha512",i,this.chainCode)).slice(0,32);i=i.slice(32,64);let o;try{o=a.publicKeyTweakAdd(this.publicKey,s,!0)}catch(e){return this.derive(t+1)}return-1===this.fingerPrint&&(s=n.hash160(this.publicKey),this.fingerPrint=s.readUInt32BE(0,!0)),(s=new p).network=this.network,s.depth=this.depth+1,s.parentFingerPrint=this.fingerPrint,s.childIndex=t,s.chainCode=i,s.publicKey=o,d.cache.set(e,s),s}getID(t){return this.network.keyPrefix.xpubkey58+this.publicKey.toString("hex")+t}deriveAccount(t,e){return r(s.isU32(t)),r(s.isU32(e)),r(this.isAccount(e),"Cannot derive account index."),this}isMaster(){return d.isMaster(this)}isAccount(t){return d.isAccount(this,t)}static isValidPath(t){try{return d.parsePath(t,!1),!0}catch(t){return!1}}derivePath(t){let e=this;for(const i of d.parsePath(t,!1))e=e.derive(i);return e}equals(t){return r(p.isHDPublicKey(t)),this.network===t.network&&this.depth===t.depth&&this.parentFingerPrint===t.parentFingerPrint&&this.childIndex===t.childIndex&&this.chainCode.equals(t.chainCode)&&this.publicKey.equals(t.publicKey)}compare(t){r(p.isHDPublicKey(t));var e=this.depth-t.depth;return 0!=e||0!=(e=this.parentFingerPrint-t.parentFingerPrint)||0!=(e=this.childIndex-t.childIndex)||0!==(e=this.chainCode.compare(t.chainCode))||0!==(e=this.publicKey.compare(t.publicKey))?e:0}toJSON(){return{xpubkey:this.xpubkey()}}fromJSON(t,e){return r(t.xpubkey,"Could not handle HD key JSON."),this.fromBase58(t.xpubkey,e),this}static fromJSON(t,e){return(new p).fromJSON(t,e)}static isBase58(t,e){if("string"!=typeof t)return!1;if(t.length<4)return!1;t=t.substring(0,4);try{return h.fromPublic58(t,e),!0}catch(t){return!1}}static isRaw(t,i){if(!e.isBuffer(t))return!1;if(t.length<4)return!1;t=t.readUInt32BE(0,!0);try{return h.fromPublic(t,i),!0}catch(t){return!1}}fromBase58(t,e){return r("string"==typeof t),this._xpubkey=t,this.fromRaw(l.decode(t),e)}fromReader(t,e){var i=t.readU32BE();return this.network=h.fromPublic(i,e),this.depth=t.readU8(),this.parentFingerPrint=t.readU32BE(),this.childIndex=t.readU32BE(),this.chainCode=t.readBytes(32),this.publicKey=t.readBytes(33),t.verifyChecksum(),this}fromRaw(t,e){return this.fromReader(new u(t),e)}toBase58(t){return l.encode(this.toRaw(t))}toWriter(t,e){return e=e||this.network,e=h.get(e),t.writeU32BE(e.keyPrefix.xpubkey),t.writeU8(this.depth),t.writeU32BE(this.parentFingerPrint),t.writeU32BE(this.childIndex),t.writeBytes(this.chainCode),t.writeBytes(this.publicKey),t.writeChecksum(),t}getSize(){return 82}toRaw(t){return this.toWriter(new c(82),t).render()}static fromBase58(t,e){return(new p).fromBase58(t,e)}static fromReader(t,e){return(new p).fromReader(t,e)}static fromRaw(t,e){return(new p).fromRaw(t,e)}static isHDPublicKey(t){return t instanceof p}}t.exports=p}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * siphash.js - siphash for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 *
 * Ported from:
 * https://github.com/bitcoin/bitcoin/blob/master/src/hash.cpp
 */function r(t,e,i){var r=Math.floor(t.length/8),s=c(1936682341,1886610805),n=c(1685025377,1852075885),o=c(1819895653,1852142177),a=c(1952801890,2037671283),h=c(r<<i-32,0),l=(i=c(0,255),c.fromRaw(e,0)),f=(e=c.fromRaw(e,8),s.ixor(l)),d=n.ixor(e),p=o.ixor(l),g=a.ixor(e);let m=0;for(let e=0;e<r;e++){var w=c.fromRaw(t,m);m+=8,g.ixor(w),u(f,d,p,g),u(f,d,p,g),f.ixor(w)}switch(7&t.length){case 7:h.hi|=t[m+6]<<16;case 6:h.hi|=t[m+5]<<8;case 5:h.hi|=t[m+4];case 4:h.lo|=t[m+3]<<24;case 3:h.lo|=t[m+2]<<16;case 2:h.lo|=t[m+1]<<8;case 1:h.lo|=t[m]}return g.ixor(h),u(f,d,p,g),u(f,d,p,g),f.ixor(h),p.ixor(i),u(f,d,p,g),u(f,d,p,g),u(f,d,p,g),u(f,d,p,g),f.ixor(d),f.ixor(p),f.ixor(g),[f.hi,f.lo]}function s(t,e,i){var r=c(1936682341,1886610805),s=c(1685025377,1852075885),n=c(1819895653,1852142177),o=c(1952801890,2037671283),a=(t=c(t,e),e=c(0,255),c.fromRaw(i,0));i=c.fromRaw(i,8),r=r.ixor(a),s=s.ixor(i),n=n.ixor(a);return(a=o.ixor(i)).ixor(t),u(r,s,n,a),u(r,s,n,a),r.ixor(t),n.ixor(e),u(r,s,n,a),u(r,s,n,a),u(r,s,n,a),u(r,s,n,a),r.ixor(s),r.ixor(n),r.ixor(a),[r.hi,r.lo]}function n(t,e){return r(t,e,56)}function o(t,e){return r(t,e,59)}function a(t,e){return s(0,t,e)[1]}function h(t,e,i){return s(t,e,i)}function c(t,e){if(!(this instanceof c))return new c(t,e);this.hi=0|t,this.lo=0|e}function u(t,e,i,r){t.iadd(e),e.irotl(13),e.ixor(t),t.irotl(32),i.iadd(r),r.irotl(16),r.ixor(i),t.iadd(r),r.irotl(21),r.ixor(t),i.iadd(e),e.irotl(17),e.ixor(i),i.irotl(32)}(i=i(57).binding)&&(n=i.siphash,o=i.siphash256,a=i.siphash32,h=i.siphash64),c.prototype.iadd=function(t){var e=this.lo+t.lo|0,i=this.lo>>31,r=t.lo>>31;t=(this.hi+t.hi|0)+(1&(i&r|~(e>>31)&(i^r)));return this.hi=0|t,this.lo=e,this},c.prototype.ixor=function(t){return this.hi^=t.hi,this.lo^=t.lo,this},c.prototype.irotl=function(t){let e=this.hi,i=this.lo,r=this.hi,s=this.lo;return t<32?(e=(e<<=t)|i>>>32-t,i<<=t):(e=i<<t-32,i=0),(t=64-t)<32?(s=(s>>>=t)|r<<32-t,r>>>=t):(s=r>>>t-32,r=0),this.hi=e|r,this.lo=i|s,this},c.fromRaw=function(t,e){var i=t.readUInt32LE(e,!0);return new c(t.readUInt32LE(e+4,!0),i)},(e=n).siphash=n,e.siphash256=o,e.siphash32=a,e.siphash64=h,t.exports=e},function(t,e,i){"use strict";
/*!
 * heap.js - heap object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1);function s(t,e){throw new Error("No heap comparator set.")}t.exports=class t{constructor(t){this.compare=s,this.items=[],t&&this.set(t)}init(){var t=this.items.length;if(!(t<=1))for(let e=(t/2|0)-1;0<=e;e--)this.down(e,t)}size(){return this.items.length}set(t){r("function"==typeof t,"Comparator must be a function."),this.compare=t}insert(t){return this.items.push(t),this.up(this.items.length-1),this.items.length}shift(){var t;return 0===this.items.length?null:(t=this.items.length-1,this.swap(0,t),this.down(0,t),this.items.pop())}remove(t){var e;return 0===this.items.length||(e=this.items.length-1,t<0)||e<t?null:(e!==t&&(this.swap(t,e),this.down(t,e),this.up(t)),this.items.pop())}swap(t,e){var i=this.items[t],r=this.items[e];this.items[t]=r,this.items[e]=i}less(t,e){return this.compare(this.items[t],this.items[e])<0}down(t,e){for(;;){var i=2*t+1;if(r(0<=i),i<0||e<=i)break;let n=i;var s=1+i;if(s<e&&!this.less(i,s)&&(n=s),!this.less(n,t))break;this.swap(t,n),t=n}}up(t){for(;;){var e=(t-1)/2|0;if(r(0<=e),e<0||e===t)break;if(!this.less(t,e))break;this.swap(e,t),t=e}}toArray(){var e=new t,i=[];for(e.compare=this.compare,e.items=this.items.slice();0<e.size();)i.push(e.shift());return i}static fromArray(e,i){var r=new t;return r.set(e),r.items=i,r.init(),r}}},function(t,e,i){"use strict";var r=i(10).Buffer,s=i(430).Transform;function n(t){s.call(this),this._block=r.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}i(5)(n,s),n.prototype._transform=function(t,e,i){var r=null;try{this.update(t,e)}catch(t){r=t}i(r)},n.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(t){e=t}t(e)},n.prototype.update=function(t,e){var i=t;if(!r.isBuffer(i)&&"string"!=typeof i)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");r.isBuffer(t)||(t=r.from(t,e));for(var s=this._block,n=0;this._blockOffset+t.length-n>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)s[o++]=t[n++];this._update(),this._blockOffset=0}for(;n<t.length;)s[this._blockOffset++]=t[n++];for(var a=0,h=8*t.length;0<h;++a)this._length[a]+=h,0<(h=this._length[a]/4294967296|0)&&(this._length[a]-=4294967296*h);return this},n.prototype._update=function(){throw new Error("_update is not implemented")},n.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0);for(var i=this._blockOffset=0;i<4;++i)this._length[i]=0;return e},n.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=n},function(t,e,i){"use strict";(function(e,r){function s(t,e){return t.listeners(e).length}(t.exports=_).ReadableState=S,i(14).EventEmitter;var n,o,a,h,c=i(256),u=i(0).Buffer,l=e.Uint8Array||function(){},f=(e=i(431))&&e.debuglog?e.debuglog("stream"):function(){},d=i(432),p=(e=i(257),i(258).getHighWaterMark),g=i(73).codes,m=g.ERR_INVALID_ARG_TYPE,w=g.ERR_STREAM_PUSH_AFTER_EOF,y=g.ERR_METHOD_NOT_IMPLEMENTED,b=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,v=(i(5)(_,c),e.errorOrDestroy),k=["error","close","destroy","pause","resume"];function S(t,e,r){n=n||i(74),t=t||{},"boolean"!=typeof r&&(r=e instanceof n),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=p(this,t,"readableHighWaterMark",r),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(o=o||i(44).StringDecoder,this.decoder=new o(t.encoding),this.encoding=t.encoding)}function _(t){if(n=n||i(74),!(this instanceof _))return new _(t);var e=this instanceof n;this._readableState=new S(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy)&&(this._destroy=t.destroy),c.call(this)}function x(t,e,i,r,s){f("readableAddChunk",e);var n,o,a,h,c=t._readableState;if(null===e)c.reading=!1,o=t,a=c,f("onEofChunk"),a.ended||(a.decoder&&(h=a.decoder.end())&&h.length&&(a.buffer.push(h),a.length+=a.objectMode?1:h.length),a.ended=!0,a.sync?M(o):(a.needReadable=!1,a.emittedReadable||(a.emittedReadable=!0,O(o))));else if(n=s?n:function(t,e){var i;return!function(t){return u.isBuffer(t)||t instanceof l}(e)&&"string"!=typeof e&&void 0!==e&&!t.objectMode&&(i=new m("chunk",["string","Buffer","Uint8Array"],e)),i}(c,e))v(t,n);else if(c.objectMode||e&&0<e.length)if("string"==typeof e||c.objectMode||Object.getPrototypeOf(e)===u.prototype||(h=e,e=u.from(h)),r)c.endEmitted?v(t,new b):R(t,c,e,!0);else if(c.ended)v(t,new w);else{if(c.destroyed)return!1;c.reading=!1,!c.decoder||i||(e=c.decoder.write(e),c.objectMode)||0!==e.length?R(t,c,e,!1):I(t,c)}else r||(c.reading=!1,I(t,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function R(t,e,i,r){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",i)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&M(t)),I(t,e)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),_.prototype.destroy=e.destroy,_.prototype._undestroy=e.undestroy,_.prototype._destroy=function(t,e){e(t)},_.prototype.push=function(t,e){var i,r=this._readableState;return r.objectMode?i=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=u.from(t,e),e=""),i=!0),x(this,t,e,!1,i)},_.prototype.unshift=function(t){return x(this,t,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(t){for(var e=new(o=o||i(44).StringDecoder)(t),r=(this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding,this._readableState.buffer.head),s="";null!==r;)s+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==s&&this._readableState.buffer.push(s),this._readableState.length=s.length,this};var E=1073741824;function A(t,e){var i;return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?(e.flowing&&e.length?e.buffer.head.data:e).length:(t>e.highWaterMark&&(e.highWaterMark=(E<=(i=t)?i=E:(i--,i=(i=(i=(i=(i|=i>>>1)|i>>>2)|i>>>4)|i>>>8)|i>>>16,i++),i)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function M(t){var e=t._readableState;f("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(f("emitReadable",e.flowing),e.emittedReadable=!0,r.nextTick(O,t))}function O(t){var e=t._readableState;f("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,N(t)}function I(t,e){e.readingMore||(e.readingMore=!0,r.nextTick(C,t,e))}function C(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var i=e.length;if(f("maybeReadMore read 0"),t.read(0),i===e.length)break}e.readingMore=!1}function T(t){var e=t._readableState;e.readableListening=0<t.listenerCount("readable"),e.resumeScheduled&&!e.paused?e.flowing=!0:0<t.listenerCount("data")&&t.resume()}function P(t){f("readable nexttick read 0"),t.read(0)}function B(t,e){f("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),N(t),e.flowing&&!e.reading&&t.read(0)}function N(t){var e=t._readableState;for(f("flow",e.flowing);e.flowing&&null!==t.read(););}function L(t,e){var i;return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):i=e.buffer.consume(t,e.decoder),i)}function H(t){var e=t._readableState;f("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,r.nextTick(U,e,t))}function U(t,e){f("endReadableNT",t.endEmitted,t.length),t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy&&(!(t=e._writableState)||t.autoDestroy&&t.finished)&&e.destroy())}function D(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}_.prototype.read=function(t){f("read",t),t=parseInt(t,10);var e,i=this._readableState,r=t;return 0!==t&&(i.emittedReadable=!1),0===t&&i.needReadable&&((0!==i.highWaterMark?i.length>=i.highWaterMark:0<i.length)||i.ended)?(f("read: emitReadable",i.length,i.ended),(0===i.length&&i.ended?H:M)(this),null):0===(t=A(t,i))&&i.ended?(0===i.length&&H(this),null):(e=i.needReadable,f("need readable",e),(0===i.length||i.length-t<i.highWaterMark)&&f("length less than watermark",e=!0),i.ended||i.reading?f("reading or ended",e=!1):e&&(f("do read"),i.reading=!0,i.sync=!0,0===i.length&&(i.needReadable=!0),this._read(i.highWaterMark),i.sync=!1,i.reading||(t=A(r,i))),null===(e=0<t?L(t,i):null)?(i.needReadable=i.length<=i.highWaterMark,t=0):(i.length-=t,i.awaitDrain=0),0===i.length&&(i.ended||(i.needReadable=!0),r!==t)&&i.ended&&H(this),null!==e&&this.emit("data",e),e)},_.prototype._read=function(t){v(this,new y("_read()"))},_.prototype.pipe=function(t,e){var i=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t)}function o(){f("onend"),t.end()}n.pipesCount+=1,f("pipe count=%d opts=%j",n.pipesCount,e),e=e&&!1===e.end||t===r.stdout||t===r.stderr?g:o,n.endEmitted?r.nextTick(e):i.once("end",e),t.on("unpipe",(function e(r,s){f("onunpipe"),r===i&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,f("cleanup"),t.removeListener("close",d),t.removeListener("finish",p),t.removeListener("drain",h),t.removeListener("error",l),t.removeListener("unpipe",e),i.removeListener("end",o),i.removeListener("end",g),i.removeListener("data",u),c=!0,!n.awaitDrain||t._writableState&&!t._writableState.needDrain||h())})),a=i;var a,h=function(){var t=a._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(a,"data")&&(t.flowing=!0,N(a))},c=(t.on("drain",h),!1);function u(e){f("ondata"),e=t.write(e),f("dest.write",e),!1===e&&((1===n.pipesCount&&n.pipes===t||1<n.pipesCount&&-1!==D(n.pipes,t))&&!c&&(f("false write response, pause",n.awaitDrain),n.awaitDrain++),i.pause())}function l(e){f("onerror",e),g(),t.removeListener("error",l),0===s(t,"error")&&v(t,e)}function d(){t.removeListener("finish",p),g()}function p(){f("onfinish"),t.removeListener("close",d),g()}function g(){f("unpipe"),i.unpipe(t)}return i.on("data",u),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}(t,"error",l),t.once("close",d),t.once("finish",p),t.emit("pipe",i),n.flowing||(f("pipe resume"),i.resume()),t},_.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0!==e.pipesCount)if(1===e.pipesCount)t&&t!==e.pipes||(t=t||e.pipes,e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i));else if(t){var r=D(e.pipes,t);-1!==r&&(e.pipes.splice(r,1),--e.pipesCount,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i))}else{var s=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<n;o++)s[o].emit("unpipe",this,{hasUnpiped:!1})}return this},_.prototype.addListener=_.prototype.on=function(t,e){e=c.prototype.on.call(this,t,e);var i=this._readableState;return"data"===t?(i.readableListening=0<this.listenerCount("readable"),!1!==i.flowing&&this.resume()):"readable"!==t||i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,f("on readable",i.length,i.reading),i.length?M(this):i.reading||r.nextTick(P,this)),e},_.prototype.removeListener=function(t,e){return e=c.prototype.removeListener.call(this,t,e),"readable"===t&&r.nextTick(T,this),e},_.prototype.removeAllListeners=function(t){var e=c.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||r.nextTick(T,this),e},_.prototype.resume=function(){var t,e,i=this._readableState;return i.flowing||(f("resume"),i.flowing=!i.readableListening,t=this,(e=i).resumeScheduled)||(e.resumeScheduled=!0,r.nextTick(B,t,e)),i.paused=!1,this},_.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},_.prototype.wrap=function(t){var e,i=this,r=this._readableState,s=!1;for(e in t.on("end",(function(){var t;f("wrapped end"),r.decoder&&!r.ended&&(t=r.decoder.end())&&t.length&&i.push(t),i.push(null)})),t.on("data",(function(e){f("wrapped data"),r.decoder&&(e=r.decoder.write(e)),r.objectMode&&null==e||(r.objectMode||e&&e.length)&&!i.push(e)&&(s=!0,t.pause())})),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var n=0;n<k.length;n++)t.on(k[n],this.emit.bind(this,k[n]));return this._read=function(e){f("wrapped _read",e),s&&(s=!1,t.resume())},this},"function"==typeof Symbol&&(_.prototype[Symbol.asyncIterator]=function(){return(a=void 0===a?i(434):a)(this)}),Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),_._fromList=L,Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(_.from=function(t,e){return(h=void 0===h?i(435):h)(_,t,e)})}).call(this,i(12),i(11))},function(t,e,i){t.exports=i(14).EventEmitter},function(t,e,i){"use strict";(function(e){function i(t,e){s(t,e),r(t)}function r(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function s(t,e){t.emit("error",e)}t.exports={destroy:function(t,n){var o=this,a=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return a||h?n?n(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(s,this,t)):e.nextTick(s,this,t)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!n&&t?o._writableState?o._writableState.errorEmitted?e.nextTick(r,o):(o._writableState.errorEmitted=!0,e.nextTick(i,o,t)):e.nextTick(i,o,t):n?(e.nextTick(r,o),n(t)):e.nextTick(r,o)}))),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var i=t._readableState,r=t._writableState;i&&i.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this,i(11))},function(t,e,i){"use strict";var r=i(73).codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,i,s){o=s,n=i;var n,o=null!=(e=e).highWaterMark?e.highWaterMark:o?e[n]:null;if(null==o)return t.objectMode?16:16384;if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(s?i:"highWaterMark",o);return Math.floor(o)}}},function(t,e,i){"use strict";(function(e,r){function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){var i=e,r=t,s=i.entry;for(i.entry=null;s;){var n=s.callback;r.pendingcb--,n(void 0),s=s.next}r.corkedRequestsFree.next=i}}(t.exports=x).WritableState=_;var n,o,a={deprecate:i(116)},h=i(256),c=i(0).Buffer,u=e.Uint8Array||function(){},l=(e=i(257),i(258).getHighWaterMark),f=i(73).codes,d=f.ERR_INVALID_ARG_TYPE,p=f.ERR_METHOD_NOT_IMPLEMENTED,g=f.ERR_MULTIPLE_CALLBACK,m=f.ERR_STREAM_CANNOT_PIPE,w=f.ERR_STREAM_DESTROYED,y=f.ERR_STREAM_NULL_VALUES,b=f.ERR_STREAM_WRITE_AFTER_END,v=f.ERR_UNKNOWN_ENCODING,k=e.errorOrDestroy;function S(){}function _(t,e,o){n=n||i(74),t=t||{},"boolean"!=typeof o&&(o=e instanceof n),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=l(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,o=(this.destroyed=!1)===t.decodeStrings,this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){var i=e,s=i._writableState,n=s.sync,o=s.writecb;if("function"!=typeof o)throw new g;var a,h,c,u,l=s;l.writing=!1,l.writecb=null,l.length-=l.writelen,l.writelen=0,t?(l=i,h=n,c=t,u=o,--(a=s).pendingcb,h?(r.nextTick(u,c),r.nextTick(I,l,a),l._writableState.errorEmitted=!0,k(l,c)):(u(c),l._writableState.errorEmitted=!0,k(l,c),I(l,a))):((t=M(s)||i.destroyed)||s.corked||s.bufferProcessing||!s.bufferedRequest||A(i,s),n?r.nextTick(E,i,s,t,o):E(i,s,t,o))},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}i(5)(x,h),_.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e};try{Object.defineProperty(_.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}function x(t){var e=this instanceof(n=n||i(74));if(!e&&!o.call(x,this))return new x(t);this._writableState=new _(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final)&&(this._final=t.final),h.call(this)}function R(t,e,i,r,s,n,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new w("write")):i?t._writev(s,e.onwrite):t._write(s,n,e.onwrite),e.sync=!1}function E(t,e,i,r){var s;i||(i=t,0===(s=e).length&&s.needDrain&&(s.needDrain=!1,i.emit("drain"))),e.pendingcb--,r(),I(t,e)}function A(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){for(var r=e.bufferedRequestCount,n=new Array(r),o=((r=e.corkedRequestsFree).entry=i,0),a=!0;i;)(n[o]=i).isBuf||(a=!1),i=i.next,o+=1;n.allBuffers=a,R(t,e,!0,e.length,n,"",r.finish),e.pendingcb++,e.lastBufferedRequest=null,r.next?(e.corkedRequestsFree=r.next,r.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;i;){var h=i.chunk,c=i.encoding,u=i.callback;if(R(t,e,!1,e.objectMode?1:h.length,h,c,u),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function M(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function O(t,e){t._final((function(i){e.pendingcb--,i&&k(t,i),e.prefinished=!0,t.emit("prefinish"),I(t,e)}))}function I(t,e){var i,s,n=M(e);return n&&(i=t,(s=e).prefinished||s.finalCalled||("function"!=typeof i._final||s.destroyed?(s.prefinished=!0,i.emit("prefinish")):(s.pendingcb++,s.finalCalled=!0,r.nextTick(O,i,s))),0===e.pendingcb)&&(e.finished=!0,t.emit("finish"),e.autoDestroy)&&(!(i=t._readableState)||i.autoDestroy&&i.endEmitted)&&t.destroy(),n}"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(t){return!!o.call(this,t)||this===x&&t&&t._writableState instanceof _}})):o=function(t){return t instanceof this},x.prototype.pipe=function(){k(this,new m)},x.prototype.write=function(t,e,i){var s,n,o,a=this._writableState,h=!1,l=!a.objectMode&&(l=t,c.isBuffer(l)||l instanceof u);return l&&!c.isBuffer(t)&&(s=t,t=c.from(s)),"function"==typeof e&&(i=e,e=null),e=l?"buffer":e||a.defaultEncoding,"function"!=typeof i&&(i=S),a.ending?(s=this,n=i,o=new b,k(s,o),r.nextTick(n,o)):(l||function(t,e,i,s){var n;if(null===i?n=new y:"string"==typeof i||e.objectMode||(n=new d("chunk",["string","Buffer"],i)),!n)return 1;k(t,n),r.nextTick(s,n)}(this,a,t,i))&&(a.pendingcb++,h=function(t,e,i,r,s,n){i||r!==(a=function(t,e,i){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=c.from(e,i)),e}(e,r,s))&&(i=!0,s="buffer",r=a);var o,a=e.objectMode?1:r.length,h=(e.length+=a,e.length<e.highWaterMark);return h||(e.needDrain=!0),e.writing||e.corked?(o=e.lastBufferedRequest,e.lastBufferedRequest={chunk:r,encoding:s,isBuf:i,callback:n,next:null},o?o.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1):R(t,e,!1,a,r,s,n),h}(this,a,l,t,e,i)),h},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||A(this,t))},x.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase()))return this._writableState.defaultEncoding=t,this;throw new v(t)},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),x.prototype._write=function(t,e,i){i(new p("_write()"))},x.prototype._writev=null,x.prototype.end=function(t,e,i){var s=this._writableState;return"function"==typeof t?(i=t,e=t=null):"function"==typeof e&&(i=e,e=null),null!=t&&this.write(t,e),s.corked&&(s.corked=1,this.uncork()),s.ending||(t=this,e=s,s=i,e.ending=!0,I(t,e),s&&(e.finished?r.nextTick(s):t.once("finish",s)),e.ended=!0,t.writable=!1),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),x.prototype.destroy=e.destroy,x.prototype._undestroy=e.undestroy,x.prototype._destroy=function(t,e){e(t)}}).call(this,i(12),i(11))},function(t,e,i){"use strict";t.exports=h;var r=(t=i(73).codes).ERR_METHOD_NOT_IMPLEMENTED,s=t.ERR_MULTIPLE_CALLBACK,n=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=t.ERR_TRANSFORM_WITH_LENGTH_0,a=i(74);function h(t){if(!(this instanceof h))return new h(t);a.call(this,t),this._transformState={afterTransform:function(t,e){var i=this._transformState,r=(i.transforming=!1,i.writecb);if(null===r)return this.emit("error",new s);i.writechunk=null,(i.writecb=null)!=e&&this.push(e),r(t),(i=this._readableState).reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush)&&(this._flush=t.flush),this.on("prefinish",c)}function c(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?u(this,null,null):this._flush((function(e,i){u(t,e,i)}))}function u(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new o;if(t._transformState.transforming)throw new n;t.push(null)}i(5)(h,a),h.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},h.prototype._transform=function(t,e,i){i(new r("_transform()"))},h.prototype._write=function(t,e,i){var r=this._transformState;r.writecb=i,r.writechunk=t,r.writeencoding=e,!r.transforming&&(i=this._readableState,r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)},h.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},h.prototype._destroy=function(t,e){a.prototype._destroy.call(this,t,(function(t){e(t)}))}},function(t,e,i){var r=i(5),s=i(75),n=i(10).Buffer,o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function h(){this.init(),this._w=a,s.call(this,64,56)}r(h,s),h.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},h.prototype._update=function(t){for(var e,i=this._w,r=0|this._a,s=0|this._b,n=0|this._c,a=0|this._d,h=0|this._e,c=0|this._f,u=0|this._g,l=0|this._h,f=0;f<16;++f)i[f]=t.readInt32BE(4*f);for(;f<64;++f)i[f]=0|(((e=i[f-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+i[f-7]+(((e=i[f-15])>>>7|e<<25)^(e>>>18|e<<14)^e>>>3)+i[f-16];for(var d=0;d<64;++d){var p=l+((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(u^h&(c^u))+o[d]+i[d]|0,g=0|((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&s|n&(r|s));l=u,u=c,c=h,h=a+p|0,a=n,n=s,s=r,r=p+g|0}this._a=r+this._a|0,this._b=s+this._b|0,this._c=n+this._c|0,this._d=a+this._d|0,this._e=h+this._e|0,this._f=c+this._f|0,this._g=u+this._g|0,this._h=l+this._h|0},h.prototype._hash=function(){var t=n.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=h},function(t,e,i){var r=i(5),s=i(75),n=i(10).Buffer,o=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function h(){this.init(),this._w=a,s.call(this,128,112)}function c(t,e,i){return i^t&(e^i)}function u(t,e,i){return t&e|i&(t|e)}function l(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function f(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function d(t,e){return t>>>0<e>>>0?1:0}r(h,s),h.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},h.prototype._update=function(t){for(var e=this._w,i=0|this._ah,r=0|this._bh,s=0|this._ch,n=0|this._dh,a=0|this._eh,h=0|this._fh,p=0|this._gh,g=0|this._hh,m=0|this._al,w=0|this._bl,y=0|this._cl,b=0|this._dl,v=0|this._el,k=0|this._fl,S=0|this._gl,_=0|this._hl,x=0;x<32;x+=2)e[x]=t.readInt32BE(4*x),e[x+1]=t.readInt32BE(4*x+4);for(;x<160;x+=2){var R=e[x-30],E=e[x-30+1],A=(R>>>1|E<<31)^(R>>>8|E<<24)^R>>>7,M=(E>>>1|R<<31)^(E>>>8|R<<24)^(E>>>7|R<<25),O=(R=e[x-4],((E=e[x-4+1])>>>19|R<<13)^(R>>>29|E<<3)^(E>>>6|R<<26)),I=e[x-14],C=e[x-14+1],T=e[x-32],P=e[x-32+1],B=M+C|0,N=A+I+d(B,M)|0;N=(N=N+((R>>>19|E<<13)^(E>>>29|R<<3)^R>>>6)+d(B=B+O|0,O)|0)+T+d(B=B+P|0,P)|0,e[x]=N,e[x+1]=B}for(var L=0;L<160;L+=2){N=e[L],B=e[L+1];var H=u(i,r,s),U=u(m,w,y),D=l(i,m),z=l(m,i),V=f(a,v),F=f(v,a),j=o[L+1],K=c(a,h,p),q=c(v,k,S);K=(V=(((g+V+d(F=_+F|0,_)|0)+K+d(F=F+q|0,q)|0)+o[L]+d(F=F+j|0,j)|0)+N+d(F=F+B|0,B)|0,z+U|0),q=D+H+d(K,z)|0,g=p,_=S,p=h,S=k,h=a,k=v,a=n+V+d(v=b+F|0,b)|0,n=s,b=y,s=r,y=w,r=i,w=m,i=V+q+d(m=F+K|0,F)|0}this._al=this._al+m|0,this._bl=this._bl+w|0,this._cl=this._cl+y|0,this._dl=this._dl+b|0,this._el=this._el+v|0,this._fl=this._fl+k|0,this._gl=this._gl+S|0,this._hl=this._hl+_|0,this._ah=this._ah+i+d(this._al,m)|0,this._bh=this._bh+r+d(this._bl,w)|0,this._ch=this._ch+s+d(this._cl,y)|0,this._dh=this._dh+n+d(this._dl,b)|0,this._eh=this._eh+a+d(this._el,v)|0,this._fh=this._fh+h+d(this._fl,k)|0,this._gh=this._gh+p+d(this._gl,S)|0,this._hh=this._hh+g+d(this._hl,_)|0},h.prototype._hash=function(){var t=n.allocUnsafe(64);function e(e,i,r){t.writeInt32BE(e,r),t.writeInt32BE(i,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=h},function(t,e,i){"use strict";(function(e,r){function s(t,e){return t.listeners(e).length}var n,o,a=i(125),h=(t.exports=w,i(221)),c=(w.ReadableState=m,i(14).EventEmitter,i(264)),u=i(193).Buffer,l=e.Uint8Array||function(){},f=((e=Object.create(i(93))).inherits=i(5),i(443)),d=void 0,p=(d=f&&f.debuglog?f.debuglog("stream"):function(){},i(444)),g=(f=i(265),e.inherits(w,c),["error","close","destroy","pause","resume"]);function m(t,e){t=t||{};e=e instanceof(n=n||i(62));var r=(this.objectMode=!!t.objectMode,e&&(this.objectMode=this.objectMode||!!t.readableObjectMode),t.highWaterMark),s=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:e&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(o=o||i(44).StringDecoder,this.decoder=new o(t.encoding),this.encoding=t.encoding)}function w(t){if(n=n||i(62),!(this instanceof w))return new w(t);this._readableState=new m(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy)&&(this._destroy=t.destroy),c.call(this)}function y(t,e,i,r,s){var n,o,a,h,c=t._readableState;return null===e?(c.reading=!1,o=t,(h=c).ended||(h.decoder&&(a=h.decoder.end())&&a.length&&(h.buffer.push(a),h.length+=h.objectMode?1:a.length),h.ended=!0,S(o))):(n=s?n:function(t,e){var i;return!function(t){return u.isBuffer(t)||t instanceof l}(e)&&"string"!=typeof e&&void 0!==e&&!t.objectMode&&(i=new TypeError("Invalid non-string/buffer chunk")),i}(c,e))?t.emit("error",n):c.objectMode||e&&0<e.length?("string"==typeof e||c.objectMode||Object.getPrototypeOf(e)===u.prototype||(a=e,e=u.from(a)),r?c.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):b(t,c,e,!0):c.ended?t.emit("error",new Error("stream.push() after EOF")):(c.reading=!1,!c.decoder||i||(e=c.decoder.write(e),c.objectMode)||0!==e.length?b(t,c,e,!1):x(t,c))):r||(c.reading=!1),!(h=c).ended&&(h.needReadable||h.length<h.highWaterMark||0===h.length)}function b(t,e,i,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",i),t.read(0)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&S(t)),x(t,e)}Object.defineProperty(w.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),w.prototype.destroy=f.destroy,w.prototype._undestroy=f.undestroy,w.prototype._destroy=function(t,e){this.push(null),e(t)},w.prototype.push=function(t,e){var i,r=this._readableState;return r.objectMode?i=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=u.from(t,e),e=""),i=!0),y(this,t,e,!1,i)},w.prototype.unshift=function(t){return y(this,t,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(t){return o=o||i(44).StringDecoder,this._readableState.decoder=new o(t),this._readableState.encoding=t,this};var v=8388608;function k(t,e){var i;return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?(e.flowing&&e.length?e.buffer.head.data:e).length:(t>e.highWaterMark&&(e.highWaterMark=(v<=(i=t)?i=v:(i--,i=(i=(i=(i=(i|=i>>>1)|i>>>2)|i>>>4)|i>>>8)|i>>>16,i++),i)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function S(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(d("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?a.nextTick(_,t):_(t))}function _(t){d("emit readable"),t.emit("readable"),M(t)}function x(t,e){e.readingMore||(e.readingMore=!0,a.nextTick(R,t,e))}function R(t,e){for(var i=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(d("maybeReadMore read 0"),t.read(0),i!==e.length);)i=e.length;e.readingMore=!1}function E(t){d("readable nexttick read 0"),t.read(0)}function A(t,e){e.reading||(d("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),M(t),e.flowing&&!e.reading&&t.read(0)}function M(t){var e=t._readableState;for(d("flow",e.flowing);e.flowing&&null!==t.read(););}function O(t,e){var i;return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):i=function(t,e,i){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():(i?function(t,e){var i=e.head,r=1,s=i.data;for(t-=s.length;i=i.next;){var n=i.data,o=t>n.length?n.length:t;if(o===n.length?s+=n:s+=n.slice(0,t),0==(t-=o)){o===n.length?(++r,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i).data=n.slice(o);break}++r}return e.length-=r,s}:function(t,e){var i=u.allocUnsafe(t),r=e.head,s=1;for(r.data.copy(i),t-=r.data.length;r=r.next;){var n=r.data,o=t>n.length?n.length:t;if(n.copy(i,i.length-t,0,o),0==(t-=o)){o===n.length?(++s,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r).data=n.slice(o);break}++s}return e.length-=s,i})(t,e),r}(t,e.buffer,e.decoder),i)}function I(t){var e=t._readableState;if(0<e.length)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,a.nextTick(C,e,t))}function C(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function T(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}w.prototype.read=function(t){d("read",t),t=parseInt(t,10);var e,i=this._readableState,r=t;return 0!==t&&(i.emittedReadable=!1),0===t&&i.needReadable&&(i.length>=i.highWaterMark||i.ended)?(d("read: emitReadable",i.length,i.ended),(0===i.length&&i.ended?I:S)(this),null):0===(t=k(t,i))&&i.ended?(0===i.length&&I(this),null):(e=i.needReadable,d("need readable",e),(0===i.length||i.length-t<i.highWaterMark)&&d("length less than watermark",e=!0),i.ended||i.reading?d("reading or ended",e=!1):e&&(d("do read"),i.reading=!0,i.sync=!0,0===i.length&&(i.needReadable=!0),this._read(i.highWaterMark),i.sync=!1,i.reading||(t=k(r,i))),null===(e=0<t?O(t,i):null)?(i.needReadable=!0,t=0):i.length-=t,0===i.length&&(i.ended||(i.needReadable=!0),r!==t)&&i.ended&&I(this),null!==e&&this.emit("data",e),e)},w.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},w.prototype.pipe=function(t,e){var i=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t)}function o(){d("onend"),t.end()}n.pipesCount+=1,d("pipe count=%d opts=%j",n.pipesCount,e),e=e&&!1===e.end||t===r.stdout||t===r.stderr?y:o,n.endEmitted?a.nextTick(e):i.once("end",e),t.on("unpipe",(function e(r,s){d("onunpipe"),r===i&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,d("cleanup"),t.removeListener("close",m),t.removeListener("finish",w),t.removeListener("drain",u),t.removeListener("error",g),t.removeListener("unpipe",e),i.removeListener("end",o),i.removeListener("end",y),i.removeListener("data",p),l=!0,!n.awaitDrain||t._writableState&&!t._writableState.needDrain||u())})),c=i;var c,u=function(){var t=c._readableState;d("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(c,"data")&&(t.flowing=!0,M(c))},l=(t.on("drain",u),!1),f=!1;function p(e){d("ondata"),(f=!1)!==t.write(e)||f||((1===n.pipesCount&&n.pipes===t||1<n.pipesCount&&-1!==T(n.pipes,t))&&!l&&(d("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,f=!0),i.pause())}function g(e){d("onerror",e),y(),t.removeListener("error",g),0===s(t,"error")&&t.emit("error",e)}function m(){t.removeListener("finish",w),y()}function w(){d("onfinish"),t.removeListener("close",m),y()}function y(){d("unpipe"),i.unpipe(t)}return i.on("data",p),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?h(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}(t,"error",g),t.once("close",m),t.once("finish",w),t.emit("pipe",i),n.flowing||(d("pipe resume"),i.resume()),t},w.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0!==e.pipesCount)if(1===e.pipesCount)t&&t!==e.pipes||(t=t||e.pipes,e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i));else if(t){var r=T(e.pipes,t);-1!==r&&(e.pipes.splice(r,1),--e.pipesCount,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i))}else{var s=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<n;o++)s[o].emit("unpipe",this,i)}return this},w.prototype.addListener=w.prototype.on=function(t,e){return e=c.prototype.on.call(this,t,e),"data"===t?!1!==this._readableState.flowing&&this.resume():"readable"!==t||(t=this._readableState).endEmitted||t.readableListening||(t.readableListening=t.needReadable=!0,t.emittedReadable=!1,t.reading?t.length&&S(this):a.nextTick(E,this)),e},w.prototype.resume=function(){var t,e=this._readableState;return e.flowing||(d("resume"),e.flowing=!0,t=this,(e=e).resumeScheduled)||(e.resumeScheduled=!0,a.nextTick(A,t,e)),this},w.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},w.prototype.wrap=function(t){var e,i=this,r=this._readableState,s=!1;for(e in t.on("end",(function(){var t;d("wrapped end"),r.decoder&&!r.ended&&(t=r.decoder.end())&&t.length&&i.push(t),i.push(null)})),t.on("data",(function(e){d("wrapped data"),r.decoder&&(e=r.decoder.write(e)),r.objectMode&&null==e||(r.objectMode||e&&e.length)&&!i.push(e)&&(s=!0,t.pause())})),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var n=0;n<g.length;n++)t.on(g[n],this.emit.bind(this,g[n]));return this._read=function(e){d("wrapped _read",e),s&&(s=!1,t.resume())},this},Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),w._fromList=O}).call(this,i(12),i(11))},function(t,e,i){t.exports=i(14).EventEmitter},function(t,e,i){"use strict";var r=i(125);function s(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var i=this,n=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return n||o?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(s,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(r.nextTick(s,i,t),i._writableState&&(i._writableState.errorEmitted=!0)):e&&e(t)}))),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,i){"use strict";t.exports=s;var r=i(62);function s(t){if(!(this instanceof s))return new s(t);r.call(this,t),this._transformState={afterTransform:function(t,e){var i=this._transformState,r=(i.transforming=!1,i.writecb);if(!r)return this.emit("error",new Error("write callback called multiple times"));i.writechunk=null,(i.writecb=null)!=e&&this.push(e),r(t),(i=this._readableState).reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush)&&(this._flush=t.flush),this.on("prefinish",n)}function n(){var t=this;"function"==typeof this._flush?this._flush((function(e,i){o(t,e,i)})):o(this,null,null)}function o(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");t.push(null)}(t=Object.create(i(93))).inherits=i(5),t.inherits(s,r),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,i){throw new Error("_transform() is not implemented")},s.prototype._write=function(t,e,i){var r=this._transformState;r.writecb=i,r.writechunk=t,r.writeencoding=e,!r.transforming&&(i=this._readableState,r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)},s.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},s.prototype._destroy=function(t,e){var i=this;r.prototype._destroy.call(this,t,(function(t){e(t),i.emit("close")}))}},function(t,e,i){"use strict";var r=i(5),s=i(451),n=i(50),o=i(10).Buffer,a=i(268),h=i(190),c=i(191),u=o.alloc(128);function l(t,e){n.call(this,"digest"),"string"==typeof e&&(e=o.from(e));for(var i="sha512"===t||"sha384"===t?128:64,r=(this._alg=t,(this._key=e).length>i?e=("rmd160"===t?new h:c(t)).update(e).digest():e.length<i&&(e=o.concat([e,u],i)),this._ipad=o.allocUnsafe(i)),s=this._opad=o.allocUnsafe(i),a=0;a<i;a++)r[a]=54^e[a],s[a]=92^e[a];this._hash="rmd160"===t?new h:c(t),this._hash.update(r)}r(l,n),l.prototype._update=function(t){this._hash.update(t)},l.prototype._final=function(){var t=this._hash.digest();return("rmd160"===this._alg?new h:c(this._alg)).update(this._opad).update(t).digest()},t.exports=function(t,e){return"rmd160"===(t=t.toLowerCase())||"ripemd160"===t?new l("rmd160",e):"md5"===t?new s(a,e):new l(t,e)}},function(t,e,i){var r=i(188);t.exports=function(t){return(new r).update(t).digest()}},function(t){t.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},function(t,e,i){e.pbkdf2=i(453),e.pbkdf2Sync=i(273)},function(t,e){var i=Math.pow(2,30)-1;t.exports=function(t,e){if("number"!=typeof t)throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if("number"!=typeof e)throw new TypeError("Key length not a number");if(e<0||i<e||e!=e)throw new TypeError("Bad key length")}},function(t,e,i){(function(e,i){e=e.process&&e.process.browser||!e.process||!e.process.version||6<=parseInt(i.version.split(".")[0].slice(1),10)?"utf-8":"binary",t.exports=e}).call(this,i(12),i(11))},function(t,e,i){var r=i(268),s=i(190),n=i(191),o=i(10).Buffer,a=i(271),h=i(272),c=i(274),u=o.alloc(128),l={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function f(t,e,i){for(var a,h="rmd160"===(a=t)||"ripemd160"===a?function(t){return(new s).update(t).digest()}:"md5"===a?r:function(t){return n(a).update(t).digest()},c="sha512"===t||"sha384"===t?128:64,f=(e.length>c?e=h(e):e.length<c&&(e=o.concat([e,u],c)),o.allocUnsafe(c+l[t])),d=o.allocUnsafe(c+l[t]),p=0;p<c;p++)f[p]=54^e[p],d[p]=92^e[p];i=o.allocUnsafe(c+i+4),f.copy(i,0,0,c),this.ipad1=i,this.ipad2=f,this.opad=d,this.alg=t,this.blocksize=c,this.hash=h,this.size=l[t]}f.prototype.run=function(t,e){return t.copy(e,this.blocksize),this.hash(e).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(t,e,i,r,s){a(i,r);for(var n=new f(s=s||"sha1",t=c(t,h,"Password"),(e=c(e,h,"Salt")).length),u=o.allocUnsafe(r),d=o.allocUnsafe(e.length+4),p=(e.copy(d,0,0,e.length),0),g=l[s],m=Math.ceil(r/g),w=1;w<=m;w++){d.writeUInt32BE(w,e.length);for(var y=n.run(d,n.ipad1),b=y,v=1;v<i;v++){b=n.run(b,n.ipad2);for(var k=0;k<g;k++)y[k]^=b[k]}y.copy(u,p),p+=g}return u}},function(t,e,i){var r=i(10).Buffer;t.exports=function(t,e,i){if(r.isBuffer(t))return t;if("string"==typeof t)return r.from(t,e);if(ArrayBuffer.isView(t))return r.from(t.buffer);throw new TypeError(i+" must be a string, a Buffer, a typed array or a DataView")}},function(t,e,i){"use strict";e.readUInt32BE=function(t,e){return(t[0+e]<<24|t[1+e]<<16|t[2+e]<<8|t[3+e])>>>0},e.writeUInt32BE=function(t,e,i){t[0+i]=e>>>24,t[1+i]=e>>>16&255,t[2+i]=e>>>8&255,t[3+i]=255&e},e.ip=function(t,e,i,r){for(var s=0,n=0,o=6;0<=o;o-=2){for(var a=0;a<=24;a+=8)s=s<<1|e>>>a+o&1;for(a=0;a<=24;a+=8)s=s<<1|t>>>a+o&1}for(o=6;0<=o;o-=2){for(a=1;a<=25;a+=8)n=n<<1|e>>>a+o&1;for(a=1;a<=25;a+=8)n=n<<1|t>>>a+o&1}i[r+0]=s>>>0,i[r+1]=n>>>0},e.rip=function(t,e,i,r){for(var s=0,n=0,o=0;o<4;o++)for(var a=24;0<=a;a-=8)s=(s=s<<1|e>>>a+o&1)<<1|t>>>a+o&1;for(o=4;o<8;o++)for(a=24;0<=a;a-=8)n=(n=n<<1|e>>>a+o&1)<<1|t>>>a+o&1;i[r+0]=s>>>0,i[r+1]=n>>>0},e.pc1=function(t,e,i,r){for(var s=0,n=0,o=7;5<=o;o--){for(var a=0;a<=24;a+=8)s=s<<1|e>>a+o&1;for(a=0;a<=24;a+=8)s=s<<1|t>>a+o&1}for(a=0;a<=24;a+=8)s=s<<1|e>>a+o&1;for(o=1;o<=3;o++){for(a=0;a<=24;a+=8)n=n<<1|e>>a+o&1;for(a=0;a<=24;a+=8)n=n<<1|t>>a+o&1}for(a=0;a<=24;a+=8)n=n<<1|t>>a+o&1;i[r+0]=s>>>0,i[r+1]=n>>>0},e.r28shl=function(t,e){return t<<e&268435455|t>>>28-e};var r=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24],s=(e.pc2=function(t,e,i,s){for(var n=0,o=0,a=r.length>>>1,h=0;h<a;h++)n=n<<1|t>>>r[h]&1;for(h=a;h<r.length;h++)o=o<<1|e>>>r[h]&1;i[s+0]=n>>>0,i[s+1]=o>>>0},e.expand=function(t,e,i){for(var r=0,s=0,n=(r=(1&t)<<5|t>>>27,23);15<=n;n-=4)r=r<<6|t>>>n&63;for(n=11;3<=n;n-=4)s=(s|t>>>n&63)<<6;s|=(31&t)<<1|t>>>31,e[i+0]=r>>>0,e[i+1]=s>>>0},[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11]),n=(e.substitute=function(t,e){for(var i=0,r=0;r<4;r++)i=i<<4|s[64*r+(t>>>18-6*r&63)];for(r=0;r<4;r++)i=i<<4|s[256+64*r+(e>>>18-6*r&63)];return i>>>0},[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7]);e.permute=function(t){for(var e=0,i=0;i<n.length;i++)e=e<<1|t>>>n[i]&1;return e>>>0},e.padSplit=function(t,e,i){for(var r=t.toString(2);r.length<e;)r="0"+r;for(var s=[],n=0;n<e;n+=i)s.push(r.slice(n,n+i));return s.join(" ")}},function(t,e,i){"use strict";var r=i(33),s=i(5),n=i(275),o=i(195);function a(){this.tmp=new Array(2),this.keys=null}function h(t){o.call(this,t);var e=new a;this._desState=e,this.deriveKeys(e,t.key)}s(h,o),(t.exports=h).create=function(t){return new h(t)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];h.prototype.deriveKeys=function(t,e){t.keys=new Array(32),r.equal(e.length,this.blockSize,"Invalid key length");var i=n.readUInt32BE(e,0),s=n.readUInt32BE(e,4);n.pc1(i,s,t.tmp,0),i=t.tmp[0],s=t.tmp[1];for(var o=0;o<t.keys.length;o+=2){var a=c[o>>>1];i=n.r28shl(i,a),s=n.r28shl(s,a);n.pc2(i,s,t.keys,o)}},h.prototype._update=function(t,e,i,r){var s=this._desState,o=n.readUInt32BE(t,e);t=n.readUInt32BE(t,e+4);n.ip(o,t,s.tmp,0),o=s.tmp[0],t=s.tmp[1],"encrypt"===this.type?this._encrypt(s,o,t,s.tmp,0):this._decrypt(s,o,t,s.tmp,0),o=s.tmp[0],t=s.tmp[1],n.writeUInt32BE(i,o,r),n.writeUInt32BE(i,t,r+4)},h.prototype._pad=function(t,e){for(var i=t.length-e,r=e;r<t.length;r++)t[r]=i;return!0},h.prototype._unpad=function(t){for(var e=t[t.length-1],i=t.length-e;i<t.length;i++)r.equal(t[i],e);return t.slice(0,t.length-e)},h.prototype._encrypt=function(t,e,i,r,s){for(var o=e,a=i,h=0;h<t.keys.length;h+=2){var c=t.keys[h],u=t.keys[h+1];c=(n.expand(a,t.tmp,0),c^=t.tmp[0],u^=t.tmp[1],n.substitute(c,u)),u=a,a=(o^n.permute(c))>>>0,o=u}n.rip(a,o,r,s)},h.prototype._decrypt=function(t,e,i,r,s){for(var o=i,a=e,h=t.keys.length-2;0<=h;h-=2){var c=t.keys[h],u=t.keys[h+1];c=(n.expand(o,t.tmp,0),c^=t.tmp[0],u^=t.tmp[1],n.substitute(c,u)),u=o,o=(a^n.permute(c))>>>0,a=u}n.rip(o,a,r,s)}},function(t,e,i){var r=i(94),s=i(10).Buffer,n=i(278);e.encrypt=function(t,e){var i=Math.ceil(e.length/16),o=t._cache.length;t._cache=s.concat([t._cache,s.allocUnsafe(16*i)]);for(var a=0;a<i;a++){c=void 0,c=(h=t)._cipher.encryptBlockRaw(h._prev),n(h._prev);var h=c,c=o+16*a;t._cache.writeUInt32BE(h[0],c+0),t._cache.writeUInt32BE(h[1],c+4),t._cache.writeUInt32BE(h[2],c+8),t._cache.writeUInt32BE(h[3],c+12)}var u=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),r(e,u)}},function(t,e){t.exports=function(t){for(var e,i=t.length;i--;){if(255!==(e=t.readUInt8(i))){e++,t.writeUInt8(e,i);break}t.writeUInt8(0,i)}}},function(t){t.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},function(t,e,i){var r=i(126),s=i(10).Buffer,n=i(50),o=i(5),a=i(466),h=i(94),c=i(278);function u(t,e,i,o){n.call(this);var h,u,l,f=s.alloc(4,0);this._cipher=new r.AES(e),e=this._cipher.encryptBlock(f);this._ghash=new a(e),f=this,e=e,i=12===(h=i).length?(f._finID=s.concat([h,s.from([0,0,0,1])]),s.concat([h,s.from([0,0,0,2])])):(e=new a(e),u=(l=h.length)%16,e.update(h),u&&e.update(s.alloc(u=16-u,0)),e.update(s.alloc(8,0)),h=8*l,(u=s.alloc(8)).writeUIntBE(h,0,8),e.update(u),f._finID=e.state,l=s.from(f._finID),c(l),l),this._prev=s.from(i),this._cache=s.allocUnsafe(0),this._secCache=s.allocUnsafe(0),this._decrypt=o,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}o(u,n),u.prototype._update=function(t){!this._called&&this._alen&&(e=16-this._alen%16)<16&&(e=s.alloc(e,0),this._ghash.update(e)),this._called=!0;var e=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(e),this._len+=t.length,e},u.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=h(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(t,e){for(var i=0,r=(t.length!==e.length&&i++,Math.min(t.length,e.length)),s=0;s<r;++s)i+=t[s]^e[s];return i}(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},u.prototype.getAuthTag=function(){if(this._decrypt||!s.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},u.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},u.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length},t.exports=u},function(t,e,i){var r=i(126),s=i(10).Buffer,n=i(50);function o(t,e,i,o){n.call(this),this._cipher=new r.AES(e),this._prev=s.from(i),this._cache=s.allocUnsafe(0),this._secCache=s.allocUnsafe(0),this._decrypt=o,this._mode=t}i(5)(o,n),o.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},o.prototype._final=function(){this._cipher.scrub()},t.exports=o},function(t,e,i){var r=i(67),s=((t.exports=w).simpleSieve=g,w.fermatTest=m,i(40)),n=new s(24),o=new(i(283)),a=new s(1),h=new s(2),c=new s(5),u=(new s(16),new s(8),new s(10)),l=new s(3),f=(new s(7),new s(11)),d=new s(4),p=(new s(12),null);function g(t){for(var e=function(){if(null!==p)return p;var t=[];t[0]=2;for(var e=1,i=3;i<1048576;i+=2){for(var r=Math.ceil(Math.sqrt(i)),s=0;s<e&&t[s]<=r&&i%t[s]!=0;s++);e!==s&&t[s]<=r||(t[e++]=i)}return p=t}(),i=0;i<e.length;i++)if(0===t.modn(e[i]))return 0===t.cmpn(e[i]);return!0}function m(t){var e=s.mont(t);return 0===h.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)}function w(t,e){if(t<16)return new s(2===e||5===e?[140,123]:[140,39]);var i,p;for(e=new s(e);;){for(i=new s(r(Math.ceil(t/8)));i.bitLength()>t;)i.ishrn(1);if(i.isEven()&&i.iadd(a),i.testn(1)||i.iadd(h),e.cmp(h)){if(!e.cmp(c))for(;i.mod(u).cmp(l);)i.iadd(d)}else for(;i.mod(n).cmp(f);)i.iadd(d);if(g(p=i.shrn(1))&&g(i)&&m(p)&&m(i)&&o.test(p)&&o.test(i))return i}}},function(t,e,i){var r=i(40),s=i(150);function n(t){this.rand=t||new s.Rand}(t.exports=n).create=function(t){return new n(t)},n.prototype._randbelow=function(t){var e=t.bitLength(),i=Math.ceil(e/8);do{var s=new r(this.rand.generate(i))}while(0<=s.cmp(t));return s},n.prototype._randrange=function(t,e){return e=e.sub(t),t.add(this._randbelow(e))},n.prototype.test=function(t,e,i){for(var s=t.bitLength(),n=r.mont(t),o=new r(1).toRed(n),a=(e=e||Math.max(1,s/48|0),t.subn(1)),h=0;!a.testn(h);h++);for(var c=t.shrn(h),u=a.toRed(n);0<e;e--){var l=this._randrange(new r(2),a),f=(i&&i(l),l.toRed(n).redPow(c));if(0!==f.cmp(o)&&0!==f.cmp(u)){for(var d=1;d<h;d++){if(0===(f=f.redSqr()).cmp(o))return!1;if(0===f.cmp(u))break}if(d===h)return!1}}return!0},n.prototype.getDivisor=function(t,e){for(var i=t.bitLength(),s=r.mont(t),n=new r(1).toRed(s),o=(e=e||Math.max(1,i/48|0),t.subn(1)),a=0;!o.testn(a);a++);for(var h=t.shrn(a),c=o.toRed(s);0<e;e--){var u=this._randrange(new r(2),o),l=t.gcd(u);if(0!==l.cmpn(1))return l;var f=u.toRed(s).redPow(h);if(0!==f.cmp(n)&&0!==f.cmp(c)){for(var d=1;d<a;d++){if(0===(f=f.redSqr()).cmp(n))return f.fromRed().subn(1).gcd(t);if(0===f.cmp(c))break}if(d===a)return(f=f.redSqr()).fromRed().subn(1).gcd(t)}}return!1}},function(t,e,i){"use strict";(function(e,r){function s(t,e){return t.listeners(e).length}(t.exports=_).ReadableState=S,i(14).EventEmitter;var n,o,a,h,c=i(285),u=i(0).Buffer,l=e.Uint8Array||function(){},f=(e=i(474))&&e.debuglog?e.debuglog("stream"):function(){},d=i(475),p=(e=i(286),i(287).getHighWaterMark),g=i(76).codes,m=g.ERR_INVALID_ARG_TYPE,w=g.ERR_STREAM_PUSH_AFTER_EOF,y=g.ERR_METHOD_NOT_IMPLEMENTED,b=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,v=(i(5)(_,c),e.errorOrDestroy),k=["error","close","destroy","pause","resume"];function S(t,e,r){n=n||i(77),t=t||{},"boolean"!=typeof r&&(r=e instanceof n),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=p(this,t,"readableHighWaterMark",r),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(o=o||i(44).StringDecoder,this.decoder=new o(t.encoding),this.encoding=t.encoding)}function _(t){if(n=n||i(77),!(this instanceof _))return new _(t);var e=this instanceof n;this._readableState=new S(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy)&&(this._destroy=t.destroy),c.call(this)}function x(t,e,i,r,s){f("readableAddChunk",e);var n,o,a,h,c=t._readableState;if(null===e)c.reading=!1,o=t,a=c,f("onEofChunk"),a.ended||(a.decoder&&(h=a.decoder.end())&&h.length&&(a.buffer.push(h),a.length+=a.objectMode?1:h.length),a.ended=!0,a.sync?M(o):(a.needReadable=!1,a.emittedReadable||(a.emittedReadable=!0,O(o))));else if(n=s?n:function(t,e){var i;return!function(t){return u.isBuffer(t)||t instanceof l}(e)&&"string"!=typeof e&&void 0!==e&&!t.objectMode&&(i=new m("chunk",["string","Buffer","Uint8Array"],e)),i}(c,e))v(t,n);else if(c.objectMode||e&&0<e.length)if("string"==typeof e||c.objectMode||Object.getPrototypeOf(e)===u.prototype||(h=e,e=u.from(h)),r)c.endEmitted?v(t,new b):R(t,c,e,!0);else if(c.ended)v(t,new w);else{if(c.destroyed)return!1;c.reading=!1,!c.decoder||i||(e=c.decoder.write(e),c.objectMode)||0!==e.length?R(t,c,e,!1):I(t,c)}else r||(c.reading=!1,I(t,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function R(t,e,i,r){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",i)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&M(t)),I(t,e)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),_.prototype.destroy=e.destroy,_.prototype._undestroy=e.undestroy,_.prototype._destroy=function(t,e){e(t)},_.prototype.push=function(t,e){var i,r=this._readableState;return r.objectMode?i=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=u.from(t,e),e=""),i=!0),x(this,t,e,!1,i)},_.prototype.unshift=function(t){return x(this,t,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(t){for(var e=new(o=o||i(44).StringDecoder)(t),r=(this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding,this._readableState.buffer.head),s="";null!==r;)s+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==s&&this._readableState.buffer.push(s),this._readableState.length=s.length,this};var E=1073741824;function A(t,e){var i;return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?(e.flowing&&e.length?e.buffer.head.data:e).length:(t>e.highWaterMark&&(e.highWaterMark=(E<=(i=t)?i=E:(i--,i=(i=(i=(i=(i|=i>>>1)|i>>>2)|i>>>4)|i>>>8)|i>>>16,i++),i)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function M(t){var e=t._readableState;f("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(f("emitReadable",e.flowing),e.emittedReadable=!0,r.nextTick(O,t))}function O(t){var e=t._readableState;f("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,N(t)}function I(t,e){e.readingMore||(e.readingMore=!0,r.nextTick(C,t,e))}function C(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var i=e.length;if(f("maybeReadMore read 0"),t.read(0),i===e.length)break}e.readingMore=!1}function T(t){var e=t._readableState;e.readableListening=0<t.listenerCount("readable"),e.resumeScheduled&&!e.paused?e.flowing=!0:0<t.listenerCount("data")&&t.resume()}function P(t){f("readable nexttick read 0"),t.read(0)}function B(t,e){f("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),N(t),e.flowing&&!e.reading&&t.read(0)}function N(t){var e=t._readableState;for(f("flow",e.flowing);e.flowing&&null!==t.read(););}function L(t,e){var i;return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):i=e.buffer.consume(t,e.decoder),i)}function H(t){var e=t._readableState;f("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,r.nextTick(U,e,t))}function U(t,e){f("endReadableNT",t.endEmitted,t.length),t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy&&(!(t=e._writableState)||t.autoDestroy&&t.finished)&&e.destroy())}function D(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}_.prototype.read=function(t){f("read",t),t=parseInt(t,10);var e,i=this._readableState,r=t;return 0!==t&&(i.emittedReadable=!1),0===t&&i.needReadable&&((0!==i.highWaterMark?i.length>=i.highWaterMark:0<i.length)||i.ended)?(f("read: emitReadable",i.length,i.ended),(0===i.length&&i.ended?H:M)(this),null):0===(t=A(t,i))&&i.ended?(0===i.length&&H(this),null):(e=i.needReadable,f("need readable",e),(0===i.length||i.length-t<i.highWaterMark)&&f("length less than watermark",e=!0),i.ended||i.reading?f("reading or ended",e=!1):e&&(f("do read"),i.reading=!0,i.sync=!0,0===i.length&&(i.needReadable=!0),this._read(i.highWaterMark),i.sync=!1,i.reading||(t=A(r,i))),null===(e=0<t?L(t,i):null)?(i.needReadable=i.length<=i.highWaterMark,t=0):(i.length-=t,i.awaitDrain=0),0===i.length&&(i.ended||(i.needReadable=!0),r!==t)&&i.ended&&H(this),null!==e&&this.emit("data",e),e)},_.prototype._read=function(t){v(this,new y("_read()"))},_.prototype.pipe=function(t,e){var i=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t)}function o(){f("onend"),t.end()}n.pipesCount+=1,f("pipe count=%d opts=%j",n.pipesCount,e),e=e&&!1===e.end||t===r.stdout||t===r.stderr?g:o,n.endEmitted?r.nextTick(e):i.once("end",e),t.on("unpipe",(function e(r,s){f("onunpipe"),r===i&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,f("cleanup"),t.removeListener("close",d),t.removeListener("finish",p),t.removeListener("drain",h),t.removeListener("error",l),t.removeListener("unpipe",e),i.removeListener("end",o),i.removeListener("end",g),i.removeListener("data",u),c=!0,!n.awaitDrain||t._writableState&&!t._writableState.needDrain||h())})),a=i;var a,h=function(){var t=a._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(a,"data")&&(t.flowing=!0,N(a))},c=(t.on("drain",h),!1);function u(e){f("ondata"),e=t.write(e),f("dest.write",e),!1===e&&((1===n.pipesCount&&n.pipes===t||1<n.pipesCount&&-1!==D(n.pipes,t))&&!c&&(f("false write response, pause",n.awaitDrain),n.awaitDrain++),i.pause())}function l(e){f("onerror",e),g(),t.removeListener("error",l),0===s(t,"error")&&v(t,e)}function d(){t.removeListener("finish",p),g()}function p(){f("onfinish"),t.removeListener("close",d),g()}function g(){f("unpipe"),i.unpipe(t)}return i.on("data",u),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}(t,"error",l),t.once("close",d),t.once("finish",p),t.emit("pipe",i),n.flowing||(f("pipe resume"),i.resume()),t},_.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0!==e.pipesCount)if(1===e.pipesCount)t&&t!==e.pipes||(t=t||e.pipes,e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i));else if(t){var r=D(e.pipes,t);-1!==r&&(e.pipes.splice(r,1),--e.pipesCount,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i))}else{var s=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<n;o++)s[o].emit("unpipe",this,{hasUnpiped:!1})}return this},_.prototype.addListener=_.prototype.on=function(t,e){e=c.prototype.on.call(this,t,e);var i=this._readableState;return"data"===t?(i.readableListening=0<this.listenerCount("readable"),!1!==i.flowing&&this.resume()):"readable"!==t||i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,f("on readable",i.length,i.reading),i.length?M(this):i.reading||r.nextTick(P,this)),e},_.prototype.removeListener=function(t,e){return e=c.prototype.removeListener.call(this,t,e),"readable"===t&&r.nextTick(T,this),e},_.prototype.removeAllListeners=function(t){var e=c.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||r.nextTick(T,this),e},_.prototype.resume=function(){var t,e,i=this._readableState;return i.flowing||(f("resume"),i.flowing=!i.readableListening,t=this,(e=i).resumeScheduled)||(e.resumeScheduled=!0,r.nextTick(B,t,e)),i.paused=!1,this},_.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},_.prototype.wrap=function(t){var e,i=this,r=this._readableState,s=!1;for(e in t.on("end",(function(){var t;f("wrapped end"),r.decoder&&!r.ended&&(t=r.decoder.end())&&t.length&&i.push(t),i.push(null)})),t.on("data",(function(e){f("wrapped data"),r.decoder&&(e=r.decoder.write(e)),r.objectMode&&null==e||(r.objectMode||e&&e.length)&&!i.push(e)&&(s=!0,t.pause())})),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var n=0;n<k.length;n++)t.on(k[n],this.emit.bind(this,k[n]));return this._read=function(e){f("wrapped _read",e),s&&(s=!1,t.resume())},this},"function"==typeof Symbol&&(_.prototype[Symbol.asyncIterator]=function(){return(a=void 0===a?i(477):a)(this)}),Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),_._fromList=L,Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(_.from=function(t,e){return(h=void 0===h?i(478):h)(_,t,e)})}).call(this,i(12),i(11))},function(t,e,i){t.exports=i(14).EventEmitter},function(t,e,i){"use strict";(function(e){function i(t,e){s(t,e),r(t)}function r(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function s(t,e){t.emit("error",e)}t.exports={destroy:function(t,n){var o=this,a=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return a||h?n?n(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(s,this,t)):e.nextTick(s,this,t)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!n&&t?o._writableState?o._writableState.errorEmitted?e.nextTick(r,o):(o._writableState.errorEmitted=!0,e.nextTick(i,o,t)):e.nextTick(i,o,t):n?(e.nextTick(r,o),n(t)):e.nextTick(r,o)}))),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var i=t._readableState,r=t._writableState;i&&i.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this,i(11))},function(t,e,i){"use strict";var r=i(76).codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,i,s){o=s,n=i;var n,o=null!=(e=e).highWaterMark?e.highWaterMark:o?e[n]:null;if(null==o)return t.objectMode?16:16384;if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(s?i:"highWaterMark",o);return Math.floor(o)}}},function(t,e,i){"use strict";(function(e,r){function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){var i=e,r=t,s=i.entry;for(i.entry=null;s;){var n=s.callback;r.pendingcb--,n(void 0),s=s.next}r.corkedRequestsFree.next=i}}(t.exports=x).WritableState=_;var n,o,a={deprecate:i(116)},h=i(285),c=i(0).Buffer,u=e.Uint8Array||function(){},l=(e=i(286),i(287).getHighWaterMark),f=i(76).codes,d=f.ERR_INVALID_ARG_TYPE,p=f.ERR_METHOD_NOT_IMPLEMENTED,g=f.ERR_MULTIPLE_CALLBACK,m=f.ERR_STREAM_CANNOT_PIPE,w=f.ERR_STREAM_DESTROYED,y=f.ERR_STREAM_NULL_VALUES,b=f.ERR_STREAM_WRITE_AFTER_END,v=f.ERR_UNKNOWN_ENCODING,k=e.errorOrDestroy;function S(){}function _(t,e,o){n=n||i(77),t=t||{},"boolean"!=typeof o&&(o=e instanceof n),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=l(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,o=(this.destroyed=!1)===t.decodeStrings,this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){var i=e,s=i._writableState,n=s.sync,o=s.writecb;if("function"!=typeof o)throw new g;var a,h,c,u,l=s;l.writing=!1,l.writecb=null,l.length-=l.writelen,l.writelen=0,t?(l=i,h=n,c=t,u=o,--(a=s).pendingcb,h?(r.nextTick(u,c),r.nextTick(I,l,a),l._writableState.errorEmitted=!0,k(l,c)):(u(c),l._writableState.errorEmitted=!0,k(l,c),I(l,a))):((t=M(s)||i.destroyed)||s.corked||s.bufferProcessing||!s.bufferedRequest||A(i,s),n?r.nextTick(E,i,s,t,o):E(i,s,t,o))},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}i(5)(x,h),_.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e};try{Object.defineProperty(_.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}function x(t){var e=this instanceof(n=n||i(77));if(!e&&!o.call(x,this))return new x(t);this._writableState=new _(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final)&&(this._final=t.final),h.call(this)}function R(t,e,i,r,s,n,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new w("write")):i?t._writev(s,e.onwrite):t._write(s,n,e.onwrite),e.sync=!1}function E(t,e,i,r){var s;i||(i=t,0===(s=e).length&&s.needDrain&&(s.needDrain=!1,i.emit("drain"))),e.pendingcb--,r(),I(t,e)}function A(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){for(var r=e.bufferedRequestCount,n=new Array(r),o=((r=e.corkedRequestsFree).entry=i,0),a=!0;i;)(n[o]=i).isBuf||(a=!1),i=i.next,o+=1;n.allBuffers=a,R(t,e,!0,e.length,n,"",r.finish),e.pendingcb++,e.lastBufferedRequest=null,r.next?(e.corkedRequestsFree=r.next,r.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;i;){var h=i.chunk,c=i.encoding,u=i.callback;if(R(t,e,!1,e.objectMode?1:h.length,h,c,u),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function M(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function O(t,e){t._final((function(i){e.pendingcb--,i&&k(t,i),e.prefinished=!0,t.emit("prefinish"),I(t,e)}))}function I(t,e){var i,s,n=M(e);return n&&(i=t,(s=e).prefinished||s.finalCalled||("function"!=typeof i._final||s.destroyed?(s.prefinished=!0,i.emit("prefinish")):(s.pendingcb++,s.finalCalled=!0,r.nextTick(O,i,s))),0===e.pendingcb)&&(e.finished=!0,t.emit("finish"),e.autoDestroy)&&(!(i=t._readableState)||i.autoDestroy&&i.endEmitted)&&t.destroy(),n}"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(t){return!!o.call(this,t)||this===x&&t&&t._writableState instanceof _}})):o=function(t){return t instanceof this},x.prototype.pipe=function(){k(this,new m)},x.prototype.write=function(t,e,i){var s,n,o,a=this._writableState,h=!1,l=!a.objectMode&&(l=t,c.isBuffer(l)||l instanceof u);return l&&!c.isBuffer(t)&&(s=t,t=c.from(s)),"function"==typeof e&&(i=e,e=null),e=l?"buffer":e||a.defaultEncoding,"function"!=typeof i&&(i=S),a.ending?(s=this,n=i,o=new b,k(s,o),r.nextTick(n,o)):(l||function(t,e,i,s){var n;if(null===i?n=new y:"string"==typeof i||e.objectMode||(n=new d("chunk",["string","Buffer"],i)),!n)return 1;k(t,n),r.nextTick(s,n)}(this,a,t,i))&&(a.pendingcb++,h=function(t,e,i,r,s,n){i||r!==(a=function(t,e,i){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=c.from(e,i)),e}(e,r,s))&&(i=!0,s="buffer",r=a);var o,a=e.objectMode?1:r.length,h=(e.length+=a,e.length<e.highWaterMark);return h||(e.needDrain=!0),e.writing||e.corked?(o=e.lastBufferedRequest,e.lastBufferedRequest={chunk:r,encoding:s,isBuf:i,callback:n,next:null},o?o.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1):R(t,e,!1,a,r,s,n),h}(this,a,l,t,e,i)),h},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||A(this,t))},x.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase()))return this._writableState.defaultEncoding=t,this;throw new v(t)},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),x.prototype._write=function(t,e,i){i(new p("_write()"))},x.prototype._writev=null,x.prototype.end=function(t,e,i){var s=this._writableState;return"function"==typeof t?(i=t,e=t=null):"function"==typeof e&&(i=e,e=null),null!=t&&this.write(t,e),s.corked&&(s.corked=1,this.uncork()),s.ending||(t=this,e=s,s=i,e.ending=!0,I(t,e),s&&(e.finished?r.nextTick(s):t.once("finish",s)),e.ended=!0,t.writable=!1),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),x.prototype.destroy=e.destroy,x.prototype._undestroy=e.undestroy,x.prototype._destroy=function(t,e){e(t)}}).call(this,i(12),i(11))},function(t,e,i){"use strict";t.exports=h;var r=(t=i(76).codes).ERR_METHOD_NOT_IMPLEMENTED,s=t.ERR_MULTIPLE_CALLBACK,n=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=t.ERR_TRANSFORM_WITH_LENGTH_0,a=i(77);function h(t){if(!(this instanceof h))return new h(t);a.call(this,t),this._transformState={afterTransform:function(t,e){var i=this._transformState,r=(i.transforming=!1,i.writecb);if(null===r)return this.emit("error",new s);i.writechunk=null,(i.writecb=null)!=e&&this.push(e),r(t),(i=this._readableState).reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush)&&(this._flush=t.flush),this.on("prefinish",c)}function c(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?u(this,null,null):this._flush((function(e,i){u(t,e,i)}))}function u(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new o;if(t._transformState.transforming)throw new n;t.push(null)}i(5)(h,a),h.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},h.prototype._transform=function(t,e,i){i(new r("_transform()"))},h.prototype._write=function(t,e,i){var r=this._transformState;r.writecb=i,r.writechunk=t,r.writeencoding=e,!r.transforming&&(i=this._readableState,r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)},h.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},h.prototype._destroy=function(t,e){a.prototype._destroy.call(this,t,(function(t){e(t)}))}},function(t,e,i){(function(t){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function s(t,e){function i(){}t.super_=e,i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function n(t,e,i){if(n.isBN(t))return t;this.negative=0,this.words=null,this.length=0,(this.red=null)!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var o;"object"==typeof t?t.exports=n:e.BN=n,(n.BN=n).wordSize=26;try{o=("undefined"!=typeof window&&void 0!==window.Buffer?window:i(484)).Buffer}catch(t){}function a(t,e){return 48<=(e=t.charCodeAt(e))&&e<=57?e-48:65<=e&&e<=70?e-55:97<=e&&e<=102?e-87:void r(!1,"Invalid character in "+t)}function h(t,e,i){var r=a(t,i);return e<=i-1&&(r|=a(t,i-1)<<4),r}function c(t,e,i,s){for(var n=0,o=0,a=Math.min(t.length,i),h=e;h<a;h++){var c=t.charCodeAt(h)-48;n*=s,o=49<=c?c-49+10:17<=c?c-17+10:c,r(0<=c&&o<s,"Invalid character"),n+=o}return n}function u(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(n.isBN=function(t){return t instanceof n||null!==t&&"object"==typeof t&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,e){return 0<t.cmp(e)?t:e},n.min=function(t,e){return t.cmp(e)<0?t:e},n.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);r((e="hex"===e?16:e)===(0|e)&&2<=e&&e<=36);var s=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(s++,this.negative=1),s<t.length&&(16===e?this._parseHex(t,s,i):(this._parseBase(t,e,s),"le"===i&&this._initArray(this.toArray(),e,i)))},n.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},n.prototype._initArray=function(t,e,i){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var s,n,o=0;o<this.length;o++)this.words[o]=0;var a=0;if("be"===i)for(o=t.length-1,s=0;0<=o;o-=3)n=t[o]|t[o-1]<<8|t[o-2]<<16,this.words[s]|=n<<a&67108863,this.words[s+1]=n>>>26-a&67108863,26<=(a+=24)&&(a-=26,s++);else if("le"===i)for(s=o=0;o<t.length;o+=3)n=t[o]|t[o+1]<<8|t[o+2]<<16,this.words[s]|=n<<a&67108863,this.words[s+1]=n>>>26-a&67108863,26<=(a+=24)&&(a-=26,s++);return this._strip()},n.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,n=0,o=0;if("be"===i)for(r=t.length-1;e<=r;r-=2)s=h(t,e,r)<<n,this.words[o]|=67108863&s,18<=n?(n-=18,this.words[o+=1]|=s>>>26):n+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)s=h(t,e,r)<<n,this.words[o]|=67108863&s,18<=n?(n-=18,this.words[o+=1]|=s>>>26):n+=8;this._strip()},n.prototype._parseBase=function(t,e,i){this.words=[0];for(var r=0,s=this.length=1;s<=67108863;s*=e)r++;s=s/e|0;for(var n=t.length-i,o=n%--r,a=Math.min(n,n-o)+i,h=0,u=i;u<a;u+=r)h=c(t,u,u+r,e),this.imuln(s),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!=o){var l=1;for(h=c(t,u,t.length,e),u=0;u<o;u++)l*=e;this.imuln(l),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this._strip()},n.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype._move=function(t){u(t,this)},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},n.prototype._strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(t){n.prototype.inspect=l}else n.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function g(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0,s=(r=(i.length=r)-1|0,(o=(0|t.words[0])*(0|e.words[0]))/67108864|0);i.words[0]=67108863&o;for(var n=1;n<r;n++){for(var o,a=s>>>26,h=67108863&s,c=Math.min(n,e.length-1),u=Math.max(0,n-t.length+1);u<=c;u++)a+=(o=(0|t.words[n-u|0])*(0|e.words[u])+h)/67108864|0,h=67108863&o;i.words[n]=0|h,s=0|a}return 0!==s?i.words[n]=0|s:i.length--,i._strip()}n.prototype.toString=function(t,e){if(e=0|e||1,16===(t=t||10)||"hex"===t){for(var i="",s=0,n=0,o=0;o<this.length;o++){var a=this.words[o],h=(16777215&(a<<s|n)).toString(16);n=a>>>24-s&16777215;26<=(s+=2)&&(s-=26,o--),i=0!==n||o!==this.length-1?f[6-h.length]+h+i:h+i}for(0!==n&&(i=n.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative?"-"+i:i}if(t===(0|t)&&2<=t&&t<=36){var c=d[t],u=p[t];for(i="",(l=this.clone()).negative=0;!l.isZero();){var l,g=l.modrn(u).toString(t);i=(l=l.idivn(u)).isZero()?g+i:f[c-g.length]+g+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative?"-"+i:i}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:2<this.length&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},n.prototype.toJSON=function(){return this.toString(16,2)},o&&(n.prototype.toBuffer=function(t,e){return this.toArrayLike(o,t,e)}),n.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},n.prototype.toArrayLike=function(t,e,i){this._strip();var s=this.byteLength();r(s<=(i=i||Math.max(1,s)),"byte array longer than desired length"),r(0<i,"Requested array length <= 0"),i=i,t=(t=t).allocUnsafe?t.allocUnsafe(i):new t(i);return this["_toArrayLike"+("le"===e?"LE":"BE")](t,s),t},n.prototype._toArrayLikeLE=function(t,e){for(var i=0,r=0,s=0,n=0;s<this.length;s++){var o=this.words[s]<<n|r;t[i++]=255&o,i<t.length&&(t[i++]=o>>8&255),i<t.length&&(t[i++]=o>>16&255),6===n?(i<t.length&&(t[i++]=o>>24&255),n=r=0):(r=o>>>24,n+=2)}if(i<t.length)for(t[i++]=r;i<t.length;)t[i++]=0},n.prototype._toArrayLikeBE=function(t,e){for(var i=t.length-1,r=0,s=0,n=0;s<this.length;s++){var o=this.words[s]<<n|r;t[i--]=255&o,0<=i&&(t[i--]=o>>8&255),0<=i&&(t[i--]=o>>16&255),6===n?(0<=i&&(t[i--]=o>>24&255),n=r=0):(r=o>>>24,n+=2)}if(0<=i)for(t[i--]=r;0<=i;)t[i--]=0},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var e=0;return 4096<=t&&(e+=13,t>>>=13),64<=t&&(e+=7,t>>>=7),8<=t&&(e+=4,t>>>=4),2<=t&&(e+=2,t>>>=2),e+t},n.prototype._zeroBits=function(t){var e;return 0===t?26:((e=0)==(8191&(t=t))&&(e+=13,t>>>=13),0==(127&t)&&(e+=7,t>>>=7),0==(15&t)&&(e+=4,t>>>=4),0==(3&t)&&(e+=2,t>>>=2),0==(1&t)&&e++,e)},n.prototype.bitLength=function(){var t=this.words[this.length-1];t=this._countBits(t);return 26*(this.length-1)+t},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},n.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){for(var e=this.length>t.length?t:this,i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this._strip()},n.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){for(var e,i=this.length>t.length?(e=this,t):(e=t,this),r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this._strip()},n.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){r("number"==typeof t&&0<=t);var e=0|Math.ceil(t/26);t%=26;this._expand(e),0<t&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return 0<t&&(this.words[i]=~this.words[i]&67108863>>26-t),this._strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,e){r("number"==typeof t&&0<=t);var i=t/26|0;t%=26;return this._expand(1+i),this.words[i]=e?this.words[i]|1<<t:this.words[i]&~(1<<t),this._strip()},n.prototype.iadd=function(t){var e,i;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();for(var r=this.length>t.length?(i=this,t):(i=t,this),s=0,n=0;n<r.length;n++)e=(0|i.words[n])+(0|r.words[n])+s,this.words[n]=67108863&e,s=e>>>26;for(;0!==s&&n<i.length;n++)e=(0|i.words[n])+s,this.words[n]=67108863&e,s=e>>>26;if(this.length=i.length,0!==s)this.words[this.length]=s,this.length++;else if(i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this},n.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){var e;if(0!==t.negative)return t.negative=0,e=this.iadd(t),t.negative=1,e._normSign();if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;for(var s=0<r?(i=this,t):(i=t,this),n=0,o=0;o<s.length;o++)n=(e=(0|i.words[o])-(0|s.words[o])+n)>>26,this.words[o]=67108863&e;for(;0!==n&&o<i.length;o++)n=(e=(0|i.words[o])+n)>>26,this.words[o]=67108863&e;if(0===n&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(t){return this.clone().isub(t)};var m=function(t,e,i){var r,s=t.words,n=e.words,o=i.words,a=8191&(h=0|s[0]),h=h>>>13,c=8191&(u=0|s[1]),u=u>>>13,l=8191&(f=0|s[2]),f=f>>>13,d=8191&(p=0|s[3]),p=p>>>13,g=8191&(m=0|s[4]),m=m>>>13,w=8191&(y=0|s[5]),y=y>>>13,b=8191&(v=0|s[6]),v=v>>>13,k=8191&(S=0|s[7]),S=S>>>13,_=8191&(x=0|s[8]),x=x>>>13,R=8191&(s=0|s[9]),E=(s=s>>>13,8191&(A=0|n[0])),A=A>>>13,M=8191&(O=0|n[1]),O=O>>>13,I=8191&(C=0|n[2]),C=C>>>13,T=8191&(P=0|n[3]),P=P>>>13,B=8191&(N=0|n[4]),N=N>>>13,L=8191&(H=0|n[5]),H=H>>>13,U=8191&(D=0|n[6]),D=D>>>13,z=8191&(V=0|n[7]),V=V>>>13,F=8191&(j=0|n[8]),j=j>>>13,K=8191&(n=0|n[9]),q=(n=n>>>13,e=(i.negative=t.negative^e.negative,i.length=19,(0+Math.imul(a,E)|0)+((8191&(t=Math.imul(a,A)+Math.imul(h,E)|0))<<13)|0),(Math.imul(h,A)+(t>>>13)|0)+(e>>>26)|0);e&=67108863,r=Math.imul(c,E),t=Math.imul(c,A)+Math.imul(u,E)|0,W=Math.imul(u,A);var W,X=(q+(r+Math.imul(a,M)|0)|0)+((8191&(t=(t+Math.imul(a,O)|0)+Math.imul(h,M)|0))<<13)|0,Y=(q=((W+Math.imul(h,O)|0)+(t>>>13)|0)+(X>>>26)|0,X&=67108863,r=Math.imul(l,E),t=Math.imul(l,A)+Math.imul(f,E)|0,W=Math.imul(f,A),r=r+Math.imul(c,M)|0,t=(t+Math.imul(c,O)|0)+Math.imul(u,M)|0,W=W+Math.imul(u,O)|0,(q+(r+Math.imul(a,I)|0)|0)+((8191&(t=(t+Math.imul(a,C)|0)+Math.imul(h,I)|0))<<13)|0),G=(q=((W+Math.imul(h,C)|0)+(t>>>13)|0)+(Y>>>26)|0,Y&=67108863,r=Math.imul(d,E),t=Math.imul(d,A)+Math.imul(p,E)|0,W=Math.imul(p,A),r=r+Math.imul(l,M)|0,t=(t+Math.imul(l,O)|0)+Math.imul(f,M)|0,W=W+Math.imul(f,O)|0,r=r+Math.imul(c,I)|0,t=(t+Math.imul(c,C)|0)+Math.imul(u,I)|0,W=W+Math.imul(u,C)|0,(q+(r+Math.imul(a,T)|0)|0)+((8191&(t=(t+Math.imul(a,P)|0)+Math.imul(h,T)|0))<<13)|0),$=(q=((W+Math.imul(h,P)|0)+(t>>>13)|0)+(G>>>26)|0,G&=67108863,r=Math.imul(g,E),t=Math.imul(g,A)+Math.imul(m,E)|0,W=Math.imul(m,A),r=r+Math.imul(d,M)|0,t=(t+Math.imul(d,O)|0)+Math.imul(p,M)|0,W=W+Math.imul(p,O)|0,r=r+Math.imul(l,I)|0,t=(t+Math.imul(l,C)|0)+Math.imul(f,I)|0,W=W+Math.imul(f,C)|0,r=r+Math.imul(c,T)|0,t=(t+Math.imul(c,P)|0)+Math.imul(u,T)|0,W=W+Math.imul(u,P)|0,(q+(r+Math.imul(a,B)|0)|0)+((8191&(t=(t+Math.imul(a,N)|0)+Math.imul(h,B)|0))<<13)|0),J=(q=((W+Math.imul(h,N)|0)+(t>>>13)|0)+($>>>26)|0,$&=67108863,r=Math.imul(w,E),t=Math.imul(w,A)+Math.imul(y,E)|0,W=Math.imul(y,A),r=r+Math.imul(g,M)|0,t=(t+Math.imul(g,O)|0)+Math.imul(m,M)|0,W=W+Math.imul(m,O)|0,r=r+Math.imul(d,I)|0,t=(t+Math.imul(d,C)|0)+Math.imul(p,I)|0,W=W+Math.imul(p,C)|0,r=r+Math.imul(l,T)|0,t=(t+Math.imul(l,P)|0)+Math.imul(f,T)|0,W=W+Math.imul(f,P)|0,r=r+Math.imul(c,B)|0,t=(t+Math.imul(c,N)|0)+Math.imul(u,B)|0,W=W+Math.imul(u,N)|0,(q+(r+Math.imul(a,L)|0)|0)+((8191&(t=(t+Math.imul(a,H)|0)+Math.imul(h,L)|0))<<13)|0),Z=(q=((W+Math.imul(h,H)|0)+(t>>>13)|0)+(J>>>26)|0,J&=67108863,r=Math.imul(b,E),t=Math.imul(b,A)+Math.imul(v,E)|0,W=Math.imul(v,A),r=r+Math.imul(w,M)|0,t=(t+Math.imul(w,O)|0)+Math.imul(y,M)|0,W=W+Math.imul(y,O)|0,r=r+Math.imul(g,I)|0,t=(t+Math.imul(g,C)|0)+Math.imul(m,I)|0,W=W+Math.imul(m,C)|0,r=r+Math.imul(d,T)|0,t=(t+Math.imul(d,P)|0)+Math.imul(p,T)|0,W=W+Math.imul(p,P)|0,r=r+Math.imul(l,B)|0,t=(t+Math.imul(l,N)|0)+Math.imul(f,B)|0,W=W+Math.imul(f,N)|0,r=r+Math.imul(c,L)|0,t=(t+Math.imul(c,H)|0)+Math.imul(u,L)|0,W=W+Math.imul(u,H)|0,(q+(r+Math.imul(a,U)|0)|0)+((8191&(t=(t+Math.imul(a,D)|0)+Math.imul(h,U)|0))<<13)|0),Q=(q=((W+Math.imul(h,D)|0)+(t>>>13)|0)+(Z>>>26)|0,Z&=67108863,r=Math.imul(k,E),t=Math.imul(k,A)+Math.imul(S,E)|0,W=Math.imul(S,A),r=r+Math.imul(b,M)|0,t=(t+Math.imul(b,O)|0)+Math.imul(v,M)|0,W=W+Math.imul(v,O)|0,r=r+Math.imul(w,I)|0,t=(t+Math.imul(w,C)|0)+Math.imul(y,I)|0,W=W+Math.imul(y,C)|0,r=r+Math.imul(g,T)|0,t=(t+Math.imul(g,P)|0)+Math.imul(m,T)|0,W=W+Math.imul(m,P)|0,r=r+Math.imul(d,B)|0,t=(t+Math.imul(d,N)|0)+Math.imul(p,B)|0,W=W+Math.imul(p,N)|0,r=r+Math.imul(l,L)|0,t=(t+Math.imul(l,H)|0)+Math.imul(f,L)|0,W=W+Math.imul(f,H)|0,r=r+Math.imul(c,U)|0,t=(t+Math.imul(c,D)|0)+Math.imul(u,U)|0,W=W+Math.imul(u,D)|0,(q+(r+Math.imul(a,z)|0)|0)+((8191&(t=(t+Math.imul(a,V)|0)+Math.imul(h,z)|0))<<13)|0),tt=(q=((W+Math.imul(h,V)|0)+(t>>>13)|0)+(Q>>>26)|0,Q&=67108863,r=Math.imul(_,E),t=Math.imul(_,A)+Math.imul(x,E)|0,W=Math.imul(x,A),r=r+Math.imul(k,M)|0,t=(t+Math.imul(k,O)|0)+Math.imul(S,M)|0,W=W+Math.imul(S,O)|0,r=r+Math.imul(b,I)|0,t=(t+Math.imul(b,C)|0)+Math.imul(v,I)|0,W=W+Math.imul(v,C)|0,r=r+Math.imul(w,T)|0,t=(t+Math.imul(w,P)|0)+Math.imul(y,T)|0,W=W+Math.imul(y,P)|0,r=r+Math.imul(g,B)|0,t=(t+Math.imul(g,N)|0)+Math.imul(m,B)|0,W=W+Math.imul(m,N)|0,r=r+Math.imul(d,L)|0,t=(t+Math.imul(d,H)|0)+Math.imul(p,L)|0,W=W+Math.imul(p,H)|0,r=r+Math.imul(l,U)|0,t=(t+Math.imul(l,D)|0)+Math.imul(f,U)|0,W=W+Math.imul(f,D)|0,r=r+Math.imul(c,z)|0,t=(t+Math.imul(c,V)|0)+Math.imul(u,z)|0,W=W+Math.imul(u,V)|0,(q+(r+Math.imul(a,F)|0)|0)+((8191&(t=(t+Math.imul(a,j)|0)+Math.imul(h,F)|0))<<13)|0);q=((W+Math.imul(h,j)|0)+(t>>>13)|0)+(tt>>>26)|0,tt&=67108863,r=Math.imul(R,E),t=Math.imul(R,A)+Math.imul(s,E)|0,W=Math.imul(s,A),r=r+Math.imul(_,M)|0,t=(t+Math.imul(_,O)|0)+Math.imul(x,M)|0,W=W+Math.imul(x,O)|0,r=r+Math.imul(k,I)|0,t=(t+Math.imul(k,C)|0)+Math.imul(S,I)|0,W=W+Math.imul(S,C)|0,r=r+Math.imul(b,T)|0,t=(t+Math.imul(b,P)|0)+Math.imul(v,T)|0,W=W+Math.imul(v,P)|0,r=r+Math.imul(w,B)|0,t=(t+Math.imul(w,N)|0)+Math.imul(y,B)|0,W=W+Math.imul(y,N)|0,r=r+Math.imul(g,L)|0,t=(t+Math.imul(g,H)|0)+Math.imul(m,L)|0,W=W+Math.imul(m,H)|0,r=r+Math.imul(d,U)|0,t=(t+Math.imul(d,D)|0)+Math.imul(p,U)|0,W=W+Math.imul(p,D)|0,r=r+Math.imul(l,z)|0,t=(t+Math.imul(l,V)|0)+Math.imul(f,z)|0,W=W+Math.imul(f,V)|0,r=r+Math.imul(c,F)|0,t=(t+Math.imul(c,j)|0)+Math.imul(u,F)|0,W=W+Math.imul(u,j)|0,E=(q+(r+Math.imul(a,K)|0)|0)+((8191&(t=(t+Math.imul(a,n)|0)+Math.imul(h,K)|0))<<13)|0,q=((W+Math.imul(h,n)|0)+(t>>>13)|0)+(E>>>26)|0,E&=67108863,r=Math.imul(R,M),t=Math.imul(R,O)+Math.imul(s,M)|0,W=Math.imul(s,O),r=r+Math.imul(_,I)|0,t=(t+Math.imul(_,C)|0)+Math.imul(x,I)|0,W=W+Math.imul(x,C)|0,r=r+Math.imul(k,T)|0,t=(t+Math.imul(k,P)|0)+Math.imul(S,T)|0,W=W+Math.imul(S,P)|0,r=r+Math.imul(b,B)|0,t=(t+Math.imul(b,N)|0)+Math.imul(v,B)|0,W=W+Math.imul(v,N)|0,r=r+Math.imul(w,L)|0,t=(t+Math.imul(w,H)|0)+Math.imul(y,L)|0,W=W+Math.imul(y,H)|0,r=r+Math.imul(g,U)|0,t=(t+Math.imul(g,D)|0)+Math.imul(m,U)|0,W=W+Math.imul(m,D)|0,r=r+Math.imul(d,z)|0,t=(t+Math.imul(d,V)|0)+Math.imul(p,z)|0,W=W+Math.imul(p,V)|0,r=r+Math.imul(l,F)|0,t=(t+Math.imul(l,j)|0)+Math.imul(f,F)|0,W=W+Math.imul(f,j)|0,A=(q+(r+Math.imul(c,K)|0)|0)+((8191&(t=(t+Math.imul(c,n)|0)+Math.imul(u,K)|0))<<13)|0,q=((W+Math.imul(u,n)|0)+(t>>>13)|0)+(A>>>26)|0,A&=67108863,r=Math.imul(R,I),t=Math.imul(R,C)+Math.imul(s,I)|0,W=Math.imul(s,C),r=r+Math.imul(_,T)|0,t=(t+Math.imul(_,P)|0)+Math.imul(x,T)|0,W=W+Math.imul(x,P)|0,r=r+Math.imul(k,B)|0,t=(t+Math.imul(k,N)|0)+Math.imul(S,B)|0,W=W+Math.imul(S,N)|0,r=r+Math.imul(b,L)|0,t=(t+Math.imul(b,H)|0)+Math.imul(v,L)|0,W=W+Math.imul(v,H)|0,r=r+Math.imul(w,U)|0,t=(t+Math.imul(w,D)|0)+Math.imul(y,U)|0,W=W+Math.imul(y,D)|0,r=r+Math.imul(g,z)|0,t=(t+Math.imul(g,V)|0)+Math.imul(m,z)|0,W=W+Math.imul(m,V)|0,r=r+Math.imul(d,F)|0,t=(t+Math.imul(d,j)|0)+Math.imul(p,F)|0,W=W+Math.imul(p,j)|0,a=(q+(r+Math.imul(l,K)|0)|0)+((8191&(t=(t+Math.imul(l,n)|0)+Math.imul(f,K)|0))<<13)|0,q=((W+Math.imul(f,n)|0)+(t>>>13)|0)+(a>>>26)|0,a&=67108863,r=Math.imul(R,T),t=Math.imul(R,P)+Math.imul(s,T)|0,W=Math.imul(s,P),r=r+Math.imul(_,B)|0,t=(t+Math.imul(_,N)|0)+Math.imul(x,B)|0,W=W+Math.imul(x,N)|0,r=r+Math.imul(k,L)|0,t=(t+Math.imul(k,H)|0)+Math.imul(S,L)|0,W=W+Math.imul(S,H)|0,r=r+Math.imul(b,U)|0,t=(t+Math.imul(b,D)|0)+Math.imul(v,U)|0,W=W+Math.imul(v,D)|0,r=r+Math.imul(w,z)|0,t=(t+Math.imul(w,V)|0)+Math.imul(y,z)|0,W=W+Math.imul(y,V)|0,r=r+Math.imul(g,F)|0,t=(t+Math.imul(g,j)|0)+Math.imul(m,F)|0,W=W+Math.imul(m,j)|0,h=(q+(r+Math.imul(d,K)|0)|0)+((8191&(t=(t+Math.imul(d,n)|0)+Math.imul(p,K)|0))<<13)|0,q=((W+Math.imul(p,n)|0)+(t>>>13)|0)+(h>>>26)|0,h&=67108863,r=Math.imul(R,B),t=Math.imul(R,N)+Math.imul(s,B)|0,W=Math.imul(s,N),r=r+Math.imul(_,L)|0,t=(t+Math.imul(_,H)|0)+Math.imul(x,L)|0,W=W+Math.imul(x,H)|0,r=r+Math.imul(k,U)|0,t=(t+Math.imul(k,D)|0)+Math.imul(S,U)|0,W=W+Math.imul(S,D)|0,r=r+Math.imul(b,z)|0,t=(t+Math.imul(b,V)|0)+Math.imul(v,z)|0,W=W+Math.imul(v,V)|0,r=r+Math.imul(w,F)|0,t=(t+Math.imul(w,j)|0)+Math.imul(y,F)|0,W=W+Math.imul(y,j)|0,M=(q+(r+Math.imul(g,K)|0)|0)+((8191&(t=(t+Math.imul(g,n)|0)+Math.imul(m,K)|0))<<13)|0,q=((W+Math.imul(m,n)|0)+(t>>>13)|0)+(M>>>26)|0,M&=67108863,r=Math.imul(R,L),t=Math.imul(R,H)+Math.imul(s,L)|0,W=Math.imul(s,H),r=r+Math.imul(_,U)|0,t=(t+Math.imul(_,D)|0)+Math.imul(x,U)|0,W=W+Math.imul(x,D)|0,r=r+Math.imul(k,z)|0,t=(t+Math.imul(k,V)|0)+Math.imul(S,z)|0,W=W+Math.imul(S,V)|0,r=r+Math.imul(b,F)|0,t=(t+Math.imul(b,j)|0)+Math.imul(v,F)|0,W=W+Math.imul(v,j)|0,O=(q+(r+Math.imul(w,K)|0)|0)+((8191&(t=(t+Math.imul(w,n)|0)+Math.imul(y,K)|0))<<13)|0,q=((W+Math.imul(y,n)|0)+(t>>>13)|0)+(O>>>26)|0,O&=67108863,r=Math.imul(R,U),t=Math.imul(R,D)+Math.imul(s,U)|0,W=Math.imul(s,D),r=r+Math.imul(_,z)|0,t=(t+Math.imul(_,V)|0)+Math.imul(x,z)|0,W=W+Math.imul(x,V)|0,r=r+Math.imul(k,F)|0,t=(t+Math.imul(k,j)|0)+Math.imul(S,F)|0,W=W+Math.imul(S,j)|0,c=(q+(r+Math.imul(b,K)|0)|0)+((8191&(t=(t+Math.imul(b,n)|0)+Math.imul(v,K)|0))<<13)|0,q=((W+Math.imul(v,n)|0)+(t>>>13)|0)+(c>>>26)|0,c&=67108863,r=Math.imul(R,z),t=Math.imul(R,V)+Math.imul(s,z)|0,W=Math.imul(s,V),r=r+Math.imul(_,F)|0,t=(t+Math.imul(_,j)|0)+Math.imul(x,F)|0,W=W+Math.imul(x,j)|0,u=(q+(r+Math.imul(k,K)|0)|0)+((8191&(t=(t+Math.imul(k,n)|0)+Math.imul(S,K)|0))<<13)|0,q=((W+Math.imul(S,n)|0)+(t>>>13)|0)+(u>>>26)|0,u&=67108863,r=Math.imul(R,F),t=Math.imul(R,j)+Math.imul(s,F)|0,W=Math.imul(s,j),I=(q+(r+Math.imul(_,K)|0)|0)+((8191&(t=(t+Math.imul(_,n)|0)+Math.imul(x,K)|0))<<13)|0,q=((W+Math.imul(x,n)|0)+(t>>>13)|0)+(I>>>26)|0,I&=67108863,C=(q+Math.imul(R,K)|0)+((8191&(t=Math.imul(R,n)+Math.imul(s,K)|0))<<13)|0;return q=(Math.imul(s,n)+(t>>>13)|0)+(C>>>26)|0,C&=67108863,o[0]=e,o[1]=X,o[2]=Y,o[3]=G,o[4]=$,o[5]=J,o[6]=Z,o[7]=Q,o[8]=tt,o[9]=E,o[10]=A,o[11]=a,o[12]=h,o[13]=M,o[14]=O,o[15]=c,o[16]=u,o[17]=I,o[18]=C,0!=q&&(o[19]=q,i.length++),i};function w(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,s=0,n=0;n<i.length-1;n++){for(var o=s,a=(s=0,67108863&r),h=Math.min(n,e.length-1),c=Math.max(0,n-t.length+1);c<=h;c++){var u,l=(0|t.words[n-c])*(0|e.words[c]);a=67108863&(u=(67108863&l)+a|0);s+=(o=(o=o+(l/67108864|0)|0)+(u>>>26)|0)>>>26,o&=67108863}i.words[n]=a,r=o,o=s}return 0!==r?i.words[n]=r:i.length--,i._strip()}function y(t,e,i){return w(t,e,i)}Math.imul||(m=g),n.prototype.mulTo=function(t,e){var i=this.length+t.length;return i=(10===this.length&&10===t.length?m:i<63?g:i<1024?w:y)(this,t,e)},n.prototype.mul=function(t){var e=new n(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},n.prototype.mulf=function(t){var e=new n(null);return e.words=new Array(this.length+t.length),y(this,t,e)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){for(var e=t<0,i=(r("number"==typeof(t=e?-t:t)),r(t<67108864),0),s=0;s<this.length;s++){var n=(0|this.words[s])*t,o=(67108863&n)+(67108863&i);i=(i>>=26)+(n/67108864|0)+(o>>>26);this.words[s]=67108863&o}return 0!==i&&(this.words[s]=i,this.length++),e?this.ineg():this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++)e[i]=t.words[i/26|0]>>>i%26&1;return e}(t);if(0===e.length)return new n(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var s=i.sqr();r<e.length;r++,s=s.sqr())0!==e[r]&&(i=i.mul(s));return i},n.prototype.iushln=function(t){r("number"==typeof t&&0<=t);var e=t%26,i=(t-e)/26,s=67108863>>>26-e<<26-e;if(0!=e){for(var n=0,o=0;o<this.length;o++){var a=this.words[o]&s,h=(0|this.words[o])-a<<e;this.words[o]=h|n,n=a>>>26-e}n&&(this.words[o]=n,this.length++)}if(0!=i){for(o=this.length-1;0<=o;o--)this.words[o+i]=this.words[o];for(o=0;o<i;o++)this.words[o]=0;this.length+=i}return this._strip()},n.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},n.prototype.iushrn=function(t,e,i){r("number"==typeof t&&0<=t),s=e?(e-e%26)/26:0;var s,n=t%26,o=Math.min((t-n)/26,this.length),a=67108863^67108863>>>n<<n,h=i;if(s-=o,s=Math.max(0,s),h){for(var c=0;c<o;c++)h.words[c]=this.words[c];h.length=o}if(0!==o)if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;0<=c&&(0!==u||s<=c);c--){var l=0|this.words[c];this.words[c]=u<<26-n|l>>>n,u=l&a}return h&&0!==u&&(h.words[h.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(t,e,i){return r(0===this.negative),this.iushrn(t,e,i)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){r("number"==typeof t&&0<=t);var e=t%26;t=(t-e)/26;return!(this.length<=t||!(this.words[t]&1<<e))},n.prototype.imaskn=function(t){r("number"==typeof t&&0<=t);var e=t%26;t=(t-e)/26;return r(0===this.negative,"imaskn works only with positive numbers"),this.length<=t?this:(0!=e&&t++,this.length=Math.min(t,this.length),0!=e&&(this.words[this.length-1]&=67108863^67108863>>>e<<e),this._strip())},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&67108864<=this.words[e];e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},n.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,--this.words[e+1];return this._strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,e,i){for(var s=t.length+i,n=(this._expand(s),0),o=0;o<t.length;o++){var a=(0|this.words[o+i])+n,h=(0|t.words[o])*e;n=((a-=67108863&h)>>26)-(h/67108864|0);this.words[o+i]=67108863&a}for(;o<this.length-i;o++)n=(a=(0|this.words[o+i])+n)>>26,this.words[o+i]=67108863&a;if(0!==n){for(r(-1===n),o=n=0;o<this.length;o++)n=(a=-(0|this.words[o])+n)>>26,this.words[o]=67108863&a;this.negative=1}return this._strip()},n.prototype._wordDiv=function(t,e){this.length,t.length;var i,r=this.clone(),s=t,o=0|s.words[s.length-1],a=(0!=(t=26-this._countBits(o))&&(s=s.ushln(t),r.iushln(t),o=0|s.words[s.length-1]),r.length-s.length);if("mod"!==e){(i=new n(null)).length=1+a,i.words=new Array(i.length);for(var h=0;h<i.length;h++)i.words[h]=0}var c=r.clone()._ishlnsubmul(s,1,a);0===c.negative&&(r=c,i)&&(i.words[a]=1);for(var u=a-1;0<=u;u--){var l=67108864*(0|r.words[s.length+u])+(0|r.words[s.length+u-1]);l=Math.min(l/o|0,67108863);for(r._ishlnsubmul(s,l,u);0!==r.negative;)l--,r.negative=0,r._ishlnsubmul(s,1,u),r.isZero()||(r.negative^=1);i&&(i.words[u]=l)}return i&&i._strip(),r._strip(),"div"!==e&&0!=t&&r.iushrn(t),{div:i||null,mod:r}},n.prototype.divmod=function(t,e,i){var s,o,a;return r(!t.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(s=a.div.neg()),"div"!==e&&(o=a.mod.neg(),i)&&0!==o.negative&&o.iadd(t),{div:s,mod:o}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),{div:s="mod"!==e?a.div.neg():s,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(o=a.mod.neg(),i)&&0!==o.negative&&o.isub(t),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new n(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new n(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modrn(t.words[0]))}:this._wordDiv(t,e)},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var e,i,r=this.divmod(t);return r.mod.isZero()||(i=0!==r.div.negative?r.mod.isub(t):r.mod,e=t.ushrn(1),t=t.andln(1),(i=i.cmp(e))<0)||1===t&&0===i?r.div:0!==r.div.negative?r.div.isubn(1):r.div.iaddn(1)},n.prototype.modrn=function(t){for(var e=t<0,i=(r((t=e?-t:t)<=67108863),(1<<26)%t),s=0,n=this.length-1;0<=n;n--)s=(i*s+(0|this.words[n]))%t;return e?-s:s},n.prototype.modn=function(t){return this.modrn(t)},n.prototype.idivn=function(t){for(var e=t<0,i=(r((t=e?-t:t)<=67108863),0),s=this.length-1;0<=s;s--){var n=(0|this.words[s])+67108864*i;this.words[s]=n/t|0,i=n%t}return this._strip(),e?this.ineg():this},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());for(var e=this,i=t.clone(),s=(e=0!==e.negative?e.umod(t):e.clone(),new n(1)),o=new n(0),a=new n(0),h=new n(1),c=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++c;for(var u=i.clone(),l=e.clone();!e.isZero();){for(var f=0,d=1;0==(e.words[0]&d)&&f<26;++f,d<<=1);if(0<f)for(e.iushrn(f);0<f--;)(s.isOdd()||o.isOdd())&&(s.iadd(u),o.isub(l)),s.iushrn(1),o.iushrn(1);for(var p=0,g=1;0==(i.words[0]&g)&&p<26;++p,g<<=1);if(0<p)for(i.iushrn(p);0<p--;)(a.isOdd()||h.isOdd())&&(a.iadd(u),h.isub(l)),a.iushrn(1),h.iushrn(1);0<=e.cmp(i)?(e.isub(i),s.isub(a),o.isub(h)):(i.isub(e),a.isub(s),h.isub(o))}return{a:a,b:h,gcd:i.iushln(c)}},n.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());for(var e,i=this,s=t.clone(),o=(i=0!==i.negative?i.umod(t):i.clone(),new n(1)),a=new n(0),h=s.clone();0<i.cmpn(1)&&0<s.cmpn(1);){for(var c=0,u=1;0==(i.words[0]&u)&&c<26;++c,u<<=1);if(0<c)for(i.iushrn(c);0<c--;)o.isOdd()&&o.iadd(h),o.iushrn(1);for(var l=0,f=1;0==(s.words[0]&f)&&l<26;++l,f<<=1);if(0<l)for(s.iushrn(l);0<l--;)a.isOdd()&&a.iadd(h),a.iushrn(1);0<=i.cmp(s)?(i.isub(s),o.isub(a)):(s.isub(i),a.isub(o))}return(e=0===i.cmpn(1)?o:a).cmpn(0)<0&&e.iadd(t),e},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0;for(var r=i.negative=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var s=e.cmp(i);if(s<0){var n=e;e=i,i=n}else if(0===s||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return 0==(1&this.words[0])},n.prototype.isOdd=function(){return 1==(1&this.words[0])},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){r("number"==typeof t);t=(t-(e=t%26))/26;var e=1<<e;if(this.length<=t)this._expand(1+t),this.words[t]|=e;else{for(var i=e,s=t;0!==i&&s<this.length;s++){var n=0|this.words[s];i=(n+=i)>>>26;n&=67108863,this.words[s]=n}0!==i&&(this.words[s]=i,this.length++)}return this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(t){var e=t<0;return 0===this.negative||e?0===this.negative&&e?1:(this._strip(),e=1<this.length?1:(r((t=e?-t:t)<=67108863,"Number is too big"),(e=0|this.words[0])===t?0:e<t?-1:1),0!==this.negative?0|-e:e):-1},n.prototype.cmp=function(t){return 0!==this.negative&&0===t.negative?-1:0===this.negative&&0!==t.negative?1:(t=this.ucmp(t),0!==this.negative?0|-t:t)},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;0<=i;i--){var r=0|this.words[i],s=0|t.words[i];if(r!=s){r<s?e=-1:s<r&&(e=1);break}}return e},n.prototype.gtn=function(t){return 1===this.cmpn(t)},n.prototype.gt=function(t){return 1===this.cmp(t)},n.prototype.gten=function(t){return 0<=this.cmpn(t)},n.prototype.gte=function(t){return 0<=this.cmp(t)},n.prototype.ltn=function(t){return-1===this.cmpn(t)},n.prototype.lt=function(t){return-1===this.cmp(t)},n.prototype.lten=function(t){return this.cmpn(t)<=0},n.prototype.lte=function(t){return this.cmp(t)<=0},n.prototype.eqn=function(t){return 0===this.cmpn(t)},n.prototype.eq=function(t){return 0===this.cmp(t)},n.red=function(t){return new R(t)},n.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var b={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new n(e,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function k(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function S(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function R(t){var e;"string"==typeof t?(e=n._prime(t),this.m=e.p,this.prime=e):(r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null)}function E(t){R.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new n(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){for(var e,i=t;this.split(i,this.tmp),(e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength())>this.n;);return 0===(t=e<this.n?-1:i.ucmp(this.p))?(i.words[0]=0,i.length=1):0<t?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},s(k,v),k.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)t.words[0]=0,t.length=1;else{var s=t.words[9];for(e.words[e.length++]=4194303&s,r=10;r<t.length;r++){var n=0|t.words[r];t.words[r-10]=(4194303&n)<<4|s>>>22,s=n}0==(t.words[r-10]=s>>>=22)&&10<t.length?t.length-=10:t.length-=9}},k.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1])&&t.length--,t},s(S,v),s(_,v),s(x,v),x.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,s=67108863&r;r>>>=26,t.words[i]=s,e=r}return 0!==e&&(t.words[t.length++]=e),t},n._prime=function(t){if(b[t])return b[t];var e;if("k256"===t)e=new k;else if("p224"===t)e=new S;else if("p192"===t)e=new _;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return b[t]=e},R.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},R.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},R.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(u(t,t.umod(this.m)._forceRed(this)),t)},R.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},R.prototype.add=function(t,e){return this._verify2(t,e),0<=(t=t.add(e)).cmp(this.m)&&t.isub(this.m),t._forceRed(this)},R.prototype.iadd=function(t,e){return this._verify2(t,e),0<=(t=t.iadd(e)).cmp(this.m)&&t.isub(this.m),t},R.prototype.sub=function(t,e){return this._verify2(t,e),(t=t.sub(e)).cmpn(0)<0&&t.iadd(this.m),t._forceRed(this)},R.prototype.isub=function(t,e){return this._verify2(t,e),(t=t.isub(e)).cmpn(0)<0&&t.iadd(this.m),t},R.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},R.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},R.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},R.prototype.isqr=function(t){return this.imul(t,t.clone())},R.prototype.sqr=function(t){return this.mul(t,t)},R.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e)return e=this.m.add(new n(1)).iushrn(2),this.pow(t,e);for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());for(var o=new n(1).toRed(this),a=o.redNeg(),h=this.m.subn(1).iushrn(1),c=new n(2*(c=this.m.bitLength())*c).toRed(this);0!==this.pow(c,h).cmp(a);)c.redIAdd(a);for(var u=this.pow(c,i),l=this.pow(t,i.addn(1).iushrn(1)),f=this.pow(t,i),d=s;0!==f.cmp(o);){for(var p=f,g=0;0!==p.cmp(o);g++)p=p.redSqr();r(g<d);var m=this.pow(u,new n(1).iushln(d-g-1));l=l.redMul(m),u=m.redSqr(),f=f.redMul(u),d=g}return l},R.prototype.invm=function(t){return 0!==(t=t._invmp(this.m)).negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},R.prototype.pow=function(t,e){if(e.isZero())return new n(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new n(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var s=i[0],o=0,a=0,h=e.bitLength()%26;for(0===h&&(h=26),r=e.length-1;0<=r;r--){for(var c=e.words[r],u=h-1;0<=u;u--){var l=c>>u&1;s!==i[0]&&(s=this.sqr(s)),0==l&&0===o?a=0:(o=o<<1|l,(4==++a||0===r&&0===u)&&(s=this.mul(s,i[o]),o=a=0))}h=26}return s},R.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},R.prototype.convertFrom=function(t){return(t=t.clone()).red=null,t},n.mont=function(t){return new E(t)},s(E,R),E.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},E.prototype.convertFrom=function(t){return(t=this.imod(t.mul(this.rinv))).red=null,t},E.prototype.imul=function(t,e){return t.isZero()||e.isZero()?(t.words[0]=0,t.length=1,t):(e=(t=t.imul(e)).maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),0<=(e=t=t.isub(e).iushrn(this.shift)).cmp(this.m)?e=t.isub(this.m):t.cmpn(0)<0&&(e=t.iadd(this.m)),e._forceRed(this))},E.prototype.mul=function(t,e){return(t.isZero()||e.isZero()?new n(0):(e=(t=t.mul(e)).maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),0<=(e=t=t.isub(e).iushrn(this.shift)).cmp(this.m)?e=t.isub(this.m):t.cmpn(0)<0&&(e=t.iadd(this.m)),e))._forceRed(this)},E.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,i(98)(t))},function(t,e,i){"use strict";e.bignum=i(40),e.define=i(486).define,e.base=i(489),e.constants=i(490),e.decoders=i(294),e.encoders=i(292)},function(t,e,i){"use strict";e.der=i(293),e.pem=i(487)},function(t,e,i){"use strict";var r=i(5);const s=i(200).Buffer,n=i(201),o=i(203);function a(t){n.call(this,"der",t)}function h(t){return t<10?"0"+t:t}(t.exports=function(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new a,this.tree._init(t.body)}).prototype.encode=function(t,e){return this.tree._encode(t,e).join()},r(a,n),a.prototype._encodeComposite=function(t,e,i,r){if(t=function(t,e,i,r){let s;if("seqof"===t?t="seq":"setof"===t&&(t="set"),o.tagByName.hasOwnProperty(t))s=o.tagByName[t];else{if("number"!=typeof t||(0|t)!==t)return r.error("Unknown tag: "+t);s=t}return 31<=s?r.error("Multi-octet tag encoding unsupported"):(e||(s|=32),s|o.tagClassByName[i||"universal"]<<6)}(t,e,i,this.reporter),r.length<128){const e=s.alloc(2);return e[0]=t,e[1]=r.length,this._createEncoderBuffer([e,r])}let n=1;for(let t=r.length;256<=t;t>>=8)n++;const a=s.alloc(2+n);a[0]=t,a[1]=128|n;for(let t=1+n,e=r.length;0<e;t--,e>>=8)a[t]=255&e;return this._createEncoderBuffer([a,r])},a.prototype._encodeStr=function(t,e){if("bitstr"===e)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"!==e)return"numstr"===e?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===e?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)||"objDesc"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported");var i=s.alloc(2*t.length);for(let e=0;e<t.length;e++)i.writeUInt16BE(t.charCodeAt(e),2*e);return this._createEncoderBuffer(i)},a.prototype._encodeObjid=function(t,e,i){if("string"==typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s.]+/g);for(let e=0;e<t.length;e++)t[e]|=0}else if(Array.isArray(t)){t=t.slice();for(let e=0;e<t.length;e++)t[e]|=0}if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!i){if(40<=t[1])return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}let r=0;for(let e=0;e<t.length;e++){let i=t[e];for(r++;128<=i;i>>=7)r++}var n=s.alloc(r);let o=n.length-1;for(let e=t.length-1;0<=e;e--){let i=t[e];for(n[o--]=127&i;0<(i>>=7);)n[o--]=128|127&i}return this._createEncoderBuffer(n)},a.prototype._encodeTime=function(t,e){let i;return t=new Date(t),"gentime"===e?i=[h(t.getUTCFullYear()),h(t.getUTCMonth()+1),h(t.getUTCDate()),h(t.getUTCHours()),h(t.getUTCMinutes()),h(t.getUTCSeconds()),"Z"].join(""):"utctime"===e?i=[h(t.getUTCFullYear()%100),h(t.getUTCMonth()+1),h(t.getUTCDate()),h(t.getUTCHours()),h(t.getUTCMinutes()),h(t.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(i,"octstr")},a.prototype._encodeNull=function(){return this._createEncoderBuffer("")},a.prototype._encodeInt=function(t,e){if("string"==typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if("number"==typeof t||s.isBuffer(t)||(e=t.toArray(),!t.sign&&128&e[0]&&e.unshift(0),t=s.from(e)),s.isBuffer(t)){let e=t.length;0===t.length&&e++;const i=s.alloc(e);return t.copy(i),0===t.length&&(i[0]=0),this._createEncoderBuffer(i)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);let i=1;for(let e=t;256<=e;e>>=8)i++;const r=new Array(i);for(let e=r.length-1;0<=e;e--)r[e]=255&t,t>>=8;return 128&r[0]&&r.unshift(0),this._createEncoderBuffer(s.from(r))},a.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},a.prototype._use=function(t,e){return(t="function"==typeof t?t(e):t)._getEncoder("der").tree},a.prototype._skipDefault=function(t,e,i){var r=this._baseState;let s;if(null===r.default)return!1;var n=t.join();if(void 0===r.defaultBuffer&&(r.defaultBuffer=this._encodeValue(r.default,e,i).join()),n.length!==r.defaultBuffer.length)return!1;for(s=0;s<n.length;s++)if(n[s]!==r.defaultBuffer[s])return!1;return!0}},function(t,e,i){"use strict";e.der=i(295),e.pem=i(488)},function(t,e,i){"use strict";var r=i(5);const s=i(40),n=i(95).DecoderBuffer,o=i(201),a=i(203);function h(t){o.call(this,"der",t)}function c(t,e){let i=t.readUInt8(e);if(t.isError(i))return i;var r=a.tagClass[i>>6],s=0==(32&i);if(31==(31&i)){let r=i;for(i=0;128==(128&r);){if(r=t.readUInt8(e),t.isError(r))return r;i=(i<<=7)|127&r}}else i&=31;return{cls:r,primitive:s,tag:i,tagStr:a.tag[i]}}function u(t,e,i){let r=t.readUInt8(i);if(!t.isError(r)){if(!e&&128===r)return null;if(0!=(128&r)){var s=127&r;if(4<s)return t.error("length octect is too long");for(let e=r=0;e<s;e++){r<<=8;var n=t.readUInt8(i);if(t.isError(n))return n;r|=n}}}return r}(t.exports=function(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new h,this.tree._init(t.body)}).prototype.decode=function(t,e){return n.isDecoderBuffer(t)||(t=new n(t,e)),this.tree._decode(t,e)},r(h,o),h.prototype._peekTag=function(t,e,i){var r,s;return!t.isEmpty()&&(r=t.save(),s=c(t,'Failed to peek tag: "'+e+'"'),t.isError(s)?s:(t.restore(r),s.tag===e||s.tagStr===e||s.tagStr+"of"===e||i))},h.prototype._decodeTag=function(t,e,i){var r=c(t,'Failed to decode tag of "'+e+'"');if(t.isError(r))return r;var s=u(t,r.primitive,'Failed to get length of "'+e+'"');if(t.isError(s))return s;if(!i&&r.tag!==e&&r.tagStr!==e&&r.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(!r.primitive&&null===s){if(i=t.save(),r=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"'),t.isError(r))return r;s=t.offset-i.offset,t.restore(i)}return t.skip(s,'Failed to match body of: "'+e+'"')},h.prototype._skipUntilEnd=function(t,e){for(;;){var i=c(t,e);if(t.isError(i))return i;var r=u(t,i.primitive,e);if(t.isError(r))return r;let s;if(s=i.primitive||null!==r?t.skip(r):this._skipUntilEnd(t,e),t.isError(s))return s;if("end"===i.tagStr)break}},h.prototype._decodeList=function(t,e,i,r){for(var s=[];!t.isEmpty();){var n=this._peekTag(t,"end");if(t.isError(n))return n;var o=i.decode(t,"der",r);if(t.isError(o)&&n)break;s.push(o)}return s},h.prototype._decodeStr=function(t,e){var i;if("bitstr"===e)return i=t.readUInt8(),t.isError(i)?i:{unused:i,data:t.raw()};if("bmpstr"!==e)return"numstr"===e?(i=t.raw().toString("ascii"),this._isNumstr(i)?i:t.error("Decoding of string type: numstr unsupported characters")):"octstr"===e||"objDesc"===e?t.raw():"printstr"===e?(i=t.raw().toString("ascii"),this._isPrintstr(i)?i:t.error("Decoding of string type: printstr unsupported characters")):/str$/.test(e)?t.raw().toString():t.error("Decoding of string type: "+e+" unsupported");{var r=t.raw();if(r.length%2==1)return t.error("Decoding of string type: bmpstr length mismatch");let e="";for(let t=0;t<r.length/2;t++)e+=String.fromCharCode(r.readUInt16BE(2*t));return e}},h.prototype._decodeObjid=function(t,e,i){let r;var s=[];let n=0,o=0;for(;!t.isEmpty();)o=t.readUInt8(),n=(n<<=7)|127&o,0==(128&o)&&(s.push(n),n=0);if(128&o&&s.push(n),r=i?s:[s[0]/40|0,s[0]%40].concat(s.slice(1)),e){let t=e[r.join(" ")];void 0!==(t=void 0===t?e[r.join(".")]:t)&&(r=t)}return r},h.prototype._decodeTime=function(t,e){var i=t.raw().toString();let r,s,n,o,a,h;if("gentime"===e)r=0|i.slice(0,4),s=0|i.slice(4,6),n=0|i.slice(6,8),o=0|i.slice(8,10),a=0|i.slice(10,12),h=0|i.slice(12,14);else{if("utctime"!==e)return t.error("Decoding "+e+" time is not supported yet");r=0|i.slice(0,2),s=0|i.slice(2,4),n=0|i.slice(4,6),o=0|i.slice(6,8),a=0|i.slice(8,10),h=0|i.slice(10,12),r=r<70?2e3+r:1900+r}return Date.UTC(r,s-1,n,o,a,h,0)},h.prototype._decodeNull=function(){return null},h.prototype._decodeBool=function(t){var e=t.readUInt8();return t.isError(e)?e:0!==e},h.prototype._decodeInt=function(t,e){t=t.raw();let i=new s(t);return e&&e[i.toString(10)]||i},h.prototype._use=function(t,e){return(t="function"==typeof t?t(e):t)._getDecoder("der").tree}},function(t){t.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},function(t,e,i){var r=i(92),s=i(10).Buffer;t.exports=function(t,e){for(var i,n,o=s.alloc(0),a=0;o.length<e;)i=a++,n=void 0,(n=s.allocUnsafe(4)).writeUInt32BE(i,0),i=n,o=s.concat([o,r("sha1").update(t).update(i).digest()]);return o.slice(0,e)}},function(t,e){t.exports=function(t,e){for(var i=t.length,r=-1;++r<i;)t[r]^=e[r];return t}},function(t,e,i){var r=i(40),s=i(10).Buffer;t.exports=function(t,e){return s.from(t.toRed(r.mont(e.modulus)).redPow(new r(e.publicExponent)).fromRed().toArray())}},function(t,e,i){"use strict";
/*!
 * OutpointMapWids.js - walletdb records
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(4),s=i(2),n=i(6),o=i(55);t.exports=class t{constructor(t,e,i){this.hash=t||r.NULL_HASH,this.index=null!=e?e:-1,this.wids=i||new Set}add(t){return!this.wids.has(t)&&(this.wids.add(t),!0)}remove(t){return this.wids.delete(t)}toWriter(t){return o.serializeWallets(t,this.wids)}getSize(){return o.sizeWallets(this.wids)}toRaw(){var t=this.getSize();return this.toWriter(new n(t)).render()}fromReader(t){return this.wids=o.parseWallets(t),this}fromRaw(t){return this.fromReader(new s(t))}static fromReader(e,i,r){return new t(e,i).fromReader(r)}static fromRaw(e,i,r){return new t(e,i).fromRaw(r)}}},function(t,e,i){"use strict";
/*!
 * BlockMapTxs.js - walletdb records
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(2),s=i(6),n=i(500);t.exports=class t{constructor(t){this.height=null!=t?t:-1,this.txs=new Map}fromRaw(t){var e=new r(t),i=e.readU32();for(let t=0;t<i;t++){var s=e.readHash("hex");s=n.fromReader(s,e);this.txs.set(s.hash,s)}return this}static fromRaw(e,i){return new t(e).fromRaw(i)}getSize(){let t=0;t+=4;for(const e of this.txs.values())t=(t+=32)+e.getSize();return t}toRaw(){var t,e,i=this.getSize(),r=new s(i);for([t,e]of(r.writeU32(this.txs.size),this.txs))r.writeHash(t),e.toWriter(r);return r.render()}add(t,e){let i=this.txs.get(t);return i||(i=new n(t),this.txs.set(t,i)),i.add(e)}remove(t,e){return!!(t=this.txs.get(t))&&!!t.remove(e)&&(0===t.wids.size&&this.txs.delete(t.hash),!0)}toArray(){var t=[];for(const e of this.txs.values())t.push(e);return t}}},function(t,e,i){"use strict";
/*!
 * Balance.js - Balance object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */const r=i(31);t.exports=class{constructor(t,e,i){this.wid=t,this.id=e,this.account=i,this.unconfirmed=0,this.confirmed=0,this.locked=0}equal(t){return this.wid===t.wid&&this.confirmed===t.confirmed&&this.unconfirmed===t.unconfirmed&&this.locked===t.locked}toJSON(t){return{wid:t?void 0:this.wid,id:t?void 0:this.id,account:t?void 0:this.account,unconfirmed:this.unconfirmed,confirmed:this.confirmed,locked:this.locked}}toString(){return"<Balance unconfirmed="+r.btc(this.unconfirmed)+" confirmed="+r.btc(this.confirmed)+" locked="+r.btc(this.locked)+">"}inspect(){return this.toString()}}},function(t,e,i){"use strict";
/*!
 * CoinSelector.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */const r=i(1),s=i(3),n=i(132);i(19);const o=i(25);i(43);const a=i(13),h=i(4),c=i(9),u=i(26);i(31);const l=i(504);class f{constructor(t,e){this.tx=t.clone(),this.coins=[],this.outputValue=0,this.index=0,this.chosen=[],this.change=0,this.fee=f.MIN_FEE,this.selection="value",this.subtractFee=!1,this.subtractIndex=null,this.height=-1,this.depth=-1,this.hardFee=-1,this.rate=f.FEE_RATE,this.maxFee=-1,this.round=!1,this.changeAddress=null,this.estimate=null,this.network=n.testnet,e&&this.fromOptions(e)}fromOptions(t){if(t.selection&&(r("string"==typeof t.selection),this.selection=t.selection),null!=t.subtractFee&&(r("boolean"==typeof t.subtractFee),this.subtractFee=t.subtractFee),null!=t.subtractIndex){let i=null;if(0<(i="number"==typeof t.subtractIndex?[t.subtractIndex]:(r(Array.isArray(t.subtractIndex)),t.subtractIndex)).length){var e=new Set;for(const t of i)r(s.isU32(t)),r(t<this.tx.outputs.length),e.add(t);this.subtractIndex=e,this.subtractFee=!0}}var i;return null!=t.height&&(r(s.isInt(t.height)),r(-1<=t.height),this.height=t.height),null!=t.confirmations&&(r(s.isInt(t.confirmations)),r(-1<=t.confirmations),this.depth=t.confirmations),null!=t.depth&&(r(s.isInt(t.depth)),r(-1<=t.depth),this.depth=t.depth),null!=t.hardFee&&(r(s.isInt(t.hardFee)),r(-1<=t.hardFee),this.hardFee=t.hardFee),null!=t.rate&&(r(s.isU64(t.rate)),this.rate=t.rate),null!=t.maxFee&&(r(s.isInt(t.maxFee)),r(-1<=t.maxFee),this.maxFee=t.maxFee),null!=t.round&&(r("boolean"==typeof t.round),this.round=t.round),t.changeAddress&&("string"==typeof(i=t.changeAddress)?this.changeAddress=a.fromString(i):(r(i instanceof a),this.changeAddress=i)),t.estimate&&(r("function"==typeof t.estimate),this.estimate=t.estimate),this.allowPreInput=t.allowPreInput||!1,t.network&&(this.network=t.network),this}init(t){switch(this.coins=t.slice(),this.outputValue=this.tx.getOutputValue(),this.index=0,this.chosen=[],this.change=0,this.fee=f.MIN_FEE,this.cltvTime=null,this.allowPreInput||(this.tx.inputs.length=0),this.selection){case"all":case"random":this.coins.sort(p);break;case"age":this.coins.sort(g);break;case"value":this.coins.sort(d);break;default:throw new l(`Bad selection type: ${this.selection}.`)}}total(){return this.subtractFee?this.outputValue:this.outputValue+this.fee}isFull(){return this.tx.getInputValue()>=this.total()}isSpendable(t){return!(-1!==this.height&&(t.coinbase?-1===t.height||0<t.height&&this.height<t.height+c.COINBASE_MATURITY:t.isColored||t.lockedByLocktime(this.height,this.network.now())||t.lockedBySequence(this.height,this.network.now())||-1!==this.depth&&t.getDepth(this.height)<this.depth))}getFee(t){let e=0;return e=this.round?u.getRoundFee(t,this.rate):u.getMinFee(t,this.rate),Math.min(e,f.MAX_FEE)}fund(){if(!this.isFull())for(;this.index<this.coins.length;){var t=this.coins[this.index++];if(this.isSpendable(t)){var e=t.getLocktime();if(!(0<e&&(null==this.cltvTime&&(this.cltvTime=e>c.LOCKTIME_THRESHOLD),this.cltvTime!==e>c.LOCKTIME_THRESHOLD))&&((e=t.getSequence())&c.SEQUENCE_DISABLE_FLAG||(null==this.cltvTime&&(this.cltvTime=e&c.SEQUENCE_TYPE_FLAG),this.cltvTime===(e&c.SEQUENCE_TYPE_FLAG)))&&(this.tx.addCoin(t),this.chosen.push(t),"all"!==this.selection)&&this.isFull())break}}}async select(t){if(this.init(t),-1!==this.hardFee?this.selectHard():await this.selectEstimate(),this.isFull())return this.change=this.tx.getInputValue()-this.total(),this;throw new l("Not enough funds.",this.tx.getInputValue(),this.total())}async selectEstimate(){this.fee=f.MIN_FEE,this.fund();var t=new o;this.changeAddress?t.script.fromAddress(this.changeAddress):t.script.createScript(h.ZERO_HASH160),this.tx.outputs.push(t);do{var e=await this.tx.estimateSize(this.estimate);if(this.fee=this.getFee(e),0<this.maxFee&&this.fee>this.maxFee)throw new l("Fee is too high.")}while(this.isFull()||this.fund(),!this.isFull()&&this.index<this.coins.length)}selectHard(){this.fee=Math.min(this.hardFee,f.MAX_FEE),this.fund()}}function d(t,e){return-1===t.height&&-1!==e.height?1:-1!==t.height&&-1===e.height?-1:e.value-t.value}function p(t,e){return.5<Math.random()?1:-1}function g(t,e){return(t=-1===t.height?2147483647:t.height)-(-1===e.height?2147483647:e.height)}f.FEE_RATE=1e4,f.MIN_FEE=1e4,f.MAX_FEE=c.COIN/10,t.exports=f},function(t,e,i){"use strict";
/*!
 * mine.js - mining function for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */i(1);const r=i(8),s=i(129);t.exports=function(t,e,i,n){let o=i;for(t.writeUInt32LE(o,76,!0);o<=n;){if(s.rcmp(r.hash256(t),e)<=0)return o;o++,t.writeUInt32LE(o,76,!0)}return-1}},function(t,e,i){"use strict";
/*!
 * ErrorPacket.js - worker packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(2),s=i(4);var n=i(21);const o=i(17);class a extends n{constructor(t){super(),this.error=t||new Error,this.cmd=o.ERROR}getSize(){var t=this.error;let e=0;switch(e=(e=(e+=s.sizeVarString(h(t.message),"utf8"))+s.sizeVarString(h(t.stack),"utf8"))+s.sizeVarString(h(t.type),"utf8"),typeof t.code){case"number":e=e+1+4;break;case"string":e=(e+=1)+s.sizeVarString(t.code,"utf8");break;default:e+=1}return e}toWriter(t){var e=this.error;switch(t.writeVarString(h(e.message),"utf8"),t.writeVarString(h(e.stack),"utf8"),t.writeVarString(h(e.type),"utf8"),typeof e.code){case"number":t.writeU8(2),t.writeI32(e.code);break;case"string":t.writeU8(1),t.writeVarString(e.code,"utf8");break;default:t.writeU8(0)}return t}fromRaw(t){var e=new r(t,!0),i=this.error;switch(i.message=e.readVarString("utf8"),i.stack=e.readVarString("utf8"),i.type=e.readVarString("utf8"),e.readU8()){case 2:i.code=e.readI32();break;case 1:i.code=e.readVarString("utf8");break;default:i.code=null}return this}static fromRaw(t){return(new a).fromRaw(t)}workerHandle(t){t.emit("error",this.error)}masterHandle(t){t.emit("error",this.error)}}function h(t){return"string"!=typeof t?"":t}t.exports=a},function(t,e,i){"use strict";
/*!
 * CheckResultPacket.js - worker packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(2),s=i(4),n=i(99);var o=i(21);const a=i(17);class h extends o{constructor(t){super(),this.error=t||null,this.cmd=a.CHECKRESULT}getSize(){var t=this.error;let e=0;return t?e=(e=(e=(e=(e+=1)+s.sizeVarString(c(t.message),"utf8"))+s.sizeVarString(c(t.stack),"utf8"))+s.sizeVarString(c(t.code),"utf8"))+1+4:e+=1}toWriter(t){var e=this.error;return e?(t.writeU8(1),t.writeVarString(c(e.message),"utf8"),t.writeVarString(c(e.stack),"utf8"),t.writeVarString(c(e.code),"utf8"),t.writeU8(-1===e.op?255:e.op),t.writeU32(-1===e.ip?4294967295:e.ip)):t.writeU8(0),t}fromRaw(t){var e;return 0!==(t=new r(t,!0)).readU8()&&((e=new n("")).message=t.readVarString("utf8"),e.stack=t.readVarString("utf8"),e.code=t.readVarString("utf8"),e.op=t.readU8(),e.ip=t.readU32(),255===e.op&&(e.op=-1),4294967295===e.ip&&(e.ip=-1),this.error=e),this}static fromRaw(t){return(new h).fromRaw(t)}}function c(t){return"string"!=typeof t?"":t}t.exports=h},function(t,e,i){const r=i(130),s=i(7).ContractType;var n=i(28);const o=i(6),a=i(2),h=i(4);i(20);class c extends n{constructor(t){super(),this.cpNameMap=new Map,this.cpIndexMap=new Map,this.env=t}async loadHistory(){var t;for(t of await this.env.getCps())this.set(t.cid,t),this.cpNameMap.set(t.name,t),this.cpIndexMap.set(r(t.cid),t)}async addItem(t){var e=new u(t);(t=(this.set(e.cid,e),this.getItem(t.cid)))&&this.removeNameIndex(t.name),this.cpNameMap.set(e.name,e),this.cpIndexMap.set(r(e.cid),e),await this.env.setCp(e)}async delItem(t){await this.env.delCp(t.cid),this.cpIndexMap.delete(r(t.cid)),this.removeNameIndex(t.name),this.delete(t.cid)}getItem(t){return this.has(t)?this.get(t):null}getItemByName(t){return this.cpNameMap.get(t)}getRecord(t){return(t=this.get(t))||null}removeNameIndex(t){this.cpNameMap.delete(t)}async canExecute(t){switch(t.oper){case s.cpRegister:if(this.cpIndexMap.has(r(t.cid))||this.has(t.cid)||this.cpNameMap.has(t.name))break;return!0;case s.cpChange:var e=this.getItem(t.cid),i=this.cpNameMap.get(t.name);if(e)return!i||i.cid===t.cid}return!1}getCPList(t,e){let i=[];return 0<t.length?(i=this.where([["cid","include",t]]).paginate(50,1).records(),e.pageCount=this.pageNum):(e.pageSize=e.pageSize||10,i=(t=e.cls?this.where([["cls",e.cls]]):this).paginate(e.pageSize,e.page).records(),e.pageCount=t.pageNum),e.page=Math.min(e.page,e.pageCount),i}getCPListByName(t,e){let i=[];return i=(0<t.length?this.where([["name","include",t]]).paginate(50,1):this.paginate(10,page)).records(),e.pageCount=this.pageNum,e.page=Math.min(e.page,e.pageCount),i}}class u{constructor(t){this.cid=(t=t||{}).cid,this.name=t.name,this.ip=t.ip||"",this.cls=t.cls||"",this.grate=t.grate||0,this.current={hash:"",index:0,address:""},t.current&&(this.current.hash=t.current.hash,this.current.index=t.current.index,this.current.address=t.current.address),this.pubAddress=t.pubAddress||"",this.pubKey=t.pubKey||"",this.signMethod=t.signMethod||"secp256k1",this.register=t.register||"",this.stock=t.stock||{hHeight:0,hSum:0,hPrice:0,hBonus:0,hAds:0,sum:0,price:0,height:0},this.height=t.height,this.status=t.status||0}getSize(){var t=0;return(t+=h.sizeVarString(this.cid,"utf8"))+h.sizeVarString(this.name,"utf8")+h.sizeVarString(this.ip,"utf8")+h.sizeVarString(this.cls,"utf8")+4+h.sizeVarString(this.current.hash,"utf8")+4+h.sizeVarString(this.current.address,"utf8")+h.sizeVarString(this.pubAddress,"utf8")+h.sizeVarString(this.pubKey,"utf8")+h.sizeVarString(this.signMethod,"utf8")+h.sizeVarString(this.register,"hex")+4+4+4+8+8+4+4+4+4+4}toWriter(t){return t.writeVarString(this.cid,"utf8"),t.writeVarString(this.name,"utf8"),t.writeVarString(this.ip,"utf8"),t.writeVarString(this.cls,"utf8"),t.writeU32(this.grate),this.current||(this.current={hash:"",index:0,address:""}),t.writeVarString(this.current.hash,"utf8"),t.writeU32(this.current.index),t.writeVarString(this.current.address,"utf8"),t.writeVarString(this.pubAddress,"utf8"),t.writeVarString(this.pubKey,"utf8"),t.writeVarString(this.signMethod,"utf8"),t.writeVarString(this.register,"hex"),t.writeU32(this.stock.hHeight),t.writeU32(this.stock.hSum),t.writeU32(this.stock.hPrice),t.writeU64(this.stock.hBonus),t.writeU64(this.stock.hAds),t.writeU32(this.stock.sum),t.writeU32(this.stock.price),t.writeU32(this.stock.height),t.writeI32(this.height),t.writeI32(this.status),t}toRaw(){var t=this.getSize();return this.toWriter(new o(t)).render()}fromReader(t){return this.cid=t.readVarString("utf8"),this.name=t.readVarString("utf8"),this.ip=t.readVarString("utf8"),this.cls=t.readVarString("utf8"),this.grate=t.readU32(),this.current={},this.current.hash=t.readVarString("utf8"),this.current.index=t.readU32(),this.current.address=t.readVarString("utf8"),this.pubAddress=t.readVarString("utf8"),this.pubKey=t.readVarString("utf8"),this.signMethod=t.readVarString("utf8"),this.register=t.readVarString("hex"),this.stock={},this.stock.hHeight=t.readU32(),this.stock.hSum=t.readU32(),this.stock.hPrice=t.readU32(),this.stock.hBonus=t.readU64(),this.stock.hAds=t.readU64(),this.stock.sum=t.readU32(),this.stock.price=t.readU32(),this.stock.height=t.readU32(),this.height=t.readI32(),this.status=t.readI32(),this}fromRaw(t){return this.fromReader(new a(t))}clone(){return u.fromRaw(this.toRaw())}static fromReader(t){return(new u).fromReader(t)}static fromRaw(t){return(new u).fromRaw(t)}}c.cpItem=u,t.exports=c},function(t,e,i){
/*!
 * router.js - Intelligent RPC function for vallnet.
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(629),s=i(630),n=i(631);i=i(634),s=[].concat(s).concat(r).concat(n).concat(i);e.route=s,e.openapi=s.reduce((t,e)=>("jsonp"==e.method&&(t[e.name]=e),t),{})},function(t,e,i){"use strict";
/*!
 * dns.js - dns backend for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */e.resolve=function(t,e){return new Promise((t,e)=>{e(new Error("DNS not supported."))})},e.lookup=function(t,e){return new Promise((t,e)=>{e(new Error("DNS not supported."))})}},function(t,e,i){"use strict";
/*!
 * packets.js - packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */var r=i(27);const s=i(24),n=i(544);e.Packet=r,e.types=s,e.typesByVal=n,e.UnknownPacket=i(581),e.FilterLoadPacket=i(582),e.VerackPacket=i(549),e.VersionPacket=i(583),e.PingPacket=i(584),e.PongPacket=i(550),e.GetAddrPacket=i(585),e.AddrPacket=i(551),e.InvPacket=i(311),e.GetDataPacket=i(586),e.NotFoundPacket=i(553),e.GetBlocksPacket=i(555),e.GetHeadersPacket=i(587),e.HeadersPacket=i(588),e.SendHeadersPacket=i(590),e.BlockPacket=i(591),e.TXPacket=i(552),e.RejectPacket=i(593),e.MempoolPacket=i(594),e.FilterAddPacket=i(595),e.FilterClearPacket=i(596),e.MerkleBlockPacket=i(554),e.FeeFilterPacket=i(597),e.SendCmpctPacket=i(598),e.CmpctBlockPacket=i(599),e.GetBlockTxnPacket=i(556),e.BlockTxnPacket=i(557),e.EncinitPacket=i(546),e.EncackPacket=i(547),e.AuthChallengePacket=i(543),e.AuthProposePacket=i(600),e.AuthReplyPacket=i(601),e.fromRaw=function(t,i){switch(t.toUpperCase()){case n[s.VERSION]:return e.VersionPacket.fromRaw(i);case n[s.VERACK]:return e.VerackPacket.fromRaw(i);case n[s.PING]:return e.PingPacket.fromRaw(i);case n[s.PONG]:return e.PongPacket.fromRaw(i);case n[s.GETADDR]:return e.GetAddrPacket.fromRaw(i);case n[s.ADDR]:return e.AddrPacket.fromRaw(i);case n[s.INV]:return e.InvPacket.fromRaw(i);case n[s.GETDATA]:return e.GetDataPacket.fromRaw(i);case n[s.NOTFOUND]:return e.NotFoundPacket.fromRaw(i);case n[s.GETBLOCKS]:return e.GetBlocksPacket.fromRaw(i);case n[s.GETHEADERS]:return e.GetHeadersPacket.fromRaw(i);case n[s.HEADERS]:return e.HeadersPacket.fromRaw(i);case n[s.SENDHEADERS]:return e.SendHeadersPacket.fromRaw(i);case n[s.BLOCK]:return e.BlockPacket.fromRaw(i);case n[s.TX]:return e.TXPacket.fromRaw(i);case n[s.REJECT]:return e.RejectPacket.fromRaw(i);case n[s.MEMPOOL]:return e.MempoolPacket.fromRaw(i);case n[s.FILTERLOAD]:return e.FilterLoadPacket.fromRaw(i);case n[s.FILTERADD]:return e.FilterAddPacket.fromRaw(i);case n[s.FILTERCLEAR]:return e.FilterClearPacket.fromRaw(i);case n[s.MERKLEBLOCK]:return e.MerkleBlockPacket.fromRaw(i);case n[s.FEEFILTER]:return e.FeeFilterPacket.fromRaw(i);case n[s.SENDCMPCT]:return e.SendCmpctPacket.fromRaw(i);case n[s.CMPCTBLOCK]:return e.CmpctBlockPacket.fromRaw(i);case n[s.GETBLOCKTXN]:return e.GetBlockTxnPacket.fromRaw(i);case n[s.BLOCKTXN]:return e.BlockTxnPacket.fromRaw(i);case n[s.ENCINIT]:return e.EncinitPacket.fromRaw(i);case n[s.ENCACK]:return e.EncackPacket.fromRaw(i);case n[s.AUTHCHALLENGE]:return e.AuthChallengePacket.fromRaw(i);case n[s.AUTHREPLY]:return e.AuthReplyPacket.fromRaw(i);case n[s.AUTHPROPOSE]:return e.AuthProposePacket.fromRaw(i);default:return e.UnknownPacket.fromRaw(i)}}},function(t,e,i){"use strict";(function(e){
/*!
 * InvPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1);var s=i(27);const n=i(24),o=i(2),a=i(6),h=i(4),c=i(48),u=i(3).revHex;class l extends s{constructor(t,e=n.INV){super(e),this.items=t||[]}getSize(){var t=0;return(t+=h.sizeVarint(this.items.length))+36*this.items.length}toWriter(t){r(this.items.length<=5e4),t.writeVarint(this.items.length);for(const e of this.items)e.toWriter(t);return t}toRaw(){var t=this.getSize();return this.toWriter(new a(t)).render()}fromReader(t){var e=t.readVarint();r(e<=5e4,"Inv item count too high.");for(let i=0;i<e;i++)this.items.push(c.fromReader(t));return this}fromRaw(t){return this.fromReader(new o(t))}static fromReader(t){return(new l).fromRaw(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new l).fromRaw(t)}async poolHandle(t,e){var i=await e.locker.lock();try{return await this._poolHandle(t,e)}finally{i()}}async _poolHandle(t,e){var i=this.items;if(5e4<i.length)t.increaseBan(100);else{var r=[],s=[];let n=-1;for(const e of i){switch(e.type){case c.types.BLOCK:r.push(e.hash);break;case c.types.TX:s.push(e.hash);break;default:n=e.type;continue}t.invFilter.add(e.hash,"hex")}e.logger.debug("Received Inv packet with %d items( blocks=%d txs=%d ) from %s.",i.length,r.length,s.length,t.hostname()),-1!==n&&e.logger.warning("Peer sent an unknown inv type: %d (%s).",n,t.hostname()),0<r.length&&await this.handleBlockInv(t,e,r),0<s.length&&this.handleTXInv(t,e,s)}}async handleBlockInv(t,e,i){if(r(0<i.length),e.syncing&&(t.loader||e.chain.synced)&&(!e.options.hasWitness()||t.hasWitness())&&!e.checkpoints){var s=[];for(let r=0;r<i.length;r++){var n=i[r];e.chain.hasOrphan(n)?(e.logger.debug("Received known orphan hash (%s %s).",u(n),t.hostname()),e.resolveOrphan(t,n)):await e.hasBlock(n)?r===i.length-1&&0<s.length&&e.sendGetBlocks(t,n):s.push(n)}e.getBlock(t,s)}}formatInsight(){return this.items.map(t=>t.formatInsight())}handleTXInv(t,e,i){r(0<i.length),e.syncing&&!e.chain.synced||e.ensureTX(t,i)}}l.MaxSentItemCount=500,t.exports=l}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * peer.js - peer object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1);var s=i(14);const n=i(3),o=i(36),a=i(602),h=i(579),c=i(66),u=i(48),l=i(29),f=i(211);i(545);const d=i(338),p=i(58),g=i(19),m=i(122),w=c.services,y=u.types,b=i(310),v=b.types,k=i(654),S=i(337),_=i(542);class x extends s{constructor(t){super(),this.pool=t.pool||{blockMap:new Map},this.options=t,this.network=this.options.network,this.logger=this.options.logger.context("peer"),this.locker=new l,this.parser=new a(this.network),this.framer=new h(this.network),this.id=-1,this.socket=null,this.opened=!1,this.outbound=!1,this.loader=!1,this.address=new m,this.local=new m,this.connected=!1,this.destroyed=!1,this.ack=!1,this.handshake=!1,this.time=0,this.lastSend=0,this.lastRecv=0,this.drainSize=0,this.drainQueue=[],this.banScore=0,this.invQueue=[],this.onPacket=null,this.next=null,this.prev=null,this.version=-1,this.services=0,this.height=-1,this.agent=null,this.noRelay=!1,this.preferHeaders=!1,this.hashContinue=null,this.spvFilter=null,this.feeRate=-1,this.bip151=null,this.bip150=null,this.compactMode=-1,this.compactWitness=!1,this.merkleBlock=null,this.merkleTime=-1,this.merkleMatches=0,this.merkleMap=null,this.syncing=!1,this.sentAddr=!1,this.sentGetAddr=!1,this.challenge=null,this.lastPong=-1,this.lastPing=-1,this.minPing=-1,this.blockTime=-1,this.connectTimer=null,this.pingTimer=null,this.invTimer=null,this.stallTimer=null,this.addrFilter=new f(5e3,.001),this.invFilter=new f(5e4,1e-6),this.blockMap=new Map,this.txMap=new Map,this.responseMap=new Map,this.compactBlocks=new Map,this._init()}sendAuthChallengePacket(t){this.send(new b.AuthChallengePacket(t))}sendAuthReplyPacket(t){this.send(new b.AuthReplyPacket(t))}sendAuthProposePacket(t){this.send(new b.AuthProposePacket(t))}setFilter(t){this.spvFilter=t}static fromInbound(t,e){return(t=new x(t)).accept(e),t}static fromOutbound(t,e){return(t=new x(t)).connect(e),t}static fromOptions(t){return new x(new k(t))}_init(){this.parser.on("packet",async t=>{try{await this.readPacket(t)}catch(e){this.logger.error("packet parse error:",t.type,t.cmd,e.message),this.error(e),this.destroy()}}),this.parser.on("error",t=>{this.destroyed||(this.error(t),this.sendReject("malformed","error parsing message"),this.increaseBan(10))})}hostname(){return this.address.hostname}framePacket(t,e,i){return this.bip151&&this.bip151.handshake?this.bip151.packet(t,e):this.framer.packet(t,e,i)}feedParser(t){return(this.bip151&&this.bip151.handshake?this.bip151:this.parser).feed(t)}setCipher(t){r(!this.bip151,"BIP151 already set."),r(this.socket,"Peer must be initialized with a socket."),r(!this.opened,"Cannot set cipher after open."),this.bip151=new S(t),this.bip151.on("error",t=>{this.error(t),this.destroy()}),this.bip151.on("rekey",()=>{this.destroyed||(this.logger.debug("Rekeying with peer (%s).",this.hostname()),this.send(this.bip151.toRekey()))}),this.bip151.on("packet",(t,e)=>{let i=null;try{i=this.parser.parsePayload(t,e)}catch(t){return void this.parser.error(t)}this.parser.emit("packet",i)})}setAuth(t,e){r(this.bip151,"BIP151 not set."),r(!this.bip150,"BIP150 already set."),r(this.socket,"Peer must be initialized with a socket."),r(!this.opened,"Cannot set auth after open."),this.bip150=new _(this.bip151,this.hostname(),this.outbound,t,e),this.bip151.bip150=this.bip150}bind(t){r(!this.socket),this.socket=t,this.socket.once("error",t=>{this.connected&&(this.error(t),this.destroy())}),this.socket.once("close",()=>{this.error("Socket hangup."),this.destroy()}),this.socket.on("drain",()=>{this.handleDrain()}),this.socket.on("data",t=>{this.lastRecv=n.ms(),this.feedParser(t)}),this.socket.setNoDelay(!0)}accept(t){return r(!this.socket),this.address=m.fromSocket(t,this.network),this.address.services=0,this.time=n.ms(),this.outbound=!1,this.connected=!0,this.bind(t),t}connect(t){r(!this.socket);var e=this.options.createSocket(t.port,t.host);return this.address=t,this.outbound=!0,this.connected=!1,this.bind(e),e}async tryOpen(){try{await this.open()}catch(t){this.error(t)}}async open(){try{await this._open()}catch(t){throw this.error(t),this.destroy(),t}}async _open(){this.opened=!0,await this.initConnect(),await this.initStall(),await this.initBIP151(),await this.initBIP150(),await this.initVersion(),await this.finalize(),r(!this.destroyed),this.emit("open")}initConnect(){return this.connected?(r(!this.outbound),Promise.resolve()):new Promise((t,e)=>{const i=()=>{null!=this.connectTimer&&(clearTimeout(this.connectTimer),this.connectTimer=null),this.socket.removeListener("error",r)},r=t=>{i(),e(t)};this.socket.once("connect",()=>{this.time=n.ms(),this.connected=!0,this.emit("connect"),i(),t()}),this.socket.once("error",r),this.connectTimer=setTimeout(()=>{this.connectTimer=null,i(),e(new Error("Connection timed out."))},1e4)})}initStall(){return r(!this.destroyed),r(!this.stallTimer),this.stallTimer=setInterval(()=>{this.maybeTimeout()},x.STALL_INTERVAL),Promise.resolve()}async initBIP151(){if(r(!this.destroyed),this.bip151){r(!this.bip151.completed),this.logger.info("Attempting BIP151 handshake (%s).",this.hostname()),this.send(this.bip151.toEncinit());try{await this.bip151.wait(3e3)}catch(t){this.error(t)}if(this.destroyed)throw new Error("Peer was destroyed during BIP151 handshake.");r(this.bip151.completed),this.bip151.handshake&&(this.logger.info("BIP151 handshake complete (%s).",this.hostname()),this.logger.info("Connection is encrypted (%s).",this.hostname()))}}async initBIP150(){if(r(!this.destroyed),this.bip150){if(r(this.bip151),r(!this.bip150.completed),!this.bip151.handshake)throw new Error("BIP151 handshake was not completed for BIP150.");if(this.logger.info("Attempting BIP150 handshake (%s).",this.hostname()),this.bip150.outbound){if(!this.bip150.peerIdentity)throw new Error("No known identity for peer.");this.send(this.bip150.toChallenge())}await this.bip150.wait(3e3),r(!this.destroyed),r(this.bip150.completed),this.bip150.auth&&(this.logger.info("BIP150 handshake complete (%s).",this.hostname()),this.logger.info("Peer is authed (%s): %s.",this.hostname(),this.bip150.getAddress()))}}async initVersion(){if(r(!this.destroyed),this.sendVersion(),this.ack||(await this.wait(v.VERACK,1e4),r(this.ack)),-1===this.version&&(await this.wait(v.VERSION,1e4),-1==this.version&&this.logger.debug("Waiting for VersionPacket from Peer (%s) but get nothing.",this.hostname()),r(-1!==this.version)),this.destroyed)throw new Error("Peer was destroyed during handshake.");this.handshake=!0,this.logger.debug("Version handshake complete (%s).",this.hostname())}async finalize(){r(!this.destroyed),this.pingTimer=setInterval(()=>{this.sendPing(),this.options.spv||this.pool.sendGetBlocks(this)},x.PING_INTERVAL),this.invTimer=setInterval(()=>{this.flushInv()},x.INV_INTERVAL)}announceBlock(t){if(this.handshake&&!this.destroyed){var e=[];for(const i of t=t&&!Array.isArray(t)?[t]:t)r(i instanceof p),this.invFilter.test(i.hash())||(1===this.compactMode?(this.invFilter.add(i.hash()),this.sendCompactBlock(i)):this.preferHeaders?e.push(i.toHeaders()):e.push(i.toInv()));this.preferHeaders?this.sendHeaders(e):this.queueInv(e)}}announceTX(t){if(this.handshake&&!this.destroyed&&!this.noRelay){var e=[];for(const s of t=Array.isArray(t)?t:[t])if(r(s instanceof g),!this.invFilter.test(s.hash())&&(!this.spvFilter||s.isWatched(this.spvFilter))){if(-1!==this.feeRate){var i=s.hash("hex");if(-1!==(i=this.options.getRate(i))&&i<this.feeRate)continue}e.push(s.toInv())}this.queueInv(e)}}queueInv(t){if(this.handshake&&!this.destroyed){let e=!1;for(const i of t=Array.isArray(t)?t:[t])i.type===y.BLOCK&&(e=!0),this.invQueue.push(i);(100<=this.invQueue.length||e)&&this.flushInv()}}flushInv(){if(!this.destroyed){var t=this.invQueue;if(0!==t.length){this.invQueue=[];var e=[];for(const i of t)this.invFilter.added(i.hash,"hex")&&e.push(i);if(0<e.length)for(let t=0;t<e.length;t+=b.InvPacket.MaxSentItemCount){var i=e.slice(t,t+b.InvPacket.MaxSentItemCount);this.sendInv(i,"flush")}}}}sendInv(t,e){if(this.handshake&&!this.destroyed&&t&&0!==(t=Array.isArray(t)?t:[t]).length){for(const e of t)this.invFilter.add(e.hash,"hex");this.logger.debug("Sending Inv(%s top %s hc. %s) with %d items to %s.",e,n.revHex(t[t.length-1].hash),this.hashContinue?n.revHex(this.hashContinue):"null",t.length,this.hostname()),this.send(new b.InvPacket(t))}}sendHeaders(t){if(this.handshake&&!this.destroyed){for(const e of t=Array.isArray(t)?t:[t])this.invFilter.add(e.hash());if(0!==t.length){this.logger.spam("Serving %d headers to %s.",t.length,this.hostname());for(let i=0;i<t.length;i+=2e3){var e=t.slice(i,i+2e3);this.send(new b.HeadersPacket(e))}}}}sendCompactBlock(t){var e=this.compactWitness;t=d.CompactBlock.fromBlock(t,e);this.send(new b.CmpctBlockPacket(t,e))}sendVersion(){var t=new b.VersionPacket;t.version=this.options.version,t.services=this.options.services,t.time=this.network.now(),t.remote=this.address,t.local.setNull(),t.local.services=this.options.services,t.nonce=this.options.createNonce(this.hostname()),t.agent=this.options.agent,t.height=this.options.getHeight(),t.noRelay=this.options.noRelay,this.send(t)}sendGetAddr(){this.sentGetAddr||(this.sentGetAddr=!0,this.send(new b.GetAddrPacket))}sendPing(){this.handshake&&(this.version<=c.PONG_VERSION?this.send(new b.PingPacket):this.challenge?this.logger.debug("Peer has not responded to ping (%s).",this.hostname()):(this.lastPing=n.ms(),this.challenge=n.nonce(),this.send(new b.PingPacket(this.challenge))))}sendFilterLoad(t){this.handshake&&this.options.spv&&this.services&w.BLOOM&&this.send(new b.FilterLoadPacket(t))}sendFeeRate(t){this.handshake&&this.send(new b.FeeFilterPacket(t))}destroy(){var t,e,i=this.connected;if(!this.destroyed){this.destroyed=!0,this.connected=!1,this.socket.destroy(),this.socket=null,this.bip151&&this.bip151.destroy(),this.bip150&&this.bip150.destroy(),null!=this.pingTimer&&(clearInterval(this.pingTimer),this.pingTimer=null),null!=this.invTimer&&(clearInterval(this.invTimer),this.invTimer=null),null!=this.stallTimer&&(clearInterval(this.stallTimer),this.stallTimer=null),null!=this.connectTimer&&(clearTimeout(this.connectTimer),this.connectTimer=null);for(const t of this.drainQueue)t.reject(new Error("Peer was destroyed."));this.drainSize=0,this.drainQueue=[],this.invQueue=[],this.hashContinue=null;for(const t of this.blockMap.keys())this.pool.blockMap.delete(t);this.blockMap.clear();for(const t of this.txMap.keys())this.pool.txMap.delete(t);this.txMap.clear();for(const t of this.compactBlocks.keys())this.pool.compactBlocks.delete(t);for([t,e]of(this.compactBlocks.clear(),this.responseMap))this.responseMap.delete(t),e.reject(new Error("Peer was destroyed."));this.addrFilter.reset(),this.invFilter.reset(),this.locker.destroy(),this.emit("close",i)}}write(t){if(this.destroyed)throw new Error("Peer is destroyed (write).");this.lastSend=n.ms(),!1===this.socket.write(t)&&this.needsDrain(t.length)}send(t){if(this.destroyed)throw new Error("Peer is destroyed (send).");let e=null;var i;t.type===v.TX&&(i=t.tx,t.witness?i.isCoinbase()||(e=i.witnessHash()):e=i.hash()),this.sendRaw(t.cmd,t.toRaw(),e),this.addTimeout(t)}sendRaw(t,e,i){t=this.framePacket(t,e,i),this.write(t)}drain(){return this.destroyed?Promise.reject(new Error("Peer is destroyed.")):0===this.drainSize?Promise.resolve():new Promise((t,e)=>{this.drainQueue.push(o.job(t,e))})}handleDrain(){var t=this.drainQueue;if((this.drainSize=0)!==t.length){this.drainQueue=[];for(const e of t)e.resolve()}}needsDrain(t){this.drainSize+=t,this.drainSize>=x.DRAIN_MAX&&(this.logger.warning("Peer is not reading: %dmb buffered (%s).",n.mb(this.drainSize),this.hostname()),this.error("Peer stalled (drain)."),this.destroy())}addTimeout(t){var e=x.RESPONSE_TIMEOUT;if(this.outbound)switch(t.type){case v.MEMPOOL:this.request(v.INV,e);break;case v.GETBLOCKS:this.options.isFull()||this.request(v.INV,e);break;case v.GETHEADERS:this.request(v.HEADERS,2*e);break;case v.GETDATA:this.request(v.DATA,2*e);break;case v.GETBLOCKTXN:this.request(v.BLOCKTXN,e)}}fulfill(t){switch(t.type){case v.BLOCK:case v.CMPCTBLOCK:case v.MERKLEBLOCK:case v.TX:case v.NOTFOUND:var e=this.response(v.DATA,t);r(!e||0===e.jobs.length)}return this.response(t.type,t)}maybeTimeout(){var t,e,i,s,o=n.ms();for([t,e]of this.responseMap)if(o>e.timeout)return i=b.typesByVal[t],this.error("Peer is stalling (%s).",i.toLowerCase()),void this.destroy();if(this.merkleBlock&&(r(-1!==this.merkleTime),o>this.merkleTime+x.BLOCK_TIMEOUT))this.error("Peer is stalling (merkleblock)."),this.destroy();else if(this.syncing&&this.loader&&!this.options.isFull()&&o>this.blockTime+x.BLOCK_TIMEOUT)this.error("Peer is stalling (block)."),this.destroy();else{if(this.options.isFull()||!this.syncing){for(const t of this.blockMap.values())if(o>t+x.BLOCK_TIMEOUT)return this.error("Peer is stalling (block)."),void this.destroy();for(const t of this.txMap.values())if(o>t+x.TX_TIMEOUT)return this.error("Peer is stalling (tx)."),void this.destroy();for(const t of this.compactBlocks.values())if(o>t.now+x.RESPONSE_TIMEOUT)return this.error("Peer is stalling (blocktxn)."),void this.destroy()}o>this.time+6e4&&(r(0!==this.time),0===this.lastRecv||0===this.lastSend?(this.error("Peer is stalling (no message)."),this.destroy()):o>this.lastSend+x.TIMEOUT_INTERVAL?(this.error("Peer is stalling (send)."),this.destroy()):(s=this.version<=c.PONG_VERSION?4:1,o>this.lastRecv+x.TIMEOUT_INTERVAL*s?(this.error("Peer is stalling (recv)."),this.destroy()):this.challenge&&o>this.lastPing+x.TIMEOUT_INTERVAL&&(this.error("Peer is stalling (ping)."),this.destroy())))}}request(t,e){if(this.destroyed)return null;let i=this.responseMap.get(t);return i||(i=new R,this.responseMap.set(t,i)),i.setTimeout(e),i}response(t,e){var i=this.responseMap.get(t);return i?(this.responseMap.delete(t),i):null}wait(t,e){return new Promise((i,r)=>{var s;this.destroyed?r(new Error("Peer is destroyed (request).")):((s=this.request(t)).setTimeout(e),s.addJob(i,r))})}error(t){var e;this.destroyed||("string"==typeof t&&(e=n.fmt.apply(n,arguments),(t=new Error(e)).message+=` (${this.hostname()})`),"string"==typeof t.code&&"E"===t.code[0]&&(e=t.code,(t=new Error(e)).code=e,t.message=`Socket Error: ${e} (${this.hostname()})`),this.emit("error",t))}blockType(){return this.options.spv?y.FILTERED_BLOCK:this.options.compact&&this.hasCompactSupport()&&this.hasCompact()?y.CMPCT_BLOCK:this.hasWitness()?y.WITNESS_BLOCK:y.BLOCK}txType(){return this.hasWitness()?y.WITNESS_TX:y.TX}getData(t){this.send(new b.GetDataPacket(t))}getItems(t,e){var i=[];for(const r of e)i.push(new u(t,r));0!==i.length&&this.getData(i)}getBlock(t){this.getItems(this.blockType(),t)}getTX(t){this.getItems(this.txType(),t)}getFullBlock(t){r(!this.options.spv);let e=y.BLOCK;this.hasWitness()&&(e|=u.WITNESS_FLAG),this.getItems(e,[t])}async readPacket(t){if(!this.destroyed)switch(t.type){case v.ENCINIT:case v.ENCACK:case v.AUTHCHALLENGE:case v.AUTHREPLY:case v.AUTHPROPOSE:case v.PONG:try{this.socket.pause(),await this.handlePacket(t)}finally{this.destroyed||this.socket.resume()}break;default:var e=await this.locker.lock();try{this.socket.pause(),await this.handlePacket(t)}finally{this.destroyed||this.socket.resume(),e()}}}async handlePacket(t){if(this.destroyed)throw new Error("Destroyed peer sent a packet.");this.bip151&&this.bip151.job&&!this.bip151.completed&&t.type!==v.ENCINIT&&t.type!==v.ENCACK&&this.bip151.reject(new Error("Message before BIP151 handshake.")),this.bip150&&this.bip150.job&&!this.bip150.completed&&t.type!==v.AUTHCHALLENGE&&t.type!==v.AUTHREPLY&&t.type!==v.AUTHPROPOSE&&this.bip150.reject(new Error("Message before BIP150 auth."));var e=this.fulfill(t);await t.peerHandle(this),this.onPacket&&await this.onPacket(t),this.emit("packet",t),e&&e.resolve(t)}sendGetHeaders(t,e){let i=null,r=(0<(t=new b.GetHeadersPacket(t,e)).locator.length&&(i=n.revHex(t.locator[0])),null);e&&(r=n.revHex(e)),this.logger.debug("Requesting headers packet from peer with getheaders (%s).",this.hostname()),this.logger.debug("Sending getheaders (hash=%s, stop=%s).",i,r),this.send(t)}sendGetBlocks(t,e){let i=null,r=(0<(t=new b.GetBlocksPacket(t,e)).locator.length&&(i=n.revHex(t.locator[0])),null);e&&(r=n.revHex(e)),this.logger.debug("Sending GetBlocks (hash=%s, stop=%s) to %s to request Inv.",i,r,this.hostname()),this.send(t)}sendMempool(){this.handshake&&(this.services&w.BLOOM?(this.logger.debug("Requesting inv packet from peer with mempool (%s).",this.hostname()),this.send(new b.MempoolPacket)):this.logger.debug("Cannot request mempool for non-bloom peer (%s).",this.hostname()))}sendReject(t,e,i,r){var s=b.RejectPacket.fromReason(t,e,i,r);i?this.logger.debug("Rejecting %s %s (%s): code=%s reason=%s.",i,n.revHex(r),this.hostname(),t,e):this.logger.debug("Rejecting packet from %s: code=%s reason=%s.",this.hostname(),t,e),this.logger.debug("Sending reject packet to peer (%s).",this.hostname()),this.send(s)}sendCompact(t){this.services&c.services.WITNESS&&this.version>=c.COMPACT_WITNESS_VERSION?(this.logger.info("Initializing witness compact blocks (%s).",this.hostname()),this.send(new b.SendCmpctPacket(t,2))):this.version>=c.COMPACT_VERSION&&(this.logger.info("Initializing normal compact blocks (%s).",this.hostname()),this.send(new b.SendCmpctPacket(t,1)))}increaseBan(t){return this.banScore+=t,this.banScore>=this.options.banScore&&(this.logger.debug("Ban threshold exceeded (%s).",this.hostname()),this.ban(),!0)}ban(){this.emit("ban")}reject(t,e){return this.sendReject(e.code,e.reason,t,e.hash),this.increaseBan(e.score)}hasServices(t){return(this.services&t)===t}hasWitness(){return 0!=(this.services&w.WITNESS)}hasCompactSupport(){return!(this.version<c.COMPACT_VERSION)&&(!this.options.hasWitness()||!!(this.services&w.WITNESS)&&this.version>=c.COMPACT_WITNESS_VERSION)}hasCompact(){return!(-1===this.compactMode||this.options.hasWitness()&&!this.compactWitness)}inspect(){return"<Peer: handshake="+this.handshake+" host="+this.hostname()+" outbound="+this.outbound+" ping="+this.minPing+">"}}x.DRAIN_MAX=10<<27,x.STALL_INTERVAL=5e3,x.PING_INTERVAL=3e4,x.INV_INTERVAL=5e3,x.RESPONSE_TIMEOUT=3e4,x.BLOCK_TIMEOUT=24e4,x.TX_TIMEOUT=12e4,x.TIMEOUT_INTERVAL=12e5;class R{constructor(){this.timeout=0,this.jobs=[]}addJob(t,e){this.jobs.push(o.job(t,e))}setTimeout(t){this.timeout=n.ms()+t}reject(t){for(const e of this.jobs)e.reject(t);this.jobs.length=0}resolve(t){for(const e of this.jobs)e.resolve(t);this.jobs.length=0}}t.exports=x},function(t,e,i){"use strict";
/*!
 * tcp-browser.js - 浏览器节点的通讯端封装
 */const r=i(1),s=i(655),n=i(14);(i=e).createSocket=function(t,e,i){return r(i),s.connect(`http://${i.proxy}:`+i.wsport,t,e)},i.createServer=function(){const t=new n;return t.listen=async function(e,i){t.emit("listening")},t.close=async function(){},t.address=function(){return{address:"127.0.0.1",port:0}},t.maxConnections=void 0,t}},function(t,e){t.exports=class t{constructor(t){this.indicate=t||0}get value(){return this.indicate}set(t){return this.indicate=this.indicate|t,this}unSet(t){return this.indicate=this.indicate&~t,this}check(t){return!!this.indicate&&(this.indicate&t)==t}static inst(e){return new t(e)}}},function(t,e,i){"use strict";
/*!
 * coins.js - coins object
 */const r=i(1),s=i(135);t.exports=class t{constructor(){this.outputs=new Map}clone(){var e,i,r=new t;for([e,i]of this.outputs)r.outputs.set(e,s.fromRaw(i.toRaw()));return r}add(t,e){return r(t>>>0===t),r(e),this.outputs.set(t,e),e}addOutput(t,e){return this.add(t,s.fromOutput(e))}addCoin(t){return this.add(t.index,s.fromCoin(t))}has(t){return this.outputs.has(t)}isUnspent(t){return!(!(t=this.outputs.get(t))||t.spent)}get(t){return this.outputs.get(t)||null}getOutput(t){return(t=this.outputs.get(t))?t.output:null}getCoin(t){var e=this.outputs.get(t.index);return e?e.toCoin(t):null}spend(t){return!(t=this.get(t))||t.spent?null:(t.spent=!0,t)}remove(t){var e=this.get(t);return e?(this.outputs.delete(t),e):null}isEmpty(){return 0===this.outputs.size}fromTX(t,e,i){r("number"==typeof e),r("number"==typeof i);for(let r=0;r<t.outputs.length;r++){var n;t.outputs[r].script.isUnspendable()||(n=s.fromTX(t,r,e,i),this.outputs.set(r,n))}return this}static fromTX(e,i,r){return(new t).fromTX(e,i,r)}}},function(t,e,i){"use strict";(function(t){
/*!
 * compress.js - coin compressor for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=i(23),n=i(4),o=i(9),a=i(16),h=t.alloc(0);function c(t){if(0!==t.length)switch(t[0]){case 2:case 3:return 33===t.length;case 4:return 65!==t.length?void 0:s.publicKeyVerify(t);default:return}}e.pack=function(t,e){return e.writeVarint(t.value),function(t,e){if(i=t.getPubkeyhash(!0))e.writeU8(0),e.writeBytes(i);else if(i=t.getScripthash())e.writeU8(1),e.writeBytes(i);else{var i;if((i=t.getPubkey(!0))&&c(i))return i=function(t){let e;switch(t[0]){case 2:case 3:e=t;break;case 4:(e=s.publicKeyConvert(t,!0))[0]=4|1&t[64];break;default:throw new Error("Bad point format.")}return r(33===e.length),e}(i),void e.writeBytes(i);e.writeVarint(t.raw.length+6),e.writeBytes(t.raw)}}(t.script,e),e},e.unpack=function(t,e){return t.value=e.readVarint(),function(t,e){switch(e.readU8()){case 0:var i=e.readBytes(20,!0);t.createScript(i);break;case 1:i=e.readBytes(20,!0),t.createScript(i,a.types.SCRIPTHASH);break;case 2:case 3:case 4:case 5:--e.offset,i=function(t){var e=t[0];switch(r(33===t.length),e){case 2:case 3:return t;case 4:t[0]=2;break;case 5:t[0]=3;break;default:throw new Error("Bad point format.")}var i=s.publicKeyConvert(t,!1);return t[0]=e,i}(e.readBytes(33,!0)),t.createScript(i,a.types.PUBKEY);break;default:--e.offset,(i=e.readVarint()-6)>o.MAX_SCRIPT_SIZE?(t.createScript(h,a.types.NULLDATA),e.seek(i)):(i=e.readBytes(i),t.fromRaw(i))}}(t.script,e),t},e.size=function(t){var e=0;return(e+=n.sizeVarint(t.value))+((e=t.script).isPubkeyhash(!0)||e.isScripthash()?21:(t=e.getPubkey(!0))&&c(t)?33:(t=0,(t+=n.sizeVarint(e.raw.length+6))+e.raw.length))}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * chaindb.js - blockchain data management for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=i(3),n=i(2),o=i(6),a=i(31),h=i(4),c=i(18),u=i(47),l=i(230),f=i(154),d=i(401),p=i(52),g=i(58),m=i(41),w=i(28),y=i(13),b=i(321),v=i(322),k=i(135),S=h.U8,_=h.U32,{getVerifyMsg:x,BlockFinalType:R,ContractEnvType:E,ContractType:A}=i(7);var M=i(63);const O=i(42),I=i(19),C=i(51),T=i(100),P=i(25),B=i(8),N=i(133),L=i(9),H=i(147),U=i(140),D=U.scItem,z=i(329),V=i(307),F=V.cpItem,j=i(118),K=j.vpItem,q=i(330),W=q.vpItem,X=i(617),Y=i(142),G=Y.ErItem,$=i(143),J=$.ErAbolishItem,Z=i(212),Q=Z.EnchancementItem;i(43);const tt=i(331),et=i(102),{opcodes:it,nestingCodes:rt}=i(22),st=i(108),nt=i(23),ot=i(32),at=i(30).VerifyError;class ht extends M{constructor(t){super(),this.chain=t,this.eid="chaindb",this.fromOptions(t.options),this.db=f(this.options),this.stateCache=new lt(this.network),this.state=new ut,this.pending=null,this.current=null,this.coinCache=new p(this.options.coinCache),this.cacheHash=new p(this.options.entryCache),this.cacheHeight=new p(this.options.entryCache),this.autoTaskMgr=new H(this),this.propList=new j(this),this.htlcList=new q(this),this.$voteMgr=new X(this),this.transactionList=new z(this),this.cpList=new V(this),this.scList=new U(this),this.erList=new Y(this),this.erAbList=new $(this),this.enCpList=new Z(this,{type:"cp"}),this.middleHashChain=new Set}get hmacConnection(){return this.node.specialCp.content()}get voteMgr(){return this.$voteMgr}get mode(){return E.Block}fromOptions(t){this.options=t,this.node=t.node,this.network=t.network,this.logger=t.logger.context("chaindb")}get curHeight(){return this.chain.height}get finder(){return this.node.getTXFromAll?this.node.getTXFromAll.bind(this.node):()=>{}}get tidCreator(){return d.tx}rpcExecute(){return this.node.rpc.execute.apply(this.node.rpc,arguments)}createGenesisCoinbase(t,i){var r,s=new I,n=new T,o=((r=((r=(n.script.pushInt(0),n.script.pushData(h.ZERO_HASH160),e.allocUnsafe(4))).writeUInt32LE(0,0,!0),n.script.pushData(r),n.script.pushData(h.ZERO_U64),n.script.compile(),n.witness.push(h.ZERO_HASH),n.witness.compile(),s.inputs.push(n),new P)).script.createScript(h.ZERO_HASH160),r.value=L.ORIGINAL,s.outputs.push(r),h.ZERO_HASH),a=[],[a,,]=(a.push(h.ZERO_HASH),N.createRoot(a));a=B.root256(a,o);return(o=new P).script.fromCommitment(a),s.outputs.push(o),n.script.setData(1,i),n.script.compile(),r.script.fromAddress(t.addresses[0]),s}dummyInput(){return T.fromOutpoint(new m(h.NULL_HASH,0))}createGenesisBlock(t){if(!t.addresses||t.addresses.length<11)throw new Error("addresses length expect 11.");let i=t.flags;i=i||e.from("In the name of Athena: Of the user, By the user, and For the user.","ascii");var r=this.createGenesisCoinbase(t,i),n=this.network.genesisId,o=new C,[o,,]=(o.addInput(this.dummyInput()),o.cpRegister(t.addresses[0],L.COIN,{cid:n,oper:A.cpRegister,name:"ATHENA",ip:"*",pubAddress:"",pubKey:"",signMethod:""}),o.commit()),a=new C;a.addInput(this.dummyInput());for(let e=0;e<10;e++)for(let i=0;i<10;i++){var c={oper:A.propCreate,pid:""+this.network.tokenFix+s.sprintf("%04d",10*e+i+1),oid:this.network.tokenFix+"0000",cid:n,gold:L.COIN};a.propCreate(t.addresses[e+1],c)}var[u,,]=a.commit(),l=new g({version:t.version,prevBlock:h.NULL_HASH,merkleRoot:r.hash("hex"),time:t.time,bits:t.bits,nonce:t.nonce,height:0});return l.txs.push(r),l.txs.push(o),l.txs.push(u),l.refresh(!0),l.merkleRoot=l.createMerkleRoot("hex"),l}async open(t){this.logger.info("Opening ChainDB..."),await this.db.open();var e=await this.db.checkVersion(d,3);if(i=await this.getState()){var i;if(await this.verifyFlags(i),await this.verifyDeployments(),this.stateCache=await this.getStateCache(),this.state=i,!(i=await this.getEntry(0)))throw new Error("genesis block not found.");this.network.genesis.hash=i.hash,this.network.genesis.merkleRoot=i.merkleRoot,this.logger.info("ChainDB successfully loaded.")}else t&&(i=await this.getGenesisParams(t),this.node.miner&&(this.node.miner.addresses=[new y(i.coinbaseAddress)]),this.node.config)&&this.node.config.changeParams(i),await this.saveFlags(),await this.saveDeployments(),await this.saveGenesis(),this.logger.info("ChainDB successfully initialized.");return this.logger.info("Chain State: hash=%s tx=%d coin=%d value=%s.",this.state.rhash(),this.state.tx,this.state.coin,a.btc(this.state.value)),e}async getGenesisParams(t){if(t.isGenesisParams)return t;t=t||{};var i=new tt({name:"wallet-test",db:"memory",resolution:!1,verify:!1}),r=(i=(t.getMnemonicFromMemory=!0,await i.open(t),await i.get("primary")),[]);for(const e of await i.getPaths("default")){var s=e.toAddress();0==e.branch&&r.push(""+s.toString(t.network))}var n,o,a,c,u={};return u[t.network+"Addresses"]=r.reduce((t,e)=>t+(""==t?e:","+e),""),u.coinbaseAddress=r[1],u.notifyAddress=i.notifyAddress,this.node.config.notifyAddress=u.notifyAddress,await st.writeFile(u,t.network+"-genesis.params"),t.isGenesisEncrypt||(n=B.hash256(e.from(i.master.mnemonic.toSeed().toString("hex"))),o=nt.publicKeyCreate(n,!0),a=y.fromWitnessPubkeyhash(B.hash160(o),this.network.type).toString(),c=B.hash256(e.concat([e.from("root"),i.master.key.privateKey])),i={body:{language:i.master.mnemonic.language,phrase:i.master.mnemonic.getPhrase(),passphrase:i.master.mnemonic.passphrase,awardAddress:u.coinbaseAddress,notifyAddress:i.notifyAddress,alliancePrivateKey:c.toString("hex"),allianceName:"root",allianceNodeId:0,allianceNodeToken:{prv:n.toString("hex"),pub:o.toString("hex"),address:a}},password:t.password||h.MNEMONIC_SALT,network:t.network,file:t.network+"-genesis.keystore"},await st.writeEncryptFile(i)),u}close(){return this.db.close()}start(){return r(!this.current),r(!this.pending),this.current=this.db.batch(),this.pending=this.state.clone(),this.coinCache.start(),this.cacheHash.start(),this.cacheHeight.start(),this.current}put(t,e){r(this.current),this.current.put(t,e)}del(t){r(this.current),this.current.del(t)}batch(){return r(this.current),this.current}drop(){var t=this.current;r(this.current),r(this.pending),this.current=null,this.pending=null,this.coinCache.drop(),this.cacheHash.drop(),this.cacheHeight.drop(),this.stateCache.drop(),t.clear()}async commit(){r(this.current),r(this.pending);try{await this.current.write()}catch(t){throw this.current=null,this.pending=null,this.coinCache.drop(),this.cacheHash.drop(),this.cacheHeight.drop(),t}this.pending.committed&&(this.state=this.pending),this.current=null,this.pending=null,this.coinCache.commit(),this.cacheHash.commit(),this.cacheHeight.commit(),this.stateCache.commit()}hasCache(t){return("number"==typeof t?this.cacheHeight:(r("string"==typeof t),this.cacheHash)).has(t)}getCache(t){return("number"==typeof t?this.cacheHeight:(r("string"==typeof t),this.cacheHash)).get(t)}async getHeight(t){var e;return"number"==typeof t?t:(r("string"==typeof t),t===h.NULL_HASH?-1:(e=this.cacheHash.get(t))?e.height:(e=await this.db.get(d.h(t)))?e.readUInt32LE(0,!0):-1)}async getHash(t){var e;return"string"==typeof t?t:(r("number"==typeof t),t<0?null:(e=this.cacheHeight.get(t))?e.hash:(e=await this.db.get(d.H(t)))?e.toString("hex"):null)}async getEntryByHeight(t){var e;return r("number"==typeof t),t<0?null:this.cacheHeight.get(t)||((t=await this.db.get(d.H(t)))&&(t=t.toString("hex"),e=this.state,t=await this.getEntryByHash(t))?(this.state===e&&this.cacheHeight.set(t.height,t),t):null)}async getEntryByHash(t){return r("string"==typeof t),t===h.NULL_HASH?null:this.cacheHash.get(t)||((t=await this.db.get(d.e(t)))?(t=b.fromRaw(t),this.cacheHash.set(t.hash,t),t):null)}getEntry(t){return"number"==typeof t?this.getEntryByHeight(t):this.getEntryByHash(t)}async hasEntry(t){return-1!==await this.getHeight(t)}async getAncestor(t,e){if(e<0)return null;if(r(0<=e),r(e<=t.height),await this.isMainChain(t))return this.getEntryByHeight(e);for(;t.height!==e;){t=this.getPrevCache(t)||await this.getPrevious(t),r(t)}return t}getPrevious(t){return this.getEntryByHash(t.prevBlock)}getPrevCache(t){return this.cacheHash.get(t.prevBlock)||null}async getNext(t){return(t=await this.getNextHash(t.hash))?this.getEntryByHash(t):null}async getNextEntry(t){var e=await this.getEntryByHeight(t.height+1);return e&&e.prevBlock===t.hash?e:null}getTip(){return this.getEntryByHash(this.state.tip)}async getState(){var t=await this.db.get(d.R);return t?ut.fromRaw(t):null}async saveGenesis(){let t=[];t=(this.node.config?this.node.config[this.network.type+"Addresses"]:this.network.genesis.addresses).split(",");var e=this.createGenesisBlock({version:this.network.genesis.version,time:this.network.genesis.time,bits:this.network.genesis.bits,nonce:this.network.genesis.nonce,addresses:t}),i=(this.network.genesis.hash=e.hash("hex"),this.network.genesis.merkleRoot=e.merkleRoot,b.fromBlock(e)),r=(this.logger.info("Writing genesis block to ChainDB."),new u);for(let t=0;t<e.txs.length;t++)r.addTX(e.txs[t],e.height,e.time);await this.save(i,e,r)}async getFlags(){var t=await this.db.get(d.O);return t?ct.fromRaw(t):null}async verifyFlags(t){var e=this.options,i=await this.getFlags();let r=!1,s=!1;if(!i)throw new Error("No flags found.");if(e.network!==i.network)throw new Error("Network mismatch for chain.");if(e.spv&&!i.spv)throw new Error("Cannot retroactively enable SPV.");if(!e.spv&&i.spv)throw new Error("Cannot retroactively disable SPV.");if(!i.witness){if(!e.forceFlags)throw new Error("Cannot retroactively enable witness.");r=!0}if(e.prune&&!i.prune){if(!e.forceFlags)throw new Error("Cannot retroactively prune.");s=!0}if(!e.prune&&i.prune)throw new Error("Cannot retroactively unprune.");if(e.indexTX&&!i.indexTX)throw new Error("Cannot retroactively enable TX indexing.");if(!e.indexTX&&i.indexTX)throw new Error("Cannot retroactively disable TX indexing.");if(e.indexAddress&&!i.indexAddress)throw new Error("Cannot retroactively enable address indexing.");if(!e.indexAddress&&i.indexAddress)throw new Error("Cannot retroactively disable address indexing.");r&&(await this.logger.info("Rewriting chain flags."),await this.saveFlags()),s&&(await this.logger.info("Retroactively pruning chain."),await this.prune(t.tip))}async getStateCache(){var t=new lt(this.network);for(const s of await this.db.range({gte:d.v(0,h.ZERO_HASH),lte:d.v(255,h.MAX_HASH),values:!0})){var[e,i]=d.vv(s.key),r=s.value[0];t.insert(e,i,r)}return t}saveDeployments(){var t=this.db.batch();return this.writeDeployments(t),t.write()}async batchPut(t,e){var i=this.db.batch();i.put(t,e),await i.write()}async batchDel(t){var e=this.db.batch();e.del(t),await e.write()}writeDeployments(t){var e=new o(1+17*this.network.deploys.length);e.writeU8(this.network.deploys.length);for(const t of this.network.deploys)e.writeU8(t.bit),e.writeU32(t.startTime),e.writeU32(t.timeout),e.writeI32(t.threshold),e.writeI32(t.window);t.put(d.V,e.render())}async checkDeployments(){var t=await this.db.get(d.V),e=(r(t,"No deployment table found."),new n(t)),i=e.readU8(),s=[];for(let t=0;t<i;t++){var o=e.readU8(),a=e.readU32(),h=e.readU32(),c=e.readI32(),u=e.readI32(),l=this.network.byBit(o);l&&a===l.startTime&&h===l.timeout&&c===l.threshold&&u===l.window||s.push(o)}return s}async verifyDeployments(){let t;try{t=await this.checkDeployments()}catch(e){if("EncodingError"!==e.type)throw e;t=[];for(let e=0;e<32;e++)t.push(e)}if(0===t.length)return!0;var e=this.db.batch();for(const i of t)this.logger.warning("Versionbit deployment params modified."),this.logger.warning("Invalidating cache for bit %d.",i),await this.invalidateCache(i,e);return this.writeDeployments(e),await e.write(),!1}async invalidateCache(t,e){for(const i of await this.db.keys({gte:d.v(t,h.ZERO_HASH),lte:d.v(t,h.MAX_HASH)}))e.del(i)}async prune(){var t=this.options,e=this.network.block.keepBlocks,i=this.network.block.pruneAfterHeight;if((await this.getFlags()).prune)throw new Error("Chain is already pruned.");var s=await this.getHeight(this.state.tip);if(s<=i+e)return!1;i+=1;var n=s-e,o=this.db.batch();for(let t=i;t<=n;t++){var a=await this.getHash(t);if(!a)throw new Error(`Cannot find hash for ${t}.`);o.del(d.b(a)),o.del(d.u(a))}try{t.prune=!0;const e=ct.fromOptions(t);r(e.prune),o.put(d.O,e.toRaw()),await o.write()}catch(e){throw t.prune=!1,e}return await this.db.compactRange(),!0}async getNextHash(t){return(t=await this.db.get(d.n(t)))?t.toString("hex"):null}async isMainHash(t){if(r("string"==typeof t),t===h.NULL_HASH)return!1;if(t===this.network.genesis.hash)return!0;if(t===this.state.tip)return!0;var e=this.cacheHash.get(t);return e&&(e=this.cacheHeight.get(e.height))?e.hash===t:!!await this.getNextHash(t)}async isMainChain(t){var e;return!!t.isGenesis()||t.hash===this.state.tip||((e=this.getCache(t.height))?t.hash===e.hash:!!await this.getNextHash(t.hash))}getEntries(){return this.db.values({gte:d.e(h.ZERO_HASH),lte:d.e(h.MAX_HASH),parse:t=>b.fromRaw(t)})}getTimestampHashes(t,e){return this.db.keys({gte:d.th(e,h.ZERO_HASH),lte:d.th(t,h.MAX_HASH),parse:d.thh})}getContracts(){return this.db.values({gte:d.tx(h.NULL_HASH),lte:d.tx(h.HIGH_HASH),parse:t=>s.parseJson(t.toString())})}getCps(){return this.db.values({gte:d.CP(h.ZERO_CID,"hex"),lte:d.CP(h.MAX_CID,"hex"),parse:t=>F.fromRaw(t)})}async setCp(t){var e=this.db.batch();e.put(d.CP(t.cid),t.toRaw()),await e.write()}async delCp(t){var e=this.db.batch();e.del(d.CP(t)),await e.write()}getScs(){return this.db.values({gte:d.SC(h.ZERO_CID,"hex"),lte:d.SC(h.MAX_CID,"hex"),parse:t=>D.fromRaw(t)})}async setSc(t){var e=this.db.batch();e.put(d.SC(t.id),t.toRaw()),await e.write()}async delSc(t){var e=this.db.batch();e.del(d.SC(t)),await e.write()}async getSCList(t){return r(Array.isArray(t)),this.scList.query(t)}async delVp(t){var e=this.db.batch();e.del(d.VP(t.pid)),await e.write()}async setVp(t){var e=this.db.batch();e.put(d.VP(t.pid),t.toRaw()),await e.write()}async getVp(t){return(t=await this.db.get(d.VP(t)))?K.fromRaw(t):null}loadVpList(){return this.db.values({gte:d.VP(h.ZERO_CID,"hex"),lte:d.VP(h.MAX_CID,"hex"),parse:t=>K.fromRaw(t)})}async delHtlc(t){var e;t.id&&(this.htlcList.delete(t.id),this.htlcList.delAccount(t),(e=this.db.batch()).del(d.VH(t.shash,t.sidx)),await e.write())}async setSuggest(t){t=new W(t);var e=(this.htlcList.set(t.id,t),this.db.batch());e.put(d.VH(t.shash,t.sidx),t.toRaw()),await e.write()}async setAssent(t){t=new W(t);var e=(this.htlcList.set(t.id,t),this.db.batch());e.put(d.VH(t.shash,t.sidx),t.toRaw()),await e.write()}async loadHtlcList(){return this.db.values({gte:d.VH(h.ZERO_CID,0),lte:d.VH(h.MAX_CID,4294967295),parse:t=>W.fromRaw(t)})}async delErAbolish(t){var e=this.db.batch();e.del(d.ERA(t.erid)),await e.write()}async setErAbolish(t){var e=this.db.batch();e.put(d.ERA(t.erid),t.toRaw()),await e.write()}async getErAbolish(t){return(t=await this.db.get(d.ERA(t)))?J.fromRaw(t):null}loadErAbolishList(){return this.db.values({gte:d.ERA(h.ZERO_CID),lte:d.ERA(h.MAX_CID),parse:t=>J.fromRaw(t)})}async delCpEn(t){var e=this.db.batch();e.del(d.EN2(t.to,t.from)),await e.write()}async setCpEn(t){var e=this.db.batch();e.put(d.EN2(t.to,t.from),t.toRaw()),await e.write()}loadCpEnList(){return this.db.values({gte:d.EN2(h.ZERO_CID,h.ZERO_CID,"ascii"),lte:d.EN2(h.MAX_CID,h.MAX_CID,"ascii"),parse:t=>Q.fromRaw(t)})}queryCpEnListByCid(t){return this.db.values({gte:d.EN2(t,h.ZERO_CID,"ascii"),lte:d.EN2(t,h.MAX_CID,"ascii"),parse:t=>Q.fromRaw(t)})}async delEr(t){var e=this.db.batch();e.del(d.ER(t.erid)),e.del(d.ERR(t.witness,t.erid,t.txid)),await e.write()}async setEr(t,e){var i=this.db.batch(),r=d.ERR(t.witness,t.erid,t.txid);i.put(r,t.toRaw()),i.put(d.ER(t.erid),r),await i.write()}async getEr(t){var e;return(t=await this.db.get(d.ER(t)))&&([,,e]=d.ERRR(t),t=await this.db.get(t))?((t=G.fromRaw(t)).txid=e,t):null}async byPubkey(t,e,i=!1){if(!(t=await this.db.values({gte:d.ERR(t,h.NULL_HASH,h.NULL_HASH),lte:d.ERR(t,h.HIGH_HASH,h.HIGH_HASH),parse:t=>G.fromRaw(t)}))||0==t.length)return[];let r=null;if(i){var s,n=new Map;for(s of t){var o,a=await this.caVerifyObj(s);a&&((o=n.get(a.source.cluster))?a.startHeight>o.startHeight&&n.set(s.source.cluster,a):n.set(a.source.cluster,a))}r=n.values()}else r=t;if(!r||0==r.length)return[];var c,u=new w;for(c of r)u.set(c.erid,c);return u.query(e)}async caVerify(t){return this.caVerifyObj(await this.erList.getEr(t))}async caVerifyObj(t){var i;return t?(t.verify=!1,t.validHeight<=this.chain.height||(i=await this.erAbList.getErAb(t.erid))&&i.abolishHeight<this.chain.height||(i=ot.fromPublic(e.from(t.witness,"hex"),this.network.type),t.verifying(i)&&(t.verify=!0,0<(i=this.cpList.query([["pubKey",t.witness]])).list.length)&&(t.cpid=i.list[0].cid)),t):null}async saveVote(t,i){var r=this.db.batch();r.put(d.VM(t),e.from(JSON.stringify(i))),await r.write()}async saveOracle(t,i){var r=this.db.batch();r.put(d.VO(t),e.from(JSON.stringify(i))),await r.write()}getTips(){return this.db.keys({gte:d.p(h.ZERO_HASH),lte:d.p(h.MAX_HASH),parse:d.pp})}async readCoin(t){var e,i,r,s;return this.options.spv?null:(({hash:e,index:i}=t),t=t.toKey(),r=this.state,(s=this.coinCache.get(t))?k.fromRaw(s):(s=await this.db.get(d.c(e,i)))?(r===this.state&&this.coinCache.set(t,s),k.fromRaw(s)):null)}async getCoin(t,e){return t=new m(t,e),(e=await this.readCoin(t))?e.toCoin(t):null}async hasCoins(t){for(let i=0;i<t.outputs.length;i++){var e=d.c(t.hash(),i);if(await this.db.has(e))return!0}return!1}async getCoinView(t){var e,i=new u;for({prevout:e}of t.inputs){var r=await this.readCoin(e);r&&i.addEntry(e,r)}return i}async getSpentView(t){var e,i=await this.getCoinView(t);for({prevout:e}of t.inputs)if(!i.hasEntry(e)){var r,{hash:r,index:s}=e;if(r=await this.getMeta(r)){const{tx:t,height:e,time:n}=r;s<t.outputs.length&&i.addIndex(t,s,e,n)}}return i}async getUndoCoins(t){return(t=await this.db.get(d.u(t)))?l.fromRaw(t):new l}async getBlock(t){return(t=await this.getRawBlock(t))?g.fromRaw(t):null}async getRawBlock(t){return!this.options.spv&&(t=await this.getHash(t))?this.db.get(d.b(t)):null}async getBlockView(t){var e=new u,i=await this.getUndoCoins(t.hash());if(!i.isEmpty()){for(let r=t.txs.length-1;0<r;r--){var s=t.txs[r];for(let t=s.inputs.length-1;0<=t;t--){var n=s.inputs[t];i.apply(e,n.prevout)}}r(i.isEmpty(),"Undo coins data inconsistency.")}return e}async getMeta(t){return this.options.indexTX&&(t=await this.db.get(d.t(t)))?v.fromRaw(t):null}async getTX(t){return(t=await this.getMeta(t))?t.tx:null}async getExtendTX(t){return(t=await this.getMeta(t))||null}async hasTX(t){return!!this.options.indexTX&&this.db.has(d.t(t))}async getCoinsByAddress(t){if(!this.options.indexAddress)return[];var e=[];for(const a of t=Array.isArray(t)?t:[t]){var i,s,n=y.getHash(a);for([i,s]of await this.db.keys({gte:d.C(n,h.ZERO_HASH,0),lte:d.C(n,h.MAX_HASH,4294967295),parse:d.Cc})){var o=await this.getCoin(i,s);r(o),e.push(o)}}return e}async getHashesByAddress(t,e="both"){if(Array.isArray(t)||(t=[t]),!this.options.indexTX||!this.options.indexAddress)return[];const i=Object.create(null);for(const s of t){var r=y.getHash(s);let t,n;n="input"==e?(t=d.TI(r,h.ZERO_HASH),d.TI(r,h.MAX_HASH)):"output"==e?(t=d.TO(r,h.ZERO_HASH),d.TO(r,h.MAX_HASH)):(t=d.T(r,h.ZERO_HASH),d.T(r,h.MAX_HASH)),await this.db.keys({gte:t,lte:n,parse:t=>{t=d.Tt(t),i[t]=!0}})}return Object.keys(i)}async getTXByAddress(t){var e=[];for(const i of await this.getMetaByAddress(t))e.push(i.tx);return e}async getVpByOid(t){return{list:[],count:0}}async getVpByAddress(t,e="both"){var i=[];for(const n of await this.getMetaByAddress(t,e))for(let t=0;t<n.tx.outputs.length;t++){var r=n.tx.outputs[t],s=r.getReturnData([it.OP_PROPCREATE,it.OP_PROPEXCHANGE]);s&&(s.current={hash:n.tx.rhash("hex"),index:t,address:r.getAddress().toString()},i.push(s))}return{list:i,count:i.length}}async getMetaByAddress(t,e="both"){if(!this.options.indexTX||!this.options.indexAddress)return[];Array.isArray(t)||(t=[t]);var i=[];for(const n of await this.getHashesByAddress(t,e)){var s=await this.getMeta(n);r(s),i.push(s)}return i}async scan(t,e,i){"number"==typeof(t=null==t?this.network.genesis.hash:t)?this.logger.info("Scanning from height %d.",t):this.logger.info("Scanning from block %s.",s.revHex(t));let r=await this.getEntry(t);if(r){if(!await this.isMainChain(r))throw new Error("Cannot rescan an alternate chain.");let t=0;for(;r;){var n=await this.getBlock(r.hash),o=[];if(t++,n){this.logger.info("Scanning block %s (%d).",r.rhash(),r.height);for(let t=0;t<n.txs.length;t++){var a=n.txs[t];let i=!1;for(let t=0;t<a.outputs.length;t++){var h=a.outputs[t].getHash();h&&(0==r.height||e&&e.test(h))&&(h=m.fromTX(a,t),e.add(h.toRaw()),i=!0)}if(!e||i)o.push(a);else if(0!==t)for(var{prevout:c}of a.inputs)if(!e||e.test(c.toRaw())){o.push(a);break}}}else if(!this.options.spv&&!this.options.prune)throw new Error("Block not found.");await i(r,o),r=await this.getNext(r)}this.logger.info("Finished scanning %d blocks.",t)}}async save(t,e,i){this.start();try{await this._save(t,e,i)}catch(t){throw this.drop(),t}await this.commit()}async _save(t,e,i){var r=e.hash();this.put(d.h(r),_(t.height)),this.put(d.th(e.time,r),null),this.put(d.e(r),t.toRaw()),this.cacheHash.push(t.hash,t),this.del(d.p(t.prevBlock)),this.put(d.p(r),null),this.saveUpdates(),i?(t.isGenesis()||this.put(d.n(t.prevBlock),r),this.put(d.H(t.height),r),this.cacheHeight.push(t.height,t),await this.saveBlock(t,e,i),this.put(d.R,this.pending.commit(r))):await this.saveBlock(t,e)}async reconnect(t,e,i){this.start();try{await this._reconnect(t,e,i)}catch(t){throw this.drop(),t}await this.commit()}async _reconnect(t,e,i){var s=e.hash();r(!t.isGenesis()),this.put(d.n(t.prevBlock),s),this.put(d.H(t.height),s),this.cacheHeight.push(t.height,t),this.cacheHash.push(t.hash,t),this.saveUpdates(),await this.connectBlock(t,e,i),this.put(d.R,this.pending.commit(s))}async disconnect(t,e){let i;this.start();try{i=await this._disconnect(t,e)}catch(t){throw this.drop(),t}return await this.commit(),i}async _disconnect(t,e){return this.del(d.n(t.prevBlock)),this.del(d.H(t.height)),this.cacheHeight.unpush(t.height),this.saveUpdates(),e=await this.disconnectBlock(t,e),this.put(d.R,this.pending.commit(t.prevBlock)),e}saveUpdates(){var t=this.stateCache.updates;if(0!==t.length){this.logger.info("Saving %d state cache updates.",t.length);for(const r of t){var{bit:e,hash:i}=r;this.put(d.v(e,i),r.toRaw())}}}async reset(t){var e=await this.getEntry(t);if(!e)throw new Error("Block not found.");if(!await this.isMainChain(e))throw new Error("Cannot reset on alternate chain.");if(this.options.prune)throw new Error("Cannot reset when pruned.");await this.removeChains();let i=await this.getTip();for(r(i),this.logger.debug("Resetting main chain to: %s",e.rhash());;){if(this.start(),i.hash===e.hash){this.put(d.R,this.pending.commit(i.hash)),await this.commit();break}r(!i.isGenesis()),this.del(d.p(i.hash)),this.put(d.p(i.prevBlock),null),this.del(d.H(i.height)),this.del(d.h(i.hash)),this.del(d.th(i.time,i.hash)),this.del(d.e(i.hash)),this.del(d.n(i.prevBlock));try{await this.removeBlock(i)}catch(t){throw this.drop(),t}this.cacheHeight.remove(i.height),this.cacheHash.remove(i.hash),i=await this.getPrevious(i),r(i)}return i}async removeChains(){var t=await this.getTips();this.start();try{for(const e of t)await this._removeChain(e)}catch(t){throw this.drop(),t}await this.commit()}async _removeChain(t){let e=await this.getEntryByHash(t);if(!e)throw new Error("Alternate chain tip not found.");for(this.logger.debug("Removing alternate chain: %s.",e.rhash());!await this.isMainChain(e);)r(!e.isGenesis()),this.del(d.p(e.hash)),this.del(d.h(e.hash)),this.del(d.th(e.time,e.hash)),this.del(d.e(e.hash)),this.del(d.b(e.hash)),this.cacheHash.unpush(e.hash),e=await this.getPrevious(e),r(e)}async saveBlock(t,e,i){var r=e.hash();this.options.spv||(this.put(d.b(r),e.toRaw()),i&&await this.connectBlock(t,e,i))}async removeBlock(t){if(this.options.spv)return new u;var e=await this.getBlock(t.hash);if(!e)throw new Error("Block not found.");this.del(d.b(e.hash()));var i=await this.disconnectBlock(t,e);return this.put(d.R,this.pending.commit(t.prevBlock)),await this.commit(),await this.chain.fire("block.disconnect",t,e,i),i}saveView(t){for(var[e,i]of t.map)for(var[r,s]of i.outputs)s.spent?(this.del(d.c(e,r)),this.coinCache.unpush(e+r)):(this.del(d.s(e,r)),s=s.toRaw(),this.put(d.c(e,r),s),this.coinCache.push(e+r,s))}async getSpender(t,e){return(t=await this.db.get(d.s(t,e)))?I.DecodeSpenderValue(t):null}async connectBlock(t,e,i){if(!this.options.spv){var r=e.hash("hex");this.pending.connect(e);for(let u=0;u<e.txs.length;u++){var s=e.txs[u],n=s.hash("hex");if(!t.isGenesis()&&0<u)for(let t=0;t<s.inputs.length;t++){var o=s.inputs[t].prevout,a=i.getOutput(o);this.pending.spend(a);try{await this.emitCoinSpent(s.inputs[t],a,s,e)}catch(t){this.logger.error("connect block:",t.message)}this.put(d.s(o.hash,o.index),I.EncodeSpenderValue(n,t,e.height,r))}for(const t of s.outputs)t.script.isUnspendable()||this.pending.add(t);try{var h=await O.FactoryOfContract({env:this,block:e,tx:s,coins:i});if(!t.isGenesis()){var c=await h.verify();if(1!=c)throw new at(s,x(c),"bad-contract-verify",100)}await h.isBlockFinal()==R.Final&&await h.confirm()}catch(t){this.logger.error("TX(%s) Smart Contract Execute Error: %s",s.txid(),t.message)}this.indexTX(s,i,t,u)}this.saveView(i),i.undo.isEmpty()||this.put(d.u(r),i.undo.commit()),await this.voteMgr.saveVote(),this.scList.deletes([["indate","<",this.chain.height]]),await this.pruneBlock(t)}}async disconnectBlock(t,e){var i=new u;if(!this.options.spv){var s=e.hash(),n=await this.getUndoCoins(s);this.pending.disconnect(e);for(let r=e.txs.length-1;0<=r;r--){var o=e.txs[r];if(0<r)for(let t=o.inputs.length-1;0<=t;t--){var a=o.inputs[t].prevout;n.apply(i,a),this.pending.add(i.getOutput(a))}i.removeTX(o,t.height,t.time);for(let t=o.outputs.length-1;0<=t;t--){var h=o.outputs[t];h.script.isUnspendable()||this.pending.spend(h)}try{await(await O.FactoryOfContract({env:this,block:e,tx:o})).unconfirm()}catch(s){this.logger.error("TX(%s) Smart Contract Unconfirm Error: %s",o.txid(),s.message)}await this.unindexTX(o,i)}r(n.isEmpty(),"Undo coins data inconsistency."),this.saveView(i),this.del(d.u(s)),await this.voteMgr.saveVote()}return i}async pruneBlock(t){this.options.spv||!this.options.prune||(t=t.height-this.network.block.keepBlocks)<=this.network.block.pruneAfterHeight||(t=await this.getHash(t))&&(this.del(d.b(t)),this.del(d.u(t)))}saveFlags(){var t=ct.fromOptions(this.options),e=this.db.batch();return e.put(d.O,t.toRaw()),e.write()}indexTX(t,e,i,r){var s=t.hash();if(this.options.indexTX&&(r=v.fromTX(t,i,r),this.put(d.t(s),r.toRaw()),this.options.indexAddress)){for(const e of t.getHashes())this.put(d.T(e,s),null);for(const e of t.getOutputHashes())this.put(d.TO(e,s),null);for(const i of t.getInputHashes(e))this.put(d.TI(i,s),null)}if(this.options.indexAddress){if(!i.isGenesis()&&!t.isCoinbase())for(var{prevout:n}of t.inputs){var o=e.getOutput(n).getHash();o&&this.del(d.C(o,n.hash,n.index))}for(let e=0;e<t.outputs.length;e++){var a=t.outputs[e].getHash();a&&this.put(d.C(a,s,e),null)}}}async unindexTX(t,e){var i,r=t.hash();if(this.options.indexTX&&(this.del(d.t(r)),this.options.indexAddress))for(i of t.getHashes(e))this.del(d.T(i,r)),this.del(d.TI(i,r)),this.del(d.TO(i,r));if(this.options.indexAddress){if(!t.isCoinbase())for(var{prevout:s}of t.inputs){var n=e.getOutput(s).getHash();n&&this.put(d.C(n,s.hash,s.index),null)}for(let e=0;e<t.outputs.length;e++){var o=t.outputs[e].getHash();o&&this.del(d.C(o,r,e))}}}async readHostList(){return this.db.get(d.HL)}async writeHostList(t){var e=this.db.batch();return e.put(d.HL,t),e.write()}async emitCoinSpent(t,e,i,r){(i={env:this,block:r,tx:i,hash:t.prevout.hash,i:t.prevout.index,height:r.height,output:e,type:e.getReturnType(),data:e.getReturnData(rt)}).data&&await et(i).spent(t)}}function ct(t){if(!(this instanceof ct))return new ct(t);this.network=c.primary,this.spv=!1,this.witness=!0,this.prune=!1,this.indexTX=!1,this.indexAddress=!1,t&&this.fromOptions(t)}ht.layout=d,ct.prototype.fromOptions=function(t){return this.network=c.get(t.network),null!=t.spv&&(r("boolean"==typeof t.spv),this.spv=t.spv),null!=t.prune&&(r("boolean"==typeof t.prune),this.prune=t.prune),null!=t.indexTX&&(r("boolean"==typeof t.indexTX),this.indexTX=t.indexTX),null!=t.indexAddress&&(r("boolean"==typeof t.indexAddress),this.indexAddress=t.indexAddress),this},ct.fromOptions=function(t){return(new ct).fromOptions(t)},ct.prototype.toRaw=function(){var t=new o(12);let e=0;return this.spv&&(e|=1),this.witness&&(e|=2),this.prune&&(e|=4),this.indexTX&&(e|=8),this.indexAddress&&(e|=16),t.writeU32(this.network.magic),t.writeU32(e),t.writeU32(0),t.render()},ct.prototype.fromRaw=function(t){return t=new n(t),this.network=c.fromMagic(t.readU32()),t=t.readU32(),this.spv=0!=(1&t),this.witness=0!=(2&t),this.prune=0!=(4&t),this.indexTX=0!=(8&t),this.indexAddress=0!=(16&t),this},ct.fromRaw=function(t){return(new ct).fromRaw(t)};class ut{constructor(){this.tip=h.NULL_HASH,this.tx=0,this.coin=0,this.value=0,this.committed=!1}rhash(){return s.revHex(this.tip)}clone(){var t=new ut;return t.tip=this.tip,t.tx=this.tx,t.coin=this.coin,t.value=this.value,t}connect(t){this.tx+=t.txs.length}disconnect(t){this.tx-=t.txs.length}add(t){this.coin++,this.value+=t.value}spend(t){this.coin--,this.value-=t.value}commit(t){return"string"!=typeof t&&(t=t.toString("hex")),this.tip=t,this.committed=!0,this.toRaw()}toRaw(){var t=new o(56);return t.writeHash(this.tip),t.writeU64(this.tx),t.writeU64(this.coin),t.writeU64(this.value),t.render()}static fromRaw(t){var e=new ut;t=new n(t);return e.tip=t.readHash("hex"),e.tx=t.readU64(),e.coin=t.readU64(),e.value=t.readU64(),e}}function lt(t){this.network=t,this.bits=[],this.updates=[],this._init()}function ft(t,e,i){this.bit=t,this.hash=e,this.state=i}lt.prototype._init=function(){for(let t=0;t<32;t++)this.bits.push(null);for(var{bit:t}of this.network.deploys)r(!this.bits[t]),this.bits[t]=new Map},lt.prototype.set=function(t,e,i){var s=this.bits[t];r(s),s.get(e.hash)!==i&&(s.set(e.hash,i),this.updates.push(new ft(t,e.hash,i)))},lt.prototype.get=function(t,e){return t=this.bits[t],r(t),null==(t=t.get(e.hash))?-1:t},lt.prototype.commit=function(){this.updates.length=0},lt.prototype.drop=function(){for(var{bit:t,hash:e}of this.updates)t=this.bits[t],r(t),t.delete(e);this.updates.length=0},lt.prototype.insert=function(t,e,i){t=this.bits[t],r(t),t.set(e,i)},ft.prototype.toRaw=function(){return S(this.state)},t.exports=ht}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * lowlevelup.js - LevelUP module for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(376),s=i(377);const n=i(1),o=i(29),a=i(36),h=e.from([0]),c=e.from([255]);let u;function l(t,e,i){if(!(this instanceof l))return new l(t,e,i);n("function"==typeof t,"Backend is required."),n("string"==typeof e,"Filename is required."),this.options=new g(i),this.backend=t,this.location=e,this.locker=new o,this.loading=!1,this.closing=!1,this.loaded=!1,this.db=null,this.binding=null,this.init()}l.prototype.init=function(){let t=new this.backend(this.location),e=t;for(;t.db&&"function"==typeof t.db.put&&t.db!==t;)t=t.db,e=t;t.binding&&(e=t.binding),this.db=t,this.binding=e},l.prototype.open=async function(){var t=await this.locker.lock();try{return await this._open()}finally{t()}},l.prototype._open=async function(){if(this.loaded)throw new Error("Database is already open.");n(!this.loading),n(!this.closing),this.loading=!0;try{await this.load()}catch(t){throw this.loading=!1,t}this.loading=!1,this.loaded=!0},l.prototype.close=async function(){var t=await this.locker.lock();try{return await this._close()}finally{t()}},l.prototype.isClosed=function(){return!this.loaded},l.prototype.readStream=l.prototype.createReadStream=function(t){return"number"!=typeof(t=r({keys:!0,values:!0},t)).limit&&(t.limit=-1),new s(this.db.iterator(t),t)},l.prototype.keyStream=l.prototype.createKeyStream=function(t){return this.createReadStream(r(t,{keys:!0,values:!1}))},l.prototype.valueStream=l.prototype.createValueStream=function(t){return this.createReadStream(r(t,{keys:!1,values:!0}))},l.prototype._close=async function(){if(!this.loaded)throw new Error("Database is already closed.");n(!this.loading),n(!this.closing),this.loaded=!1,this.closing=!0;try{await this.unload()}catch(t){throw this.loaded=!0,this.closing=!1,t}this.closing=!1},l.prototype.load=function(){return new Promise((t,e)=>{this.binding.open(this.options,a.wrap(t,e))})},l.prototype.unload=function(){return new Promise((t,e)=>{this.binding.close(a.wrap(t,e))})},l.prototype.destroy=function(){return new Promise((t,e)=>{this.loaded||this.closing?e(new Error("Cannot destroy open database.")):this.backend.destroy?this.backend.destroy(this.location,a.wrap(t,e)):e(new Error("Cannot destroy (method not available)."))})},l.prototype.repair=function(){return new Promise((t,e)=>{this.loaded||this.closing?e(new Error("Cannot repair open database.")):this.backend.repair?this.backend.repair(this.location,a.wrap(t,e)):e(new Error("Cannot repair (method not available)."))})},l.prototype.backup=function(t){return this.binding.backup?new Promise((e,i)=>{this.loaded?this.binding.backup(t,a.wrap(e,i)):i(new Error("Database is closed."))}):this.clone(t)},l.prototype.get=function(t){return new Promise((e,i)=>{this.loaded?this.binding.get(t,(t,r)=>{if(t)return(s=t)&&(s.notFound||"NotFoundError"===s.type||/not\s*found/i.test(s.message))?void e(null):void i(t);var s;e(r)}):i(new Error("Database is closed."))})},l.prototype.put=function(t,e){return e=e||h,new Promise((i,r)=>{this.loaded?this.binding.put(t,e,a.wrap(i,r)):r(new Error("Database is closed."))})},l.prototype.del=function(t){return new Promise((e,i)=>{this.loaded?this.binding.del(t,a.wrap(e,i)):i(new Error("Database is closed."))})},l.prototype.batch=function(t){if(t)return new Promise((e,i)=>{this.loaded?this.binding.batch(t,a.wrap(e,i)):i(new Error("Database is closed."))});if(this.loaded)return new f(this);throw new Error("Database is closed.")},l.prototype.iterator=function(t){if(this.loaded)return new d(this,t);throw new Error("Database is closed.")},l.prototype.getProperty=function(t){if(this.loaded)return this.binding.getProperty?this.binding.getProperty(t):"";throw new Error("Database is closed.")},l.prototype.approximateSize=function(t,e){return new Promise((i,r)=>{this.loaded?this.binding.approximateSize?this.binding.approximateSize(t,e,a.wrap(i,r)):r(new Error("Cannot get size.")):r(new Error("Database is closed."))})},l.prototype.compactRange=function(t,e){return t=t||h,e=e||c,new Promise((i,r)=>{this.loaded?this.binding.compactRange?this.binding.compactRange(t,e,a.wrap(i,r)):i():r(new Error("Database is closed."))})},l.prototype.has=async function(t){return null!=await this.get(t)},l.prototype.range=async function(t){for(var e=[],i=t.parse,r=this.iterator({gte:t.gte,lte:t.lte,keys:!0,values:!0});;){let s=await r.next();if(!s)break;if(i)try{s=i(s.key,s.value)}catch(t){throw await r.end(),t}s&&e.push(s)}return e},l.prototype.keys=async function(t){for(var e=[],i=t.parse,r=this.iterator({gte:t.gte,lte:t.lte,keys:!0,values:!1});;){var s=await r.next();if(!s)break;let n=s.key;if(i)try{n=i(n)}catch(t){throw await r.end(),t}if(n&&e.push(n),t.limit&&e.length>=t.limit)break}return e},l.prototype.values=async function(t){for(var e=[],i=t.parse,r=this.iterator({gte:t.gte,lte:t.lte,keys:!1,values:!0});;){var s=await r.next();if(!s)break;let n=s.value;if(i)try{n=i(n)}catch(t){throw await r.end(),t}n&&e.push(n)}return e},l.prototype.dump=async function(){var t=Object.create(null);for(const r of await this.range({gte:h,lte:c})){var e=r.key.toString("hex"),i=r.value.toString("hex");t[e]=i}return t},l.prototype.checkVersion=async function(t,e){var i=await this.get(t.CV);if(!i)return await this.put(t.CV,t.version(e)),"new";if(t.equalVersion(i,e))return"exist";throw new Error(u)},l.prototype.clone=async function(t){if(!this.loaded)throw new Error("Database is closed.");var e=new g(this.options),i=(e.createIfMissing=!0,e.errorIfExists=!0,new l(this.backend,t,e));await i.open();let r=i.batch(),s=0;for(var n=this.iterator({keys:!0,values:!0});;){var o=await n.next();if(!o)break;if(r.put(o.key,o.value),(s+=o.value.length)>=256<<20){s=0;try{await r.write()}catch(t){throw await n.end(),await i.close(),t}r=i.batch()}}try{await r.write()}finally{await i.close()}};class f{constructor(t){this.batch=t.binding.batch()}put(t,e){return e=e||h,this.batch.put(t,e),this}del(t){return this.batch.del(t),this}write(){return new Promise((t,e)=>{this.batch.write(a.wrap(t,e))})}clear(){return this.batch.clear(),this}}function d(t,e){(e=new m(e)).keyAsBuffer=t.options.bufferKeys,this.iter=t.db.iterator(e)}function p(t,e){this.key=t,this.value=e}function g(t){this.createIfMissing=!0,this.errorIfExists=!1,this.compression=!0,this.cacheSize=8<<20,this.writeBufferSize=4<<20,this.maxOpenFiles=64,this.maxFileSize=2<<20,this.paranoidChecks=!1,this.memory=!1,this.sync=!1,this.mapSize=274877906944,this.writeMap=!1,this.noSubdir=!0,this.bufferKeys=!0,t&&this.fromOptions(t)}function m(t){this.gte=null,this.lte=null,this.keys=!0,this.values=!1,this.fillCache=!1,this.keyAsBuffer=!0,this.valueAsBuffer=!0,this.reverse=!1,this.highWaterMark=16384,t&&this.fromOptions(t)}d.prototype.next=function(){return new Promise((t,e)=>{this.iter.next((i,r,s)=>{i?this.iter.end(()=>e(i)):void 0===r&&void 0===s?this.iter.end(a.wrap(t,e)):t(new p(r,s))})})},d.prototype.seek=function(t){this.iter.seek(t)},d.prototype.end=function(){return new Promise((t,e)=>{this.iter.end(a.wrap(t,e))})},g.prototype.fromOptions=function(t){return n(t,"Options are required."),null!=t.createIfMissing&&(n("boolean"==typeof t.createIfMissing,"`createIfMissing` must be a boolean."),this.createIfMissing=t.createIfMissing),null!=t.errorIfExists&&(n("boolean"==typeof t.errorIfExists,"`errorIfExists` must be a boolean."),this.errorIfExists=t.errorIfExists),null!=t.compression&&(n("boolean"==typeof t.compression,"`compression` must be a boolean."),this.compression=t.compression),null!=t.cacheSize&&(n("number"==typeof t.cacheSize,"`cacheSize` must be a number."),n(0<=t.cacheSize),this.cacheSize=Math.floor(t.cacheSize/2),this.writeBufferSize=Math.floor(t.cacheSize/4)),null!=t.maxFiles&&(n("number"==typeof t.maxFiles,"`maxFiles` must be a number."),n(0<=t.maxFiles),this.maxOpenFiles=t.maxFiles),null!=t.maxFileSize&&(n("number"==typeof t.maxFileSize,"`maxFileSize` must be a number."),n(0<=t.maxFileSize),this.maxFileSize=t.maxFileSize),null!=t.paranoidChecks&&(n("boolean"==typeof t.paranoidChecks,"`paranoidChecks` must be a boolean."),this.paranoidChecks=t.paranoidChecks),null!=t.memory&&(n("boolean"==typeof t.memory,"`memory` must be a boolean."),this.memory=t.memory),null!=t.sync&&(n("boolean"==typeof t.sync,"`sync` must be a boolean."),this.sync=t.sync),null!=t.mapSize&&(n("number"==typeof t.mapSize,"`mapSize` must be a number."),n(0<=t.mapSize),this.mapSize=t.mapSize),null!=t.writeMap&&(n("boolean"==typeof t.writeMap,"`writeMap` must be a boolean."),this.writeMap=t.writeMap),null!=t.noSubdir&&(n("boolean"==typeof t.noSubdir,"`noSubdir` must be a boolean."),this.noSubdir=t.noSubdir),null!=t.bufferKeys&&(n("boolean"==typeof t.bufferKeys,"`bufferKeys` must be a boolean."),this.bufferKeys=t.bufferKeys),this},m.prototype.fromOptions=function(t){if(n(t,"Options are required."),null!=t.gte&&(n(e.isBuffer(t.gte)||"string"==typeof t.gte),this.gte=t.gte),null!=t.lte&&(n(e.isBuffer(t.lte)||"string"==typeof t.lte),this.lte=t.lte),null!=t.keys&&(n("boolean"==typeof t.keys),this.keys=t.keys),null!=t.values&&(n("boolean"==typeof t.values),this.values=t.values),null!=t.fillCache&&(n("boolean"==typeof t.fillCache),this.fillCache=t.fillCache),null!=t.keyAsBuffer&&(n("boolean"==typeof t.keyAsBuffer),this.keyAsBuffer=t.keyAsBuffer),null!=t.valueAsBuffer&&(n("boolean"==typeof t.valueAsBuffer),this.valueAsBuffer=t.valueAsBuffer),null!=t.reverse&&(n("boolean"==typeof t.reverse),this.reverse=t.reverse),null!=t.limit&&(n("number"==typeof t.limit),n(0<=t.limit),this.limit=t.limit),this.keys||this.values)return this;throw new Error("Keys and/or values must be chosen.")},u="Warning: Your database does not match the current database version. This is likely because the database layout or serialization format has changed drastically. If you want to dump your data, downgrade to your previous version first. If you do not think you should be seeing this error, post an issue on the repo.",t.exports=l}).call(this,i(0).Buffer)},function(t,e,i){"use strict";const r=i(388),s=i(320);e.get=function(t){return"memory"===t?s:r}},function(t,e,i){"use strict";(function(e,r){
/*!
 * memdb.js - in-memory database for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const s=i(1),n=i(246),o=e.alloc(0);function a(t){if(!(this instanceof a))return new a(t);this.location=t||"memory",this.options={},this.tree=new n(f,!0)}function h(t,e){this.options=e||{},this.ops=[],this.db=t,this.written=!1}function c(t,e,i){this.type=t,this.key=e,this.value=i}function u(t,e){this.db=t,this.options=new l(e),this.iter=null,this.ended=!1,this.total=0,this.init()}function l(t){this.keys=!0,this.values=!0,this.start=null,this.end=null,this.gt=!1,this.lt=!1,this.keyAsBuffer=!0,this.valueAsBuffer=!0,this.reverse=!1,this.limit=-1,t&&this.fromOptions(t)}function f(t,e){return t.compare(e)}a.prototype.search=function(t){if("string"==typeof t&&(t=e.from(t,"utf8")),s(e.isBuffer(t),"Key must be a Buffer."),t=this.tree.search(t))return t.value},a.prototype.insert=function(t,i){return"string"==typeof t&&(t=e.from(t,"utf8")),null==(i="string"==typeof i?e.from(i,"utf8"):i)&&(i=o),s(e.isBuffer(t),"Key must be a Buffer."),s(e.isBuffer(i),"Value must be a Buffer."),null!=this.tree.insert(t,i)},a.prototype.remove=function(t){return"string"==typeof t&&(t=e.from(t,"utf8")),s(e.isBuffer(t),"Key must be a Buffer."),null!=this.tree.remove(t)},a.prototype.range=function(t,i){return"string"==typeof t&&(t=e.from(t,"utf8")),"string"==typeof i&&(i=e.from(i,"utf8")),s(!t||e.isBuffer(t),"Key must be a Buffer."),s(!i||e.isBuffer(i),"Key must be a Buffer."),this.tree.range(t,i)},a.prototype.open=function(t,e){e||(e=t,t=null),this.options=t=t||{},r(e)},a.prototype.close=function(t){r(t)},a.prototype.get=function(t,e,i){i||(i=e,e=null),e=e||{};let s=this.search(t);if(s)!1===e.asBuffer&&(s=s.toString("utf8")),r(()=>i(null,s));else{const t=new Error("MEMDB_NOTFOUND: Key not found.");t.notFound=!0,t.type="NotFoundError",r(()=>i(t))}},a.prototype.put=function(t,e,i,s){s||(s=i,i=null),this.insert(t,e),r(s)},a.prototype.del=function(t,e,i){i||(i=e,e=null),this.remove(t),r(i)},a.prototype.batch=function(t,e,i){if(i||(i=e,e=null),e=new h(this,e),!t)return e;e.ops=t,e.write(i)},a.prototype.iterator=function(t){return new u(this,t)},a.prototype.getProperty=function(t){return""},a.prototype.approximateSize=function(t,e,i){t=this.range(t,e);let s=0;for(const e of t)s=(s+=e.key.length)+e.value.length;r(()=>i(null,s))},a.destroy=function(t,e){r(e)},a.repair=function(t,e){r(e)},h.prototype.put=function(t,e){return s(!this.written,"Already written."),this.ops.push(new c("put",t,e)),this},h.prototype.del=function(t){return s(!this.written,"Already written."),this.ops.push(new c("del",t)),this},h.prototype.write=function(t){if(this.written)r(()=>t(new Error("Already written.")));else{for(const e of this.ops)switch(e.type){case"put":this.db.insert(e.key,e.value);break;case"del":this.db.remove(e.key);break;default:return r(()=>t(new Error("Bad op."))),this}this.ops=[],this.written=!0,r(t)}return this},h.prototype.clear=function(){return s(!this.written,"Already written."),this.ops=[],this},u.prototype.init=function(){var t=this.db.tree.snapshot();t=this.db.tree.iterator(t);this.options.reverse?this.options.end?(t.seekMax(this.options.end),this.options.lt&&t.valid()&&0===t.compare(this.options.end)&&t.prev()):t.seekLast():this.options.start?(t.seekMin(this.options.start),this.options.gt&&t.valid()&&0===t.compare(this.options.start)&&t.next()):t.seekFirst(),this.iter=t},u.prototype.next=function(t){var e=this.options,i=this.iter;if(this.iter){let s;if(e.reverse?(s=i.prev())&&e.start&&(e.gt?i.compare(e.start)<=0&&(s=!1):i.compare(e.start)<0&&(s=!1)):(s=i.next())&&e.end&&(e.lt?0<=i.compare(e.end)&&(s=!1):0<i.compare(e.end)&&(s=!1)),s){if(-1!==e.limit){if(this.total>=e.limit)return this.iter=null,void r(t);this.total+=1}let s=i.key,n=i.value;e.keys||(s=o),e.values||(n=o),e.keyAsBuffer||(s=s.toString("utf8")),e.valueAsBuffer||(n=n.toString("utf8")),r(()=>t(null,s,n))}else this.iter=null,r(t)}else r(()=>t(new Error("Cannot call next.")))},u.prototype.seek=function(t){s(this.iter,"Already ended."),"string"==typeof t&&(t=e.from(t,"utf8")),s(e.isBuffer(t),"Key must be a Buffer."),this.options.reverse?this.iter.seekMax(t):this.iter.seekMin(t)},u.prototype.end=function(t){this.ended?r(()=>t(new Error("Already ended."))):(this.ended=!0,this.iter=null,r(t))},l.prototype.fromOptions=function(t){return null!=t.keys&&(s("boolean"==typeof t.keys),this.keys=t.keys),null!=t.values&&(s("boolean"==typeof t.values),this.values=t.values),null!=t.start&&(this.start=t.start),null!=t.end&&(this.end=t.end),null!=t.gte&&(this.start=t.gte),null!=t.lte&&(this.end=t.lte),null!=t.gt&&(this.gt=!0,this.start=t.gt),null!=t.lt&&(this.lt=!0,this.end=t.lt),null!=this.start&&("string"==typeof this.start&&(this.start=e.from(this.start,"utf8")),s(e.isBuffer(this.start),"`start` must be a Buffer.")),null!=this.end&&("string"==typeof this.end&&(this.end=e.from(this.end,"utf8")),s(e.isBuffer(this.end),"`end` must be a Buffer.")),null!=t.keyAsBuffer&&(s("boolean"==typeof t.keyAsBuffer),this.keyAsBuffer=t.keyAsBuffer),null!=t.valueAsBuffer&&(s("boolean"==typeof t.valueAsBuffer),this.valueAsBuffer=t.valueAsBuffer),null!=t.reverse&&(s("boolean"==typeof t.reverse),this.reverse=t.reverse),null!=t.limit&&(s("number"==typeof t.limit),this.limit=t.limit),this},t.exports=a}).call(this,i(0).Buffer,i(78).setImmediate)},function(t,e,i){"use strict";(function(e){
/*!
 * chainentry.js - chainentry object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=i(38),n=i(9),o=i(3),a=i(8),h=i(4),c=i(2),u=i(6),l=i(71),f=i(48),d=new s(0);class p{constructor(t){this.hash=h.NULL_HASH,this.version=1,this.prevBlock=h.NULL_HASH,this.merkleRoot=h.NULL_HASH,this.time=0,this.mtp=0,this.bits=0,this.nonce=0,this.height=0,this.chainwork=d,t&&this.fromOptions(t)}fromOptions(t){return r(t,"Block data is required."),r("string"==typeof t.hash),r(o.isU32(t.version)),r("string"==typeof t.prevBlock),r("string"==typeof t.merkleRoot),r(o.isU32(t.time)),r(o.isU32(t.bits)),r(o.isU32(t.nonce)),r(o.isU32(t.height)),ssert(o.isU32(t.mtp)),r(!t.chainwork||s.isBN(t.chainwork)),this.hash=t.hash,this.version=t.version,this.prevBlock=t.prevBlock,this.merkleRoot=t.merkleRoot,this.time=t.time,this.bits=t.bits,this.nonce=t.nonce,this.height=t.height,this.mtp=t.mtp,this.chainwork=t.chainwork||d,this}static fromOptions(t,e){return(new p).fromOptions(t,e)}getProof(){var t=n.compact2BN(this.bits);return t.isNeg()||t.isZero()?new s(0):p.MAX_CHAINWORK.div(t.iaddn(1))}getChainwork(t){var e=this.getProof();return t?e.iadd(t.chainwork):e}isGenesis(){return 0===this.height}hasUnknown(t){var e=n.VERSION_TOP_MASK,i=n.VERSION_TOP_BITS;return(this.version&e)>>>0===i&&0!=(this.version&t.unknownBits)}hasBit(t){return n.hasBit(this.version,t)}rhash(){return o.revHex(this.hash)}fromBlock(t,e,i){return this.hash=t.hash("hex"),this.version=t.version,this.prevBlock=t.prevBlock,this.merkleRoot=t.merkleRoot,this.time=t.time,this.bits=t.bits,this.nonce=t.nonce,this.height=e?e.height+1:0,this.mtp=i||t.time,this.chainwork=this.getChainwork(e),this}static fromBlock(t,e,i){return(new p).fromBlock(t,e,i)}toRaw(){var t=new u(120);return t.writeU32(this.version),t.writeHash(this.prevBlock),t.writeHash(this.merkleRoot),t.writeU32(this.time),t.writeU32(this.bits),t.writeU32(this.nonce),t.writeU32(this.height),t.writeU32(this.mtp),t.writeBytes(this.chainwork.toArrayLike(e,"le",32)),t.render()}fromRaw(t){t=new c(t,!0);var e=a.hash256(t.readBytes(80));return t.seek(-80),this.hash=e.toString("hex"),this.version=t.readU32(),this.prevBlock=t.readHash("hex"),this.merkleRoot=t.readHash("hex"),this.time=t.readU32(),this.bits=t.readU32(),this.nonce=t.readU32(),this.height=t.readU32(),this.mtp=t.readU32(),this.chainwork=new s(t.readBytes(32),"le"),this}static fromRaw(t){return(new p).fromRaw(t)}toJSON(){return{hash:o.revHex(this.hash),version:this.version,prevBlock:o.revHex(this.prevBlock),merkleRoot:o.revHex(this.merkleRoot),time:this.time,bits:this.bits,nonce:this.nonce,height:this.height,mtp:this.mtp,chainwork:this.chainwork.toString("hex",64)}}fromJSON(t){return r(t,"Block data is required."),r("string"==typeof t.hash),r(o.isU32(t.version)),r("string"==typeof t.prevBlock),r("string"==typeof t.merkleRoot),r(o.isU32(t.bits)),r(o.isU32(t.nonce)),r(o.isU32(t.time)),r(o.isU32(t.mtp)),r("string"==typeof t.chainwork),this.hash=o.revHex(t.hash),this.version=t.version,this.prevBlock=o.revHex(t.prevBlock),this.merkleRoot=o.revHex(t.merkleRoot),this.time=t.time,this.bits=t.bits,this.nonce=t.nonce,this.height=t.height,this.mtp=t.mtp,this.chainwork=new s(t.chainwork,"hex"),this}static fromJSON(t){return(new p).fromJSON(t)}toHeaders(){return l.fromEntry(this)}toInv(){return new f(f.types.BLOCK,this.hash)}inspect(){var t=this.toJSON();return t.version=o.hex32(t.version),t}static isChainEntry(t){return t instanceof p}}p.MAX_CHAINWORK=new s(1).ushln(256),t.exports=p}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * txmeta.js - extended transaction object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(3),n=i(19),o=i(6),a=i(2);function h(t){if(!(this instanceof h))return new h(t);this.tx=new n,this.mtime=s.now(),this.height=-1,this.block=null,this.time=0,this.index=-1,t&&this.fromOptions(t)}h.prototype.fromOptions=function(t){return t.tx&&(r(t.tx instanceof n),this.tx=t.tx),null!=t.mtime&&(r(s.isU32(t.mtime)),this.mtime=t.mtime),null!=t.height&&(r(s.isInt(t.height)),this.height=t.height),void 0!==t.block&&(r(null===t.block||"string"==typeof t.block),this.block=t.block),null!=t.time&&(r(s.isU32(t.time)),this.time=t.time),null!=t.index&&(r(s.isInt(t.index)),this.index=t.index),this},h.fromOptions=function(t){return(new h).fromOptions(t)},h.prototype.fromTX=function(t,e,i){return this.tx=t,e&&(this.height=e.height,this.block=e.hash,this.time=e.time,this.index=i),this},h.fromTX=function(t,e,i){return(new h).fromTX(t,e,i)},h.prototype.inspect=function(){return this.format()},h.prototype.format=function(t){return(t=this.tx.format(t,null,this.index)).mtime=this.mtime,t.height=this.height,t.block=this.block?s.revHex(this.block):null,t.time=this.time,t},h.prototype.toJSON=function(){return this.getJSON()},h.prototype.getJSON=function(t,e,i){return(t=this.tx.getJSON(t,e,null,this.index)).mtime=this.mtime,t.height=this.height,t.block=this.block?s.revHex(this.block):null,t.time=this.time,t.confirmations=0,null!=i&&(t.confirmations=i-this.height+1),t},h.prototype.fromJSON=function(t){return this.tx.fromJSON(t),r(s.isU32(t.mtime)),r(s.isInt(t.height)),r(!t.block||"string"==typeof t.block),r(s.isU32(t.time)),r(s.isInt(t.index)),this.mtime=t.mtime,this.height=t.height,this.block=s.revHex(t.block),this.index=t.index,this},h.fromJSON=function(t){return(new h).fromJSON(JSON)},h.prototype.getSize=function(){let t=0;return t=t+this.tx.getSize()+4,this.block?t=(t+=1)+32+12:t+=1,t},h.prototype.toRaw=function(){var t=this.getSize();t=new o(t);return this.tx.toWriter(t),t.writeU32(this.mtime),this.block?(t.writeU8(1),t.writeHash(this.block),t.writeU32(this.height),t.writeU32(this.time),t.writeU32(this.index)):t.writeU8(0),t.render()},h.prototype.fromRaw=function(t){return t=new a(t),this.tx.fromReader(t),this.mtime=t.readU32(),1===t.readU8()&&(this.block=t.readHash("hex"),this.height=t.readU32(),this.time=t.readU32(),this.index=t.readU32(),2147483647===this.index)&&(this.index=-1),this},h.fromRaw=function(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new h).fromRaw(t)},h.isTXMeta=function(t){return t instanceof h},t.exports=h}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * accountdb.js - storage for account management
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(324),s=i(1),n=i(55),o=i(105),a=i(146),h=i(528),c=i(68),u=c.walletdb,l=i(8),f=i(136),d=i(112),p=i(154),g=i(30).VerifyError,m=i(41),w=i(13);i(19),i(51);const y=i(166),b=i(54),v=i(42),{getVerifyMsg:k,BlockFinalType:S,ContractEnvType:_}=i(7),x=i(147),R=i(530),E=i(28);var A=i(63);const M=i(3),O=i(124).sortWithSeq,I=i(29),C=i(168),T=i(52),P=i(90),B=i(4),N=B.U32,L=i(328),H=i(329),U=i(330),D=U.vpItem,z=i(531),V=z.vpItem,F=i(307);i(532);const j=F.cpItem,K=i(143),q=K.ErAbolishItem,W=i(37).broadcast,X=i(118),Y=X.vpItem,G=i(142),$=G.ErItem,J=i(533),Z=J.AuditItem,Q=i(300),tt=i(96),et=i(534),it=i(301),rt=i(106),st=i(535),nt=i(204),ot=i(32),at=i(36),ht=i(49),ct=i(65),ut=ct.errors,lt=i(64);class ft extends A{constructor(t){super(),this.readyLoad=!1,this.options=new h(t),this.network=this.options.network,this.logger=this.options.logger.context("wallet"),this.workers=this.options.workers,this.keys={hmacSalt:B.DefaultChainCode},t.keys&&t.keys.hmacSalt&&(s(e.isBuffer(t.keys.hmacSalt)),this.keys.hmacSalt=t.keys.hmacSalt),this.client=this.options.client,this.client&&(this.client.wdb=this),this.jsonp=this.options.jsonp,this.jsonp&&(this.jsonp.wdb=this),this.spv=this.options.spv,this.feeRate=this.options.feeRate,this.db=p(this.options),this.rpc=new L(this),this.primary=null,this.state=new et,this.wallets=new Map,this.depth=0,this.rescanning=!1,this.bound=!1,this.newRecord=!0,this.readLock=new C,this.writeLock=new I,this.txLock=new I,this.scanLock=new I,this.widCache=new T(1e4),this.pathMapCache=new T(1e5),this.filter=new P,this.middleHashMem=new Set,this.middleHashChain=new Set,this.autoTaskMgr=new x(this),this.transactionList=new H(this),this.htlcList=new U(this),this.commentList=new z(this),this.NotifyList=new E,this.propList=new X(this),this.$contacts=new E,this.cpList=new F(this),this.cpMemList=new F(this),this.auditList=new J(this),this.erList=new G(this),this.erAbList=new K(this),this.hmacConnection=[],this._init()}async logAudit(t){t.height=this.curHeight,t.time=M.now(),t.erid=l.sha256(M.stringify(t)).toString("hex"),t=new Z(t),await this.auditList.setAudit(t)}async getAccountByAddress(t,e){if(t){let s=null;if(s=e?await this.getWalletsByTX(e):await this.getWallets())for(const e of s){var i=await this.get(e);if(i){var r=await i.getPath(t);if(r)return[i.wid,r.name,i.id]}}}return[0,"",""]}_init(){let t=1e6,e=-1;this.spv&&(t=2e4,e=P.flags.ALL),this.filter=P.fromRate(t,.001,e)}get mode(){return _.Wallet}async getTXFromAll(t){return this.getTXFromDb(t)}async checkNewRecord(){var t={createIfMissing:this.db.options.createIfMissing,errorIfExists:this.db.options.errorIfExists};this.db.options.createIfMissing=!1,this.db.options.errorIfExists=!0;try{await this.db.open();var e=await this.db.checkVersion(u,6);this.newRecord="new"==e}catch(t){if(-1!=t.message.indexOf("does not exist (create_if_missing is false)"))this.newRecord=!0;else{if(-1==t.message.indexOf("exists (error_if_exists is true)"))throw t;this.newRecord=!1}}try{await this.db.close()}catch(t){}this.db.options.createIfMissing=t.createIfMissing,this.db.options.errorIfExists=t.errorIfExists}async isNewRecord(){return await this.checkNewRecord(),this.newRecord}setmnemonic(t){if(this.options.mnemonic=this.options.mnemonic||{},t.bits)this.options.mnemonic={bits:t.bits};else if(t.entropy)this.options.mnemonic={entropy:e.from(t.entropy,"hex")};else if(t.phrase){var i=this.testmnemonic(t.phrase);if(0!=i.code)throw i.msg;this.options.mnemonic={phrase:t.phrase}}t.passphrase&&(this.options.mnemonic.passphrase=t.passphrase),t.language&&(this.options.mnemonic.language=t.language)}testmnemonic(t){try{return new y(t),{code:0}}catch(t){return{code:-1,msg:t.message}}}async getContracts(t){var e=await this.db.values({gte:c.txdb.tx(B.NULL_HASH),lte:c.txdb.tx(B.HIGH_HASH),parse:t=>M.parseJson(t.toString())});return t?e.filter(e=>e.srcact==t||e.dstact==t):e}isFull(){return this.spv||this.synced||!1}async _open(t){}async handleNotify(t,i=!1){if(!i){let r=t.body.content;if("string"==typeof r)try{r=JSON.parse(t.body.content)}catch(t){return}"object"==typeof r&&"secret"===r.type&&(i={contact:t.body.src,messenger:t.body.dst},r.init&&(i.init=e.from(r.init,"hex")),r.packet&&(i.packet=e.from(r.packet)),await this.handleSecret(i))}}async handleSecret(t){if(t.contact&&t.messenger&&t.contact!=t.messenger){try{w.fromString(t.contact,this.network.type),w.fromString(t.messenger,this.network.type)}catch(t){return}var e=await this.ensureContact(t);e&&await e.ensureMessenger(t).answer(t)}}async scanContact(t,e=-1){var i=async t=>{var e;t.witness&&"witnesspubkeyhash"==t.getType()&&(e=t.witness.getPubkeyhashInput()[1],t=w.fromWitness(t.witness).toString(),e)&&t&&await this.ensureContact({contact:t,publicKey:e})};if(0<=e&&e<t.inputs.length)await i(t.inputs[e]);else for(var r of t.inputs)await i(r)}async ensureContact(t){if(!t.contact||t.contact==t.messenger)return null;try{w.fromString(t.contact,this.network.type),t.messenger&&w.fromString(t.messenger,this.network.type)}catch(t){return null}t.network=this.network.type,this.$contacts.get(t.contact)||this.$contacts.set(t.contact,new R(t));var e=this.$contacts.get(t.contact);if(t.messenger&&!(t=e.ensureMessenger(t)).wallet){var i,[i,r]=await this.getAccountByAddress(t.address);if(!(i=await this.get(i)))return;t.wallet=i,t.account=r}return e}getCps(){return this.db.values({gte:c.txdb.cp(B.ZERO_CID,"hex"),lte:c.txdb.cp(B.MAX_CID,"hex"),parse:t=>j.fromRaw(t)})}async _close(){await this.disconnect(),this.http&&this.options.listen&&await this.http.close();for(const t of this.wallets.values())await t.destroy();await this.db.close(),this.options.listen&&await this.logger.close()}async destroy(){await this.db.destroy(),this.widCache.reset(),this.pathMapCache.reset()}async load(t){if(this.readyLoad){var e=await this.ensure({id:"primary",witness:!0,mnemonic:this.options.mnemonic}),i=await this.txLock.lock();try{await this.init(t),await this.watch(),await e.createReceive(0,1,e.master,this.network.type),await e.ensureNotifyKey(),await this.sync()}finally{i()}setTimeout(()=>{this.resend()},5e3)}}async disconnect(){this.client&&await this.client._close(),this.jsonp&&await this.jsonp._close()}async flushCP(t,e=!1){this.client&&(t=t||[],e||(t=this.cpList.excludeCids(t),e=e||0<t.length),e)&&await this.client.execute("cp.remoteQuery",[[["cid","include",t]]])}async watch(){let t=this.db.iterator({gte:u.p(B.NULL_HASH),lte:u.p(B.HIGH_HASH)}),e=0,i=0;for(;;){var r=await t.next();if(!r)break;try{var s=u.pp(r.key);this.addHash(s,!1)}catch(e){throw await t.end(),e}e++}for(t=this.db.iterator({gte:u.o(B.NULL_HASH,0),lte:u.o(B.HIGH_HASH,4294967295)});;){var n=await t.next();if(!n)break;try{var[o,a]=u.oo(n.key);this.addOutpoint(o,a)}catch(e){throw await t.end(),e}i++}this.logger.info("Filter: Added %d hashes to AccountDB filter.",e),this.logger.info("Filter: Added %d outpoints to AccountDB filter.",i),await this.setFilter()}async sync(){if(this.client){let e,i=this.curHeight;for(;0<=i;){var t=await this.getBlock(i);if(!t)break;if(e=await this.client.getEntry(t.hash))break;i--}e||(i=this.state.startHeight,e=await this.client.getEntry(this.state.startHash))||(i=0),await this.cpList.loadHistory(),await this.cpMemList.loadHistory(),await this.propList.loadHistory(),await this.htlcList.loadHistory(),await this.commentList.loadHistory(),await this.transactionList.loadHistory(),await this.loadContact(),await this.erList.loadHistory(),await this.auditList.loadHistory(),await this.erAbList.loadHistory(),await this._rescan(i,!1)}}async _rescan(t,e=!0){if(this.client){null==t&&(t=this.state.startHeight),s(t>>>0===t,"WDB: Must pass in a height.");var i=this.curHeight;e=(await this.rollback(t,e),this.logger.info("AccountDB is scanning %d blocks.",i-t+1),await this.getTip());try{this.rescanning=!0,await this.client.rescan(e.hash,this.eid)}finally{this.rescanning=!1}}}async rescan(t){var e=await this.txLock.lock();try{return await this._rescan(t,!1)}finally{e()}}async send(t){return this.client?this.client.send(t):(this.emit("send",t),Promise.resolve())}async getTX(t){for(const i of this.wallets.values()){var e=await i.getTX(t);if(e)return e.tx}return null}async getTXFromDb(t){for(const i of this.wallets.values()){var e=await i.getTX(t);if(e)return e.tx}return null}async getExtendTX(t){for(const i of this.wallets.values()){var e=await i.getTX(t);if(e)return e}return null}async removeTX(t){this.client?await this.client.removeTX(t):this.emit("remove",t)}async estimateFee(t){return 0<this.feeRate?this.feeRate:!this.client||(t=await this.client.estimateFee(t))<this.network.feeRate?this.network.feeRate:t>this.network.maxFeeRate?this.network.maxFeeRate:t}setFilter(){return this.client?this.client.setFilter(this.filter):(this.emit("filter.set",this.filter),Promise.resolve())}resetFilter(){return this.client?this.client.resetFilter():(this.emit("filter.reset"),Promise.resolve())}backup(t){return this.db.backup(t)}async wipe(){this.logger.warning("Wiping AccountDB TXDB..."),this.logger.warning("I hope you know what you're doing.");var t=this.db.iterator({gte:e.from([0]),lte:e.from([255])}),i=this.db.batch();let r=0;for(;;){var s=await t.next();if(!s)break;try{switch(s.key[0]){case 98:case 99:case 101:case 116:case 111:case 104:case 82:i.del(s.key),r++}}catch(i){throw await t.end(),i}}this.logger.warning("Wiped %d txdb records.",r),await i.write()}async getDepth(){var t=this.db.iterator({gte:u.w(0),lte:u.w(4294967295),reverse:!0,limit:1}),e=await t.next();return e?(await t.end(),u.ww(e.key)+1):1}start(t){return s(!t.current,"WDB: Batch already started."),t.current=this.db.batch(),t.accountCache.start(),t.pathCache.start(),t.current}drop(t){var e=this.batch(t);t.current=null,t.accountCache.drop(),t.pathCache.drop(),e.clear()}clear(t){var e=this.batch(t);t.accountCache.clear(),t.pathCache.clear(),e.clear()}batch(t){return s(t.current,"WDB: Batch does not exist."),t.current}async commit(t){var e=this.batch(t);try{await e.write()}catch(t){throw this.drop(),t}t.current=null,t.accountCache.commit(),t.pathCache.commit()}testFilter(t){return this.filter.test(t,"hex")}addHash(t,i=!0){this.filter.add(t,"hex"),i&&(i=e.from(t,"hex"),this.client?this.client.addFilter(i):this.emit("filter.add",i))}addOutpoint(t,e){t=new m(t,e),this.filter.add(t.toRaw())}dump(){return this.db.dump()}register(t){s(!this.wallets.has(t.wid)),this.wallets.set(t.wid,t)}unregister(t){s(this.wallets.has(t.wid)),this.wallets.delete(t.wid)}async getWalletID(t){var e;return t?"number"==typeof t?t:this.widCache.get(t)||((e=await this.db.get(u.l(t)))?(e=e.readUInt32LE(0,!0),this.widCache.set(t,e),e):null):null}async get(t){if(!(t=await this.getWalletID(t)))return null;var e=await this.readLock.lock(t);try{return await this._get(t)}finally{e()}}async _get(t){var e=this.wallets.get(t);return e||((e=await this.db.get(u.w(t)))?(await(t=o.fromRaw(this,e)).open(),this.register(t),t):null)}async loadBackup(t){if(ht.unsupported)throw new lt(ut.INTERNAL_ERROR,"FS not available.");let i=null;var r;for(r of(await ht.readFile(t,"utf8")).split(/\n+/))if(0!==(r=r.trim()).length&&!/^\s*#/.test(r)){var n=r.split(/\s+/);if(n.length<4)throw new lt(ut.DESERIALIZATION_ERROR,"Malformed wallet Data File.");switch(n[0]){case"W":var h=e.from(n[1],"base64");h=o.fromRaw(this,h);await this.replace(h),i=await this.get(h.id),this.logger.info("Import Wallet %s(%s)",i.id,i.wid);break;case"C":h=e.from(n[1],"base64");(c=((u=a.fromRaw(this,h)).wallet=i,u.wid=i.wid,u.id=i.id,u.initialized=!0,u.watchOnly=i.watchOnly,u.receive=u.deriveReceive(u.receiveDepth-1),u.change=u.deriveChange(u.changeDepth-1),u.witness&&(u.nested=u.deriveNested(u.nestedDepth-1)),i.master.key.deriveAccount(44,u.accountIndex))).publicKey.toString("hex")!==u.accountKey.publicKey.toString("hex")&&s(c.publicKey.toString("hex")==u.accountKey.publicKey.toString("hex")),await i.saveAccount(u),this.logger.info("Import Account %s(%s)",u.name,u.accountIndex);break;case"A":var c=ct.parseSecret(n[1],this.network),u=parseInt(n[5]),l=parseInt(n[7]),f=parseInt(n[9]),d=n[11].trim();if(l<0||f<0)try{await i.importKey(u,c)}catch(t){this.logger.error(`loadBackup: ${t.message} account/secret: ${u}/`+d)}else{var p=await i.deriveKey(u,l,f),g=await i.deriveKey(u,l,f,i.master);p.getAddress("string")!==g.getAddress("string")&&this.logger.error(`loadBackup: not-equal-1: ${p.getAddress("string")} != `+g.getAddress("string")),p.getAddress("string")!==d&&this.logger.error(`loadBackup: not-equal-2: ${p.getAddress("string")} != `+d)}this.logger.info("Import Address %s %s %s %s",u,l,f,d)}}return i.accountCache.reset(),i}save(t){var e=t.wid,i=t.id,r=this.batch(t);this.widCache.set(i,e),r.put(u.w(e),t.toRaw()),r.put(u.l(i),N(e))}async rename(t,e){var i=await this.writeLock.lock();try{return await this._rename(t,e)}finally{i()}}async _rename(t,e){var i=t.id;if(!n.isName(e))throw new Error("WDB: Bad wallet ID.");if(await this.has(e))throw new Error("WDB: ID not available.");this.start(t).del(u.l(i)),t.id=e,this.save(t),await this.commit(t),this.widCache.remove(i),i=t.pathCache.values();for(const t of i)t.id=e}async replace(t){var e=await this.writeLock.lock();try{return await this._replace(t)}finally{e()}}async _replace(t){var e=this.start(t);e.del(u.l(t.id)),e.del(u.w(t.wid)),this.save(t),await this.commit(t),this.widCache.remove(t.id),this.wallets.delete(t.wid)}renameAccount(t,e){var i=t.wallet;this.batch(i).del(u.i(t.wid,t.name)),t.name=e,this.saveAccount(t)}async auth(t,i){if("string"==typeof i){if(!M.isHex256(i))throw new Error("WDB Authentication: Invalid Token.");i=e.from(i,"hex")}t=b.getHmac(t.toString(),this.keys.hmacSalt);var s=r.createHmac("sha256",t.random);s=e.from(s.update(t.token).digest("hex"),"hex");if(!f(i,s))throw new Error("WDB Authentication: CRC Error.")}async create(t){var e=await this.writeLock.lock();t=t||{};try{return await this._create(t)}finally{e()}}async _create(t){if(await this.has(t.id))throw new Error("WDB: Wallet already exists.");"string"==typeof t.mnemonic&&(t.mnemonic={phrase:t.mnemonic}),t.mnemonic=t.mnemonic||{},!t.mnemonic.language&&this.options.mnemonic&&this.options.mnemonic.language&&(t.mnemonic.language=this.options.mnemonic.language);var e=o.fromOptions(this,t);return e.wid=this.depth++,await e.init(t),this.register(e),this.logger.info("Created wallet %s in AccountDB.",e.id),e}async has(t){return null!=await this.getWalletID(t)}async ensure(t){return await this.get(t.id)||this.create(t)}async getAccount(t,e){return(t=await this.db.get(u.a(t,e)))?a.fromRaw(this,t):null}getAccounts(t){return this.db.values({gte:u.n(t,0),lte:u.n(t,4294967295),parse:t=>t.toString("ascii")})}async getAccountIndex(t,e){return(t=await this.db.get(u.i(t,e)))?t.readUInt32LE(0,!0):-1}async getAccountName(t,e){return(t=await this.db.get(u.n(t,e)))?t.toString("ascii"):null}saveAccount(t){var i=t.wid,r=t.wallet,s=t.accountIndex,n=t.name,o=this.batch(r);o.put(u.a(i,s),t.toRaw()),o.put(u.i(i,n),N(s)),o.put(u.n(i,s),e.from(n,"ascii")),r.accountCache.push(s,t)}hasAccount(t,e){return"number"==typeof t&&"number"==typeof e&&this.db.has(u.a(t,e))}async getPathMap(t){var e=this.pathMapCache.get(t);return e||((e=await this.db.get(u.p(t)))?(e=st.fromRaw(t,e),this.pathMapCache.set(t,e),e):null)}saveKey(t,e){return this.savePath(t,e.toPath())}async savePath(t,e){var i=t.wid,r=e.hash,s=this.batch(t);this.addHash(r);let n=await this.getPathMap(r);(n=n||new st(r)).add(i)&&(this.pathMapCache.set(r,n),t.pathCache.push(r,e),s.put(u.p(r),n.toRaw()),s.put(u.P(i,r),e.toRaw()),s.put(u.r(i,e.account,r),null))}async getPath(t,e){var i=await this.db.get(u.P(t,e));return i?((i=tt.fromRaw(i)).wid=t,i.hash=e,i):null}hasPath(t,e){return this.db.has(u.P(t,e))}getHashes(){return this.db.keys({gte:u.p(B.NULL_HASH),lte:u.p(B.HIGH_HASH),parse:u.pp})}getOutpoints(){return this.db.keys({gte:u.o(B.NULL_HASH,0),lte:u.o(B.HIGH_HASH,4294967295),parse:t=>{var[t,e]=u.oo(t);return new m(t,e)}})}getWalletHashes(t){return this.db.keys({gte:u.P(t,B.NULL_HASH),lte:u.P(t,B.HIGH_HASH),parse:u.Pp})}getAccountHashes(t,e){return this.db.keys({gte:u.r(t,e,B.NULL_HASH),lte:u.r(t,e,B.HIGH_HASH),parse:u.rr})}async getWalletPaths(t){var e=[];for(const s of await this.db.range({gte:u.P(t,B.NULL_HASH),lte:u.P(t,B.HIGH_HASH)})){var i=u.Pp(s.key),r=tt.fromRaw(s.value);r.hash=i,r.wid=t,e.push(r)}return e}async encryptKeys(t,i){var r,n,o=t.wid,a=await t.getPaths(),h=this.batch(t);for(r of a)r.data&&(s(!r.encrypted),n=e.from(r.hash,"hex").slice(0,16),(r=r.clone()).data=d.encipher(r.data,i,n),r.encrypted=!0,t.pathCache.push(r.hash,r),h.put(u.P(o,r.hash),r.toRaw()))}async decryptKeys(t,i){var r,n,o=t.wid,a=await t.getPaths(),h=this.batch(t);for(r of a)r.data&&(s(r.encrypted),n=e.from(r.hash,"hex").slice(0,16),(r=r.clone()).data=d.decipher(r.data,i,n),r.encrypted=!1,t.pathCache.push(r.hash,r),h.put(u.P(o,r.hash),r.toRaw()))}async resend(){var t,e={};for(const t of await this.db.keys({gte:u.w(0),lte:u.w(4294967295)})){var i=u.ww(t),r=await this.resendPending(i);r&&Array.isArray(r)&&(e[i]=r)}for(t of Object.keys(e))if(await this.get(parseInt(t)))for(const i of e[t]){try{await this.send(i)}catch(t){this.logger.warning("wdb resend:",t.message)}await at.timeout(50)}}async resendPending(t){var e=await this.get(t),i=await this.db.keys({gte:c.txdb.prefix(t,c.txdb.p(B.NULL_HASH)),lte:c.txdb.prefix(t,c.txdb.p(B.HIGH_HASH))});if(0!==i.length){this.logger.info("Rebroadcasting %d transactions for %d.",i.length,t);var r=[];for(const a of i){var s=c.txdb.pp(a),n=c.txdb.prefix(t,c.txdb.t(s));if((n=await this.db.get(n))&&!(n=nt.fromRaw(n)).tx.isCoinbase())try{var o=await v.FactoryOfContract({tx:n.tx,env:this});await o.isBlockFinal()==S.Expired?e&&(await this.removeTX(n.tx),await e.remove(s),await o.erase()):"notify"!=o.oper&&r.push(n.tx)}catch(t){this.logger.error("TX(%s) Smart Contract Error: %s",n.tx.txid(),t.message)}}return O(r)}}getWallets(){return this.db.keys({gte:u.l("\0"),lte:u.l("ÿ"),parse:u.ll})}async getWalletsByTX(t){var e=new Set;if(!t.isCoinbase())for(const r of t.inputs){var i=r.prevout;if(this.testFilter(i.toRaw())&&(i=await this.getOutpointMap(i.hash,i.index)))for(const t of i.wids)e.add(t)}for(const i of t.getOutputHashes("hex"))if(this.testFilter(i)){var r=await this.getPathMap(i);if(r)for(const t of r.wids)e.add(t)}return 0===e.size?null:e}async getState(){var t=await this.db.get(u.R);return t?et.fromRaw(t):null}async init(t){var e=this.options.startHeight;let i;if(this.client){if(null!=e){if(!(i=await this.client.getEntry(e)))throw new Error("WDB: Could not find start block.")}else i=await this.client.getTip();i=rt.fromEntry(i)}else i=rt.fromEntry(this.network.genesis);this.logger.info("Initializing AccountDB chain state (height %d).",i.height),(e=await this.getState())?this.state=e:await this.resetState(i,!1),await this.ensure({id:"primary",witness:!0,mnemonic:this.options.mnemonic}),t&&t.backup&&await this.loadBackup(t.backup)}async resetState(t,e){for(var i=this.state.clone(),r=(i.startHeight=t.height,i.startHash=t.hash,i.height=t.height,i.marked=e,this.db.batch()),s=this.db.iterator({gte:u.h(t.height),lte:u.h(4294967295),values:!1});;){var n=await s.next();if(!n)break;try{r.del(n.key)}catch(t){throw await s.end(),t}}r.put(u.h(t.height),t.toHash()),r.put(u.R,i.toRaw()),await r.write(),this.state=i}async syncState(t){var e=this.state.clone(),i=this.db.batch();if(t.height<e.height){let s=e.height;var r=s-t.height;for(let t=0;t<r;t++)i.del(u.h(s--))}else t.height>e.height&&s(t.height===e.height+1,`Bad chain sync tip ${t.height} while state `+e.height);e.height=t.height,i.put(u.h(t.height),t.toHash()),i.put(u.R,e.toRaw()),await i.write(),this.state=e,W("block/tips",e)}get curHeight(){return this.state.height}get tidCreator(){return c.txdb.tx}get finder(){return this.getTXFromDb.bind(this)}rpcExecute(){return this.rpc.execute.apply(this.rpc,arguments)}async getBlockMap(t){var e=await this.db.get(u.b(t));return e?it.fromRaw(t,e):null}writeBlockMap(t,e,i){this.batch(t).put(u.b(e),i.toRaw())}unwriteBlockMap(t,e){this.batch(t).del(u.b(e))}async getOutpointMap(t,e){var i=await this.db.get(u.o(t,e));return i?Q.fromRaw(t,e,i):null}writeOutpointMap(t,e,i,r){t=this.batch(t),this.addOutpoint(e,i),t.put(u.o(e,i),r.toRaw())}unwriteOutpointMap(t,e,i){this.batch(t).del(u.o(e,i))}async writeBalanceLog(t,i){var r=u.log(t.wid,i.aidx,i.height,i.hash),s=(i=e.from(JSON.stringify(i)),await this.writeLock.lock());try{this.start(t).put(r,i),await this.commit(t)}finally{s()}}async queryBalanceLog(t,e,i=0){return this.db.values({gte:u.log(t,e,i,B.NULL_HASH),lte:u.log(t,e,this.curHeight,B.HIGH_HASH),parse:t=>JSON.parse(t.toString())})}async getBlock(t){var e,i=await this.db.get(u.h(t));return i?((e=new rt).hash=i.toString("hex"),e.height=t,e):null}async getTip(){var t=await this.getBlock(this.curHeight);if(t)return t;throw new Error("WDB: Tip not found!")}async rollback(t,e=!0){if(t>this.curHeight)throw new Error("WDB: Cannot rollback to the future.");if(t===this.curHeight)return this.logger.debug("Rolled back to same height (%d).",t),!0;this.logger.info("Rolling back %d AccountDB blocks to height %d.",this.curHeight-t,t);var i=await this.getBlock(t);let r=!1;return i?(await this.revert(i.height),await this.syncState(i),e):(i=new rt,t>=this.state.startHeight?(i.height=this.state.startHeight,i.hash=this.state.startHash,r=this.state.marked,this.logger.warning("Rolling back AccountDB to start block (%d).",i.height)):(i.height=0,i.hash=this.network.genesis.hash,r=!1,this.logger.warning("Rolling back AccountDB to genesis block.")),await this.revert(i.height),await this.resetState(i,r),!1)}async revert(t){var e=this.db.iterator({gte:u.b(t+1),lte:u.b(4294967295),reverse:!0,values:!0});let i=0;for(;;){var r=await e.next();if(!r)break;try{var s=u.bb(r.key),n=it.fromRaw(s,r.value).toArray();i+=n.length;for(let t=n.length-1;0<=t;t--)await this._unconfirm(n[t])}catch(t){throw await e.end(),t}}this.logger.info("Rolled back %d AccountDB transactions.",i)}async addBlock(t,e){var i=await this.txLock.lock();try{return await this._addBlock(t,e)}finally{i()}}async _addBlock(t,e){var i=rt.fromEntry(t);let r=0;if(i.height<this.curHeight)this.logger.warning("AccountDB is connecting low blocks (%d).",i.height);else{if(i.height===this.curHeight)this.logger.warning("Already saw AccountDB block (%d).",i.height);else if(i.height!==this.curHeight+1)throw new Error(`WDB(addBlock): Bad disconnection (height mismatch, tip ${i.height} while state ${this.curHeight})`);if(await this.syncState(i),!(this.options.checkpoints&&i.height<=this.network.lastCheckpoint)){for(const t of e)await this._insert(t,i)&&r++;0<r&&this.logger.info("Connected AccountDB block %s (tx=%d).",M.revHex(i.hash),r)}}return r}async removeBlock(t,e){var i=await this.txLock.lock();try{return await this._removeBlock(t,e)}finally{i()}}async _removeBlock(t,e){if((t=rt.fromEntry(t)).height>this.curHeight)return this.logger.warning("AccountDB is disconnecting high blocks (%d).",t.height),0;if(t.height!==this.curHeight)throw new Error(`WDB(removeBlock): Bad disconnection (height mismatch, tip ${t.height} / ${M.revHex(t.hash)} while state ${this.curHeight})`);var i=await this.getBlock(t.height-1);if(!i)throw new Error(`WDB(removeBlock): Bad disconnection (no previous block of ${t.height} / ${M.revHex(t.hash)}).`);var r=await this.getBlockMap(t.height);if(r){for(let t=e.length-1;0<=t;t--){var s=e[t];await this._unconfirm(s,r)}this.logger.warning("Disconnected wallet block %s (tx=%d).",M.revHex(t.hash),r.txs.size)}return await this.syncState(i),r?r.txs.size:0}async rescanBlock(t,e){if(this.rescanning){var i=await this.scanLock.lock();try{await this._addBlock(t,e)}catch(t){throw this.emit("error",t),t}finally{i()}}else this.logger.warning("Unsolicited rescan block: %s.",t.height)}async addTX(t,e,i){var r=await this.txLock.lock();try{return await this._insert(t,e,i)}finally{r()}}listNotify(t){return this.NotifyList.deletes([["h","<",this.curHeight-12]]),this.NotifyList.query(t)}listContact(t,e,i){return this.$contacts.query(t,e,i)}async setCp(t){await this.batchPut(c.txdb.cp(t.cid),t.toRaw())}async delCp(t){await this.batchDel(c.txdb.cp(t))}async delVp(t){var e=this.db.batch();e.del(c.txdb.VP(t.pid)),await e.write()}async setVp(t,e){var i=this.db.batch();i.put(c.txdb.VP(t.pid),t.toRaw()),await i.write()}async getVp(t){return(t=await this.db.get(c.txdb.VP(t)))?Y.fromRaw(t):null}async getVpByAddress(t){return{list:[],count:0}}async getVpByOid(t){return{list:[],count:0}}async loadVpList(){return this.db.values({gte:c.txdb.VP(B.ZERO_CID,"hex"),lte:c.txdb.VP(B.MAX_CID,"hex"),parse:t=>Y.fromRaw(t)})}async saveContact(t){var e=this.db.batch();e.put(c.txdb.CT(t.getAddress()),t.toRaw()),await e.write()}async loadContact(t){var e;for(e of await this.db.values({gte:c.txdb.CT(B.ZERO_HASH160_HEX),lte:c.txdb.CT(B.MAX_HASH160_HEX),parse:t=>R.fromRaw(t,this)}))e.sender&&(e.sender.wallet=await this.get(e.sender.wid)),this.$contacts.set(e.address,e)}async delHtlc(t){var e;(t=new D(t)).id&&(this.htlcList.delete(t.id),this.htlcList.delAccount(t),(e=this.db.batch()).del(c.txdb.VH(t.shash,t.sidx)),await e.write())}async setSuggest(t){t=new D(t);var e,[e,i]=(this.htlcList.set(t.id,t),await this.getAccountByAddress(t.aa)),[e,i]=(e&&this.htlcList.setAccount(t,e,i),await this.getAccountByAddress(t.ba));(e=(e&&this.htlcList.setAccount(t,e,i),this.db.batch())).put(c.txdb.VH(t.shash,t.sidx),t.toRaw()),await e.write()}async setAssent(t){t=new D(t);var e,[e,i]=(this.htlcList.set(t.id,t),await this.getAccountByAddress(t.ab)),[e,i]=(e&&this.htlcList.setAccount(t,e,i),await this.getAccountByAddress(t.bb));(e=(e&&this.htlcList.setAccount(t,e,i),this.db.batch())).put(c.txdb.VH(t.shash,t.sidx),t.toRaw()),await e.write()}async loadHtlcList(){return this.db.values({gte:c.txdb.VH(B.ZERO_CID,0),lte:c.txdb.VH(B.MAX_CID,4294967295),parse:t=>D.fromRaw(t)})}async delComment(t){var e;(t=new V(t)).id&&(this.commentList.delete(t.id),this.commentList.delAccount(t),(e=this.db.batch()).del(c.txdb.VC(t.shash,t.sidx)),await e.write())}async setComment(t){t=new V(t);var e,[e,i]=(this.commentList.set(t.id,t),await this.getAccountByAddress(t.bob));(e=(e&&(this.commentList.setAccount(t,e,i),this.emit("comm.comment",t)),this.db.batch())).put(c.txdb.VC(t.shash,t.sidx),t.toRaw()),await e.write()}async loadCommentList(){return this.db.values({gte:c.txdb.VC(B.ZERO_CID,0),lte:c.txdb.VC(B.MAX_CID,4294967295),parse:t=>V.fromRaw(t)})}async verifyClsTx(t,e){if(!this.spv&&1!=(e=await(await v.FactoryOfContract({env:this,block:e,tx:t})).verify()))throw new g(t,k(e),"bad-contract-verify",100);return!0}async delEr(t){var e=this.db.batch();e.del(c.txdb.ER(t.erid)),e.del(c.txdb.ERR(t.witness,t.erid,t.txid)),await e.write()}async setEr(t,i){i&&t.source&&(r=w.fromWitnessPubkeyhash(l.hash160(e.from(t.source.pubkey,"hex")),this.network),[r,i]=await this.getAccountByAddress(r,i),t.wid=r,t.account=i);var r=this.db.batch();i=c.txdb.ERR(t.witness,t.erid,t.txid);r.put(i,t.toRaw()),r.put(c.txdb.ER(t.erid),i),await r.write()}async getEr(t){var e;return(t=await this.db.get(c.txdb.ER(t)))&&([,,e]=c.txdb.ERRR(t),t=await this.db.get(t))?((t=$.fromRaw(t)).txid=e,t):null}async byPubkey(t,e,i=!1){var r,s=new E;t=await this.db.values({gte:c.txdb.ERR(t,B.NULL_HASH,B.NULL_HASH),lte:c.txdb.ERR(t,B.HIGH_HASH,B.HIGH_HASH),parse:t=>$.fromRaw(t)});let n=[],o=new Map;if(i){for(var a of t)(!o.get(a.source.cluster)||a.startHeight>o.get(a.source.cluster).startHeight)&&o.set(a.source.cluster,await this.caVerifyObj(a));n=o.values()}else n=t;for(r of n)s.set(r.erid,r);return s.query(e)}async caVerifyObj(t){var i={verify:!1};if(!t||t.validHeight<=this.curHeight)return i;var r=await this.erAbList.getErAb(t.erid);return r&&r.abolishHeight<this.curHeight?i:(r=ot.fromPublic(e.from(t.witness,"hex"),this.network.type),t.verify(r)?(t.verify=!0,0<(r=this.cpList.query([["pubKey",t.witness]])).list.length&&(t.cpid=r.list[0].cid),t):i)}async delErAbolish(t){var e=this.db.batch();e.del(c.txdb.ERA(t.erid)),await e.write()}async setErAbolish(t){var e=this.db.batch();e.put(c.txdb.ERA(t.erid),t.toRaw()),await e.write()}async getErAbolish(t){return(t=await this.db.get(c.txdb.ERA(t)))?q.fromRaw(t):null}loadErAbolishList(){return this.db.values({gte:c.txdb.ERA(B.ZERO_CID),lte:c.txdb.ERA(B.MAX_CID),parse:t=>q.fromRaw(t)})}async delAudit(t){var e=this.db.batch();e.del(c.txdb.AU(t.erid)),await e.write()}async setAudit(t){var e=this.db.batch();e.put(c.txdb.AU(t.erid),t.toRaw()),await e.write()}async getAudit(t){return(t=await this.db.get(c.txdb.AU(t)))?Z.fromRaw(t):null}async loadAuditList(){return this.db.values({gte:c.txdb.AU(B.NULL_HASH),lte:c.txdb.AU(B.HIGH_HASH),parse:t=>Z.fromRaw(t)})}async batchPut(t,e){var i=this.db.batch();i.put(t,e),await i.write()}async batchDel(t){var e=this.db.batch();e.del(t),await e.write()}async _insert(t,e,i){s(!t.mutable,"WDB: Cannot add mutable TX.");let r=await this.getWalletsByTX(t);if(r){this.logger.info("Incoming transaction for %d wallets in AccountDB (%s).",r.size,t.txid()),!e||this.state.marked||(this.logger.info("Marking AccountDB start block at %s (%d).",M.revHex(e.hash),e.height),await this.resetState(e,!0));let o=!1;for(const a of r){var n=await this.get(a);s(n),await n.add(t,e,i)&&(this.logger.info("Added transaction to wallet in AccountDB: %s (%d).",n.id,a),o=!0)}o||(r=null)}try{var o=await v.FactoryOfContract({env:this,block:e,tx:t});if(1!=await o.verify())throw new Error("Smart Contract Verify Failed.");e?await o.confirm():await o.insert()}catch(o){e?this.logger.error("TX(%s) Smart Contract Confirm Error: %s",t.txid(),o.message):this.logger.error("TX(%s) Smart Contract Insert Error: %s",t.txid(),o.message)}return r}async _unconfirm(t,e){if(e)try{await(await v.FactoryOfContract({env:this,block:e,tx:t})).unconfirm()}catch(e){this.logger.error("TX(%s) Smart Contract Unconfirm Error: %s",t.txid(),e.message)}let i,r=null;if(i=t.wids?(r=t.wids,t.hash):(r=await this.getWalletsByTX(t),t.hash("hex")),!r)return null;for(const t of r){var n=await this.get(t);s(n),await n.unconfirm(i)}}async resetChain(t){var e=await this.txLock.lock();try{return await this._resetChain(t)}finally{e()}}async _resetChain(t){if(t.height>this.curHeight)throw new Error(`WDB: Bad reset height ${t.height} while curHeight `+this.curHeight);var e;for(e of(await this.rollback(t.height)||await this._rescan(),await this.getWallets())){var i=await this.get(e);for(const e of await i.getPending())try{await i.abandon(e.hash)}catch(t){}}}async saveMSTrans(t){var e=await this.writeLock.lock();try{return await this._saveMSTrans(t)}finally{e()}}async _saveMSTrans(t){var i=this.db.batch();i.put(u.ms(w.getHash(t.addr,"hex"),t.txid),e.from(JSON.stringify(t))),await i.write()}async listMSTrans(t){return t=w.getHash(t,"hex"),this.db.values({gte:u.ms(t,B.NULL_HASH),lte:u.ms(t,B.HIGH_HASH),parse:t=>JSON.parse(t.toString())})}async delMSTrans(t,e){var i=await this.writeLock.lock();try{return await this._delMSTrans(t,e)}finally{i()}}async _delMSTrans(t,e){t=w.getHash(t,"hex");var i=this.db.batch();i.del(u.ms(t,e)),await i.write()}}ft.layout=u,t.exports=ft}).call(this,i(0).Buffer)},function(t,e,i){"use strict";e.randomBytes=e.rng=e.pseudoRandomBytes=e.prng=i(67),e.createHash=e.Hash=i(92),e.createHmac=e.Hmac=i(267);var r=i(452),s=(r=Object.keys(r),["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(r));e.getHashes=function(){return s},r=i(270),e.pbkdf2=r.pbkdf2,e.pbkdf2Sync=r.pbkdf2Sync,r=i(454),e.Cipher=r.Cipher,e.createCipher=r.createCipher,e.Cipheriv=r.Cipheriv,e.createCipheriv=r.createCipheriv,e.Decipher=r.Decipher,e.createDecipher=r.createDecipher,e.Decipheriv=r.Decipheriv,e.createDecipheriv=r.createDecipheriv,e.getCiphers=r.getCiphers,e.listCiphers=r.listCiphers,r=i(469),e.DiffieHellmanGroup=r.DiffieHellmanGroup,e.createDiffieHellmanGroup=r.createDiffieHellmanGroup,e.getDiffieHellman=r.getDiffieHellman,e.createDiffieHellman=r.createDiffieHellman,e.DiffieHellman=r.DiffieHellman,r=i(472),e.createSign=r.createSign,e.Sign=r.Sign,e.createVerify=r.createVerify,e.Verify=r.Verify,e.createECDH=i(495),r=i(496),e.publicEncrypt=r.publicEncrypt,e.privateEncrypt=r.privateEncrypt,e.publicDecrypt=r.publicDecrypt,e.privateDecrypt=r.privateDecrypt,r=i(499);e.randomFill=r.randomFill,e.randomFillSync=r.randomFillSync,e.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},e.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},function(t,e,i){"use strict";(function(e){
/*!
 * txdb.js - persistent transaction pool
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(3),s=i(52),n=i(1),o=i(31),a=i(47),h=i(43),c=i(41),u=i(300),l=i(68).txdb,f=i(4),d=i(26),p=i(16),g=i(301),m=i(204),w=i(302),y=i(501),b=i(502);i(105),i(106);const v=i(503);i(19);const k=i(42),S=i(102),_=i(22).nestingCodes;class x{constructor(t){this.wallet=t,this.walletdb=t.db,this.logger=this.walletdb.logger,this.network=this.walletdb.network,this.options=this.walletdb.options,this.coinCache=new s(this.options.coinCache),this.conserved=new Set,this.lockedCoins=new Map,this.state=null,this.pending=null,this.events=[]}async open(){let t=null;try{t=await this.getState()}catch(e){this.logger.info("TXDB State Format Error."),t=null}t?(this.state=t,this.logger.info("TXDB loaded for %s.",this.wallet.id)):(this.state=new y(this.wallet.wid,this.wallet.id),this.logger.info("TXDB created for %s.",this.wallet.id)),this.logger.info("TXDB State: tx=%d coin=%s.",this.state.tx,this.state.coin),this.logger.info("Balance: unconfirmed=%s confirmed=%s.",o.btc(this.state.unconfirmed),o.btc(this.state.confirmed)),this.pending=this.state.clone(),await this.loadLockedCoins(),this.state=this.pending}start(){return this.pending=this.state.clone(),this.coinCache.start(),this.wallet.start()}drop(){return this.pending=null,this.events.length=0,this.coinCache.drop(),this.wallet.drop()}clear(){return this.pending=this.state.clone(),this.events.length=0,this.coinCache.clear(),this.wallet.clear()}async commit(){try{await this.wallet.commit()}catch(t){throw this.pending=null,this.events.length=0,this.coinCache.drop(),t}if(this.pending.committed)for(var[t,e,i]of(this.state=this.pending,this.events))this.walletdb.emit(t,this.wallet.id,e,i),"tx"==t&&this.walletdb.emit("tx.received."+e.rhash(),this.wallet.id,e,i),this.wallet.emit(t,e,i);this.pending=null,this.events.length=0,this.coinCache.commit()}emit(t,e,i){this.events.push([t,e,i])}prefix(t){return n(this.wallet.wid),l.prefix(this.wallet.wid,t)}put(t,e){n(this.wallet.current),this.wallet.current.put(this.prefix(t),e)}del(t){n(this.wallet.current),this.wallet.current.del(this.prefix(t))}get(t){return this.walletdb.db.get(this.prefix(t))}has(t){return this.walletdb.db.has(this.prefix(t))}range(t){return t.gte&&(t.gte=this.prefix(t.gte)),t.lte&&(t.lte=this.prefix(t.lte)),this.walletdb.db.range(t)}keys(t){return t.gte&&(t.gte=this.prefix(t.gte)),t.lte&&(t.lte=this.prefix(t.lte)),this.walletdb.db.keys(t)}values(t){return t.gte&&(t.gte=this.prefix(t.gte)),t.lte&&(t.lte=this.prefix(t.lte)),this.walletdb.db.values(t)}async getPath(t){return(t=t.getAddress())?this.wallet.getPath(t):null}async hasPath(t){return!!(t=t.getAddress())&&this.wallet.hasPath(t)}async saveCredit(t,e){var i=t.coin,r=i.toKey(),s=t.toRaw();let n=await this.walletdb.getOutpointMap(i.hash,i.index);(n=n||new u(i.hash,i.index)).add(this.wallet.wid)&&this.walletdb.writeOutpointMap(this.wallet,i.hash,i.index,n),this.put(l.c(i.hash,i.index),s),this.put(l.C(e.account,i.hash,i.index),null),this.coinCache.push(r,t)}async removeCredit(t,e){var i=(t=t.coin).toKey();await this.removeOutpointMap(t.hash,t.index),this.del(l.C(e.account,t.hash,t.index)),this.del(l.c(t.hash,t.index)),this.coinCache.unpush(i)}spendCredit(t,e,i){var r=e.inputs[i].prevout;e=c.fromTX(e,i);this.put(l.d(e.hash,e.index),t.coin.toRaw()),this.put(l.s(r.hash,r.index),e.toRaw())}unspendCredit(t,e){var i=t.inputs[e].prevout;t=c.fromTX(t,e);this.del(l.s(i.hash,i.index)),this.del(l.d(t.hash,t.index))}writeInput(t,e){var i=t.inputs[e].prevout;t=c.fromTX(t,e);this.put(l.s(i.hash,i.index),t.toRaw())}removeInput(t,e){t=t.inputs[e].prevout,this.del(l.s(t.hash,t.index))}async resolveInput(t,e,i,r,s,o){var a,h=t.hash("hex");return!!(h=await this.getSpender(h,e))&&!await this.hasSpentCoin(h)&&(a=await this.getTX(h.hash),n(a),(t=b.fromTX(t,e,i,r)).own=o,this.spendCredit(t,a.tx,h.index),-1===a.height&&(t.spent=!0,-1!==i&&(this.changeConfirmed(t.coin,1),t.coin.lockedByLocktime(i,r)||t.coin.lockedBySequence(i,r))&&this.addLocked(t.coin),await this.saveCredit(t,s)),!0)}async isDoubleSpend(t){for(var{prevout:e}of t.inputs)if(await this.isSpent(e.hash,e.index))return!0;return!1}async isRBF(t){if(t.isRBF())return!0;for(var{prevout:e}of t.inputs)if(e=l.r(e.hash),await this.has(e))return!0;return!1}async getSpender(t,e){return(t=await this.get(l.s(t,e)))?c.fromRaw(t):null}isSpent(t,e){return this.has(l.s(t,e))}async removeOutpointMap(t,e){var i=await this.walletdb.getOutpointMap(t,e);i&&i.remove(this.wallet.wid)&&(0===i.wids.size?this.walletdb.unwriteOutpointMap(this.wallet,t,e):this.walletdb.writeOutpointMap(this.wallet,t,e,i))}async addBlockMap(t,e){let i=await this.walletdb.getBlockMap(e);(i=i||new g(e)).add(t,this.wallet.wid)&&this.walletdb.writeBlockMap(this.wallet,e,i)}async removeBlockMap(t,e){var i=await this.walletdb.getBlockMap(e);i&&i.remove(t,this.wallet.wid)&&(0===i.txs.size?this.walletdb.unwriteBlockMap(this.wallet,e):this.walletdb.writeBlockMap(this.wallet,e,i))}getBlocks(){return this.keys({gte:l.b(0),lte:l.b(4294967295),parse:t=>l.bb(t)})}async getStatusOfSC(t){return(t=await this.get(l.de(t)))?{txs:t.toString().split(",")}:{}}async _setStatusOfSC(t,i){i=i.reduce((t,e)=>(t&&(t+=","),t+e),""),this.put(l.de(t),e.from(i))}async getBlock(t){return(t=await this.get(l.b(t)))?v.fromRaw(t):null}async addBlock(t,i){var r=l.b(i.height);let s,n=await this.get(r);n||(s=v.fromMeta(i),n=s.toRaw()),s=e.allocUnsafe(n.length+32),n.copy(s,0),i=s.readUInt32LE(40,!0),s.writeUInt32LE(i+1,40,!0),t.copy(s,n.length),this.put(r,s)}async removeBlock(t,e){e=l.b(e);var i,r=await this.get(e);r&&(i=r.readUInt32LE(40,!0),n(0<i),n(r.slice(-32).equals(t)),1===i?this.del(e):((t=r.slice(0,-32)).writeUInt32LE(i-1,40,!0),this.put(e,t)))}async addBlockSlow(t,e){let i=await this.getBlock(e.height);(i=i||v.fromMeta(e)).add(t)&&this.put(l.b(e.height),i.toRaw())}async removeBlockSlow(t,e){var i=await this.getBlock(e);i&&i.remove(t)&&(0===i.hashes.length?this.del(l.b(e)):this.put(l.b(e),i.toRaw()))}async _add(t,e,i){n(!t.mutable,"Cannot add mutable TX to wallet."),i=i||{};var s=t.hash("hex"),o=await this.getTX(s);if(e){if(!t.isCoinbase()){var a=await this.getSpentCredits(t);for(let i=0;i<t.inputs.length;i++){var h=t.inputs[i],c=h.prevout;let r=a[i];(r=r||await this.getCredit(c.hash,c.index))&&await this.emitCoinSpent(h,r.coin,t,e)}}if(o)return-1===o.height||(this.logger.debug("txdb._add: Existing tx is already confirmed.",r.revHex(s)),this.walletdb.rescanning)?this._confirm(o,e):null;await this.removeConflicts(t,!1),this.del(l.r(s))}else{if(o&&!i.reorg)return null;if(await this.isRBF(t))return this.put(l.r(s),null),null;if(!await this.removeConflicts(t,!0))return null}return o=m.fromTX(t,e),this.insert(o,e)}async insert(t,e){var i=t.tx,s=t.hash,o=e?e.height:-1,a=e?e.mtp:0,h=new R(this,t,e),c=new Set;let u=!1,f=!1;if(!i.isCoinbase())for(let t=0;t<i.inputs.length;t++){var d=i.inputs[t].prevout;if(d=await this.getCredit(d.hash,d.index)){var p=d.coin;if(!e&&!await this.verifyInput(i,t,p))return this.clear(),null;var g=await this.getPath(p);n(g),h.setInput(t,g,p),c.add(g.account),this.spendCredit(d,i,t),this.changeUnconfirmed(p,-1),e?(this.changeConfirmed(p,-1),await this.removeCredit(d,g),this.removeLocked(p)):(d.spent=!0,await this.saveCredit(d,g)),f=!0,u=!0}else this.writeInput(i,t)}for(let t=0;t<i.outputs.length;t++){var m,w=i.outputs[t],y=await this.getPath(w);y&&(h.setOutput(t,y),c.add(y.account),await this.resolveInput(i,t,o,a,y,u)||((m=b.fromTX(i,t,o,a)).own=u,this.changeUnconfirmed(w,1),e&&this.changeConfirmed(w,1),await this.saveCredit(m,y),(m.coin.lockedByLocktime(o,a)||m.coin.lockedBySequence(o,a))&&this.addLocked(m.coin)),f=!0)}if(!f)return this.clear(),null;this.put(l.t(s),t.toRaw()),this.logger.spam("layout.t insert",r.revHex(s)),this.put(l.m(t.mtime,s),null),e?this.put(l.h(o,s),null):this.put(l.p(s),null);for(const i of c)this.put(l.T(i,s),null),this.put(l.M(i,t.mtime,s),null),e?this.put(l.H(i,o,s),null):this.put(l.P(i,s),null);return e&&(await this.addBlockMap(s,o),await this.addBlock(i.hash(),e),this.refreshLocked(o,r.now())),this.pending.tx++,this.put(l.R,this.pending.commit()),this.unConserveTX(i),this.emit("tx",i,h),this.emit("balance",this.pending.toBalance(),h),h}async _confirm(t,e){var i=t.tx,s=t.hash,o=e.height,a=e.mtp||e.time,h=new R(this,t,e),c=new Set;let u=!1;if(t.setBlock(e),!i.isCoinbase()){var f=await this.getSpentCredits(i);for(let t=0;t<i.inputs.length;t++){var d=i.inputs[t].prevout;let e=f[t];if(!e){if(!(e=await this.getCredit(d.hash,d.index)))continue;this.spendCredit(e,i,t),this.changeUnconfirmed(e.coin,-1)}d=e.coin;var p=await this.getPath(d);n(p),h.setInput(t,p,d),c.add(p.account),this.changeConfirmed(d,-1),await this.removeCredit(e,p),this.removeLocked(e.coin),u=!0}}for(let t=0;t<i.outputs.length;t++){var g=i.outputs[t],m=await this.getPath(g);if(m&&(h.setOutput(t,m),c.add(m.account),!await this.resolveInput(i,t,o,a,m,u))){let e=await this.getCredit(s,t);e||((e=b.fromTX(i,t,o,a)).own=!0,this.changeUnconfirmed(g,1)),e.spent&&await this.updateSpentCoin(i,t,o),this.changeConfirmed(g,1),e.coin.time=a,e.coin.height=o,await this.saveCredit(e,m),(e.coin.lockedByLocktime(o,a)||e.coin.lockedBySequence(o,a))&&this.addLocked(e.coin)}}this.del(l.r(s)),this.put(l.t(s),t.toRaw()),this.logger.spam("layout.t confirm",r.revHex(s)),this.del(l.p(s)),this.put(l.h(o,s),null);for(const e of c)this.put(l.T(e,s),null),this.put(l.M(e,t.mtime,s),null),this.del(l.P(e,s)),this.put(l.H(e,o,s),null);return e&&(await this.addBlockMap(s,o),await this.addBlock(i.hash(),e),this.refreshLocked(o,r.now())),this.put(l.R,this.pending.commit()),this.unConserveTX(i),this.emit("confirmed",i,h),this.emit("balance",this.pending.toBalance(),h),h}async remove(t){return(t=await this.getTX(t))?this.removeRecursive(t):null}changeUnconfirmed(t,e){t.isColored||(1===e?(this.pending.coin++,this.pending.unconfirmed+=t.value):(this.pending.coin--,this.pending.unconfirmed-=t.value))}changeConfirmed(t,e){t.isColored||(1===e?this.pending.confirmed+=t.value:this.pending.confirmed-=t.value)}changeLocked(t,e,i){e.isColored||(1===i?t.locked+=e.value:t.locked-=e.value)}async removeRecursive(t){n(t);var e=t.tx,i=t.hash;for(let t=0;t<e.outputs.length;t++){var r=await this.getSpender(i,t);r&&(r=await this.getTX(r.hash),await this.removeRecursive(r))}return this.start(),t=await this.erase(t,t.getBlock()),n(t),await this.commit(),t}async unconfirm(t){let e;this.start();try{e=await this._unconfirm(t)}catch(t){throw this.drop(),t}return await this.commit(),e}async _unconfirm(t){return(t=await this.getTX(t))&&-1!==t.height?this.disconnect(t,t.getBlock()):null}async disconnect(t,e){n(e);var i=t.tx,s=t.hash,o=e.height,a=e.mtp||e.time,h=new R(this,t,e),c=new Set;if(t.unsetBlock(),!i.isCoinbase()){var u=await this.getSpentCredits(i);for(let e=0;e<i.inputs.length;e++){var f=u[e];if(f){var d=f.coin;try{n(-1!==d.height)}catch(t){this.logger.warning("tx(%s): coin.height = -1: %s",i.txid(),t.message)}var p=await this.getPath(d);n(p),h.setInput(e,p,d),c.add(p.account),this.changeConfirmed(d,1),f.spent=!0,await this.saveCredit(f,p),(f.coin.lockedByLocktime(o,a)||f.coin.lockedBySequence(o,a))&&this.addLocked(f.coin)}}}for(let t=0;t<i.outputs.length;t++){var g,m=i.outputs[t],w=await this.getPath(m);w&&((g=await this.getCredit(s,t))?(g.spent&&await this.updateSpentCoin(i,t,o),h.setOutput(t,w),c.add(w.account),this.changeConfirmed(m,-1),g.coin.height=-1,await this.saveCredit(g,w)):await this.updateSpentCoin(i,t,o))}await this.removeBlockMap(s,o),await this.removeBlock(i.hash(),o),this.refreshLocked(o,r.now()),this.put(l.t(s),t.toRaw()),this.put(l.p(s),null),this.del(l.h(o,s));for(const t of c)this.put(l.P(t,s),null),this.del(l.H(t,o,s));return this.put(l.R,this.pending.commit()),this.emit("unconfirmed",i,h),this.emit("balance",this.pending.toBalance(),h),h}async erase(t,e){var i=t.tx,s=t.hash,o=e?e.height:-1,a=e?e.mtp:0,h=new R(this,t,e),c=new Set;if(!i.isCoinbase()){var u=await this.getSpentCredits(i);for(let t=0;t<i.inputs.length;t++){var f,d,p=u[t];p?(f=p.coin,d=await this.getPath(f),n(d),h.setInput(t,d,f),c.add(d.account),this.changeUnconfirmed(f,1),e&&this.changeConfirmed(f,1),this.unspendCredit(i,t),await this.saveCredit(p,d),(p.coin.lockedByLocktime(o,a)||p.coin.lockedBySequence(o,a))&&this.addLocked(p.coin)):this.removeInput(i,t)}}for(let t=0;t<i.outputs.length;t++){var g,m=i.outputs[t],w=await this.getPath(m);w&&(h.setOutput(t,w),c.add(w.account),g=b.fromTX(i,t,o,a),this.changeUnconfirmed(m,-1),e&&this.changeConfirmed(m,-1),await this.removeCredit(g,w),this.removeLocked(g.coin))}this.del(l.r(s)),this.del(l.t(s)),this.logger.spam("layout.t erase",r.revHex(s)),this.del(l.m(t.mtime,s)),e?this.del(l.h(o,s)):this.del(l.p(s));for(const i of c)this.del(l.T(i,s)),this.del(l.M(i,t.mtime,s)),e?this.del(l.H(i,o,s)):this.del(l.P(i,s));e&&(await this.removeBlockMap(s,o),await this.removeBlockSlow(s,o),this.refreshLocked(o,r.now())),this.pending.tx--,this.put(l.R,this.pending.commit());try{await(await k.FactoryOfContract({env:this.walletdb,tx:i,block:e})).erase()}catch(t){this.logger.error("TX(%s) Smart Contract Erase Error: %s",i.txid(),t.message)}return this.emit("tx.remove",i,h),this.emit("balance",this.pending.toBalance(),h),h}async removeConflict(t){var e;return t?(e=t.tx,this.logger.warning("Handling conflicting tx: %s.",e.txid()),this.drop(),t=await this.removeRecursive(t),this.start(),this.logger.warning("Removed conflict: %s.",e.txid()),this.emit("conflict",e,t),t):Promise.resolve()}async removeConflicts(t,e){var i=t.hash("hex"),r=[];if(!t.isCoinbase()){for(let a=0;a<t.inputs.length;a++){if((s=t.inputs[a].prevout).hash!==f.NULL_HASH&&(s=await this.getSpender(s.hash,s.index))&&s.hash!==i){var s=await this.getTX(s.hash),o=(n(s),s.getBlock());if(e&&o)return!1;r[a]=s}}for(const t of r)await this.removeConflict(t)}return!0}async verifyInput(t,e,i){var r=p.flags.MANDATORY_VERIFY_FLAGS;return!this.options.verify||t.verifyInput(e,i,r)}conserveTX(t){if(!t.isCoinbase())for(const e of t.inputs)this.conserveCoin(e.prevout)}unConserveTX(t){if(!t.isCoinbase())for(const e of t.inputs)this.unConserveCoin(e.prevout)}conserveCoin(t){t=t.toKey(),this.conserved.add(t)}unConserveCoin(t){return t=t.toKey(),this.conserved.delete(t)}isConserved(t){return t=t.toKey(),this.conserved.has(t)}filterConserved(t){var e=[];for(const i of t)this.isConserved(i)||e.push(i);return e}getConserved(){var t=[];for(const e of this.conserved.keys())t.push(c.fromKey(e));return t}getAccountHistoryHashes(t){return this.keys({gte:l.T(t,f.NULL_HASH),lte:l.T(t,f.HIGH_HASH),parse:t=>{var[,t]=l.Tt(t);return t}})}getHistoryHashes(t){return null!=t?this.getAccountHistoryHashes(t):this.keys({gte:l.t(f.NULL_HASH),lte:l.t(f.HIGH_HASH),parse:t=>l.tt(t)})}getAccountPendingHashes(t){return this.keys({gte:l.P(t,f.NULL_HASH),lte:l.P(t,f.HIGH_HASH),parse:t=>{var[,t]=l.Pp(t);return t}})}getPendingHashes(t){return null!=t?this.getAccountPendingHashes(t):this.keys({gte:l.p(f.NULL_HASH),lte:l.p(f.HIGH_HASH),parse:t=>l.pp(t)})}getAccountOutpoints(t){return void 0!==t&&null!=t?this.keys({gte:l.C(t,f.NULL_HASH,0),lte:l.C(t,f.HIGH_HASH,4294967295),parse:t=>{var[,t,e]=l.Cc(t);return new c(t,e)}}):this.keys({gte:l.c(f.NULL_HASH,0),lte:l.c(f.HIGH_HASH,4294967295),parse:t=>{var[t,e]=l.cc(t);return new c(t,e)}})}getAccountHeightRangeHashes(t,e){var i=e.start||0,r=e.end||4294967295;return this.keys({gte:l.H(t,i,f.NULL_HASH),lte:l.H(t,r,f.HIGH_HASH),limit:e.limit,reverse:e.reverse,parse:t=>{var[,,t]=l.Hh(t);return t}})}getHeightRangeHashes(t,e){var i;return t&&"object"==typeof t&&(e=t,t=null),null!=t?this.getAccountHeightRangeHashes(t,e):(t=e.start||0,i=e.end||4294967295,this.keys({gte:l.h(t,f.NULL_HASH),lte:l.h(i,f.HIGH_HASH),limit:e.limit,reverse:e.reverse,parse:t=>{var[,t]=l.hh(t);return t}}))}getHeightHashes(t){return this.getHeightRangeHashes({start:t,end:t})}getAccountRangeHashes(t,e){var i=e.start||0,r=e.end||4294967295;return this.keys({gte:l.M(t,i,f.NULL_HASH),lte:l.M(t,r,f.HIGH_HASH),limit:e.limit,reverse:e.reverse,parse:t=>{var[,,t]=l.Mm(t);return t}})}getRangeHashes(t,e){var i;return t&&"object"==typeof t&&(e=t,t=null),null!=t?this.getAccountRangeHashes(t,e):(t=e.start||0,i=e.end||4294967295,this.keys({gte:l.m(t,f.NULL_HASH),lte:l.m(i,f.HIGH_HASH),limit:e.limit,reverse:e.reverse,parse:t=>{var[,t]=l.mm(t);return t}}))}async getRange(t,e){var i=[];t&&"object"==typeof t&&(e=t,t=null),t=await this.getRangeHashes(t,e);for(const e of t){var r=await this.getTX(e);n(r),i.push(r)}return i}getLast(t,e){return this.getRange(t,{start:0,end:4294967295,reverse:!0,limit:e||10})}getHistory(t){return null!=t?this.getAccountHistory(t):this.values({gte:l.t(f.NULL_HASH),lte:l.t(f.HIGH_HASH),parse:m.fromRaw})}async getAccountHistory(t){var e=[];for(const r of await this.getHistoryHashes(t)){var i=await this.getTX(r);n(i),e.push(i)}return e}async getPending(t){var e=[];for(const r of await this.getPendingHashes(t)){var i=await this.getTX(r);n(i),e.push(i)}return e}getCredits(t){return void 0!==t&&null!=t?this.getAccountCredits(t):this.range({gte:l.c(f.NULL_HASH,0),lte:l.c(f.HIGH_HASH,4294967295),parse:(t,e)=>{var[t,i]=l.cc(t),r=(e=b.fromRaw(e),c.toKey(t,i));return e.coin.hash=t,e.coin.index=i,this.coinCache.set(r,e),e}})}async fillCoins(){var t;for(t of await this.keys({gte:l.C(0,f.NULL_HASH,0),lte:l.C(4294967295,f.HIGH_HASH,4294967295),parse:t=>{var e,[t,e,i]=l.Cc(t);return(e=new c(e,i)).wid=this.wallet.wid,e.account=t,[e.toKey(),e]}})){var e=await this.get(l.c(t[1].hash,t[1].index));e&&((e=b.fromRaw(e)).coin.hash=t[1].hash,e.coin.index=t[1].index,this.coinCache.set(t[0],e))}}async getAccountCredits(t){var e=[];for(const r of await this.getAccountOutpoints(t)){var i=await this.getCredit(r.hash,r.index);i||(this.logger.warning("getAccountCredits: credit not found.",r.hash,r.index),n(i)),e.push(i)}return e}async getSpentCredits(t){if(t.isCoinbase())return[];var e=t.hash("hex");const i=[];for(let e=0;e<t.inputs.length;e++)i.push(null);return await this.range({gte:l.d(e,0),lte:l.d(e,4294967295),parse:(e,r)=>{var[,e]=l.dd(e),s=(r=h.fromRaw(r),t.inputs[e]);n(s),r.hash=s.prevout.hash,r.index=s.prevout.index,i[e]=new b(r)}}),i}async getCoins(t){const e=[];if(void 0!==t&&null!=t)for(const r of await this.getAccountOutpoints(t)){var i=await this.getCredit(r.hash,r.index);i||(this.logger.warning("getCoins: credit not found.",r.hash,r.index),n(i)),i.spent||e.push(i.coin)}else await this.range({gte:l.c(f.NULL_HASH,0),lte:l.c(f.HIGH_HASH,4294967295),parse:(t,i)=>{var[t,r]=l.cc(t),s=(i=b.fromRaw(i),c.toKey(t,r));i.coin.hash=t,i.coin.index=r,this.coinCache.set(s,i),i.spent||e.push(i.coin)}});return e}async getSpentCoins(t){if(t.isCoinbase())return[];var e=[];for(const i of await this.getSpentCredits(t))i?e.push(i.coin):e.push(null);return e}async getCoinView(t){var e=new a;if(!t.isCoinbase())for(const r of t.inputs){var i=r.prevout;(i=await this.getCoin(i.hash,i.index))&&e.addCoin(i)}return e}async getSpentView(t){var e=new a;if(!t.isCoinbase())for(const i of await this.getSpentCoins(t))i&&e.addCoin(i);return e}async getState(){var t=await this.get(l.R);return t?y.fromRaw(this.wallet.wid,this.wallet.id,t):null}async loadLockedCoins(){var t=this.walletdb.curHeight,e=r.now();for(const r of await this.wallet.getCredits()){var i=r.coin;i.getAddress()&&(i.lockedByLocktime(t,e)||i.lockedBySequence(t,e))&&this.addLocked(i)}}refreshLocked(t,e){for(const i of this.lockedCoins.values())i.lockedByLocktime(t,e)||i.lockedBySequence(t,e)||this.removeLocked(i)}addLocked(t){var e=l.prefix(this.wallet.wid,l.c(t.hash,t.index));this.lockedCoins.has(e)||(this.lockedCoins.set(e,t),this.changeLocked(this.pending,t,1))}removeLocked(t){var e=l.prefix(this.wallet.wid,l.c(t.hash,t.index));this.lockedCoins.has(e)&&(this.lockedCoins.delete(e),this.changeLocked(this.pending,t,-1))}async getTX(t){return(t=await this.get(l.t(t)))?m.fromRaw(t):null}async getDetails(t){return(t=await this.getTX(t))?this.toDetails(t):null}async toDetails(t){var e=[];if(!Array.isArray(t))return this._toDetail(t);for(const r of t){var i=await this._toDetail(r);i&&e.push(i)}return e}async _toDetail(t){var e=t.tx,i=t.getBlock(),r=new R(this,t,i),s=await this.getSpentCoins(e);for(let t=0;t<e.inputs.length;t++){var n=s[t];let e=null;n&&(e=await this.getPath(n)),r.setInput(t,e,n)}for(let t=0;t<e.outputs.length;t++){var o=e.outputs[t];o=await this.getPath(o);r.setOutput(t,o)}return r}hasTX(t){return this.has(l.t(t))}async getCoin(t,e){return(t=await this.getCredit(t,e))?t.coin:null}async emitCoinSpent(t,e,i,r){(i={env:this.walletdb,block:r,tx:i,hash:t.prevout.hash,i:t.prevout.index,height:r.height,output:e,type:e.getReturnType(),data:e.getReturnData(_)}).data&&await S(i).spent(t)}async getCredit(t,e){var i=this.state,r=c.toKey(t,e),s=this.coinCache.get(r);return s||((s=await this.get(l.c(t,e)))?((s=b.fromRaw(s)).coin.hash=t,s.coin.index=e,i===this.state&&this.coinCache.set(r,s),s):null)}async getSpentCoin(t,e){return(t=await this.get(l.d(t.hash,t.index)))?(t=h.fromRaw(t),e&&(t.hash=e.hash,t.index=e.index),t):null}hasSpentCoin(t){return this.has(l.d(t.hash,t.index))}async updateSpentCoin(t,e,i){t=c.fromTX(t,e);(e=await this.getSpender(t.hash,t.index))&&(t=await this.getSpentCoin(e,t))&&(t.height=i,this.put(l.d(e.hash,e.index),t.toRaw()))}async hasCoin(t,e){var i=c.toKey(t,e);return!!this.coinCache.has(i)||this.has(l.c(t,e))}async getBalance(t){return null!=t?this.getAccountBalance(t):this.state.toBalance()}async getAccountBalance(t){var e=await this.getAccountCredits(t),i=new w(this.wallet.wid,this.wallet.id,t),r=this.walletdb.curHeight,s=this.network.now();for(const t of e){var n=t.coin;n.isColored||(t.spent||(i.unconfirmed+=n.value),-1!==n.height&&(i.confirmed+=n.value)),(n.lockedByLocktime(r,s)||n.lockedBySequence(r,s))&&this.changeLocked(i,n,1)}return i}async zap(t,e){n(r.isU32(e));var i=r.now(),s=[];for(const r of await this.getRange(t,{start:0,end:i-e}))-1===r.height&&(n(i-r.mtime>=e),this.logger.debug("Zapping TX: %s (%s)",r.tx.txid(),this.wallet.id),await this.remove(r.hash),s.push(r.hash));return s}async abandon(t){if(await this.has(l.p(t)))return this.remove(t)}}x.layout=l;class R{constructor(t,e,i){this.wallet=t.wallet,this.network=this.wallet.network,this.wid=this.wallet.wid,this.id=this.wallet.id,this.chainHeight=t.walletdb.curHeight,this.hash=e.hash,this.tx=e.tx,this.mtime=e.mtime,this.size=this.tx.getSize(),this.vsize=this.tx.getVirtualSize(),this.block=null,this.height=-1,this.time=0,i&&(this.block=i.hash,this.height=i.height,this.time=i.time),this.inputs=[],this.outputs=[],this.init()}init(){for(const e of this.tx.inputs){var t=new E;t.address=e.getAddress(),this.inputs.push(t)}for(const t of this.tx.outputs){var e=new E;e.value=t.value,e.address=t.getAddress(),this.outputs.push(e)}}setInput(t,e,i){var r=this.inputs[t];r.prevout=this.tx.inputs[t].prevout,i&&(r.value=i.value,r.address=i.getAddress()),e&&(r.path=e)}setOutput(t,e){t=this.outputs[t],e&&(t.path=e)}getDepth(){var t;return-1===this.height||(t=this.chainHeight-this.height)<0?0:1+t}getFee(){let t=0,e=0;for(const e of this.inputs){if(!e.path)return 0;t+=e.value}for(const t of this.outputs)e+=t.value;return t-e}getRate(t){return d.getRate(this.vsize,t)}toJSON(){var t=this.getFee();let e=this.getRate(t);return Number.isSafeInteger(e)||(e=0),{wid:this.wid,id:this.id,hash:r.revHex(this.hash),height:this.height,block:this.block?r.revHex(this.block):null,time:this.time,mtime:this.mtime,date:r.date(this.time||this.mtime),size:this.size,virtualSize:this.vsize,fee:t,rate:e,confirmations:this.getDepth(),inputs:this.inputs.map(t=>t.getJSON(this.network)),outputs:this.outputs.map(t=>t.getJSON(this.network)),tx:this.tx.toRaw().toString("hex")}}}class E{constructor(){this.value=0,this.address=null,this.path=null}toJSON(){return this.getJSON()}getJSON(t){return{prevout:this.prevout?this.prevout.toJSON():null,value:this.value,address:this.address?this.address.toString(t):null,path:this.path?this.path.toJSON():null}}}t.exports=x}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * master.js - master process for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */const r=i(1),s=i(14),n=i(3),o=i(18),a=i(216),h=i(217),c=i(107),u=i(507);function l(){if(!(this instanceof l))return new l;s.call(this),this.parent=new u,this.framer=new h,this.parser=new a,this.listening=!1,this.color=!1,this.init()}Object.setPrototypeOf(l.prototype,s.prototype),l.prototype.init=function(){this.parent.on("data",t=>{this.parser.feed(t)}),this.parent.on("error",t=>{this.emit("error",t)}),this.parent.on("exception",t=>{this.send(new c.ErrorPacket(t)),setTimeout(()=>this.destroy(),1e3)}),this.parser.on("error",t=>{this.emit("error",t)}),this.parser.on("packet",t=>{this.emit("packet",t)})},l.prototype.setEnv=function(t){this.color="1"===t.GAMEGOLD_WORKER_ISTTY,this.set(t.GAMEGOLD_WORKER_NETWORK)},l.prototype.set=function(t){return o.set(t)},l.prototype.write=function(t){return this.parent.write(t)},l.prototype.send=function(t){return this.write(this.framer.packet(t))},l.prototype.sendEvent=function(...t){return this.send(new c.EventPacket(t))},l.prototype.destroy=function(){return this.parent.destroy()},l.prototype.log=function(...t){t=n.format(t,this.color),this.send(new c.LogPacket(t))},l.prototype.listen=function(){r(!this.listening,"Already listening."),this.listening=!0,this.on("error",t=>{this.send(new c.ErrorPacket(t))}),this.on("packet",t=>{try{t.masterHandle(this)}catch(t){this.emit("error",t)}})},t.exports=l},function(t,e,i){"use strict";(function(e){
/*!
 * masterkey.js - master bip32 key object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(3),n=i(29),o=i(72),a=i(81),h=i(112),c=i(138),u=i(215),l=i(2),f=i(6),d=i(4),p=i(145),g=p.Mnemonic;class m{constructor(t){this.encrypted=!1,this.iv=null,this.ciphertext=null,this.key=null,this.mnemonic=null,this.alg=m.alg.PBKDF2,this.N=5e4,this.r=0,this.p=0,this.aesKey=null,this.timer=null,this.until=0,this._onTimeout=this.lock.bind(this),this.locker=new n,t&&this.fromOptions(t)}fromOptions(t){return r(t),null!=t.encrypted&&(r("boolean"==typeof t.encrypted),this.encrypted=t.encrypted),t.iv&&(r(e.isBuffer(t.iv)),this.iv=t.iv),t.ciphertext&&(r(e.isBuffer(t.ciphertext)),this.ciphertext=t.ciphertext),t.key&&(r(p.isPrivate(t.key)),this.key=t.key),t.mnemonic&&(r(t.mnemonic instanceof g),this.mnemonic=t.mnemonic),null!=t.alg&&("string"==typeof t.alg?(this.alg=m.alg[t.alg.toUpperCase()],r(null!=this.alg,"Unknown algorithm.")):(r("number"==typeof t.alg),r(m.algByVal[t.alg]),this.alg=t.alg)),null!=t.rounds&&(r(s.isU32(t.rounds)),this.N=t.rounds),null!=t.N&&(r(s.isU32(t.N)),this.N=t.N),null!=t.r&&(r(s.isU32(t.r)),this.r=t.r),null!=t.p&&(r(s.isU32(t.p)),this.p=t.p),r(this.encrypted?!this.key:this.key),this}static fromOptions(t){return(new m).fromOptions(t)}async unlock(t,e){var i=await this.locker.lock();try{return await this._unlock(t,e)}finally{i()}}async _unlock(t,e){if(this.key)this.encrypted&&0<e&&this.start(e);else{if(!t)throw new Error("No passphrase.");r(this.encrypted);t=await this.derive(t);var i=h.decipher(this.ciphertext,t,this.iv);this.fromKeyRaw(i),0<e&&this.start(e),this.aesKey=t}return this.key}start(t){t=t||60,this.stop(),-1!==t&&(this.until=s.now()+t,this.timer=setTimeout(this._onTimeout,1e3*t))}stop(){null!=this.timer&&(clearTimeout(this.timer),this.timer=null,this.until=0)}async derive(t){var i=m.SALT,r=this.N,s=this.r,n=this.p;switch("string"==typeof t&&(t=e.from(t,"utf8")),this.alg){case m.alg.PBKDF2:return c.deriveAsync(t,i,r,32,"sha256");case m.alg.SCRYPT:return u.deriveAsync(t,i,r,s,n,32);default:throw new Error(`Unknown algorithm: ${this.alg}.`)}}encipher(t,i){return this.aesKey?("string"==typeof i&&(i=e.from(i,"hex")),h.encipher(t,this.aesKey,i.slice(0,16))):null}decipher(t,i){return this.aesKey?("string"==typeof i&&(i=e.from(i,"hex")),h.decipher(t,this.aesKey,i.slice(0,16))):null}async lock(){var t=await this.locker.lock();try{return await this._lock()}finally{t()}}_lock(){this.encrypted?(this.stop(),this.key&&(this.key.destroy(!0),this.key=null),this.aesKey&&(a(this.aesKey),this.aesKey=null)):(r(null==this.timer),r(this.key))}async destroy(){await this.lock(),this.locker.destroy()}async decrypt(t,e){var i=await this.locker.lock();try{return await this._decrypt(t,e)}finally{i()}}async _decrypt(t,e){if(!this.encrypted)throw new Error("Master key is not encrypted.");if(!t)throw new Error("No passphrase provided.");this._lock();t=await this.derive(t);var i=h.decipher(this.ciphertext,t,this.iv);return this.fromKeyRaw(i),this.encrypted=!1,this.iv=null,this.ciphertext=null,e?t:(a(t),null)}async encrypt(t,e){var i=await this.locker.lock();try{return await this._encrypt(t,e)}finally{i()}}async _encrypt(t,e){if(this.encrypted)throw new Error("Master key is already encrypted.");var i,r;if(t)return r=this.toKeyRaw(),i=o.randomBytes(16),this.stop(),t=await this.derive(t),r=h.encipher(r,t,i),this.key&&(this.key.destroy(!0),this.key=null),this.aesKey&&(a(this.aesKey),this.aesKey=null),this.mnemonic=null,this.encrypted=!0,this.iv=i,this.ciphertext=r,e?t:(a(t),null);throw new Error("No passphrase provided.")}getKeySize(){let t=0;return t=t+this.key.getSize()+1,this.mnemonic&&(t+=this.mnemonic.getSize()),t}toKeyRaw(){var t=new f(this.getKeySize());return this.key.toWriter(t),this.mnemonic?(t.writeU8(1),this.mnemonic.toWriter(t)):t.writeU8(0),t.render()}fromKeyRaw(t){return t=new l(t),this.key=p.PrivateKey.fromReader(t),1===t.readU8()&&(this.mnemonic=g.fromReader(t)),this}getSize(){let t=0;return this.encrypted?(t=(t+=1)+d.sizeVarBytes(this.iv))+d.sizeVarBytes(this.ciphertext)+13:(t+=1)+d.sizeVarlen(this.getKeySize())}toRaw(){var t,e=new f(this.getSize());return this.encrypted?(e.writeU8(1),e.writeVarBytes(this.iv),e.writeVarBytes(this.ciphertext),e.writeU8(this.alg),e.writeU32(this.N),e.writeU32(this.r),e.writeU32(this.p)):(e.writeU8(0),t=this.getKeySize(),e.writeVarint(t),e.writeBytes(this.key.toRaw()),this.mnemonic?(e.writeU8(1),this.mnemonic.toWriter(e)):e.writeU8(0)),e.render()}fromRaw(t){return t=new l(t),this.encrypted=1===t.readU8(),this.encrypted?(this.iv=t.readVarBytes(),this.ciphertext=t.readVarBytes(),this.alg=t.readU8(),r(m.algByVal[this.alg]),this.N=t.readU32(),this.r=t.readU32(),this.p=t.readU32()):(t.readVarint(),this.key=p.PrivateKey.fromRaw(t.readBytes(82)),1===t.readU8()&&(this.mnemonic=g.fromReader(t))),this}static fromRaw(t){return(new m).fromRaw(t)}fromKey(t,e){return this.encrypted=!1,this.iv=null,this.ciphertext=null,this.key=t,this.mnemonic=e||null,this}static fromKey(t,e){return(new m).fromKey(t,e)}toJSON(t){return this.encrypted?{encrypted:!0,until:this.until,iv:this.iv.toString("hex"),ciphertext:t?this.ciphertext.toString("hex"):void 0,algorithm:m.algByVal[this.alg].toLowerCase(),N:this.N,r:this.r,p:this.p}:{encrypted:!1,key:t?this.key.toJSON():void 0,mnemonic:t&&this.mnemonic?this.mnemonic.toJSON():void 0}}inspect(){var t=this.toJSON(!0);return this.key&&(t.key=this.key.toJSON()),this.mnemonic&&(t.mnemonic=this.mnemonic.toJSON()),t}}m.SALT=e.from("Bitcoin seed","ascii"),m.alg={PBKDF2:0,SCRYPT:1},m.algByVal={0:"PBKDF2",1:"SCRYPT"},t.exports=m}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e,r,s){
/*!
 * rpc.js - bitcoind-compatible json rpc for vallnet.
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const n=i(1),o=i(55);i(105);const a=i(68).walletdb,h=i(146),c=i(65),u=c.errors,l=c.MAGIC_STRING,f=i(64),d=i(49),p=i(103),g=i(3),m=i(162),w=i(4),y=i(104),b=i(31),v=i(16),k=i(9),S=i(8),_=i(23),x=i(13),R=i(32),E=i(117),A=i(51),M=i(41),O=i(19),I=i(119),C=i(120),{ContractType:T,ContractState:P,PropStatus:B,HtlcStatus:N}=i(7),L=i(121),H=i(108),U=i(130),D=i(22).opcodes;t.exports=class extends c{constructor(t){super(t),n(t,"RPC requires a WalletDB."),this.wdb=t,this.keys=t.keys,this.network=t.network,this.logger=t.logger.context("rpc"),this.client=t.client,this.init()}init(){this.add("sys.alliance.create",this.allianceCreate),this.add("sys.alliance.import",this.allianceImport),this.add("sys.alliance.delete",this.allianceDelete),this.add("sys.alliance.refresh",this.refreshAlliance),this.add("sys.alliance.refresh.async",this.refreshAllianceAsync),this.add("sys.alliance.gettoken",this.getAllianceNodeToken),this.add("sys.alliance.user",this.allianceUserCreate),this.add("wallet",this.routerOfWallet),this.add("wallet.create",this.mkwallet),this.add("wallet.exportmnemonic.admin",this.exportMnemonic),this.add("wallet.importmnemonic.admin",this.importMnemonic),this.add("wallet.export",this.dumpWallet),this.add("wallet.exports.admin",this.dumpWallets),this.add("wallet.import",this.importWallet),this.add("wallet.list",this.getWallets),this.add("wallet.info",this.getWalletInfo),this.add("wallet.block",this.getWalletBlock),this.add("wallet.layouth",this.getWalletLayoutH),this.add("wallet.encrypt",this.encryptWallet),this.add("wallet.decrypt",this.decryptWallet),this.add("wallet.changepassphrase",this.changePassphrase),this.add("wallet.lock",this.walletLock),this.add("wallet.unlock",this.unlock),this.add("wallet.blocks",this.getblocks),this.add("wallet.auth",this.walletAuth),this.add("key",this.routerOfKey),this.add("key.export.private",this.dumpPrivKey),this.add("key.export.public",this.getKey),this.add("key.master.admin",this.masterkey),this.add("key.import.private",this.importPrivKey),this.add("key.import.public",this.importPubkey),this.add("key.import.address",this.importAddress),this.add("key.shared.add",this.addShared),this.add("key.shared.del",this.removeShared),this.add("account",this.routerOfAccount),this.add("account.list",this.listAccounts),this.add("account.get",this.accountGet),this.add("account.create",this.accountCreate),this.add("account.received",this.getReceivedByAccount),this.add("account.listreceived",this.listReceivedByAccount),this.add("balance.confirmed",this.getBalance),this.add("balance.all",this.getBalanceAll),this.add("balance.check",this.checkBalance),this.add("balance.unconfirmed",this.getUnconfirmedBalance),this.add("balance.log",this.getBalanceLog),this.add("comm.notify",this.commNotify),this.add("comm.hash",this.calcHash),this.add("comm.listNotify",this.listNotify),this.add("comm.secret",this.sendSecret),this.add("comm.listContact",this.listContact),this.add("comm.scanContact",this.scanContact),this.add("comm.comment",this.sendComment),this.add("comm.comment.query",this.commentQuery),this.add("sys.walletdb.stop",this.stop),this.add("sys.walletnode.shutdown",this.shutdown),this.add("sys.walletdb.create",this.createWalletDb),this.add("sys.walletdb.destroy",this.destroyWalletDb),this.add("sys.zap",this.zap),this.add("sys.setfee",this.setTXFee),this.add("sys.message.sign",this.signMessage),this.add("sys.rescan",this.rescan),this.add("sys.log",this.sysLog),this.add("address",this.routerOfAddress),this.add("address.list",this.getAddressesByAccount),this.add("address.index",this.getAddressesByIndex),this.add("address.receive",this.getAccountAddress),this.add("address.change",this.getAccountChangeAddress),this.add("address.nested",this.getAccountNestedAddress),this.add("address.calc",this.calcAddress),this.add("address.create",this.createAddress),this.add("address.create.admin",this.createAddressAdmin),this.add("address.receive.create",this.createAddress),this.add("address.change.create",this.createChange),this.add("address.nested.create",this.createNested),this.add("address.import",this.importAddress),this.add("address.key.admin",this.getPrivKey),this.add("address.wif.admin",this.getwif),this.add("address.has",this.hasAddress),this.add("address.amount",this.getReceivedByAddress),this.add("address.account",this.getAccount),this.add("address.received",this.getReceivedByAddress),this.add("address.received.list",this.listReceivedByAddress),this.add("cp",this.routerOfCp),this.add("cp.create",this.cpRegister),this.add("cp.create.async",this.cpRegisterAsync),this.add("cp.change",this.cpChange),this.add("cp.query",this.cpQuery),this.add("cp.query.remote",this.cpQueryRemote),this.add("cp.mine",this.cpMine),this.add("cp.user",this.getUserToken),this.add("sc",this.routerOfSc),this.add("sc.register",this.scRegister),this.add("sc.run",this.scRun),this.add("ca",this.routerOfCa),this.add("ca.issue",this.caIssue),this.add("ca.user.status",this.caUserStatus),this.add("ca.user.log",this.caUserLog),this.add("ca.abolish",this.caAbolish),this.add("ca.enchance",this.enchanceCp),this.add("ca.list.me",this.queryMyErlist),this.add("ca.list.remote",this.queryErList),this.add("ca.issue.async",this.caIssueAsync),this.add("ca.abolish.async",this.caAbolishAsync),this.add("ca.issue.public",this.caIssuePublic),this.add("ca.abolish.public",this.caAbolishPublic),this.add("prop",this.routerOfProp),this.add("prop.create",this.propCreate),this.add("prop.send",this.propExchange),this.add("prop.donate",this.propDonate),this.add("prop.receive",this.propReceive),this.add("prop.createlist",this.propCreateList),this.add("prop.sendlist",this.propSendList),this.add("prop.sendlist.admin",this.propSendListAdmin),this.add("prop.found",this.propFound),this.add("prop.sale",this.propSale),this.add("prop.buy",this.propBuy),this.add("prop.query",this.propQuery),this.add("prop.query.auction",this.mySaleList),this.add("prop.query.bid",this.onSaleList),this.add("prop.wallet.byid",this.propGet),this.add("prop.wallet.byoid",this.listPropByOid),this.add("prop.wallet.byaddress",this.listProp),this.add("contract",this.routerOfContract),this.add("contract.create",this.contractCreate),this.add("contract.promise",this.contractPromise),this.add("contract.execute",this.contractExecute),this.add("contract.mine",this.contractOfMine),this.add("htlc",this.routerOfHTLC),this.add("htlc.suggest",this.htlcSuggest),this.add("htlc.suggest.cancel",this.htlcSuggestCancel),this.add("htlc.suggest.deal",this.htlcSuggestDeal),this.add("htlc.assent",this.htlcAssent),this.add("htlc.assent.cancel",this.htlcAssentCancel),this.add("htlc.assent.deal",this.htlcAssentDeal),this.add("htlc.query",this.htlcQuery),this.add("vote.send",this.sendVote),this.add("vote.send.async",this.sendVoteAsync),this.add("oracle.send",this.sendOracle),this.add("tx.get.wallet",this.getTransaction),this.add("tx.list",this.listTransactions),this.add("tx.create",this.createTX),this.add("tx.send",this.sendTX),this.add("tx.send.async",this.sendTXAsync),this.add("tx.last",this.getLast),this.add("tx.pending",this.getPending),this.add("tx.pending.get",this.getPendingItem),this.add("tx.pending.hash",this.getPendingHash),this.add("tx.pending.count",this.getPendingCount),this.add("tx.resend.admin",this.resendWalletTransactions),this.add("tx.mstrans",this.listMSTrans),this.add("tx.mstrans.sign",this.signMSTrans),this.add("tx.history",this.getHistory),this.add("tx.history.since",this.listSinceBlock),this.add("tx.range",this.getRange),this.add("tx.abandon.admin",this.abandonTransaction),this.add("tx.abandonall.admin",this.abandonPending),this.add("tx.importprunedfunds.admin",this.importPrunedFunds),this.add("tx.removeprunedfunds.admin",this.removePrunedFunds),this.add("tx.resendall.admin",this.resend),this.add("tx.sign.admin",this.signTX),this.add("tx.fund.admin",this.fundRawTransaction),this.add("coin",this.routerOfCoin),this.add("coin.get",this.getCoin),this.add("coin.spender",this.getSpender),this.add("coin.spent",this.getSpent),this.add("coin.cache",this.getCoincacheSize),this.add("coin.check",this.checkUnspent),this.add("coin.list",this.listUnspent),this.add("coin.selectone",this.selectone),this.add("coin.conserved.get",this.getConservedCoins),this.add("coin.conserved.add",this.conserveCoin),this.add("coin.conserved.del",this.unConserveCoin),this.add("coin.conserved.list",this.listConservedUnspent),this.add("coin.conserved.oper.list",this.listOperUnspent),this.add("coin.locked.list",this.listLockedUnspent)}async routerOfCoin(t){throw new f(u.MISC_ERROR,"\n      coin.get                  查询硬币-UTXO\n      coin.remove.admin         移除指定硬币(管理员判断为状态异常者)\n      coin.spender              查询硬币的消费者\n      coin.list                 列表硬币-UTXO\n      coin.conserved.get        获取钱包保持的Coin的信息\n      coin.conserved.add        钱包增加需要保持的Coin\n      coin.conserved.del        钱包减少需要保持的Coin\n      coin.conserved.list       列表钱包保持的UTXO\n      coin.conserved.oper.list  批量锁定/解锁一组UTXO \n      coin.locked.list          列表目前交易层锁定的UTXO\n    ")}async routerOfContract(t){throw new f(u.MISC_ERROR,"\n      contract.create           发布交易对合约\n      contract.promise          签署交易对合约\n      contract.execute          执行交易对合约\n      contract.mine             获取已签署交易对合约列表\n      contract.list             查询并返回交易对\n    ")}async routerOfHTLC(t){throw new f(u.MISC_ERROR,"\n      htlc.suggest               发布跨链合约\n      htlc.suggest.deal          兑现合约\n      htlc.suggest.cancel        取消合约\n      htlc.assent                响应跨链合约\n      htlc.assent.deal           兑现响应\n      htlc.assent.cancel         取消响应\n      htlc.query                 查询合约\n    ")}async routerOfWallet(t){throw new f(u.MISC_ERROR,"\n      wallet.create             创建钱包\n      wallet.list               列表钱包\n      wallet.info               查询钱包概要\n      wallet.block              查询区块信息\n      wallet.exportmnemonic.admin     导出钱包助记词备份\n      wallet.importmnemonic.admin     导入钱包助记词备份\n      wallet.export             导出钱包备份\n      wallet.import             导入钱包备份\n      wallet.encrypt            将主私钥永久加密\n      wallet.decrypt            将主私钥永久解密\n      wallet.changepassphrase   在主私钥已经加密的情况下，修改其加密密码，要提交旧/新两个密码。如果尚未加密则执行失败\n      wallet.lock               在主私钥已加密的前提下，清理内存中的密钥信息以确保锁定，相当于手工执行自动锁定\n      wallet.unlock             在主私钥已加密的前提下，解密主私钥，持续一段时间后自动锁定\n      wallet.blocks             列表钱包相关区块\n    ")}async routerOfAddress(t){throw new f(u.MISC_ERROR,"\n      address.list              列表指定账户下地址\n      address.receive           列表指定账户下收款地址\n      address.change            列表指定账户下找零地址\n      address.nested            列表指定账户下嵌套地址\n      address.create            创建一个收款地址\n      address.create.admin      创建一个收款地址，回显私钥\n      address.receive.create    创建一个收款地址\n      address.change.create     创建一个找零地址\n      address.nested.create     创建一个嵌套地址\n      address.import            导入一个地址\n      address.key.admin         查询地址的密钥\n      address.amount            查询指定地址上的余额\n      address.account           查询指定地址对应的账户\n      address.wif.admin         查询地址对应的私钥\n      address.has               判断钱包是否包含地址\n      address.received          根据地址查询进项总额\n      address.received.list     根据地址查询进项\n      address.filter            在订单流水中，查询符合筛选条件的地址集\n    ")}async routerOfAccount(t){throw new f(u.MISC_ERROR,"\n      account.list              列表账户\n      account.get               查询账户\n      account.create            创建账户\n      account.received          查询收款总额\n      account.listreceived      列表收款记录\n      balance.confirmed         已确认余额\n      balance.all               余额\n      balance.unconfirmed       未确认余额\n      balance.log               查询指定账户变更日志\n    ")}async routerOfKey(t){throw new f(u.MISC_ERROR,"\n      key.export.private        根据输入地址，导出私钥\n      key.export.public         根据输入地址，打出公钥\n      key.master.admin          导出根密钥和助记词, 注意 encrypt 状态下无法导出私钥\n      key.import.private        导入私钥\n      key.import.public         导入公钥\n      key.import.address        导入地址\n      key.shared.add            新增共享公钥\n      key.shared.del            删除共享公钥\n    ")}async routerOfCp(t){throw new f(u.MISC_ERROR,"\n        cp.create           创建CP记录\n        cp.change           修改CP记录\n        cp.remoteQuery      查询全节点中的CP列表\n        cp.query            查询本地CP列表\n        cp.byClass          根据游戏类别查询CP记录\n        cp.byName           根据名称查询CP记录\n        cp.byId             根据ID查询CP记录\n        cp.mine             当前操作员注册的CP\n        cp.user             生成用户令牌(钱包)\n    ")}async routerOfSc(t){throw new f(u.MISC_ERROR,"\n        sc.model            查询托管合约模板列表\n        sc.register         指定托管合约模板，创建新的实例\n        sc.query            查询托管合约实例列表\n        sc.run              调用托管合约实例\n    ")}async routerOfCa(t){throw new f(u.MISC_ERROR,"\n        ca.issue            电子证书签发\n        ca.abolish          电子证书废止记录\n        ca.verify           电子证书验证\n        ca.user.status      根据企业证书编号和用户编号查询\n        ca.user.log         根据企业证书编号和用户编号查询日志\n        ca.enchance         CA机构间增信\n        ca.rank             查询CA信用等级\n        ca.list             查询电子证书列表\n        ca.list.ab          查询电子证书废止记录列表\n        ca.list.me          查询钱包内证书列表\n    ")}async routerOfProp(t){throw new f(u.MISC_ERROR,"\n      prop.create         创建道具\n      prop.send           转移道具\n      prop.donate         捐赠道具\n      prop.receive        接收捐赠道具\n      prop.createlist     批量创建道具\n      prop.sendlist       批量转移道具\n      prop.found          熔铸道具\n      prop.sale           拍卖道具\n      prop.buy            购买道具\n      prop.query          条件查询自己拥有的道具\n      prop.byaddress      根据地址查询道具\n      prop.byid           根据PID查询道具\n      prop.wallet.byaddress      根据地址查询自己拥有的道具\n      prop.wallet.byid           根据PID查询自己拥有的道具\n      prop.wallet.byoid          根据OID查询自己拥有的道具\n    ")}async allianceCreate(t,i,r){if(i||t.length<3)throw new f(u.MISC_ERROR,"sys.alliance.create password nodeid alliancename (host): 创建联盟节点证书 备份密码 节点编号 盟友名称 (节点地址)");t=(i=new y([t])).str(0);var s=i.uint(1,0),n=i.str(2,"").trim();i=i.str(3,"");if(!s||!t)throw new f(u.MISC_ERROR,"节点编号、备份密码都不能为空");if(n==this.wdb.$parent.config.allianceName)throw new f(u.MISC_ERROR,`子网名称不能和当前网络名称[${this.wdb.$parent.config.allianceName}]相同`);if(!this.wdb.$parent||!this.wdb.$parent.config.identityKey)throw new f(u.MISC_ERROR,"identityKey not set yet, please run sys.alliance.gettoken without params first");var[r,o]=await this.accessControl(r,""),a=await r.createAllianceInfo(n,s),h=g.hashInt(this.wdb.$parent.config.allianceName+"-"+this.wdb.$parent.config.allianceNodeId);this.wdb.$parent.pool.authdb.addKnown("0.0.0.0:"+h,_.publicKeyCreate(e.from(this.wdb.$parent.config.identityKey,"hex"),!0)),h={body:{language:a.mnemonic.language,phrase:a.mnemonic.getPhrase(),passphrase:a.mnemonic.passphrase,alliancePrivateKey:a.alliancePrivateKey.toString("hex"),allianceName:n,allianceNodeId:s,awardAddress:a.awardAddress,allianceNodeToken:{network:this.network.type,alliancename:n,sn:s,prv:a.prv.toString("hex"),pub:a.pub.toString("hex"),address:a.address},notifyAddress:r.notifyAddress,authorized:this.wdb.$parent.pool.authdb.getAuthorized()},password:t,network:this.network.type,file:this.network.type+`-${n}-${s}.keystore`};let c=H.encrypt(h);if(this.wdb.$parent){let r=!1;for(var l of this.wdb.$parent.config.alliances)if((l=l.split("|"))[0]==n&&l[1]==s){r=!0;break}r||(a=g.hashInt(n+"-"+s),this.wdb.$parent.pool.authdb.addKnown("0.0.0.0:"+a,e.from(h.body.allianceNodeToken.pub,"hex")),h.body.authorized=this.wdb.$parent.pool.authdb.getAuthorized(),c=H.encrypt(h),this.wdb.$parent.config.alliances.push(`${n}|${s}|${c}|${t}|${h.body.awardAddress}|`+i),await this.wdb.$parent.saveConfigAsync())}return a={host:i,key:h.body.allianceNodeToken.pub},t=p.signObj(a,r.notifyKey.privateKey),await r.commNotify({dst:r.notifyAddress,content:JSON.stringify({cmd:"peeradd",payload:a,sig:t,pub:r.notifyKey.publicKey.toString("hex")})}),d.unsupported||await d.writeFile(h.file,c,"utf8"),a=(await r.getAccount(o)).getReceive().toString(),await this.wdb.logAudit({address:a,oper:"node.create",hash:n+"."+s,index:0}),{nodeid:s,alliancename:n,host:i,peerPubkey:h.body.allianceNodeToken.pub,awardAddress:h.body.awardAddress,file:h.file,notifyAddress:r.notifyAddress}}async allianceImport(t,i,r){if(i||t.length<3)throw new f(u.MISC_ERROR,"sys.alliance.import password nodeid alliancename key (host): 导入联盟节点 备份密码 节点编号 盟友名称 节点公钥 (节点地址)");if(!this.wdb.$parent||!this.wdb.$parent.config.identityKey)throw new f(u.MISC_ERROR,"identityKey not set yet, please run sys.alliance.gettoken without params first");t=(i=new y([t])).str(0);var s=i.uint(1,0),n=i.str(2,""),o=i.str(3,"");i=i.str(4,"");if(!s||!t||!o)throw new f(u.MISC_ERROR,"节点编号、备份密码、节点公钥都不能为空");var[r,a]=await this.accessControl(r,""),h=await r.createAllianceInfo(n,s,o),c=g.hashInt(this.wdb.$parent.config.allianceName+"-"+this.wdb.$parent.config.allianceNodeId);this.wdb.$parent.pool.authdb.addKnown("0.0.0.0:"+c,_.publicKeyCreate(e.from(this.wdb.$parent.config.identityKey,"hex"),!0)),c={body:{alliancePrivateKey:h.alliancePrivateKey.toString("hex"),allianceName:n,allianceNodeId:s,allianceNodeToken:{network:this.network.type,alliancename:n,sn:s,pub:h.pub.toString("hex"),address:h.address},awardAddress:h.awardAddress,notifyAddress:r.notifyAddress},password:t,network:this.network.type,file:this.network.type+`-${n}-${s}.keystore`};let l;if(this.wdb.$parent){let r=!1;for(var m of this.wdb.$parent.config.alliances)if((m=m.split("|"))[0]==n&&m[1]==s){r=!0;break}r||(h=g.hashInt(n+"-"+s),this.wdb.$parent.pool.authdb.addKnown("0.0.0.0:"+h,e.from(o,"hex")),c.body.authorized=this.wdb.$parent.pool.authdb.getAuthorized(),l=H.encrypt(c),this.wdb.$parent.config.alliances.push(`${n}|${s}|${l}|${t}|${c.body.awardAddress}|`+i),await this.wdb.$parent.saveConfigAsync())}else l=H.encrypt(c);return d.unsupported||await d.writeFile(c.file,l,"utf8"),h={host:i,key:c.body.allianceNodeToken.pub},o=p.signObj(h,r.notifyKey.privateKey),await r.commNotify({dst:r.notifyAddress,content:JSON.stringify({cmd:"peeradd",payload:h,sig:o,pub:r.notifyKey.publicKey.toString("hex")})}),t=(await r.getAccount(a)).getReceive().toString(),await this.wdb.logAudit({address:t,oper:"node.create",hash:n+"."+s,index:0}),{nodeid:s,alliancename:n,host:i,peerPubkey:c.body.allianceNodeToken.pub,awardAddress:c.body.awardAddress,file:c.file,notifyAddress:r.notifyAddress}}async refreshAlliance(t,e,i){if(e)throw new f(u.MISC_ERROR,"sys.alliance.refresh amount: 为联盟成员批量充值 充值金额");var r=new y([t]).uint(0,0);if(r<1e4||5e9<r)throw new f(u.MISC_ERROR,"无效的充值金额(10000~5000000000)");var[s,n]=await this.accessControl(i);if(this.wdb.$parent)for(var o of this.wdb.$parent.config.alliances){o=o.split("|");var a=(x.fromString(o[4],this.network.type).isWitnessPubkeyhash()&&await s.send({outputs:[{address:o[4],value:r}]},n),H.decrypt({network:this.network.type,password:o[3],body:o[2]}));o=(this.wdb.$parent.rpc.addPeer&&await this.wdb.$parent.rpc.addPeer([o[5],a.allianceNodeToken.pub]),{host:o[5],key:a.allianceNodeToken.pub}),a=p.signObj(o,s.notifyKey.privateKey);await s.commNotify({dst:s.notifyAddress,content:JSON.stringify({cmd:"peeradd",payload:o,sig:a,pub:s.notifyKey.publicKey.toString("hex")})})}}async refreshAllianceAsync(t,e,i){if(e)throw new f(u.MISC_ERROR,"sys.alliance.refresh.async amount: 为联盟成员批量充值 充值金额");var r=new y([t]).uint(0,0);if(r<1e4||5e9<r)throw new f(u.MISC_ERROR,"无效的充值金额(10000~5000000000)");var[s,n]=await this.accessControl(i);if(this.wdb.$parent)for(var o of this.wdb.$parent.config.alliances){o=o.split("|");var a=(x.fromString(o[4],this.network.type).isWitnessPubkeyhash()&&s.send({outputs:[{address:o[4],value:r}]},n),H.decrypt({network:this.network.type,password:o[3],body:o[2]}));o=(this.wdb.$parent.rpc.addPeer&&await this.wdb.$parent.rpc.addPeer([o[5],a.allianceNodeToken.pub]),{host:o[5],key:a.allianceNodeToken.pub}),a=p.signObj(o,s.notifyKey.privateKey);s.commNotify({dst:s.notifyAddress,content:JSON.stringify({cmd:"peeradd",payload:o,sig:a,pub:s.notifyKey.publicKey.toString("hex")})})}}async allianceDelete(t,e,i){if(e||t.length<2)throw new f(u.MISC_ERROR,"sys.alliance.delete nodeid alliancename: 删除联盟节点证书 节点编号 盟友名称");var r=(e=new y([t])).uint(0,0),s=e.str(1,""),[t,e]=await this.accessControl(i,"");if(!r||!s)throw new f(u.MISC_ERROR,"节点编号、节点名称都不能为空");if(this.wdb.$parent)for(let t=0;t<this.wdb.$parent.config.alliances.length;t++){var n=this.wdb.$parent.config.alliances[t].split("|");n[0]==s&&n[1]==r&&(this.wdb.$parent.config.alliances.splice(t,1),await this.wdb.$parent.config.saveAsync(),n[5])&&await this.wdb.$parent.rpc.delPeer([n[5]])}return i=(await t.getAccount(e)).getReceive().toString(),await this.wdb.logAudit({address:i,oper:"node.delete",hash:s+"."+r,index:0}),!0}async getAllianceNodeToken(t,i,r){if(i)throw new f(u.MISC_ERROR,"sys.alliance.gettoken (nodeid alliancename pubkey): 创建联盟节点信道密钥 (节点编号 盟友名称)");t=(i=new y([t])).uint(0,0);var s=i.str(1);i=i.str(2);if(this.wdb.$parent)return[r]=await this.accessControl(r),r=await r.createAllianceInfo(s,t,i),s||(this.wdb.$parent.config.identityKey?(r.prv=e.from(this.wdb.$parent.config.identityKey,"hex"),r.pub=_.publicKeyCreate(r.prv,!0),r.address=x.fromWitnessPubkeyhash(S.hash160(r.pub),this.network.type).toString()):(this.wdb.$parent.pool.options.identityKey=r.prv,this.wdb.$parent.config.identityKey=r.prv.toString("hex"),await this.wdb.$parent.saveConfigAsync())),{network:this.network.type,alliancename:s,sn:t,prv:r.prv.toString("hex"),pub:r.pub.toString("hex"),address:r.address};throw new f(u.MISC_ERROR,"this cmd can only run on fullnode.")}async allianceUserCreate(t,e,i){if(e)throw new f(u.MISC_ERROR,"sys.alliance.user cid uid (alliancename): 创建企业用户 企业编号 用户编号 (盟友名称)");return this.$allianceUserCreate(t,i)}async $allianceUserCreate(t,i,r){var s=(t=new y([t])).str(0),n=t.uint(1);let o=null,a=null;return a=(t=t.str(2,""))?([i]=await this.accessControl(i),S.hash256(e.concat([e.from(t),i.master.key.privateKey]))):e.from(this.wdb.$parent.config.alliancePrivateKey,"hex"),t=R.fromPrivate(a,!0,this.network),(i=R.fromPrivate(S.hash256(e.concat([e.from(s+"-"+n),t.privateKey]),!0,this.network))).witness=!0,o=i.signData({cid:s,uid:n}),r&&(o.prvkey=i.privateKey.toString("hex")),o}async isReady(t){return this.wdb.isFull()}async shutdown(t,e){return this.wdb.$parent&&this.wdb.$parent.close().catch(t=>{r(()=>{throw t})}).finally(async()=>{await new Promise(t=>{setTimeout(t,1e4)}),s.exit(0)}),"Stopping."}async stop(t,e,i){if(e||0!==t.length)throw new f(u.MISC_ERROR,"sys.walletdb.stop");return this.wdb.close(),"Stopping walletdb..."}async destroyWalletDb(t,e,i){if(e||0!==t.length)throw new f(u.MISC_ERROR,"sys.walletdb.destroy: 删除钱包数据库");return await this.wdb.close(),await this.wdb.destroy(),"Destroyed."}async createWalletDb(t,e,i){if(e||0!==t.length)throw new f(u.MISC_ERROR,"sys.walletdb.create: 删除原有钱包数据库并重建");return await this.wdb.close(),await this.wdb.destroy(),await this.wdb.open(),"Created."}async fundRawTransaction(t,e,i){if(e||t.length<1||2<t.length)throw new f(u.MISC_ERROR,'tx.fund.admin "hexstring" ( options openid )');const r=new y([t]);var[e,t]=await this.accessControl(i,r.str(2,"")),s=(i=r.buf(0),r.obj(1));if(!i)throw new f(u.TYPE_ERROR,"Invalid hex string.");if(0===(i=A.fromRaw(i)).outputs.length)throw new f(u.INVALID_PARAMETER,"TX must have at least one output.");let n=null,o=null;if(s){const t=new y([s]);n=t.ufixed("feeRate",8),o=(o=t.str("changeAddress"))&&c.parseAddress(o,this.network)}return await e.fund(i,{rate:n,changeAddress:o,account:t}),{hex:i.toRaw().toString("hex"),changepos:i.changeIndex,fee:b.btc(i.getFee(),!0)}}async dumpPrivKey(t,e,i){if(e||t.length<1)throw new f(u.MISC_ERROR,"key.export.private address [account]");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(1,""));e=e.str(0,"");if(!await t.belongToAccount(i,e))throw new f(u.MISC_ERROR,"Invald Account.");if(i=c.parseHash(e,this.network),e=await t.getPrivateKey(i))return e.toSecret();throw new f(u.MISC_ERROR,"Key not found.")}async exportMnemonic(t,e,i){if(e||1!==t.length)throw new f(u.MISC_ERROR,"wallet.exportmnemonic.admin password: 备份钱包助记符 备份密码");e=new y([t]);var[t,i]=await this.accessControl(i);if(!(e=e.str(0)))throw new f(u.MISC_ERROR,"wallet.exportmnemonic.admin: Invalid password");if("primary"==t.id&&"default"!=i)throw new f(u.MISC_ERROR,"wallet.exportmnemonic.admin: Invalid Account");return i={body:{phrase:t.master.mnemonic.getPhrase(),language:t.master.mnemonic.language,passphrase:t.master.mnemonic.passphrase},password:e,network:this.network,file:`./${this.network.type}-wallet${t.db.options.spv?"-spv":""}.keystore`},this.wdb.$parent&&(i.body.awardAddress=this.wdb.$parent.config.coinbaseAddress),await H.writeEncryptFile(i),H.encrypt(i)}async importMnemonic(t,e,i){if(e||2!==t.length)throw new f(u.MISC_ERROR,"wallet.importmnemonic.admin encrypt password: 导入钱包助记符 备份文本 备份密码");var r;e=new y([t]);let s=H.decrypt({body:e.str(0),password:e.str(1),network:this.network});for(r of("string"==typeof s&&(s=JSON.parse(s)),this.wdb.$parent&&(s.awardAddress=this.wdb.$parent.config.coinbaseAddress),await this.wdb.getWallets()))if((await this.wdb.get(r)).master.mnemonic.getPhrase()===s.phrase)throw new f(u.MISC_ERROR,"wallet.importmnemonic.admin: 相同助记词已被使用");return(t=await this.wdb.ensure({id:U(),type:"pubkeyhash",m:1,n:1,mnemonic:s,passphrase:null,master:null,witness:!0,watchOnly:!1,accountKey:null}))?t.toJSON(!1):null}async dumpWallet(t,e,i){if(e||t.length<1)throw new f(u.MISC_ERROR,"wallet.export filename (fragment): 导出钱包备份 备份文件全路径 (分片存储 true/false)");e=new y([t]);var[t,,]=await this.accessControl(i);if(i=e.str(0))return e=e.bool(1,!1),await t.exportToFile({file:i,fragment:e}),!0;throw new f(u.TYPE_ERROR,"Invalid filename.")}async dumpWallets(t,e,i){if(e)throw new f(u.MISC_ERROR,"wallet.exports.admin: 导出所有钱包备份");for(var r of await this.wdb.getWallets())await(await this.wdb.get(r)).exportToFile({file:`backup-${r}.txt`});return!0}async encryptWallet(t,e,i){if(e||1!==t.length)throw new f(u.MISC_ERROR,'wallet.encrypt "passphrase"');e=new y([t]);var[t,i]=await this.accessControl(i);e=e.str(0,"");if("primary"==t.id&&"default"!=i)throw new f(u.MISC_ERROR,"Invalid Account");if(t.master.encrypted)throw new f(u.WALLET_WRONG_ENC_STATE,"Already running with an encrypted wallet.");if(e.length<1)throw new f(u.MISC_ERROR,'wallet.encrypt "passphrase"');try{await t.setPassphrase(null,e)}catch(t){throw new f(u.WALLET_ENCRYPTION_FAILED,"Encryption failed.")}return"wallet encrypted"}async getAccount(t,e,i){if(e||1!==t.length)throw new f(u.MISC_ERROR,'address.account "address"');e=new y([t]);var[t,i]=await this.accessControl(i);return("primary"!=t.id||"default"==i)&&(i=e.str(0,""),e=c.parseHash(i,this.network),i=await t.getPath(e))?i.name:""}async getAddressesByIndex(t,e,i){if(e||t.length<1)throw new f(u.MISC_ERROR,'address.index "index"');e=new y([t]);var[t,i]=await this.accessControl(i);if("primary"!=t.id||"default"==i){var r=e.uint(0);for(const e of await t.getPaths("default")){var s=e.toAddress();if(0==e.branch&&e.index==r)return s.toString(this.network)}}}async accessControl(t,e){let i=await this.wdb.get("primary");if(this.wdb.options.acl.isRoot(t.options.cid))"primary"!==t.options.wid?(i=await this.wdb.get(t.options.wid),e=null):"*"===(e=e||"default")&&(e=null);else if("primary"!==t.options.wid){if(!await i.belongToAccount(t.options.cid,t.options.wid))throw new f(u.TYPE_ERROR,"Invalid wid.");i=await this.wdb.get(t.options.wid),e=null}else e=t.options.cid;return await i.ensureAccount({name:e,witness:!0}),[i,e]}async getAddressesByAccount(t,e,i){if(e)throw new f(u.MISC_ERROR,'address.list "account"');e=new y([t]);var[t,i]=await this.accessControl(i,e.str(0,"")),r=[],s=[],n=[];for(const e of await t.getPaths(i)){var o=e.toAddress();(0==e.branch?r:1==e.branch?s:n).push(o.toString(this.network))}return[r,s,n]}async getAccountAddress(t,e,i){if(e)throw new f(u.MISC_ERROR,'address.receive "account"');e=new y([t]);var[t,i]=await this.accessControl(i,e.str(0,""));if(e=await t.getAccount(i))return e.receive.getAddress("string")}async getAccountChangeAddress(t,e,i){if(e)throw new f(u.MISC_ERROR,"address.change account");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(0,""));if(e=await t.getAccount(i))return e.change.getAddress("string")}async getAccountNestedAddress(t,e,i){if(e)throw new f(u.MISC_ERROR,'address.nested.list "account"');e=new y([t]);var[t,i]=await this.accessControl(i,e.str(0,""));if(e=await t.getAccount(i))return e.nested.getAddress("string")}async getBalance(t,e,i){if(e||3<t.length)throw new f(u.MISC_ERROR,'balance.confirmed ( "account" minconf includeWatchonly )');e=new y([t]);var[t,i]=await this.accessControl(i,e.str(0,"")),r=e.u32(1,1);e=e.bool(2,!1);if(t.watchOnly!==e)return 0;let s;return e=await t.getBalance(i),s=0<r?e.confirmed:e.unconfirmed,b.btc(s,!0)}async getBalanceLog(t,e,i){if(e||t.length<1)throw new f(u.MISC_ERROR,'balance.log "account" (height)');e=new y([t]);var[t,i]=await this.accessControl(i,e.str(0));e=e.uint(1,0);return t.queryBalanceLog(i,e)}async getBalanceAll(t,e,i){if(e||3<t.length)throw new f(u.MISC_ERROR,'balance.all ( "account" minconf includeWatchonly )');e=new y([t]);var[t,i]=await this.accessControl(i,e.str(0));return(await t.getBalance(i)).toJSON()}async checkBalance(t,e,i){if(e)throw new f(u.MISC_ERROR,"balance.check");e=new y([t]);var[t,,]=await this.accessControl(i,e.str(0));return(await t.resetBalance()).toJSON()}async getUserToken(t,e,i){if(e||t.length<2)throw new f(u.MISC_ERROR,"cp.user cid uid: 生成登录令牌 厂商编码 用户编码");t=(e=new y([t])).str(0),e=e.str(1);var[i]=await this.accessControl(i);return i.tokenCreate({cid:t,uid:e},e)}async masterkey(t,e,i){var[i,r]=await this.accessControl(i);if("primary"==i.id||"default"==r)return i.master.toJSON(!0)}async getHistory(t,e,i){if(e||1<t.length)throw new f(u.MISC_ERROR,"tx.history (page acct):查询交易历史记录 (页码 账号)");var r=(e=new y([t])).uint(0,1);if(r<1)throw new f(u.MISC_ERROR,"页面必须是大于0的数字");var[t,i]=await this.accessControl(i,e.str(1));e=await t.getHistory(i);o.sortTX(e);let s=0;var n,a=[];for(n of e){if(s<10*(r-1));else{if(s>=10*r)break;a.push(n)}s++}return i=await t.toDetails(a),(t={}).items=i,t.pageSize=10,t.pageNum=r,t.total=e.length,t}async sendSecret(t,e,i){if(e||t.length<3)throw new f(u.MISC_ERROR,"comm.secret dst message (openid): 安全通信消息 收信地址 信息内容 (玩家账号)");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(3,"")),r=e.str(0,"");e=e.str(1,"");if(c.parseAddress(r,this.network))return t.sendSecret(r,e,i);throw new f(u.TYPE_ERROR,"Invalid Destination Address.")}async calcHash(t,i,r){if(i||t.length<1)throw new f(u.MISC_ERROR,"comm.hash content: 计算输入的哈希值");return i=new y([t]).str(0,""),S.hash256(e.from(i)).toString("hex")}async commNotify(t,e,i){if(e||t.length<2)throw new f(u.MISC_ERROR,"comm.notify addr content (openid): 发送点对点消息 地址 内容 (玩家账号)");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(2,"")),r=e.str(0,"");e=e.obj(1,{});return t.commNotify({dst:r,content:e,account:i})}async scanContact(t,e,i){if(e||t.length<1||2<t.length)throw new f(u.MISC_ERROR,'comm.scanContact "txid" ( index )');e=new y([t]);var[t,,]=await this.accessControl(i);i=e.hash(0),n(i,"Hash is required."),e=e.uint(1,-1);if(!i)throw new f(u.TYPE_ERROR,"Invalid parameter");if(t=await t.getTX(i))return this.wdb.scanContact(t.tx,e);throw new f(u.WALLET_ERROR,"TX not found.")}async listContact(t,e,i){if(e)throw new f(u.MISC_ERROR,"sys.listContact: 列表联系人");return e=new y([t]).array(0,[]),this.wdb.listContact(e,null,["address"])}async listNotify(t,e,i){if(e)throw new f(u.MISC_ERROR,"comm.listNotify (query): 通知列表 (查询条件，使用 account 参数可分账号查询)");return e=new y([t]).array(0,[]),this.wdb.listNotify(e)}async getReceivedByAccount(t,e,i){if(e||t.length<1||2<t.length)throw new f(u.MISC_ERROR,'account.received "account" ( minconf )');e=new y([t]);var[t,i]=await this.accessControl(i,e.str(0,"")),r=e.u32(1,0),s=this.wdb.curHeight,n=(e=await t.getPaths(i),new Set);for(const t of e)n.add(t.hash);let o=0,a=-1;for(const e of await t.getHistory(i)){var h=e.getDepth(s);if(!(h<r)){(-1===a||h<a)&&(a=h);for(const t of e.tx.outputs){var c=t.getHash("hex");c&&n.has(c)&&(o+=t.value)}}}return b.btc(o,!0)}async getReceivedByAddress(t,e,i){if(e||t.length<1||2<t.length)throw new f(u.MISC_ERROR,'address.received "address" ( minconf )');e=new y([t]);var[t,,]=await this.accessControl(i),r=(i=e.str(0,""),e.u32(1,0)),s=this.wdb.curHeight,n=c.parseHash(i,this.network);let o=0;for(const e of await t.getHistory())if(!(e.getDepth(s)<r))for(const t of e.tx.outputs)t.getHash("hex")===n&&(o+=t.value);return b.btc(o,!0)}async _toWalletTX(t,e){var[t,,]=await this.accessControl(t),i=await t.toDetails(e);if(!i)throw new f(u.WALLET_ERROR,"TX not found.");let r=!0;for(const t of i.inputs)if(t.path){r=!1;break}var s=[];let n=0,o=0;for(let t=0;t<i.outputs.length;t++){var a=i.outputs[t];a.path?1!==a.path.branch&&(s.push({account:a.path.name,address:a.address.toString(this.network),category:"receive",amount:b.btc(a.value,!0),label:a.path.name,vout:t}),o+=a.value):r||(s.push({account:"",address:a.address?a.address.toString(this.network):null,category:"send",amount:-b.btc(a.value,!0),fee:-b.btc(i.getFee(),!0),vout:t}),n+=a.value)}return{amount:b.btc(r?o:-n,!0),confirmations:i.confirmations,blockhash:i.block?g.revHex(i.block):null,blockindex:i.index,blocktime:i.time,txid:g.revHex(i.hash),walletconflicts:[],time:i.mtime,timereceived:i.mtime,"bip125-replaceable":"no",details:s,hex:i.tx.toRaw().toString("hex")}}async getTransaction(t,e,i){if(e||t.length<1||2<t.length)throw new f(u.MISC_ERROR,'tx.get.wallet "txid" ( includeWatchonly )');e=new y([t]);var[t,,]=await this.accessControl(i),r=e.hash(0);n(r,"Hash is required."),e=e.bool(1,!1);if(!r)throw new f(u.TYPE_ERROR,"Invalid parameter");if(t=await t.getTX(r))return this._toWalletTX(i,t,e);throw new f(u.WALLET_ERROR,"TX not found.")}async abandonPending(t,e,i){if(e)throw new f(u.MISC_ERROR,"tx.abandonall.admin [account]: 废弃所有挂起的交易");e=new y([t]);var[r,t]=await this.accessControl(i,e.str(0,""));for(const e of await r.getPending(t))try{await r.abandon(e.hash)}catch(t){this.logger.warning(t.message)}return null}async abandonTransaction(t,e,i){if(e||1!==t.length)throw new f(u.MISC_ERROR,'tx.abandon.admin "txid"');e=new y([t]);var[t,,]=await this.accessControl(i);if(!(i=e.hash(0)))throw new f(u.TYPE_ERROR,"Invalid parameter.");if(await t.abandon(i))return null;throw new f(u.WALLET_ERROR,"Transaction not in wallet.")}async getUnconfirmedBalance(t,e,i){if(e||1<t.length)throw new f(u.MISC_ERROR,"balance.unconfirmed");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(0,""));e=await t.getBalance(i);return b.btc(e.unconfirmed,!0)}async importPrivKey(t,e,i){if(e||t.length<1||4<t.length)throw new f(u.MISC_ERROR,'key.import.private account "privatekey" passphrase [rescan]');e=new y([t]);var[t,i]=await this.accessControl(i,e.str(0,"")),r=e.str(1),s=e.str(2);e=e.bool(3,!1);return(r=c.parseSecret(r,this.network)).witness=!0,await t.importKey(i,r,s),e&&await this.wdb.rescan(0),!0}async walletAuth(t,e,i){return!0}async importWallet(t,e,i){if(e||t.length<1)throw new f(u.MISC_ERROR,'wallet.import "filename" ( rescan )');e=new y([t]);var[,]=await this.accessControl(i);t=e.str(0),i=e.bool(1,!1);return await this.wdb.loadBackup(t),i&&await this.wdb.rescan(0),!0}async importAddress(t,e,i){if(e||t.length<1||4<t.length)throw new f(u.MISC_ERROR,"address.import account address [rescan p2sh]");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(0,""));let r=e.str(1,"");var s=e.bool(2,!1);if(e.bool(3,!1)){let t=e.buf(0);if(!t)throw new f(u.TYPE_ERROR,"Invalid parameters.");t=v.fromRaw(t),t=v.createScript(t.hash160(),v.types.SCRIPTHASH),r=x.fromScript(t)}else r=c.parseAddress(r,this.network);return await t.importAddress(i,r),s&&await this.wdb.rescan(0),!0}async importPubkey(t,e,i){if(e||t.length<1||4<t.length)throw new f(u.MISC_ERROR,"key.import.public account pubkey [rescan]");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(0,"")),r=e.buf(1);e=e.bool(2,!1);if(r)return r=R.fromPublic(r,this.network),await t.importKey(i,r),e&&await this.wdb.rescan(0),!0;throw new f(u.TYPE_ERROR,"Invalid parameter.")}async listAccounts(t,e,i){if(e||2<t.length)throw new f(u.MISC_ERROR,"account.list ( minconf includeWatchonly)");e=new y([t]);var[r]=await this.accessControl(i),s=e.u32(0,0),n=e.bool(1,!1),o={};for(const t of await r.getAccounts()){var a=await r.getBalance(t);let e=a.unconfirmed;0<s&&(e=a.confirmed),r.watchOnly!==n&&(e=0),o[t]=b.btc(e,!0)}return o}async listConservedUnspent(t,e,i){if(e||0<t.length)throw new f(u.MISC_ERROR,"coin.conserved.list: 查询已经保持的Unspent列表");var[e]=await this.accessControl(i),r=[];for(const t of e.getConserved())r.push({txid:t.txid(),vout:t.index});return r}async listReceivedByAccount(t,e,i){if(e||3<t.length)throw new f(u.MISC_ERROR,"account.listreceived ( minconf includeempty includeWatchonly )");t=(e=new y([t])).u32(0,0);var r=e.bool(1,!1);e=e.bool(2,!1);return this._listReceived(i,t,r,e,!0)}async listReceivedByAddress(t,e,i){if(e||3<t.length)throw new f(u.MISC_ERROR,"address.received.list ( minconf includeempty includeWatchonly )");t=(e=new y([t])).u32(0,0);var r=e.bool(1,!1);e=e.bool(2,!1);return this._listReceived(i,t,r,e,!1)}async _listReceived(t,e,i,r,s){var[n]=await this.accessControl(t),o=(t=await n.getPaths(),this.wdb.curHeight);const a=new Map;for(const e of t){var h=e.toAddress();a.set(e.hash,{involvesWatchonly:n.watchOnly,address:h.toString(this.network),account:e.name,amount:0,confirmations:-1,label:""})}for(const t of await n.getHistory()){var c=t.getDepth(o);if(!(c<e))for(const e of t.tx.outputs){var u,l=e.getAddress();l&&(u=l.getHash("hex"),u=a.get(u))&&((-1===u.confirmations||c<u.confirmations)&&(u.confirmations=c),u.address=l.toString(this.network),u.amount+=e.value)}}let f=[];for(const t of a.values())f.push(t);if(s){const t=new Map;for(const e of f){var d=t.get(e.account);d?d.amount+=e.amount:(t.set(e.account,e),e.address=void 0)}f=[];for(const e of t.values())f.push(e)}var p=[];for(const e of f)if(i||0!==e.amount){-1===e.confirmations&&(e.confirmations=0);try{e.amount=b.btc(e.amount,!0),p.push(e)}catch(t){this.logger.error("invalid amount:entry(%s) msg(%s)",JSON.stringify(e),t.message)}}return p}async listSinceBlock(t,e,i){if(e)throw new f(u.MISC_ERROR,'tx.history.since ( "blockhash" target-confirmations includeWatchonly account)');var r=this.wdb.curHeight,[t,s]=(e=new y([t]),await this.accessControl(i,e.str(3,""))),n=e.hash(0),o=e.u32(1,0);e=e.bool(2,!1);if(t.watchOnly!==e)return[];let a=-1;-1===(a=n&&(e=await this.client.getEntry(n))?e.height:a)&&(a=r);var h,c=[];let l;for(const e of await t.getHistory(s))e.height<a||e.getDepth(r)<o||((!l||e.height>l)&&(l=e),h=await this._toListTX(i,e),c.push(h));return{transactions:c,lastblock:l&&l.block?g.revHex(l.block):w.NULL_HASH}}async _toListTX(t,e){var[t]=await this.accessControl(t),i=await t.toDetails(e);if(!i)throw new f(u.WALLET_ERROR,"TX not found.");let r=!0;for(const t of i.inputs)if(t.path){r=!1;break}let s,o,a,h,c,l,d=0,p=0;for(let t=0;t<i.outputs.length;t++){const e=i.outputs[t];e.path?1!==e.path.branch&&(p+=e.value,o=e,h=t):(d+=e.value,s=e,a=t)}return l=r?(c=o,h):(c=s,a),c||(n(!r),r=!0,c=o,l=h),{account:c.path?c.path.name:"",address:c.address?c.address.toString(this.network):null,category:r?"receive":"send",amount:b.btc(r?p:-d,!0),label:c.path?c.path.name:void 0,vout:l,confirmations:i.getDepth(),blockhash:i.block?g.revHex(i.block):null,blockindex:i.index,blocktime:i.time,txid:g.revHex(i.hash),walletconflicts:[],time:i.mtime,timereceived:i.mtime,"bip125-replaceable":"no"}}async listTransactions(t,e,i){if(e||4<t.length)throw new f(u.MISC_ERROR,'tx.list ( "account" count from includeWatchonly)');e=new y([t]);var[t,r]=await this.accessControl(i,e.str(0,"")),s=e.u32(1,10),n=e.u32(2,0);e=e.bool(3,!1);if(t.watchOnly!==e)return[];var a=await t.getHistory(r),h=(e=(o.sortTX(a),n+s),Math.min(e,a.length)),c=[];for(let t=n;t<h;t++){var l=a[t];l=await this._toListTX(i,l);c.push(l)}return c}async selectone(t,e,i){if(e||t.length<1)throw new f(u.MISC_ERROR,"coin.selectone options (account)");e=new y([t]);var[r,t]=await this.accessControl(i,e.str(1,"")),s=e.obj(0,{}),n=[];for(const e of await r.getCoins(t)){var o=e.getDepth(this.wdb.curHeight),a=e.getAddress();if(a){var h=e.getHash("hex");if(h&&!e.isColored&&!(s.value&&e.value<s.value||e.coinbase&&0<e.height&&this.wdb.curHeight<e.height+k.COINBASE_MATURITY)&&(h=await r.getKey(h),n.push({txid:e.txid(),vout:e.index,address:a?a.toString(this.network):null,account:h?h.name:void 0,redeemScript:h&&h.script?h.script.toJSON():void 0,scriptPubKey:e.script.toJSON(),amount:b.btc(e.value,!0),confirmations:o,spendable:!r.isConserved(e),solvable:!0}),s.len&&n.length>=s.len))break}}return n}async listUnspent(t,e,i){if(e||4<t.length)throw new f(u.MISC_ERROR,'coin.list ( minconf maxconf  ["address", account] )');const r=new y([t]);var[s,e]=await this.accessControl(i,r.str(3,"")),n=r.u32(0,1),a=r.u32(1,9999999),h=r.array(2),l=this.wdb.curHeight,d=new Set;if(h&&0<h.length){const t=new y([h]);for(let e=0;e<h.length;e++){var p=t.str(e,"");p=c.parseHash(p,this.network);if(d.has(p))throw new f(u.INVALID_PARAMETER,"Duplicate address.");d.add(p)}}t=await s.getCoins(e);var g,m,w,v=(o.sortCoins(t),[]);for(const e of t)e.isColored||(g=e.getDepth(l))<n||a<g||((m=e.getAddress())?(w=e.getHash("hex"),h&&0<h.length&&(!w||!d.has(w))||(w=await s.getKey(w),v.push({txid:e.txid(),vout:e.index,address:m?m.toString(this.network):null,account:w?w.name:void 0,redeemScript:w&&w.script?w.script.toJSON():void 0,scriptPubKey:e.script.toJSON(),amount:b.btc(e.value,!0),confirmations:g,spendable:!s.isConserved(e),solvable:!0}))):this.logger.error("mistaken coin: miss address",e.hash,e.index));return v}async checkUnspent(t,e,i){if(e)throw new f(u.MISC_ERROR,"coin.check (account)");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(0,"")),r=[];if(this.wdb.$parent)for(const e of await t.getCoins(i))await this.wdb.$parent.getCoin(e.hash,e.index)||r.push(e.txid(),e.index);return r}async listProp(t,e,i){if(e||4<t.length)throw new f(u.MISC_ERROR,"prop.wallet.byaddress ( minconf maxconf  [address, account] )");const r=new y([t]);var[s,e]=await this.accessControl(i,r.str(3,"")),n=r.u32(0,1),a=r.u32(1,9999999),h=r.array(2),l=this.wdb.curHeight,d=new Set;if(h){const t=new y([h]);for(let e=0;e<h.length;e++){var p=t.str(e,"");p=c.parseHash(p,this.network);if(d.has(p))throw new f(u.INVALID_PARAMETER,"Duplicate address.");d.add(p)}}t=await s.getCoins(e);var g=(o.sortCoins(t),[]);for(const e of t){var m,w,v,k=e.getDepth(l);k<n||a<k||(m=e.getAddress())&&(w=e.getHash("hex"),!h||w&&d.has(w))&&(w=await s.getKey(w),v=e.getReturnData([D.OP_PROPCREATE,D.OP_PROPCREATE]))&&g.push({txid:e.txid(),vout:e.index,address:m?m.toString(this.network):null,account:w?w.name:void 0,amount:b.btc(e.value,!0),confirmations:k,spendable:!s.isConserved(e),solvable:!0,nd:v})}return g}async listPropByOid(t,e,i){if(e||t.length<1)throw new f(u.MISC_ERROR,"prop.wallet.byoid oid");e=new y([t]);var[r,t]=await this.accessControl(i,e.str(1,"")),s=e.str(0),n=this.wdb.curHeight,a=(i=await r.getCoins(t),o.sortCoins(i),[]);for(const t of i){var h,c,l,d=t.getDepth(n);d<0||9999999<d||(h=t.getAddress())&&(c=t.getHash("hex"),c=await r.getKey(c),l=t.getReturnData([D.OP_PROPCREATE,D.OP_PROPEXCHANGE]))&&l.oid==s&&a.push({txid:t.txid(),vout:t.index,address:h?h.toString(this.network):null,account:c?c.name:void 0,amount:b.btc(t.value,!0),confirmations:d,spendable:!r.isConserved(t),solvable:!0,nd:l})}return{list:a,count:a.length}}async listLockedUnspent(t,e,i){if(e||2<t.length)throw new f(u.MISC_ERROR,'coin.list.locked ["address", account]');const r=new y([t]);var[s,e]=await this.accessControl(i,r.str(1,"")),n=r.array(0),a=this.wdb.curHeight,h=g.now(),l=new Set;if(n){const t=new y([n]);for(let e=0;e<n.length;e++){var d=t.str(e,"");d=c.parseHash(d,this.network);if(l.has(d))throw new f(u.INVALID_PARAMETER,"Duplicate address.");l.add(d)}}let p;p=account?await s.getCoins(e):s.getLockedCoins(),o.sortCoins(p);var m,w,v,k,S,_,x=[];for(const t of p)(t.lockedByLocktime(a,h)||t.lockedBySequence(a,h))&&(m=t.getAddress())&&(w=t.getDepth(a),_=t.getHash("hex"),!n||_&&l.has(_))&&([v,k,S]=t.getLockStatus(),_=await s.getKey(_),x.push({txid:t.txid(),vout:t.index,address:m?m.toString(this.network):null,account:_?_.name:void 0,redeemScript:_&&_.script?_.script.toJSON():void 0,scriptPubKey:t.script.toJSON(),amount:b.btc(t.value,!0),confirmations:w,spendable:!1,solvable:!0,locktype:v,lockheight:k,locktime:S}));return x}async listOperUnspent(t,e,i){if(e||t.length<1||2<t.length)throw new f(u.MISC_ERROR,'coin.conserved.oper.list unlock ([{"txid":"txid","vout":n},...]) 保持/解除保持一组UTXO: true/false [{"txid": "交易id","vout": "输出序号"}]');const r=new y([t]);var[s]=await this.accessControl(i),n=r.bool(0,!1);if(!(e=r.array(1)))throw new f(u.TYPE_ERROR,"Invalid parameter.");for(const t of e){const e=new y([t]);var o=e.hash("txid"),a=e.u32("vout");if(null==o||null==a)throw new f(u.INVALID_PARAMETER,"Invalid parameter.");o=new M(o,a),n?s.unConserveCoin(o):s.conserveCoin(o)}return!0}async setTXFee(t,e,i){if(e||t.length<1||1<t.length)throw new f(u.MISC_ERROR,"sys.setfee rate");if(null==(e=new y([t]).ufixed(0,8)))throw new f(u.TYPE_ERROR,"Invalid parameter.");return this.wdb.feeRate=e,!0}async signMessage(t,i,r){if(i||2!==t.length)throw new f(u.MISC_ERROR,'sys.message.sign "address" "message"');i=new y([t]);var[t]=await this.accessControl(r);if(!t.master.key)throw new f(u.WALLET_UNLOCK_NEEDED,"Wallet is locked.");r=i.str(0,""),r=c.parseHash(r,this.network);if(t=await t.getKey(r))return r=i.str(1,""),t.sign(S.hash256(e.from(l+r,"utf8"))).toString("base64");throw new f(u.WALLET_ERROR,"Address not found.")}async changePassphrase(t,e,i){if(e||t.length<2)throw new f(u.MISC_ERROR,'wallet.changepassphrase "oldpassphrase" "newpassphrase"');e=new y([t]);var[t]=await this.accessControl(i);i=e.str(0,""),e=e.str(1,"");if(!t.master.encrypted)throw new f(u.WALLET_WRONG_ENC_STATE,"Wallet is not encrypted.");if(i.length<1||e.length<1)throw new f(u.INVALID_PARAMETER,"Invalid parameter");return await t.setPassphrase(i,e),null}async unlock(t,e,i){var r=new y([t]),[i]=await this.accessControl(i),s=r.str(0);r=r.u32(1,60);if(e||i.master.encrypted&&0==t.length)throw new f(u.MISC_ERROR,'wallet.unlock "passphrase" timeout');if(!i.master.encrypted)throw new f(u.WALLET_WRONG_ENC_STATE,"Wallet is not encrypted.");if(s.length<1)throw new f(u.INVALID_PARAMETER,"Invalid parameter");if(null==r)throw new f(u.TYPE_ERROR,"Invalid parameter");return await i.unlock(s,r),null}async decryptWallet(t,e,i){if(e||1!==t.length)throw new f(u.MISC_ERROR,'wallet.decrypt "passphrase"');e=new y([t]);var[t]=await this.accessControl(i);i=e.str(0,"");if(!t.master.encrypted)throw new f(u.WALLET_WRONG_ENC_STATE,"Running with an decrypted wallet.");if(i.length<1)throw new f(u.MISC_ERROR,'wallet.decrypt "passphrase"');try{await t.setPassphrase(i)}catch(t){throw new f(u.WALLET_ENCRYPTION_FAILED,"Decryption failed.")}return"wallet decrypted"}async importPrunedFunds(t,e,i){if(e||t.length<2||3<t.length)throw new f(u.MISC_ERROR,'tx.importprunedfunds.admin "rawtransaction" "txoutproof" ( "label" )');if(t=(e=new y([t])).buf(0),e=e.buf(1),!t||!e)throw new f(u.TYPE_ERROR,"Invalid parameter.");t=O.fromRaw(t);var r=(e=E.fromRaw(e)).hash("hex");if(!e.verify())throw new f(u.VERIFY_ERROR,"Invalid proof.");if(!e.hasTX(t.hash("hex")))throw new f(u.VERIFY_ERROR,"Invalid proof.");var s=await this.client.getEntry(r);if(-1===s)throw new f(u.VERIFY_ERROR,"Invalid proof.");if(r={hash:r,time:e.time,mtp:e.mtp,height:s},await this.wdb.addTX(t,r))return null;throw new f(u.WALLET_ERROR,"No tracked address for TX.")}async removePrunedFunds(t,e,i){if(e||1!==t.length)throw new f(u.MISC_ERROR,'tx.removeprunedfunds.admin "txid"');e=new y([t]);var[t]=await this.accessControl(i);if(!(i=e.hash(0)))throw new f(u.TYPE_ERROR,"Invalid parameter.");if(await t.remove(i))return null;throw new f(u.WALLET_ERROR,"Transaction not in wallet.")}async getWallets(t,e,i){return this.wdb.getWallets()}async getWalletBlock(t,e,i){if(e||t.length<1)throw new f(u.MISC_ERROR,"wallet.block height");e=new y([t]);var[t]=await this.accessControl(i);i=e.uint(0);return(e=await t.getBlock(i))?e.toJSON():null}async getWalletLayoutH(t,e,i){if(e||t.length<1)throw new f(u.MISC_ERROR,"wallet.layouth height");return e=new y([t]).uint(0),(t=await this.wdb.getBlock(e))?t.toJSON():null}async getWalletInfo(t,e,i){if(e)throw new f(u.MISC_ERROR,"wallet.info");return((e=new y([t]).str(0,""))?await this.wdb.get(e):(await this.accessControl(i))[0]).toJSON(!1)}async scRegister(t,e,i){if(e||t.length<1)throw new f(u.MISC_ERROR,"sc.register options (account): 发布合约 合约参数列表 (子账户)");e=new y([t]);var[r,s]=await this.accessControl(i,e.str(1,""));let n=e.obj(0);if(!n)throw new f(u.MISC_ERROR,"sc.register: options is null");let o=1e5;switch(n.oper){case"change":if(n.oper=T.scState,!n.dst||!n.state)throw new f(u.TYPE_ERROR,"sc.register: dst or state is null.");if(!this.wdb.$parent)throw new f(u.TYPE_ERROR,"sc.register: not support this operation.");var a=await this.wdb.$parent.chain.db.getSCList([["options.dst",n.dst]]);if(!a||0==a.list.length)throw new f(u.TYPE_ERROR,"sc.register: contract not exist.");switch(a.list[0].options.state){case P.Normal:if(n.state!=P.Frozen&&n.state!=P.Destroy)throw new f(u.TYPE_ERROR,"Contract State Error");break;case P.Frozen:if(n.state!=P.Normal&&n.state!=P.Destroy)throw new f(u.TYPE_ERROR,"Contract State Error");break;default:throw new f(u.TYPE_ERROR,"Contract State Error")}if(n.addr=a.list[0].options.addr,await r.belongToAccount(s,n.addr))break;throw new f(u.MISC_ERROR,"sc.register: Invald Account.");case"update":if(n.oper=T.scUpdate,!n.dst)throw new f(u.TYPE_ERROR,"sc.register: dst is null.");if(!this.wdb.$parent)throw new f(u.TYPE_ERROR,"sc.register: not support this operation.");if(!(a=await this.wdb.$parent.chain.db.getSCList([["options.dst",n.dst]]))||0==a.list.length)throw new f(u.TYPE_ERROR,"sc.register: contract not exist.");if(a.list[0].options.state!=P.Normal)throw new f(u.TYPE_ERROR,"sc.register: contract state error.");if(n.addr=a.list[0].options.addr,await r.belongToAccount(s,n.addr))break;throw new f(u.MISC_ERROR,"sc.register: Invald Account.");default:if(o=1e8,n.oper=T.scRegister,n.addr=(await r.createReceive(s)).getAddress("string"),n.dst=r.getSCAddress(g.hashInt(n.addr)).toString(),this.wdb.$parent&&(a=await this.wdb.$parent.chain.db.getSCList([["options.dst",n.dst]]))&&0<a.list.length)throw new f(u.TYPE_ERROR,"sc.register: contract address conflict.")}return(t=(await r.getPrivateKey(n.addr)).signData(n)).data.sig=t.sig,n=t.data,i=await r.send({subtractFee:!1,sort:!1,outputs:[{address:n.dst,value:o}],comment:JSON.stringify(n)},s),await this.wdb.logAudit({address:n.addr,oper:n.oper,hash:i.hash("hex"),index:0}),n.txid=i.rhash(),n}async scRun(t,e,i){if(e||t.length<1)throw new f(u.MISC_ERROR,'sc.run str options (account): 调用合约 逗分参数字符串("合约收款地址,转账金额") 参数对象 (子账户)');e=new y([t]);var[t,i]=await this.accessControl(i,e.str(2,"")),r=e.str(0).split(","),s=(e=e.obj(1,{}),r.shift());if(!this.wdb.$parent)throw new f(u.TYPE_ERROR,"sc.run: not support this operation.");var n=await this.wdb.$parent.chain.db.getSCList([["options.dst",s]]);if(!n||0==n.list.length)throw new f(u.TYPE_ERROR,"sc.run: contract not exist.");if(1!=n.list[0].options.state)throw new f(u.TYPE_ERROR,`sc.run: contract execute disabled(state ${n.list[0].options.state}).`);if(e.ver&&e.ver!=n.list[0].options.ver)throw new f(u.TYPE_ERROR,"sc.run: contract version inconsistency.");return n=(0|parseInt(r.shift()))>>>0,c.parseAddress(s,this.network),r=await t.send({subtractFee:!1,sort:!1,outputs:[{address:s,value:n}],comment:JSON.stringify({oper:"scrun",params:e})},i),s=await t.getAccount(i),await this.wdb.logAudit({address:s.receive.getAddress("string"),oper:T.scRun,hash:r.hash("hex"),index:0}),(await t.getDetails(r.hash("hex"))).toJSON()}async cpRegister(t,e,i){if(e||t.length<2)throw new f(u.MISC_ERROR,'cp.create name "ip,addr,class,rate" (openid): 注册厂商 名称(不少于4个字符) "IP地址,注册地址,类别,媒体分成比例" (子账号)');return this.$cpRegister(t,i,!1)}async cpRegisterAsync(t,e,i){if(e||t.length<2)throw new f(u.MISC_ERROR,'cp.create.async name "ip,addr,class,rate" (openid): 注册厂商 名称(不少于4个字符) "IP地址,注册地址,类别,媒体分成比例" (子账号)');return this.$cpRegister(t,i,!0)}async $cpRegister(t,e,i){t=new y([t]);var r=decodeURIComponent(t.str(0)),s=(a=t.str(1,"").split(","))[0],n=a[1],o=a[2],a=a[3]?parseInt(a[3]):15,[e,t]=await this.accessControl(e,t.str(2,"")),h=m.verifyDataFormat({name:r,ip:s,grate:a,cls:o});if(h)throw new f(u.MISC_ERROR,h);return h={cid:U(),oper:T.cpRegister,name:r,ip:s,grate:a,cls:o},await e.cpRegister(g.isBech32(n)?n:null,h,t,i),h}async cpChange(t,e,i){if(e||t.length<2)throw new f(u.MISC_ERROR,'cp.change cid "newname,ip,addr,class,rate" "openid": 修改厂商信息 CP编号 "新的名称,IP,新的注册地址,类别,分成比例" 授权账号');e=new y([t]);var[t,i]=await this.accessControl(i,e.str(2,"")),r=e.str(0),s=(e=decodeURIComponent(e.str(1,"")).split(","))[0],o=e[1];let a=e[2];var h=e[3];e=parseInt(e[4])||null;if(c=m.verifyDataFormat({name:s,ip:o,grate:e,cls:h}))throw new f(u.MISC_ERROR,c);a&&(a=x.fromString(a),n(a instanceof x,"Not an address."));var c={cid:r,newName:s,ip:o,addr:a,grate:e,cls:h},[,,]=await t.cpChange(c,i);return c.addr=c.addr.toString(),c}async cpQuery(t,e,i){if(e)throw new f(u.MISC_ERROR,"cp.query (conditions account): 查询钱包中的厂商列表 (复合条件 子帐号)");e=new y([t]);var r,[s,n]=await this.accessControl(i,e.str(1,""));t=e.array(0,[]),i=s.db.cpList.query(t);for(r of i.list)r.owned=await s.belongToAccount(n,r.current.address);return i}async cpQueryRemote(t,e,i){if(e)throw new f(u.MISC_ERROR,"cp.query.remote conditions: 查询厂商列表 (复合条件)");e=new y([t]);var r,[s,n]=await this.accessControl(i,e.str(1,""));t=e.array(0,[]),i=await s.db.client.execute("cp.remoteQuery",[t]);for(r of i.list)r.owned=await s.belongToAccount(n,r.current.address);return i}async cpMine(t,e,i){if(e)throw new f(u.MISC_ERROR,"cp.mine (conditions account): 查询钱包中归属当前操作员/指定账户的厂商列表 (复合条件 子帐号)");e=new y([t]);let[r,s]=await this.accessControl(i,e.str(1,""));return(t=e.array(0,[])).push(["size",-1]),(await r.db.cpList.predict(async(t,e)=>r.belongToAccount(s,e.current.address))).query(t)}async htlcSuggest(t,e,i){if(e||t.length<1||2<t.length)throw new f(u.MISC_ERROR,"htlc.suggest params [account]: 发起HTLC 参数对象({alice, bob, amount, rate}) [子账户]");t=(e=new y([t])).obj(0,{});var r,[i,e]=await this.accessControl(i,e.str(1,""));if(!t.ab)throw new f(u.MISC_ERROR,"htlc.suggest: params.ab(alice bchain address) is null");if(!Number.isInteger(t.amount))throw new f(u.MISC_ERROR,"htlc.suggest: illegal params.amount");if(t.amount=parseInt(t.amount),t.amount<0||t.amount>1e4*k.COIN)throw new f(u.MISC_ERROR,"htlc.suggest: illegal params.amount");if(t.rate=parseFloat(t.rate),t.rate<0||t.amount*t.rate>k.MAX_MONEY)throw new f(u.MISC_ERROR,"htlc.suggest: illegal params.rate");if(t.target)return r=(await i.createReceive(e)).getAddress().toString(this.network),t={amount:t.amount,rate:t.rate,dst:t.target,aa:x.fromString(r).hash,ab:x.fromString(t.ab).hash,ba:x.fromString(t.ba).hash},[i]=await i.sendContracts([t],e,I),i?{txid:i.rhash(),aa:r}:null;throw new f(u.MISC_ERROR,"htlc.suggest: params.target is null")}async htlcAssent(t,i,r){if(i||t.length<1||2<t.length)throw new f(u.MISC_ERROR,"htlc.assent params({txid}) [account]: 响应HTLC 参数对象 [子账户]");i=new y([t]);var[t,r]=await this.accessControl(r,i.str(1,""));i=i.obj(0,{});if(!Number.isInteger(i.amount))throw new f(u.MISC_ERROR,"htlc.assent: illegal params.amount");if(i.amount=parseInt(i.amount),i.amount<0||i.amount>1e4*k.COIN)throw new f(u.MISC_ERROR,"htlc.assent: illegal params.amount");if(i.rate=parseFloat(i.rate),i.rate<0||i.amount*i.rate>k.MAX_MONEY)throw new f(u.MISC_ERROR,"htlc.assent: illegal params.rate");var s=(await t.createReceive(r)).getAddress().toString(this.network),[i]=(s={src:i.src,dst:i.dst,hash:i.hash,index:i.index,ab:e.from(i.ab,"hex"),ba:e.from(i.ba,"hex"),bb:x.fromString(s).hash,amount:i.amount*i.rate},await t.sendContracts([s],r,C));return i?{txid:i.rhash()}:null}async htlcSuggestDeal(t,e,i){if(e||t.length<1||2<t.length)throw new f(u.MISC_ERROR,"htlc.suggest.deal params({txid,index,sa}) [account]: 兑付HTLC 参数对象 [子账户]");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(1,"")),[t,,]=(e=e.obj(0),e={suggest:!0,hash:g.revHex(e.txid),index:e.index,sa:e.sa},await t.htlcDeal(e,i));return t?{txid:t.rhash()}:null}async htlcQuery(t,e,i){if(e)throw new f(u.MISC_ERROR,"htlc.query query: 条件查询HTLC合约 条件数组");return(e=new y([t]).array(0,[])).push(["pst","!=",N.Cancel]),this.wdb.htlcList.query(e)}async htlcAssentDeal(t,e,i){if(e||t.length<1||2<t.length)throw new f(u.MISC_ERROR,"htlc.assent.deal params({txid,index,sa}) [account]: 兑付HTLC 参数对象 [子账户]");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(1,"")),[t,,]=(e=e.obj(0),e={hash:g.revHex(e.txid),index:e.index,sa:e.sa},await t.htlcDeal(e,i));return t?{txid:t.rhash()}:null}async htlcAssentCancel(t,e,i){if(e||t.length<1||2<t.length)throw new f(u.MISC_ERROR,"htlc.assent.cancel params({txid, index, master}) [account]: 取消HTLC应答 参数对象 [子账户]");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(1,"")),[t,,]=(e=e.obj(0),e={hash:g.revHex(e.txid),index:e.index,master:e.bb},await t.htlcCancel(e,i));return t?{txid:t.rhash()}:null}async htlcSuggestCancel(t,e,i){if(e||t.length<1||2<t.length)throw new f(u.MISC_ERROR,"htlc.suggest.cancel params({txid, index, sa, master}) [account]: 取消HTLC请求 参数对象 [子账户]");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(1,"")),[t,,]=(e=e.obj(0),e={suggest:!0,hash:g.revHex(e.txid),index:e.index,sa:e.sa,master:e.aa},await t.htlcCancel(e,i));return t?{txid:t.rhash()}:null}async sendComment(t,e,i){if(e||t.length<1||2<t.length)throw new f(u.MISC_ERROR,"comm.comment params [account]: 发起附言交易 参数对象({body, bob}) [子账户]");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(1,""));e=e.obj(0,{});if(!Number.isInteger(e.amount))throw new f(u.MISC_ERROR,"comm.comment: illegal params.amount");if(e.amount=parseInt(e.amount),e.amount<0||e.amount>1e4*k.COIN)throw new f(u.MISC_ERROR,"comm.comment: illegal params.amount");var r={bob:e.bob,body:e.body,amount:e.amount};e.alice||(e.alice=t.getAddress(),i&&(s=await t.createReceive(i),e.alice=s.getAddress()));var s=(await t.getPrivateKey(e.alice)).signData(r),[e]=(s.data.sig=s.sig,await t.sendContracts([s.data],i,L));return e?{txid:e.rhash()}:null}async commentQuery(t,e,i){if(e)throw new f(u.MISC_ERROR,"comm.comment.query query: 条件查询附言输出 条件数组");return e=new y([t]).array(0,[]),this.wdb.commentList.query(e)}async contractExecute(t,e,i){if(e||t.length<1||2<t.length)throw new f(u.MISC_ERROR,"contract.execute tid master: 执行交易对合约 交易编号 执行方(1-发起人,2-承兑人)");e=new y([t]);var[t]=await this.accessControl(i),[t,,]=(i=e.str(0),e=e.u32(1,2),await t.contractExecute(i,e));return t.toJSON()}async contractPromise(t,e,i){if(e||t.length<1||2<t.length)throw new f(u.MISC_ERROR,"contract.promise tid [openid]: 签署交易对合约 交易编号(type.address) [子账号]");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(1,"")),[t,,]=(e=e.str(0),await t.contractPromise(e,i));return t.toJSON()}async contractOfMine(t,e,i){if(e||t.length<1||3<t.length)throw new f(u.MISC_ERROR,"contract.mine type page [openid]: 获取已签署交易对合约列表 交易对类型 页码 [子账号]");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(2,"")),r=e.uint(0,1);e=e.uint(1,1);return t.db.getContracts(r,e,i)}async contractCreate(t,e,i){if(e||t.length<4||5<t.length)throw new f(u.MISC_ERROR,"contract.create type src dst addr [openid] : 发布一个交易对合约 交易对类型 出让游戏金数值 换取兑换币数值 兑换币收款地址 [子账号]");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(4,"")),r=e.u64(0),s=e.u64(1),n=e.u64(2),[t,,]=(e=e.str(3),await t.contractCreate(r,s,n,e,i));return t.toJSON()}async propGet(t,e,i){if(e)throw new f(u.MISC_ERROR,"prop.wallet.byid pid: 查询自己的物品 PID");return e=new y([t]).str(0,""),t=[],(e=await this.wdb.propList.getVp(e))&&e.pst!=B.Delete&&t.push(e),t}async propQuery(t,e,i){if(e)throw new f(u.MISC_ERROR,"prop.query query: 条件查询自己的物品 条件数组");e=new y([t]);var[t]=await this.accessControl(i,e.str(1,""));return(i=e.array(0,[])).push(["pst","!=",B.Delete]),(await t.getPropList()).query(i)}async mySaleList(t,e,i){if(e)throw new f(u.MISC_ERROR,"prop.query.auction (page acct): 查询自己拍卖的物品 (页码 账户)");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(1,""));e=e.uint(0,1);return t.mySaleList(e,i)}async onSaleList(t,e,i){t=new y([t]);var[i,r]=await this.accessControl(i,t.str(1,""));t=t.uint(0,1);return i.onSaleList(t,r)}async propBuy(t,e,i){if(e||t.length<2)throw new f(u.MISC_ERROR,"prop.buy pid price [openid] : 竞拍道具 道具编号 出价 [子账号]");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(2,"")),r=e.str(0),[t,,]=(e=e.u64(1),await t.propBuy(r,e,i));return t.toJSON()}async propFound(t,e,i){if(e||t.length<1)throw new f(u.MISC_ERROR,"prop.found pid (openid): 熔铸道具 道具编号 (账号)");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(1,""));e=e.str(0);if(!(e=await t.db.propList.getVp(e))||e.pst==B.Delete)throw new f(u.MISC_ERROR,"prop.found prop not exist");if(!await t.belongToAccount(i,e.current.address))throw new f(u.MISC_ERROR,"prop.found: current account not owned prop.");if(e.pst!=B.Ready)throw new f(u.MISC_ERROR,"prop.found prop can not be found on current status");var[t,,e]=await t.propFound(e.current.hash,i);if(t&&e)return{hash:t.hash("hex"),txid:t.rhash(),index:0,cid:e.cid,pid:e.pid,oid:e.oid,gold:t.outputs[0].value}}async propSale(t,e,i){if(e||t.length<2)throw new f(u.MISC_ERROR,"prop.sale pid fixedPrice [openid]: 拍卖道具 道具编号 一口价 [子帐号]");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(2,"")),r=e.str(0);if(!(r=await t.db.propList.getVp(r))||r.pst==B.Delete)throw new f(u.MISC_ERROR,"prop.sale prop not exist");if(r.pst!=B.Ready)throw new f(u.MISC_ERROR,"prop.sale prop cannt be sent on current status");e=e.u64(1,0);var[t,,]=await t.propSale(r.current.hash,r.current.index,e,i);return t.toJSON()}async propSendListAdmin(t,e,i){return this.propSendList(t,e,i,!0)}async propSendList(t,e,i,r=!1){if(e||t.length<1)throw new f(u.MISC_ERROR,"prop.sendlist (addr|txid|index)(n,) [openid]: 批量转移道具 道具数组(地址|交易ID|输出索引) [子账户]");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(1,"")),s=[];if((e=e.str(0).split(","))&&Array.isArray(e))for(var n of e){var o,a;3<=(n=n.split("|")).length&&(o=n[0],a=new M(g.revHex(n[1]),parseInt(n[2])),4<=n.length?s.push([a,x.fromString(o),n[3]]):s.push([a,x.fromString(o)]))}var[e,,t]=await t.propExchangeList(s,i,r);if(e&&t){let i=e.hash("hex"),r=e.rhash();return t.map(t=>({hash:i,txid:r,cid:t.cid,pid:t.pid,oid:t.oid,gold:t.gold,addr:t.addr}))}}async propReceive(t,e,i){if(e||t.length<1)throw new f(u.MISC_ERROR,"prop.receive tx [account]: 捐赠接收函数 捐赠交易字符串 [接收账户]");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(1,""));if(!(e=e.buf(0)))throw new f(u.TYPE_ERROR,"Invalid TX Info.");e=O.fromRaw(e);var[t,,e]=await t.propReceive(e,i);if(t&&e)return{hash:t.hash("hex"),txid:t.rhash(),cid:e.cid,pid:e.pid,oid:e.oid,gold:e.gold,addr:e.simAddr,gaddr:e.gaddr}}async propDonate(t,e,i){if(e||t.length<1)throw new f(u.MISC_ERROR,"prop.donate pid [openid]: 捐赠道具函数 道具ID [发起账户]");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(1,""));e=e.str(0);if(!(e=await t.db.propList.getVp(e))||e.pst==B.Delete)throw new f(u.MISC_ERROR,"prop not exist");if(e.pst!=B.Ready)throw new f(u.MISC_ERROR,"prop cannt be sent on current status");e=new M(e.current.hash,e.current.index);var[t,,e]=await t.propDonate(e,i);if(t&&e)return{hash:t.hash("hex"),txid:t.rhash(),cid:e.cid,pid:e.pid,oid:e.oid,gold:e.gold,raw:t.toRaw().toString("hex")}}async propExchange(t,e,i){if(e||t.length<2)throw new f(u.MISC_ERROR,"prop.send addr pid [openid]: 转移道具函数 接收地址 物品编号 [发起账户]");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(2,"")),r=e.str(0);e=e.str(1);if(!(e=await t.db.propList.getVp(e))||e.pst==B.Delete)throw new f(u.MISC_ERROR,"prop.send prop not exist");if(e.pst!=B.Ready)throw new f(u.MISC_ERROR,"prop.send prop cannt be sent on current status");var[t,,e]=await t.propExchange(new M(e.current.hash,e.current.index),x.fromString(r),i);if(t&&e)return{hash:t.hash("hex"),txid:t.rhash(),cid:e.cid,pid:e.pid,oid:e.oid,gold:e.gold,addr:r}}async propCreateList(t,e,i){if(e||t.length<1)throw new f(u.MISC_ERROR,"prop.createlist (cid|oid|gold|pid)(n,) [openid]: 批量创建道具 道具信息数组 [发起账户]");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(1,""));let r=[];if((e=e.str(0).split(","))&&Array.isArray(e))for(var s of e)if(3<=(s=s.split("|")).length){var n=s[0],o=s[1],a=parseInt(s[2]);let t=null;4<=s.length&&(t=s[3]),a<k.MINPROPVALUE||r.push([n,o,a,t])}r=r.map(t=>{var[t,e,i,r]=t;return{oper:T.propCreate,cid:t,oid:e,gold:i,pid:r}});var[e,,]=await t.propCreate(r,i);return e?r:null}async propCreate(t,e,i){if(e||t.length<3)throw new f(u.MISC_ERROR,"prop.create cid oid gold pid (openid): 创建道具 厂商编码 道具类别码 含金量 道具编码(可填空) [账户]");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(4,"")),r=e.str(0),s=e.str(1),n=e.u64(2,k.MINPROPVALUE);e=e.str(3,null);if(n<k.MINPROPVALUE)throw new f(u.PROP_MINVALUE,"prop.create: not a valid value");r={oper:T.propCreate,cid:r,oid:s,gold:n,pid:e};var[s,,]=await t.propCreate([r],i);return s?r:null}async walletLock(t,e,i){if(e)throw new f(u.MISC_ERROR,"wallet.lock [passphrase]");var[e]=await this.accessControl(i);if(!e.master.encrypted){if((i=new y([t]).str(0,"")).length<1)throw new f(u.MISC_ERROR,"Wallet is not encrypted, please run wallet.lock passphrase");try{await e.setPassphrase(null,i)}catch(t){throw new f(u.WALLET_ENCRYPTION_FAILED,"Encryption failed.")}}return await e.lock(),null}async listMSTrans(t,e,i){if(e)throw new f(u.MISC_ERROR,"tx.mstrans");return e=new y([t]).str(0,""),this.wdb.listMSTrans(e)}async signMSTrans(t,e,i){if(e||t.length<1)throw new f(u.MISC_ERROR,"tx.mstrans.sign txid");t=(e=new y([t])).str(0,"");var r=e.str(1,""),[i,e]=await this.accessControl(i,e.str(2,""));if(!(t=await this.wdb.db.get(a.ms(x.getHash(t,"hex"),r))))throw new f(u.MISC_ERROR,"tx.mstrans.sign txid");if(t=JSON.parse(t.toString()),!await i.belongToAccount(e,t.addr))throw new f(u.MISC_ERROR,"tx.mstrans.sign invalid account");var s,n=await this.wdb.get(t.addr);n&&n.account.type==h.types.MULTISIG&&((s=A.fromRaw(t.data,"hex")).view=await n.getCoinView(s),await n.sign(s),s.isSigned()?await n.sendMTX(s):await i.send({subtractFee:!1,sort:!1,outputs:[{address:t.contract,value:1e4}],comment:JSON.stringify({oper:"scrun",params:{oper:"sign",addr:t.addr,tx:s.toRaw().toString("hex")}})},e),await this.wdb.delMSTrans(t.addr,r))}async resendWalletTransactions(t,e,i){if(e||0!==t.length)throw new f(u.MISC_ERROR,"tx.resend.admin");var[e]=await this.accessControl(i),r=[];for(const t of await e.resend())r.push(t.txid());return r}async resend(t,e,i){if(e||0!==t.length)throw new f(u.MISC_ERROR,"tx.resendall.admin: 重发挂起交易");var r=await this.wdb.resend();if(r)for(var s of Object.keys(r))if(s)for(const t of r[s])await this.wdb.send(t);return!0}async rescan(t,e,i){if(e)throw new f(u.MISC_ERROR,'sys.rescan ( "height" )');return e=new y([t]).u32(0),await this.wdb.rescan(e),this.logger.info("Rescanning..."),!0}async createAddress(t,e,i){if(e||2<t.length)throw new f(u.MISC_ERROR,'address.create ( "account" "uid" )');e=new y([t]);var[t,i]=await this.accessControl(i,e.str(0,""));e=e.u32(1,0);return(t=await t.createReceive(i,e))?t.toJSON():null}async calcAddress(t,e,i){if(e||t.length<3)throw new f(u.MISC_ERROR,"address.calc account(must be typeof number) branch index");e=new y([t]);let[r,s]=await this.accessControl(i,e.int(0,0));return t=e.u32(1,0),i=e.u32(2,0),"default"==s&&(s=0),e=(await r.deriveKey(s,t,i,r.master)).toJSON(),i=(t=await r.deriveKey(s,t,i))?t.toJSON():null,n(e.address==i.address,"address derived from prv not equals which derived from pub."),i}async createAddressAdmin(t,e,i){if(e||1<t.length)throw new f(u.MISC_ERROR,'address.create.admin ( "account" )');e=new y([t]);var[t,i]=await this.accessControl(i,e.str(0,""));return(e=await t.createReceive(i,0,t.master))?e.toJSON(!0):null}async createChange(t,e,i){if(e||1<t.length)throw new f(u.MISC_ERROR,'address.change.create ( "account" )');e=new y([t]);var[t,i]=await this.accessControl(i,e.str(0,""));return(e=await t.createChange(i))?e.toJSON():null}async createNested(t,e,i){if(e||1<t.length)throw new f(u.MISC_ERROR,'address.nested.create ( "account" )');e=new y([t]);var[t,i]=await this.accessControl(i,e.str(0,""));return(e=await t.createNested(i))?e.toJSON():null}async mkwallet(t,e,i){var r=(t=new y([t])).str(4);if(r)for(var s of await this.wdb.getWallets())if((await this.wdb.get(s)).master.mnemonic.getPhrase()===body.phrase)throw new f(u.MISC_ERROR,"wallet.create: 相同助记词已被使用");return(r=await this.wdb.ensure({id:U(),type:t.str(1),m:t.u32(2),n:t.u32(3),mnemonic:r,passphrase:t.str(5),master:t.str(6),witness:t.bool(7),watchOnly:t.bool(8),accountKey:t.str(9)}))?r.toJSON(!1):null}async accountGet(t,e,i){if(e||t.length<1)throw new f(u.MISC_ERROR,"account.get account: 查询账户");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(0,""));return(e=await t.getAccount(i))?e.toJSON():null}async getPending(t,e,i){if(e)throw new f(u.MISC_ERROR,"tx.pending [account]: 查询挂起的交易");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(0,"")),r=(e=await t.getPending(i),o.sortTX(e),[]);for(const i of await t.toDetails(e))r.push(i.toJSON());return r}async getPendingItem(t,e,i){var r,s=(t=new y([t])).hash(0,""),[n,i]=await this.accessControl(i,t.str(1,""));for(r of await n.getPending(i))if(r.hash==s)return(r=await n.toDetails(r)).toJSON()}async getPendingHash(t,e,i){t=new y([t]);var[i,t]=await this.accessControl(i,t.str(0,"")),r=(t=await i.getPending(t),o.sortTX(t),[]);for(const e of await i.toDetails(t))r.push(g.revHex(e.hash));return r}async getPendingCount(t,e,i){if(e)throw new f(u.MISC_ERROR,"tx.pending.count [account]: 查询挂起的交易数");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(0,""));e=await t.ensureIndex(i);return(await t.txdb.getPendingHashes(e)).length}async accountCreate(t,e,i){t=new y([t]);var r,[i]=await this.accessControl(i),s=t.obj(0);t=t.str(1),s={name:(s=new y([s])).str("name"),witness:s.bool("witness",!0),type:s.str("type","pubkeyhash"),m:s.u32("m",1),n:s.u32("n",1),watchOnly:s.bool("watch",!1),accountKey:s.str("key",null),lookahead:s.u32("lookahead",10)};try{let e=await i.getAccount(s.name);return e?e.toJSON():((r=(e=await i.createAccount(s,t)).toJSON()).isNew=!0,r)}catch(e){return null}}async getblocks(t,e,i){if(e)throw new f(u.MISC_ERROR,"wallet.blocks");var[e]=await this.accessControl(i);return await e.getBlocks()}async getKey(t,e,i){if(e||1!==t.length)throw new f(u.MISC_ERROR,"key.export.public address: 查询地址的密钥");e=new y([t]);var[t]=await this.accessControl(i);i=e.str(0);return(e=(n(i,"Address is required."),await t.getKey(i)))?e.toJSON():null}async getPrivKey(t,e,i){if(e||1!==t.length)throw new f(u.MISC_ERROR,"address.key.admin address: 查询地址的密钥");e=new y([t]);var[t]=await this.accessControl(i);i=e.str(0);return(e=(n(i,"Address is required."),await t.getKey(i)))?e.toJSON(!0):null}async getwif(t,e,i){if(e||1!=t.length)throw new f(u.MISC_ERROR,"address.wif.admin address: 查询地址对应的私钥 地址");e=new y([t]);var[t]=await this.accessControl(i);i=e.str(0),e=e.str(1);return(t=(n(i,"Address is required."),await t.getPrivateKey(i,e)))?t.toSecret():null}async hasAddress(t,e,i){if(e||1!=t.length)throw new f(u.MISC_ERROR,"address.has address: 查询钱包是否包含一个地址 地址");e=new y([t]);var[t]=await this.accessControl(i);i=e.str(0);return(e=(n(i,"Address is required."),await t.hasAddress(i)))||!1}async getCoin(t,e,i){t=new y([t]);var[i]=await this.accessControl(i),r=t.hash(0);t=t.u32(1);return(i=(n(r,"Hash is required."),n(null!=t,"Index is required."),await i.getCoin(r,t)))?i.getJSON(this.network):null}async getSpender(t,e,i){t=new y([t]);var[i]=await this.accessControl(i),r=t.hash(0);t=t.u32(1);return(i=(n(r,"Hash is required."),n(null!=t,"Index is required."),await i.txdb.getSpender(r,t)))?{hash:g.revHex(i.hash),index:i.index}:null}async getSpent(t,e,i){t=new y([t]);var[i]=await this.accessControl(i),r=t.hash(0);t=t.u32(1),n(r,"Hash is required."),n(null!=t,"Index is required."),i=await i.txdb.getSpentCoin({hash:r,index:t});return{hash:g.revHex(i.hash),index:i.index,value:i.value,height:i.height,version:i.version,time:i.time}}async getCoincacheSize(t,e,i){var[i]=await this.accessControl(i);return i.txdb.coinCache.size}async conserveCoin(t,e,i){if(e||2!=t.length)throw new f(u.MISC_ERROR,"coin.conserved.add txhash index: 新增需要保持的硬币: 交易Hash 输出序号");e=new y([t]);var[t]=await this.accessControl(i);i=e.hash(0),e=e.u32(1),n(i,"Hash is required."),n(null!=e,"Index is required."),i=new M(i,e);return t.conserveCoin(i),!0}async getConservedCoins(t,e,i){if(e||0<t.length)throw new f(u.MISC_ERROR,"coin.conserved.get: 查询已经保持的Coin列表");var[e]=await this.accessControl(i),r=[];for(const t of e.getConserved())r.push(t.toJSON());return r}async unConserveCoin(t,e,i){if(e||2!=t.length)throw new f(u.MISC_ERROR,"coin.conserved.del: 减少需要保持的硬币: 交易Hash 输出序号");e=new y([t]);var[t]=await this.accessControl(i);i=e.hash(0),e=e.u32(1),n(i,"Hash is required."),n(null!=e,"Index is required."),i=new M(i,e);return t.unConserveCoin(i),!0}async addShared(t,e,i){if(e||t.length<1)throw new f(u.MISC_ERROR,"key.shared.add [account] key: 新增共享公钥 [账号] 公钥");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(0,""));e=e.str(1);return await t.addSharedKey(i,e),!0}async removeShared(t,e,i){if(e||t.length<1)throw new f(u.MISC_ERROR,"key.shared.del [account] key: 删除共享公钥 [账号] 公钥");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(0,""));e=e.str(1);return await t.removeSharedKey(i,e),!0}async zap(t,e,i){if(e)throw new f(u.MISC_ERROR,"sys.zap [age]: 移除挂起交易 挂起时长(默认三天)");e=new y([t]);var[t]=await this.accessControl(i);i=e.str(0),e=e.u32(1,259200);return n(e,"Age is required."),await t.zap(i,e),!0}async sendOracle(t,e,i){if(!(e||t.length<3||4<t.length)){e=new y([t]);var[t,i]=await this.accessControl(i,e.str(3,"")),r=e.str(0,null),s=e.str(1,null);if(null==(e=e.u64(2)))throw new f(u.TYPE_ERROR,"Invalid parameter.");if(r&&s)return e={subtractFee:!1,selection:"age",sort:!1,outputs:[{address:(await t.createReceive(i)).getAddress("string"),value:e}],comment:JSON.stringify({oper:T.vote,type:"oracle",k:r,v:s})},r=await t.send(e,i),(await t.getDetails(r.hash("hex"))).toJSON()}throw new f(u.MISC_ERROR,"oracle.send k v amount [openid]")}async sendVote(t,e,i){if(e||t.length<2||3<t.length)throw new f(u.MISC_ERROR,"vote.send addresses amount [openid]");e=new y([t]);var r,[t,i]=await this.accessControl(i,e.str(2,"")),s=e.str(0);if(null==(e=e.u64(1)))throw new f(u.TYPE_ERROR,"Invalid parameter.");for(r of s.split(","))if(!c.parseAddress(r,this.network))throw new f(u.TYPE_ERROR,"Invalid address.");return e={subtractFee:!1,selection:"age",sort:!1,outputs:[{address:(await t.createReceive(i)).getAddress("string"),value:e}],comment:`{"oper": "${T.vote}", "type": "mine", "ca": "${s}"}`},s=await t.send(e,i),(await t.getDetails(s.hash("hex"))).toJSON()}async sendVoteAsync(t,e,i){if(e||t.length<2||3<t.length)throw new f(u.MISC_ERROR,"vote.send.async addresses amount [openid]");e=new y([t]);var r,[t,i]=await this.accessControl(i,e.str(2,"")),s=e.str(0);if(null==(e=e.u64(1)))throw new f(u.TYPE_ERROR,"Invalid parameter.");for(r of s.split(","))if(!c.parseAddress(r,this.network))throw new f(u.TYPE_ERROR,"Invalid address.");e={subtractFee:!1,selection:"age",sort:!1,outputs:[{address:(await t.createReceive(i)).getAddress("string"),value:e}],comment:`{"oper": "${T.vote}", "type": "mine", "ca": "${s}"}`},t.send(e,i)}async sendTX(t,e,i){if(e||t.length<2)throw new f(u.MISC_ERROR,"tx.send addr amount [openid]:发送交易 地址 金额 [发起账户]");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(2,"")),r=e.str(0);e=e.u64(1),r=await t.send({outputs:[{address:r,value:e}]},i);return(await t.getDetails(r.hash("hex"))).toJSON()}async sendTXAsync(t,e,i){if(e||t.length<2)throw new f(u.MISC_ERROR,"tx.send.async addr amount [openid]:发送交易 地址 金额 [发起账户]");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(2,"")),r=e.str(0);e=e.u64(1);t.send({outputs:[{address:r,value:e}]},i)}async signTX(t,e,i){if(e||t.length<1)throw new f(u.MISC_ERROR,"tx.sign.admin txdata [sendnow passphrase]: 对交易签名/发送 交易原始数据 [立即发送 解锁密码]");e=new y([t]);var[t]=await this.accessControl(i),r=(i=e.buf(0),n(i,"TX is required."),e.bool(1,!1));e=e.str(2);(i=A.fromRaw(i)).view=await t.getCoinView(i),await t.sign(i,e);let s=null;return s=(r&&i.isSigned()?await t.sendMTX(i):i).getJSON(this.network),t.account.type==h.types.MULTISIG&&(e=i.getMultisig(this.network),s.ms={m:e.m,n:e.n,c:e.c}),s}async createTX(t,e,i){if(e||t.length<2)throw new f(u.MISC_ERROR,"tx.create options outputs [openid]: 创建交易 参数对象 输出数组 [子账号]");e=new y([t]);var[r,t]=await this.accessControl(i,e.str(2,""));i=e.obj(0),e=e.array(1);if(Array.isArray(i.in))for(var s of i.in)s.hash=g.revHex(s.hash);var n={comment:(i=new y([i])).obj("comment",null),sendnow:i.bool("sendnow",!0),account:i.str("account"),rate:i.u64("rate"),blocks:i.u32("blocks"),maxFee:i.u64("maxFee"),selection:i.str("selection"),smart:i.bool("smart"),subtractFee:i.bool("subtractFee"),subtractIndex:i.get("subtractIndex"),depth:i.u32(["confirmations","depth"]),inputs:i.array("in",null),outputs:[]};for(const t of e){var o=new y([t]),a={value:o.u64("value")};if(a.address=o.str("address"),!a.address){var c=o.str("account");if(c){await r.ensureAccount({name:c,witness:!0});var l=await r.createReceive(c);if(!l)throw new f(u.MISC_ERROR,`tx.create: account ${c} not exist`);a.address=l.getAddress("string")}}if((c=o.buf("script"))&&(a.script=v.fromRaw(c)),(l=o.str("locktype"))&&(o=o.u64("locktime",0))){if("no"!=l&&"clb"!=l&&"clt"!=l&&"csb"!=l&&"cst"!=l)throw new f(u.MISC_ERROR,'locktype should be "no"-不锁定 or "clb"-绝对高度锁定 or clt(绝对时间锁定) or "csb"-相对高度锁定 or "cst"-相对时间锁定 !');if(l==v.outputLockType.CHECKABSOLUTETIME&&o<=k.LOCKTIME_THRESHOLD)throw new f(u.MISC_ERROR,"lock absolute time should not less than 500000000!");if(l==v.outputLockType.CHECKABSOLUTEBLOCK&&o>k.LOCKTIME_THRESHOLD)throw new f(u.MISC_ERROR,"lock absolute block should not more than 500000000!");if((l==v.outputLockType.CHECKRELATIVEBLOCK||l==v.outputLockType.CHECKRELATIVETIME)&&65535<o)throw new f(u.MISC_ERROR,"lock relative block/time should not more than 65535!");a.locktype=l,a.locktime=o}n.outputs.push(a)}t&&(n.account=t);let d=null;return n.sendnow?(i=await r.send(n),d=(e=await r.getDetails(i.hash("hex"))).toJSON()):(t=await r.createTX(n),await r.sign(t),d=t.getJSON(this.network),r.account.type==h.types.MULTISIG&&(i=t.getMultisig(this.network),d.ms={m:i.m,n:i.n,c:i.c})),d}async getLast(t,e,i){if(e||t.length<1)throw new f(u.MISC_ERROR,"tx.last account [limit]: 最近的交易 账号 [最大记录数]");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(0)),r=(e=e.u32(1),[]);i=await t.getLast(i,e);for(const e of await t.toDetails(i))r.push(e.toJSON());return r}async getRange(t,e,i){if(e||t.length<4)throw new f(u.MISC_ERROR,"tx.range account start end limit [reserve]: 指定时限内的交易 账号 开始时间 结束时间 最大记录数 [反转]");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(0,"")),r=(e={start:e.u32(1),end:e.u32(2),limit:e.u32(3),reverse:e.bool(4)},i=await t.getRange(i,e),[]);for(const e of await t.toDetails(i))r.push(e.toJSON());return r}async caUserStatus(t,e,i){if(e||t.length<2)throw new f(u.MISC_ERROR,"ca.user.status cid uid (query)");t=(e=new y([t])).str(0,"");var r=e.uint(1,0),s=e.array(2,[]);let n=null;for(let t=0;t<s.length;t++){var o=s[t];o&&Array.isArray(o)?"alliancename"==o[0]&&(n=o[1],delete s[t]):delete s[t]}var[e]=await this.accessControl(i);t=await this.$allianceUserCreate([t,r,n],i);return s.push(["pubkey",t.data.pubkey]),s.push(["merge",!0]),e.db.client.execute("ca.list",[s])}async caUserLog(t,e,i){if(e||t.length<2)throw new f(u.MISC_ERROR,"ca.user.log cid uid (query)");t=(e=new y([t])).str(0,"");var r=e.uint(1,0),s=e.array(2,[]);let n=null;for(let t=0;t<s.length;t++){var o=s[t];o&&Array.isArray(o)?"alliancename"==o[0]&&(n=o[1],delete s[t]):delete s[t]}var[e,,]=await this.accessControl(i,t);t=await this.$allianceUserCreate([t,r,n],i);return s.push(["pubkey",t.data.pubkey]),e.db.client.execute("ca.list",[s])}async sysLog(t,e,i){if(e)throw new f(u.MISC_ERROR,"sys.log (query openid)");t=(e=new y([t])).array(0,[]);var r,[s,,]=await this.accessControl(i,e.str(1,"")),n=[];for(r of(await this.wdb.auditList.query(t)).list){var o=Object.assign({},r),a=c.parseHash(r.address,this.network);(a=await s.getPath(a))&&(o.account=a.name),o.time=new Date(1e3*r.time).toLocaleString(),n.push(o)}return n}async caIssuePublic(t,e,i){if(e||t.length<2||4<t.length)throw new f(u.MISC_ERROR,"ca.issue.public cert witness [pubkey openid]: 签发证书 证书对象 见证地址 [原始存证签名公钥 支付账户]");t=(e=new y([t])).obj(0,{});var r=e.str(1,""),s=e.str(2,""),[i,e]=await this.accessControl(i,e.str(3,""));if(!(r=await i.getPrivateKey(r)))throw new f(u.TYPE_ERROR,"Invalid witness.");if(64!=t.hash.length)throw new f(u.TYPE_ERROR,"err hash length");if(await i.db.client.execute("ca.byId",[t.hash]))throw new f(u.TYPE_ERROR,"cert.hash conflicted");return t.height||(t.height=k.retargetInterval),await i.issueCreate({erid:t.hash,key:r.privateKey.toString("hex"),address:r.getAddress().toString(),witness:r.publicKey.toString("hex"),validHeight:this.wdb.curHeight+t.height,source:{subjectName:t.name,pubkey:s,subjectHash:t.hash,cluster:t.cluster}},e)}async caAbolishPublic(t,i,r){if(i||t.length<1)throw new f(u.MISC_ERROR,"ca.abolish.public array[[erid height [openid]]]: 废止授信交易 废止交易信息数组");var s,n=[];for(s of new y([t]).array(0,[])){var[o,a]=await this.accessControl(r,s[3]),h=s[0],c=parseInt(s[1]),l=await this.wdb.erList.query([["erid",h]]),d=(l=x.fromWitnessPubkeyhash(S.hash160(e.from(l.list[0].witness,"hex")),this.network.type).toString(),await o.getKey(l));if(!d)throw new f(u.TYPE_ERROR,"Invalid witness.");(o=await o.caAbolish({key:d.privateKey.toString("hex"),witness:d.publicKey.toString("hex"),address:l,erid:h,abolishHeight:c,cid:"",uid:0},a))&&n.push(o)}return n}async caIssue(t,e,i){if(e||t.length<3||4<t.length)throw new f(u.MISC_ERROR,"ca.issue cert uid cid [openid]: 签发证书 证书对象 见证人 见证人归属单位 [消费账户]");return this.$caIssue(t,i,!1)}async caIssueAsync(t,e,i){if(e||t.length<3||4<t.length)throw new f(u.MISC_ERROR,"ca.issue.async cert uid cid [openid]: 签发证书 证书对象 见证人 见证人归属单位 [消费账户]");return this.$caIssue(t,i,!0)}async $caIssue(t,e,i){var r=(t=new y([t])).obj(0,{}),s=t.uint(1,0),n=t.str(2,""),[t,o]=await this.accessControl(e,t.str(3,""));if(!(a=await t.ensureCp(n))||"forbidden"==a.cls)throw new f(u.MISC_ERROR,"Invalid Account");if(64!=r.hash.length)throw new f(u.TYPE_ERROR,"err hash length");var a=await this.$allianceUserCreate([n,s],e),h=[];if(h.push(["pubkey",a.data.pubkey]),h.push(["source.subjectHash",r.hash]),0<(await t.db.client.execute("ca.list",[h])).count)throw new f(u.TYPE_ERROR,"cert.hash conflicted");if(await t.db.client.execute("ca.byId",[r.hash]))throw new f(u.TYPE_ERROR,"cert.hash conflicted");return r.height||(r.height=k.retargetInterval),a=await this.$allianceUserCreate([n,s],e,!0),await t.issueCreate({erid:r.hash,key:a.prvkey,witness:a.data.pubkey,address:a.data.addr,validHeight:this.wdb.curHeight+r.height,source:{subjectName:r.name,pubkey:a.data.pubkey,subjectHash:r.hash,cluster:r.cluster,cid:n,uid:s}},o,i)}async caAbolish(t,e,i){if(e||t.length<1)throw new f(u.MISC_ERROR,"ca.abolish [[uid cid erid height [openid]]]: 废止授信交易 废止交易信息数组");return this.$caAbolish(t,i,!1)}async caAbolishAsync(t,e,i){if(e||t.length<1)throw new f(u.MISC_ERROR,"ca.abolish.async [[uid cid erid height [openid]]]: 废止授信交易 废止交易信息数组");return this.$caAbolish(t,i,!0)}async $caAbolish(t,e,i){var r,s=[];for(r of new y([t]).array(0,[])){var n,o=r[0],a=r[1],h=r[2],c=parseInt(r[3]),[n,u]=await this.accessControl(e,r[4]),l=await this.$allianceUserCreate([a,o],e,!0);(n=await n.caAbolish({cid:a,uid:o,key:l.prvkey,witness:l.data.pubkey,address:l.data.addr,erid:h,abolishHeight:c},u,i))&&s.push(n)}return s}async enchanceCp(t,e,i){if(e||t.length<2||4<t.length)throw new f(u.MISC_ERROR,"ca.enchance toCid fromCid height [openid]");e=new y([t]);var[t,i]=await this.accessControl(i,e.str(3)),r=e.str(0,0),s=e.str(1,0);let n=e.uint(2,0);(!n||n<this.wdb.curHeight)&&(n=this.wdb.curHeight+k.retargetInterval);var[e,t]=await t.enchanceCp({to:r,from:s,enchanceHeight:n},i);return e&&t?t:null}async queryErList(t,e,i){if(e)throw new f(u.MISC_ERROR,"ca.query.remote conditions: 查询存证列表 (复合条件)");e=new y([t]);var[t,,]=await this.accessControl(i,e.str(1,""));i=e.array(0,[]);return t.db.client.execute("ca.list",[i])}async queryMyErlist(t,e,i){if(e)throw new f(u.MISC_ERROR,"ca.list.me query: 条件查询自己的电子权利 条件数组");return e=new y([t]).array(0,[]),this.wdb.erList.query(e)}}}).call(this,i(0).Buffer,i(78).setImmediate,i(11))},function(t,e,i){(function(e){var r=i(28);const{ContractEnvType:s,ContractStatus:n}=i(7),o=i(8),a=i(91);t.exports=class extends r{constructor(t){super(),this.db=t}async loadHistory(){var t;for(t of await this.db.getContracts())t&&(t.period<this.db.curHeight&&t.transStatus==n.CreatedOnMem?await this.delTransContract(t,!0):(t.id=t.type+"."+t.addr,await this.saveContract(t),t.transStatus==n.Promised&&this.db.autoTaskMgr.addTask(new a(this.db.network.txcheckpoint,t),this.db.network.txchecktime[t.type])))}query(t,e){return(t=this.get(t+"."+e))?t.transStatus:n.None}async addTransContract(t,e,i=!1){e.id=e.type+"."+e.addr;var r=this.get(e.id);t===s.Mempool&&((e=r||e).transStatus||(e.transStatus=n.CreatedOnMem),await this.saveContract(e,i))}async saveContract(t,i=!1){t.id=t.id||t.type+"."+t.addr,this.set(t.id,t),i&&(i=o.hash256(e.from(t.id)).toString("hex"),await this.db.batchPut(this.db.tidCreator(i),e.from(JSON.stringify(t))))}async promiseContract(t,e=!1){let i=!1;var r=t.type+"."+t.addr;let s=this.get(r);return s&&s.oper==t.oper||(i=!0,s=t),(!s.transStatus||s.transStatus<n.Promised)&&(i=!0,s.transStatus=n.Promised),i&&await this.saveContract(s,e),i}async confirmContract(t,e,i){t=t.type+"."+t.addr,!(t=this.get(t))||t.transStatus!=n.Promised||e!=n.Confirmed&&e!=n.Expired||(t.transStatus=e,await this.saveContract(t,i))}async delTransContract(t,i){var r=t.type+"."+t.addr,s=this.get(r);s&&s.oper==t.oper&&(this.delete(r),i)&&(s=o.hash256(e.from(r)).toString("hex"),await this.db.batchDel(this.db.tidCreator(s)))}}}).call(this,i(0).Buffer)},function(t,e,i){(function(e){const r=i(7).HtlcStatus;var s=i(28);class n extends s{constructor(t){super(),this.db=t}async loadHistory(){var t,e;for(t of(this.clear(),await this.db.loadHtlcList()))this.set(t.id,t),t.wid&&t.account&&(e=t.wid+"."+t.account,this.account.get(e)||this.account.set(e,new Map),this.account.get(e).set(t.id,t))}setAccount(t,e,i){this.delAccount(t),e&&i&&(t.wid=e,t.account=i,e=t.wid+"."+t.account,this.account.get(e)||this.account.set(e,new Map),this.account.get(e).set(t.id,t))}delAccount(t){var e;t&&t.wid&&t.account&&(e=t.wid+"."+t.account,this.account.get(e))&&this.account.get(e).delete(t.id)}}n.vpItem=class t{constructor(t){this.fromOptions(t||{})}fromOptions(t){this.shash=t.shash,this.sidx=t.sidx,this.sheight=t.sheight,this.ahash=t.ahash,this.aidx=t.aidx,this.aheight=t.aheight,this.src=t.src,this.dst=t.dst,this.aa=t.aa,this.ab=t.ab,this.ba=t.ba,this.bb=t.bb,this.amount=t.amount,this.rate=t.rate,this.pst=t.pst}toRaw(){var t={};return t.shash=this.shash,t.sidx=this.sidx,t.sheight=this.sheight,t.ahash=this.ahash,t.aidx=this.aidx,t.aheight=this.aheight,t.src=this.src,t.dst=this.dst,t.amount=this.amount,t.rate=this.rate,t.pst=this.pst||r.Init,t.aa=this.aa||"",t.ab=this.ab||"",t.ba=this.ba||"",t.bb=this.bb||"",e.from(JSON.stringify(t),"utf-8")}get id(){return""+this.shash+this.sidx}fromRaw(t){return t=JSON.parse(t.toString("utf8")),this.fromOptions(t),this}static fromRaw(e){return(new t).fromRaw(e)}},t.exports=n}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * walletdb.js - storage for wallets
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */var r=i(323);const s=r.layout,n=i(108),o=i(564),a=i(79);class h extends r{constructor(t){super(t),this.eid=t.eid||"walletdb"}async _open(t){if(this.options.listen&&await this.logger.open(),await this.isNewRecord()){t=t||{},this.logger.info("new wallet db to be created.");let e=null;e=!t.getMnemonicFromMemory&&(t.file||(t.file=`./${this.network.type}-genesis.keystore`),e=await n.readEncryptFile(t))||t,this.setmnemonic(e)}await this.db.open();var e=await this.db.checkVersion(s,6);return this.depth=await this.getDepth(),this.options.wipeNoReally&&await this.wipe(),await this.setFilter(),this.readyLoad=!0,await this.load(t),this.primary=await this.ensure({id:"primary",witness:!0,mnemonic:this.options.mnemonic}),this.logger.info("AccountDB loaded (depth=%d, height=%d, start=%d).",this.depth,this.curHeight,this.state.startHeight),this.logger.info("Loaded primary wallet (id=%s, wid=%d, address=%s)",this.primary.id,this.primary.wid,this.primary.getAddress()),this.$parent&&this.$parent.config.version!=a.version&&(t=this.primary.getReceive().toString(),this.logAudit({address:t,oper:"node.update",hash:this.$parent.config.version+"->"+a.version,index:0}),this.$parent.config.version=a.version,await this.$parent.config.saveAsync()),o.on("auth failure",()=>{}),o.on("auth success",()=>{}),this.on("notify/receive",async t=>{await this.handleNotify(t)}),this.on("notify/remove",async t=>{await this.handleNotify(t,!0)}),this.http&&this.options.listen&&await this.http.open(),e}bind(){!this.client||this.bound||(this.bound=!0,this.client.hook("htlcassent.cancel",t=>{this.setAssent(t),this.emit("htlcassent.cancel",t)}),this.client.hook("htlcassent.deal",t=>{this.setAssent(t),this.emit("htlcassent.deal",t)}),this.client.hook("htlcassent.receive",t=>{this.setAssent(t),this.emit("htlcassent.receive",t)}),this.client.hook("htlcsuggest.cancel",t=>{this.setSuggest(t),this.emit("htlcsuggest.cancel",t)}),this.client.hook("htlcsuggest.deal",t=>{this.setSuggest(t),this.emit("htlcsuggest.deal",t)}),this.client.hook("htlcsuggest.receive",t=>{this.setSuggest(t),this.emit("htlcsuggest.receive",t)}),this.on("mssendpubk/receive",async t=>{let e=await this.get(t.addr);var i,r,s;if(!e&&(e=await this.ensure({id:t.addr,type:"multisig",m:t.m,n:t.n,witness:!0}),[s,r]=await this.getAccountByAddress(t.addr),s=await this.get(s))&&await s.send({subtractFee:!1,sort:!1,outputs:[{address:t.contract,value:1e4}],comment:JSON.stringify({oper:"scrun",params:{oper:"pubk",addr:t.addr,puba:e.account.accountKey}})},r),e.account.keys.length<e.account.n-1){for(i of t.data.split(","))try{await e.addSharedKey(i)}catch(t){}e.account.keys.length==e.account.n-1&&([s,r]=await this.getAccountByAddress(t.addr),s=await this.get(s))&&await s.send({subtractFee:!1,sort:!1,outputs:[{address:t.contract,value:1e4}],comment:JSON.stringify({oper:"scrun",params:{oper:"puba",addr:t.addr,puba:e.account.receive.getAddress().toString()}})},r)}}),this.on("mssendtx/receive",async t=>{var e,i=await this.get(t.addr);i&&i.account.type==Account.types.MULTISIG&&((e=MTX.fromRaw(t.data,"hex")).view=await i.getCoinView(e),e.isSigned()||(t.txid=e.txid(),await this.saveMSTrans(t)))}),this.client.hook("onConnect",async()=>{await this.load()}),this.client.hook("error",t=>{this.emit("error",t)}),this.client.on("block.connect",async(t,e)=>{try{await this.addBlock(t,e)}catch(t){this.emit("error",t)}}),this.client.on("block.disconnect",async(t,e)=>{try{await this.removeBlock(t,e)}catch(t){this.emit("error",t)}}),this.client.on("chain.full",()=>{this.synced=!0}),this.client.hook("block.rescan.walletdb",async(t,e)=>{try{await this.rescanBlock(t,e)}catch(t){this.emit("error",t)}}),this.client.on("tx",async(t,e,i)=>{try{await this.addTX(t,null,i)}catch(t){this.emit("error",t)}}),this.client.on("entry.remove",async(t,e)=>{try{if(e){var i=t.tx.hash("hex"),r=await this.getWalletsByTX(t.tx);if(r)for(const e of r){var s=await this.get(e);assert(s),await s.remove(i),(await facade.FactoryOfContract({tx:t.tx,env:this})).erase()}}}catch(t){this.emit("error",t)}}),this.client.on("chain.reset",t=>{this.resetChain(t).catch(t=>{this.emit("error",t)})}),this.jsonp&&this.jsonp.hook("error",t=>{this.emit("error",t)}))}}h.layout=s,t.exports=h},function(t,e,i){"use strict";
/*!
 * chain.js - blockchain management for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */const r=i(1);var s=i(63);const n=i(317),o=i(109),a=i(9),h=i(3),c=i(29),u=i(52),l=i(321),f=i(47),d=i(16),p=i(30).VerifyError,g=i(36),m=i(618),w=i(619),{getVerifyMsg:y,ContractType:b}=i(7);i(58);const v=o.thresholdStates,k=i(42);i(43);const S=i(314),_=i(137),x=2;class R extends s{constructor(t){super(),this.options=new m(t),this.node=this.options.node,this.network=this.options.network,this.logger=this.options.logger.context("chain"),this.workers=this.options.workers,this.db=new n(this),this.locker=new c(!0),this.invalid=new u(100),this.state=new w,this.tip=new l,this.height=-1,this.indicator=S.inst(),this.orphanMap=new Map,this.orphanPrev=new Map}get synced(){return this.indicator.check(x)}set synced(t){t?this.indicator.set(x):this.indicator.unSet(x)}async _open(t){this.logger.info("Chain is loading."),this.options.checkpoints&&this.logger.info("Checkpoints are enabled."),this.options.coinCache&&this.logger.info("Coin cache is enabled.");t=await this.db.open(t),this.node&&"function"==typeof this.node.emit&&this.node.emit("plugin open",{type:this.db.eid,result:t}),t=await this.db.getTip();var e=(r(t),this.tip=t,this.height=t.height,this.logger.info("Chain Height: %d",t.height),this.logger.memory(),await this.getDeploymentState());this.setDeploymentState(e),this.logger.memory(),this.emit("tip",t),this.maybeSync(),await Promise.all([this.db.cpList.loadHistory(),(async()=>{this.node&&this.node.mempool&&await this.node.mempool.cpMemList.loadHistory()})(),this.db.scList.loadHistory(),(async()=>{this.node&&this.node.config&&await this.db.voteMgr.loadHistory(this.node.config[this.network.type+"Addresses"])})(),this.db.propList.loadHistory(),this.db.htlcList.loadHistory(),this.db.transactionList.loadHistory(),this.db.erList.loadHistory(),this.db.erAbList.loadHistory(),this.db.enCpList.loadHistory()])}_close(){return this.db.close()}async verifyContext(t,e,i){i=await this.verify(t,e,i);let r=new f;if(this.options.spv||(r=this.isHistorical(e)?await this.updateInputs(t,e):await this.verifyInputs(t,e,i)),!this.options.spv){for(let e=0;e<t.txs.length;e++){var s=t.txs[e],n=await k.FactoryOfContract({env:this.db,block:t,tx:s,coins:r});if("0000000000000000000000000000000000000000000000000000000000000000"!=t.prevBlock&&1!=(n=await n.verify()))throw new p(s,y(n),"bad-contract-verify",100)}if(!await this.verifyInner(t))throw new Error("Block Derive Transaction Error.")}return[r,i]}async verifyBlock(t){var e=await this.locker.lock();try{return await this._verifyBlock(t)}finally{e()}}async _verifyBlock(t){var e=o.flags.DEFAULT_FLAGS&~o.flags.VERIFY_POW;return this.verifyContext(t,this.tip,e)}isMainHash(t){return this.db.isMainHash(t)}isMainChain(t){return this.db.isMainChain(t)}getAncestor(t,e){return this.db.getAncestor(t,e)}getPrevious(t){return this.db.getPrevious(t)}getPrevCache(t){return this.db.getPrevCache(t)}getNext(t){return this.db.getNext(t)}getNextEntry(t){return this.db.getNextEntry(t)}async getMedianTime(t,e){let i=R.MEDIAN_TIMESPAN;var r=[];null!=e&&(r.push(e),--i);let s=t;for(let t=0;t<i&&s;t++){r.push(s.time),s=this.getPrevCache(s)||await this.getPrevious(s)}return r.sort(A),r[r.length>>>1]}isHistorical(t){return!!(this.options.checkpoints&&t.height+1<=this.network.lastCheckpoint)}async verify(t,e,i){if(r("number"==typeof i),t.prevBlock!==e.hash)throw new p(t,"invalid","bad-prevblk",0);var s=t.hash("hex");if(!this.verifyCheckpoint(e,s))throw new p(t,"checkpoint","checkpoint mismatch",100);if(this.isHistorical(e)){if(this.options.spv)return this.state;if(!t.hasWitness()&&!t.getCommitmentHash())return new w;i&=~o.flags.VERIFY_BODY}if(i&o.flags.VERIFY_BODY){var[s,i,n]=t.checkBody();if(!s)throw new p(t,"invalid",i,n,!0)}if(s=(await this.getTarget(t.time,e)).target,t.bits!==s)throw new p(t,"invalid","bad-diffbits",100);if(this.options.spv)return this.state;if(i=await this.getMedianTime(e),t.time<=i)throw new p(t,"invalid","time-too-old",0);if(t.time>this.network.now()+7200)throw new p(t,"invalid","time-too-new",0,!0);var h=e.height+1;if(t.version<2)throw new p(t,"obsolete","bad-version",0);if(t.version<3)throw new p(t,"obsolete","bad-version",0);if(t.version<4)throw new p(t,"obsolete","bad-version",0);var n,c=(n=await this.getDeployments(t.time,e)).hasMTP()?i:t.time;t.pviewer=null;for(let e=0;e<t.txs.length;e++){var u=t.txs[e],l=await k.FactoryOfContract({env:this.db,block:t,tx:u});if(0==e){if(_.unittest)continue;if(!l||!l.data)throw new p(t,"invalid","null coinbase data",100);r.strictEqual(l.data.oper,b.coinbase)}if(!u.isFinal(h,c))throw new p(t,"invalid","bad-txns-nonfinal",10)}if(t.getCoinbaseHeight()!==h)throw new p(t,"invalid","bad-cb-height",100);let f=null;if(n.hasWitness()&&(f=t.getCommitmentHash())){if(!t.getWitnessNonce())throw new p(t,"invalid","bad-witness-nonce-size",100,!0);if(!f.equals(t.createCommitmentHash()))throw new p(t,"invalid","bad-witness-merkle-match",100,!0)}if(!f&&t.hasWitness())throw new p(t,"invalid","unexpected-witness",100,!0);if(t.getWeight()>a.MAX_BLOCK_WEIGHT)throw new p(t,"invalid","bad-blk-weight",100);return n}async getDeployments(t,e){return this.network.deployments,e.height,(e=new w).flags|=d.flags.VERIFY_P2SH,e.flags|=d.flags.VERIFY_DERSIG,e.flags|=d.flags.VERIFY_CHECKLOCKTIMEVERIFY,e.flags|=d.flags.VERIFY_CHECKSEQUENCEVERIFY,e.lockFlags|=o.lockFlags.VERIFY_SEQUENCE,e.lockFlags|=o.lockFlags.MEDIAN_TIME_PAST,e.flags|=d.flags.VERIFY_WITNESS,e.flags|=d.flags.VERIFY_NULLDUMMY,e}setDeploymentState(t){this.options.checkpoints&&this.height<this.network.lastCheckpoint||(!this.state.hasP2SH()&&t.hasP2SH()&&this.logger.warning("P2SH has been activated."),!this.state.hasBIP66()&&t.hasBIP66()&&this.logger.warning("BIP66 has been activated."),!this.state.hasCSV()&&t.hasCSV()&&this.logger.warning("CSV has been activated."),!this.state.hasWitness()&&t.hasWitness()&&this.logger.warning("Segwit has been activated.")),this.state=t}async updateInputs(t,e){var i=new f,s=e.height+1,n=await this.getMedianTime(e);e=t.txs[0];i.addTX(e,s,n);for(let e=1;e<t.txs.length;e++){var o=t.txs[e];r(await i.spendInputs(this.db,o),"BUG: Spent inputs in historical data!"),i.addTX(o,s,n)}return i}async verifyInputs(t,e,i){var r=new f,s=t.getCoinbaseHeight(),n=await this.getMedianTime(e),o=this.network.halvingInterval;let h=0,c=0;for(let o=0;o<t.txs.length;o++){var u=t.txs[o];if(0<o&&!await r.spendInputs(this.db,u))throw new p(t,"invalid","bad-txns-inputs-missingorspent",100);if(0<o&&2<=u.version&&!await this.verifyLocks(e,u,r,i.lockFlags))throw new p(t,"invalid","bad-txns-nonfinal",100);if((h+=u.getSigopsCost(r,i.flags))>a.MAX_BLOCK_SIGOPS_COST)throw new p(t,"invalid","bad-blk-sigops",100);if(0<o){var[l,d,m]=u.checkInputs(r,s);if(-1===l)throw new p(t,"invalid",d,m);if((c+=l)>a.MAX_MONEY)throw new p(t,"invalid","bad-cb-amount",100)}r.addTX(u,s,n)}if(c+=a.getReward(s,o),t.getClaimed()>c)throw new p(t,"invalid","bad-cb-amount",100);var w=[];for(let s=1;s<t.txs.length;s++){var y=t.txs[s];let n=null;var v=await k.FactoryOfContract({env:this.db,block:t,tx:y,prev:e});v.data&&v.data.oper==b.contractExecute&&(v=this.db.transactionList.get(v.data.type+"."+v.data.addr))&&(n=v.transStatus),w.push(y.verifyAsync(r,i.flags,n,this.workers))}if(await g.every(w))return r;throw new p(t,"invalid","mandatory-script-verify-flag-failed",100)}async findFork(t,e){for(;t.hash!==e.hash;){for(;e.height>t.height;)if(!(e=await this.getPrevious(e)))throw new Error("No previous entry for new tip.");if(t.hash===e.hash)return t;if(!(t=await this.getPrevious(t)))throw new Error("No previous entry for old tip.")}return t}async reset(t){var e=await this.locker.lock();try{return await this._reset(t,!1)}finally{e()}}async _reset(t,e){t=await this.db.reset(t);var i=(this.tip=t,this.height=t.height,this.synced=!1,await this.getDeploymentState());this.setDeploymentState(i),this.emit("tip",t),e||await this.fire("chain.reset",t),this.purgeOrphans(),this.maybeSync()}async reorganize(t){var e=this.tip,i=await this.findFork(e,t),s=(r(i,"No free space or data corruption."),[]);let n=e;for(;n.hash!==i.hash;)s.push(n),n=await this.getPrevious(n),r(n);var o=[];for(n=t;n.hash!==i.hash;)o.push(n),n=await this.getPrevious(n),r(n);for(let t=0;t<s.length;t++){const e=s[t];await this.disconnect(e)}for(let t=o.length-1;1<=t;t--){const e=o[t];await this.reconnect(e)}this.logger.warning("Chain reorganization: old=%s(%d) new=%s(%d)",e.rhash(),e.height,t.rhash(),t.height),await this.fire("chain.reorganize.end",e,t)}async reorganizeSPV(t){var e=this.tip,i=await this.findFork(e,t),s=(r(i,"No free space or data corruption."),[]);let n=e;for(;n.hash!==i.hash;)s.push(n),n=await this.getPrevious(n),r(n);await this._reset(i.hash,!0);for(const t of s){var o=t.toHeaders(),a=new f;await this.fire("block.disconnect",t,o,a)}this.logger.warning("SPV reorganization: old=%s(%d) new=%s(%d)",e.rhash(),e.height,t.rhash(),t.height),this.logger.warning("Chain replay from height %d necessary.",i.height),await this.emit("chain.reorganize.end",e,t)}async disconnect(t){let e=await this.getBlock(t.hash);if(!e){if(!this.options.spv)throw new Error("Block not found.");e=t.toHeaders()}var i=await this.getPrevious(t),s=await this.db.disconnect(t,e);r(i),this.tip=i,this.height=i.height,this.emit("tip",i),await this.fire("block.disconnect",t,e,s)}async reconnect(t){var e=o.flags.VERIFY_NONE;let i=await this.getBlock(t.hash);if(!i){if(!this.options.spv)throw new Error("Block not found.");i=t.toHeaders()}var s=await this.getPrevious(t);let n,a;r(s);try{[n,a]=await this.verifyContext(i,s,e)}catch(e){throw"VerifyError"===e.type&&(e.malleated||this.setInvalid(t.hash),this.logger.warning("Tried to reconnect invalid block: %s (%d).",t.rhash(),t.height)),e}await this.db.reconnect(t,i,n),this.tip=t,this.height=t.height,this.setDeploymentState(a),this.emit("tip",t),this.emit("reconnect",t,i),await this.fire("block.connect",t,i,n)}async setBestChain(t,e,i,r){if(t.prevBlock!==this.tip.hash){if(this.logger.warning("WARNING: Reorganizing chain."),this.options.spv)return void await this.reorganizeSPV(t);await this.reorganize(t)}let s,n;t.hasUnknown(this.network)&&this.logger.warning("Unknown version bits in block %d: %s.",t.height,h.hex32(t.version));try{[s,n]=await this.verifyContext(e,i,r)}catch(e){throw"VerifyError"===e.type&&(e.malleated||this.setInvalid(t.hash),this.logger.warning("Tried to connect invalid block: %s (%d).",t.rhash(),t.height)),e}await this.db.save(t,e,s),this.tip=t,this.height=t.height,this.setDeploymentState(n),this.emit("tip",t),this.emit("block",e,t),await this.fire("block.connect",t,e,s)}async saveAlternate(t,e,i,r){try{await this.verify(e,i,r)}catch(e){throw"VerifyError"===e.type&&(e.malleated||this.setInvalid(t.hash),this.logger.warning("Invalid block on alternate chain: %s (%d).",t.rhash(),t.height)),e}t.hasUnknown(this.network)&&this.logger.warning("Unknown version bits in block %d: %s.",t.height,h.hex32(t.version)),await this.db.save(t,e),this.logger.warning("Heads up: Competing chain at height %d: tip-height=%d competitor-height=%d tip-hash=%s competitor-hash=%s tip-chainwork=%s competitor-chainwork=%s chainwork-diff=%s",t.height,this.tip.height,t.height,this.tip.rhash(),t.rhash(),this.tip.chainwork.toString(),t.chainwork.toString(),this.tip.chainwork.sub(t.chainwork).toString()),this.emit("competitor",e,t)}async replay(t){var e=await this.locker.lock();try{return await this._replay(t,!0)}finally{e()}}async _replay(t,e){if(!(t=await this.getEntry(t)))throw new Error("Block not found.");if(!await this.isMainChain(t))throw new Error("Cannot reset on alternate chain.");t.isGenesis()?await this._reset(t.hash,e):await this._reset(t.prevBlock,e)}async invalidate(t){var e=await this.locker.lock();try{return await this._invalidate(t)}finally{e()}}async _invalidate(t){await this._replay(t,!1),this.setInvalid(t)}async prune(){var t=await this.locker.lock();try{return await this.db.prune()}finally{t()}}async scan(t,e,i){var r=await this.locker.lock();try{return await this.db.scan(t,e,i)}finally{r()}}async add(t,e,i){var r=await this.locker.lock();try{return await this._add(t,e,i)}finally{r()}}async _add(t,e,i){var r=t.hash("hex");if(null==e&&(e=o.flags.DEFAULT_FLAGS),null==i&&(i=-1),r===this.network.genesis.hash)throw this.logger.debug("Saw genesis block: %s.",t.rhash()),new p(t,"duplicate","duplicate",0);if(this.hasPending(r))throw this.logger.debug("Already have pending block: %s.",t.rhash()),new p(t,"duplicate","duplicate",0);if(this.hasOrphan(r))throw this.logger.debug("Already have orphan block: %s.",t.rhash()),new p(t,"duplicate","duplicate",0);if(this.hasInvalid(t))throw this.logger.debug("Invalid ancestors for block: %s.",t.rhash()),new p(t,"duplicate","duplicate",100);if(e&o.flags.VERIFY_POW&&!t.verifyPOW())throw new p(t,"invalid","high-hash",50);if(await this.hasEntry(r))throw this.logger.debug("Already have block: %s.",t.rhash()),new p(t,"duplicate","duplicate",0);var s=await this.getEntry(t.prevBlock);return s?(s=await this.connect(s,t,e),this.hasNextOrphan(r)&&await this.handleOrphans(s),s):(this.storeOrphan(t,e,i),null)}async verifyInner(t){var e,i,r,s=[],n=new Map;let o=null;for(e of(this.node.cdb&&(o=await this.node.cdb.get("primary")),t.txs))if(!_.unittest){if(!o)throw new p(e,"invalid","contractdb not exists",100);if(e.opr.isDerived){for(var a of(await this.node.mempool.insertTX(e),await this.node.mempool.removeDoubleSpenders(e),e.inputs))if(a=a.getAddress().getHash("hex"),!(a=await o.getPath(a))||a.name!=e.opr.data.account)throw new p(e,"invalid","fault inner input",100);var h={id:e.hash("hex"),raw:e.toRaw()};s.push(h)}else for(var c of e.inputs)if((c=c.getAddress())&&(c=c.getHash("hex"),await o.getPath(c)))throw new p(e,"invalid","fault input",100)}for(i of t.txs){var u,l=await k.FactoryOfContract({tx:i,env:this.node.mempool});if(!l.data||!l.data.$tag||"inner"!=l.data.$tag)for(u of(await l.onPacking()).derive)n.set(u.hash("hex"),u.toRaw())}for(r of s){if(!n.has(r.id))return!1;if(!n.get(r.id).equals(r.raw))return!1;n.delete(r.id)}return 0==n.size}async connect(t,e,i){var s=h.hrtime();if(r(e.prevBlock===t.hash),e.isMemory())try{e=e.toBlock()}catch(t){throw this.logger.error(t),new p(e,"malformed","error parsing message",10,!0)}var n=await this.getMedianTime(t);return(n=l.fromBlock(e,t,n)).chainwork.lte(this.tip.chainwork)?await this.saveAlternate(n,e,t,i):await this.setBestChain(n,e,t,i),this.logStatus(s,e,n),this.maybeSync(),n}async handleOrphans(t){let e=this.resolveOrphan(t.hash);for(;e;){var{block:i,flags:r,id:s}=e;try{t=await this.connect(t,i,r)}catch(t){if("VerifyError"!==t.type)throw t;this.logger.warning("Could not resolve orphan block %s: %s.",i.rhash(),t.message),this.emit("orphan.bad",t,s);break}this.logger.debug("Orphan block was resolved: %s (%d).",i.rhash(),t.height),this.emit("resolved",i,t),e=this.resolveOrphan(t.hash)}}isSlow(){return!this.options.spv&&(!!this.synced||1===this.height||this.height%20==0||this.height>=this.network.block.slowHeight)}logStatus(t,e,i){this.isSlow()&&(t=h.hrtime(t),this.logger.info("Block %s (%d) added to chain (size=%d txs=%d time=%d).",i.rhash(),i.height,e.getSize(),e.txs.length,t),0<this.db.coinCache.capacity)&&this.logger.spam("Coin Cache: size=%dmb, items=%d.",h.mb(this.db.coinCache.size),this.db.coinCache.items)}verifyCheckpoint(t,e){var i;return!(this.options.checkpoints&&(t=t.height+1,i=this.network.checkpointMap[t])&&(e===i?(this.logger.debug("Hit checkpoint block %s (%d).",h.revHex(e),t),this.emit("checkpoint",e,t),0):(this.logger.warning("Checkpoint mismatch at height %d: expected=%s received=%s",t,h.revHex(i),h.revHex(e)),this.purgeOrphans(),1)))}storeOrphan(t,e,i){var s=t.getCoinbaseHeight(),n=this.orphanPrev.get(t.prevBlock);n&&(r(n.block.hash("hex")!==t.hash("hex")),r(n.block.prevBlock===t.prevBlock),this.logger.warning("Removing forked orphan block: %s (%d).",n.block.rhash(),s),this.removeOrphan(n)),this.limitOrphans(),this.addOrphan(new E(t,e,i)),this.logger.debug("Storing orphan block: %s (%d).",t.rhash(),s),this.emit("orphan",t)}addOrphan(t){var e=t.block,i=e.hash("hex");return r(!this.orphanMap.has(i)),r(!this.orphanPrev.has(e.prevBlock)),r(0<=this.orphanMap.size),this.orphanMap.set(i,t),this.orphanPrev.set(e.prevBlock,t),t}removeOrphan(t){var e=t.block,i=e.hash("hex");return r(this.orphanMap.has(i)),r(this.orphanPrev.has(e.prevBlock)),r(0<this.orphanMap.size),this.orphanMap.delete(i),this.orphanPrev.delete(e.prevBlock),t}hasNextOrphan(t){return this.orphanPrev.has(t)}resolveOrphan(t){return(t=this.orphanPrev.get(t))?this.removeOrphan(t):null}purgeOrphans(){var t=this.orphanMap.size;0!==t&&(this.orphanMap.clear(),this.orphanPrev.clear(),this.logger.debug("Purged %d orphans.",t))}limitOrphans(){var t=h.now();let e=null;for(const i of this.orphanMap.values())t<i.time+3600?(!e||i.time<e.time)&&(e=i):this.removeOrphan(i);this.orphanMap.size<this.options.maxOrphans||e&&this.removeOrphan(e)}hasInvalid(t){var e=t.hash("hex");return!!this.invalid.has(e)||!!this.invalid.has(t.prevBlock)&&(this.setInvalid(e),!0)}setInvalid(t){this.invalid.set(t,!0)}removeInvalid(t){this.invalid.remove(t)}async has(t){return!!this.hasOrphan(t)||!!this.locker.has(t)||!!this.invalid.has(t)||this.hasEntry(t)}getEntry(t){return this.db.getEntry(t)}getEntryByHeight(t){return this.db.getEntryByHeight(t)}getEntryByHash(t){return this.db.getEntryByHash(t)}getHash(t){return this.db.getHash(t)}getHeight(t){return this.db.getHeight(t)}hasEntry(t){return this.db.hasEntry(t)}getNextHash(t){return this.db.getNextHash(t)}hasCoins(t){return this.db.hasCoins(t)}getTips(){return this.db.getTips()}readCoin(t){return this.db.readCoin(t)}getCoin(t,e){return this.db.getCoin(t,e)}getBlock(t){return this.db.getBlock(t)}getRawBlock(t){return this.db.getRawBlock(t)}getBlockView(t){return this.db.getBlockView(t)}getMeta(t){return this.db.getMeta(t)}async getTX(t){return this.db.getTX(t)}hasTX(t){return this.db.hasTX(t)}getCoinsByAddress(t){return this.db.getCoinsByAddress(t)}getHashesByAddress(t,e="both"){return this.db.getHashesByAddress(t,e)}getTXByAddress(t){return this.db.getTXByAddress(t)}getMetaByAddress(t){return this.db.getMetaByAddress(t)}getOrphan(t){return this.orphanMap.get(t)||null}hasOrphan(t){return this.orphanMap.has(t)}hasPending(t){return this.locker.hasPending(t)}getCoinView(t){return this.db.getCoinView(t)}async getSpentView(t){var e=await this.locker.lock();try{return await this.db.getSpentView(t)}finally{e()}}isFull(){return this.synced}maybeSync(){this.synced||this.options.checkpoints&&this.height<this.network.lastCheckpoint||0<this.tip.height&&this.tip.time<h.now()-this.network.block.maxTipAge||this.hasChainwork()&&(this.synced=!0,g.timeout(1e3).then(()=>{this.emit("chain.full")}))}hasChainwork(){return this.tip.chainwork.gte(this.network.pow.chainwork)}getProgress(){var t=this.network.genesis.time,e=this.tip.time-t;t=h.now()-t-2400;return Math.min(1,e/t)}async getLocator(t){var e=await this.locker.lock();try{return await this._getLocator(t)}finally{e()}}async _getLocator(t){null==t&&(t=this.tip.hash),r("string"==typeof t);var e,i=[];let s=await this.getEntry(t),n=(s||(i.push(t),s=this.tip),i.push(s.hash),await this.isMainChain(s)),o=s.hash,a=s.height,h=1;for(;0<a;)(a-=h)<0&&(a=0),10<i.length&&(h*=2),n?(o=await this.getHash(a),r(o)):(e=await this.getAncestor(s,a),r(e),n=await this.isMainChain(e),o=e.hash),i.push(o);return i}getOrphanRoot(t){r(t);let e=null;for(;;){var i=this.orphanMap.get(t);if(!i)break;e=t,t=i.block.prevBlock}return e}getProofTime(t,e){var i=this.network.pow;let r,s;return r=t.chainwork.gt(e.chainwork)?(s=t.chainwork.sub(e.chainwork),1):(s=e.chainwork.sub(t.chainwork),-1),53<(s=(s=s.imuln(i.targetSpacing)).div(this.tip.getProof())).bitLength()?r*Number.MAX_SAFE_INTEGER:r*s.toNumber()}async getTarget(t,e){var i=this.network.pow;if(!e)return r(t===this.network.genesis.time),{target:i.bits};if((e.height+1)%i.retargetInterval!=0){if(i.targetReset){if(t>e.time+2*i.targetSpacing)return{target:i.bits};for(;0!==e.height&&e.height%i.retargetInterval!=0&&e.bits===i.bits;){e=this.getPrevCache(e)||await this.getPrevious(e),r(e)}}return{target:e.bits}}return t=e.height-(i.retargetInterval-1),r(0<=t),t=await this.getAncestor(e,t),r(t),this.retarget(e,t)}retarget(t,e){var i=this.network.pow,r={target:t.bits};if(!i.noRetargeting){var s=i.targetTimespan,n=a.compact2BN(t.bits);let o=t.time-e.time;(o=o<s/4|0?s/4|0:o)>4*s&&(o=4*s),n.imuln(o),n.idivn(s),n.gt(i.limit)?r.target=i.bits:r.target=a.bn2Compact(n)}return r}async findLocator(t){for(const e of t)if(await this.isMainHash(e))return e;return this.network.genesis.hash}async isActive(t,e){return await this.getState(t,e)===v.ACTIVE}async getState(t,e){var i=e.bit;let s=this.network.minerWindow,n=this.network.activationThreshold;if(-1!==e.threshold&&(n=e.threshold),-1!==e.window&&(s=e.window),(t.height+1)%s!=0){var o=t.height-(t.height+1)%s;if(!(t=await this.getAncestor(t,o)))return v.DEFINED;r(t.height===o),r((t.height+1)%s==0)}let a=t,h=v.DEFINED;for(var c=[];a;){var u=this.db.stateCache.get(i,a);if(-1!==u){h=u;break}if(await this.getMedianTime(a)<e.startTime){h=v.DEFINED,this.db.stateCache.set(i,a,h);break}c.push(a),u=a.height-s,a=await this.getAncestor(a,u)}for(;c.length;){const t=c.pop();switch(h){case v.DEFINED:var l=await this.getMedianTime(t);l>=e.timeout?h=v.FAILED:l>=e.startTime&&(h=v.STARTED);break;case v.STARTED:{if(await this.getMedianTime(t)>=e.timeout){h=v.FAILED;break}let o=t,a=0;for(let t=0;t<s;t++){if(o.hasBit(i)&&a++,a>=n){h=v.LOCKED_IN;break}o=await this.getPrevious(o),r(o)}break}case v.LOCKED_IN:h=v.ACTIVE;break;case v.FAILED:case v.ACTIVE:break;default:r(!1,"Bad state.")}this.db.stateCache.set(i,t,h)}return h}async computeBlockVersion(t){let e=0;for(const r of this.network.deploys){var i=await this.getState(t,r);i!==v.LOCKED_IN&&i!==v.STARTED||(e|=1<<r.bit)}return(e|a.VERSION_TOP_BITS)>>>0}async getDeploymentState(){var t=await this.getPrevious(this.tip);return t?this.options.spv?this.state:this.getDeployments(this.tip.time,t):(r(this.tip.isGenesis()),this.state)}async verifyFinal(t,e,i){var r=t.height+1;return e.locktime<a.LOCKTIME_THRESHOLD?e.isFinal(r,-1):i&o.lockFlags.MEDIAN_TIME_PAST?(i=await this.getMedianTime(t),e.isFinal(r,i)):e.isFinal(r,this.network.now())}async verifyLocks(t,e,i,s){if(s&o.lockFlags.VERIFY_SEQUENCE&&!(e.isCoinbase()||e.version<2)){let[o,p]=[-1,-1];var n,h,c,u=a.SEQUENCE_GRANULARITY,l=a.SEQUENCE_DISABLE_FLAG,f=a.SEQUENCE_TYPE_FLAG,d=a.SEQUENCE_MASK;for({prevout:n,sequence:h}of e.inputs)if(!(h&l)){let e=i.getHeight(n);-1===e&&(e=this.height+1),h&f?(e=Math.max(e-1,0),c=await this.getAncestor(t,e),r(c,"Database is corrupt."),c=await this.getMedianTime(c),c+=((h&d)<<u)-1,p=Math.max(p,c)):(e+=(h&d)-1,o=Math.max(o,e))}if(-1!==o&&o>=t.height+1)return!1;if(-1!==p&&p>=(s=await this.getMedianTime(t)))return!1}return!0}}function E(t,e,i){this.block=t,this.flags=e,this.id=i,this.time=h.now()}function A(t,e){return t-e}R.MEDIAN_TIMESPAN=11,t.exports=R},function(t,e,i){"use strict";e.unsupported=!0},function(t,e,i){"use strict";(function(e,r,s){
/*!
 * rpc.js - bitcoind-compatible json rpc for vallnet.
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const n=i(49),o=i(1),a=i(65),h=a.errors,c=a.MAGIC_STRING,u=i(64),l=i(79),f=i(9),d=i(8),p=i(136),g=i(23),m=i(109),w=i(129),y=i(31),b=i(16),v=i(103),k=i(36),S=i(3),_=i(4),x=i(104),R=i(54),E=i(308).openapi,A=i(141);i(118).vpItem,i(206);const M=i(13),O=i(58),I=i(71),C=i(100),T=i(117),P=i(51),B=i(41),N=i(25),L=i(19),H=i(22).opcodes;function U(t){for(let i=0;i<t.length;i+=4){var e=t.readUInt32LE(i,!0);t.writeUInt32BE(e,i,!0)}}t.exports=class extends a{constructor(t){super(t),o(t,"RPC requires a Node."),this.node=t,this.keys=t.keys,this.workers=t.workers,this.chain=t.chain,this.mempool=t.mempool,this.pool=t.pool,this.fees=t.fees,this.miner=t.miner,this.logger=t.logger.context("rpc"),this.procLimit=0,this.attempt=null,this.lastActivity=0,this.boundChain=!1,this.nonce1=0,this.nonce2=0,this.merkleMap=new Map,this.pollers=[],this.generating=!1,this.init()}init(){this.add("help",this.help),this.add("miner",this.routerOfMiner),this.add("miner.generate.admin",this.generate),this.add("miner.generateto.admin",this.generateToAddress),this.add("miner.setsync.admin",this.setSync),this.add("miner.setaddr.admin",this.setMinerAddr),this.add("miner.addaddr.admin",this.addMinerAddr),this.add("miner.getaddr.admin",this.getMinerAddr),this.add("miner.set.admin",this.setGenerate),this.add("miner.check",this.getGenerate),this.add("miner.difficulty",this.getDifficulty),this.add("vote",this.routerOfVote),this.add("vote.show",this.voteShow),this.add("vote.check",this.voteCheck),this.add("oracle.check",this.oracleCheck),this.add("block",this.routerOfBlock),this.add("block.best",this.getBestBlockHash),this.add("block.count",this.getBlockCount),this.add("block.info",this.getBlock),this.add("block.info.byheight",this.getBlockByHeight),this.add("block.hash",this.getBlockHash),this.add("block.header",this.getBlockHeader),this.add("block.verify",this.verifyBlock),this.add("block.tips",this.getChainTips),this.add("block.template.admin",this.getBlockTemplate),this.add("block.submit.admin",this.submitBlock),this.add("block.reset.admin",this.resetBlock),this.add("block.rollback.admin",this.rollbackBlock),this.add("block.invalidate.admin",this.invalidateBlock),this.add("block.reconsider.admin",this.reconsiderBlock),this.add("cp.byClass",this.cpByClass),this.add("cp.byName",this.cpByName),this.add("cp.byId",this.cpById),this.add("sc.query",this.querySCList),this.add("sc.balance",this.scBalance),this.add("sc.model",this.querySCModel),this.add("comm",this.routerOfComm),this.add("tx",this.routerOfTx),this.add("tx.raw.get",this.getRawTransaction),this.add("tx.raw.decode",this.decodeRawTransaction),this.add("tx.raw.create",this.createRawTransaction),this.add("tx.raw.send",this.sendRawTransaction),this.add("tx.raw.sign.admin",this.signRawTransaction),this.add("tx.get",this.getTXByHash),this.add("tx.list.address",this.getTXByAddress),this.add("tx.list.addresses",this.getTXByAddresses),this.add("tx.broadcast",this.broadcast),this.add("tx.prioritise",this.prioritiseTransaction),this.add("tx.utxo",this.getTXOut),this.add("tx.txo.proof",this.getTXOutProof),this.add("tx.txo.verifyproof",this.verifyTXOutProof),this.add("tx.coins",this.getCoins),this.add("tx.coincache",this.getCoinCache),this.add("tx.coins.byoutpoint",this.getCoinByOutpoint),this.add("tx.spender",this.getSpender),this.add("prop.byaddress",this.getVpByAddress),this.add("prop.byid",this.getVpById),this.add("prop.byHashIndex",this.getVpByHashIndex),this.add("sys",this.routerOfSys),this.add("sys.info",this.getInfo),this.add("sys.dump",this.heapDump),this.add("sys.blockinfo",this.getBlockchainInfo),this.add("sys.peerinfo",this.getPeerInfo),this.add("sys.networkinfo",this.getNetworkInfo),this.add("sys.memoryinfo",this.getMemoryInfo),this.add("sys.mempoolinfo",this.getMempoolInfo),this.add("sys.mininginfo",this.getMiningInfo),this.add("sys.addednodeinfo",this.getAddedNodeInfo),this.add("sys.txoinfo",this.getTXOutSetInfo),this.add("sys.connectioncount",this.getConnectionCount),this.add("sys.disconnectnode",this.disconnectNode),this.add("sys.nettotals",this.getNetTotals),this.add("sys.prune",this.pruneBlockchain),this.add("sys.ping",this.ping),this.add("sys.setloglevel",this.setLogLevel),this.add("sys.setban",this.setBan),this.add("sys.listbanned",this.listBanned),this.add("sys.clearbanned",this.clearBanned),this.add("sys.addnode",this.addNode),this.add("sys.hashrate",this.getNetworkHashPS),this.add("sys.work",this.getWork),this.add("sys.worklp",this.getWorkLongpoll),this.add("sys.setmocktime",this.setMockTime),this.add("sys.message.verify",this.verifyMessage),this.add("sys.message.signk",this.signMessageWithPrivkey),this.add("sys.stop.admin",this.stop),this.add("sys.decodescript",this.decodeScript),this.add("sys.validateaddress",this.validateAddress),this.add("sys.createmultisig",this.createMultisig),this.add("sys.createwitnessaddress",this.createWitnessAddress),this.add("sys.createAuthToken",this.authtoken),this.add("sys.groupPrefix",this.addGroupPrefix),this.add("sys.devmode",this.setDevMode),this.add("sys.groupSuffix",this.addGroupSuffix),this.add("sys.changeSpecialCp",this.changeSpecialCp),this.add("sys.alliance",this.routerOfAlliance),this.add("sys.alliance.info",this.getAllianceInfo),this.add("sys.alliance.addpeer",this.addPeer),this.add("sys.alliance.list",this.listAlliance),this.add("sys.alliance.export",this.exportAlliance),this.add("sys.alliance.getpeer",this.getPeer),this.add("sys.alliance.delpeer",this.delPeer),this.add("estimate",this.routerOfEstimate),this.add("estimate.fee",this.estimateFee),this.add("estimate.smartfee",this.estimateSmartFee),this.add("estimate.priority",this.estimatePriority),this.add("estimate.smartpriority",this.estimateSmartPriority),this.add("mempool",this.routerOfMempool),this.add("mempool.info",this.getMempoolInfo),this.add("mempool.orphans",this.getMempoolOrphans),this.add("mempool.reset",this.resetMempool),this.add("mempool.ancestors",this.getMempoolAncestors),this.add("mempool.descendants",this.getMempoolDescendants),this.add("mempool.entry",this.getMempoolEntry),this.add("mempool.raw",this.getRawMempool),this.add("mempool.snap",this.getMempool),Object.values(E).map(t=>{this.add(t.name,async(e,i)=>this.node.conn_s2local.execute(t.name,e))})}get wallet(){return null}set wallet(t){}async routerOfMiner(t){throw new u(h.MISC_ERROR,"\n      miner.generate.admin    生产一个区块\n      miner.generateto.admin  使用指定的令牌地址生产一个区块\n      miner.set.admin         设置矿机运行状态\n      miner.setsync.admin     设置块链同步完成\n      miner.setaddr.admin     动态设置奖励地址\n      miner.addaddr.admin     动态添加奖励地址\n      miner.getaddr.admin     查询实时奖励地址\n      miner.check             检查矿机运行状态\n      miner.difficulty        检查当前挖矿难度\n    ")}async routerOfVote(t){throw new u(h.MISC_ERROR,"\n      vote.check              查询指定地址的选举结果\n      vote.show               查询当前或指定区间票仓信息\n      vote.send               进行投票\n      oracle.check            查询指定标记的数据上链情况\n      oracle.send             进行数据上链操作\n    ")}async routerOfBlock(t){throw new u(h.MISC_ERROR,"\n      block.best              获取当前主链顶部区块哈希(小端)\n      block.count             获取当前主链区块数量\n      block.info              查询区块内容\n      block.info.byheight     根据高度查询区块内容\n      block.hash              根据高度查询区块哈希(小端)\n      block.header            根据哈希(小端)查询区块头\n      block.verify            校验区块数据\n      block.tips              列表所有分叉的头部信息\n      block.invalidate.admin  标记区块无效\n      block.reconsider.admin  取消区块无效标记\n      block.template.admin    生成或校验区块数据模板\n      block.submit.admin      提交区块数据\n      block.reset.admin       重置区块头至指定区块\n      block.rollback.admin    回滚区块至指定区块\n    ")}async routerOfMempool(t){throw new u(h.MISC_ERROR,"\n      mempool.info            查看交易池概要信息\n      mempool.ancestors       向前搠源交易池中指定交易\n      mempool.descendants     向后搠源交易池中指定交易\n      mempool.entry           查询交易记录\n      mempool.raw             查询交易池中原始数据\n      mempool.snap            查询交易池中原始数据\n      mempool.reset           重置内存池\n    ")}async routerOfEstimate(t){throw new u(h.MISC_ERROR,"\n      estimate.fee            评估费用\n      estimate.smartfee       评估智能费用\n      estimate.priority       评估优先权\n      estimate.smartpriority  评估智能优先权\n    ")}async routerOfSys(t){throw new u(h.MISC_ERROR,"\n      sys.info            查询系统概要信息\n      sys.blockinfo       查询块链概要信息\n      sys.memoryinfo      查询交易池概要信息\n      sys.networkinfo     查询网络概要信息\n      sys.nettotals       查询网速概要\n      sys.peerinfo        查询对等节点概要信息\n      sys.mininginfo      查询矿机概要信息\n      sys.txoinfo         查询TXO概要信息\n      sys.prune           修剪块链数据\n      sys.ping            PING所有管道\n      sys.setloglevel     设置日志等级\n      sys.setban          禁止管道\n      sys.listbanned      列表已禁管道\n      sys.clearbanned     清除已禁管道\n      sys.addnode         添加管道\n      sys.addednodeinfo   查询管道信息\n      sys.connectioncount 查询连接数\n      sys.disconnectnode  断开管道\n      sys.hashrate        查询网络哈希速率\n      sys.work            获取工作量\n      sys.worklp          获取工作量\n      sys.setmocktime     修改网络时间戳\n      sys.message.sign    签署网络消息\n      sys.message.signk   指定私钥签署网络消息\n      sys.message.verify  验证网络消息\n      sys.stop.admin      停止节点运行\n      sys.decodescript    解码脚本\n      sys.validateaddress 校验地址\n      sys.zap             移除超龄挂起交易\n      sys.createmultisig  生成多签脚本\n      sys.walletdb.stop   停止钱包数据库的运行\n      sys.walletdb.create 重新创立钱包数据库\n      sys.walletdb.destroy      新增RPC指令：彻底删除钱包数据库\n      sys.createwitnessaddress  生成见证地址\n      sys.groupPrefix     添加/删除ACL前缀成员\n      sys.groupSuffix     添加/删除ACL后缀成员\n      sys.createAuthToken 制备令牌固定量\n      sys.changeSpecialCp 添加特约商户\n      sys.alliance         联盟管理\n      sys.log             审计日志查询\n    ")}async routerOfAlliance(t){throw new u(h.MISC_ERROR,"\n      sys.alliance.info      查询联盟节点信息\n      sys.alliance.gettoken  生成信道令牌\n      sys.alliance.addpeer   添加认证信道\n      sys.alliance.delpeer   删除认证信道\n      sys.alliance.getpeer   查看信道列表\n      sys.alliance.create    创建联盟节点证书\n      sys.alliance.delete    吊销联盟节点证书\n      sys.alliance.list      列表联盟节点证书\n      sys.alliance.export    导出联盟节点证书\n    ")}async routerOfComm(t){throw new u(h.MISC_ERROR,"\n      comm.notify          通知(钱包)\n      comm.listNotify      查询通知列表(钱包)\n      comm.secret          安全通信(钱包)\n      comm.listContact     列表安全通信联系人\n      comm.scanContact     扫描指定交易，用关联地址建立通信联系人\n    ")}async routerOfTx(t){throw new u(h.MISC_ERROR,"\n      tx.raw.get              获取交易原始数据\n      tx.raw.decode           解码交易原始数据\n      tx.raw.create           创建交易，返回交易原始数据\n      tx.raw.send             发送交易数据返回交易ID\n      tx.get                  查询交易记录\n      tx.list.address         按地址查询交易列表\n      tx.list.addresses       按地址列表查询交易列表\n      tx.broadcast            广播交易\n      tx.prioritise           优化交易池中的交易\n      tx.utxo                 查询UTXO信息\n      tx.spender              查询硬币的消费者\n      tx.mstrans              列表待处理多签交易\n      tx.mstrans.sign         签署待处理多签交易\n      tx.coins                查询硬币信息\n      tx.coins.byoutpoint     查询硬币信息\n      tx.txo.proof            查询TXO工作量信息\n      tx.txo.verifyproof      校验TXO工作量信息\n      tx.get.wallet           查询交易记录(钱包)\n      tx.list                 交易列表(钱包)\n      tx.create               创建交易(钱包)\n      tx.send                 发送交易(钱包)\n      tx.last                 最近的交易\n      tx.pending              查询挂起交易\n      tx.range                范围查询\n      tx.history              查询历史交易\n      tx.history.since        查询指定日期后的历史交易\n      tx.resend.admin         重发当前钱包的挂起交易\n      tx.resendall.admin      重发所有钱包的挂起交易\n      tx.importprunedfunds.admin  导入修剪资金\n      tx.removeprunedfunds.admin  移除已导入修剪资金\n      tx.fund.admin               填充资金\n      tx.sign.admin           签署交易(钱包)\n      tx.abandon.admin        丢弃指定交易\n      tx.abandonall.admin     废弃所有挂起的交易\n      tx.raw.sign.admin       签署交易\n    ")}async exportAlliance(t,e,i){if(e)throw new u(h.MISC_ERROR,"sys.alliance.export: 批量导出联盟成员证书");for(var r of this.node.config.alliances)r=r.split("|"),n.unsupported||n.writeFile(`${this.network.type}-${r[0]}-${r[1]}.keystore`,r[2],"utf8")}async listAlliance(t,e,i){if(e)throw new u(h.MISC_ERROR,"sys.alliance.list: 列表现有联盟成员");var r,s=[];e={name:this.node.config.allianceName,id:this.node.config.allianceNodeId,address:this.node.config.allianceAwardAddress,host:this.node.config.host+":"+this.node.config.port};for(r of(e.voted=(await this.chain.db.voteMgr.checkVote(e.address)).result,s.push(e),this.node.config.alliances)){var n;(n={name:(n=r.split("|"))[0],id:n[1],address:n[4],host:n[5]}).voted=(await this.chain.db.voteMgr.checkVote(n.address)).result,s.push(n)}return s}async addPeer(t,e,i){if(e||t.length<2)throw new u(h.MISC_ERROR,"sys.alliance.addpeer host key: 添加授信信道 地址 信道公钥");return this._addPeer(t)}async _addPeer(t){var i=(t=new x([t])).str(0);t=t.str(1);return i&&t?(t==g.publicKeyCreate(e.from(this.node.config.identityKey,"hex"),!0).toString("hex")||this.node.pool.authdb.getKnown(i)||(await this.node.rpc.addNode([i,"add"]),this.node.pool.authdb.addKnown(i,e.from(t,"hex"))),{host:i,key:t}):null}async getPeer(t,e,i){if(e)throw new u(h.MISC_ERROR,"sys.alliance.getpeer: 查看授信信道");return{peer:this.node.config.knownPeers}}async delPeer(t,e,i){if(e||t.length<1)throw new u(h.MISC_ERROR,"sys.alliance.delpeer hostname: 删除授信信道 信道地址");var r;e={host:new x([t]).str(0)};return(t=this.node.require("walletdb"))&&(t=await t.get("primary"))&&(r=v.signObj(e,t.notifyKey.privateKey),await t.commNotify({dst:t.notifyAddress,content:JSON.stringify({cmd:"peerdel",payload:e,sig:r,pub:t.notifyKey.publicKey.toString("hex")})})),e}async _delPeer(t){let e={host:new x([t]).str(0)};var i=this.node.config.knownPeers.length;for(let t=0;t<i;t++)if(-1!=this.node.config.knownPeers[t].indexOf(e.host)){var r=this.node.config.knownPeers.splice(t,1);e.key=r[0].split(" ")[1].replace(" ",""),this.pool.authdb.delKnown(e.host),await this.node.rpc.addNode([e.host,"remove"]),setTimeout(()=>{var t,i;for(t of this.pool.peers.getbyhost(e.host))t.destroy();for(i of this.pool.peers.getInbound())i.destroy()},6e3);break}return e}async getAllianceInfo(t,i,r){if(i)throw new u(h.MISC_ERROR,"sys.alliance.info: 获取联盟信息");i=this.node.config.identityKey;var s=(i=g.publicKeyCreate(e.from(i,"hex"),!0)).toString("hex");i=M.fromWitnessPubkeyhash(d.hash160(i),this.network.type).toString();return{alliancePrivateKey:this.node.config.alliancePrivateKey,peerIdentity:s,awardAddress:i,allianceName:this.node.config.allianceName,allianceNodeId:this.node.config.allianceNodeId}}async voteShow(t,e){if(e)throw new u(h.MISC_ERROR,"vote.show [zoneId]: 查询选举结果 [指定区间]");return e=new x([t]).uint(0,0),this.chain.db.voteMgr.getVote(e)}async oracleCheck(t,e){if(e)throw new u(h.MISC_ERROR,"oracle.check key: 查询上链数据 数据标记");return{k:e=new x([t]).str(0,""),v:(t=await this.chain.db.voteMgr.checkOracle(e)).v,vote:t.vote}}async voteCheck(t,e){if(e)throw new u(h.MISC_ERROR,"vote.check address: 查询选举结果 指定地址");return e=new x([t]).str(0,""),this.chain.db.voteMgr.checkVote(e)}async changeSpecialCp(t,e){if(e||t.length<1)throw new u(h.MISC_ERROR,'sys.changeSpecialCp action[0-view 1-add 2-remove 3-clear] "[cid]": 添加/删除/清空特约商户');t=(e=new x([t])).uint(0,0);var i=e.array(1);if(t){switch(t){case 1:for(var r of i)this.node.specialCp.add(r);break;case 2:for(var s of i)this.node.specialCp.del(s);break;case 3:this.node.specialCp.clear()}await this.node.config.saveAsync()}return this.node.specialCp.content()}async setDevMode(t,e){if(e||t.length<1)throw new u(h.MISC_ERROR,"sys.devMode remove[true,false]: 设置/取消开发模式");return e=new x([t]).bool(0,!1),this.node.config.devMode=e,(t=this.node.require("walletdb"))&&(t.options.devMode=e),(t=this.node.require("contractdb"))&&(t.options.devMode=e),await this.node.config.saveAsync(),e}async addGroupPrefix(t,e){if(e||t.length<1)throw new u(h.MISC_ERROR,'sys.groupPrefix "[[prefix, cid]]" remove[true,false]: 添加/删除前缀成员');t=(e=new x([t])).array(0);var i,r=e.bool(1,!1);for(i of t)r?(this.node.acl.delGroupPrefix(i[0],i[1]),await this.logAudit({address:this.node.config.coinbaseAddress||"",oper:"usermanager",hash:"unforbid/"+i[1],index:0})):(this.node.acl.addGroupPrefix(i[0],i[1]),await this.logAudit({address:this.node.config.coinbaseAddress||"",oper:"usermanager",hash:"forbid/"+i[1],index:0}));return await this.node.config.saveAsync(),!0}async logAudit(t){var e=this.node.require("walletdb");e&&await e.logAudit(t)}async addGroupSuffix(t,e){if(e||t.length<1)throw new u(h.MISC_ERROR,'sys.groupSuffix "[[suffix, cid]]" remove[true,false]: 添加/删除后缀成员');t=(e=new x([t])).array(0);var i,r=e.bool(1,!1);for(i of t)r?this.node.acl.delGroupSuffix(i[0],i[1]):this.node.acl.addGroupSuffix(i[0],i[1]);return await this.node.config.saveAsync(),!0}async heapDump(t,e){return this.node.config.heapDump(),!0}async getInfo(t,e){if(e||0!==t.length)throw new u(h.MISC_ERROR,"sys.info");e=this.mempool?this.mempool.map.size:0,t=this.mempool?this.mempool.getSize():0;let i=this.pool.hosts.getLocal();return i=i||this.pool.hosts.address,{version:l.version,testnet:"main"!=this.network.type,paytxfee:y.btc(this.network.feeRate,!0),relayfee:y.btc(this.network.minRelay,!0),network:this.network.type,chain:{height:this.chain.height,tip:this.chain.tip.rhash(),progress:this.chain.getProgress(),difficulty:w.bits2Diff(this.chain.tip.bits)},mempool:{tx:e,size:t},time:{uptime:this.node.uptime(),system:S.now(),adjusted:this.network.now(),offset:this.network.time.offset},memory:S.memoryUsage(),pool:{host:i.host,port:i.port,agent:this.pool.options.agent,protocolversion:this.pool.options.version,services:this.pool.options.services.toString(2),outbound:this.pool.peers.outbound,inbound:this.pool.peers.inbound,connections:this.pool.peers.size()},walletversion:0,balance:0,proxy:"",keypoololdest:0,keypoolsize:0,unlocked_until:0,errors:""}}async help(t){if(0===t.length)throw new u(h.MISC_ERROR,"\n        miner         记账相关\n        block         区块相关\n        cp            实体管理\n        prop          道具相关\n        contract      交易对相关\n        tx            交易相关\n        sys           系统管理和状态监控\n        estimate      评估\n        mempool       交易池\n        wallet        钱包管理\n        key           密钥管理\n        account       账户管理\n        address       地址管理\n        coin          硬币管理\n        vote          投票管理\n        htlc          跨链操作\n      ");return t={method:t[0],params:[]},this.execute(t,!0)}async broadcast(t,e){if(e||1!==t.length)throw new u(h.MISC_ERROR,"tx.broadcast tx-hex: 广播交易 交易HEX字符串");return e=new x([t]).buf(0),o(e,"tx.broadcast: tx-hex is required."),t=L.fromRaw(e),await this.node.sendTX(t),!0}async authtoken(t,e,i){if(e||1!==t.length)throw new u(h.TYPE_ERROR,"sys.createAuthToken tids: 制备令牌固定量 终端编码列表(逗分字符串)");if(e=new x([t]).array(0),!Array.isArray(e))throw new u(h.TYPE_ERROR,"sys.createAuthToken tids: 制备令牌固定量 终端编码列表(逗分字符串)");var r,{aeskey:s,aesiv:n}=R.fromKey(_.ONE_HASH,this.node.keys.hmacSalt,this.network.type).getAes(i.options.cid),o=[];for(r of e){if(!("string"==typeof r&&r.length<=40))throw new u(h.TYPE_ERROR,"各终端编码必须是最大长度40字节的字符串");var a=R.getHmac(r.toString(),this.node.keys.hmacSalt).token,c=this.node.require("walletdb");c&&await c.logAudit({address:this.node.config.coinbaseAddress||"",oper:"usermanager",hash:"create/"+r,index:0}),this.node.config.devMode?o.push({cid:r,encry:S.encrypt(s,n,a),token:a}):o.push({cid:r,encry:S.encrypt(s,n,a)})}return o}async querySCModel(t,e){return Object.keys(A.list).map(t=>A.list[t])}async querySCList(t,e){if(e)throw new u(h.MISC_ERROR,"sc.query (conditions): 查询合约 (查询条件)");e=new x([t]).array(0,[]),t=await this.chain.db.getSCList(e);var i,r=await this.node.cdb.get("primary");for(i of t.list){var s=await r.getBalance(i.options.addr);i.options.confirmed=s.toJSON().confirmed}return t}async scBalance(t,e){if(e)throw new u(h.MISC_ERROR,"sc.balance address: 查询合约库地址余额 指定地址");return e=new x([t]).str(0,""),(await(await this.node.cdb.get("primary")).getBalance(e)).toJSON()}async cpByClass(t,e){if(e||t.length<1||3<t.length)throw new u(h.MISC_ERROR,"cp.byClass cls: 查询CP编码集合 游戏类别 页码 页宽");t=(e=new x([t])).str(0,"");var i=e.uint(1,1),r=(e=e.uint(2,10),[]);return r.push(["size",e]),r.push(["page",i]),r.push(["cls",t]),this.chain.db.cpList.query(r)}async cpById(t,e){if(e||t.length<1)throw new u(h.MISC_ERROR,'cp.byId "clientNo": 根据编码查询厂商记录');return(e=new x([t]).str(0))?this.chain.db.cpList.getRecord(e):null}async cpByName(t,e){if(e||t.length<1)throw new u(h.MISC_ERROR,'cp.byName "name": 根据名称查询厂商记录');return(e=new x([t]).str(0))?this.chain.db.cpList.getItemByName(decodeURIComponent(e)):null}async resetBlock(t,e){if(e||1!==t.length)throw new u(h.MISC_ERROR,"block.reset.admin [hash | height]: 重置区块头 [区块哈希 | 区块高度]");let i=new x([t]).str(0);if(o(i,"Height is required."),1==this.node.config.mining)throw new u(h.MISC_ERROR,'Use "miner.set.admin false" stop miner first!');if(this.generating||this.node.miner&&this.node.miner.cpu.running)throw new u(h.MISC_ERROR,"Miner is running, stop it first!");return 64!==i.length&&(i=parseInt(i,10)),await this.chain.reset(i),this.logger.info("Chain has been reset: %s.",i),!0}async rollbackBlock(t,e){if(e||1!==t.length)throw new u(h.MISC_ERROR,"block.rollback.admin [hash | height]: 回滚区块 [区块哈希| 区块高度]");if(e=new x([t]).str(0),o(e,"Height is required."),1==this.node.config.mining)throw new u(h.MISC_ERROR,'Use "miner.set.admin false" stop miner first!');if(this.generating||this.node.miner&&this.node.miner.cpu.running)throw new u(h.MISC_ERROR,"Miner is running, stop it first!");let i=null;if(i=64!==e.length?await this.chain.getEntry(parseInt(e,10)):await this.chain.getEntry(S.revHex(e)))return await this.chain.reorganize(i),this.logger.info("Chain has been reorganize: %s.",e),!0;throw new u(h.MISC_ERROR,"Block not found.")}async stop(t,e){if(e||0!==t.length)throw new u(h.MISC_ERROR,"sys.stop.admin");return this.node.close().catch(t=>{r(()=>{throw t})}).finally(async()=>{await new Promise(t=>{setTimeout(t,1e4)}),s.exit(0)}),"Stopping."}async getNetworkInfo(t,e){if(e||0!==t.length)throw new u(h.MISC_ERROR,"sys.networkinfo");var i=[];for(const t of this.pool.hosts.local.values())i.push({address:t.addr.host,port:t.addr.port,score:t.score});return{version:l.version,subversion:this.pool.options.agent,protocolversion:this.pool.options.version,localservices:S.hex32(this.pool.options.services),localrelay:!this.pool.options.noRelay,timeoffset:this.network.time.offset,networkactive:this.pool.connected,connections:this.pool.peers.size(),networks:[],relayfee:y.btc(this.network.minRelay,!0),incrementalfee:0,localaddresses:i,warnings:""}}async addNode(t,e){if(e||2!==t.length)throw new u(h.MISC_ERROR,'sys.addnode "node" "add|remove|onetry"');var i=(t=new x([t])).str(0,"");switch(t.str(1,"")){case"add":if(-1!=this.node.config.nodes.indexOf(i))break;this.node.config.nodes.push(i),await this.node.config.saveAsync(),this.pool.hosts.addNode(i);case"onetry":var r=a.parseNetAddress(i,this.network);this.pool.peers.get(r.hostname)||(r=this.pool.createOutbound(r),this.pool.peers.add(r));break;case"remove":-1!=(r=this.node.config.nodes.indexOf(i))&&(this.node.config.nodes.splice(r,1),await this.node.config.saveAsync()),this.pool.hosts.removeNode(i)}return this.getAddedNodeInfo([],e)}async disconnectNode(t,e){if(e||1!==t.length)throw new u(h.MISC_ERROR,'sys.disconnectnode "node"');return e=new x([t]).str(0,""),t=a.parseIP(e,this.network),(e=this.pool.peers.get(t.hostname))&&e.destroy(),null}async getAddedNodeInfo(t,e){if(e||1<t.length)throw new u(h.MISC_ERROR,'sys.addednodeinfo ( "node" )');e=this.pool.hosts;var i=new x([t]).str(0,"");let r;1===t.length&&(r=a.parseIP(i,this.network));var s=[];for(const t of e.nodes){if(r){if(t.host!==r.host)continue;if(t.port!==r.port)continue}var n=this.pool.peers.get(t.hostname);n&&n.connected?s.push({addednode:t.hostname,connected:n.connected,addresses:[{address:n.hostname(),connected:n.outbound?"outbound":"inbound"}]}):s.push({addednode:t.hostname,connected:!1,addresses:[]})}if(r&&0===s.length)throw new u(h.CLIENT_NODE_NOT_ADDED,"Node has not been added.");return s}async getConnectionCount(t,e){if(e||0!==t.length)throw new u(h.MISC_ERROR,"sys.connectioncount");return this.pool.peers.size()}async getNetTotals(t,e){if(e||0<t.length)throw new u(h.MISC_ERROR,"sys.nettotals");let i=0,r=0;for(let t=this.pool.peers.head();t;t=t.next)i+=t.socket.bytesWritten,r+=t.socket.bytesRead;return{totalbytesrecv:r,totalbytessent:i,timemillis:S.ms()}}async getPeerInfo(t,e){if(e)throw new u(h.MISC_ERROR,"sys.peerinfo onlyOutbound");var i=new x([t]).bool(0,!1),r=[];for(let t=this.pool.peers.head();t;t=t.next)if(!i||t.outbound){let e=this.network.time.known.get(t.hostname());var s=[];null==e&&(e=0);for(const e in t.blockMap.keys()){var n=S.revHex(e);s.push(n)}r.push({id:t.id,addr:t.hostname(),addrlocal:t.local.isNull()?void 0:t.local.hostname,services:S.hex32(t.services),relaytxes:!t.noRelay,lastsend:t.lastSend/1e3|0,lastrecv:t.lastRecv/1e3|0,bytessent:t.socket.bytesWritten,bytesrecv:t.socket.bytesRead,conntime:0!==t.time?(S.ms()-t.time)/1e3|0:0,timeoffset:e,pingtime:-1!==t.lastPong?(t.lastPong-t.lastPing)/1e3:-1,minping:-1!==t.minPing?t.minPing/1e3:-1,version:t.version,subver:t.agent,inbound:!t.outbound,startingheight:t.height,besthash:null,bestheight:0,banscore:t.banScore,inflight:s,whitelisted:!1})}return r}async ping(t,e){if(e||0!==t.length)throw new u(h.MISC_ERROR,"sys.ping");for(let t=this.pool.peers.head();t;t=t.next)t.sendPing();return null}async setBan(t,e){var i=(r=new x([t])).str(0,""),r=r.str(1,"");if(e||t.length<2||"add"!==r&&"remove"!==r)throw new u(h.MISC_ERROR,'sys.setban "ip(/netmask)" "add|remove" (bantime) (absolute)');var s=a.parseNetAddress(i,this.network);switch(r){case"add":this.pool.ban(s);break;case"remove":this.pool.unban(s)}return null}async listBanned(t,e){if(e||0!==t.length)throw new u(h.MISC_ERROR,"sys.listbanned");var i,r,s=[];for([i,r]of this.pool.hosts.banned)s.push({address:i,banned_until:r+this.pool.options.banTime,ban_created:r,ban_reason:""});return s}async clearBanned(t,e){if(e||0!==t.length)throw new u(h.MISC_ERROR,"sys.clearbanned");return this.pool.hosts.clearBanned(),null}async getBlockchainInfo(t,e){if(e||0!==t.length)throw new u(h.MISC_ERROR,"sys.blockinfo");return{chain:"testnet"!==this.network.type?this.network.type:"test",blocks:this.chain.height,headers:this.chain.height,orphan:this.chain.orphanMap.size,bestblockhash:this.chain.tip.rhash(),difficulty:w.bits2Diff(this.chain.tip.bits),mediantime:await this.chain.getMedianTime(this.chain.tip),verificationprogress:this.chain.getProgress(),chainwork:this.chain.tip.chainwork.toString("hex",64),pruned:this.chain.options.prune,softforks:this.getSoftforks(),bip9_softforks:await this.getBIP9Softforks(),pruneheight:this.chain.options.prune?Math.max(0,this.chain.height-this.network.block.keepBlocks):null}}async getBestBlockHash(t,e){if(e||0!==t.length)throw new u(h.MISC_ERROR,"block.best: 获取当前主链顶部区块哈希(小端)");return this.chain.tip.rhash()}async getBlockCount(t,e){if(e||0!==t.length)throw new u(h.MISC_ERROR,"block.count: 获取当前主链区块数量");return this.chain.tip.height}async getBlock(t,e){if(e||t.length<1||3<t.length)throw new u(h.MISC_ERROR,"block.info hash ( bool-verbose bool-details ): 查询区块内容 小端哈希 (展开为对象 更多细节)");t=(e=new x([t])).hash(0);var i=e.bool(1,!0);e=e.bool(2,!1);if(!t)throw new u(h.TYPE_ERROR,"Invalid block hash.");if(!(t=await this.chain.getEntry(t)))throw new u(h.MISC_ERROR,"Block not found");var r=await this.chain.getBlock(t.hash);if(r)return i?this.blockToJSON(t,r,e):r.toRaw().toString("hex");if(this.chain.options.spv)throw new u(h.MISC_ERROR,"Block not available (spv mode)");if(this.chain.options.prune)throw new u(h.MISC_ERROR,"Block not available (pruned data)");throw new u(h.MISC_ERROR,"Can't read block from disk")}async getBlockByHeight(t,e){if(e||t.length<1||3<t.length)throw new u(h.MISC_ERROR,'block.info.byheight "height" ( bool-verbose bool-details ): 根据高度查询区块 高度 (展开为对象 更多细节)');t=(e=new x([t])).u32(0,-1);var i=e.bool(1,!0);e=e.bool(2,!1);if(-1===t)throw new u(h.TYPE_ERROR,"Invalid block height.");if(!(t=await this.chain.getEntry(t)))throw new u(h.MISC_ERROR,"Block not found");var r=await this.chain.getBlock(t.hash);if(r)return i?this.blockToJSON(t,r,e):r.toRaw().toString("hex");if(this.chain.options.spv)throw new u(h.MISC_ERROR,"Block not available (spv mode)");if(this.chain.options.prune)throw new u(h.MISC_ERROR,"Block not available (pruned data)");throw new u(h.DATABASE_ERROR,"Can't read block from disk")}async getBlockHash(t,e){if(e||1!==t.length)throw new u(h.MISC_ERROR,"block.hash height: 根据高度查询区块哈希(小端)");if(null==(e=new x([t]).u32(0))||e>this.chain.height)throw new u(h.INVALID_PARAMETER,"Block height out of range.");if(t=await this.chain.getHash(e))return S.revHex(t);throw new u(h.MISC_ERROR,"Not found.")}async getCoinByOutpoint(t,e){if(e||2!=t.length)throw new u(h.MISC_ERROR,"tx.coins.byoutpoint txid index: 查询硬币列表 交易ID 交易内索引");return t=(e=new x([t])).hash(0),e=e.u32(1),o(t,"Hash is required."),o(null!=e,"Index is required."),o(!this.chain.options.spv,"Cannot get coins in SPV mode."),(t=await this.node.getCoin(t,e))?t.getJSON(this.network):null}async getSpender(t,e,i){var r=(t=new x([t])).hash(0);t=t.u32(1);return(r=(o(r,"Hash is required."),o(null!=t,"Index is required."),await this.chain.db.getSpender(r,t)))&&(r.txid=S.revHex(r.txid)),r}async getCoins(t,e){if(e||1!=t.length)throw new u(h.MISC_ERROR,"tx.coins addr: 查询硬币列表 地址");e=new x([t]).str(0,""),o(e,"Address is required."),o(!this.chain.options.spv,"Cannot get coins in SPV mode."),t=await this.node.getCoinsByAddress(e.split(","));var i=[];for(const e of t)i.push(e.getJSON(this.network));return i}async getCoinCache(t,e){return this.chain.db.coinCache.size}async getBlockHeader(t,e){if(e||t.length<1||2<t.length)throw new u(h.MISC_ERROR,'block.header "hash" ( verbose ): 查询区块头 哈希(小端) (展开为对象)');if(t=(e=new x([t])).hash(0),e=e.bool(1,!0),!t)throw new u(h.MISC_ERROR,"Invalid block hash.");if(t=await this.chain.getEntry(t))return e?this.headerToJSON(t):t.toRaw().toString("hex",0,80);throw new u(h.MISC_ERROR,"Block not found")}async getChainTips(t,e){if(e||0!==t.length)throw new u(h.MISC_ERROR,"block.tips: 列表所有分叉的头部信息");var i=[];for(const t of await this.chain.getTips()){var r=await this.chain.getEntry(t),s=(o(r),await this.findFork(r)),n=await this.chain.isMainChain(r);i.push({height:r.height,hash:r.rhash(),branchlen:r.height-s.height,status:n?"active":"valid-headers"})}return i}async getDifficulty(t,e){if(e||0!==t.length)throw new u(h.MISC_ERROR,"miner.difficulty: 查看当前挖矿难度");return w.bits2Diff(this.chain.tip.bits)}async resetMempool(t,e){if(e||0!==t.length)throw new u(h.MISC_ERROR,"mempool.reset");if(this.mempool)return this.mempool.reset();throw new u(h.MISC_ERROR,"No mempool available.")}async getMempoolInfo(t,e){if(e||0!==t.length)throw new u(h.MISC_ERROR,"sys.mempoolinfo");if(this.mempool)return{waiting:this.mempool.waiting.keys().length,orphans:this.mempool.orphans.size,size:this.mempool.map.size,bytes:this.mempool.getSize(),usage:this.mempool.getSize(),maxmempool:this.mempool.options.maxSize,mempoolminfee:y.btc(this.mempool.options.minRelay,!0)};throw new u(h.MISC_ERROR,"No mempool available.")}async getMempoolOrphans(t,e){if(!this.mempool)throw new u(h.MISC_ERROR,"No mempool available.");let i=[];return this.mempool.orphans.forEach((t,e)=>{i.push(S.revHex(e))}),i}async getMempoolAncestors(t,e){if(e||t.length<1||2<t.length)throw new u(h.MISC_ERROR,"mempool.ancestors txid (bool-verbose): 向前搠源 交易哈希小端 [展开为对象]");if(t=(e=new x([t])).hash(0),e=e.bool(1,!1),!this.mempool)throw new u(h.MISC_ERROR,"No mempool available.");if(!t)throw new u(h.TYPE_ERROR,"Invalid TXID.");const i=this.mempool.getEntry(t);if(!i)throw new u(h.MISC_ERROR,"Transaction not in mempool.");t=this.mempool.getAncestors(i);var r=[];if(e)for(const e of t)r.push(this.entryToJSON(e));else for(const e of t)r.push(e.txid());return r}async getMempoolDescendants(t,e){if(e||t.length<1||2<t.length)throw new u(h.MISC_ERROR,"mempool.descendants txid (bool-verbose): 向后搠源 交易哈希小端 [展开为对象]");if(t=(e=new x([t])).hash(0),e=e.bool(1,!1),!this.mempool)throw new u(h.MISC_ERROR,"No mempool available.");if(!t)throw new u(h.TYPE_ERROR,"Invalid TXID.");const i=this.mempool.getEntry(t);if(!i)throw new u(h.MISC_ERROR,"Transaction not in mempool.");t=this.mempool.getDescendants(i);var r=[];if(e)for(const e of t)r.push(this.entryToJSON(e));else for(const e of t)r.push(e.txid());return r}async getMempoolEntry(t,e){if(e||1!==t.length)throw new u(h.MISC_ERROR,"mempool.entry txid: 查询交易记录");if(e=new x([t]).hash(0),!this.mempool)throw new u(h.MISC_ERROR,"No mempool available.");if(!e)throw new u(h.TYPE_ERROR,"Invalid TXID.");if(t=this.mempool.getEntry(e))return this.entryToJSON(t);throw new u(h.MISC_ERROR,"Transaction not in mempool.")}async getMempool(t,e){if(e||0<t.length)throw new u(h.MISC_ERROR,"mempool.snap: 查询交易池原始记录");o(this.mempool,"No mempool available.");var i=[];for(const t of this.mempool.getSnapshot())i.push(S.revHex(t));return i}async getRawMempool(t,e){if(e||1<t.length)throw new u(h.MISC_ERROR,"mempool.raw ( bool-verbose ): 查询交易池原始记录 [展开为对象]");if(e=new x([t]).bool(0,!1),!this.mempool)throw new u(h.MISC_ERROR,"No mempool available.");if(e){var i={};for(const t of this.mempool.map.values())i[t.txid()]=this.entryToJSON(t);return i}return this.mempool.getSnapshot().map(S.revHex)}async getTXOut(t,e){if(e||t.length<2||3<t.length)throw new u(h.MISC_ERROR,'tx.utxo "txid" n ( includemempool )');t=(e=new x([t])).hash(0);var i=e.u32(1);e=e.bool(2,!0);if(this.chain.options.spv)throw new u(h.MISC_ERROR,"Cannot get coins in SPV mode.");if(this.chain.options.prune)throw new u(h.MISC_ERROR,"Cannot get coins when pruned.");if(!t||null==i)throw new u(h.TYPE_ERROR,"Invalid outpoint.");let r;if(e){if(!this.mempool)throw new u(h.MISC_ERROR,"No mempool available.");r=this.mempool.getCoin(t,i)}return(r=r||await this.chain.getCoin(t,i))?{bestblock:this.chain.tip.rhash(),confirmations:r.getDepth(this.chain.height),value:y.btc(r.value,!0),scriptPubKey:this.scriptToJSON(r.script,!0),version:r.version,coinbase:r.coinbase}:null}async getTXOutProof(t,e){if(e||1!==t.length&&2!==t.length)throw new u(h.MISC_ERROR,'tx.txo.proof ["txid",...] ( blockhash )');var i=(e=new x([t])).array(0);const r=e.hash(1);if(this.chain.options.spv)throw new u(h.MISC_ERROR,"Cannot get coins in SPV mode.");if(this.chain.options.prune)throw new u(h.MISC_ERROR,"Cannot get coins when pruned.");if(!i||0===i.length)throw new u(h.INVALID_PARAMETER,"Invalid TXIDs.");var s=new x([i]),n=new Set,o=[];let a=null;for(let t=0;t<i.length;t++){const e=s.hash(t);if(!e)throw new u(h.TYPE_ERROR,"Invalid TXID.");if(n.has(e))throw new u(h.INVALID_PARAMETER,"Duplicate txid.");n.add(e),o.push(e),a=e}let c=null;if(r?c=await this.chain.getBlock(r):this.chain.options.indexTX?(t=await this.chain.getMeta(a))&&(c=await this.chain.getBlock(t.block)):(e=await this.chain.getCoin(a,0))&&(c=await this.chain.getBlock(e.height)),!c)throw new u(h.MISC_ERROR,"Block not found.");for(const t of o)if(!c.hasTX(t))throw new u(h.VERIFY_ERROR,"Block does not contain all txids.");return(c=T.fromHashes(c,o)).toRaw().toString("hex")}async verifyTXOutProof(t,e){if(e||1!==t.length)throw new u(h.MISC_ERROR,'tx.txo.verifyproof "proof"');if(!(e=new x([t]).buf(0)))throw new u(h.TYPE_ERROR,"Invalid hex string.");if(!(t=T.fromRaw(e)).verify())return[];if(!await this.chain.getEntry(t.hash("hex")))throw new u(h.MISC_ERROR,"Block not found in chain.");var i=[];for(const e of t.getTree().matches)i.push(S.revHex(e.toString("hex")));return i}async getTXOutSetInfo(t,e){if(e||0!==t.length)throw new u(h.MISC_ERROR,"sys.txoinfo");if(this.chain.options.spv)throw new u(h.MISC_ERROR,"Chainstate not available (SPV mode).");return{height:this.chain.height,bestblock:this.chain.tip.rhash(),transactions:this.chain.db.state.tx,txouts:this.chain.db.state.coin,bytes_serialized:0,hash_serialized:0,total_amount:y.btc(this.chain.db.state.value,!0)}}async pruneBlockchain(t,e){if(e||0!==t.length)throw new u(h.MISC_ERROR,"sys.prune: 修剪块链数据");if(this.chain.options.spv)throw new u(h.MISC_ERROR,"Cannot prune chain in SPV mode.");if(this.chain.options.prune)throw new u(h.MISC_ERROR,"Chain is already pruned.");if(this.chain.height<this.network.block.pruneAfterHeight)throw new u(h.MISC_ERROR,"Chain is too short for pruning.");try{await this.chain.prune()}catch(t){throw new u(h.DATABASE_ERROR,t.message)}}async submitWork(t){var e=await this.locker.lock();try{return await this._submitWork(t)}finally{e()}}async _submitWork(t){var e=this.attempt;if(!e)return!1;if(128!==t.length)throw new u(h.INVALID_PARAMETER,"Invalid work size.");if(U(t=t.slice(0,80)),(t=I.fromHead(t)).prevBlock!==e.prevBlock||t.bits!==e.bits)return!1;if(!t.verify())return!1;if(!(i=this.merkleMap.get(t.merkleRoot)))return!1;var i,[i,r]=i,s=t.nonce;t=t.time;if(!(i=e.getProof(i,r,t,s)).verify(e.target))return!1;let n;r=e.commit(i);try{n=await this.chain.add(r)}catch(t){if("VerifyError"===t.type)return this.logger.warning("RPC block rejected: %s (%s).",r.rhash(),t.reason),!1;throw t}return!!n||(this.logger.warning("RPC block rejected: %s (bad-prevblk).",r.rhash()),!1)}async createWork(t){var e=await this.locker.lock();try{return await this._createWork(t)}finally{e()}}async _createWork(){var t=await this.updateWork(),i=this.nonce1,r=this.nonce2,s=t.time,n=e.allocUnsafe(128);n.fill(0),i=t.getRoot(i,r);return t.getHeader(i,s,0).copy(n,0),n[80]=128,n.writeUInt32BE(640,n.length-4,!0),U(n),{data:n.toString("hex"),target:t.target.toString("hex"),height:t.height}}async getWorkLongpoll(t,e){if(e||0!=t.length)throw new u(h.MISC_ERROR,"sys.worklp");return await this.longpoll(),this.createWork()}async getWork(t,e){if(e||1<t.length)throw new u(h.MISC_ERROR,'sys.work ( "data" )');if(1!==t.length)return this.createWork();if(e=new x([t]).buf(0))return this.submitWork(e);throw new u(h.TYPE_ERROR,"Invalid work data.")}async submitBlock(t,e){if(e||t.length<1||2<t.length)throw new u(h.MISC_ERROR,'block.submit.admin "hexdata" ( "jsonparametersobject" ): 提交区块数据 区块数据HEX串');return e=new x([t]).buf(0),t=O.fromRaw(e),this.addBlock(t)}async getBlockTemplate(t,e){if(e||1<t.length)throw new u(h.MISC_ERROR,"block.template.admin ( \"{'mode':'template | proposal', 'data': '{hex}', 'rules':['segwit']}\" ): 生成或校验区块数据模板");if(e=new x([t]).obj(0,{}),"template"!==(e=(t=new x([e])).str("mode","template"))&&"proposal"!==e)throw new u(h.INVALID_PARAMETER,"Invalid mode.");if("proposal"===e){if(!(e=t.buf("data")))throw new u(h.TYPE_ERROR,"Missing data parameter.");if((e=O.fromRaw(e)).prevBlock!==this.chain.tip.hash)return"inconclusive-not-best-prevblk";try{await this.chain.verifyBlock(e)}catch(t){if("VerifyError"===t.type)return t.reason;throw t}return null}let i=t.u32("maxversion",-1),r=t.array("rules");r&&(i=-1);let s=!1;if(e=t.array("capabilities")){let t=!1,i=!1;for(const r of e){if("string"!=typeof r)throw new u(h.TYPE_ERROR,"Invalid capability.");switch(r){case"coinbasetxn":t=!0;break;case"coinbasevalue":i=!0}}if(i=!0,t&&!i){if(0===this.miner.addresses.length)throw new u(h.MISC_ERROR,"No addresses available for coinbase.");s=!0}}return(e=t.str("longpollid"))&&await this.handleLongpoll(e),r=r||[],this.createTemplate(i,s,r)}async createTemplate(t,e,i){var r=await this.locker.lock();try{return await this._createTemplate(t,e,i)}finally{r()}}async _createTemplate(t,e,i){var r=await this.getTemplate(),s=r.witness?1:f.WITNESS_SCALE_FACTOR,n=["time","transactions","prevblock"],a=(2<=t&&n.push("version/force"),e&&(n.push("coinbase"),n.push("coinbase/append"),n.push("generation")),new Map);for(let t=0;t<r.items.length;t++){var c=r.items[t];a.set(c.hash,t+1)}var l=[];for(let t=0;t<r.items.length;t++){var d=r.items[t],p=d.tx,g=[];for(let e=0;e<p.inputs.length;e++){var w=p.inputs[e];null!=(w=a.get(w.prevout.hash))&&-1===g.indexOf(w)&&(o(w<t+1),g.push(w))}l.push({data:p.toRaw().toString("hex"),txid:p.txid(),hash:p.wtxid(),depends:g,fee:d.fee,sigops:d.sigops/s|0,weight:p.getWeight()})}let y=r.version;var b={},v=[];for(const t of this.network.deploys){var k=await this.chain.getState(this.chain.tip,t);let e=t.name;switch(k){case m.thresholdStates.DEFINED:case m.thresholdStates.FAILED:break;case m.thresholdStates.LOCKED_IN:y|=1<<t.bit;case m.thresholdStates.STARTED:t.force||(-1===i.indexOf(e)&&(y&=~(1<<t.bit)),t.required&&(e="!"+e)),b[e]=t.bit;break;case m.thresholdStates.ACTIVE:if(!t.force&&t.required){if(-1===i.indexOf(e))throw new u(h.INVALID_PARAMETER,`Client must support ${e}.`);e="!"+e}v.push(e);break;default:o(!1,"Bad state.")}}var _;t={capabilities:["proposal"],mutable:n,version:y>>>=0,rules:v,vbavailable:b,vbrequired:0,height:r.height,previousblockhash:S.revHex(r.prevBlock),target:S.revHex(r.target.toString("hex")),bits:S.hex32(r.bits),noncerange:"00000000ffffffff",curtime:r.time,mintime:r.mtp+1,maxtime:r.time+7200,expires:r.time+7200,sigoplimit:f.MAX_BLOCK_SIGOPS_COST/s|0,sizelimit:f.MAX_BLOCK_SIZE,weightlimit:void 0,longpollid:this.chain.tip.rhash()+S.pad32(this.totalTX()),submitold:!1,coinbaseaux:{flags:r.coinbaseFlags.toString("hex")},coinbasevalue:void 0,coinbasetxn:void 0,default_witness_commitment:void 0,transactions:l};return r.witness&&(t.sizelimit=f.MAX_RAW_BLOCK_SIZE,t.weightlimit=f.MAX_BLOCK_WEIGHT),e?((e=(n=r.toCoinbase()).inputs[0]).script.pop(),e.script.compile(),r.witness&&(_=n.outputs.pop(),o(_.script.isCommitment()),e.witness.clear()),n.refresh(),t.coinbasetxn={data:n.toRaw().toString("hex"),txid:n.txid(),hash:n.wtxid(),depends:[],fee:0,sigops:n.getSigopsCost()/s|0,weight:n.getWeight()}):t.coinbasevalue=r.getReward(),-1!==i.indexOf("segwit")&&(t.default_witness_commitment=r.getWitnessScript().toJSON()),t}async getMiningInfo(t,e){if(e||0!==t.length)throw new u(h.MISC_ERROR,"sys.mininginfo");let i=0,r=0,s=0,n=0;if(e=this.attempt){r=e.weight,s=e.items.length+1,n=e.getDifficulty(),i=1e3;for(const t of e.items)i+=t.tx.getBaseSize()}return{blocks:this.chain.height,currentblocksize:i,currentblockweight:r,currentblocktx:s,difficulty:n,errors:"",genproclimit:this.procLimit,networkhashps:await this.getHashRate(120),pooledtx:this.totalTX(),testnet:"main"!=this.network.type,chain:"testnet"!==this.network.type?this.network.type:"test",generate:this.node.config.mining}}async getNetworkHashPS(t,e){if(e||2<t.length)throw new u(h.MISC_ERROR,"getnetworkhashps ( blocks height )");return t=(e=new x([t])).u32(0,120),e=e.u32(1),this.getHashRate(t,e)}async prioritiseTransaction(t,e){if(e||3!==t.length)throw new u(h.MISC_ERROR,"tx.prioritise <txid> <priority delta> <fee delta>");t=(e=new x([t])).hash(0);var i=e.i64(1);e=e.i64(2);if(!this.mempool)throw new u(h.MISC_ERROR,"No mempool available.");if(!t)throw new u(h.TYPE_ERROR,"Invalid TXID");if(null==i||null==e)throw new u(h.TYPE_ERROR,"Invalid fee or priority.");if(t=this.mempool.getEntry(t))return this.mempool.prioritise(t,i,e),!0;throw new u(h.MISC_ERROR,"Transaction not in mempool.")}async verifyBlock(t,e){if(e||1!==t.length)throw new u(h.MISC_ERROR,'block.verify "hexdata": 校验区块数据 区块数据HEX串');if(!(e=new x([t]).buf(0)))throw new u(h.TYPE_ERROR,"Invalid block hex.");if(this.chain.options.spv)throw new u(h.MISC_ERROR,"Cannot verify block in SPV mode.");t=O.fromRaw(e);try{await this.chain.verifyBlock(t)}catch(t){if("VerifyError"===t.type)return t.reason;throw t}return null}async getGenerate(t,e){if(e||0!==t.length)throw new u(h.MISC_ERROR,"miner.check: 检查矿机运行状态");return{mode:this.node.config.mining}}async setSync(t,e){this.chain.synced=!0,this.chain.emit("chain.full")}async getMinerAddr(t,e){if(e)throw new u(h.MISC_ERROR,"miner.getaddr.admin: 查询矿机奖励地址");return{address:this.node.config.coinbaseAddress}}async addMinerAddr(t,e){if(e)throw new u(h.MISC_ERROR,"miner.addaddr.admin address: 添加矿机奖励地址");(e=new x([t]).str(0,""))&&(this.miner.addresses.unshift(e),this.node.config.coinbaseAddress=this.miner.addresses.reduce((t,e)=>t+(t?","+e:e),""),await this.node.config.saveAsync())}async setMinerAddr(t,e){if(e)throw new u(h.MISC_ERROR,"miner.setaddr.admin addresses: 设置矿机奖励地址");let i=new x([t]).array(0,"");if(!i||0==i.length){if((e=await this.execute({method:"address.index",params:[1]})).error)throw new u(h.MISC_ERROR,"获取默认矿机奖励地址出错");i=[e.result]}this.miner.addresses=i.reduce((t,e)=>(t.push(new M(e)),t),[]),this.node.config.coinbaseAddress=i.reduce((t,e)=>t+(t?","+e:e),""),await this.node.config.saveAsync()}async setGenerate(t,e){if(e||t.length<1||2<t.length)throw new u(h.MISC_ERROR,"miner.set.admin mine ( proclimit ): 设置矿机运行状态 [true|false] (进程数限制)");if(t=(e=new x([t])).bool(0,!1),e=e.u32(1,0),t&&0===this.miner.addresses.length)throw new u(h.MISC_ERROR,"No addresses available for coinbase.");return this.node.config.mining!=t&&(this.node.config.mining=t,this.node.config.saveAsync(),this.procLimit=e,t?this.miner.cpu.start():this.miner.cpu.stop()),{mode:this.node.config.mining}}async generate(t,e){if(this.node.spv)throw new u(h.INVALID_REQUEST,"spv node can not generate new block");if(this.node.config.mining)throw new u(h.INVALID_REQUEST,"Miner is auto-running.");if(e||t.length<1||2<t.length)throw new u(h.MISC_ERROR,"miner.generate.admin numblocks ( passphrase tip ): 生产区块 生产数量 ( 解锁密码 区块头 )");t=(e=new x([t])).u32(0,1);var i=e.str(1);e=e.hash(2);if(0===this.miner.addresses.length)throw new u(h.MISC_ERROR,"No addresses available for coinbase.");return this.mineBlocks(t,null,i,e)}async generateToAddress(t,e){if(this.node.spv)throw new u(h.INVALID_REQUEST,"spv node can not generate new block");if(this.node.config.mining)throw new u(h.INVALID_REQUEST,"Miner is auto-running.");if(e||2!==t.length)throw new u(h.MISC_ERROR,"miner.generateto.admin numblocks address: 生产区块并发奖至 生产数量 奖励地址 ( 解锁密码 区块头 )");t=(e=new x([t])).u32(0,1);var i=e.str(1,""),r=e.str(2);e=e.str(3),i=a.parseAddress(i,this.network);return this.mineBlocks(t,i,r,e)}async createRawTransaction(t,e){if(e||t.length<2||3<t.length)throw new u(h.MISC_ERROR,'tx.raw.create [{"txid":"id","vout":n},...] {"address":amount,"data":"hex",...} ( locktime ): 创建交易，返回交易原始数据');const i=new x([t]);e=i.array(0),t=i.obj(1);var r=i.u32(2);if(!e||!t)throw new u(h.TYPE_ERROR,"Invalid parameters (inputs and sendTo).");var s=new P;null!=r&&(s.locktime=r);for(const t of e){const e=new x([t]);var n=e.hash("txid"),o=e.u32("vout");let i=e.u32("sequence",4294967295);if(s.locktime&&i--,!n||null==o)throw new u(h.TYPE_ERROR,"Invalid outpoint.");var c=new C;c.prevout.hash=n,c.prevout.index=o,c.sequence=i,s.inputs.push(c)}var l=new x([t]),f=new Set;for(const e of Object.keys(t))if("data"===e){var d=l.buf(e);if(!d)throw new u(h.TYPE_ERROR,"Invalid nulldata..");var p=new N;p.value=0,p.script.createScript(d,b.types.NULLDATA),s.outputs.push(p)}else{if(p=(d=a.parseAddress(e,this.network)).toString(this.network),f.has(p))throw new u(h.INVALID_PARAMETER,"Duplicate address");f.add(p);var g=l.ufixed(e,8);if(null==g)throw new u(h.TYPE_ERROR,"Invalid output value.");var m=new N;m.value=g,m.script.fromAddress(d),s.outputs.push(m)}return s.toRaw().toString("hex")}async decodeRawTransaction(t,e){if(e||1!==t.length)throw new u(h.MISC_ERROR,'tx.raw.decode "hexstring": 解码交易原始数据 交易原始数据');if(o(!this.chain.options.spv,"Cannot get TX in SPV mode."),!(e=new x([t]).buf(0)))throw new u(h.TYPE_ERROR,"Invalid hex string.");t=L.fromRaw(e);if((e=await this.node.getMeta(t.hash("hex")))&&e.block)return e=await this.chain.getEntry(e.block),this.txToJSON(t,e);throw new u(h.TYPE_ERROR,"TX Not Confirmed.")}async decodeScript(t,e){if(e||1!==t.length)throw new u(h.MISC_ERROR,'sys.decodescript "hex"');e=new x([t]).buf(0);let i=new b;return e&&(i=b.fromRaw(e)),t=M.fromScripthash(i.hash160()),(e=this.scriptToJSON(i)).p2sh=t.toString(this.network),e}async getRawTransaction(t,e){if(e||t.length<1||2<t.length)throw new u(h.MISC_ERROR,'tx.raw.get "txid" ( verbose ): 获取交易原始数据 交易哈希小端 [展开为对象]');if(o(!this.chain.options.spv,"Cannot get TX in SPV mode."),t=(e=new x([t])).hash(0),e=e.bool(1,!1),!t)throw new u(h.TYPE_ERROR,"Invalid TXID.");if(!(t=await this.node.getMeta(t)))throw new u(h.MISC_ERROR,"Transaction not found.");var i=t.tx;if(!e)return i.toRaw().toString("hex");let r;return t.block&&(r=await this.chain.getEntry(t.block)),(e=this.txToJSON(i,r)).time=t.mtime,e.hex=i.toRaw().toString("hex"),e}async getTXByHash(t,e){if(e||1!=t.length)throw new u(h.MISC_ERROR,'tx.get "txid": 查询交易记录 交易哈希小端');e=new x([t]).hash(0);return(t=(o(e,"Hash is required."),o(!this.chain.options.spv,"Cannot get TX in SPV mode."),await this.node.getMeta(e)))?(e=await this.node.getMetaView(t),t.getJSON(this.network,e,this.chain.height)):null}async sendRawTransaction(t,e){if(e||t.length<1||2<t.length)throw new u(h.MISC_ERROR,'tx.raw.send "hexstring" ( allowhighfees ): 发送交易数据返回交易ID 交易原始数据 [允许高手续费]');if(e=new x([t]).buf(0))return t=L.fromRaw(e),await this.node.relay(t),t.txid();throw new u(h.TYPE_ERROR,"Invalid hex string.")}async signRawTransaction(t,e){if(e||t.length<1||4<t.length)throw new u(h.MISC_ERROR,'tx.raw.sign.admin "hexstring" ( [{"txid":"id","vout":n,"scriptPubKey":"hex",redeemScript":"hex"},...] ["privatekey1",...] sighashtype ): 签署交易');const i=new x([t]);e=i.buf(0),t=i.array(1);var r=i.array(2),s=i.str(3);if(!e)throw new u(h.TYPE_ERROR,"Invalid hex string.");if(!this.mempool)throw new u(h.MISC_ERROR,"No mempool available.");var n=P.fromRaw(e),o=(n.view=await this.mempool.getSpentView(n),new Map),c=[];if(r){const t=new x([r]);for(let e=0;e<r.length;e++){var l=t.str(e,"");l=a.parseSecret(l,this.network);o.set(l.getPublicKey("hex"),l),c.push(l)}}if(t)for(const e of t){const t=new x([e]);var f=t.hash("txid"),d=t.u32("vout"),p=t.buf("scriptPubKey"),g=t.ufixed("amount",8),m=t.buf("redeemScript");if(!f||null==d||!p||null==g)throw new u(h.INVALID_PARAMETER,"Invalid UTXO.");f=new B(f,d);var w=b.fromRaw(p);d=N.fromScript(w,g);if(n.view.addOutput(f,d),0!==c.length&&m&&(w.isScripthash()||w.isWitnessScripthash())){if(!m)throw new u(h.INVALID_PARAMETER,"P2SH requires redeem script.");var y=b.fromRaw(m);for(const t of y.code)if(t.data){var v=o.get(t.data.toString("hex"));if(v){v.script=y,v.witness=w.isWitnessScripthash(),v.refresh();break}}}}let k=b.hashType.ALL;if(s){if((e=s.split("|")).length<1||2<e.length)throw new u(h.INVALID_PARAMETER,"Invalid sighash type.");if(null==(k=b.hashType[e[0]]))throw new u(h.INVALID_PARAMETER,"Invalid sighash type.");if(2===e.length){if("ANYONECANPAY"!==e[1])throw new u(h.INVALID_PARAMETER,"Invalid sighash type.");k|=b.hashType.ANYONECANPAY}}return await n.signAsync(c,k,this.workers),{hex:n.toRaw().toString("hex"),complete:n.isSigned()}}async createMultisig(t,e){if(e||t.length<2||2<t.length)throw new u(h.MISC_ERROR,'sys.createmultisig nrequired ["key",...]');t=(e=new x([t])).u32(0,0);var i=e.array(1,[]);e=i.length;if(t<1||e<t||16<e)throw new u(h.INVALID_PARAMETER,"Invalid m and n values.");var r=new x([i]);for(let t=0;t<i.length;t++){var s=r.buf(t);if(!s)throw new u(h.TYPE_ERROR,"Invalid key.");if(!g.publicKeyVerify(s))throw new u(h.INVALID_ADDRESS_OR_KEY,"Invalid key.");i[t]=s}if((t=b.createScript([t,e,i],b.types.MULTISIG)).getSize()>f.MAX_SCRIPT_PUSH)throw new u(h.VERIFY_ERROR,"Redeem script exceeds size limit.");return{address:M.fromScript(t).toString(this.network),redeemScript:t.toJSON()}}async createWitnessAddress(t,e){if(e||1!==t.length)throw new u(h.MISC_ERROR,'sys.createwitnessaddress "script"');if(e=new x([t]).buf(0))return t=b.fromRaw(e).forWitness(),{address:M.fromScript(t).toString(this.network),witnessScript:t.toJSON()};throw new u(h.TYPE_ERROR,"Invalid script hex.")}async validateAddress(t,e){if(e||1!==t.length)throw new u(h.MISC_ERROR,'sys.validateaddress "address"');let i;e=new x([t]).str(0,"");try{i=M.fromString(e,this.network)}catch(t){return{isvalid:!1}}return t=b.fromAddress(i),{isvalid:!0,address:i.toString(this.network),scriptPubKey:t.toJSON(),ismine:!1,iswatchonly:!1}}async verifyMessage(t,i){if(i||3!==t.length)throw new u(h.MISC_ERROR,'sys.message.verify "bitcoinaddress" "signature" "message"');t=(i=new x([t])).str(0,"");var r,s,n,o=i.buf(1,null,"base64");i=i.str(2);if(o&&i)return t=a.parseAddress(t,this.network),i=e.from(c+i,"utf8"),i=d.hash256(i),r=g.recover(i,o,0,!0),s=g.recover(i,o,1,!0),n=g.recover(i,o,2,!0),i=g.recover(i,o,3,!0),!!r&&p(d.hash160(r),t.hash)||!!s&&p(d.hash160(s),t.hash)||!!n&&p(d.hash160(n),t.hash)||!!i&&p(d.hash160(i),t.hash);throw new u(h.TYPE_ERROR,"Invalid parameters.")}async signMessageWithPrivkey(t,i){if(i||2!==t.length)throw new u(h.MISC_ERROR,'sys.message.signk "privkey" "message"');return t=(i=new x([t])).str(0,""),i=i.str(1,""),t=a.parseSecret(t,this.network),i=e.from(c+i,"utf8"),i=d.hash256(i),t.sign(i).toString("base64")}async estimateFee(t,e){if(e||1!==t.length)throw new u(h.MISC_ERROR,"estimate.fee nblocks");if(e=new x([t]).u32(0,1),this.fees)return 0===(t=this.fees.estimateFee(e,!1))?-1:y.btc(t,!0);throw new u(h.MISC_ERROR,"Fee estimation not available.")}async estimatePriority(t,e){if(e||1!==t.length)throw new u(h.MISC_ERROR,"estimate.priority nblocks");if(e=new x([t]).u32(0,1),this.fees)return this.fees.estimatePriority(e,!1);throw new u(h.MISC_ERROR,"Priority estimation not available.")}async estimateSmartFee(t,e){if(e||1!==t.length)throw new u(h.MISC_ERROR,"estimate.smartfee nblocks");if(e=new x([t]).u32(0,1),!this.fees)throw new u(h.MISC_ERROR,"Fee estimation not available.");let i=this.fees.estimateFee(e,!0);return{fee:i=0===i?-1:y.btc(i,!0),blocks:e}}async estimateSmartPriority(t,e){if(e||1!==t.length)throw new u(h.MISC_ERROR,"estimate.smartpriority nblocks");if(e=new x([t]).u32(0,1),this.fees)return{priority:this.fees.estimatePriority(e,!0),blocks:e};throw new u(h.MISC_ERROR,"Priority estimation not available.")}async invalidateBlock(t,e){if(e||1!==t.length)throw new u(h.MISC_ERROR,'block.invalidate.admin "hash": 标记区块为无效 区块哈希(小端)');if(e=new x([t]).hash(0))return await this.chain.invalidate(e),null;throw new u(h.TYPE_ERROR,"Invalid block hash.")}async reconsiderBlock(t,e){if(e||1!==t.length)throw new u(h.MISC_ERROR,'block.reconsider.admin "hash": 取消区块无效标记 区块哈希(小端)');if(e=new x([t]).hash(0))return this.chain.removeInvalid(e),null;throw new u(h.TYPE_ERROR,"Invalid block hash.")}async setMockTime(t,e){if(e||1!==t.length)throw new u(h.MISC_ERROR,"sys.setmocktime timestamp");if(null==(e=new x([t]).u32(0)))throw new u(h.TYPE_ERROR,"Invalid timestamp.");return this.network.time.offset=0,t=this.network.now()-e,this.network.time.offset=-t,null}async getMemoryInfo(t,e){if(e||0!==t.length)throw new u(h.MISC_ERROR,"sys.memoryinfo");return S.memoryUsage()}async setLogLevel(t,e){if(e||1!==t.length)throw new u(h.MISC_ERROR,'sys.setloglevel "level"');return e=new x([t]).str(0,""),this.logger.setLevel(e),null}async handleLongpoll(t){if(74!==t.length)throw new u(h.INVALID_PARAMETER,"Invalid longpoll ID.");var e=t.slice(0,64);t=parseInt(t.slice(64,74),10);if(!S.isHex(e)||!S.isU32(t))throw new u(h.INVALID_PARAMETER,"Invalid longpoll ID.");t=S.revHex(e),this.chain.tip.hash===t&&await this.longpoll()}longpoll(){return new Promise((t,e)=>{this.pollers.push(k.job(t,e))})}refreshBlock(){var t=this.pollers;this.attempt=null,this.lastActivity=0,this.merkleMap.clear(),this.nonce1=0,this.nonce2=0,this.pollers=[];for(const e of t)e.resolve()}bindChain(){this.boundChain||(this.boundChain=!0,this.node.on("block.connect",()=>{this.attempt&&this.refreshBlock()}),this.mempool&&this.node.on("tx",()=>{this.attempt&&10<S.now()-this.lastActivity&&this.refreshBlock()}))}async getTemplate(){this.bindChain();let t=this.attempt;return t?this.miner.updateTime(t):(t=await this.miner.createBlock(),this.attempt=t,this.lastActivity=S.now()),t}async updateWork(){this.bindChain();let t=this.attempt;if(t){if(t.address.isNull())throw new u(h.MISC_ERROR,"No addresses available for coinbase.");this.miner.updateTime(t),4294967296==++this.nonce2&&(this.nonce2=0,this.nonce1++);const e=this.nonce1,i=this.nonce2,r=t.getRoot(e,i).toString("hex");this.merkleMap.set(r,[e,i])}else{if(0===this.miner.addresses.length)throw new u(h.MISC_ERROR,"No addresses available for coinbase.");t=await this.miner.createBlock();const e=this.nonce1,i=this.nonce2,r=t.getRoot(e,i).toString("hex");this.attempt=t,this.lastActivity=S.now(),this.merkleMap.set(r,[e,i])}return t}async addBlock(t){var e=await this.locker.lock(),i=await this.chain.locker.lock();try{return await this._addBlock(t)}finally{i(),e()}}async _addBlock(t){this.logger.info("Handling submitted block: %s.",t.rhash());var e,i=await this.chain.getEntry(t.prevBlock);let r;i&&(await this.chain.getDeployments(t.time,i)).hasWitness()&&t.getCommitmentHash()&&(e=(i=t.txs[0]).inputs[0],i.hasWitness()||(this.logger.warning("Submitted block had no witness nonce."),this.logger.debug(i),e.witness.push(_.ZERO_HASH),e.witness.compile(),i.refresh(),t.refresh()));try{r=await this.chain._add(t)}catch(e){if("VerifyError"===e.type)return this.logger.warning("RPC block rejected: %s (%s).",t.rhash(),e.reason),"rejected: "+e.reason;throw e}return r?null:(this.logger.warning("RPC block rejected: %s (bad-prevblk).",t.rhash()),"rejected: bad-prevblk")}totalTX(){return this.mempool?this.mempool.map.size:0}getSoftforks(){return[{id:"bip66",version:3,reject:{status:this.chain.state.hasBIP66()}}]}async getBIP9Softforks(){var t=this.chain.tip,e={};for(const r of this.network.deploys){var i=await this.chain.getState(t,r);i=m.thresholdStates.getName(i);e[r.name]={status:i,bit:r.bit,startTime:r.startTime,timeout:r.timeout}}return e}async getTXByAddress(t,e){if(e||1!==t.length)throw new u(h.MISC_ERROR,"tx.list.address address: 按地址查询交易列表");e=new x([t]).str(0);var i=(o(e,"Address is required."),o(!this.chain.options.spv,"Cannot get TX in SPV mode."),[]);for(const t of await this.node.getMetaByAddress(e)){var r=await this.node.getMetaView(t);i.push(t.getJSON(this.network,r,this.chain.height))}return i}async getVpByAddress(t,e){if(e||1!==t.length)throw new u(h.MISC_ERROR,"prop.byaddress address: 按地址查询道具列表");return e=new x([t]).str(0),o(e,"Address is required."),o(!this.chain.options.spv,"Cannot get TX in SPV mode."),this.chain.db.getVpByAddress(e)}async getVpByHashIndex(t,e){if(e||2!==t.length)throw new u(h.MISC_ERROR,"prop.byHashIndex hash index: 按输出查询道具");var i,r;t=(e=new x([t])).hash(0),e=e.int(1,0);return(t=(o(t,"Hash is required."),await this.node.getMeta(t)))&&(i=t.tx.outputs[e])?((r=i.getReturnData([H.OP_PROPCREATE,H.OP_PROPEXCHANGE]))&&(r.current={hash:t.tx.rhash("hex"),index:e,address:i.getAddress().toString()}),r):null}async getVpById(t,e){if(e||1!==t.length)throw new u(h.MISC_ERROR,"prop.byid pid: 按道具编码查询道具列表");e=new x([t]).str(0);var i=[];if(t=await this.chain.db.propList.getVp(e)){e=t.current.hash,t.oper="exchange",i.push({oper:"exchange",pid:t.pid,oid:t.oid,cid:t.cid,current:{hash:S.revHex(t.current.hash),index:t.current.index,address:t.current.address},height:t.height});let o=[e,t.current.index];for(;;){var r=await this.node.getMeta(o[0]),s=r.tx;if(!s)break;if(!(s=s.outputs[o[1]]))break;var n=s.getReturnData([H.OP_PROPCREATE,H.OP_PROPEXCHANGE]);if(!n)break;if("new"==n.oper){n.current={hash:S.revHex(o[0]),index:o[1],address:s.getAddress().toString()},n.height=r.height,i.push(n);break}if(!n.prev)break;o=[n.prev.hash,n.prev.index]}}return i}async getTXByAddresses(t,e){if(e||1!==t.length)throw new u(h.MISC_ERROR,"tx.list.addresses addresses: 按地址集合查询交易列表");e=new x([t]).array(0);var i=(o(e,"Address is required."),o(!this.chain.options.spv,"Cannot get TX in SPV mode."),[]);for(const t of await this.node.getMetaByAddress(e)){var r=await this.node.getMetaView(t);i.push(t.getJSON(this.network,r,this.chain.height))}return i}async getHashRate(t,e){let i=this.chain.tip;if(!(i=null!=e?await this.chain.getEntry(e):i))return 0;o("number"==typeof t),o(0<=t),(t=0===t?i.height%this.network.pow.retargetInterval+1:t)>i.height&&(t=i.height);let r=i.time,s=r,n=i;for(let e=0;e<t;e++){if(!(n=await this.chain.getPrevious(n)))throw new u(h.DATABASE_ERROR,"Not found.");r=Math.min(n.time,r),s=Math.max(n.time,s)}var a;return 0==(e=s-r)?0:(a=i.chainwork.sub(n.chainwork),Number(a.toString())/e)}async mineBlocks(t,e,i,r){var s=await this.locker.lock();try{return await this._mineBlocks(t,e,i,r)}finally{s()}}async _mineBlocks(t,e,i,r){var s=[];for(let a=0;a<t;a++){var n=await this.miner.mineBlock(r,e,i);n=await this.chain.add(n);o(n),s.push(n.rhash())}return s}async findFork(t){for(;t;){if(await this.chain.isMainChain(t))return t;t=await this.chain.getPrevious(t)}throw new Error("Fork not found.")}txToJSON(t,e){var i;let r=0,s=null,n=0;e&&(i=e.height,r=e.time,s=e.rhash(),n=this.chain.height-i+1);var o=[];for(const e of t.inputs){var a={coinbase:void 0,txid:void 0,scriptSig:void 0,txinwitness:void 0,sequence:e.sequence};t.isCoinbase()?a.coinbase=e.script.toJSON():(a.txid=e.prevout.txid(),a.vout=e.prevout.index,a.scriptSig={asm:e.script.toASM(),hex:e.script.toJSON()}),0<e.witness.items.length&&(a.txinwitness=e.witness.items.map(t=>t.toString("hex"))),o.push(a)}var h=[];for(let e=0;e<t.outputs.length;e++){var c=t.outputs[e];h.push({value:y.btc(c.value,!0),n:e,scriptPubKey:this.scriptToJSON(c.script,!0)})}return{txid:t.txid(),hash:t.wtxid(),size:t.getSize(),vsize:t.getVirtualSize(),version:t.version,locktime:t.locktime,vin:o,vout:h,blockhash:s,confirmations:n,time:r,blocktime:r,hex:void 0}}scriptToJSON(t,e){var i=t.getType(),[e]=(i={asm:t.toASM(),hex:void 0,type:b.typesByVal[i],reqSigs:1,addresses:[],p2sh:void 0},e&&(i.hex=t.toJSON()),t.getMultisig());return(e=(-1!==e&&(i.reqSigs=e),M.fromScript(t)))&&(t=e.toString(this.network),i.addresses.push(t)),i}async headerToJSON(t){var e=await this.chain.getMedianTime(t),i=await this.chain.getNextHash(t.hash);return{hash:t.rhash(),confirmations:this.chain.height-t.height+1,height:t.height,version:t.version,versionHex:S.hex32(t.version),merkleroot:S.revHex(t.merkleRoot),time:t.time,mediantime:e,bits:t.bits,difficulty:w.bits2Diff(t.bits),chainwork:t.chainwork.toString("hex",64),previousblockhash:t.prevBlock!==_.NULL_HASH?S.revHex(t.prevBlock):null,nextblockhash:i?S.revHex(i):null}}async blockToJSON(t,e,i){var r,s=await this.chain.getMedianTime(t),n=await this.chain.getNextHash(t.hash),o=[];for(const s of e.txs)i?(r=this.txToJSON(s,t),o.push(r)):o.push(s.txid());return{hash:t.rhash(),confirmations:this.chain.height-t.height+1,strippedsize:e.getBaseSize(),size:e.getSize(),weight:e.getWeight(),height:t.height,version:t.version,versionHex:S.hex32(t.version),merkleroot:S.revHex(t.merkleRoot),coinbase:e.txs[0].inputs[0].script.toJSON(),tx:o,time:t.time,mediantime:s,bits:t.bits,nonce:e.nonce,difficulty:w.bits2Diff(t.bits),chainwork:t.chainwork.toString("hex",64),previousblockhash:t.prevBlock!==_.NULL_HASH?S.revHex(t.prevBlock):null,nextblockhash:n?S.revHex(n):null}}entryToJSON(t){return{size:t.size,fee:y.btc(t.deltaFee,!0),modifiedfee:0,time:t.time,height:t.height,startingpriority:t.priority,currentpriority:t.getPriority(this.chain.height),descendantcount:this.mempool.countDescendants(t),descendantsize:t.descSize,descendantfees:t.descFee,ancestorcount:this.mempool.countAncestors(t),ancestorsize:0,ancestorfees:0,depends:this.mempool.getDepends(t.tx).map(S.revHex)}}}}).call(this,i(0).Buffer,i(78).setImmediate,i(11))},function(t,e,i){"use strict";
/*!
 * fees.js - fee estimation for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 * Ported from:
 * https://github.com/bitcoin/bitcoin/blob/master/src/policy/fees.cpp
 */const r=i(1),s=i(3);var n=i(9);const o=i(26),a=i(2),h=i(6),c=i(4),u=i(60),l=i(639);i(139);const f=n.MAX_MONEY,d=1e9*n.MAX_MONEY;class p{constructor(t){this.logger=u.global,this.minTrackedFee=10,this.minTrackedPri=10,this.feeStats=new l("FeeRate"),this.priStats=new l("Priority"),this.feeUnlikely=0,this.feeLikely=f,this.priUnlikely=0,this.priLikely=d,this.map=new Map,this.bestHeight=0,10<=o.MIN_RELAY&&(this.minTrackedFee=o.MIN_RELAY),10<=o.FREE_THRESHOLD&&(this.minTrackedPri=o.FREE_THRESHOLD),t&&(r("object"==typeof t),this.logger=t.context("fees"),this.feeStats.logger=this.logger,this.priStats.logger=this.logger)}init(){var t=this.minTrackedFee,e=this.minTrackedPri,i=[];for(let e=t;e<=1e6;e*=1.1)i.push(e);i.push(f);var r=[];for(let t=e;t<=1e16;t*=2)r.push(t);r.push(d),this.feeStats.init(i,15,.998),this.priStats.init(r,15,.998)}reset(){this.feeUnlikely=0,this.feeLikely=f,this.priUnlikely=0,this.priLikely=d,this.map.clear(),this.bestHeight=0,this.init()}removeTX(t){var e=this.map.get(t);e?(this.feeStats.removeTX(e.blockHeight,this.bestHeight,e.bucketIndex),this.map.delete(t)):this.logger.spam("Mempool tx %s not found.",s.revHex(t))}isFeePoint(t,e){return e<this.minTrackedPri&&t>=this.minTrackedFee||e<this.priUnlikely&&t>this.feeLikely}isPriPoint(t,e){return t<this.minTrackedFee&&e>=this.minTrackedPri||t<this.feeUnlikely&&e>this.priLikely}processTX(t,e){var i,r,s=t.height,n=t.hash("hex");this.map.has(n)?this.logger.debug("Mempool tx %s already tracked.",t.txid()):s<this.bestHeight||e&&!t.dependencies&&(e=t.getFee(),i=t.getRate(),r=t.getPriority(s),this.logger.spam("Processing mempool tx %s.",t.txid()),0===e||this.isPriPoint(i,r)?((e=new g).blockHeight=s,e.bucketIndex=this.priStats.addTX(s,r),this.map.set(n,e)):this.isFeePoint(i,r)?((e=new g).blockHeight=s,e.bucketIndex=this.feeStats.addTX(s,i),this.map.set(n,e)):this.logger.spam("Not adding tx %s.",t.txid()))}processBlockTX(t,e){var i,r,s;e.dependencies||((i=t-e.height)<=0?this.logger.debug("Block tx %s had negative blocks to confirm (%d, %d).",e.txid(),t,e.height):(r=e.getFee(),s=e.getRate(),e=e.getPriority(t),0===r||this.isPriPoint(s,e)?this.priStats.record(i,e):this.isFeePoint(s,e)&&this.feeStats.record(i,s)))}processBlock(t,e,i){if(!(t<=this.bestHeight)&&(this.bestHeight=t,0!==e.length)&&i){this.logger.debug("Recalculating dynamic cutoffs."),this.feeLikely=this.feeStats.estimateMedian(2,1,.95,!0,t),-1===this.feeLikely&&(this.feeLikely=f),this.feeUnlikely=this.feeStats.estimateMedian(10,1,.5,!1,t),-1===this.feeUnlikely&&(this.feeUnlikely=0),this.priLikely=this.priStats.estimateMedian(2,.2,.95,!0,t),-1===this.priLikely&&(this.priLikely=d),this.priUnlikely=this.priStats.estimateMedian(10,.2,.5,!1,t),-1===this.priUnlikely&&(this.priUnlikely=0),this.feeStats.clearCurrent(t),this.priStats.clearCurrent(t);for(const i of e)this.processBlockTX(t,i);this.feeStats.updateAverages(),this.priStats.updateAverages(),this.logger.debug("Done updating estimates for %d confirmed entries. New mempool map size %d.",e.length,this.map.size),this.logger.debug("New fee rate: %d.",this.estimateFee())}}estimateFee(t,e){if(t=t||1,void 0!==e&&null!=e||(e=!0),r(s.isU32(t),"Target must be a number."),r(t<=this.feeStats.maxConfirms,"Too many confirmations for estimate."),!e){const e=this.feeStats.estimateMedian(t,1,.95,!0,this.bestHeight);return e<0?0:Math.floor(e)}let i=-1;for(;i<0&&t<=this.feeStats.maxConfirms;)i=this.feeStats.estimateMedian(t++,1,.95,!0,this.bestHeight);return i<0?0:Math.floor(i)}estimatePriority(t=1,e=!0){if(r(s.isU32(t),"Target must be a number."),r(t<=this.priStats.maxConfirms,"Too many confirmations for estimate."),!e){const e=this.priStats.estimateMedian(t,.2,.95,!0,this.bestHeight);return Math.floor(e)}let i=-1;for(;i<0&&t<=this.priStats.maxConfirms;)i=this.priStats.estimateMedian(t++,.2,.95,!0,this.bestHeight);return--t,i<0?0:Math.floor(i)}getSize(){var t=0;return(t+=5)+c.sizeVarlen(this.feeStats.getSize())}toRaw(){var t=this.getSize();return(t=new h(t)).writeU8(p.VERSION),t.writeU32(this.bestHeight),t.writeVarBytes(this.feeStats.toRaw()),t.render()}fromRaw(t){if((t=new a(t)).readU8()!==p.VERSION)throw new Error("Bad serialization version for estimator.");return this.bestHeight=t.readU32(),this.feeStats.fromRaw(t.readVarBytes()),this}static fromRaw(t,e){return new p(e).fromRaw(t)}inject(t){return this.bestHeight=t.bestHeight,this.feeStats=t.feeStats,this}}function g(){this.blockHeight=-1,this.bucketIndex=-1}p.VERSION=0,t.exports=p},function(t,e,i){"use strict";(function(e){
/*!
 * template.js - block template object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(3),n=i(8),o=i(133),a=i(6),h=i(13),c=i(19),u=i(58),l=i(100),f=i(25),d=i(9),p=i(4),g=i(47),m=i(16),w=i(129),y=i(575),b=i(647),v=i(648),k=e.alloc(0);var{}=i(7);i(42),t.exports=class t{constructor(t){this.prevBlock=p.NULL_HASH,this.version=1,this.height=0,this.time=0,this.bits=0,this.target=p.ZERO_HASH,this.locktime=0,this.mtp=0,this.flags=0,this.coinbaseFlags=k,this.witness=!1,this.address=new h,this.sigops=400,this.weight=4e3,this.interval=21e4,this.fees=0,this.tree=new b,this.commitment=p.ZERO_HASH,this.left=k,this.right=k,this.items=[],this.token=null,t&&this.fromOptions(t)}fromOptions(t){return r(t),null!=t.prevBlock&&(r("string"==typeof t.prevBlock),this.prevBlock=t.prevBlock),null!=t.version&&(r("number"==typeof t.version),this.version=t.version),null!=t.height&&(r("number"==typeof t.height),this.height=t.height),null!=t.time&&(r("number"==typeof t.time),this.time=t.time),null!=t.bits&&this.setBits(t.bits),null!=t.target&&this.setTarget(t.target),null!=t.locktime&&(r("number"==typeof t.locktime),this.locktime=t.locktime),null!=t.mtp&&(r("number"==typeof t.mtp),this.mtp=t.mtp),null!=t.flags&&(r("number"==typeof t.flags),this.flags=t.flags),null!=t.coinbaseFlags&&(r(e.isBuffer(t.coinbaseFlags)),this.coinbaseFlags=t.coinbaseFlags),null!=t.witness&&(r("boolean"==typeof t.witness),this.witness=t.witness),null!=t.address&&this.address.fromOptions(t.address),null!=t.sigops&&(r("number"==typeof t.sigops),this.sigops=t.sigops),null!=t.weight&&(r("number"==typeof t.weight),this.weight=t.weight),null!=t.interval&&(r("number"==typeof t.interval),this.interval=t.interval),null!=t.fees&&(r("number"==typeof t.fees),this.fees=t.fees),null!=t.items&&(r(Array.isArray(t.items)),this.items=t.items),this}static fromOptions(e){return(new t).fromOptions(e)}getWitnessHash(){var t=p.ZERO_HASH,e=[];e.push(p.ZERO_HASH);for(const t of this.items)e.push(t.tx.witnessHash());var[i,s]=o.createRoot(e);return r(!s),n.root256(i,t)}getWitnessScript(){return m.fromCommitment(this.commitment)}setBits(t){r("number"==typeof t),this.bits=t,this.target=w.bits2Hash(t)}setTarget(t){r(e.isBuffer(t)),this.bits=w.hash2Bits(t),this.target=t}getReward(){return d.getReward(this.height,this.interval)+this.fees}createCoinbase(t,e=null){var i=d.WITNESS_SCALE_FACTOR,n=new c,o=new l;o.script.pushInt(this.height),o.script.pushData(p.ZERO_HASH160),o.script.pushData(s.nonce(4)),o.script.pushData(p.ZERO_U64),o.script.compile(),this.witness&&(o.witness.push(p.ZERO_HASH),o.witness.compile()),n.inputs.push(o);let a=new f;e?(h=this.getReward(),a=f.fromScript(e.addr,h,e)):(a.script.createScript(p.ZERO_HASH160),a.value=this.getReward()),n.outputs.splice(0,0,a),this.witness&&((h=new f).script.fromCommitment(t),n.outputs.push(h));t=o.script.get(0);var h=(r(t),5-t.getSize());return r(0<=h),this.witness?e||(r.strictEqual(n.getWeight()+h*i,724),r.strictEqual(n.getBaseSize()+h,172),r.strictEqual(n.getSize()+h,208)):(r.strictEqual(n.getWeight()+h*i,500),r.strictEqual(n.getBaseSize()+h,125),r.strictEqual(n.getSize()+h,125)),o.script.setData(1,this.coinbaseFlags),o.script.compile(),e||a.script.fromAddress(this.address),n.refresh(),r(o.script.getSize()<=100,"Coinbase input script is too large!"),n}refresh(t){t&&(this.token=t);t=this.getWitnessHash();var e=(r=this.createCoinbase(t,this.token)).toNormal(),i=0,r=(i+=4,++i,i+=r.inputs[0].getSize(),e.slice(0,i-=12));e=e.slice(i+=8);this.commitment=t,this.left=r,this.right=e,this.tree=b.fromItems(this.items)}getRawCoinbase(t,e){var i=0;return i=(i+=this.left.length)+8+this.right.length,(i=new a(i)).writeBytes(this.left),i.writeU32BE(t),i.writeU32BE(e),i.writeBytes(this.right),i.render()}getRoot(t,e){return t=this.getRawCoinbase(t,e),e=n.hash256(t),this.tree.withFirst(e)}getHeader(t,e,i){var r=new a(80);return r.writeU32(this.version),r.writeHash(this.prevBlock),r.writeHash(t),r.writeU32(e),r.writeU32(this.bits),r.writeU32(i),r.render()}getProof(t,e,i,r){var s=this.getRoot(t,e),o=this.getHeader(s,i,r);o=n.hash256(o);return new v(o,s,t,e,i,r)}getCoinbase(t,e){return t=this.getRawCoinbase(t,e),e=c.fromRaw(t),this.witness&&((t=e.inputs[0]).witness.push(p.ZERO_HASH),t.witness.compile(),e.refresh()),e}commit(t){var e=t.root,i=t.nonce1,r=t.nonce2,s=t.time,n=(t=t.nonce,new u);n.version=this.version,n.prevBlock=this.prevBlock,n.merkleRoot=e.toString("hex"),n.time=s,n.bits=this.bits,n.nonce=t,e=this.getCoinbase(i,r);n.txs.push(e);for(const t of this.items)n.txs.push(t.tx);return n}toCoinbase(){return this.getCoinbase(0,0)}toBlock(){var t=this.getProof(0,0,this.time,0);return this.commit(t)}getDifficulty(){return w.hash2Bits(this.target)}setAddress(t){this.address=h(t),this.refresh()}addTX(t,e){r(!t.mutable,"Cannot add mutable TX to block.");var i=(e=y.fromTX(t,e,this)).tx.getWeight(),s=e.sigops;return!!t.isFinal(this.height,this.locktime)&&!(this.weight+i>d.MAX_BLOCK_WEIGHT||this.sigops+s>d.MAX_BLOCK_SIGOPS_COST||!this.witness&&t.hasWitness()||(this.weight+=i,this.sigops+=s,this.fees+=e.fee,this.items.push(e),0))}pushTX(t,e){r(!t.mutable,"Cannot add mutable TX to block."),e=e||new g;e=(t=y.fromTX(t,e,this)).tx.getWeight();var i=t.sigops;return this.weight+=e,this.sigops+=i,this.fees+=t.fee,this.items.push(t),!0}}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * bip151.js - peer-to-peer communication encryption.
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 * Resources:
 *   https://github.com/bitcoin/bips/blob/master/bip-0151.mediawiki
 *   https://github.com/openssh/openssh-portable/blob/master/PROTOCOL.chacha20poly1305
 *   https://github.com/openssh/openssh-portable/blob/master/cipher-chachapoly.c
 *   https://github.com/openssh/openssh-portable/blob/master/cipher.c
 *   https://github.com/openssh/openssh-portable/blob/master/packet.c
 */
const r=i(1);var s=i(14);const n=i(3),o=i(36),a=i(8),h=i(536),c=i(537),u=i(566),l=i(567),f=i(23),d=i(6),p=i(2),g=i(4),m=i(546),w=i(547),y=e.from("bitcoinecdh","ascii"),b=e.from("BitcoinK1","ascii"),v=e.from("BitcoinK2","ascii"),k=e.from("BitcoinSessionID","ascii");class S{constructor(t){void 0!==(t=t||{}).cipher?this.cipher=t.cipher:this.cipher=_.ciphers.CHACHAPOLY,void 0!==t.privateKey?this.privateKey=t.privateKey:this.privateKey=f.generatePrivateKey(),this.publicKey=null,this.k1=null,this.k2=null,this.sid=null,this.chacha=new h,this.aead=new u,this.tag=null,this.seq=0,this.iv=e.allocUnsafe(8),this.iv.fill(0),this.processed=0,this.lastRekey=0}init(t){r(e.isBuffer(t)),this.publicKey=t;t=f.ecdh(this.publicKey,this.privateKey),(i=d.pool(33)).writeBytes(t),i.writeU8(this.cipher),t=i.render();var i=l.extract(t,y,"sha256");this.k1=l.expand(i,b,32,"sha256"),this.k2=l.expand(i,v,32,"sha256"),this.sid=l.expand(i,k,32,"sha256"),this.seq=0,this.update(),this.chacha.init(this.k1,this.iv),this.aead.init(this.k2,this.iv),this.lastRekey=n.now()}shouldRekey(t){var e=n.now();return this.processed+=t.length,(e>=this.lastRekey+600||1073741824<=this.processed)&&(this.lastRekey=e,!(this.processed=0))}rekey(t,e){r(this.sid,"Cannot rekey before initialization."),t?(this.k1=t,this.k2=e):(this.k1=a.root256(this.sid,this.k1),this.k2=a.root256(this.sid,this.k2)),r(this.k1),r(this.k2),this.chacha.init(this.k1,this.iv),this.aead.init(this.k2,this.iv)}sequence(){4294967296==++this.seq&&(this.seq=0),this.update(),this.chacha.init(null,this.iv),this.aead.init(null,this.iv)}update(){return this.iv.writeUInt32LE(this.seq,0,!0),this.iv}getPublicKey(){return f.publicKeyCreate(this.privateKey,!0)}encryptSize(t){return this.chacha.encrypt(t.slice(0,4))}decryptSize(t){return this.chacha.encrypt(t),t.readUInt32LE(0,!0)}encrypt(t){return this.aead.encrypt(t)}decrypt(t){return this.aead.chacha20.encrypt(t)}auth(t){return this.aead.auth(t)}finish(){return this.tag=this.aead.finish(),this.tag}verify(t){return c.verify(this.tag,t)}}class _ extends s{constructor(t){super(),this.input=new S(t),this.output=new S(t),this.initReceived=!1,this.ackReceived=!1,this.initSent=!1,this.ackSent=!1,this.completed=!1,this.handshake=!1,this.pending=[],this.total=0,this.waiting=4,this.hasSize=!1,this.timeout=null,this.job=null,this.onShake=null,this.bip150=null}error(){var t=n.fmt.apply(n,arguments);this.emit("error",new Error(t))}isReady(){return this.initSent&&this.ackReceived&&this.initReceived&&this.ackSent}toEncinit(){return r(!this.initSent,"Cannot init twice."),this.initSent=!0,new m(this.input.getPublicKey(),this.input.cipher)}toEncack(){return r(this.output.sid,"Cannot ack before init."),r(!this.ackSent,"Cannot ack twice."),this.ackSent=!0,this.isReady()&&(r(!this.completed,"No encack after timeout."),this.handshake=!0,this.emit("handshake")),new w(this.output.getPublicKey())}toRekey(){return r(this.handshake,"Cannot rekey before handshake."),new w(g.ZERO_KEY)}encinit(t,e){r(e===this.output.cipher,"Cipher mismatch."),r(!this.initReceived,"Already initialized."),r(!this.completed,"No encinit after timeout."),this.initReceived=!0,this.output.init(t)}encack(t){if(r(this.initSent,"Unsolicited ACK."),t.equals(g.ZERO_KEY))return r(this.handshake,"No initialization before rekey."),this.bip150&&this.bip150.auth?void this.bip150.rekeyInput():void this.input.rekey();r(!this.ackReceived,"Already ACKed."),r(!this.completed,"No encack after timeout."),this.ackReceived=!0,this.input.init(t),this.isReady()&&(this.handshake=!0,this.emit("handshake"))}cleanup(){var t=this.job;return r(!this.completed,"Already completed."),r(t,"No completion job."),this.completed=!0,(this.job=null)!=this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.onShake&&(this.removeListener("handshake",this.onShake),this.onShake=null),t}resolve(t){this.cleanup().resolve(t)}reject(t){this.cleanup().reject(t)}wait(t){return new Promise((e,i)=>{this._wait(t,e,i)})}_wait(t,e,i){r(!this.handshake,"Cannot wait for init after handshake."),this.job=o.job(e,i),this.timeout=setTimeout(()=>{this.reject(new Error("BIP151 handshake timed out."))},t),this.onShake=this.resolve.bind(this),this.once("handshake",this.onShake)}destroy(){this.job&&this.reject(new Error("BIP151 stream was destroyed."))}maybeRekey(t){this.output.shouldRekey(t)&&(this.emit("rekey"),this.bip150&&this.bip150.auth?this.bip150.rekeyOutput():this.output.rekey())}packetSize(t,e){var i=0;return(i+=4)+g.sizeVarString(t,"ascii")+4+e.length+16}packet(t,e){var i=this.packetSize(t,e),r=new d(i);i-=20,e=(t=(r.writeU32(i),r.writeVarString(t,"ascii"),r.writeU32(e.length),r.writeBytes(e),r.seek(16),r.render())).slice(4,4+i);return this.maybeRekey(t),this.output.encryptSize(t),this.output.encrypt(e),this.output.finish().copy(t,4+i),this.output.sequence(),t}feed(t){for(this.total+=t.length,this.pending.push(t);this.total>=this.waiting;){var e=this.read(this.waiting);this.parse(e)}}read(t){if(r(this.total>=t,"Reading too much."),0===t)return e.alloc(0);const i=this.pending[0];if(i.length>t){const e=i.slice(0,t);return this.pending[0]=i.slice(t),this.total-=e.length,e}if(i.length===t){const t=this.pending.shift();return this.total-=t.length,t}const s=e.allocUnsafe(t);let n=0;for(;n<s.length;){const t=this.pending[0];var o=t.copy(s,n);o===t.length?this.pending.shift():this.pending[0]=t.slice(o),n+=o}return r.strictEqual(n,s.length),this.total-=s.length,s}parse(t){if(!this.hasSize)return e=this.input.decryptSize(t),r(4===this.waiting),r(4===t.length),e<6||e>_.MAX_MESSAGE?void this.error("Bad packet size: %d.",n.mb(e)):(this.hasSize=!0,void(this.waiting=e+16));var e=t.slice(0,this.waiting-16);t=t.slice(this.waiting-16,this.waiting);if(this.hasSize=!1,this.waiting=4,this.input.auth(e),this.input.finish(),this.input.verify(t)){this.input.decrypt(e),this.input.sequence();for(var i=new p(e);i.left();){let e,r;try{e=i.readVarString("ascii"),r=i.readBytes(i.readU32())}catch(t){return void this.emit("error",t)}this.emit("packet",e,r)}}else this.input.sequence(),this.error("Bad tag: %s.",t.toString("hex"))}}_.ciphers={CHACHAPOLY:0},_.MAX_MESSAGE=5e7,t.exports=_}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(t){
/*!
 * bip152.js - compact block object for vallnet
 * related: TXRequest.js TXResponse.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(3),n=i(2),o=i(6),a=i(4),h=i(9),c=i(8),u=i(252).siphash256;var l=i(101);const f=i(19),d=i(71),p=i(58),g=i(577);i(548);class m extends l{constructor(t){super(),this.keyNonce=null,this.ids=[],this.ptx=[],this.available=[],this.idMap=new Map,this.count=0,this.sipKey=null,this.totalTX=0,this.now=0,t&&this.fromOptions(t)}fromOptions(e){return this.parseOptions(e),r(t.isBuffer(e.keyNonce)),r(Array.isArray(e.ids)),r(Array.isArray(e.ptx)),this.keyNonce=e.keyNonce,this.ids=e.ids,this.ptx=e.ptx,e.available&&(this.available=e.available),e.idMap&&(this.idMap=e.idMap),e.count&&(this.count=e.count),null!=e.totalTX&&(this.totalTX=e.totalTX),this.sipKey=this.getKey(),this}static fromOptions(t){return(new m).fromOptions(t)}verifyBody(){return!0}fromRaw(t){var e=new n(t),i=(this.readHead(e),this.keyNonce=e.readBytes(8),this.sipKey=this.getKey(),e.readVarint());this.totalTX+=i;for(let t=0;t<i;t++){var s=e.readU32(),o=e.readU16();this.ids.push(4294967296*o+s)}var a=e.readVarint();this.totalTX+=a;for(let t=0;t<a;t++){var h=e.readVarint(),c=(r(h<=65535),r(h<this.totalTX),f.fromReader(e));this.ptx.push([h,c])}return this}static fromRaw(e,i){return"string"==typeof e&&(e=t.from(e,i)),(new m).fromRaw(e)}toRaw(){return this.frameRaw(!0)}toNormal(){return this.frameRaw(!1)}toWriter(t){return this.writeRaw(t,!0)}toNormalWriter(t){return this.writeRaw(t,!1)}frameRaw(t){var e=this.getSize(t);return this.writeRaw(new o(e),t).render()}getSize(t){let e=0;for(var[i,r]of(e=(e=(e=(e=e+80+8)+a.sizeVarint(this.ids.length))+6*this.ids.length)+a.sizeVarint(this.ptx.length),this.ptx))e=(e+=a.sizeVarint(i))+(t?r.getSize():r.getBaseSize());return e}writeRaw(t,e){this.writeHead(t),t.writeBytes(this.keyNonce),t.writeVarint(this.ids.length);for(const e of this.ids){var i=e%4294967296,s=(e-i)/4294967296;r(s<=65535),t.writeU32(i),t.writeU16(s)}for(var[n,o]of(t.writeVarint(this.ptx.length),this.ptx))t.writeVarint(n),e?o.toWriter(t):o.toNormalWriter(t);return t}toRequest(){return g.fromCompact(this)}fillMempool(t,e){if(this.count===this.totalTX)return!0;var i,r=new Set;for({tx:i}of e.map.values()){let e=i.hash();t&&(e=i.witnessHash());var s=this.sid(e);if(null!=(s=this.idMap.get(s)))if(r.has(s))this.available[s]=null,this.count--;else if(this.available[s]=i,r.add(s),this.count++,this.count===this.totalTX)return!0}return!1}fillMissing(t){let e=0;for(let i=0;i<this.available.length;i++)if(!this.available[i]){if(e>=t.txs.length)return!1;this.available[i]=t.txs[e++]}return e===t.txs.length}sid(e){"string"==typeof e&&(e=t.from(e,"hex"));var[e,i]=u(e,this.sipKey);return 4294967296*(65535&e)+(i>>>0)}hasIndex(t){return null!=this.available[t]}getKey(){var e=t.concat([this.toHead(),this.keyNonce]);return c.sha256(e).slice(0,16)}init(){if(0===this.totalTX)throw new Error("Empty vectors.");if(this.totalTX>(h.MAX_BLOCK_SIZE-81)/60)throw new Error("Compact block too big.");for(let t=0;t<this.totalTX;t++)this.available.push(null);let t=-1,e=0;for(let e=0;e<this.ptx.length;e++){var[i,s]=this.ptx[e];t+=i+1,r(t<=65535),r(t<=this.ids.length+e),this.available[t]=s,this.count++}for(let t=0;t<this.ids.length;t++){for(var n=this.ids[t];this.available[t+e];)e++;if(this.idMap.has(n))return!1;this.idMap.set(n,t+e)}return!0}toBlock(){var t=new p;t.version=this.version,t.prevBlock=this.prevBlock,t.merkleRoot=this.merkleRoot,t.time=this.time,t.bits=this.bits,t.nonce=this.nonce,t._hash=this._hash,t._hhash=this._hhash;for(const e of this.available)r(e,"Compact block is not full."),t.txs.push(e);return t}fromBlock(t,e,i){this.version=t.version,this.prevBlock=t.prevBlock,this.merkleRoot=t.merkleRoot,this.time=t.time,this.bits=t.bits,this.nonce=t.nonce,this.totalTX=t.txs.length,this._hash=t._hash,this._hhash=t._hhash,i=i||s.nonce(),this.keyNonce=i,this.sipKey=this.getKey();for(let i=1;i<t.txs.length;i++){var r=t.txs[i];let s=r.hash();e&&(s=r.witnessHash()),r=this.sid(s),this.ids.push(r)}return this.ptx.push([0,t.txs[0]]),this}static fromBlock(t,e,i){return(new m).fromBlock(t,e,i)}toHeaders(){return d.fromBlock(this)}}e.CompactBlock=m}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * pool.js - peer management for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1);var s=i(63);const n=i(3),o=i(53);i(36);var a=i(66);const h=i(13);i(58);const c=i(576),u=i(545),l=i(337),f=i(90),d=i(211),p=i(23),g=i(29),m=i(312),w=i(578),y=i(167),b=i(580),v=i(603);var k=i(48);const S=i(310),_=a.services,x=k.types,R=b.scores,E=i(656),A=i(657),M=i(659);i(27);const O=i(589),I=i(37).broadcast;class C extends s{constructor(t){super(),this.options=new A(t),(this.options.pool=this).node=this.options.node,this.chain=this.options.chain,this.mempool=this.options.mempool,this.network=this.options.network,this.logger=this.options.logger.context("net"),this.server=this.options.createServer(),this.nonces=this.options.nonces,this.locker=new g(!0),this.connected=!1,this.disconnecting=!1,this.syncing=!1,this.spvFilter=null,this.txFilter=null,this.blockMap=new Set,this.txMap=new Set,this.compactBlocks=new Set,this.invMap=new Map,this.pendingFilter=null,this.pendingRefill=null,this.resetCheckpoint(),this.peers=new M,this.authdb=new u(this.options),this.hosts=new b(this.options),this.id=0,this.options.spv&&(this.spvFilter=f.fromRate(2e4,.001,f.flags.ALL)),this.options.mempool||(this.txFilter=new d(5e4,1e-6)),this._init()}getInv(t){return this.invMap.get(t)}setInv(t,e){this.invMap.set(t,e)}delInv(t){this.invMap.delete(t)}hasInv(t){return this.invMap.has(t)}invList(){return this.invMap.values()}_init(){this.server.on("error",t=>{this.emit("error",t)}),this.server.on("connection",t=>{this.handleSocket(t),this.emit("connection",t)}),this.server.on("listening",()=>{var t=this.server.address();this.logger.info("Pool server listening on %s (port=%d).",t.address,t.port),this.emit("listening",t)}),this.chain.on("block",(t,e)=>{this.emit("block",t,e)}),this.chain.on("chain.reset",()=>{this.checkpoints&&this.resetChain(),this.forceSync()}),this.chain.on("chain.full",async()=>{await this.sync(),this.node.emit("chain.full"),this.logger.info("Chain is fully synced (height=%d).",this.chain.height),1==this.node.config.mining&&this.node.miner.cpu.start(),I("chain/full",this.chain.height)}),this.chain.on("orphan.bad",(t,e)=>{this.handleBadOrphan("block",t,e)}),this.options.selfish||this.options.spv||this.chain.on("block",t=>{this.chain.synced&&this.announceBlock(t)}),this.mempool&&(this.mempool.on("tx",t=>{this.emit("tx",t)}),this.mempool.on("orphan.bad",(t,e)=>{this.handleBadOrphan("tx",t,e)}),this.options.selfish||this.options.spv||this.mempool.on("tx",t=>{this.announceTX(t)}))}async _open(t){this.mempool?await this.mempool.open(t):await this.chain.open(t),this.logger.info("Pool loaded (maxpeers=%d).",this.options.maxOutbound),this.options.bip150&&(t=p.publicKeyCreate(this.options.identityKey,!0),this.logger.info("Identity public key: %s.",t.toString("hex")),this.logger.info("Identity address: %s.",c.bip150address(t))),this.resetChain()}resetChain(){var t;this.options.checkpoints&&(this.resetCheckpoint(),t=this.chain.tip,this.network.lastCheckpoint)&&t.height<this.network.lastCheckpoint&&(this.checkpoints=!0,this.headerTip=this.getNextTip(t.height),this.headerChain.push(new O(t.hash,t.height)),this.logger.info("Initialized header chain to height %d (checkpoint=%s).",t.height,n.revHex(this.headerTip.hash)))}resetCheckpoint(){this.checkpoints=!1,this.headerNext=null,this.headerTip=null,this.headerChain?this.headerChain.reset():this.headerChain=new y}async _close(){await this.disconnect()}async connect(){var t=await this.locker.lock();try{return this._connect()}finally{t()}}async _connect(){r(this.loaded,"Pool is not loaded."),this.connected||(await this.hosts.open(),await this.authdb.open(),this.fillOutbound(),await this.listen(),this.startTimer(),this.connected=!0)}async disconnect(){var t=await this.locker.lock();try{return await this._disconnect()}finally{t()}}async _disconnect(){if(r(this.loaded,"Pool is not loaded."),this.connected){this.disconnecting=!0;for(const t of this.invList())t.resolve();this.peers.destroy(),this.blockMap.clear(),this.txMap.clear(),null!=this.pendingFilter&&(clearTimeout(this.pendingFilter),this.pendingFilter=null),null!=this.pendingRefill&&(clearTimeout(this.pendingRefill),this.pendingRefill=null),this.resetCheckpoint(),this.stopTimer(),await this.authdb.close(),await this.hosts.close(),await this.unlisten(),this.disconnecting=!1,this.syncing=!1,this.connected=!1}}async listen(){r(this.server),r(!this.connected,"Already listening."),this.options.listen&&(this.server.maxConnections=this.options.maxInbound,await this.server.listen(this.options.port,this.options.host))}async unlisten(){r(this.server),r(this.connected,"Not listening."),this.options.listen&&await this.server.close()}startTimer(){}stopTimer(){this.timer=null}async discover(){await this.discoverGateway(),await this.discoverSeeds(!0)}async discoverGateway(){var t=this.options.publicPort,e=this.options.port;if(!this.options.listen)return!1;if(!this.options.upnp)return!1;let i,r;try{this.logger.debug("Discovering internet gateway (upnp)."),i=await v.discover()}catch(t){return this.logger.debug("Could not discover internet gateway (upnp)."),this.logger.debug(t),!1}try{r=await i.getExternalIP()}catch(t){return this.logger.debug("Could not find external IP (upnp)."),this.logger.debug(t),!1}this.hosts.addLocal(r,t,R.UPNP)&&this.logger.info("External IP found (upnp): %s.",r),this.logger.debug("Adding port mapping %d->%d.",t,e);try{await i.addPortMapping(r,t,e)}catch(t){return this.logger.debug("Could not add port mapping (upnp)."),this.logger.debug(t),!1}return!0}async discoverSeeds(t){if(0!==this.hosts.dnsSeeds.length){var e=Math.min(2,this.options.maxOutbound),i=this.hosts.size();let r=0;for(let t=this.peers.head();t&&!(t.outbound&&t.connected&&++r>e);t=t.next);(0===i||t&&r<e)&&(this.logger.warning("Could not find enough peers."),this.logger.warning("Hitting DNS seeds..."),await this.hosts.discoverSeeds(),this.logger.info("Resolved %d hosts from DNS seeds.",this.hosts.size()-i),this.refill())}}async discoverExternal(){var t=this.options.publicPort;if(this.options.listen&&!(this.options.proxy||0<this.hosts.local.size)){let e,i;try{e=await w.getIPv4()}catch(t){this.logger.debug("Could not find external IPv4 (http)."),this.logger.debug(t)}e&&this.hosts.addLocal(e,t,R.HTTP)&&this.logger.info("External IPv4 found (http): %s.",e);try{i=await w.getIPv6()}catch(t){this.logger.debug("Could not find external IPv6 (http)."),this.logger.debug(t)}i&&this.hosts.addLocal(i,t,R.HTTP)&&this.logger.info("External IPv6 found (http): %s.",i)}}handleSocket(t){var e;t.remoteAddress?(e=o.normalize(t.remoteAddress),this.peers.inbound>=this.options.maxInbound?(this.logger.debug("Ignoring peer: too many inbound (%s).",e),t.destroy()):this.hosts.isBanned(e)?(this.logger.debug("Ignoring banned peer (%s).",e),t.destroy()):(e=o.toHostname(e,t.remotePort),r(!this.peers.map[e],"Port collision."),this.addInbound(t))):(this.logger.debug("Ignoring disconnected peer."),t.destroy())}addLoader(){if(this.loaded){r(!this.peers.load);for(let t=this.peers.head();t;t=t.next)if(t.outbound)return this.logger.info("Repurposing peer for loader (%s).",t.hostname()),void this.setLoader(t);var t=this.getHost();t&&(t=this.createOutbound(t),this.logger.info("Adding loader peer (%s).",t.hostname()),this.peers.add(t),this.setLoader(t))}}setLoader(t){this.loaded&&(r(t.outbound),r(!this.peers.load),r(!t.loader),t.loader=!0,this.peers.load=t,this.sendSync(t),this.emit("loader",t))}getLoader(){return this.peers.load}sendPacket(t){var e=this.getLoader();e&&e.send(t)}startSync(){if(this.loaded)return r(this.connected,"Pool is not connected!"),this.syncing=!0,this.resync(!1)}forceSync(){this.loaded&&(r(this.connected,"Pool is not connected!"),this.resync(!0))}async sync(t=!1){await this.resync(t)}stopSync(){if(this.syncing){this.syncing=!1;for(let t=this.peers.head();t;t=t.next)t.outbound&&t.syncing&&(t.syncing=!1,t.merkleBlock=null,t.merkleTime=-1,t.merkleMatches=0,t.merkleMap=null,t.blockTime=-1,t.blockMap.clear(),t.compactBlocks.clear());this.blockMap.clear(),this.compactBlocks.clear()}}async resync(t){if(this.syncing){let e;try{e=await this.chain.getLocator()}catch(t){return void this.emit("error",t)}for(let i=this.peers.head();i;i=i.next)!i.outbound||!t&&i.syncing||this.sendLocator(e,i)}}isSyncable(t){return!!this.syncing&&!(t.destroyed||!t.handshake||!(t.services&_.NETWORK)||this.options.hasWitness()&&!t.hasWitness()||!t.loader&&!this.chain.synced)}async sendSync(t){if(t.syncing)return!1;if(!this.isSyncable(t))return!1;let e;try{e=await this.chain.getLocator()}catch(e){return t.syncing=!1,t.blockTime=-1,this.emit("error",e),!1}return this.sendLocator(e,t)}sendLocator(t,e){return!!this.isSyncable(e)&&(this.network.requestMempool&&e.loader&&this.chain.synced&&e.sendMempool(),e.syncing=!0,e.blockTime=n.ms(),this.checkpoints?e.sendGetHeaders(t,this.headerTip.hash):e.sendGetBlocks(t),!0)}sendMempool(){for(let t=this.peers.head();t;t=t.next)!t.syncing&&this.chain.synced&&t.sendMempool()}sendGetAddr(){for(let t=this.peers.head();t;t=t.next)t.sendGetAddr()}resolveHeaders(t){var e=[];for(let t=this.headerNext;t&&(this.headerNext=t.next,e.push(t.hash),5e4!==e.length);t=t.next);this.getBlock(t,e)}getNextTip(t){for(const e of this.network.checkpoints)if(e.height>t)return new O(e.hash,e.height);throw new Error("Next checkpoint not found.")}announceList(t){var e=[],i=[];for(const t of this.invList())switch(t.type){case x.BLOCK:e.push(t.msg);break;case x.TX:i.push(t.msg);break;default:r(!1,"Bad item type.")}0<e.length&&t.announceBlock(e),0<i.length&&t.announceTX(i)}getBroadcasted(t,e){var i=e.isTX()?x.TX:x.BLOCK,r=this.getInv(e.hash);return r?i!==r.type?(this.logger.debug("Peer requested item with the wrong type (%s).",t.hostname()),null):(this.logger.debug("Peer requested %s %s as a %s packet (%s).",e.isTX()?"tx":"block",e.rhash(),e.hasWitness()?"witness":"normal",t.hostname()),r.handleAck(t),r.msg):null}async getItem(t,e){return(t=this.getBroadcasted(t,e))||(this.options.selfish?null:e.isTX()?this.mempool?this.mempool.getTX(e.hash):null:this.chain.options.spv||this.chain.options.prune?null:this.chain.getBlock(e.hash))}async sendBlock(t,e,i){var r=this.getBroadcasted(t,e);if(r)return t.send(new S.BlockPacket(r,i)),!0;if(this.options.selfish||this.chain.options.spv||this.chain.options.prune)return!1;if(i||!this.options.hasWitness()){const i=await this.chain.getRawBlock(e.hash);return!!i&&(t.sendRaw("block",i),!0)}const s=await this.chain.getBlock(e.hash);return!!s&&(t.send(new S.BlockPacket(s,i)),!0)}createOutbound(t){var e=l.ciphers.CHACHAPOLY,i=this.options.identityKey,r=m.fromOutbound(this.options,t);return this.hosts.markAttempt(t.hostname),this.options.bip151&&r.setCipher(e),this.options.bip150&&r.setAuth(this.authdb,i),this.bindPeer(r),this.logger.debug("Connecting to %s.",r.hostname()),r.tryOpen(),r}createInbound(t){var e=l.ciphers.CHACHAPOLY,i=this.options.identityKey;t=m.fromInbound(this.options,t);return this.options.bip151&&t.setCipher(e),this.options.bip150&&t.setAuth(this.authdb,i),this.bindPeer(t),t.tryOpen(),t}uid(){var t=Number.MAX_SAFE_INTEGER;for(this.id>=t-this.peers.size()-1&&(this.id=0);this.id+=1,this.peers.find(this.id););return this.id}bindPeer(t){t.id=this.uid(),t.onPacket=e=>this.handlePacket(t,e),t.on("error",t=>{this.logger.debug(t)}),t.once("connect",()=>{this.handleConnect(t)}),t.once("open",()=>{this.handleOpen(t)}),t.once("close",e=>{this.handleClose(t,e)}),t.once("ban",()=>{this.handleBan(t)})}async handlePacket(t,e){await e.poolHandle(t,this),this.emit("packet",e,t)}async handleConnect(t){this.logger.info("Connected to %s.",t.hostname()),t.outbound&&this.hosts.markSuccess(t.hostname()),this.emit("peer connect",t)}async handleOpen(t){var e;!this.options.selfish&&this.options.listen&&(e=this.hosts.getLocal(t.address))&&t.send(new S.AddrPacket([e])),this.options.compact&&t.sendCompact(this.options.blockMode),this.hosts.isFull()||t.sendGetAddr(),this.spvFilter&&t.sendFilterLoad(this.spvFilter),this.announceList(t),-1!==this.options.feeRate&&t.sendFeeRate(this.options.feeRate),t.outbound&&(this.sendSync(t),this.hosts.markAck(t.hostname(),t.services),t.loader||this.peers.load&&!this.peers.load.handshake&&(r(this.peers.load.loader),this.peers.load.loader=!1,this.peers.load=null),this.peers.load||this.setLoader(t)),this.emit("peer open",t)}async handleClose(t,e){var i=t.outbound,r=t.loader,s=t.blockMap.size;this.removePeer(t),r&&(this.logger.info("Removed loader peer (%s).",t.hostname()),this.checkpoints)&&this.resetChain(),this.nonces.remove(t.hostname()),this.emit("peer close",t,e),this.loaded&&!this.disconnecting&&(this.chain.synced&&0<s&&(this.logger.warning("Peer disconnected with requested blocks."),this.logger.warning("Resending sync..."),this.forceSync()),i)&&this.refill()}async handleBan(t){this.ban(t.address),this.emit("ban",t)}async addBlock(t,e,i){var r=e.hash("hex");r=await this.locker.lock(r);try{return await this._addBlock(t,e,i)}finally{r()}}async _addBlock(t,e,i){if(this.syncing){var r=e.hash("hex");if(this.resolveBlock(t,r)){t.blockTime=n.ms();var s=e.getCoinbaseHeight();let o;-1!==s&&t.height<s&&(t.height=s);try{o=await this.chain.add(e,i,t.id)}catch(e){if("VerifyError"===e.type)return t.reject("block",e),void this.logger.warning(e);throw e}o?(this.logStatus(e),await this.resolveChain(t,r)):this.checkpoints&&this.logger.warning("Peer sent orphan block with getheaders (%s).",t.hostname())}else this.logger.warning("Received unrequested block: %s (%s).",e.rhash(),t.hostname()),t.destroy(this)}}get topHash(){return this.chain.tip.hash}async resolveChain(t,e){if(this.checkpoints&&t.loader){if(t.destroyed)throw new Error("Peer was destroyed (header chain resolution).");switch(r(this.headerChain.head),this.checkHash(e)){case-1:this.logger.warning("Header hash mismatch %s != %s (%s).",n.revHex(e),n.revHex(node.hash),t.hostname()),t.destroy(this);break;case 1:this.resolveHeaders(t);break;case 2:t.sendGetHeaders([e],this.headerTip.hash);break;case 3:this.logger.info("Switching to getblocks (%s).",t.hostname()),await this.sendGetBlocks(t,e)}}}checkHash(t){var e=this.headerChain.head;return t!==e.hash?-1:e.height<this.network.lastCheckpoint?e.height===this.headerTip.height?(this.logger.info("Received checkpoint %s (%d).",n.revHex(e.hash),e.height),this.headerTip=this.getNextTip(e.height),2):(this.headerChain.shift(),1):(this.resetCheckpoint(),3)}handleBadOrphan(t,e,i){var r=this.peers.find(i);r?(this.logger.debug("Punishing peer for sending a bad orphan (%s).",r.hostname()),r.reject(t,e)):this.logger.warning("Could not find offending peer for orphan: %s (%d).",n.revHex(e.hash),i)}logStatus(t){this.chain.height%20==0&&this.logger.debug("Status: time=%s height=%d progress=%s orphans=%d active=%d target=%s peers=%d",n.date(t.time),this.chain.height,(100*this.chain.getProgress()).toFixed(2)+"%",this.chain.orphanMap.size,this.blockMap.size,t.bits,this.peers.size()),this.chain.height%2e3==0&&this.logger.info("Received 2000 more blocks (height=%d, hash=%s).",this.chain.height,t.rhash())}addInbound(t){var e;this.loaded?(e=this.createInbound(t),this.logger.info("Added inbound peer (%s).",e.hostname()),this.peers.add(e)):t.destroy()}getHost(){for(const t of this.hosts.nodes)if(!this.peers.has(t.hostname))return t;var t=this.options.getRequiredServices(),e=this.network.now();for(let s=0;s<100;s++){var i=this.hosts.getHost();if(!i)break;var r=i.addr;if(!this.peers.has(r.hostname)&&r.isValid()&&r.hasServices(t)&&(this.options.onion||!r.isOnion())&&!(s<30&&e-i.lastAttempt<600||s<50&&r.port!==this.network.port||s<95&&this.hosts.isBanned(r.host)))return i.addr}return null}getOnlineHost(){for(const t of this.hosts.nodes)if(this.peers.has(t.hostname))return t;var t=this.options.getRequiredServices(),e=this.network.now();for(let s=0;s<100;s++){var i=this.hosts.getHost();if(!i)break;var r=i.addr;if(r.isValid()&&r.hasServices(t)&&(this.options.onion||!r.isOnion())&&!(s<30&&e-i.lastAttempt<600||s<50&&r.port!==this.network.port||s<95&&this.hosts.isBanned(r.host)))return i.addr}return null}addOutbound(){var t;!this.loaded||this.peers.outbound>=this.options.maxOutbound||!this.peers.load||!(t=this.getHost())||t.host==this.node.config.host&&t.port==this.node.config.port||(t=this.createOutbound(t),this.peers.add(t),this.emit("peer",t))}fillOutbound(){this.peers.load||this.addLoader();var t=this.options.maxOutbound-this.peers.outbound;if(!(t<=0)){this.logger.debug("Refilling peers (%d/%d).",this.peers.outbound,this.options.maxOutbound);for(let e=0;e<t;e++)this.addOutbound()}}refill(){null==this.pendingRefill&&(this.pendingRefill=setTimeout(()=>{this.pendingRefill=null,this.fillOutbound()},3e3))}removePeer(t){this.peers.remove(t);for(const e of t.blockMap.keys())this.resolveBlock(t,e);for(const e of t.txMap.keys())this.resolveTX(t,e);for(const e of t.compactBlocks.keys())r(this.compactBlocks.has(e)),this.compactBlocks.delete(e);t.compactBlocks.clear()}ban(t){var e=this.peers.get(t.hostname);this.logger.debug("Banning peer (%s).",t.hostname),this.hosts.ban(t.host),this.hosts.remove(t.hostname),e&&e.destroy(this)}unban(t){this.hosts.unban(t.host)}async setFilter(t){this.options.spv&&(this.spvFilter=t,this.queueFilterLoad())}watch(t,e){this.options.spv&&(this.spvFilter.add(t,e),this.queueFilterLoad())}unwatch(){this.options.spv&&(this.spvFilter.reset(),this.queueFilterLoad())}queueFilterLoad(){this.options.spv&&null==this.pendingFilter&&(this.pendingFilter=setTimeout(()=>{this.pendingFilter=null,this.sendFilterLoad()},100))}sendFilterLoad(){if(this.options.spv){r(this.spvFilter);for(let t=this.peers.head();t;t=t.next)t.sendFilterLoad(this.spvFilter)}}watchAddress(t){t=h.getHash(t),this.watch(t)}watchOutpoint(t){this.watch(t.toRaw())}async resolveOrphan(t,e){var i=await this.chain.getLocator();e=this.chain.getOrphanRoot(e);r(e),t.sendGetBlocks(i,e)}async sendGetBlocks(t,e,i){e=await this.chain.getLocator(e),t.sendGetBlocks(e,i)}getBlock(t,e){if(!this.loaded||!Array.isArray(e)||0==e.length)return 0;if(!t.handshake)throw new Error("Peer handshake not complete (getdata).");if(t.destroyed)throw new Error("Peer is destroyed (getdata).");let i=n.ms();var r=[];for(const s of e)this.blockMap.has(s)||(this.blockMap.add(s),t.blockMap.set(s,i),this.chain.synced&&(i+=100),r.push(s));return 0===r.length?0:(this.logger.debug("Sending GetData %d/%d to %s to request blocks.",r.length,this.blockMap.size,t.hostname()),t.getBlock(r),r.length)}getTX(t,e){if(this.loaded){if(!t.handshake)throw new Error("Peer handshake not complete (getdata).");if(t.destroyed)throw new Error("Peer is destroyed (getdata).");let r=n.ms();var i=[];for(const s of e)this.txMap.has(s)?this.logger.debug("Requesting transactions: exists in txMap %s.",n.revHex(s)):(this.txMap.add(s),t.txMap.set(s,r),r+=120,i.push(s));0!==i.length&&(this.logger.debug("Requesting transactions: %d/%d txs from peer (%s).",i.length,this.txMap.size,t.hostname()),t.getTX(i))}else this.logger.debug("Requesting transactions: pool not loaded")}async hasBlock(t){return!!this.locker.has(t)||!!await this.chain.has(t)}hasTX(t){if(this.locker.has(t))return this.logger.debug("Requesting transactions: Saw known locker of %s.",n.revHex(t)),!0;if(this.mempool){if(this.mempool.has(t))return this.logger.debug("Requesting transactions: Saw known mempool of %s.",n.revHex(t)),!0;if(this.mempool.hasReject(t))return this.logger.debug("Requesting transactions: Saw known reject of %s.",n.revHex(t)),!0}else if(!this.txFilter.added(t,"hex"))return!0;return!1}ensureTX(t,e){var i=[];for(const t of e)this.hasTX(t)||i.push(t);this.getTX(t,i)}resolveTX(t,e){return!!t.txMap.has(e)&&(t.txMap.delete(e),t.invFilter.add(e,"hex"),r(this.txMap.has(e)),this.txMap.delete(e),!0)}resolveBlock(t,e){return!!t.blockMap.has(e)&&(t.blockMap.delete(e),t.invFilter.add(e,"hex"),r(this.blockMap.has(e)),this.blockMap.delete(e),!0)}resolveItem(t,e){return e.isBlock()?this.resolveBlock(t,e.hash):!!e.isTX()&&this.resolveTX(t,e.hash)}broadcast(t){var e=t.hash("hex");let i=this.getInv(e);return i?i.refresh():(i=new E(this,t)).start(),i.announce(),new Promise((t,e)=>{i.addJob(t,e)})}announceBlock(t){for(let e=this.peers.head();e;e=e.next)e.announceBlock(t)}announceTX(t){for(let e=this.peers.head();e;e=e.next)e.announceTX(t)}}C.DISCOVERY_INTERVAL=12e4,t.exports=C},function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));const r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),s={};let n,o=0,a=0;function h(t){let e="";for(;e=r[t%64]+e,0<(t=Math.floor(t/64)););return e}function c(){var t=h(+new Date);return t!==n?(o=0,n=t):t+"."+h(o++)}for(;a<64;a++)s[r[a]]=a},function(t,e,i){"use strict";e.byteLength=function(t){return 3*((t=c(t))[0]+(t=t[1]))/4-t},e.toByteArray=function(t){var e,i,r=(o=c(t))[0],o=o[1],a=new n(function(t,e){return 3*(t+e)/4-e}(r,o)),h=0,u=0<o?r-4:r;for(i=0;i<u;i+=4)e=s[t.charCodeAt(i)]<<18|s[t.charCodeAt(i+1)]<<12|s[t.charCodeAt(i+2)]<<6|s[t.charCodeAt(i+3)],a[h++]=e>>16&255,a[h++]=e>>8&255,a[h++]=255&e;return 2===o&&(e=s[t.charCodeAt(i)]<<2|s[t.charCodeAt(i+1)]>>4,a[h++]=255&e),1===o&&(e=s[t.charCodeAt(i)]<<10|s[t.charCodeAt(i+1)]<<4|s[t.charCodeAt(i+2)]>>2,a[h++]=e>>8&255,a[h++]=255&e),a},e.fromByteArray=function(t){for(var e,i=t.length,s=i%3,n=[],o=0,a=i-s;o<a;o+=16383)n.push(function(t,e,i){for(var s,n=[],o=e;o<i;o+=3)s=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),n.push(function(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}(s));return n.join("")}(t,o,a<o+16383?a:o+16383));return 1==s?(e=t[i-1],n.push(r[e>>2]+r[e<<4&63]+"==")):2==s&&(e=(t[i-2]<<8)+t[i-1],n.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),n.join("")};for(var r=[],s=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,h=o.length;a<h;++a)r[a]=o[a],s[o.charCodeAt(a)]=a;function c(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");return e=(t=-1===(t=t.indexOf("="))?e:t)===e?0:4-t%4,[t,e]}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,i,r,s){var n,o,a=8*s-r-1,h=(1<<a)-1,c=h>>1,u=-7,l=i?s-1:0,f=i?-1:1;s=t[e+l];for(l+=f,n=s&(1<<-u)-1,s>>=-u,u+=a;0<u;n=256*n+t[e+l],l+=f,u-=8);for(o=n&(1<<-u)-1,n>>=-u,u+=r;0<u;o=256*o+t[e+l],l+=f,u-=8);if(0===n)n=1-c;else{if(n===h)return o?NaN:1/0*(s?-1:1);o+=Math.pow(2,r),n-=c}return(s?-1:1)*o*Math.pow(2,n-r)},e.write=function(t,e,i,r,s,n){var o,a,h=8*n-s-1,c=(1<<h)-1,u=c>>1,l=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:n-1,d=r?1:-1;n=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(r=Math.pow(2,-o))<1&&(o--,r*=2),2<=(e+=1<=o+u?l/r:l*Math.pow(2,1-u))*r&&(o++,r/=2),c<=o+u?(a=0,o=c):1<=o+u?(a=(e*r-1)*Math.pow(2,s),o+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,s),o=0));8<=s;t[i+f]=255&a,f+=d,a/=256,s-=8);for(o=o<<s|a,h+=s;0<h;t[i+f]=255&o,f+=d,o/=256,h-=8);t[i+f-d]|=128*n}},function(t,e,i){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(Object.assign){var t=new String("abc");if(t[5]="de","5"!==Object.getOwnPropertyNames(t)[0]){for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;var r;if("0123456789"===Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return r={},"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")?1:void 0}}}catch(t){}}()?Object.assign:function(t,e){for(var i,o=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),a=1;a<arguments.length;a++){for(var h in i=Object(arguments[a]))s.call(i,h)&&(o[h]=i[h]);if(r)for(var c=r(i),u=0;u<c.length;u++)n.call(i,c[u])&&(o[c[u]]=i[c[u]])}return o}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){function i(){}t.super_=e,i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e,i){"use strict";
/*!
 * int64.js - int64 object for javascript.
 * Copyright (c) 2017, Christopher Jeffrey (MIT License).
 * https://github.com/chjj/n64
 */function r(t){h(this instanceof r,"this","N64"),h(0===t||1===t,"sign","bit"),this.hi=0,this.lo=0,this.sign=t}function s(t,e){if(!(this instanceof s))return new s(t,e);r.call(this,0),this.from(t,e)}function n(t,e){if(!(this instanceof n))return new n(t,e);r.call(this,1),this.from(t,e)}function o(t){if(null==t)return 10;if("number"==typeof t)return t;switch(t){case"bin":return 2;case"oct":return 8;case"dec":return 10;case"hex":return 16}return 0}function a(t){if(Math.clz32)return 32-Math.clz32(t);let e=31;for(;0<=e&&0==(t&1<<e);e--);return e+1}function h(t,e,i){if(!t)throw t=new TypeError(`'${e}' must be a(n) ${i}.`),Error.captureStackTrace&&Error.captureStackTrace(t,h),t}function c(t){return"number"==typeof t&&isFinite(t)}function u(t){return Array.isArray?Array.isArray(t):"Array"==={}.toString.call(t).slice(8,-1)}function l(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}function f(t,e){return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24}function d(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function p(t,e,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24&255}function g(t,e,i){t[i]=e>>>24&255,t[i+1]=e>>>16&255,t[i+2]=e>>>8&255,t[i+3]=255&e}r.prototype._add=function(t,e){var i=this.hi,r=(s=this.lo)+e|0,s=s>>31;e>>=31;return this.hi=0|(i+t|0)+(1&(s&e|~(r>>31)&(s^e))),this.lo=r,this},r.prototype.iadd=function(t){return h(r.isN64(t),"operand","int64"),this._add(t.hi,t.lo)},r.prototype.iaddn=function(t){return h(c(t),"operand","number"),this._add(t>>31&-this.sign,0|t)},r.prototype.add=function(t){return this.clone().iadd(t)},r.prototype.addn=function(t){return this.clone().iaddn(t)},r.prototype._sub=function(t,e){return t=~t,-1==(e=~e)?t=t+1|(e=0):e+=1,this._add(t,e)},r.prototype.isub=function(t){return h(r.isN64(t),"operand","int64"),this._sub(t.hi,t.lo)},r.prototype.isubn=function(t){return h(c(t),"operand","number"),this._sub(t>>31&-this.sign,0|t)},r.prototype.sub=function(t){return this.clone().isub(t)},r.prototype.subn=function(t){return this.clone().isubn(t)},r.prototype._mul=function(t,e){var i,r=65535&(l=this.hi),s=(i=this.lo)>>>16,n=65535&t,o=e>>>16,a=0,h=0,c=0,u=0,l=(a=((a+=(h=(h+=(c=c+((u+=(i=65535&i)*(e=65535&e))>>>16)+s*e)>>>16)+((c=(65535&c)+i*o)>>>16)+r*e)>>>16)+((h=(65535&h)+s*o)>>>16)+((h=(65535&h)+i*n)>>>16)+((l>>>16)*e+r*o+s*n+i*(t>>>16))&65535)<<16|(h&=65535),(c&=65535)<<16|(u&=65535));return this.hi=a,this.lo=l,this},r.prototype.imul=function(t){return h(r.isN64(t),"multiplicand","int64"),this._mul(t.hi,t.lo)},r.prototype.imuln=function(t){return h(c(t),"multiplicand","number"),this._mul(t>>31&-this.sign,0|t)},r.prototype.mul=function(t){return this.clone().imul(t)},r.prototype.muln=function(t){return this.clone().imuln(t)},r.prototype.idiv=function(t){let e=this;if(h(r.isN64(t),"divisor","int64"),t.isZero())throw new Error("Cannot divide by zero.");if(!e.isZero()){if(e.eq(t))return e.set(1);if(e.isSafe()&&t.isSafe()){const r=(i=e.toDouble()/t.toDouble())<0?-Math.floor(-i):Math.floor(i);return e.set(r)}var i;let r=!1;e.sign&&(e.hi<0?t.hi<0?(e=e.ineg(),t=t.neg()):(e=e.ineg(),r=!0):t.hi<0&&(t=t.neg(),r=!0));const o=e.toU64(),a=t.toU64();if(o.lt(a))return e.set(0);if(o.ushrn(1).lt(a))return e.set(r?-1:1);const h=new s;var n=new s;let c=o.bitLength();for(;c--;)n.ishln(1),n.lo|=o.testn(c),n.gte(a)&&(n.isub(a),h.setn(c,1));e.hi=h.hi,e.lo=h.lo,r&&e.ineg()}return e},r.prototype.idivn=function(t){return h(c(t),"divisor","number"),this.idiv(this._small(t))},r.prototype.div=function(t){return this.clone().idiv(t)},r.prototype.divn=function(t){return this.clone().idivn(t)},r.prototype.imod=function(t){var e,i;if(h(r.isN64(t),"divisor","int64"),t.isZero())throw new Error("Cannot divide by zero.");return this.isZero()?this:this.eq(t)?this.set(0):this.isSafe()&&t.isSafe()?(e=this.toDouble(),i=t.toDouble(),this.set(e%i)):this.isub(this.div(t).imul(t))},r.prototype.imodn=function(t){return h(c(t),"divisor","number"),this.imod(this._small(t))},r.prototype.mod=function(t){return this.clone().imod(t)},r.prototype.modn=function(t){return this.clone().imodn(t)},r.prototype.ipow=function(t){return h(r.isN64(t),"exponent","int64"),this.ipown(t.lo)},r.prototype.ipown=function(t){if(h(c(t),"exponent","number"),!this.isZero()){var e=this.clone();let i=t>>>0;for(this.set(1);0<i;)1&i&&this.imul(e),i>>>=1,e.imul(e)}return this},r.prototype.pow=function(t){return this.clone().ipow(t)},r.prototype.pown=function(t){return this.clone().ipown(t)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this)},r.prototype.iand=function(t){return h(r.isN64(t),"operand","int64"),this.hi&=t.hi,this.lo&=t.lo,this},r.prototype.iandn=function(t){return h(c(t),"operand","number"),this.hi&=t>>31&-this.sign,this.lo&=0|t,this},r.prototype.and=function(t){return this.clone().iand(t)},r.prototype.andn=function(t){return this.clone().iandn(t)},r.prototype.ior=function(t){return h(r.isN64(t),"operand","int64"),this.hi|=t.hi,this.lo|=t.lo,this},r.prototype.iorn=function(t){return h(c(t),"operand","number"),this.hi|=t>>31&-this.sign,this.lo|=0|t,this},r.prototype.or=function(t){return this.clone().ior(t)},r.prototype.orn=function(t){return this.clone().iorn(t)},r.prototype.ixor=function(t){return h(r.isN64(t),"operand","int64"),this.hi^=t.hi,this.lo^=t.lo,this},r.prototype.ixorn=function(t){return h(c(t),"operand","number"),this.hi^=t>>31&-this.sign,this.lo^=0|t,this},r.prototype.xor=function(t){return this.clone().ixor(t)},r.prototype.xorn=function(t){return this.clone().ixorn(t)},r.prototype.inot=function(){return this.hi=~this.hi,this.lo=~this.lo,this},r.prototype.not=function(){return this.clone().inot()},r.prototype.ishl=function(t){return h(r.isN64(t),"bits","int64"),this.ishln(t.lo)},r.prototype.ishln=function(t){if(h(c(t),"bits","number"),0!=(t&=63)){let e=this.hi,i=this.lo;t<32?(e=(e<<=t)|i>>>32-t,i<<=t):(e=i<<t-32,i=0),this.hi=e,this.lo=i}return this},r.prototype.shl=function(t){return this.clone().ishl(t)},r.prototype.shln=function(t){return this.clone().ishln(t)},r.prototype.ishr=function(t){return h(r.isN64(t),"bits","int64"),this.ishrn(t.lo)},r.prototype.ishrn=function(t){if(!this.sign)return this.iushrn(t);if(h(c(t),"bits","number"),0!=(t&=63)){let e=this.hi,i=this.lo;t<32?(i=(i>>>=t)|e<<32-t,e>>=t):(i=e>>t-32,e>>=31),this.hi=e,this.lo=i}return this},r.prototype.shr=function(t){return this.clone().ishr(t)},r.prototype.shrn=function(t){return this.clone().ishrn(t)},r.prototype.iushr=function(t){return h(r.isN64(t),"bits","int64"),this.iushrn(t.lo)},r.prototype.iushrn=function(t){if(h(c(t),"bits","number"),0!=(t&=63)){let e=this.hi,i=this.lo;t<32?(i=(i>>>=t)|e<<32-t,e>>>=t):(i=e>>>t-32,e=0),this.hi=0|e,this.lo=0|i}return this},r.prototype.ushr=function(t){return this.clone().iushr(t)},r.prototype.ushrn=function(t){return this.clone().iushrn(t)},r.prototype.setn=function(t,e){return h(c(t),"bit","number"),(t&=63)<32?e?this.lo|=1<<t:this.lo&=~(1<<t):e?this.hi|=1<<t-32:this.hi&=~(1<<t-32),this},r.prototype.testn=function(t){return h(c(t),"bit","number"),(t&=63)<32?this.lo>>>t&1:this.hi>>>t-32&1},r.prototype.setb=function(t,e){return h(c(t),"pos","number"),h(c(e),"ch","number"),e&=255,(t&=7)<4?(this.lo&=~(255<<8*t),this.lo|=e<<8*t):(this.hi&=~(255<<8*(t-4)),this.hi|=e<<8*(t-4)),this},r.prototype.orb=function(t,e){return h(c(t),"pos","number"),h(c(e),"ch","number"),e&=255,(t&=7)<4?this.lo|=e<<8*t:this.hi|=e<<8*(t-4),this},r.prototype.getb=function(t){return h(c(t),"pos","number"),(t&=7)<4?this.lo>>8*t&255:this.hi>>8*(t-4)&255},r.prototype.imaskn=function(t){return h(c(t),"bit","number"),(t&=63)<32?(this.hi=0,this.lo&=(1<<t)-1):(this.hi&=(1<<t-32)-1,this.lo&=4294967295),this},r.prototype.maskn=function(t){return this.clone().imaskn(t)},r.prototype.andln=function(t){return h(c(t),"operand","number"),this.lo&t},r.prototype.ineg=function(){let t=~this.hi,e=~this.lo;return-1===e?(e=0,t=t+1|0):e+=1,this.hi=t,this.lo=e,this},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.iabs=function(){return this.isNeg()&&this.ineg(),this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._cmp=function(t,e){let i=this.hi;var r=this.lo;if(i===t&&r===e)return 0;let s=!1;if(this.sign){var n=i<0,o=t<0;if(n&&!o)return-1;if(!n&&o)return 1;s=n}return s||(i>>>=0,t>>>=0),i<t||!(i>t)&&(r>>>=0)<(e>>>=0)?-1:1},r.prototype.cmp=function(t){return h(r.isN64(t),"value","int64"),this._cmp(t.hi,t.lo)},r.prototype.cmpn=function(t){return h(c(t),"value","number"),this._cmp(t>>31&-this.sign,0|t)},r.prototype.eq=function(t){return h(r.isN64(t),"value","int64"),this.hi===t.hi&&this.lo===t.lo},r.prototype.eqn=function(t){return h(c(t),"value","number"),this.hi===(t>>31&-this.sign)&&this.lo===(0|t)},r.prototype.gt=function(t){return 0<this.cmp(t)},r.prototype.gtn=function(t){return 0<this.cmpn(t)},r.prototype.gte=function(t){return 0<=this.cmp(t)},r.prototype.gten=function(t){return 0<=this.cmpn(t)},r.prototype.lt=function(t){return this.cmp(t)<0},r.prototype.ltn=function(t){return this.cmpn(t)<0},r.prototype.lte=function(t){return this.cmp(t)<=0},r.prototype.lten=function(t){return this.cmpn(t)<=0},r.prototype.isZero=function(){return 0===this.hi&&0===this.lo},r.prototype.isNeg=function(){return 1===this.sign&&this.hi<0},r.prototype.isOdd=function(){return 1==(1&this.lo)},r.prototype.isEven=function(){return 0==(1&this.lo)},r.prototype.clone=function(){var t=new this.constructor;return t.hi=this.hi,t.lo=this.lo,t},r.prototype.inject=function(t){return h(r.isN64(t),"value","int64"),this.hi=t.hi,this.lo=t.lo,this},r.prototype.set=function(t){var e;h((e=t,Number.isSafeInteger?Number.isSafeInteger(e):c(e)&&Math.floor(e)===e&&-9007199254740991<=e&&e<=9007199254740991),"number","integer");let i=!1;return t<0&&(t=-t,i=!0),this.hi=t*(1/4294967296)|0,this.lo=0|t,i&&this.ineg(),this},r.prototype.join=function(t,e){return h(c(t),"hi","number"),h(c(e),"lo","number"),this.hi=0|t,this.lo=0|e,this},r.prototype._small=function(t){var e=new this.constructor;return e.hi=t>>31&-this.sign,e.lo=0|t,e},r.prototype.bitLength=function(){let t=this;return 0===(t=this.isNeg()?this.neg():t).hi?a(t.lo):a(t.hi)+32},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.isSafe=function(){let t=this.hi;return this.isNeg()&&(t=~t,0===this.lo)&&(t+=1),0==(4292870144&t)},r.prototype.inspect=function(){let t="I64";return`<${t=this.sign?t:"U64"}: ${this.toString(10)}>`},r.prototype.readLE=function(t,e){return h(t&&"number"==typeof t.length,"data","arraylike"),h(e>>0===e,"offset","integer"),h(e+8<=t.length,"offset","valid offset"),this.lo=f(t,e),this.hi=f(t,e+4),e+8},r.prototype.readBE=function(t,e){return h(t&&"number"==typeof t.length,"data","arraylike"),h(e>>0===e,"offset","integer"),h(e+8<=t.length,"offset","valid offset"),this.hi=d(t,e),this.lo=d(t,e+4),e+8},r.prototype.readRaw=function(t,e){return this.readLE(t,e)},r.prototype.writeLE=function(t,e){return h(t&&"number"==typeof t.length,"data","arraylike"),h(e>>0===e,"offset","integer"),h(e+8<=t.length,"offset","valid offset"),p(t,this.lo,e),p(t,this.hi,e+4),e+8},r.prototype.writeBE=function(t,e){return h(t&&"number"==typeof t.length,"data","arraylike"),h(e>>0===e,"offset","integer"),h(e+8<=t.length,"offset","valid offset"),g(t,this.hi,e),g(t,this.lo,e+4),e+8},r.prototype.writeRaw=function(t,e){return this.writeLE(t,e)},r.prototype.toU64=function(){var t=new s;return t.hi=this.hi,t.lo=this.lo,t},r.prototype.toI64=function(){var t=new n;return t.hi=this.hi,t.lo=this.lo,t},r.prototype.toNumber=function(){if(this.isSafe())return this.toDouble();throw new Error("Number exceeds 53 bits.")},r.prototype.toDouble=function(){let t=this.hi;return this.sign||(t>>>=0),4294967296*t+(this.lo>>>0)},r.prototype.toInt=function(){return this.sign?this.lo:this.lo>>>0},r.prototype.toBool=function(){return!this.isZero()},r.prototype.toBits=function(){return[this.hi,this.lo]},r.prototype.toObject=function(){return{hi:this.hi,lo:this.lo}},r.prototype.toString=function(t,e){if(null==e&&(e=0),h((t=o(t))>>>0===t,"base","integer"),h(e>>>0===e,"pad","integer"),t<2||16<t)throw new Error("Base ranges between 2 and 16.");if(64<e)throw new Error("Maximum padding is 64 characters.");let i=this,r=!1,s=(i.isNeg()&&(i=i.neg(),r=!0),i.hi>>>0),n=i.lo>>>0,a="";do{var c=(s=(s-(c=s%t))/t,(n+=4294967296*c)%t);n=(n-c)/t;let e=c;e+=e<10?48:87,a=String.fromCharCode(e)+a}while(0<n||0<s);for(;a.length<e;)a="0"+a;return r?"-"+a:a},r.prototype.toJSON=function(){return this.toString(16,16)},r.prototype.toBN=function(t){var e=this.isNeg();let i=this.hi,r=this.lo;e&&(i=~i,-1==(r=~r)?(r=0,i=i+1|0):r+=1),i>>>=0,r>>>=0;var s=new t(i);return s.ishln(32),s.iadd(new t(r)),e&&s.ineg(),s},r.prototype.toLE=function(t){return h("function"==typeof t,"ArrayLike","constructor"),t=l(t,8),this.writeLE(t,0),t},r.prototype.toBE=function(t){return h("function"==typeof t,"ArrayLike","constructor"),t=l(t,8),this.writeBE(t,0),t},r.prototype.toRaw=function(t){return this.toLE(t)},r.prototype.fromNumber=function(t){return this.set(t)},r.prototype.fromInt=function(t){return h(c(t),"integer","number"),this.join(t>>31&-this.sign,t)},r.prototype.fromBool=function(t){return h("boolean"==typeof t,"value","boolean"),this.hi=0,this.lo=t?1:0,this},r.prototype.fromBits=function(t,e){return this.join(t,e)},r.prototype.fromObject=function(t){return h(t&&"object"==typeof t,"number","object"),this.fromBits(t.hi,t.lo)},r.prototype.fromString=function(t,e){if(e=o(e),h("string"==typeof t,"string","string"),h(e>>>0===e,"base","integer"),e<2||16<e)throw new Error("Base ranges between 2 and 16.");let i=!1,r=0;if(0<t.length&&"-"===t[0]&&(r+=1,i=!0),t.length===r||t.length>r+64)throw new Error("Invalid string (bad length).");let s=0,n=0;for(;r<t.length;r++){let i=t.charCodeAt(r);if(48<=i&&i<=57?i-=48:65<=i&&i<=90?i-=55:97<=i&&i<=122?i-=87:i=e,i>=e)throw new Error("Invalid string (parse error).");if(n=(n*=e)+i,s*=e,4294967295<n&&(i=n%4294967296,s+=(n-i)/4294967296,n=i),4294967295<s)throw new Error("Invalid string (overflow).")}return this.hi=0|s,this.lo=0|n,i&&this.ineg(),this},r.prototype.fromJSON=function(t){return this.fromString(t,16)},r.prototype.fromBN=function(t){h(t&&u(t.words),"number","big number");var e=t.clone();t=e.isNeg();if(this.sign&&e.testn(63))throw new Error("Big number overflow.");let i=0;for(;!e.isZero();){if(8===i)throw new Error("Big number overflow.");this.orb(i,e.andln(255)),e.iushrn(8),i++}return t&&this.ineg(),this},r.prototype.fromLE=function(t){return this.readLE(t,0),this},r.prototype.fromBE=function(t){return this.readBE(t,0),this},r.prototype.fromRaw=function(t){return this.fromLE(t)},r.prototype.from=function(t,e){if(null==t)return this;if("number"==typeof t)return"number"==typeof e?this.fromBits(t,e):this.fromNumber(t);if("string"==typeof t)return this.fromString(t,e);if("object"==typeof t)return u(t.words)?this.fromBN(t):"number"==typeof t.length?this.fromRaw(t):this.fromObject(t);if("boolean"==typeof t)return this.fromBool(t);throw new TypeError("Non-numeric object passed to N64.")},r.min=function(t,e){return t.cmp(e)<0?t:e},r.max=function(t,e){return 0<t.cmp(e)?t:e},r.random=function(){var t=new this;return t.hi=4294967296*Math.random()|0,t.lo=4294967296*Math.random()|0,t},r.pow=function(t,e){return(new this).fromInt(t).ipown(e)},r.shift=function(t,e){return(new this).fromInt(t).ishln(e)},r.readLE=function(t,e){var i=new this;return i.readLE(t,e),i},r.readBE=function(t,e){var i=new this;return i.readBE(t,e),i},r.readRaw=function(t,e){var i=new this;return i.readRaw(t,e),i},r.fromNumber=function(t){return(new this).fromNumber(t)},r.fromInt=function(t){return(new this).fromInt(t)},r.fromBool=function(t){return(new this).fromBool(t)},r.fromBits=function(t,e){return(new this).fromBits(t,e)},r.fromObject=function(t){return(new this).fromObject(t)},r.fromString=function(t,e){return(new this).fromString(t,e)},r.fromJSON=function(t){return(new this).fromJSON(t)},r.fromBN=function(t){return(new this).fromBN(t)},r.fromLE=function(t){return(new this).fromLE(t)},r.fromBE=function(t){return(new this).fromBE(t)},r.fromRaw=function(t){return(new this).fromRaw(t)},r.from=function(t,e){return(new this).from(t,e)},r.isN64=function(t){return t instanceof r},r.isU64=function(t){return t instanceof s},r.isI64=function(t){return t instanceof n},s.__proto__=r,s.prototype.__proto__=r.prototype,s.ULONG_MIN=0,s.ULONG_MAX=4294967295,s.UINT32_MIN=s(0,0),s.UINT32_MAX=s(0,4294967295),s.UINT64_MIN=s(0,0),s.UINT64_MAX=s(4294967295,4294967295),n.__proto__=r,n.prototype.__proto__=r.prototype,n.LONG_MIN=-2147483648,n.LONG_MAX=2147483647,n.INT32_MIN=n(4294967295,2147483648),n.INT32_MAX=n(0,2147483647),n.INT64_MIN=n(2147483648,0),n.INT64_MAX=n(2147483647,4294967295),e.N64=r,e.U64=s,e.I64=n},function(t,e,i){"use strict";e.sha1=i(348),e.sha224=i(349),e.sha256=i(223),e.sha384=i(350),e.sha512=i(224)},function(t,e,i){"use strict";var r=i(39),s=i(86),n=(i=i(222),r.rotl32),o=r.sum32,a=r.sum32_5,h=i.ft_1,c=s.BlockHash,u=[1518500249,1859775393,2400959708,3395469782];function l(){if(!(this instanceof l))return new l;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}r.inherits(l,c),(t.exports=l).blockSize=512,l.outSize=160,l.hmacStrength=80,l.padLength=64,l.prototype._update=function(t,e){for(var i=this.W,r=0;r<16;r++)i[r]=t[e+r];for(;r<i.length;r++)i[r]=n(i[r-3]^i[r-8]^i[r-14]^i[r-16],1);var s=this.h[0],c=this.h[1],l=this.h[2],f=this.h[3],d=this.h[4];for(r=0;r<i.length;r++){var p=~~(r/20);p=a(n(s,5),h(p,c,l,f),d,i[r],u[p]),d=f,f=l,l=n(c,30),c=s,s=p}this.h[0]=o(this.h[0],s),this.h[1]=o(this.h[1],c),this.h[2]=o(this.h[2],l),this.h[3]=o(this.h[3],f),this.h[4]=o(this.h[4],d)},l.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(t,e,i){"use strict";var r=i(39),s=i(223);function n(){if(!(this instanceof n))return new n;s.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}r.inherits(n,s),(t.exports=n).blockSize=512,n.outSize=224,n.hmacStrength=192,n.padLength=64,n.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}},function(t,e,i){"use strict";var r=i(39),s=i(224);function n(){if(!(this instanceof n))return new n;s.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r.inherits(n,s),(t.exports=n).blockSize=1024,n.outSize=384,n.hmacStrength=192,n.padLength=128,n.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}},function(t,e,i){"use strict";var r=i(39),s=(i=i(86),r.rotl32),n=r.sum32,o=r.sum32_3,a=r.sum32_4,h=i.BlockHash;function c(){if(!(this instanceof c))return new c;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function u(t,e,i,r){return t<=15?e^i^r:t<=31?e&i|~e&r:t<=47?(e|~i)^r:t<=63?e&r|i&~r:e^(i|~r)}r.inherits(c,h),(e.ripemd160=c).blockSize=512,c.outSize=160,c.hmacStrength=192,c.padLength=64,c.prototype._update=function(t,e){for(var i,r=b=this.h[0],h=_=this.h[1],c=S=this.h[2],g=k=this.h[3],m=v=this.h[4],w=0;w<80;w++){var y=n(s(a(b,u(w,_,S,k),t[l[w]+e],(i=w)<=15?0:i<=31?1518500249:i<=47?1859775393:i<=63?2400959708:2840853838),d[w]),v),b=v,v=k,k=s(S,10),S=_,_=y;y=n(s(a(r,u(79-w,h,c,g),t[f[w]+e],(i=w)<=15?1352829926:i<=31?1548603684:i<=47?1836072691:i<=63?2053994217:0),p[w]),m),r=m,m=g,g=s(c,10),c=h,h=y}y=o(this.h[1],S,g),this.h[1]=o(this.h[2],k,m),this.h[2]=o(this.h[3],v,r),this.h[3]=o(this.h[4],b,h),this.h[4]=o(this.h[0],_,c),this.h[0]=y},c.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var l=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],d=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],p=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(t,e,i){"use strict";var r=i(39),s=i(33);function n(t,e,i){if(!(this instanceof n))return new n(t,e,i);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(e,i))}(t.exports=n).prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),s(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},n.prototype.update=function(t,e){return this.inner.update(t,e),this},n.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},function(t,e,i){"use strict";(function(i){
/*!
 * sha256.js - SHA256 implementation for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 * Parts of this software based on hash.js.
 */
const r=i.allocUnsafe(8),s=i.allocUnsafe(64),n=i.allocUnsafe(64),o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function a(){if(!(this instanceof a))return new a;this.s=new Array(8),this.w=new Array(64),this.block=i.allocUnsafe(64),this.bytes=0}function h(){if(!(this instanceof h))return new h;this.inner=new a,this.outer=new a}function c(t,e,i){t[i]=e>>>24,t[i+1]=e>>16&255,t[i+2]=e>>8&255,t[i+3]=255&e}n.fill(0),n[0]=128,a.prototype.init=function(){this.s[0]=1779033703,this.s[1]=3144134277,this.s[2]=1013904242,this.s[3]=2773480762,this.s[4]=1359893119,this.s[5]=2600822924,this.s[6]=528734635,this.s[7]=1541459225,this.bytes=0},a.prototype.update=function(t){return this._update(t,t.length)},a.prototype.finish=function(){return this._finish(i.allocUnsafe(32))},a.prototype._update=function(t,e){let i=63&this.bytes,r=0;if(this.bytes+=e,0<i){let s=64-i;s>e&&(s=e);for(let e=0;e<s;e++)this.block[i+e]=t[e];if(i+=s,e-=s,r+=s,i<64)return;this.transform(this.block,0)}for(;64<=e;)this.transform(t,r),r+=64,e-=64;for(let i=0;i<e;i++)this.block[i]=t[r+i]},a.prototype._finish=function(t){c(r,this.bytes>>>29,0),c(r,this.bytes<<3,4),this._update(n,1+(119-this.bytes%64)%64),this._update(r,8);for(let e=0;e<8;e++)c(t,this.s[e],4*e),this.s[e]=0;return t},a.prototype.transform=function(t,e){var i,r,s,n,a=this.w;let h=this.s[0],c=this.s[1],u=this.s[2],l=this.s[3],f=this.s[4],d=this.s[5],p=this.s[6],g=this.s[7],m=0;for(;m<16;m++)a[m]=16777216*(255&t[i=e+4*m])+((255&t[i+1])<<16)|(255&t[i+2])<<8|255&t[i+3];for(;m<64;m++)a[m]=(((r=a[m-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)+a[m-7]+(((r=a[m-15])>>>7|r<<25)^(r>>>18|r<<14)^r>>>3)+a[m-16];for(m=0;m<64;m++){var w=g+((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7)),y=(w=(w+=(n=p)^(y=f)&((s=d)^n))+(o[m]+a[m]),(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10));y+=(s=h)&(n=c)|u&(s|n),g=p,p=d,d=f,f=l+w,l=u,u=c,c=h,h=w+y}this.s[0]+=h,this.s[1]+=c,this.s[2]+=u,this.s[3]+=l,this.s[4]+=f,this.s[5]+=d,this.s[6]+=p,this.s[7]+=g,this.s[0]>>>=0,this.s[1]>>>=0,this.s[2]>>>=0,this.s[3]>>>=0,this.s[4]>>>=0,this.s[5]>>>=0,this.s[6]>>>=0,this.s[7]>>>=0},h.prototype.init=function(t){var e=s;64<t.length?(this.inner.init(),this.inner.update(t),this.inner._finish(e),e.fill(0,32,64)):(t.copy(e,0),e.fill(0,t.length,64));for(let t=0;t<e.length;t++)e[t]^=54;this.inner.init(),this.inner.update(e);for(let t=0;t<e.length;t++)e[t]^=106;this.outer.init(),this.outer.update(e)},h.prototype.update=function(t){this.inner.update(t)},h.prototype.finish=function(){return this.outer.update(this.inner.finish()),this.outer.finish()};const u=new a,l=new h;(e=a).SHA256=a,e.SHA256Hmac=h,e.digest=function(t){return u.init(),u.update(t),u.finish()},e.hmac=function(t,e){return l.init(e),l.update(t),l.finish()},e.hash256=function(t){var e=i.allocUnsafe(32);return u.init(),u.update(t),u._finish(e),u.init(),u.update(e),u._finish(e),e},t.exports=e}).call(this,i(0).Buffer)},function(t,e,i){var r;r=function(t){t.version="1.2.0";var e=function(){for(var t,e=new Array(256),i=0;256!=i;++i)e[t=i]=1&(t=1&(t=1&(t=1&(t=1&(t=1&(t=1&(t=1&t?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1;return"undefined"!=typeof Int32Array?new Int32Array(e):e}();t.table=e,t.bstr=function(t,i){for(var r=-1^i,s=t.length-1,n=0;n<s;)r=(r=r>>>8^e[255&(r^t.charCodeAt(n++))])>>>8^e[255&(r^t.charCodeAt(n++))];return-1^(n===s?r>>>8^e[255&(r^t.charCodeAt(n))]:r)},t.buf=function(t,i){if(1e4<t.length){for(var r=t,s=-1^i,n=r.length-7,o=0;o<n;)s=(s=(s=(s=(s=(s=(s=(s=s>>>8^e[255&(s^r[o++])])>>>8^e[255&(s^r[o++])])>>>8^e[255&(s^r[o++])])>>>8^e[255&(s^r[o++])])>>>8^e[255&(s^r[o++])])>>>8^e[255&(s^r[o++])])>>>8^e[255&(s^r[o++])])>>>8^e[255&(s^r[o++])];for(;o<7+n;)s=s>>>8^e[255&(s^r[o++])];return-1^s}for(var a=-1^i,h=t.length-3,c=0;c<h;)a=(a=(a=(a=a>>>8^e[255&(a^t[c++])])>>>8^e[255&(a^t[c++])])>>>8^e[255&(a^t[c++])])>>>8^e[255&(a^t[c++])];for(;c<3+h;)a=a>>>8^e[255&(a^t[c++])];return-1^a},t.str=function(t,i){for(var r,s,n=-1^i,o=0,a=t.length;o<a;)n=(r=t.charCodeAt(o++))<128?n>>>8^e[255&(n^r)]:r<2048?(n=n>>>8^e[255&(n^(192|r>>6&31))])>>>8^e[255&(n^(128|63&r))]:55296<=r&&r<57344?(r=64+(1023&r),s=1023&t.charCodeAt(o++),(n=(n=(n=n>>>8^e[255&(n^(240|r>>8&7))])>>>8^e[255&(n^(128|r>>2&63))])>>>8^e[255&(n^(128|s>>6&15|(3&r)<<4))])>>>8^e[255&(n^(128|63&s))]):(n=(n=n>>>8^e[255&(n^(224|r>>12&15))])>>>8^e[255&(n^(128|r>>6&63))])>>>8^e[255&(n^(128|63&r))];return-1^n}},"undefined"==typeof DO_NOT_EXPORT_CRC?r(e):r({})},function(t,e,i){"use strict";
/*!
 * main.js - config of of main network
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */var r=i(38),s=i(26),n=i(9);i={type:"main",typeId:0,magic:3652501241,genesisId:"xxxxxxxx-vallnet-boss-xxxxxxxxxxxxxx",tokenFix:"xxxxxxxx-vallnet-boss-tokenxxxxx",tokenReg:/^xxxxxxxx-vallnet-boss-tokenxxxxx[0-9]{4}$/i,seeds:[],txcheckpoint:i(87).main,txchecktime:{1:3e5},checkpointMap:{},halvingInterval:21e4};s.setPort(i),i.lastCheckpoint=Object.keys(i.checkpointMap).reduce((t,e)=>Math.max(t,parseInt(e)),0),i.pow={limit:new r("0000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff","hex"),chainwork:new r("0000000000000000000000000000000000000000000000000000000000000002","hex"),targetTimespan:n.targetTimespan,targetSpacing:n.VALLNET_HEARTBEAT,retargetInterval:n.retargetInterval,targetReset:!1,noRetargeting:!1},i.pow.bits=n.bn2Compact(i.pow.limit),i.coinbaseAddress="bc1q9p4hxl9x9752psx5mlwcv752qgag6kmyjxx05x",i.genesis={version:2,hash:"0000000000000000000000000000000000000000000000000000000000000000",prevBlock:"0000000000000000000000000000000000000000000000000000000000000000",merkleRoot:"0000000000000000000000000000000000000000000000000000000000000000",addresses:"bc1qylxkacz8hp9lmwznjceflpvmqzwv0s48x5qvns,bc1q9p4hxl9x9752psx5mlwcv752qgag6kmyjxx05x,bc1qt0m6er3z2pedwf3235uxh84hmg0qlxy30vpv63,bc1qdfyuk9yh0ygxpsz7saftlmy3kn7kds6jvz8amy,bc1q3vc00vtyyap63qzjrn9zuecdqs25f43sdks0ap,bc1qnyp3w8vldlas8255p9u0earvwmsh3eftg7qcxr,bc1qn28lzsvmz5acc4da5x0tvlxegl2lml8y38v74k,bc1qh7x7y7ctddl3yygp4yjexnckg5dj35s9jyx6w0,bc1qm9u5h4em9rtfa5m6d3n9v9x5ukwq9hx823zqnh,bc1qul8qrzc7zhmrx4pck4st69ceekyexvd84sfh4w,bc1qllyj352dgp4sljpuh4k40yz9pu4ly7n8ue7lut",time:1553270400,bits:i.pow.bits,nonce:2083236893,height:0},i.block={pruneAfterHeight:1e3,keepBlocks:288,maxTipAge:86400,slowHeight:325e3},i.minerWindow=i.pow.retargetInterval,i.activationThreshold=.95*i.minerWindow|0,i.deployments={csv:{name:"csv",bit:0,startTime:1462060800,timeout:1493596800,threshold:-1,window:-1,required:!1,force:!0},testdummy:{name:"testdummy",bit:28,startTime:1199145601,timeout:1230767999,threshold:-1,window:-1,required:!1,force:!0}},i.deploys=[i.deployments.csv,i.deployments.testdummy],i.keyPrefix={privkey:128,xpubkey:76067358,xprivkey:76066276,xpubkey58:"xpub",xprivkey58:"xprv",coinType:0},i.addressPrefix={pubkeyhash:0,scripthash:5,witnesspubkeyhash:6,witnessscripthash:10,bech32:"bc"},i.requireStandard=!0,i.minRelay=1e3,i.feeRate=5e4,i.maxFeeRate=4e5,i.selfConnect=!1,i.requestMempool=!0,t.exports=i},function(t,e){},function(t,e,i){"use strict";
/*!
 * regtest.js - config of of regtest network
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */var r=i(38),s=i(26),n=i(9),o=(i=i(87),{type:"regtest",typeId:2,magic:3669344250,genesisId:"xxxxxxxx-vallnet-boss-xxxxxxxxxxxxxx",tokenFix:"xxxxxxxx-vallnet-boss-tokenxxxxx",tokenReg:/^xxxxxxxx-vallnet-boss-tokenxxxxx[0-9]{4}$/i,seeds:["127.0.0.1"]});o.txcheckpoint=i.regtest,o.txchecktime={1:3e5},s.setPort(o),o.checkpointMap={},o.lastCheckpoint=0,o.halvingInterval=150,o.pow={limit:new r("7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff","hex"),chainwork:new r("0000000000000000000000000000000000000000000000000000000000000002","hex"),targetTimespan:n.targetTimespan,targetSpacing:n.VALLNET_HEARTBEAT,retargetInterval:n.retargetInterval,targetReset:!0,noRetargeting:!0},o.pow.bits=n.bn2Compact(o.pow.limit),o.coinbaseAddress="tb1qrkwzpkhzuq2w7mechcesa50m7wv7qcuw9hpe76",o.genesis={version:1,hash:"",prevBlock:"0000000000000000000000000000000000000000000000000000000000000000",merkleRoot:"",addresses:"tb1qzx4t30su0na7wly567zwmjfkuffcs9vt87gpx9,tb1qrkwzpkhzuq2w7mechcesa50m7wv7qcuw9hpe76,tb1q8d3dpnlxexm6wndqqpdkmz5nllxfk6kdlntqws,tb1qfha9pgvlx32sjsr9twdr76dr8z7uvfn9nk5gtd,tb1qt2z45tzyflld0rj0jgxxang8zp9sjfxfqnklld,tb1qd2x745swsml842p3jt6heymdy0q0vg05qtjcrl,tb1q0drn4auw7anz7nf7qz00tlq3hzvvf5xka70x2w,tb1qj62dhftccj427djq7y54f0fmxqwhexd6s74t6f,tb1qhqkgtxxd2djrcs58st0ya0stxzzx5p0te5d8uf,tb1qcxeajcpcv5pdyanjdky7yywex5qqnc8dnr6jzf,tb1qaeuvffm4wdyyj6xxzfhez4u8jvnh57jxqcjmqg",time:1296688602,bits:o.pow.bits,nonce:2,height:0},o.block={pruneAfterHeight:1e3,keepBlocks:1e4,maxTipAge:4294967295,slowHeight:0},o.minerWindow=o.pow.retargetInterval/14|0,o.activationThreshold=.75*o.minerWindow|0,o.deployments={csv:{name:"csv",bit:0,startTime:0,timeout:4294967295,threshold:-1,window:-1,required:!1,force:!0},testdummy:{name:"testdummy",bit:28,startTime:0,timeout:4294967295,threshold:-1,window:-1,required:!1,force:!0}},o.deploys=[o.deployments.csv,o.deployments.testdummy],o.keyPrefix={privkey:90,xpubkey:3937729029,xprivkey:3937666247,xpubkey58:"rpub",xprivkey58:"rprv",coinType:1},o.addressPrefix={pubkeyhash:60,scripthash:38,witnesspubkeyhash:122,witnessscripthash:20,bech32:"rb"},o.requireStandard=!1,o.minRelay=1e3,o.feeRate=2e4,o.maxFeeRate=6e4,o.selfConnect=!0,o.requestMempool=!1,t.exports=o},function(t,e,i){"use strict";
/*!
 * simnet.js - config of of simnet network
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */var r=i(38),s=i(26),n=i(9),o=(i=i(87),{type:"simnet",typeId:3,magic:303307798,genesisId:"xxxxxxxx-vallnet-boss-xxxxxxxxxxxxxx",tokenFix:"xxxxxxxx-vallnet-boss-tokenxxxxx",tokenReg:/^xxxxxxxx-vallnet-boss-tokenxxxxx[0-9]{4}$/i,seeds:["127.0.0.1"]});o.txcheckpoint=i.simnet,o.txchecktime={1:3e5},s.setPort(o),o.checkpointMap={},o.lastCheckpoint=0,o.halvingInterval=21e4,o.pow={limit:new r("7fffff0000000000000000000000000000000000000000000000000000000000","hex"),chainwork:new r("0000000000000000000000000000000000000000000000000000000000000002","hex"),targetTimespan:n.targetTimespan,targetSpacing:n.VALLNET_HEARTBEAT,retargetInterval:n.retargetInterval,targetReset:!0,noRetargeting:!1},o.pow.bits=n.bn2Compact(o.pow.limit),o.coinbaseAddress="tb1qrkwzpkhzuq2w7mechcesa50m7wv7qcuw9hpe76",o.genesis={version:1,hash:"",prevBlock:"0000000000000000000000000000000000000000000000000000000000000000",merkleRoot:"",addresses:"tb1qzx4t30su0na7wly567zwmjfkuffcs9vt87gpx9,tb1qrkwzpkhzuq2w7mechcesa50m7wv7qcuw9hpe76,tb1q8d3dpnlxexm6wndqqpdkmz5nllxfk6kdlntqws,tb1qfha9pgvlx32sjsr9twdr76dr8z7uvfn9nk5gtd,tb1qt2z45tzyflld0rj0jgxxang8zp9sjfxfqnklld,tb1qd2x745swsml842p3jt6heymdy0q0vg05qtjcrl,tb1q0drn4auw7anz7nf7qz00tlq3hzvvf5xka70x2w,tb1qj62dhftccj427djq7y54f0fmxqwhexd6s74t6f,tb1qhqkgtxxd2djrcs58st0ya0stxzzx5p0te5d8uf,tb1qcxeajcpcv5pdyanjdky7yywex5qqnc8dnr6jzf,tb1qaeuvffm4wdyyj6xxzfhez4u8jvnh57jxqcjmqg",time:1401292357,bits:o.pow.bits,nonce:2,height:0},o.block={pruneAfterHeight:1e3,keepBlocks:1e4,maxTipAge:4294967295,slowHeight:0},o.minerWindow=o.pow.retargetInterval,o.activationThreshold=.75*o.minerWindow|0,o.deployments={csv:{name:"csv",bit:0,startTime:0,timeout:4294967295,threshold:-1,window:-1,required:!1,force:!0},testdummy:{name:"testdummy",bit:28,startTime:1199145601,timeout:1230767999,threshold:-1,window:-1,required:!1,force:!0}},o.deploys=[o.deployments.csv,o.deployments.testdummy],o.keyPrefix={privkey:100,xpubkey:69254458,xprivkey:69253376,xpubkey58:"spub",xprivkey58:"sprv",coinType:115},o.addressPrefix={pubkeyhash:63,scripthash:123,witnesspubkeyhash:25,witnessscripthash:40,bech32:"sc"},o.requireStandard=!1,o.minRelay=1e3,o.feeRate=2e4,o.maxFeeRate=6e4,o.selfConnect=!1,o.requestMempool=!1,t.exports=o},function(t,e,i){"use strict";
/*!
 * testnet.js - config of of testnet network
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */var r=i(38),s=i(26),n=i(9),o=(i=i(87),{type:"testnet",typeId:1,magic:118034699,genesisId:"xxxxxxxx-vallnet-boss-xxxxxxxxxxxxxx",tokenFix:"xxxxxxxx-vallnet-boss-tokenxxxxx",tokenReg:/^xxxxxxxx-vallnet-boss-tokenxxxxx[0-9]{4}$/i,seeds:[]});o.txcheckpoint=i.testnet,o.txchecktime={1:1e4},s.setPort(o),o.checkpointMap={},o.lastCheckpoint=Object.keys(o.checkpointMap).reduce((t,e)=>Math.max(t,parseInt(e)),0),o.halvingInterval=21e4,o.pow={limit:new r("000fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff","hex"),chainwork:new r("0000000000000000000000000000000000000000000000000000000000000002","hex"),targetTimespan:n.targetTimespan,targetSpacing:n.VALLNET_HEARTBEAT,retargetInterval:n.retargetInterval,targetReset:!1,noRetargeting:!1},o.pow.bits=n.bn2Compact(o.pow.limit),o.coinbaseAddress="tb1qrkwzpkhzuq2w7mechcesa50m7wv7qcuw9hpe76",o.genesis={version:2,hash:"0000000000000000000000000000000000000000000000000000000000000000",prevBlock:"0000000000000000000000000000000000000000000000000000000000000000",merkleRoot:"0000000000000000000000000000000000000000000000000000000000000000",addresses:"tb1qzx4t30su0na7wly567zwmjfkuffcs9vt87gpx9,tb1qrkwzpkhzuq2w7mechcesa50m7wv7qcuw9hpe76,tb1q8d3dpnlxexm6wndqqpdkmz5nllxfk6kdlntqws,tb1qfha9pgvlx32sjsr9twdr76dr8z7uvfn9nk5gtd,tb1qt2z45tzyflld0rj0jgxxang8zp9sjfxfqnklld,tb1qd2x745swsml842p3jt6heymdy0q0vg05qtjcrl,tb1q0drn4auw7anz7nf7qz00tlq3hzvvf5xka70x2w,tb1qj62dhftccj427djq7y54f0fmxqwhexd6s74t6f,tb1qhqkgtxxd2djrcs58st0ya0stxzzx5p0te5d8uf,tb1qcxeajcpcv5pdyanjdky7yywex5qqnc8dnr6jzf,tb1qaeuvffm4wdyyj6xxzfhez4u8jvnh57jxqcjmqg",time:1567296e3,bits:o.pow.bits,nonce:20190901,height:0},o.block={pruneAfterHeight:1e3,keepBlocks:288,maxTipAge:4294967295,slowHeight:95e4},o.minerWindow=o.pow.retargetInterval,o.activationThreshold=.75*o.minerWindow|0,o.deployments={csv:{name:"csv",bit:0,startTime:1456790400,timeout:1493596800,threshold:-1,window:-1,required:!1,force:!0},testdummy:{name:"testdummy",bit:28,startTime:1199145601,timeout:1230767999,threshold:-1,window:-1,required:!1,force:!0}},o.deploys=[o.deployments.csv,o.deployments.testdummy],o.keyPrefix={privkey:239,xpubkey:70617039,xprivkey:70615956,xpubkey58:"tpub",xprivkey58:"tprv",coinType:1},o.addressPrefix={pubkeyhash:111,scripthash:196,witnesspubkeyhash:3,witnessscripthash:40,bech32:"tb"},o.requireStandard=!1,o.minRelay=1e3,o.feeRate=2e4,o.maxFeeRate=6e4,o.selfConnect=!1,o.requestMempool=!0,t.exports=o},function(t,e,i){"use strict";
/*!
 * evidence.js - config of of evidence network
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */var r=i(38),s=i(26),n=i(9),o=(i=i(87),{type:"evidence",typeId:4,magic:118034698,genesisId:"xxxxxxxx-vallnet-boss-xxxxxxxxxxxxxx",tokenFix:"xxxxxxxx-vallnet-boss-tokenxxxxx",tokenReg:/^xxxxxxxx-vallnet-boss-tokenxxxxx[0-9]{4}$/i,seeds:[]});o.txcheckpoint=i.evidence,o.txchecktime={1:1e4},s.setPort(o),o.checkpointMap={},o.lastCheckpoint=Object.keys(o.checkpointMap).reduce((t,e)=>Math.max(t,parseInt(e)),0),o.halvingInterval=21e4,o.pow={limit:new r("00000fffffffffffffffffffffffffffffffffffffffffffffffffffffffffff","hex"),chainwork:new r("0000000000000000000000000000000000000000000000000000000000000002","hex"),targetTimespan:n.targetTimespan,targetSpacing:n.VALLNET_HEARTBEAT,retargetInterval:n.retargetInterval,targetReset:!1,noRetargeting:!1},o.pow.bits=n.bn2Compact(o.pow.limit),o.coinbaseAddress="tb1qrkwzpkhzuq2w7mechcesa50m7wv7qcuw9hpe76",o.genesis={version:2,hash:"0000000000000000000000000000000000000000000000000000000000000000",prevBlock:"0000000000000000000000000000000000000000000000000000000000000000",merkleRoot:"0000000000000000000000000000000000000000000000000000000000000000",addresses:"tb1qzx4t30su0na7wly567zwmjfkuffcs9vt87gpx9,tb1qrkwzpkhzuq2w7mechcesa50m7wv7qcuw9hpe76,tb1q8d3dpnlxexm6wndqqpdkmz5nllxfk6kdlntqws,tb1qfha9pgvlx32sjsr9twdr76dr8z7uvfn9nk5gtd,tb1qt2z45tzyflld0rj0jgxxang8zp9sjfxfqnklld,tb1qd2x745swsml842p3jt6heymdy0q0vg05qtjcrl,tb1q0drn4auw7anz7nf7qz00tlq3hzvvf5xka70x2w,tb1qj62dhftccj427djq7y54f0fmxqwhexd6s74t6f,tb1qhqkgtxxd2djrcs58st0ya0stxzzx5p0te5d8uf,tb1qcxeajcpcv5pdyanjdky7yywex5qqnc8dnr6jzf,tb1qaeuvffm4wdyyj6xxzfhez4u8jvnh57jxqcjmqg",time:1567296e3,bits:o.pow.bits,nonce:20190901,height:0},o.block={pruneAfterHeight:1e3,keepBlocks:288,maxTipAge:4294967295,slowHeight:95e4},o.minerWindow=o.pow.retargetInterval,o.activationThreshold=.75*o.minerWindow|0,o.deployments={csv:{name:"csv",bit:0,startTime:1456790400,timeout:1493596800,threshold:-1,window:-1,required:!1,force:!0},testdummy:{name:"testdummy",bit:28,startTime:1199145601,timeout:1230767999,threshold:-1,window:-1,required:!1,force:!0}},o.deploys=[o.deployments.csv,o.deployments.testdummy],o.keyPrefix={privkey:239,xpubkey:70617039,xprivkey:70615956,xpubkey58:"tpub",xprivkey58:"tprv",coinType:1},o.addressPrefix={pubkeyhash:111,scripthash:196,witnesspubkeyhash:3,witnessscripthash:40,bech32:"tb"},o.requireStandard=!1,o.minRelay=1e3,o.feeRate=2e4,o.maxFeeRate=6e4,o.selfConnect=!1,o.requestMempool=!0,t.exports=o},function(t){t.exports=JSON.parse('{"_from":"elliptic@6.5.4","_id":"elliptic@6.5.4","_inBundle":false,"_integrity":"sha512-iLhC6ULemrljPZb+QutR5TQGB+pdW6KGD5RSegS+8sorOZT+rdQFbsQFJgvN3eRqNALqJer4oQ16YvJHlU8hzQ==","_location":"/elliptic","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"elliptic@6.5.4","name":"elliptic","escapedName":"elliptic","rawSpec":"6.5.4","saveSpec":null,"fetchSpec":"6.5.4"},"_requiredBy":["#USER","/","/browserify-sign","/create-ecdh","/gamerpc"],"_resolved":"https://registry.npmjs.org/elliptic/-/elliptic-6.5.4.tgz","_shasum":"da37cebd31e79a1367e941b592ed1fbebd58abbb","_spec":"elliptic@6.5.4","_where":"C:\\\\Users\\\\ceo\\\\vallnet","author":{"name":"Fedor Indutny","email":"fedor@indutny.com"},"bugs":{"url":"https://github.com/indutny/elliptic/issues"},"bundleDependencies":false,"dependencies":{"bn.js":"^4.11.9","brorand":"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1","inherits":"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},"deprecated":false,"description":"EC cryptography","devDependencies":{"brfs":"^2.0.2","coveralls":"^3.1.0","eslint":"^7.6.0","grunt":"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1","istanbul":"^0.4.5","mocha":"^8.0.1"},"files":["lib"],"homepage":"https://github.com/indutny/elliptic","keywords":["EC","Elliptic","curve","Cryptography"],"license":"MIT","main":"lib/elliptic.js","name":"elliptic","repository":{"type":"git","url":"git+ssh://git@github.com/indutny/elliptic.git"},"scripts":{"lint":"eslint lib test","lint:fix":"npm run lint -- --fix","test":"npm run lint && npm run unit","unit":"istanbul test _mocha --reporter=spec test/index.js","version":"grunt dist && git add dist/"},"version":"6.5.4"}')},function(t,e){},function(t,e){},function(t,e,i){"use strict";var r=i(34),s=i(45),n=i(5),o=i(113),a=r.assert;function h(t){o.call(this,"short",t),this.a=new s(t.a,16).toRed(this.red),this.b=new s(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function c(t,e,i,r){o.BasePoint.call(this,t,"affine"),null===e&&null===i?(this.x=null,this.y=null,this.inf=!0):(this.x=new s(e,16),this.y=new s(i,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function u(t,e,i,r){o.BasePoint.call(this,t,"jacobian"),null===e&&null===i&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new s(0)):(this.x=new s(e,16),this.y=new s(i,16),this.z=new s(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}n(h,o),(t.exports=h).prototype._getEndomorphism=function(t){var e,i,r;if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3))return i=(t.beta?new s(t.beta,16):i=(i=this._getEndoRoots(this.p))[0].cmp(i[1])<0?i[0]:i[1]).toRed(this.red),t.lambda?e=new s(t.lambda,16):(r=this._getEndoRoots(this.n),0===this.g.mul(r[0]).x.cmp(this.g.x.redMul(i))?e=r[0]:(e=r[1],a(0===this.g.mul(e).x.cmp(this.g.x.redMul(i))))),{beta:i,lambda:e,basis:t.basis?t.basis.map((function(t){return{a:new s(t.a,16),b:new s(t.b,16)}})):this._getEndoBasis(e)}},h.prototype._getEndoRoots=function(t){t=t===this.p?this.red:s.mont(t);var e=new s(2).toRed(t).redInvm(),i=e.redNeg();t=new s(3).toRed(t).redNeg().redSqrt().redMul(e);return[i.redAdd(t).fromRed(),i.redSub(t).fromRed()]},h.prototype._getEndoBasis=function(t){for(var e,i,r,n,o,a=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=t,c=this.n.clone(),u=new s(1),l=new s(0),f=new s(0),d=new s(1),p=0;0!==h.cmpn(0);){var g=c.div(h),m=c.sub(g.mul(h)),w=f.sub(g.mul(u));g=d.sub(g.mul(l));if(!r&&m.cmp(a)<0)e=o.neg(),i=u,r=m.neg(),n=w;else if(r&&2==++p)break;c=h,h=o=m,f=u,u=w,d=l,l=g}t=m.neg();var y=w,b=r.sqr().add(n.sqr());return 0<=t.sqr().add(y.sqr()).cmp(b)&&(t=e,y=i),r.negative&&(r=r.neg(),n=n.neg()),t.negative&&(t=t.neg(),y=y.neg()),[{a:r,b:n},{a:t,b:y}]},h.prototype._endoSplit=function(t){var e,i=(e=this.endo.basis)[0],r=(e=e[1]).b.mul(t).divRound(this.n),s=i.b.neg().mul(t).divRound(this.n),n=r.mul(i.a),o=s.mul(e.a);r=r.mul(i.b),i=s.mul(e.b);return{k1:t.sub(n).sub(o),k2:r.add(i).neg()}},h.prototype.pointFromX=function(t,e){var i=(t=(t=new s(t,16)).red?t:t.toRed(this.red)).redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),r=i.redSqrt();if(0!==r.redSqr().redSub(i).cmp(this.zero))throw new Error("invalid point");return i=r.fromRed().isOdd(),(e&&!i||!e&&i)&&(r=r.redNeg()),this.point(t,r)},h.prototype.validate=function(t){var e,i;return!!t.inf||(i=t.x,t=t.y,e=this.a.redMul(i),i=i.redSqr().redMul(i).redIAdd(e).redIAdd(this.b),0===t.redSqr().redISub(i).cmpn(0))},h.prototype._endoWnafMulAdd=function(t,e,i){for(var r=this._endoWnafT1,s=this._endoWnafT2,n=0;n<t.length;n++){var o=this._endoSplit(e[n]),a=t[n],h=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),h=h.neg(!0)),r[2*n]=a,r[2*n+1]=h,s[2*n]=o.k1,s[2*n+1]=o.k2}i=this._wnafMulAdd(1,r,s,2*n,i);for(var c=0;c<2*n;c++)r[c]=null,s[c]=null;return i},n(c,o.BasePoint),h.prototype.point=function(t,e,i){return new c(this,t,e,i)},h.prototype.pointFromJSON=function(t,e){return c.fromJSON(this,t,e)},c.prototype._getBeta=function(){var t,e,i,r;if(this.curve.endo)return(t=this.precomputed)&&t.beta?t.beta:(e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y),t&&(i=this.curve,r=function(t){return i.point(t.x.redMul(i.endo.beta),t.y)},(t.beta=e).precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(r)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(r)}}),e)},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(t,e,i){"string"==typeof e&&(e=JSON.parse(e));var r=t.point(e[0],e[1],i);return e[2]&&(e=e[2],r.precomputed={beta:null,doubles:e.doubles&&{step:e.doubles.step,points:[r].concat(e.doubles.points.map(s))},naf:e.naf&&{wnd:e.naf.wnd,points:[r].concat(e.naf.points.map(s))}}),r;function s(e){return t.point(e[0],e[1],i)}},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(t){var e;return this.inf?t:t.inf?this:this.eq(t)?this.dbl():this.neg().eq(t)||0===this.x.cmp(t.x)?this.curve.point(null,null):(t=(e=0!==(e=this.y.redSub(t.y)).cmpn(0)?e.redMul(this.x.redSub(t.x).redInvm()):e).redSqr().redISub(this.x).redISub(t.x),e=e.redMul(this.x.redSub(t)).redISub(this.y),this.curve.point(t,e))},c.prototype.dbl=function(){var t,e,i;return this.inf?this:0===(i=this.y.redAdd(this.y)).cmpn(0)?this.curve.point(null,null):(e=this.curve.a,t=this.x.redSqr(),i=i.redInvm(),e=(t=t.redAdd(t).redIAdd(t).redIAdd(e).redMul(i)).redSqr().redISub(this.x.redAdd(this.x)),i=t.redMul(this.x.redSub(e)).redISub(this.y),this.curve.point(e,i))},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(t){return t=new s(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},c.prototype.mulAdd=function(t,e,i){return e=[this,e],t=[t,i],this.curve.endo?this.curve._endoWnafMulAdd(e,t):this.curve._wnafMulAdd(1,e,t,2)},c.prototype.jmulAdd=function(t,e,i){return e=[this,e],t=[t,i],this.curve.endo?this.curve._endoWnafMulAdd(e,t,!0):this.curve._wnafMulAdd(1,e,t,2,!0)},c.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},c.prototype.neg=function(t){var e,i;return this.inf?this:(e=this.curve.point(this.x,this.y.redNeg()),t&&this.precomputed&&(t=this.precomputed,i=function(t){return t.neg()},e.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}),e)},c.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},n(u,o.BasePoint),h.prototype.jpoint=function(t,e,i){return new u(this,t,e,i)},u.prototype.toP=function(){var t,e,i;return this.isInfinity()?this.curve.point(null,null):(i=(t=this.z.redInvm()).redSqr(),e=this.x.redMul(i),i=this.y.redMul(i).redMul(t),this.curve.point(e,i))},u.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},u.prototype.add=function(t){var e,i,r,s,n,o;return this.isInfinity()?t:t.isInfinity()?this:(e=t.z.redSqr(),n=this.z.redSqr(),o=this.x.redMul(e),i=t.x.redMul(n),e=this.y.redMul(e.redMul(t.z)),n=t.y.redMul(n.redMul(this.z)),i=o.redSub(i),n=e.redSub(n),0===i.cmpn(0)?0!==n.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl():(r=(s=i.redSqr()).redMul(i),o=o.redMul(s),s=n.redSqr().redIAdd(r).redISub(o).redISub(o),n=n.redMul(o.redISub(s)).redISub(e.redMul(r)),o=this.z.redMul(t.z).redMul(i),this.curve.jpoint(s,n,o)))},u.prototype.mixedAdd=function(t){var e,i,r,s,n;return this.isInfinity()?t.toJ():t.isInfinity()?this:(i=this.z.redSqr(),n=this.x,s=t.x.redMul(i),e=this.y,t=t.y.redMul(i).redMul(this.z),i=n.redSub(s),s=e.redSub(t),0===i.cmpn(0)?0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl():(r=(t=i.redSqr()).redMul(i),n=n.redMul(t),t=s.redSqr().redIAdd(r).redISub(n).redISub(n),s=s.redMul(n.redISub(t)).redISub(e.redMul(r)),n=this.z.redMul(i),this.curve.jpoint(t,s,n)))},u.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var e=this,i=0;i<t;i++)e=e.dbl();return e}var r=this.curve.a,s=this.curve.tinv,n=this.x,o=this.y,a=this.z,h=a.redSqr().redSqr(),c=o.redAdd(o);for(i=0;i<t;i++){var u=n.redSqr(),l=(f=c.redSqr()).redSqr(),f=(u=u.redAdd(u).redIAdd(u).redIAdd(r.redMul(h)),n.redMul(f)),d=u.redSqr().redISub(f.redAdd(f));f=f.redISub(d),u=(u=u.redMul(f)).redIAdd(u).redISub(l),f=c.redMul(a);i+1<t&&(h=h.redMul(l)),n=d,a=f,c=u}return this.curve.jpoint(n,c.redMul(s),a)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},u.prototype._zeroDbl=function(){var t,e,i,r,s,n=this.zOne?(e=this.x.redSqr(),i=(t=this.y.redSqr()).redSqr(),t=(t=this.x.redAdd(t).redSqr().redISub(e).redISub(i)).redIAdd(t),r=(e=e.redAdd(e).redIAdd(e)).redSqr().redISub(t).redISub(t),i=(i=(i=i.redIAdd(i)).redIAdd(i)).redIAdd(i),t=e.redMul(t.redISub(e=r)).redISub(i),this.y.redAdd(this.y)):(r=this.x.redSqr(),s=(i=this.y.redSqr()).redSqr(),i=(i=this.x.redAdd(i).redSqr().redISub(r).redISub(s)).redIAdd(i),n=(r=r.redAdd(r).redIAdd(r)).redSqr(),s=(s=(s=s.redIAdd(s)).redIAdd(s)).redIAdd(s),e=n.redISub(i).redISub(i),t=r.redMul(i.redISub(e)).redISub(s),(n=this.y.redMul(this.z)).redIAdd(n));return this.curve.jpoint(e,t,n)},u.prototype._threeDbl=function(){var t,e,i,r,s,n,o,a;return this.zOne?(e=this.x.redSqr(),s=(t=this.y.redSqr()).redSqr(),t=(t=this.x.redAdd(t).redSqr().redISub(e).redISub(s)).redIAdd(t),i=r=(e=e.redAdd(e).redIAdd(e).redIAdd(this.curve.a)).redSqr().redISub(t).redISub(t),s=(s=(s=s.redIAdd(s)).redIAdd(s)).redIAdd(s),e=e.redMul(t.redISub(r)).redISub(s),t=this.y.redAdd(this.y)):(r=this.z.redSqr(),s=this.y.redSqr(),o=this.x.redMul(s),n=(n=this.x.redSub(r).redMul(this.x.redAdd(r))).redAdd(n).redIAdd(n),a=(o=(o=o.redIAdd(o)).redIAdd(o)).redAdd(o),i=n.redSqr().redISub(a),t=this.y.redAdd(this.z).redSqr().redISub(s).redISub(r),a=(a=(a=(a=s.redSqr()).redIAdd(a)).redIAdd(a)).redIAdd(a),e=n.redMul(o.redISub(i)).redISub(a)),this.curve.jpoint(i,e,t)},u.prototype._dbl=function(){var t=this.curve.a,e=this.x,i=this.y,r=this.z,s=r.redSqr().redSqr(),n=e.redSqr(),o=i.redSqr();n=n.redAdd(n).redIAdd(n).redIAdd(t.redMul(s)),s=(t=(t=e.redAdd(e)).redIAdd(t)).redMul(o),e=n.redSqr().redISub(s.redAdd(s)),t=s.redISub(e),s=(s=(s=(s=o.redSqr()).redIAdd(s)).redIAdd(s)).redIAdd(s),o=n.redMul(t).redISub(s),n=i.redAdd(i).redMul(r);return this.curve.jpoint(e,o,n)},u.prototype.trpl=function(){var t,e,i,r,s,n,o;return this.curve.zeroA?(e=this.x.redSqr(),s=this.y.redSqr(),t=this.z.redSqr(),o=s.redSqr(),n=(r=e.redAdd(e).redIAdd(e)).redSqr(),i=(e=(e=(e=(e=this.x.redAdd(s).redSqr().redISub(e).redISub(o)).redIAdd(e)).redAdd(e).redIAdd(e)).redISub(n)).redSqr(),o=(o=(o=(o=o.redIAdd(o)).redIAdd(o)).redIAdd(o)).redIAdd(o),r=r.redIAdd(e).redSqr().redISub(n).redISub(i).redISub(o),n=(n=(n=s.redMul(r)).redIAdd(n)).redIAdd(n),s=(s=(s=this.x.redMul(i).redISub(n)).redIAdd(s)).redIAdd(s),n=(n=(n=(n=this.y.redMul(r.redMul(o.redISub(r)).redISub(e.redMul(i)))).redIAdd(n)).redIAdd(n)).redIAdd(n),o=this.z.redAdd(e).redSqr().redISub(t).redISub(i),this.curve.jpoint(s,n,o)):this.dbl().add(this)},u.prototype.mul=function(t,e){return t=new s(t,e),this.curve._wnafMul(this,t)},u.prototype.eq=function(t){var e,i;return"affine"===t.type?this.eq(t.toJ()):this===t||(e=this.z.redSqr(),i=t.z.redSqr(),0===this.x.redMul(i).redISub(t.x.redMul(e)).cmpn(0)&&(e=e.redMul(this.z),i=i.redMul(t.z),0===this.y.redMul(i).redISub(t.y.redMul(e)).cmpn(0)))},u.prototype.eqXToP=function(t){var e=this.z.redSqr(),i=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(i))return!0;for(var r=t.clone(),s=this.curve.redN.redMul(e);;){if(r.iadd(this.curve.n),0<=r.cmp(this.curve.p))return!1;if(i.redIAdd(s),0===this.x.cmp(i))return!0}},u.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(t,e,i){"use strict";var r=i(45),s=i(5),n=i(113),o=i(34);function a(t){n.call(this,"mont",t),this.a=new r(t.a,16).toRed(this.red),this.b=new r(t.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function h(t,e,i){n.BasePoint.call(this,t,"projective"),null===e&&null===i?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(e,16),this.z=new r(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}s(a,n),(t.exports=a).prototype.validate=function(t){var e;return 0===(e=(e=(t=t.normalize().x).redSqr()).redMul(t).redAdd(e.redMul(this.a)).redAdd(t)).redSqrt().redSqr().cmp(e)},s(h,n.BasePoint),a.prototype.decodePoint=function(t,e){return this.point(o.toArray(t,e),1)},a.prototype.point=function(t,e){return new h(this,t,e)},a.prototype.pointFromJSON=function(t){return h.fromJSON(this,t)},h.prototype.precompute=function(){},h.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},h.fromJSON=function(t,e){return new h(t,e[0],e[1]||t.one)},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},h.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),i=t.redSub(e);t=t.redMul(e),e=i.redMul(e.redAdd(this.curve.a24.redMul(i)));return this.curve.point(t,e)},h.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},h.prototype.diffAdd=function(t,e){var i=this.x.redAdd(this.z),r=this.x.redSub(this.z),s=t.x.redAdd(t.z);t=t.x.redSub(t.z).redMul(i),i=s.redMul(r),s=e.z.redMul(t.redAdd(i).redSqr()),r=e.x.redMul(t.redISub(i).redSqr());return this.curve.point(s,r)},h.prototype.mul=function(t){for(var e=t.clone(),i=this,r=this.curve.point(null,null),s=[];0!==e.cmpn(0);e.iushrn(1))s.push(e.andln(1));for(var n=s.length-1;0<=n;n--)0===s[n]?(i=i.diffAdd(r,this),r=r.dbl()):(r=i.diffAdd(r,this),i=i.dbl());return r},h.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},h.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},h.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},h.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},h.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(t,e,i){"use strict";var r=i(34),s=i(45),n=i(5),o=i(113),a=r.assert;function h(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,o.call(this,"edwards",t),this.a=new s(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new s(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new s(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|t.c)}function c(t,e,i,r,n){o.BasePoint.call(this,t,"projective"),null===e&&null===i&&null===r?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new s(e,16),this.y=new s(i,16),this.z=r?new s(r,16):this.curve.one,this.t=n&&new s(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}n(h,o),(t.exports=h).prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},h.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},h.prototype.jpoint=function(t,e,i,r){return this.point(t,e,i,r)},h.prototype.pointFromX=function(t,e){var i=(t=(t=new s(t,16)).red?t:t.toRed(this.red)).redSqr(),r=this.c2.redSub(this.a.redMul(i));i=this.one.redSub(this.c2.redMul(this.d).redMul(i)),r=r.redMul(i.redInvm());if(0!==(i=r.redSqrt()).redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");return r=i.fromRed().isOdd(),(e&&!r||!e&&r)&&(i=i.redNeg()),this.point(t,i)},h.prototype.pointFromY=function(t,e){var i=(r=(t=(t=new s(t,16)).red?t:t.toRed(this.red)).redSqr()).redSub(this.c2),r=r.redMul(this.d).redMul(this.c2).redSub(this.a);if(0===(i=i.redMul(r.redInvm())).cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}if(0!==(r=i.redSqrt()).redSqr().redSub(i).cmp(this.zero))throw new Error("invalid point");return r.fromRed().isOdd()!==e&&(r=r.redNeg()),this.point(r,t)},h.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),i=(t=t.y.redSqr(),e.redMul(this.a).redAdd(t));e=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(t)));return 0===i.cmp(e)},n(c,o.BasePoint),h.prototype.pointFromJSON=function(t){return c.fromJSON(this,t)},h.prototype.point=function(t,e,i,r){return new c(this,t,e,i,r)},c.fromJSON=function(t,e){return new c(t,e[0],e[1],e[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},c.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),i=(i=this.z.redSqr()).redIAdd(i),r=this.curve._mulA(t),s=(t=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),r.redAdd(e)),n=(i=s.redSub(i),r=r.redSub(e),e=t.redMul(i),s.redMul(r));t=t.redMul(r),r=i.redMul(s);return this.curve.point(e,n,r,t)},c.prototype._projDbl=function(){var t,e,i,r,s,n,o=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),h=this.y.redSqr();return n=this.curve.twisted?(n=(s=this.curve._mulA(a)).redAdd(h),this.zOne?(t=o.redSub(a).redSub(h).redMul(n.redSub(this.curve.two)),e=n.redMul(s.redSub(h)),n.redSqr().redSub(n).redSub(n)):(i=this.z.redSqr(),r=n.redSub(i).redISub(i),t=o.redSub(a).redISub(h).redMul(r),e=n.redMul(s.redSub(h)),n.redMul(r))):(s=a.redAdd(h),i=this.curve._mulC(this.z).redSqr(),r=s.redSub(i).redSub(i),t=this.curve._mulC(o.redISub(s)).redMul(r),e=this.curve._mulC(s).redMul(a.redISub(h)),s.redMul(r)),this.curve.point(t,e,n)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),i=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),r=this.t.redMul(this.curve.dd).redMul(t.t),s=(t=this.z.redMul(t.z.redAdd(t.z)),i.redSub(e)),n=t.redSub(r);t=t.redAdd(r),r=i.redAdd(e),i=s.redMul(n),e=t.redMul(r),s=s.redMul(r),r=n.redMul(t);return this.curve.point(i,e,r,s)},c.prototype._projAdd=function(t){var e,i=this.z.redMul(t.z),r=i.redSqr(),s=this.x.redMul(t.x),n=this.y.redMul(t.y),o=this.curve.d.redMul(s).redMul(n),a=r.redSub(o);r=r.redAdd(o),o=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(s).redISub(n),t=i.redMul(a).redMul(o),o=(this.curve.twisted?(e=i.redMul(r).redMul(n.redSub(this.curve._mulA(s))),a):(e=i.redMul(r).redMul(n.redSub(s)),this.curve._mulC(a))).redMul(r);return this.curve.point(t,e,o)},c.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},c.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},c.prototype.mulAdd=function(t,e,i){return this.curve._wnafMulAdd(1,[this,e],[t,i],2,!1)},c.prototype.jmulAdd=function(t,e,i){return this.curve._wnafMulAdd(1,[this,e],[t,i],2,!0)},c.prototype.normalize=function(){var t;return this.zOne||(t=this.z.redInvm(),this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0),this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},c.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var i=t.clone(),r=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),0<=i.cmp(this.curve.p))return!1;if(e.redIAdd(r),0===this.x.cmp(e))return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add},function(t,e){t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(t,e,i){"use strict";var r=i(45),s=i(369),n=i(34),o=i(151),a=i(150),h=n.assert,c=i(370),u=i(207);function l(t){if(!(this instanceof l))return new l(t);"string"==typeof t&&(h(Object.prototype.hasOwnProperty.call(o,t),"Unknown curve "+t),t=o[t]),t instanceof o.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}(t.exports=l).prototype.keyPair=function(t){return new c(this,t)},l.prototype.keyFromPrivate=function(t,e){return c.fromPrivate(this,t,e)},l.prototype.keyFromPublic=function(t,e){return c.fromPublic(this,t,e)},l.prototype.genKeyPair=function(t){for(var e=new s({hash:this.hash,pers:(t=t||{}).pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||a(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),n=this.n.sub(new r(2));;){var o=new r(e.generate(i));if(!(0<o.cmp(n)))return o.iaddn(1),this.keyFromPrivate(o)}},l.prototype._truncateToN=function(t,e){var i=8*t.byteLength()-this.n.bitLength();return 0<i&&(t=t.ushrn(i)),!e&&0<=t.cmp(this.n)?t.sub(this.n):t},l.prototype.sign=function(t,e,i,n){"object"==typeof i&&(n=i,i=null),n=n||{},e=this.keyFromPrivate(e,i),t=this._truncateToN(new r(t,16));i=this.n.byteLength();for(var o=e.getPrivate().toArray("be",i),a=(i=t.toArray("be",i),new s({hash:this.hash,entropy:o,nonce:i,pers:n.pers,persEnc:n.persEnc||"utf8"})),h=this.n.sub(new r(1)),c=0;;c++){var l=n.k?n.k(c):new r(a.generate(this.n.byteLength()));if(!((l=this._truncateToN(l,!0)).cmpn(1)<=0||0<=l.cmp(h))){var f=this.g.mul(l);if(!f.isInfinity()){var d=f.getX(),p=d.umod(this.n);if(0!==p.cmpn(0)&&0!==(l=(l=l.invm(this.n).mul(p.mul(e.getPrivate()).iadd(t))).umod(this.n)).cmpn(0))return f=(f.getY().isOdd()?1:0)|(0!==d.cmp(p)?2:0),n.canonical&&0<l.cmp(this.nh)&&(l=this.n.sub(l),f^=1),new u({r:p,s:l,recoveryParam:f})}}}},l.prototype.verify=function(t,e,i,s){t=this._truncateToN(new r(t,16)),i=this.keyFromPublic(i,s);var n;s=(e=new u(e,"hex")).r,e=e.s;return!(s.cmpn(1)<0||0<=s.cmp(this.n)||e.cmpn(1)<0||0<=e.cmp(this.n))&&(t=(e=e.invm(this.n)).mul(t).umod(this.n),e=e.mul(s).umod(this.n),this.curve._maxwellTrick?!(n=this.g.jmulAdd(t,i.getPublic(),e)).isInfinity()&&n.eqXToP(s):!(n=this.g.mulAdd(t,i.getPublic(),e)).isInfinity()&&0===n.getX().umod(this.n).cmp(s))},l.prototype.recoverPubKey=function(t,e,i,s){h((3&i)===i,"The recovery param is more than two bits"),e=new u(e,s);s=this.n,t=new r(t);var n=e.r,o=e.s,a=1&i;i>>=1;if(0<=n.cmp(this.curve.p.umod(this.curve.n))&&i)throw new Error("Unable to find sencond key candinate");return n=i?this.curve.pointFromX(n.add(this.curve.n),a):this.curve.pointFromX(n,a),i=e.r.invm(s),a=s.sub(t).mul(i).umod(s),e=o.mul(i).umod(s),this.g.mulAdd(a,n,e)},l.prototype.getKeyRecoveryParam=function(t,e,i,r){if(null!==(e=new u(e,r)).recoveryParam)return e.recoveryParam;for(var s,n=0;n<4;n++){try{s=this.recoverPubKey(t,e,n)}catch(t){continue}if(s.eq(i))return n}throw new Error("Unable to find valid recovery factor")}},function(t,e,i){"use strict";var r=i(111),s=i(228),n=i(33);function o(t){if(!(this instanceof o))return new o(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=s.toArray(t.entropy,t.entropyEnc||"hex"),i=s.toArray(t.nonce,t.nonceEnc||"hex");t=s.toArray(t.pers,t.persEnc||"hex");n(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,i,t)}(t.exports=o).prototype._init=function(t,e,i){t=t.concat(e).concat(i),this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var r=0;r<this.V.length;r++)this.K[r]=0,this.V[r]=1;this._update(t),this._reseed=1,this.reseedInterval=281474976710656},o.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},o.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},o.prototype.reseed=function(t,e,i,r){"string"!=typeof e&&(r=i,i=e,e=null),t=s.toArray(t,e),i=s.toArray(i,r),n(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(i||[])),this._reseed=1},o.prototype.generate=function(t,e,i,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(r=i,i=e,e=null),i&&(i=s.toArray(i,r||"hex"),this._update(i));for(var n=[];n.length<t;)this.V=this._hmac().update(this.V).digest(),n=n.concat(this.V);return r=n.slice(0,t),this._update(i),this._reseed++,s.encode(r,e)}},function(t,e,i){"use strict";var r=i(45),s=i(34).assert;function n(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}(t.exports=n).fromPublic=function(t,e,i){return e instanceof n?e:new n(t,{pub:e,pubEnc:i})},n.fromPrivate=function(t,e,i){return e instanceof n?e:new n(t,{priv:e,privEnc:i})},n.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},n.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},n.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},n.prototype._importPrivate=function(t,e){this.priv=new r(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},n.prototype._importPublic=function(t,e){t.x||t.y?("mont"===this.ec.curve.type?s(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||s(t.x&&t.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(t.x,t.y)):this.pub=this.ec.curve.decodePoint(t,e)},n.prototype.derive=function(t){return t.validate()||s(t.validate(),"public point not validated"),t.mul(this.priv).getX()},n.prototype.sign=function(t,e,i){return this.ec.sign(t,this,e,i)},n.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},n.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(t,e,i){"use strict";var r=i(111),s=i(151),n=i(34),o=n.assert,a=n.parseBytes,h=i(372),c=i(373);function u(t){if(o("ed25519"===t,"only tested with ed25519 so far"),!(this instanceof u))return new u(t);t=s[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=r.sha512}(t.exports=u).prototype.sign=function(t,e){t=a(t);e=this.keyFromSecret(e);var i=this.hashInt(e.messagePrefix(),t),r=this.g.mul(i),s=this.encodePoint(r);t=this.hashInt(s,e.pubBytes(),t).mul(e.priv()),e=i.add(t).umod(this.curve.n);return this.makeSignature({R:r,S:e,Rencoded:s})},u.prototype.verify=function(t,e,i){t=a(t),e=this.makeSignature(e);i=this.keyFromPublic(i),t=this.hashInt(e.Rencoded(),i.pubBytes(),t);var r=this.g.mul(e.S());return e.R().add(i.pub().mul(t)).eq(r)},u.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return n.intFromLE(t.digest()).umod(this.curve.n)},u.prototype.keyFromPublic=function(t){return h.fromPublic(this,t)},u.prototype.keyFromSecret=function(t){return h.fromSecret(this,t)},u.prototype.makeSignature=function(t){return t instanceof c?t:new c(this,t)},u.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},u.prototype.decodePoint=function(t){var e=(t=n.parseBytes(t)).length-1,i=t.slice(0,e).concat(-129&t[e]);t=0!=(128&t[e]),e=n.intFromLE(i);return this.curve.pointFromY(e,t)},u.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},u.prototype.decodeInt=function(t){return n.intFromLE(t)},u.prototype.isPoint=function(t){return t instanceof this.pointClass}},function(t,e,i){"use strict";var r=i(34),s=r.assert,n=r.parseBytes;i=r.cachedProperty;function o(t,e){this.eddsa=t,this._secret=n(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=n(e.pub)}o.fromPublic=function(t,e){return e instanceof o?e:new o(t,{pub:e})},o.fromSecret=function(t,e){return e instanceof o?e:new o(t,{secret:e})},o.prototype.secret=function(){return this._secret},i(o,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),i(o,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),i(o,"privBytes",(function(){var t=this.eddsa,e=this.hash(),i=t.encodingLength-1;return(e=e.slice(0,t.encodingLength))[0]&=248,e[i]&=127,e[i]|=64,e})),i(o,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),i(o,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),i(o,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),o.prototype.sign=function(t){return s(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},o.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},o.prototype.getSecret=function(t){return s(this._secret,"KeyPair is public only"),r.encode(this.secret(),t)},o.prototype.getPublic=function(t){return r.encode(this.pubBytes(),t)},t.exports=o},function(t,e,i){"use strict";var r=i(45),s=i(34),n=s.assert,o=(i=s.cachedProperty,s.parseBytes);function a(t,e){this.eddsa=t,"object"!=typeof e&&(e=o(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),n(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof r&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}i(a,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),i(a,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),i(a,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),i(a,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),a.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},a.prototype.toHex=function(){return s.encode(this.toBytes(),"hex").toUpperCase()},t.exports=a},function(t){t.exports=JSON.parse('{"0":"Failed","1":"Success","1001":"Stock Offering","1002":"Stock Cooling","1003":"Wrong Price","1004":"Wrong Fee","1005":"Wrong Publisher","1006":"Wrong Sum","1007":"Wrong Bonus","1008":"StockSnap Null","1009":"SignFailed","1010":"WrongHeight","1011":"WrongFormat","1012":"StockAccountNotExist","1013":"StockAccountNotEnoughSum","1014":"StockOfferExpired","1015":"FundNotEnough","1016":"Stock Circle Dependence","1017":"Wrong Account Sequence","1018":"Not Exist Cp","1019":"Not Exist Electric Right","1020":"Signature Not Match","1021":"Duplicate Electric Right","1022":"Issuse ErItem Error","1023":"Creadit ErItem Error","1025":"Abolish Time Can Not Change Later","1026":"Abolish Root Certificate Error","false":"Failed","true":"Success"}')},function(t,e,i){"use strict";(function(e){
/*!
 * paymentdetails.js - bip70 paymentdetails for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=i(3),n=i(25),o=i(148),a=i(149);function h(t){if(!(this instanceof h))return new h(t);this.network=null,this.outputs=[],this.time=s.now(),this.expires=-1,this.memo=null,this.paymentUrl=null,this.merchantData=null,t&&this.fromOptions(t)}h.prototype.fromOptions=function(t){if(null!=t.network&&(r("string"==typeof t.network),this.network=t.network),t.outputs){r(Array.isArray(t.outputs));for(const i of t.outputs){var e=new n(i);this.outputs.push(e)}}return null!=t.time&&(r(s.isInt(t.time)),this.time=t.time),null!=t.expires&&(r(s.isInt(t.expires)),this.expires=t.expires),null!=t.memo&&(r("string"==typeof t.memo),this.memo=t.memo),null!=t.paymentUrl&&(r("string"==typeof t.paymentUrl),this.paymentUrl=t.paymentUrl),t.merchantData&&this.setData(t.merchantData),this},h.fromOptions=function(t){return(new h).fromOptions(t)},h.prototype.isExpired=function(){return-1!==this.expires&&s.now()>this.expires},h.prototype.setData=function(t,i){null==t||e.isBuffer(t)?this.merchantData=t:"string"!=typeof t?(r(!i||"json"===i),this.merchantData=e.from(JSON.stringify(t),"utf8")):this.merchantData=e.from(t,i)},h.prototype.getData=function(t){let e=this.merchantData;if(!e)return null;if(t){if("json"!==t)return e.toString(t);e=e.toString("utf8");try{e=JSON.parse(e)}catch(t){return null}}return e},h.prototype.fromRaw=function(t){var e=new o(t);for(this.network=e.readFieldString(1,!0);2===e.nextTag();){var i=new o(e.readFieldBytes(2)),r=new n;r.value=i.readFieldU64(1,!0),r.script.fromRaw(i.readFieldBytes(2,!0)),this.outputs.push(r)}return this.time=e.readFieldU64(3),this.expires=e.readFieldU64(4,!0),this.memo=e.readFieldString(5,!0),this.paymentUrl=e.readFieldString(6,!0),this.merchantData=e.readFieldBytes(7,!0),this},h.fromRaw=function(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new h).fromRaw(t)},h.prototype.toRaw=function(){var t=new a;null!=this.network&&t.writeFieldString(1,this.network);for(const i of this.outputs){var e=new a;e.writeFieldU64(1,i.value),e.writeFieldBytes(2,i.script.toRaw()),t.writeFieldBytes(2,e.render())}return t.writeFieldU64(3,this.time),-1!==this.expires&&t.writeFieldU64(4,this.expires),null!=this.memo&&t.writeFieldString(5,this.memo),null!=this.paymentUrl&&t.writeFieldString(6,this.paymentUrl),this.merchantData&&t.writeFieldString(7,this.merchantData),t.render()},t.exports=h}).call(this,i(0).Buffer)},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var i,r=arguments[e];for(i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t}},function(t,e,i){"use strict";var r=i(5);const s=i(378).Readable;function n(t,e){if(!(this instanceof n))return new n(t,e);e=e||{},s.call(this,Object.assign({},e,{objectMode:!0})),this._iterator=t,this._options=e,this.on("end",this.destroy.bind(this,null,null))}r(t.exports=n,s),n.prototype._read=function(){this.destroyed||this._iterator.next((t,e,i)=>{if(!this.destroyed)return t?this.destroy(t):void(void 0===e&&void 0===i?this.push(null):!1!==this._options.keys&&!1===this._options.values?this.push(e):!1===this._options.keys&&!1!==this._options.values?this.push(i):this.push({key:e,value:i}))})},n.prototype._destroy=function(t,e){this._iterator.end((function(i){e(t||i)}))}},function(t,e,i){(((e=t.exports=i(233)).Stream=e).Readable=e).Writable=i(237),e.Duplex=i(70),e.Transform=i(238),e.PassThrough=i(385),e.finished=i(155),e.pipeline=i(386)},function(t,e){},function(t,e,i){"use strict";function r(t,e){var i,r=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)),r}function s(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var n=i(0).Buffer,o=i(381).inspect,a=o&&o.custom||"inspect";t.exports=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.head=null,this.tail=null,this.length=0}var e,i;return e=t,(i=[{key:"push",value:function(t){t={data:t,next:null},0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(t){t={data:t,next:this.head},0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){var t;if(0!==this.length)return t=this.head.data,1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i}},{key:"concat",value:function(t){if(0===this.length)return n.alloc(0);for(var e,i,r=n.allocUnsafe(t>>>0),s=this.head,o=0;s;)e=s.data,i=o,n.prototype.copy.call(e,r,i),o+=s.data.length,s=s.next;return r}},{key:"consume",value:function(t,e){var i;return t<this.head.data.length?(i=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):i=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,i=1,r=e.data;for(t-=r.length;e=e.next;){var s=e.data,n=t>s.length?s.length:t;if(n===s.length?r+=s:r+=s.slice(0,t),0==(t-=n)){n===s.length?(++i,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e).data=s.slice(n);break}++i}return this.length-=i,r}},{key:"_getBuffer",value:function(t){var e=n.allocUnsafe(t),i=this.head,r=1;for(i.data.copy(e),t-=i.data.length;i=i.next;){var s=i.data,o=t>s.length?s.length:t;if(s.copy(e,e.length-t,0,o),0==(t-=o)){o===s.length?(++r,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i).data=s.slice(o);break}++r}return this.length-=r,e}},{key:a,value:function(t,e){return o(this,function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){var r,s;r=t,s=i[e=e],e in r?Object.defineProperty(r,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[e]=s})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},e,{depth:0,customInspect:!1}))}}])&&s(e.prototype,i),t}()},function(t,e){},function(t,e,i){var r=i(0),s=r.Buffer;function n(t,e){for(var i in t)e[i]=t[i]}function o(t,e,i){return s(t,e,i)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=r:(n(r,e),e.Buffer=o),n(s,o),o.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return s(t,e,i)},o.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");return t=s(t),void 0!==e?"string"==typeof i?t.fill(e,i):t.fill(e):t.fill(0),t},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return s(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,i){"use strict";(function(e){var r;function s(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}var n=i(155),o=Symbol("lastResolve"),a=Symbol("lastReject"),h=Symbol("error"),c=Symbol("ended"),u=Symbol("lastPromise"),l=Symbol("handlePromise"),f=Symbol("stream");function d(t,e){return{value:t,done:e}}function p(t){var e,i=t[o];null!==i&&null!==(e=t[f].read())&&(t[u]=null,t[o]=null,t[a]=null,i(d(e,!1)))}var g=Object.getPrototypeOf((function(){})),m=Object.setPrototypeOf((s(r={get stream(){return this[f]},next:function(){var t,i,r,s,n=this;if(null!==(s=this[h]))return Promise.reject(s);if(this[c])return Promise.resolve(d(void 0,!0));if(this[f].destroyed)return new Promise((function(t,i){e.nextTick((function(){n[h]?i(n[h]):t(d(void 0,!0))}))}));if(s=this[u])t=new Promise((i=s,r=this,function(t,e){i.then((function(){r[c]?t(d(void 0,!0)):r[l](t,e)}),e)}));else{if(null!==(s=this[f].read()))return Promise.resolve(d(s,!1));t=new Promise(this[l])}return this[u]=t}},Symbol.asyncIterator,(function(){return this})),s(r,"return",(function(){var t=this;return new Promise((function(e,i){t[f].destroy(null,(function(t){t?i(t):e(d(void 0,!0))}))}))})),r),g);t.exports=function(t){var i,r=Object.create(m,(s(i={},f,{value:t,writable:!0}),s(i,o,{value:null,writable:!0}),s(i,a,{value:null,writable:!0}),s(i,h,{value:null,writable:!0}),s(i,c,{value:t._readableState.endEmitted,writable:!0}),s(i,l,{value:function(t,e){var i=r[f].read();i?(r[u]=null,r[o]=null,r[a]=null,t(d(i,!1))):(r[o]=t,r[a]=e)},writable:!0}),i));return r[u]=null,n(t,(function(t){var e;t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code?(null!==(e=r[a])&&(r[u]=null,r[o]=null,r[a]=null,e(t)),r[h]=t):(null!==(e=r[o])&&(r[u]=null,r[o]=null,e(d(void 0,!(r[a]=null)))),r[c]=!0)})),t.on("readable",function(t){e.nextTick(p,t)}.bind(null,r)),r}}).call(this,i(11))},function(t,e){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(t,e,i){"use strict";t.exports=s;var r=i(238);function s(t){if(!(this instanceof s))return new s(t);r.call(this,t)}i(5)(s,r),s.prototype._transform=function(t,e,i){i(null,t)}},function(t,e,i){"use strict";var r,s=i(69).codes,n=s.ERR_MISSING_ARGS,o=s.ERR_STREAM_DESTROYED;function a(t){if(t)throw t}function h(t,e,s,n){a=n,h=!1;var a,h,c=!(n=function(){h||(h=!0,a.apply(void 0,arguments))}),u=(t.on("close",(function(){c=!0})),(r=void 0===r?i(155):r)(t,{readable:e,writable:s},(function(t){if(t)return n(t);c=!0,n()})),!1);return function(e){var i;if(!c&&!u)return u=!0,(i=t).setHeader&&"function"==typeof i.abort?t.abort():"function"==typeof t.destroy?t.destroy():void n(e||new o("pipe"))}}function c(t){t()}function u(t,e){return t.pipe(e)}t.exports=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var r,s,o=(r=e).length&&"function"==typeof r[r.length-1]?r.pop():a;if((e=Array.isArray(e[0])?e[0]:e).length<2)throw new n("streams");var l=e.map((function(t,i){var r=i<e.length-1;return h(t,r,0<i,(function(t){s=s||t,t&&l.forEach(c),r||(l.forEach(c),o(s))}))}));return e.reduce(u)}},function(t,e,i){(function(t,e){!function(t,i){"use strict";var r,s,n,o,a,h,c,u;function l(t){delete s[t]}function f(t){if(n)setTimeout(f,0,t);else{var e=s[t];if(e){n=!0;try{var i=e,r=i.callback,o=i.args;switch(o.length){case 0:r();break;case 1:r(o[0]);break;case 2:r(o[0],o[1]);break;case 3:r(o[0],o[1],o[2]);break;default:r.apply(void 0,o)}}finally{l(t),n=!1}}}}t.setImmediate||(r=1,n=!(s={}),o=t.document,u=(u=Object.getPrototypeOf&&Object.getPrototypeOf(t))&&u.setTimeout?u:t,"[object process]"==={}.toString.call(t.process)?a=function(t){e.nextTick((function(){f(t)}))}:function(){var e,i;if(t.postMessage&&!t.importScripts)return e=!0,i=t.onmessage,t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}()?function(){function e(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(i)&&f(+e.data.slice(i.length))}var i="setImmediate$"+Math.random()+"$";t.addEventListener?t.addEventListener("message",e,!1):t.attachEvent("onmessage",e),a=function(e){t.postMessage(i+e,"*")}}():a=t.MessageChannel?((c=new MessageChannel).port1.onmessage=function(t){f(t.data)},function(t){c.port2.postMessage(t)}):o&&"onreadystatechange"in o.createElement("script")?(h=o.documentElement,function(t){var e=o.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,h.removeChild(e),e=null},h.appendChild(e)}):function(t){setTimeout(f,0,t)},u.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];return s[r]={callback:t,args:e},a(r),r++},u.clearImmediate=l)}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,i(12),i(11))},function(t,e,i){"use strict";(function(e){const r=i(389);function s(t){this.level=new r(t),this.bufferKeys=!1}function n(t){this.db=t,this.batch=t.level.batch(),this.hasOps=!1}function o(t,i){t.bufferKeys&&(e.isBuffer(i.gt)&&(i.gt=i.gt.toString("hex")),e.isBuffer(i.gte)&&(i.gte=i.gte.toString("hex")),e.isBuffer(i.lt)&&(i.lt=i.lt.toString("hex")),e.isBuffer(i.lte))&&(i.lte=i.lte.toString("hex")),i.keyAsBuffer=!1,this.db=t,this.iter=t.level.iterator(i),this._end=!1}s.prototype.open=function(t,e){this.bufferKeys=!0===t.bufferKeys,this.level.open(t,e)},s.prototype.close=function(t){this.level.close(t)},s.prototype.get=function(t,i,r){this.bufferKeys&&e.isBuffer(t)&&(t=t.toString("hex")),this.level.get(t,i,r)},s.prototype.put=function(t,i,r,s){this.bufferKeys&&e.isBuffer(t)&&(t=t.toString("hex")),this.level.put(t,i,r,s)},s.prototype.del=function(t,i,r){this.bufferKeys&&e.isBuffer(t)&&(t=t.toString("hex")),this.level.del(t,i,r)},s.prototype.batch=function(t,i,r){if(!t)return new n(this);if(this.bufferKeys)for(const i of t)e.isBuffer(i.key)&&(i.key=i.key.toString("hex"));this.level.batch(t,i,r)},s.prototype.iterator=function(t){return new o(this,t)},s.destroy=function(t,e){r.destroy(t,e)},n.prototype.put=function(t,i){return this.db.bufferKeys&&e.isBuffer(t)&&(t=t.toString("hex")),this.batch.put(t,i),this.hasOps=!0,this},n.prototype.del=function(t){return this.db.bufferKeys&&e.isBuffer(t)&&(t=t.toString("hex")),this.batch.del(t),this.hasOps=!0,this},n.prototype.write=function(t){return this.hasOps?(this.batch.write(t),this):t()},n.prototype.clear=function(){return this.batch.clear(),this},o.prototype.next=function(t){this.iter.next((i,r,s)=>{this._end||(i?t(i):(void 0===r&&void 0===s||(r&&this.db.bufferKeys&&(r=e.from(r,"hex")),s&&!e.isBuffer(s)&&s.buffer&&(s=e.from(s.buffer))),t(i,r,s)))})},o.prototype.seek=function(t){this.db.bufferKeys&&e.isBuffer(t)&&(t=t.toString("hex")),this.iter.seek(t)},o.prototype.end=function(t){this._end?t(new Error("end() already called on iterator.")):(this._end=!0,this.iter.end(t))},t.exports=s}).call(this,i(0).Buffer)},function(t,e,i){"use strict";t.exports=f;const r=i(239).AbstractLevelDOWN;t=i(5);const s=i(395),n=i(396),o=i(398),a=i(245),h=i(399),c=i(400),u=i(244),l="level-js-";function f(t,e){if(!(this instanceof f))return new f(t,e);if(r.call(this,{bufferKeys:h.bufferKeys(indexedDB),snapshots:!0,permanence:!0,clear:!0,getMany:!0}),e=e||{},"string"!=typeof t)throw new Error("constructor requires a location string argument");this.location=t,this.prefix=null==e.prefix?l:e.prefix,this.version=parseInt(e.version||1,10)}t(f,r),f.prototype.type="level-js",f.prototype._open=function(t,e){const i=indexedDB.open(this.prefix+this.location,this.version);i.onerror=function(){e(i.error||new Error("unknown error"))},i.onsuccess=()=>{this.db=i.result,e()},i.onupgradeneeded=t=>{(t=t.target.result).objectStoreNames.contains(this.location)||t.createObjectStore(this.location)}},f.prototype.store=function(t){return this.db.transaction([this.location],t).objectStore(this.location)},f.prototype.await=function(t,e){const i=t.transaction;i.onabort=function(){e(i.error||new Error("aborted by user"))},i.oncomplete=function(){e(null,t.result)}},f.prototype._get=function(t,e,i){var r=this.store("readonly");let s;try{s=r.get(t)}catch(t){return this._nextTick(i,t)}this.await(s,(function(t,r){return t?i(t):void 0===r?i(new Error("NotFound")):void i(null,a(r,e.asBuffer))}))},f.prototype._getMany=function(t,e,i){const r=e.asBuffer,n=this.store("readonly");e=t.map(t=>e=>{let i;try{i=n.get(t)}catch(t){return e(t)}i.onsuccess=()=>{var t=i.result;e(null,void 0===t?t:a(t,r))},i.onerror=t=>{t.stopPropagation(),e(i.error)}}),s(e,16,i)},f.prototype._del=function(t,e,i){var r=this.store("readwrite");let s;try{s=r.delete(t)}catch(t){return this._nextTick(i,t)}this.await(s,i)},f.prototype._put=function(t,e,i,r){var s=this.store("readwrite");let n;try{n=s.put(e,t)}catch(t){return this._nextTick(r,t)}this.await(n,r)},f.prototype._serializeKey=function(t){return o(t,this.supports.bufferKeys)},f.prototype._serializeValue=function(t){return o(t,!0)},f.prototype._iterator=function(t){return new n(this,this.location,t)},f.prototype._batch=function(t,e,i){if(0===t.length)return this._nextTick(i);const r=this.store("readwrite"),s=r.transaction;let n,o=0;s.onabort=function(){i(n||s.error||new Error("aborted by user"))},s.oncomplete=function(){i()},function e(){var i=t[o++],a=i.key;let h;try{h="del"===i.type?r.delete(a):r.put(i.value,a)}catch(e){return n=e,void s.abort()}o<t.length&&(h.onsuccess=e)}()},f.prototype._clear=function(t,e){let i,r;try{i=u(t)}catch(t){return this._nextTick(e)}if(0<=t.limit)return c(this,this.location,i,t,e);try{var s=this.store("readwrite");r=i?s.delete(i):s.clear()}catch(t){return this._nextTick(e,t)}this.await(r,e)},f.prototype._close=function(t){this.db.close(),this._nextTick(t)},f.prototype.upgrade=function(t){if("open"!==this.status)return this._nextTick(t,new Error("cannot upgrade() before open()"));const e=this.iterator(),i={},r=this;function s(t){if(t)return o(t);e.next(n)}function n(t,e,n){if(t||void 0===e)return o(t);t=r._serializeKey(a(e,!0)),n=r._serializeValue(a(n,!0)),r._batch([{type:"del",key:e},{type:"put",key:t,value:n}],i,s)}function o(i){e.end((function(e){t(i||e)}))}e._deserializeKey=e._deserializeValue=function(t){return t},s()},f.destroy=function(t,e,i){"function"==typeof e&&(i=e,e=l),(e=indexedDB.deleteDatabase(e+t)).onsuccess=function(){i()},e.onerror=function(t){i(t)}}},function(t,e,i){"use strict";const r=i(391),s=i(392),n=i(393),o=i(240),a=i(242),h=i(243).getCallback,c=i(243).getOptions,u=Object.prototype.hasOwnProperty,l=["lt","lte","gt","gte"];function f(t){this.status="new",this.supports=r(t,{status:!0})}function d(t,e){var i,r={};for(const s in e)if(u.call(e,s)){if("start"===s||"end"===s)throw new Error('Legacy range options ("start" and "end") have been removed');let n=e[s];i=s,-1!==l.indexOf(i)&&(n=t._serializeKey(n)),r[s]=n}return r}f.prototype.open=function(t,e){const i=this.status;if("function"!=typeof(e="function"==typeof t?t:e))throw new Error("open() requires a callback argument");(t="object"==typeof t&&null!==t?t:{}).createIfMissing=!1!==t.createIfMissing,t.errorIfExists=!!t.errorIfExists,this.status="opening",this._open(t,t=>{if(t)return this.status=i,e(t);this.status="open",e()})},f.prototype._open=function(t,e){this._nextTick(e)},f.prototype.close=function(t){const e=this.status;if("function"!=typeof t)throw new Error("close() requires a callback argument");this.status="closing",this._close(i=>{if(i)return this.status=e,t(i);this.status="closed",t()})},f.prototype._close=function(t){this._nextTick(t)},f.prototype.get=function(t,e,i){if("function"!=typeof(i="function"==typeof e?e:i))throw new Error("get() requires a callback argument");var r=this._checkKey(t);if(r)return this._nextTick(i,r);t=this._serializeKey(t),(e="object"==typeof e&&null!==e?e:{}).asBuffer=!1!==e.asBuffer,this._get(t,e,i)},f.prototype._get=function(t,e,i){this._nextTick((function(){i(new Error("NotFound"))}))},f.prototype.getMany=function(t,e,i){var r,s;if(i=h(e,i),i=n.fromCallback(i),e=c(e),s=i,(r=this).isOperational()||(r._nextTick(s,new Error("Database is not open")),0))if(Array.isArray(t))if(0===t.length)this._nextTick(i,null,[]);else{"boolean"!=typeof e.asBuffer&&(e={...e,asBuffer:!0});var o=new Array(t.length);for(let e=0;e<t.length;e++){var a=t[e],u=this._checkKey(a);if(u)return this._nextTick(i,u),i.promise;o[e]=this._serializeKey(a)}this._getMany(o,e,i)}else this._nextTick(i,new Error("getMany() requires an array argument"));return i.promise},f.prototype._getMany=function(t,e,i){this._nextTick(i,null,new Array(t.length).fill(void 0))},f.prototype.put=function(t,e,i,r){if("function"!=typeof(r="function"==typeof i?i:r))throw new Error("put() requires a callback argument");var s=this._checkKey(t)||this._checkValue(e);if(s)return this._nextTick(r,s);t=this._serializeKey(t),e=this._serializeValue(e),this._put(t,e,i="object"==typeof i&&null!==i?i:{},r)},f.prototype._put=function(t,e,i,r){this._nextTick(r)},f.prototype.del=function(t,e,i){if("function"!=typeof(i="function"==typeof e?e:i))throw new Error("del() requires a callback argument");var r=this._checkKey(t);if(r)return this._nextTick(i,r);t=this._serializeKey(t),this._del(t,e="object"==typeof e&&null!==e?e:{},i)},f.prototype._del=function(t,e,i){this._nextTick(i)},f.prototype.batch=function(t,e,i){if(!arguments.length)return this._chainedBatch();if("function"==typeof e&&(i=e),"function"!=typeof(i="function"==typeof t?t:i))throw new Error("batch(array) requires a callback argument");if(!Array.isArray(t))return this._nextTick(i,new Error("batch(array) requires an array argument"));if(0===t.length)return this._nextTick(i);"object"==typeof e&&null!==e||(e={});var r=new Array(t.length);for(let e=0;e<t.length;e++){if("object"!=typeof t[e]||null===t[e])return this._nextTick(i,new Error("batch(array) element must be an object and not `null`"));var s=Object.assign({},t[e]);if("put"!==s.type&&"del"!==s.type)return this._nextTick(i,new Error("`type` must be 'put' or 'del'"));var n=this._checkKey(s.key);if(n)return this._nextTick(i,n);if(s.key=this._serializeKey(s.key),"put"===s.type){if(n=this._checkValue(s.value))return this._nextTick(i,n);s.value=this._serializeValue(s.value)}r[e]=s}this._batch(r,e,i)},f.prototype._batch=function(t,e,i){this._nextTick(i)},f.prototype.clear=function(t,e){if("function"==typeof t)e=t;else if("function"!=typeof e)throw new Error("clear() requires a callback argument");(t=d(this,t)).reverse=!!t.reverse,t.limit="limit"in t?t.limit:-1,this._clear(t,e)},f.prototype._clear=function(t,e){t.keys=!0,t.values=!1,t.keyAsBuffer=!0,t.valueAsBuffer=!0;const i=this._iterator(t),r={},s=t=>{if(t)return i.end((function(){e(t)}));i.next((t,n)=>t?s(t):void 0===n?i.end(e):void this._del(n,r,s))};s()},f.prototype._setupIteratorOptions=function(t){return(t=d(this,t)).reverse=!!t.reverse,t.keys=!1!==t.keys,t.values=!1!==t.values,t.limit="limit"in t?t.limit:-1,t.keyAsBuffer=!1!==t.keyAsBuffer,t.valueAsBuffer=!1!==t.valueAsBuffer,t},f.prototype.iterator=function(t){return t=this._setupIteratorOptions(t="object"==typeof t&&null!==t?t:{}),this._iterator(t)},f.prototype._iterator=function(t){return new o(this)},f.prototype._chainedBatch=function(){return new a(this)},f.prototype._serializeKey=function(t){return t},f.prototype._serializeValue=function(t){return t},f.prototype._checkKey=function(t){return null==t?new Error("key cannot be `null` or `undefined`"):s(t)&&0===t.length?new Error("key cannot be an empty Buffer"):""===t?new Error("key cannot be an empty String"):Array.isArray(t)&&0===t.length?new Error("key cannot be an empty Array"):void 0},f.prototype._checkValue=function(t){if(null==t)return new Error("value cannot be `null` or `undefined`")},f.prototype.isOperational=function(){return"open"===this.status||this._isOperational()},f.prototype._isOperational=function(){return!1},f.prototype._nextTick=i(156),t.exports=f},function(t,e,i){"use strict";function r(t){return!!t&&Object.assign({},t)}t.exports=function(...t){return t=t.reduce((t,e)=>Object.assign(t,e),{}),Object.assign(t,{bufferKeys:t.bufferKeys||!1,snapshots:t.snapshots||!1,permanence:t.permanence||!1,seek:t.seek||!1,clear:t.clear||!1,getMany:t.getMany||!1,keyIterator:t.keyIterator||!1,valueIterator:t.valueIterator||!1,iteratorNextv:t.iteratorNextv||!1,iteratorAll:t.iteratorAll||!1,status:t.status||!1,idempotentOpen:t.idempotentOpen||!1,passiveOpen:t.passiveOpen||!1,serialize:t.serialize||!1,createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,deferredOpen:t.deferredOpen||!1,openCallback:t.openCallback||!1,promises:t.promises||!1,streams:t.streams||!1,encodings:r(t.encodings),events:r(t.events),additionalMethods:Object.assign({},t.additionalMethods)})}},function(t,e){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},function(t,e,i){"use strict";var r=i(394);e.fromCallback=function(t,e){if(void 0===t){var i=new Promise((function(e,i){t=function(t,r){t?i(t):e(r)}}));t[void 0!==e?e:"promise"]=i}else if("function"!=typeof t)throw new TypeError("Callback must be a function");return t},e.fromPromise=function(t,e){if(void 0===e)return t;t.then((function(t){r(()=>e(null,t))})).catch((function(t){r(()=>e(t))}))}},function(t,e){t.exports="function"==typeof queueMicrotask?queueMicrotask:t=>Promise.resolve().then(t)},function(t,e,i){
/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.exports=function(t,e,i){if("number"!=typeof e)throw new Error("second argument must be a Number");let s,n,o,a,h,c,u=!0;function l(t){function e(){i&&i(t,s),i=null}u?r(e):e()}function f(e,i,r){if(s[e]=r,i&&(h=!0),0==--o||i)l(i);else if(!h&&c<n){let e;a?(e=a[c],c+=1,t[e]((function(t,i){f(e,t,i)}))):(e=c,c+=1,t[e]((function(t,i){f(e,t,i)})))}}o=n=(Array.isArray(t)?(s=[],t):(a=Object.keys(t),s={},a)).length,c=e,o?a?a.some((function(i,r){return t[i]((function(t,e){f(i,t,e)})),r===e-1})):t.some((function(t,i){return t((function(t,e){f(i,t,e)})),i===e-1})):l(null),u=!1};const r=i(241)},function(t,e,i){"use strict";var r=i(5);const s=i(239).AbstractIterator,n=i(244);function o(){}function a(t,e,i){if(s.call(this,t),this._limit=i.limit,this._count=0,this._callback=null,this._cache=[],this._completed=!1,this._aborted=!1,this._error=null,this._transaction=null,this._keys=i.keys,this._values=i.values,this._keyAsBuffer=i.keyAsBuffer,this._valueAsBuffer=i.valueAsBuffer,0===this._limit)this._completed=!0;else{let r;try{r=n(i)}catch(t){return void(this._completed=!0)}this.createIterator(e,r,i.reverse)}}i=i(245),r(t.exports=a,s),a.prototype.createIterator=function(t,e,i){var r=this.db.db.transaction([t],"readonly");r.objectStore(t).openCursor(e,i?"prev":"next").onsuccess=t=>{(t=t.target.result)&&this.onItem(t)},(this._transaction=r).onabort=()=>{this.onAbort(this._transaction.error||new Error("aborted by user"))},r.oncomplete=()=>{this.onComplete()}},a.prototype.onItem=function(t){this._cache.push(t.key,t.value),(this._limit<=0||++this._count<this._limit)&&t.continue(),this.maybeNext()},a.prototype.onAbort=function(t){this._aborted=!0,this._error=t,this.maybeNext()},a.prototype.onComplete=function(){this._completed=!0,this.maybeNext()},a.prototype.maybeNext=function(){this._callback&&(this._next(this._callback),this._callback=null)},a.prototype._next=function(t){if(this._aborted){var e=this._error;this._error=null,this._nextTick(t,e)}else if(0<this._cache.length){let e=this._cache.shift(),i=this._cache.shift();e=this._keys&&void 0!==e?this._deserializeKey(e,this._keyAsBuffer):void 0,i=this._values&&void 0!==i?this._deserializeValue(i,this._valueAsBuffer):void 0,this._nextTick(t,null,e,i)}else this._completed?this._nextTick(t):this._callback=t},a.prototype._deserializeKey=i,a.prototype._deserializeValue=i,a.prototype._end=function(t){if(this._aborted||this._completed)return this._nextTick(t,this._error);this.onItem=o,this.onAbort=t,this.onComplete=t}},function(t,e,i){(function(t){function i(t){return void 0!==t&&""!==t}function r(t,e){return Object.hasOwnProperty.call(t,e)}function s(t,e){return Object.hasOwnProperty.call(t,e)&&e}e.compare=function(e,i){if(t.isBuffer(e)){for(var r=Math.min(e.length,i.length),s=0;s<r;s++){var n=e[s]-i[s];if(n)return n}return e.length-i.length}return e<i?-1:i<e?1:0};var n=e.lowerBoundKey=function(t){return s(t,"gt")||s(t,"gte")||s(t,"min")||(t.reverse?s(t,"end"):s(t,"start"))||void 0},o=e.lowerBound=function(t,e){var i=n(t);return i?t[i]:e},a=e.lowerBoundInclusive=function(t){return!r(t,"gt")},h=e.upperBoundInclusive=function(t){return!r(t,"lt")},c=e.lowerBoundExclusive=function(t){return!a(t)},u=e.upperBoundExclusive=function(t){return!h(t)},l=e.upperBoundKey=function(t){return s(t,"lt")||s(t,"lte")||s(t,"max")||(t.reverse?s(t,"start"):s(t,"end"))||void 0},f=e.upperBound=function(t,e){var i=l(t);return i?t[i]:e};function d(t){return t}e.start=function(t,e){return(t.reverse?f:o)(t,e)},e.end=function(t,e){return(t.reverse?o:f)(t,e)},e.startInclusive=function(t){return(t.reverse?h:a)(t)},e.endInclusive=function(t){return(t.reverse?a:h)(t)},e.toLtgt=function(t,i,s,n,o){i=i||{},s=s||d;var a=3<arguments.length,h=e.lowerBoundKey(t),c=e.upperBoundKey(t);return h?"gt"===h?i.gt=s(t.gt,!1):i.gte=s(t[h],!1):a&&(i.gte=s(n,!1)),c?"lt"===c?i.lt=s(t.lt,!0):i.lte=s(t[c],!0):a&&(i.lte=s(o,!0)),null!=t.reverse&&(i.reverse=!!t.reverse),r(i,"max")&&delete i.max,r(i,"min")&&delete i.min,r(i,"start")&&delete i.start,r(i,"end")&&delete i.end,i},e.contains=function(t,r,s){var n,a;return s=s||e.compare,(!i(a=o(t))||!((n=s(r,a))<0||0===n&&c(t)))&&(!i(a=f(t))||!(0<(n=s(r,a))||0===n&&u(t)))},e.filter=function(t,i){return function(r){return e.contains(t,r,i)}}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){const r=i(0).Buffer,s=e.TextEncoder?(e=new TextEncoder("utf-8")).encode.bind(e):r.from;t.exports=function(t,e){return e?r.isBuffer(t)?t:s(String(t)):String(t)}}).call(this,i(12))},function(t,e,i){"use strict";i=i(0).Buffer,e.test=function(t){return function(e){try{return e.cmp(t,0),!0}catch(e){return!1}}},e.bufferKeys=e.test(i.alloc(0))},function(t,e,i){"use strict";t.exports=function(t,e,i,r,s){if(0===r.limit)return t._nextTick(s);const n=t.db.transaction([e],"readwrite"),o=n.objectStore(e);let a=0;n.oncomplete=function(){s()},n.onabort=function(){s(n.error||new Error("aborted by user"))},t=o.openKeyCursor?"openKeyCursor":"openCursor",e=r.reverse?"prev":"next",o[t](i,e).onsuccess=function(t){const e=t.target.result;e&&(o.delete(e.key).onsuccess=function(){(r.limit<=0||++a<r.limit)&&e.continue()})}}},function(t,e,i){"use strict";(function(e){
/*!
 * layout-browser.js - chaindb layout for browser.
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1);var s=i(3);const n=s.pad8,o=s.pad32;function a(t){return e.isBuffer(t)&&(t=t.toString("hex")),r("string"==typeof t),t}t.exports={binary:!1,C:function(t,e,i){return 64===(t=a(t)).length?"X"+t+a(e)+o(i):(r(40===t.length),"C"+t+a(e)+o(i))},Cc:function(t){let e,i;return r("string"==typeof t),139===t.length?(e=t.slice(65,129),i=parseInt(t.slice(129),10)):115===t.length?(e=t.slice(41,105),i=parseInt(t.slice(105),10)):r(!1),[e,i]},CP:function(t){return"CP"+t},CPc:function(t){return r("string"==typeof t),r(38===t.length),t.slice(2)},CV:"CV",EN2:function(t,e,i=0){return"EN2"+t+e},ER:function(t){return"ER"+t},ERR:function(t,e,i){return"ERR"+t+e+i},ERRR:function(t){return[(t=t.toString()).slice(3,69),t.slice(69,133),t.slice(133,197)]},ERA:function(t){return"ERA"+t},H:function(t){return"H"+o(t)},HL:"HL",R:"R",T:function(t,e){return 64===(t=a(t)).length?"W"+t+a(e):(r(40===t.length),"T"+t+a(e))},Tt:function(t){return r("string"==typeof t),129===t.length?t.slice(64):(r(105===t.length),t.slice(41))},version:function(t){return o(t)},O:"O",SC:function(t){return"SC"+t},V:"V",VM:function(t){return"VM"+o(t)},VO:function(t){return"VO"+o(t)},VP:function(t){return"VP"+t},VPc:function(t){return r("string"==typeof t),r(38===t.length),t.slice(2,38)},VH:function(t,e){return"VH"+t+o(e)},b:function(t){return"b"+a(t)},c:function(t,e){return"c"+a(t)+o(e)},e:function(t){return"e"+a(t)},h:function(t){return"h"+a(t)},n:function(t){return"n"+a(t)},p:function(t){return"p"+a(t)},pp:function(t){return r("string"==typeof t),r(65===t.length),t.slice(1,65)},t:function(t){return"t"+a(t)},th:function(t,e){return r("number"==typeof t),"th"+o(t)+a(e)},thh:function(t){return r("string"==typeof t),r(44===t.length),{time:parseInt(t.slice(2,12),10),hash:t.slice(12)}},tx:function(t){return"tx"+t},u:function(t){return"u"+a(t)},v:function(t,e){return"v"+n(t)+a(e)},vv:function(t){return r("string"==typeof t),r(36===t.length),[parseInt(t.slice(1,4),10),t.slice(4,36)]},equalVersion:function(t,e){return t.toString()==o(e)},s2b:function(t){return e.from(t,"utf8")},b2s:t=>(r(e.isBuffer(t)),t.toString("utf8"))}}).call(this,i(0).Buffer)},function(t,e,i){i=i(35);i=new class extends i{constructor(){super("block",["tips"])}},t.exports=i},function(t,e,i){i=i(35);i=new class extends i{constructor(){super("chain",["full"])}},t.exports=i},function(t,e,i){i=i(35);i=new class extends i{constructor(){super("header",["block"])}},t.exports=i},function(t,e,i){i=i(35);i=new class extends i{constructor(){super("inv",["inv","tx","block"])}},t.exports=i},function(t,e,i){i=i(35);i=new class extends i{constructor(){super("mempool",["transaction"])}},t.exports=i},function(t,e,i){i=i(35);i=new class extends i{constructor(){super("config",["changed"])}},t.exports=i},function(t,e,i){i=i(35);i=new class extends i{constructor(){super("p2p",["transaction","block","headers"])}},t.exports=i},function(t,e,i){i=i(35);i=new class extends i{constructor(){super("prop",["receive"])}},t.exports=i},function(t,e,i){i=i(35);i=new class extends i{constructor(){super("notify",["receive","remove"])}},t.exports=i},function(t,e,i){i=i(35);i=new class extends i{constructor(){super("ca",["issue","unissue","abolish","unabolish"])}},t.exports=i},function(t,e,i){i=i(35);i=new class extends i{constructor(){super("cp",["register"])}},t.exports=i},function(t,e,i){i=i(35);i=new class extends i{constructor(){super("sc",["publish"])}},t.exports=i},function(t,e,i){"use strict";(function(e){var r=i(1);function s(t,e){if(!t)throw new s.AssertionError({message:e,actual:t,expected:!0,operator:"==",stackStartFunction:s})}const n=i(131);function o(t,e,i){if("string"!=typeof t)throw new s.AssertionError({message:e,actual:c(t),expected:"string",operator:"typeof ==",stackStartFunction:i})}function a(t,e,i){if("function"!=typeof t)throw new s.AssertionError({message:e,actual:c(t),expected:"function",operator:"typeof ==",stackStartFunction:i})}function h(t,i,r){if(!e.isBuffer(t))throw new s.AssertionError({message:i,actual:c(t),expected:"buffer",operator:"typeof ==",stackStartFunction:r})}function c(t){var i=typeof t;switch(i){case"object":if(null===t)return"null";if(Array.isArray(t))return"array";if(e.isBuffer(t))return"buffer";if(ArrayBuffer.isView(t))return"arraybuffer";if(n.isError(t))return"error";if(n.isDate(t))return"date";if(n.isRegExp(t))return"regexp";break;case"number":if(isFinite(t))break;return"nan"}return i}function u(t){if(void 0===t)return"undefined";if(null===t)return"null";if(void 0===(t=Object.getPrototypeOf(t)))throw new Error("Bad prototype.");return null===t?"Null":t.constructor?t.constructor.name||"Unknown":"Object"}function l(t){return t.name||"Unknown"}Object.setPrototypeOf(s,r),s.typeOf=function t(e,i,r){if(o(i,"`expected` must be a string.",t),(e=c(e))!==i)throw new s.AssertionError({message:r,actual:e,expected:i,operator:"typeof ==",stackStartFunction:t})},s.notTypeOf=function t(e,i,r){if(o(i,"`expected` must be a string.",t),(e=c(e))===i)throw new s.AssertionError({message:r,actual:e,expected:i,operator:"typeof !=",stackStartFunction:t})},s.instanceOf=function t(e,i,r){if(a(i,"`parent` must be a constructor.",t),!(e instanceof i))throw new s.AssertionError({message:r,actual:u(e),expected:l(i),operator:"instanceof",stackStartFunction:t})},s.notInstanceOf=function t(e,i,r){if(a(i,"`parent` must be a constructor.",t),e instanceof i)throw new s.AssertionError({message:r,actual:u(e),expected:l(i),operator:"not instanceof",stackStartFunction:t})},s.bufferEqual=function t(e,i,r){if(h(e,"`actual` must be a buffer.",t),h(i,"`expected` must be a buffer.",t),e!==i&&!e.equals(i))throw new s.AssertionError({message:r,actual:e.toString("hex"),expected:i.toString("hex"),operator:"===",stackStartFunction:t})},s.notBufferEqual=function t(e,i,r){if(h(e,"`actual` must be a buffer.",t),h(i,"`expected` must be a buffer.",t),e===i||e.equals(i))throw new s.AssertionError({message:r,actual:e.toString("hex"),expected:i.toString("hex"),operator:"!==",stackStartFunction:t})},t.exports=s}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * index.js - wordlists for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */e.chinese={simplified:i(416),traditional:i(417)},e.english=i(418),e.french=i(419),e.italian=i(420),e.japanese=i(421),e.spanish=i(422)},function(t,e,i){"use strict";t.exports=["的","一","是","在","不","了","有","和","人","这","中","大","为","上","个","国","我","以","要","他","时","来","用","们","生","到","作","地","于","出","就","分","对","成","会","可","主","发","年","动","同","工","也","能","下","过","子","说","产","种","面","而","方","后","多","定","行","学","法","所","民","得","经","十","三","之","进","着","等","部","度","家","电","力","里","如","水","化","高","自","二","理","起","小","物","现","实","加","量","都","两","体","制","机","当","使","点","从","业","本","去","把","性","好","应","开","它","合","还","因","由","其","些","然","前","外","天","政","四","日","那","社","义","事","平","形","相","全","表","间","样","与","关","各","重","新","线","内","数","正","心","反","你","明","看","原","又","么","利","比","或","但","质","气","第","向","道","命","此","变","条","只","没","结","解","问","意","建","月","公","无","系","军","很","情","者","最","立","代","想","已","通","并","提","直","题","党","程","展","五","果","料","象","员","革","位","入","常","文","总","次","品","式","活","设","及","管","特","件","长","求","老","头","基","资","边","流","路","级","少","图","山","统","接","知","较","将","组","见","计","别","她","手","角","期","根","论","运","农","指","几","九","区","强","放","决","西","被","干","做","必","战","先","回","则","任","取","据","处","队","南","给","色","光","门","即","保","治","北","造","百","规","热","领","七","海","口","东","导","器","压","志","世","金","增","争","济","阶","油","思","术","极","交","受","联","什","认","六","共","权","收","证","改","清","美","再","采","转","更","单","风","切","打","白","教","速","花","带","安","场","身","车","例","真","务","具","万","每","目","至","达","走","积","示","议","声","报","斗","完","类","八","离","华","名","确","才","科","张","信","马","节","话","米","整","空","元","况","今","集","温","传","土","许","步","群","广","石","记","需","段","研","界","拉","林","律","叫","且","究","观","越","织","装","影","算","低","持","音","众","书","布","复","容","儿","须","际","商","非","验","连","断","深","难","近","矿","千","周","委","素","技","备","半","办","青","省","列","习","响","约","支","般","史","感","劳","便","团","往","酸","历","市","克","何","除","消","构","府","称","太","准","精","值","号","率","族","维","划","选","标","写","存","候","毛","亲","快","效","斯","院","查","江","型","眼","王","按","格","养","易","置","派","层","片","始","却","专","状","育","厂","京","识","适","属","圆","包","火","住","调","满","县","局","照","参","红","细","引","听","该","铁","价","严","首","底","液","官","德","随","病","苏","失","尔","死","讲","配","女","黄","推","显","谈","罪","神","艺","呢","席","含","企","望","密","批","营","项","防","举","球","英","氧","势","告","李","台","落","木","帮","轮","破","亚","师","围","注","远","字","材","排","供","河","态","封","另","施","减","树","溶","怎","止","案","言","士","均","武","固","叶","鱼","波","视","仅","费","紧","爱","左","章","早","朝","害","续","轻","服","试","食","充","兵","源","判","护","司","足","某","练","差","致","板","田","降","黑","犯","负","击","范","继","兴","似","余","坚","曲","输","修","故","城","夫","够","送","笔","船","占","右","财","吃","富","春","职","觉","汉","画","功","巴","跟","虽","杂","飞","检","吸","助","升","阳","互","初","创","抗","考","投","坏","策","古","径","换","未","跑","留","钢","曾","端","责","站","简","述","钱","副","尽","帝","射","草","冲","承","独","令","限","阿","宣","环","双","请","超","微","让","控","州","良","轴","找","否","纪","益","依","优","顶","础","载","倒","房","突","坐","粉","敌","略","客","袁","冷","胜","绝","析","块","剂","测","丝","协","诉","念","陈","仍","罗","盐","友","洋","错","苦","夜","刑","移","频","逐","靠","混","母","短","皮","终","聚","汽","村","云","哪","既","距","卫","停","烈","央","察","烧","迅","境","若","印","洲","刻","括","激","孔","搞","甚","室","待","核","校","散","侵","吧","甲","游","久","菜","味","旧","模","湖","货","损","预","阻","毫","普","稳","乙","妈","植","息","扩","银","语","挥","酒","守","拿","序","纸","医","缺","雨","吗","针","刘","啊","急","唱","误","训","愿","审","附","获","茶","鲜","粮","斤","孩","脱","硫","肥","善","龙","演","父","渐","血","欢","械","掌","歌","沙","刚","攻","谓","盾","讨","晚","粒","乱","燃","矛","乎","杀","药","宁","鲁","贵","钟","煤","读","班","伯","香","介","迫","句","丰","培","握","兰","担","弦","蛋","沉","假","穿","执","答","乐","谁","顺","烟","缩","征","脸","喜","松","脚","困","异","免","背","星","福","买","染","井","概","慢","怕","磁","倍","祖","皇","促","静","补","评","翻","肉","践","尼","衣","宽","扬","棉","希","伤","操","垂","秋","宜","氢","套","督","振","架","亮","末","宪","庆","编","牛","触","映","雷","销","诗","座","居","抓","裂","胞","呼","娘","景","威","绿","晶","厚","盟","衡","鸡","孙","延","危","胶","屋","乡","临","陆","顾","掉","呀","灯","岁","措","束","耐","剧","玉","赵","跳","哥","季","课","凯","胡","额","款","绍","卷","齐","伟","蒸","殖","永","宗","苗","川","炉","岩","弱","零","杨","奏","沿","露","杆","探","滑","镇","饭","浓","航","怀","赶","库","夺","伊","灵","税","途","灭","赛","归","召","鼓","播","盘","裁","险","康","唯","录","菌","纯","借","糖","盖","横","符","私","努","堂","域","枪","润","幅","哈","竟","熟","虫","泽","脑","壤","碳","欧","遍","侧","寨","敢","彻","虑","斜","薄","庭","纳","弹","饲","伸","折","麦","湿","暗","荷","瓦","塞","床","筑","恶","户","访","塔","奇","透","梁","刀","旋","迹","卡","氯","遇","份","毒","泥","退","洗","摆","灰","彩","卖","耗","夏","择","忙","铜","献","硬","予","繁","圈","雪","函","亦","抽","篇","阵","阴","丁","尺","追","堆","雄","迎","泛","爸","楼","避","谋","吨","野","猪","旗","累","偏","典","馆","索","秦","脂","潮","爷","豆","忽","托","惊","塑","遗","愈","朱","替","纤","粗","倾","尚","痛","楚","谢","奋","购","磨","君","池","旁","碎","骨","监","捕","弟","暴","割","贯","殊","释","词","亡","壁","顿","宝","午","尘","闻","揭","炮","残","冬","桥","妇","警","综","招","吴","付","浮","遭","徐","您","摇","谷","赞","箱","隔","订","男","吹","园","纷","唐","败","宋","玻","巨","耕","坦","荣","闭","湾","键","凡","驻","锅","救","恩","剥","凝","碱","齿","截","炼","麻","纺","禁","废","盛","版","缓","净","睛","昌","婚","涉","筒","嘴","插","岸","朗","庄","街","藏","姑","贸","腐","奴","啦","惯","乘","伙","恢","匀","纱","扎","辩","耳","彪","臣","亿","璃","抵","脉","秀","萨","俄","网","舞","店","喷","纵","寸","汗","挂","洪","贺","闪","柬","爆","烯","津","稻","墙","软","勇","像","滚","厘","蒙","芳","肯","坡","柱","荡","腿","仪","旅","尾","轧","冰","贡","登","黎","削","钻","勒","逃","障","氨","郭","峰","币","港","伏","轨","亩","毕","擦","莫","刺","浪","秘","援","株","健","售","股","岛","甘","泡","睡","童","铸","汤","阀","休","汇","舍","牧","绕","炸","哲","磷","绩","朋","淡","尖","启","陷","柴","呈","徒","颜","泪","稍","忘","泵","蓝","拖","洞","授","镜","辛","壮","锋","贫","虚","弯","摩","泰","幼","廷","尊","窗","纲","弄","隶","疑","氏","宫","姐","震","瑞","怪","尤","琴","循","描","膜","违","夹","腰","缘","珠","穷","森","枝","竹","沟","催","绳","忆","邦","剩","幸","浆","栏","拥","牙","贮","礼","滤","钠","纹","罢","拍","咱","喊","袖","埃","勤","罚","焦","潜","伍","墨","欲","缝","姓","刊","饱","仿","奖","铝","鬼","丽","跨","默","挖","链","扫","喝","袋","炭","污","幕","诸","弧","励","梅","奶","洁","灾","舟","鉴","苯","讼","抱","毁","懂","寒","智","埔","寄","届","跃","渡","挑","丹","艰","贝","碰","拔","爹","戴","码","梦","芽","熔","赤","渔","哭","敬","颗","奔","铅","仲","虎","稀","妹","乏","珍","申","桌","遵","允","隆","螺","仓","魏","锐","晓","氮","兼","隐","碍","赫","拨","忠","肃","缸","牵","抢","博","巧","壳","兄","杜","讯","诚","碧","祥","柯","页","巡","矩","悲","灌","龄","伦","票","寻","桂","铺","圣","恐","恰","郑","趣","抬","荒","腾","贴","柔","滴","猛","阔","辆","妻","填","撤","储","签","闹","扰","紫","砂","递","戏","吊","陶","伐","喂","疗","瓶","婆","抚","臂","摸","忍","虾","蜡","邻","胸","巩","挤","偶","弃","槽","劲","乳","邓","吉","仁","烂","砖","租","乌","舰","伴","瓜","浅","丙","暂","燥","橡","柳","迷","暖","牌","秧","胆","详","簧","踏","瓷","谱","呆","宾","糊","洛","辉","愤","竞","隙","怒","粘","乃","绪","肩","籍","敏","涂","熙","皆","侦","悬","掘","享","纠","醒","狂","锁","淀","恨","牲","霸","爬","赏","逆","玩","陵","祝","秒","浙","貌","役","彼","悉","鸭","趋","凤","晨","畜","辈","秩","卵","署","梯","炎","滩","棋","驱","筛","峡","冒","啥","寿","译","浸","泉","帽","迟","硅","疆","贷","漏","稿","冠","嫩","胁","芯","牢","叛","蚀","奥","鸣","岭","羊","凭","串","塘","绘","酵","融","盆","锡","庙","筹","冻","辅","摄","袭","筋","拒","僚","旱","钾","鸟","漆","沈","眉","疏","添","棒","穗","硝","韩","逼","扭","侨","凉","挺","碗","栽","炒","杯","患","馏","劝","豪","辽","勃","鸿","旦","吏","拜","狗","埋","辊","掩","饮","搬","骂","辞","勾","扣","估","蒋","绒","雾","丈","朵","姆","拟","宇","辑","陕","雕","偿","蓄","崇","剪","倡","厅","咬","驶","薯","刷","斥","番","赋","奉","佛","浇","漫","曼","扇","钙","桃","扶","仔","返","俗","亏","腔","鞋","棱","覆","框","悄","叔","撞","骗","勘","旺","沸","孤","吐","孟","渠","屈","疾","妙","惜","仰","狠","胀","谐","抛","霉","桑","岗","嘛","衰","盗","渗","脏","赖","涌","甜","曹","阅","肌","哩","厉","烃","纬","毅","昨","伪","症","煮","叹","钉","搭","茎","笼","酷","偷","弓","锥","恒","杰","坑","鼻","翼","纶","叙","狱","逮","罐","络","棚","抑","膨","蔬","寺","骤","穆","冶","枯","册","尸","凸","绅","坯","牺","焰","轰","欣","晋","瘦","御","锭","锦","丧","旬","锻","垄","搜","扑","邀","亭","酯","迈","舒","脆","酶","闲","忧","酚","顽","羽","涨","卸","仗","陪","辟","惩","杭","姚","肚","捉","飘","漂","昆","欺","吾","郎","烷","汁","呵","饰","萧","雅","邮","迁","燕","撒","姻","赴","宴","烦","债","帐","斑","铃","旨","醇","董","饼","雏","姿","拌","傅","腹","妥","揉","贤","拆","歪","葡","胺","丢","浩","徽","昂","垫","挡","览","贪","慰","缴","汪","慌","冯","诺","姜","谊","凶","劣","诬","耀","昏","躺","盈","骑","乔","溪","丛","卢","抹","闷","咨","刮","驾","缆","悟","摘","铒","掷","颇","幻","柄","惠","惨","佳","仇","腊","窝","涤","剑","瞧","堡","泼","葱","罩","霍","捞","胎","苍","滨","俩","捅","湘","砍","霞","邵","萄","疯","淮","遂","熊","粪","烘","宿","档","戈","驳","嫂","裕","徙","箭","捐","肠","撑","晒","辨","殿","莲","摊","搅","酱","屏","疫","哀","蔡","堵","沫","皱","畅","叠","阁","莱","敲","辖","钩","痕","坝","巷","饿","祸","丘","玄","溜","曰","逻","彭","尝","卿","妨","艇","吞","韦","怨","矮","歇"]},function(t,e,i){"use strict";t.exports=["的","一","是","在","不","了","有","和","人","這","中","大","為","上","個","國","我","以","要","他","時","來","用","們","生","到","作","地","於","出","就","分","對","成","會","可","主","發","年","動","同","工","也","能","下","過","子","說","產","種","面","而","方","後","多","定","行","學","法","所","民","得","經","十","三","之","進","著","等","部","度","家","電","力","裡","如","水","化","高","自","二","理","起","小","物","現","實","加","量","都","兩","體","制","機","當","使","點","從","業","本","去","把","性","好","應","開","它","合","還","因","由","其","些","然","前","外","天","政","四","日","那","社","義","事","平","形","相","全","表","間","樣","與","關","各","重","新","線","內","數","正","心","反","你","明","看","原","又","麼","利","比","或","但","質","氣","第","向","道","命","此","變","條","只","沒","結","解","問","意","建","月","公","無","系","軍","很","情","者","最","立","代","想","已","通","並","提","直","題","黨","程","展","五","果","料","象","員","革","位","入","常","文","總","次","品","式","活","設","及","管","特","件","長","求","老","頭","基","資","邊","流","路","級","少","圖","山","統","接","知","較","將","組","見","計","別","她","手","角","期","根","論","運","農","指","幾","九","區","強","放","決","西","被","幹","做","必","戰","先","回","則","任","取","據","處","隊","南","給","色","光","門","即","保","治","北","造","百","規","熱","領","七","海","口","東","導","器","壓","志","世","金","增","爭","濟","階","油","思","術","極","交","受","聯","什","認","六","共","權","收","證","改","清","美","再","採","轉","更","單","風","切","打","白","教","速","花","帶","安","場","身","車","例","真","務","具","萬","每","目","至","達","走","積","示","議","聲","報","鬥","完","類","八","離","華","名","確","才","科","張","信","馬","節","話","米","整","空","元","況","今","集","溫","傳","土","許","步","群","廣","石","記","需","段","研","界","拉","林","律","叫","且","究","觀","越","織","裝","影","算","低","持","音","眾","書","布","复","容","兒","須","際","商","非","驗","連","斷","深","難","近","礦","千","週","委","素","技","備","半","辦","青","省","列","習","響","約","支","般","史","感","勞","便","團","往","酸","歷","市","克","何","除","消","構","府","稱","太","準","精","值","號","率","族","維","劃","選","標","寫","存","候","毛","親","快","效","斯","院","查","江","型","眼","王","按","格","養","易","置","派","層","片","始","卻","專","狀","育","廠","京","識","適","屬","圓","包","火","住","調","滿","縣","局","照","參","紅","細","引","聽","該","鐵","價","嚴","首","底","液","官","德","隨","病","蘇","失","爾","死","講","配","女","黃","推","顯","談","罪","神","藝","呢","席","含","企","望","密","批","營","項","防","舉","球","英","氧","勢","告","李","台","落","木","幫","輪","破","亞","師","圍","注","遠","字","材","排","供","河","態","封","另","施","減","樹","溶","怎","止","案","言","士","均","武","固","葉","魚","波","視","僅","費","緊","愛","左","章","早","朝","害","續","輕","服","試","食","充","兵","源","判","護","司","足","某","練","差","致","板","田","降","黑","犯","負","擊","范","繼","興","似","餘","堅","曲","輸","修","故","城","夫","夠","送","筆","船","佔","右","財","吃","富","春","職","覺","漢","畫","功","巴","跟","雖","雜","飛","檢","吸","助","昇","陽","互","初","創","抗","考","投","壞","策","古","徑","換","未","跑","留","鋼","曾","端","責","站","簡","述","錢","副","盡","帝","射","草","衝","承","獨","令","限","阿","宣","環","雙","請","超","微","讓","控","州","良","軸","找","否","紀","益","依","優","頂","礎","載","倒","房","突","坐","粉","敵","略","客","袁","冷","勝","絕","析","塊","劑","測","絲","協","訴","念","陳","仍","羅","鹽","友","洋","錯","苦","夜","刑","移","頻","逐","靠","混","母","短","皮","終","聚","汽","村","雲","哪","既","距","衛","停","烈","央","察","燒","迅","境","若","印","洲","刻","括","激","孔","搞","甚","室","待","核","校","散","侵","吧","甲","遊","久","菜","味","舊","模","湖","貨","損","預","阻","毫","普","穩","乙","媽","植","息","擴","銀","語","揮","酒","守","拿","序","紙","醫","缺","雨","嗎","針","劉","啊","急","唱","誤","訓","願","審","附","獲","茶","鮮","糧","斤","孩","脫","硫","肥","善","龍","演","父","漸","血","歡","械","掌","歌","沙","剛","攻","謂","盾","討","晚","粒","亂","燃","矛","乎","殺","藥","寧","魯","貴","鐘","煤","讀","班","伯","香","介","迫","句","豐","培","握","蘭","擔","弦","蛋","沉","假","穿","執","答","樂","誰","順","煙","縮","徵","臉","喜","松","腳","困","異","免","背","星","福","買","染","井","概","慢","怕","磁","倍","祖","皇","促","靜","補","評","翻","肉","踐","尼","衣","寬","揚","棉","希","傷","操","垂","秋","宜","氫","套","督","振","架","亮","末","憲","慶","編","牛","觸","映","雷","銷","詩","座","居","抓","裂","胞","呼","娘","景","威","綠","晶","厚","盟","衡","雞","孫","延","危","膠","屋","鄉","臨","陸","顧","掉","呀","燈","歲","措","束","耐","劇","玉","趙","跳","哥","季","課","凱","胡","額","款","紹","卷","齊","偉","蒸","殖","永","宗","苗","川","爐","岩","弱","零","楊","奏","沿","露","桿","探","滑","鎮","飯","濃","航","懷","趕","庫","奪","伊","靈","稅","途","滅","賽","歸","召","鼓","播","盤","裁","險","康","唯","錄","菌","純","借","糖","蓋","橫","符","私","努","堂","域","槍","潤","幅","哈","竟","熟","蟲","澤","腦","壤","碳","歐","遍","側","寨","敢","徹","慮","斜","薄","庭","納","彈","飼","伸","折","麥","濕","暗","荷","瓦","塞","床","築","惡","戶","訪","塔","奇","透","梁","刀","旋","跡","卡","氯","遇","份","毒","泥","退","洗","擺","灰","彩","賣","耗","夏","擇","忙","銅","獻","硬","予","繁","圈","雪","函","亦","抽","篇","陣","陰","丁","尺","追","堆","雄","迎","泛","爸","樓","避","謀","噸","野","豬","旗","累","偏","典","館","索","秦","脂","潮","爺","豆","忽","托","驚","塑","遺","愈","朱","替","纖","粗","傾","尚","痛","楚","謝","奮","購","磨","君","池","旁","碎","骨","監","捕","弟","暴","割","貫","殊","釋","詞","亡","壁","頓","寶","午","塵","聞","揭","炮","殘","冬","橋","婦","警","綜","招","吳","付","浮","遭","徐","您","搖","谷","贊","箱","隔","訂","男","吹","園","紛","唐","敗","宋","玻","巨","耕","坦","榮","閉","灣","鍵","凡","駐","鍋","救","恩","剝","凝","鹼","齒","截","煉","麻","紡","禁","廢","盛","版","緩","淨","睛","昌","婚","涉","筒","嘴","插","岸","朗","莊","街","藏","姑","貿","腐","奴","啦","慣","乘","夥","恢","勻","紗","扎","辯","耳","彪","臣","億","璃","抵","脈","秀","薩","俄","網","舞","店","噴","縱","寸","汗","掛","洪","賀","閃","柬","爆","烯","津","稻","牆","軟","勇","像","滾","厘","蒙","芳","肯","坡","柱","盪","腿","儀","旅","尾","軋","冰","貢","登","黎","削","鑽","勒","逃","障","氨","郭","峰","幣","港","伏","軌","畝","畢","擦","莫","刺","浪","秘","援","株","健","售","股","島","甘","泡","睡","童","鑄","湯","閥","休","匯","舍","牧","繞","炸","哲","磷","績","朋","淡","尖","啟","陷","柴","呈","徒","顏","淚","稍","忘","泵","藍","拖","洞","授","鏡","辛","壯","鋒","貧","虛","彎","摩","泰","幼","廷","尊","窗","綱","弄","隸","疑","氏","宮","姐","震","瑞","怪","尤","琴","循","描","膜","違","夾","腰","緣","珠","窮","森","枝","竹","溝","催","繩","憶","邦","剩","幸","漿","欄","擁","牙","貯","禮","濾","鈉","紋","罷","拍","咱","喊","袖","埃","勤","罰","焦","潛","伍","墨","欲","縫","姓","刊","飽","仿","獎","鋁","鬼","麗","跨","默","挖","鏈","掃","喝","袋","炭","污","幕","諸","弧","勵","梅","奶","潔","災","舟","鑑","苯","訟","抱","毀","懂","寒","智","埔","寄","屆","躍","渡","挑","丹","艱","貝","碰","拔","爹","戴","碼","夢","芽","熔","赤","漁","哭","敬","顆","奔","鉛","仲","虎","稀","妹","乏","珍","申","桌","遵","允","隆","螺","倉","魏","銳","曉","氮","兼","隱","礙","赫","撥","忠","肅","缸","牽","搶","博","巧","殼","兄","杜","訊","誠","碧","祥","柯","頁","巡","矩","悲","灌","齡","倫","票","尋","桂","鋪","聖","恐","恰","鄭","趣","抬","荒","騰","貼","柔","滴","猛","闊","輛","妻","填","撤","儲","簽","鬧","擾","紫","砂","遞","戲","吊","陶","伐","餵","療","瓶","婆","撫","臂","摸","忍","蝦","蠟","鄰","胸","鞏","擠","偶","棄","槽","勁","乳","鄧","吉","仁","爛","磚","租","烏","艦","伴","瓜","淺","丙","暫","燥","橡","柳","迷","暖","牌","秧","膽","詳","簧","踏","瓷","譜","呆","賓","糊","洛","輝","憤","競","隙","怒","粘","乃","緒","肩","籍","敏","塗","熙","皆","偵","懸","掘","享","糾","醒","狂","鎖","淀","恨","牲","霸","爬","賞","逆","玩","陵","祝","秒","浙","貌","役","彼","悉","鴨","趨","鳳","晨","畜","輩","秩","卵","署","梯","炎","灘","棋","驅","篩","峽","冒","啥","壽","譯","浸","泉","帽","遲","矽","疆","貸","漏","稿","冠","嫩","脅","芯","牢","叛","蝕","奧","鳴","嶺","羊","憑","串","塘","繪","酵","融","盆","錫","廟","籌","凍","輔","攝","襲","筋","拒","僚","旱","鉀","鳥","漆","沈","眉","疏","添","棒","穗","硝","韓","逼","扭","僑","涼","挺","碗","栽","炒","杯","患","餾","勸","豪","遼","勃","鴻","旦","吏","拜","狗","埋","輥","掩","飲","搬","罵","辭","勾","扣","估","蔣","絨","霧","丈","朵","姆","擬","宇","輯","陝","雕","償","蓄","崇","剪","倡","廳","咬","駛","薯","刷","斥","番","賦","奉","佛","澆","漫","曼","扇","鈣","桃","扶","仔","返","俗","虧","腔","鞋","棱","覆","框","悄","叔","撞","騙","勘","旺","沸","孤","吐","孟","渠","屈","疾","妙","惜","仰","狠","脹","諧","拋","黴","桑","崗","嘛","衰","盜","滲","臟","賴","湧","甜","曹","閱","肌","哩","厲","烴","緯","毅","昨","偽","症","煮","嘆","釘","搭","莖","籠","酷","偷","弓","錐","恆","傑","坑","鼻","翼","綸","敘","獄","逮","罐","絡","棚","抑","膨","蔬","寺","驟","穆","冶","枯","冊","屍","凸","紳","坯","犧","焰","轟","欣","晉","瘦","禦","錠","錦","喪","旬","鍛","壟","搜","撲","邀","亭","酯","邁","舒","脆","酶","閒","憂","酚","頑","羽","漲","卸","仗","陪","闢","懲","杭","姚","肚","捉","飄","漂","昆","欺","吾","郎","烷","汁","呵","飾","蕭","雅","郵","遷","燕","撒","姻","赴","宴","煩","債","帳","斑","鈴","旨","醇","董","餅","雛","姿","拌","傅","腹","妥","揉","賢","拆","歪","葡","胺","丟","浩","徽","昂","墊","擋","覽","貪","慰","繳","汪","慌","馮","諾","姜","誼","兇","劣","誣","耀","昏","躺","盈","騎","喬","溪","叢","盧","抹","悶","諮","刮","駕","纜","悟","摘","鉺","擲","頗","幻","柄","惠","慘","佳","仇","臘","窩","滌","劍","瞧","堡","潑","蔥","罩","霍","撈","胎","蒼","濱","倆","捅","湘","砍","霞","邵","萄","瘋","淮","遂","熊","糞","烘","宿","檔","戈","駁","嫂","裕","徙","箭","捐","腸","撐","曬","辨","殿","蓮","攤","攪","醬","屏","疫","哀","蔡","堵","沫","皺","暢","疊","閣","萊","敲","轄","鉤","痕","壩","巷","餓","禍","丘","玄","溜","曰","邏","彭","嘗","卿","妨","艇","吞","韋","怨","矮","歇"]},function(t,e,i){"use strict";t.exports=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"]},function(t,e,i){"use strict";t.exports=["abaisser","abandon","abdiquer","abeille","abolir","aborder","aboutir","aboyer","abrasif","abreuver","abriter","abroger","abrupt","absence","absolu","absurde","abusif","abyssal","académie","acajou","acarien","accabler","accepter","acclamer","accolade","accroche","accuser","acerbe","achat","acheter","aciduler","acier","acompte","acquérir","acronyme","acteur","actif","actuel","adepte","adéquat","adhésif","adjectif","adjuger","admettre","admirer","adopter","adorer","adoucir","adresse","adroit","adulte","adverbe","aérer","aéronef","affaire","affecter","affiche","affreux","affubler","agacer","agencer","agile","agiter","agrafer","agréable","agrume","aider","aiguille","ailier","aimable","aisance","ajouter","ajuster","alarmer","alchimie","alerte","algèbre","algue","aliéner","aliment","alléger","alliage","allouer","allumer","alourdir","alpaga","altesse","alvéole","amateur","ambigu","ambre","aménager","amertume","amidon","amiral","amorcer","amour","amovible","amphibie","ampleur","amusant","analyse","anaphore","anarchie","anatomie","ancien","anéantir","angle","angoisse","anguleux","animal","annexer","annonce","annuel","anodin","anomalie","anonyme","anormal","antenne","antidote","anxieux","apaiser","apéritif","aplanir","apologie","appareil","appeler","apporter","appuyer","aquarium","aqueduc","arbitre","arbuste","ardeur","ardoise","argent","arlequin","armature","armement","armoire","armure","arpenter","arracher","arriver","arroser","arsenic","artériel","article","aspect","asphalte","aspirer","assaut","asservir","assiette","associer","assurer","asticot","astre","astuce","atelier","atome","atrium","atroce","attaque","attentif","attirer","attraper","aubaine","auberge","audace","audible","augurer","aurore","automne","autruche","avaler","avancer","avarice","avenir","averse","aveugle","aviateur","avide","avion","aviser","avoine","avouer","avril","axial","axiome","badge","bafouer","bagage","baguette","baignade","balancer","balcon","baleine","balisage","bambin","bancaire","bandage","banlieue","bannière","banquier","barbier","baril","baron","barque","barrage","bassin","bastion","bataille","bateau","batterie","baudrier","bavarder","belette","bélier","belote","bénéfice","berceau","berger","berline","bermuda","besace","besogne","bétail","beurre","biberon","bicycle","bidule","bijou","bilan","bilingue","billard","binaire","biologie","biopsie","biotype","biscuit","bison","bistouri","bitume","bizarre","blafard","blague","blanchir","blessant","blinder","blond","bloquer","blouson","bobard","bobine","boire","boiser","bolide","bonbon","bondir","bonheur","bonifier","bonus","bordure","borne","botte","boucle","boueux","bougie","boulon","bouquin","bourse","boussole","boutique","boxeur","branche","brasier","brave","brebis","brèche","breuvage","bricoler","brigade","brillant","brioche","brique","brochure","broder","bronzer","brousse","broyeur","brume","brusque","brutal","bruyant","buffle","buisson","bulletin","bureau","burin","bustier","butiner","butoir","buvable","buvette","cabanon","cabine","cachette","cadeau","cadre","caféine","caillou","caisson","calculer","calepin","calibre","calmer","calomnie","calvaire","camarade","caméra","camion","campagne","canal","caneton","canon","cantine","canular","capable","caporal","caprice","capsule","capter","capuche","carabine","carbone","caresser","caribou","carnage","carotte","carreau","carton","cascade","casier","casque","cassure","causer","caution","cavalier","caverne","caviar","cédille","ceinture","céleste","cellule","cendrier","censurer","central","cercle","cérébral","cerise","cerner","cerveau","cesser","chagrin","chaise","chaleur","chambre","chance","chapitre","charbon","chasseur","chaton","chausson","chavirer","chemise","chenille","chéquier","chercher","cheval","chien","chiffre","chignon","chimère","chiot","chlorure","chocolat","choisir","chose","chouette","chrome","chute","cigare","cigogne","cimenter","cinéma","cintrer","circuler","cirer","cirque","citerne","citoyen","citron","civil","clairon","clameur","claquer","classe","clavier","client","cligner","climat","clivage","cloche","clonage","cloporte","cobalt","cobra","cocasse","cocotier","coder","codifier","coffre","cogner","cohésion","coiffer","coincer","colère","colibri","colline","colmater","colonel","combat","comédie","commande","compact","concert","conduire","confier","congeler","connoter","consonne","contact","convexe","copain","copie","corail","corbeau","cordage","corniche","corpus","correct","cortège","cosmique","costume","coton","coude","coupure","courage","couteau","couvrir","coyote","crabe","crainte","cravate","crayon","créature","créditer","crémeux","creuser","crevette","cribler","crier","cristal","critère","croire","croquer","crotale","crucial","cruel","crypter","cubique","cueillir","cuillère","cuisine","cuivre","culminer","cultiver","cumuler","cupide","curatif","curseur","cyanure","cycle","cylindre","cynique","daigner","damier","danger","danseur","dauphin","débattre","débiter","déborder","débrider","débutant","décaler","décembre","déchirer","décider","déclarer","décorer","décrire","décupler","dédale","déductif","déesse","défensif","défiler","défrayer","dégager","dégivrer","déglutir","dégrafer","déjeuner","délice","déloger","demander","demeurer","démolir","dénicher","dénouer","dentelle","dénuder","départ","dépenser","déphaser","déplacer","déposer","déranger","dérober","désastre","descente","désert","désigner","désobéir","dessiner","destrier","détacher","détester","détourer","détresse","devancer","devenir","deviner","devoir","diable","dialogue","diamant","dicter","différer","digérer","digital","digne","diluer","dimanche","diminuer","dioxyde","directif","diriger","discuter","disposer","dissiper","distance","divertir","diviser","docile","docteur","dogme","doigt","domaine","domicile","dompter","donateur","donjon","donner","dopamine","dortoir","dorure","dosage","doseur","dossier","dotation","douanier","double","douceur","douter","doyen","dragon","draper","dresser","dribbler","droiture","duperie","duplexe","durable","durcir","dynastie","éblouir","écarter","écharpe","échelle","éclairer","éclipse","éclore","écluse","école","économie","écorce","écouter","écraser","écrémer","écrivain","écrou","écume","écureuil","édifier","éduquer","effacer","effectif","effigie","effort","effrayer","effusion","égaliser","égarer","éjecter","élaborer","élargir","électron","élégant","éléphant","élève","éligible","élitisme","éloge","élucider","éluder","emballer","embellir","embryon","émeraude","émission","emmener","émotion","émouvoir","empereur","employer","emporter","emprise","émulsion","encadrer","enchère","enclave","encoche","endiguer","endosser","endroit","enduire","énergie","enfance","enfermer","enfouir","engager","engin","englober","énigme","enjamber","enjeu","enlever","ennemi","ennuyeux","enrichir","enrobage","enseigne","entasser","entendre","entier","entourer","entraver","énumérer","envahir","enviable","envoyer","enzyme","éolien","épaissir","épargne","épatant","épaule","épicerie","épidémie","épier","épilogue","épine","épisode","épitaphe","époque","épreuve","éprouver","épuisant","équerre","équipe","ériger","érosion","erreur","éruption","escalier","espadon","espèce","espiègle","espoir","esprit","esquiver","essayer","essence","essieu","essorer","estime","estomac","estrade","étagère","étaler","étanche","étatique","éteindre","étendoir","éternel","éthanol","éthique","ethnie","étirer","étoffer","étoile","étonnant","étourdir","étrange","étroit","étude","euphorie","évaluer","évasion","éventail","évidence","éviter","évolutif","évoquer","exact","exagérer","exaucer","exceller","excitant","exclusif","excuse","exécuter","exemple","exercer","exhaler","exhorter","exigence","exiler","exister","exotique","expédier","explorer","exposer","exprimer","exquis","extensif","extraire","exulter","fable","fabuleux","facette","facile","facture","faiblir","falaise","fameux","famille","farceur","farfelu","farine","farouche","fasciner","fatal","fatigue","faucon","fautif","faveur","favori","fébrile","féconder","fédérer","félin","femme","fémur","fendoir","féodal","fermer","féroce","ferveur","festival","feuille","feutre","février","fiasco","ficeler","fictif","fidèle","figure","filature","filetage","filière","filleul","filmer","filou","filtrer","financer","finir","fiole","firme","fissure","fixer","flairer","flamme","flasque","flatteur","fléau","flèche","fleur","flexion","flocon","flore","fluctuer","fluide","fluvial","folie","fonderie","fongible","fontaine","forcer","forgeron","formuler","fortune","fossile","foudre","fougère","fouiller","foulure","fourmi","fragile","fraise","franchir","frapper","frayeur","frégate","freiner","frelon","frémir","frénésie","frère","friable","friction","frisson","frivole","froid","fromage","frontal","frotter","fruit","fugitif","fuite","fureur","furieux","furtif","fusion","futur","gagner","galaxie","galerie","gambader","garantir","gardien","garnir","garrigue","gazelle","gazon","géant","gélatine","gélule","gendarme","général","génie","genou","gentil","géologie","géomètre","géranium","germe","gestuel","geyser","gibier","gicler","girafe","givre","glace","glaive","glisser","globe","gloire","glorieux","golfeur","gomme","gonfler","gorge","gorille","goudron","gouffre","goulot","goupille","gourmand","goutte","graduel","graffiti","graine","grand","grappin","gratuit","gravir","grenat","griffure","griller","grimper","grogner","gronder","grotte","groupe","gruger","grutier","gruyère","guépard","guerrier","guide","guimauve","guitare","gustatif","gymnaste","gyrostat","habitude","hachoir","halte","hameau","hangar","hanneton","haricot","harmonie","harpon","hasard","hélium","hématome","herbe","hérisson","hermine","héron","hésiter","heureux","hiberner","hibou","hilarant","histoire","hiver","homard","hommage","homogène","honneur","honorer","honteux","horde","horizon","horloge","hormone","horrible","houleux","housse","hublot","huileux","humain","humble","humide","humour","hurler","hydromel","hygiène","hymne","hypnose","idylle","ignorer","iguane","illicite","illusion","image","imbiber","imiter","immense","immobile","immuable","impact","impérial","implorer","imposer","imprimer","imputer","incarner","incendie","incident","incliner","incolore","indexer","indice","inductif","inédit","ineptie","inexact","infini","infliger","informer","infusion","ingérer","inhaler","inhiber","injecter","injure","innocent","inoculer","inonder","inscrire","insecte","insigne","insolite","inspirer","instinct","insulter","intact","intense","intime","intrigue","intuitif","inutile","invasion","inventer","inviter","invoquer","ironique","irradier","irréel","irriter","isoler","ivoire","ivresse","jaguar","jaillir","jambe","janvier","jardin","jauger","jaune","javelot","jetable","jeton","jeudi","jeunesse","joindre","joncher","jongler","joueur","jouissif","journal","jovial","joyau","joyeux","jubiler","jugement","junior","jupon","juriste","justice","juteux","juvénile","kayak","kimono","kiosque","label","labial","labourer","lacérer","lactose","lagune","laine","laisser","laitier","lambeau","lamelle","lampe","lanceur","langage","lanterne","lapin","largeur","larme","laurier","lavabo","lavoir","lecture","légal","léger","légume","lessive","lettre","levier","lexique","lézard","liasse","libérer","libre","licence","licorne","liège","lièvre","ligature","ligoter","ligue","limer","limite","limonade","limpide","linéaire","lingot","lionceau","liquide","lisière","lister","lithium","litige","littoral","livreur","logique","lointain","loisir","lombric","loterie","louer","lourd","loutre","louve","loyal","lubie","lucide","lucratif","lueur","lugubre","luisant","lumière","lunaire","lundi","luron","lutter","luxueux","machine","magasin","magenta","magique","maigre","maillon","maintien","mairie","maison","majorer","malaxer","maléfice","malheur","malice","mallette","mammouth","mandater","maniable","manquant","manteau","manuel","marathon","marbre","marchand","mardi","maritime","marqueur","marron","marteler","mascotte","massif","matériel","matière","matraque","maudire","maussade","mauve","maximal","méchant","méconnu","médaille","médecin","méditer","méduse","meilleur","mélange","mélodie","membre","mémoire","menacer","mener","menhir","mensonge","mentor","mercredi","mérite","merle","messager","mesure","métal","météore","méthode","métier","meuble","miauler","microbe","miette","mignon","migrer","milieu","million","mimique","mince","minéral","minimal","minorer","minute","miracle","miroiter","missile","mixte","mobile","moderne","moelleux","mondial","moniteur","monnaie","monotone","monstre","montagne","monument","moqueur","morceau","morsure","mortier","moteur","motif","mouche","moufle","moulin","mousson","mouton","mouvant","multiple","munition","muraille","murène","murmure","muscle","muséum","musicien","mutation","muter","mutuel","myriade","myrtille","mystère","mythique","nageur","nappe","narquois","narrer","natation","nation","nature","naufrage","nautique","navire","nébuleux","nectar","néfaste","négation","négliger","négocier","neige","nerveux","nettoyer","neurone","neutron","neveu","niche","nickel","nitrate","niveau","noble","nocif","nocturne","noirceur","noisette","nomade","nombreux","nommer","normatif","notable","notifier","notoire","nourrir","nouveau","novateur","novembre","novice","nuage","nuancer","nuire","nuisible","numéro","nuptial","nuque","nutritif","obéir","objectif","obliger","obscur","observer","obstacle","obtenir","obturer","occasion","occuper","océan","octobre","octroyer","octupler","oculaire","odeur","odorant","offenser","officier","offrir","ogive","oiseau","oisillon","olfactif","olivier","ombrage","omettre","onctueux","onduler","onéreux","onirique","opale","opaque","opérer","opinion","opportun","opprimer","opter","optique","orageux","orange","orbite","ordonner","oreille","organe","orgueil","orifice","ornement","orque","ortie","osciller","osmose","ossature","otarie","ouragan","ourson","outil","outrager","ouvrage","ovation","oxyde","oxygène","ozone","paisible","palace","palmarès","palourde","palper","panache","panda","pangolin","paniquer","panneau","panorama","pantalon","papaye","papier","papoter","papyrus","paradoxe","parcelle","paresse","parfumer","parler","parole","parrain","parsemer","partager","parure","parvenir","passion","pastèque","paternel","patience","patron","pavillon","pavoiser","payer","paysage","peigne","peintre","pelage","pélican","pelle","pelouse","peluche","pendule","pénétrer","pénible","pensif","pénurie","pépite","péplum","perdrix","perforer","période","permuter","perplexe","persil","perte","peser","pétale","petit","pétrir","peuple","pharaon","phobie","phoque","photon","phrase","physique","piano","pictural","pièce","pierre","pieuvre","pilote","pinceau","pipette","piquer","pirogue","piscine","piston","pivoter","pixel","pizza","placard","plafond","plaisir","planer","plaque","plastron","plateau","pleurer","plexus","pliage","plomb","plonger","pluie","plumage","pochette","poésie","poète","pointe","poirier","poisson","poivre","polaire","policier","pollen","polygone","pommade","pompier","ponctuel","pondérer","poney","portique","position","posséder","posture","potager","poteau","potion","pouce","poulain","poumon","pourpre","poussin","pouvoir","prairie","pratique","précieux","prédire","préfixe","prélude","prénom","présence","prétexte","prévoir","primitif","prince","prison","priver","problème","procéder","prodige","profond","progrès","proie","projeter","prologue","promener","propre","prospère","protéger","prouesse","proverbe","prudence","pruneau","psychose","public","puceron","puiser","pulpe","pulsar","punaise","punitif","pupitre","purifier","puzzle","pyramide","quasar","querelle","question","quiétude","quitter","quotient","racine","raconter","radieux","ragondin","raideur","raisin","ralentir","rallonge","ramasser","rapide","rasage","ratisser","ravager","ravin","rayonner","réactif","réagir","réaliser","réanimer","recevoir","réciter","réclamer","récolter","recruter","reculer","recycler","rédiger","redouter","refaire","réflexe","réformer","refrain","refuge","régalien","région","réglage","régulier","réitérer","rejeter","rejouer","relatif","relever","relief","remarque","remède","remise","remonter","remplir","remuer","renard","renfort","renifler","renoncer","rentrer","renvoi","replier","reporter","reprise","reptile","requin","réserve","résineux","résoudre","respect","rester","résultat","rétablir","retenir","réticule","retomber","retracer","réunion","réussir","revanche","revivre","révolte","révulsif","richesse","rideau","rieur","rigide","rigoler","rincer","riposter","risible","risque","rituel","rival","rivière","rocheux","romance","rompre","ronce","rondin","roseau","rosier","rotatif","rotor","rotule","rouge","rouille","rouleau","routine","royaume","ruban","rubis","ruche","ruelle","rugueux","ruiner","ruisseau","ruser","rustique","rythme","sabler","saboter","sabre","sacoche","safari","sagesse","saisir","salade","salive","salon","saluer","samedi","sanction","sanglier","sarcasme","sardine","saturer","saugrenu","saumon","sauter","sauvage","savant","savonner","scalpel","scandale","scélérat","scénario","sceptre","schéma","science","scinder","score","scrutin","sculpter","séance","sécable","sécher","secouer","sécréter","sédatif","séduire","seigneur","séjour","sélectif","semaine","sembler","semence","séminal","sénateur","sensible","sentence","séparer","séquence","serein","sergent","sérieux","serrure","sérum","service","sésame","sévir","sevrage","sextuple","sidéral","siècle","siéger","siffler","sigle","signal","silence","silicium","simple","sincère","sinistre","siphon","sirop","sismique","situer","skier","social","socle","sodium","soigneux","soldat","soleil","solitude","soluble","sombre","sommeil","somnoler","sonde","songeur","sonnette","sonore","sorcier","sortir","sosie","sottise","soucieux","soudure","souffle","soulever","soupape","source","soutirer","souvenir","spacieux","spatial","spécial","sphère","spiral","stable","station","sternum","stimulus","stipuler","strict","studieux","stupeur","styliste","sublime","substrat","subtil","subvenir","succès","sucre","suffixe","suggérer","suiveur","sulfate","superbe","supplier","surface","suricate","surmener","surprise","sursaut","survie","suspect","syllabe","symbole","symétrie","synapse","syntaxe","système","tabac","tablier","tactile","tailler","talent","talisman","talonner","tambour","tamiser","tangible","tapis","taquiner","tarder","tarif","tartine","tasse","tatami","tatouage","taupe","taureau","taxer","témoin","temporel","tenaille","tendre","teneur","tenir","tension","terminer","terne","terrible","tétine","texte","thème","théorie","thérapie","thorax","tibia","tiède","timide","tirelire","tiroir","tissu","titane","titre","tituber","toboggan","tolérant","tomate","tonique","tonneau","toponyme","torche","tordre","tornade","torpille","torrent","torse","tortue","totem","toucher","tournage","tousser","toxine","traction","trafic","tragique","trahir","train","trancher","travail","trèfle","tremper","trésor","treuil","triage","tribunal","tricoter","trilogie","triomphe","tripler","triturer","trivial","trombone","tronc","tropical","troupeau","tuile","tulipe","tumulte","tunnel","turbine","tuteur","tutoyer","tuyau","tympan","typhon","typique","tyran","ubuesque","ultime","ultrason","unanime","unifier","union","unique","unitaire","univers","uranium","urbain","urticant","usage","usine","usuel","usure","utile","utopie","vacarme","vaccin","vagabond","vague","vaillant","vaincre","vaisseau","valable","valise","vallon","valve","vampire","vanille","vapeur","varier","vaseux","vassal","vaste","vecteur","vedette","végétal","véhicule","veinard","véloce","vendredi","vénérer","venger","venimeux","ventouse","verdure","vérin","vernir","verrou","verser","vertu","veston","vétéran","vétuste","vexant","vexer","viaduc","viande","victoire","vidange","vidéo","vignette","vigueur","vilain","village","vinaigre","violon","vipère","virement","virtuose","virus","visage","viseur","vision","visqueux","visuel","vital","vitesse","viticole","vitrine","vivace","vivipare","vocation","voguer","voile","voisin","voiture","volaille","volcan","voltiger","volume","vorace","vortex","voter","vouloir","voyage","voyelle","wagon","xénon","yacht","zèbre","zénith","zeste","zoologie"]},function(t,e,i){"use strict";t.exports=["abaco","abbaglio","abbinato","abete","abisso","abolire","abrasivo","abrogato","accadere","accenno","accusato","acetone","achille","acido","acqua","acre","acrilico","acrobata","acuto","adagio","addebito","addome","adeguato","aderire","adipe","adottare","adulare","affabile","affetto","affisso","affranto","aforisma","afoso","africano","agave","agente","agevole","aggancio","agire","agitare","agonismo","agricolo","agrumeto","aguzzo","alabarda","alato","albatro","alberato","albo","albume","alce","alcolico","alettone","alfa","algebra","aliante","alibi","alimento","allagato","allegro","allievo","allodola","allusivo","almeno","alogeno","alpaca","alpestre","altalena","alterno","alticcio","altrove","alunno","alveolo","alzare","amalgama","amanita","amarena","ambito","ambrato","ameba","america","ametista","amico","ammasso","ammenda","ammirare","ammonito","amore","ampio","ampliare","amuleto","anacardo","anagrafe","analista","anarchia","anatra","anca","ancella","ancora","andare","andrea","anello","angelo","angolare","angusto","anima","annegare","annidato","anno","annuncio","anonimo","anticipo","anzi","apatico","apertura","apode","apparire","appetito","appoggio","approdo","appunto","aprile","arabica","arachide","aragosta","araldica","arancio","aratura","arazzo","arbitro","archivio","ardito","arenile","argento","argine","arguto","aria","armonia","arnese","arredato","arringa","arrosto","arsenico","arso","artefice","arzillo","asciutto","ascolto","asepsi","asettico","asfalto","asino","asola","aspirato","aspro","assaggio","asse","assoluto","assurdo","asta","astenuto","astice","astratto","atavico","ateismo","atomico","atono","attesa","attivare","attorno","attrito","attuale","ausilio","austria","autista","autonomo","autunno","avanzato","avere","avvenire","avviso","avvolgere","azione","azoto","azzimo","azzurro","babele","baccano","bacino","baco","badessa","badilata","bagnato","baita","balcone","baldo","balena","ballata","balzano","bambino","bandire","baraonda","barbaro","barca","baritono","barlume","barocco","basilico","basso","batosta","battuto","baule","bava","bavosa","becco","beffa","belgio","belva","benda","benevole","benigno","benzina","bere","berlina","beta","bibita","bici","bidone","bifido","biga","bilancia","bimbo","binocolo","biologo","bipede","bipolare","birbante","birra","biscotto","bisesto","bisnonno","bisonte","bisturi","bizzarro","blando","blatta","bollito","bonifico","bordo","bosco","botanico","bottino","bozzolo","braccio","bradipo","brama","branca","bravura","bretella","brevetto","brezza","briglia","brillante","brindare","broccolo","brodo","bronzina","brullo","bruno","bubbone","buca","budino","buffone","buio","bulbo","buono","burlone","burrasca","bussola","busta","cadetto","caduco","calamaro","calcolo","calesse","calibro","calmo","caloria","cambusa","camerata","camicia","cammino","camola","campale","canapa","candela","cane","canino","canotto","cantina","capace","capello","capitolo","capogiro","cappero","capra","capsula","carapace","carcassa","cardo","carisma","carovana","carretto","cartolina","casaccio","cascata","caserma","caso","cassone","castello","casuale","catasta","catena","catrame","cauto","cavillo","cedibile","cedrata","cefalo","celebre","cellulare","cena","cenone","centesimo","ceramica","cercare","certo","cerume","cervello","cesoia","cespo","ceto","chela","chiaro","chicca","chiedere","chimera","china","chirurgo","chitarra","ciao","ciclismo","cifrare","cigno","cilindro","ciottolo","circa","cirrosi","citrico","cittadino","ciuffo","civetta","civile","classico","clinica","cloro","cocco","codardo","codice","coerente","cognome","collare","colmato","colore","colposo","coltivato","colza","coma","cometa","commando","comodo","computer","comune","conciso","condurre","conferma","congelare","coniuge","connesso","conoscere","consumo","continuo","convegno","coperto","copione","coppia","copricapo","corazza","cordata","coricato","cornice","corolla","corpo","corredo","corsia","cortese","cosmico","costante","cottura","covato","cratere","cravatta","creato","credere","cremoso","crescita","creta","criceto","crinale","crisi","critico","croce","cronaca","crostata","cruciale","crusca","cucire","cuculo","cugino","cullato","cupola","curatore","cursore","curvo","cuscino","custode","dado","daino","dalmata","damerino","daniela","dannoso","danzare","datato","davanti","davvero","debutto","decennio","deciso","declino","decollo","decreto","dedicato","definito","deforme","degno","delegare","delfino","delirio","delta","demenza","denotato","dentro","deposito","derapata","derivare","deroga","descritto","deserto","desiderio","desumere","detersivo","devoto","diametro","dicembre","diedro","difeso","diffuso","digerire","digitale","diluvio","dinamico","dinnanzi","dipinto","diploma","dipolo","diradare","dire","dirotto","dirupo","disagio","discreto","disfare","disgelo","disposto","distanza","disumano","dito","divano","divelto","dividere","divorato","doblone","docente","doganale","dogma","dolce","domato","domenica","dominare","dondolo","dono","dormire","dote","dottore","dovuto","dozzina","drago","druido","dubbio","dubitare","ducale","duna","duomo","duplice","duraturo","ebano","eccesso","ecco","eclissi","economia","edera","edicola","edile","editoria","educare","egemonia","egli","egoismo","egregio","elaborato","elargire","elegante","elencato","eletto","elevare","elfico","elica","elmo","elsa","eluso","emanato","emblema","emesso","emiro","emotivo","emozione","empirico","emulo","endemico","enduro","energia","enfasi","enoteca","entrare","enzima","epatite","epilogo","episodio","epocale","eppure","equatore","erario","erba","erboso","erede","eremita","erigere","ermetico","eroe","erosivo","errante","esagono","esame","esanime","esaudire","esca","esempio","esercito","esibito","esigente","esistere","esito","esofago","esortato","esoso","espanso","espresso","essenza","esso","esteso","estimare","estonia","estroso","esultare","etilico","etnico","etrusco","etto","euclideo","europa","evaso","evidenza","evitato","evoluto","evviva","fabbrica","faccenda","fachiro","falco","famiglia","fanale","fanfara","fango","fantasma","fare","farfalla","farinoso","farmaco","fascia","fastoso","fasullo","faticare","fato","favoloso","febbre","fecola","fede","fegato","felpa","feltro","femmina","fendere","fenomeno","fermento","ferro","fertile","fessura","festivo","fetta","feudo","fiaba","fiducia","fifa","figurato","filo","finanza","finestra","finire","fiore","fiscale","fisico","fiume","flacone","flamenco","flebo","flemma","florido","fluente","fluoro","fobico","focaccia","focoso","foderato","foglio","folata","folclore","folgore","fondente","fonetico","fonia","fontana","forbito","forchetta","foresta","formica","fornaio","foro","fortezza","forzare","fosfato","fosso","fracasso","frana","frassino","fratello","freccetta","frenata","fresco","frigo","frollino","fronde","frugale","frutta","fucilata","fucsia","fuggente","fulmine","fulvo","fumante","fumetto","fumoso","fune","funzione","fuoco","furbo","furgone","furore","fuso","futile","gabbiano","gaffe","galateo","gallina","galoppo","gambero","gamma","garanzia","garbo","garofano","garzone","gasdotto","gasolio","gastrico","gatto","gaudio","gazebo","gazzella","geco","gelatina","gelso","gemello","gemmato","gene","genitore","gennaio","genotipo","gergo","ghepardo","ghiaccio","ghisa","giallo","gilda","ginepro","giocare","gioiello","giorno","giove","girato","girone","gittata","giudizio","giurato","giusto","globulo","glutine","gnomo","gobba","golf","gomito","gommone","gonfio","gonna","governo","gracile","grado","grafico","grammo","grande","grattare","gravoso","grazia","greca","gregge","grifone","grigio","grinza","grotta","gruppo","guadagno","guaio","guanto","guardare","gufo","guidare","ibernato","icona","identico","idillio","idolo","idra","idrico","idrogeno","igiene","ignaro","ignorato","ilare","illeso","illogico","illudere","imballo","imbevuto","imbocco","imbuto","immane","immerso","immolato","impacco","impeto","impiego","importo","impronta","inalare","inarcare","inattivo","incanto","incendio","inchino","incisivo","incluso","incontro","incrocio","incubo","indagine","india","indole","inedito","infatti","infilare","inflitto","ingaggio","ingegno","inglese","ingordo","ingrosso","innesco","inodore","inoltrare","inondato","insano","insetto","insieme","insonnia","insulina","intasato","intero","intonaco","intuito","inumidire","invalido","invece","invito","iperbole","ipnotico","ipotesi","ippica","iride","irlanda","ironico","irrigato","irrorare","isolato","isotopo","isterico","istituto","istrice","italia","iterare","labbro","labirinto","lacca","lacerato","lacrima","lacuna","laddove","lago","lampo","lancetta","lanterna","lardoso","larga","laringe","lastra","latenza","latino","lattuga","lavagna","lavoro","legale","leggero","lembo","lentezza","lenza","leone","lepre","lesivo","lessato","lesto","letterale","leva","levigato","libero","lido","lievito","lilla","limatura","limitare","limpido","lineare","lingua","liquido","lira","lirica","lisca","lite","litigio","livrea","locanda","lode","logica","lombare","londra","longevo","loquace","lorenzo","loto","lotteria","luce","lucidato","lumaca","luminoso","lungo","lupo","luppolo","lusinga","lusso","lutto","macabro","macchina","macero","macinato","madama","magico","maglia","magnete","magro","maiolica","malafede","malgrado","malinteso","malsano","malto","malumore","mana","mancia","mandorla","mangiare","manifesto","mannaro","manovra","mansarda","mantide","manubrio","mappa","maratona","marcire","maretta","marmo","marsupio","maschera","massaia","mastino","materasso","matricola","mattone","maturo","mazurca","meandro","meccanico","mecenate","medesimo","meditare","mega","melassa","melis","melodia","meninge","meno","mensola","mercurio","merenda","merlo","meschino","mese","messere","mestolo","metallo","metodo","mettere","miagolare","mica","micelio","michele","microbo","midollo","miele","migliore","milano","milite","mimosa","minerale","mini","minore","mirino","mirtillo","miscela","missiva","misto","misurare","mitezza","mitigare","mitra","mittente","mnemonico","modello","modifica","modulo","mogano","mogio","mole","molosso","monastero","monco","mondina","monetario","monile","monotono","monsone","montato","monviso","mora","mordere","morsicato","mostro","motivato","motosega","motto","movenza","movimento","mozzo","mucca","mucosa","muffa","mughetto","mugnaio","mulatto","mulinello","multiplo","mummia","munto","muovere","murale","musa","muscolo","musica","mutevole","muto","nababbo","nafta","nanometro","narciso","narice","narrato","nascere","nastrare","naturale","nautica","naviglio","nebulosa","necrosi","negativo","negozio","nemmeno","neofita","neretto","nervo","nessuno","nettuno","neutrale","neve","nevrotico","nicchia","ninfa","nitido","nobile","nocivo","nodo","nome","nomina","nordico","normale","norvegese","nostrano","notare","notizia","notturno","novella","nucleo","nulla","numero","nuovo","nutrire","nuvola","nuziale","oasi","obbedire","obbligo","obelisco","oblio","obolo","obsoleto","occasione","occhio","occidente","occorrere","occultare","ocra","oculato","odierno","odorare","offerta","offrire","offuscato","oggetto","oggi","ognuno","olandese","olfatto","oliato","oliva","ologramma","oltre","omaggio","ombelico","ombra","omega","omissione","ondoso","onere","onice","onnivoro","onorevole","onta","operato","opinione","opposto","oracolo","orafo","ordine","orecchino","orefice","orfano","organico","origine","orizzonte","orma","ormeggio","ornativo","orologio","orrendo","orribile","ortensia","ortica","orzata","orzo","osare","oscurare","osmosi","ospedale","ospite","ossa","ossidare","ostacolo","oste","otite","otre","ottagono","ottimo","ottobre","ovale","ovest","ovino","oviparo","ovocito","ovunque","ovviare","ozio","pacchetto","pace","pacifico","padella","padrone","paese","paga","pagina","palazzina","palesare","pallido","palo","palude","pandoro","pannello","paolo","paonazzo","paprica","parabola","parcella","parere","pargolo","pari","parlato","parola","partire","parvenza","parziale","passivo","pasticca","patacca","patologia","pattume","pavone","peccato","pedalare","pedonale","peggio","peloso","penare","pendice","penisola","pennuto","penombra","pensare","pentola","pepe","pepita","perbene","percorso","perdonato","perforare","pergamena","periodo","permesso","perno","perplesso","persuaso","pertugio","pervaso","pesatore","pesista","peso","pestifero","petalo","pettine","petulante","pezzo","piacere","pianta","piattino","piccino","picozza","piega","pietra","piffero","pigiama","pigolio","pigro","pila","pilifero","pillola","pilota","pimpante","pineta","pinna","pinolo","pioggia","piombo","piramide","piretico","pirite","pirolisi","pitone","pizzico","placebo","planare","plasma","platano","plenario","pochezza","poderoso","podismo","poesia","poggiare","polenta","poligono","pollice","polmonite","polpetta","polso","poltrona","polvere","pomice","pomodoro","ponte","popoloso","porfido","poroso","porpora","porre","portata","posa","positivo","possesso","postulato","potassio","potere","pranzo","prassi","pratica","precluso","predica","prefisso","pregiato","prelievo","premere","prenotare","preparato","presenza","pretesto","prevalso","prima","principe","privato","problema","procura","produrre","profumo","progetto","prolunga","promessa","pronome","proposta","proroga","proteso","prova","prudente","prugna","prurito","psiche","pubblico","pudica","pugilato","pugno","pulce","pulito","pulsante","puntare","pupazzo","pupilla","puro","quadro","qualcosa","quasi","querela","quota","raccolto","raddoppio","radicale","radunato","raffica","ragazzo","ragione","ragno","ramarro","ramingo","ramo","randagio","rantolare","rapato","rapina","rappreso","rasatura","raschiato","rasente","rassegna","rastrello","rata","ravveduto","reale","recepire","recinto","recluta","recondito","recupero","reddito","redimere","regalato","registro","regola","regresso","relazione","remare","remoto","renna","replica","reprimere","reputare","resa","residente","responso","restauro","rete","retina","retorica","rettifica","revocato","riassunto","ribadire","ribelle","ribrezzo","ricarica","ricco","ricevere","riciclato","ricordo","ricreduto","ridicolo","ridurre","rifasare","riflesso","riforma","rifugio","rigare","rigettato","righello","rilassato","rilevato","rimanere","rimbalzo","rimedio","rimorchio","rinascita","rincaro","rinforzo","rinnovo","rinomato","rinsavito","rintocco","rinuncia","rinvenire","riparato","ripetuto","ripieno","riportare","ripresa","ripulire","risata","rischio","riserva","risibile","riso","rispetto","ristoro","risultato","risvolto","ritardo","ritegno","ritmico","ritrovo","riunione","riva","riverso","rivincita","rivolto","rizoma","roba","robotico","robusto","roccia","roco","rodaggio","rodere","roditore","rogito","rollio","romantico","rompere","ronzio","rosolare","rospo","rotante","rotondo","rotula","rovescio","rubizzo","rubrica","ruga","rullino","rumine","rumoroso","ruolo","rupe","russare","rustico","sabato","sabbiare","sabotato","sagoma","salasso","saldatura","salgemma","salivare","salmone","salone","saltare","saluto","salvo","sapere","sapido","saporito","saraceno","sarcasmo","sarto","sassoso","satellite","satira","satollo","saturno","savana","savio","saziato","sbadiglio","sbalzo","sbancato","sbarra","sbattere","sbavare","sbendare","sbirciare","sbloccato","sbocciato","sbrinare","sbruffone","sbuffare","scabroso","scadenza","scala","scambiare","scandalo","scapola","scarso","scatenare","scavato","scelto","scenico","scettro","scheda","schiena","sciarpa","scienza","scindere","scippo","sciroppo","scivolo","sclerare","scodella","scolpito","scomparto","sconforto","scoprire","scorta","scossone","scozzese","scriba","scrollare","scrutinio","scuderia","scultore","scuola","scuro","scusare","sdebitare","sdoganare","seccatura","secondo","sedano","seggiola","segnalato","segregato","seguito","selciato","selettivo","sella","selvaggio","semaforo","sembrare","seme","seminato","sempre","senso","sentire","sepolto","sequenza","serata","serbato","sereno","serio","serpente","serraglio","servire","sestina","setola","settimana","sfacelo","sfaldare","sfamato","sfarzoso","sfaticato","sfera","sfida","sfilato","sfinge","sfocato","sfoderare","sfogo","sfoltire","sforzato","sfratto","sfruttato","sfuggito","sfumare","sfuso","sgabello","sgarbato","sgonfiare","sgorbio","sgrassato","sguardo","sibilo","siccome","sierra","sigla","signore","silenzio","sillaba","simbolo","simpatico","simulato","sinfonia","singolo","sinistro","sino","sintesi","sinusoide","sipario","sisma","sistole","situato","slitta","slogatura","sloveno","smarrito","smemorato","smentito","smeraldo","smilzo","smontare","smottato","smussato","snellire","snervato","snodo","sobbalzo","sobrio","soccorso","sociale","sodale","soffitto","sogno","soldato","solenne","solido","sollazzo","solo","solubile","solvente","somatico","somma","sonda","sonetto","sonnifero","sopire","soppeso","sopra","sorgere","sorpasso","sorriso","sorso","sorteggio","sorvolato","sospiro","sosta","sottile","spada","spalla","spargere","spatola","spavento","spazzola","specie","spedire","spegnere","spelatura","speranza","spessore","spettrale","spezzato","spia","spigoloso","spillato","spinoso","spirale","splendido","sportivo","sposo","spranga","sprecare","spronato","spruzzo","spuntino","squillo","sradicare","srotolato","stabile","stacco","staffa","stagnare","stampato","stantio","starnuto","stasera","statuto","stelo","steppa","sterzo","stiletto","stima","stirpe","stivale","stizzoso","stonato","storico","strappo","stregato","stridulo","strozzare","strutto","stuccare","stufo","stupendo","subentro","succoso","sudore","suggerito","sugo","sultano","suonare","superbo","supporto","surgelato","surrogato","sussurro","sutura","svagare","svedese","sveglio","svelare","svenuto","svezia","sviluppo","svista","svizzera","svolta","svuotare","tabacco","tabulato","tacciare","taciturno","tale","talismano","tampone","tannino","tara","tardivo","targato","tariffa","tarpare","tartaruga","tasto","tattico","taverna","tavolata","tazza","teca","tecnico","telefono","temerario","tempo","temuto","tendone","tenero","tensione","tentacolo","teorema","terme","terrazzo","terzetto","tesi","tesserato","testato","tetro","tettoia","tifare","tigella","timbro","tinto","tipico","tipografo","tiraggio","tiro","titanio","titolo","titubante","tizio","tizzone","toccare","tollerare","tolto","tombola","tomo","tonfo","tonsilla","topazio","topologia","toppa","torba","tornare","torrone","tortora","toscano","tossire","tostatura","totano","trabocco","trachea","trafila","tragedia","tralcio","tramonto","transito","trapano","trarre","trasloco","trattato","trave","treccia","tremolio","trespolo","tributo","tricheco","trifoglio","trillo","trincea","trio","tristezza","triturato","trivella","tromba","trono","troppo","trottola","trovare","truccato","tubatura","tuffato","tulipano","tumulto","tunisia","turbare","turchino","tuta","tutela","ubicato","uccello","uccisore","udire","uditivo","uffa","ufficio","uguale","ulisse","ultimato","umano","umile","umorismo","uncinetto","ungere","ungherese","unicorno","unificato","unisono","unitario","unte","uovo","upupa","uragano","urgenza","urlo","usanza","usato","uscito","usignolo","usuraio","utensile","utilizzo","utopia","vacante","vaccinato","vagabondo","vagliato","valanga","valgo","valico","valletta","valoroso","valutare","valvola","vampata","vangare","vanitoso","vano","vantaggio","vanvera","vapore","varano","varcato","variante","vasca","vedetta","vedova","veduto","vegetale","veicolo","velcro","velina","velluto","veloce","venato","vendemmia","vento","verace","verbale","vergogna","verifica","vero","verruca","verticale","vescica","vessillo","vestale","veterano","vetrina","vetusto","viandante","vibrante","vicenda","vichingo","vicinanza","vidimare","vigilia","vigneto","vigore","vile","villano","vimini","vincitore","viola","vipera","virgola","virologo","virulento","viscoso","visione","vispo","vissuto","visura","vita","vitello","vittima","vivanda","vivido","viziare","voce","voga","volatile","volere","volpe","voragine","vulcano","zampogna","zanna","zappato","zattera","zavorra","zefiro","zelante","zelo","zenzero","zerbino","zibetto","zinco","zircone","zitto","zolla","zotico","zucchero","zufolo","zulu","zuppa"]},function(t,e,i){"use strict";t.exports=["あいこくしん","あいさつ","あいだ","あおぞら","あかちゃん","あきる","あけがた","あける","あこがれる","あさい","あさひ","あしあと","あじわう","あずかる","あずき","あそぶ","あたえる","あたためる","あたりまえ","あたる","あつい","あつかう","あっしゅく","あつまり","あつめる","あてな","あてはまる","あひる","あぶら","あぶる","あふれる","あまい","あまど","あまやかす","あまり","あみもの","あめりか","あやまる","あゆむ","あらいぐま","あらし","あらすじ","あらためる","あらゆる","あらわす","ありがとう","あわせる","あわてる","あんい","あんがい","あんこ","あんぜん","あんてい","あんない","あんまり","いいだす","いおん","いがい","いがく","いきおい","いきなり","いきもの","いきる","いくじ","いくぶん","いけばな","いけん","いこう","いこく","いこつ","いさましい","いさん","いしき","いじゅう","いじょう","いじわる","いずみ","いずれ","いせい","いせえび","いせかい","いせき","いぜん","いそうろう","いそがしい","いだい","いだく","いたずら","いたみ","いたりあ","いちおう","いちじ","いちど","いちば","いちぶ","いちりゅう","いつか","いっしゅん","いっせい","いっそう","いったん","いっち","いってい","いっぽう","いてざ","いてん","いどう","いとこ","いない","いなか","いねむり","いのち","いのる","いはつ","いばる","いはん","いびき","いひん","いふく","いへん","いほう","いみん","いもうと","いもたれ","いもり","いやがる","いやす","いよかん","いよく","いらい","いらすと","いりぐち","いりょう","いれい","いれもの","いれる","いろえんぴつ","いわい","いわう","いわかん","いわば","いわゆる","いんげんまめ","いんさつ","いんしょう","いんよう","うえき","うえる","うおざ","うがい","うかぶ","うかべる","うきわ","うくらいな","うくれれ","うけたまわる","うけつけ","うけとる","うけもつ","うける","うごかす","うごく","うこん","うさぎ","うしなう","うしろがみ","うすい","うすぎ","うすぐらい","うすめる","うせつ","うちあわせ","うちがわ","うちき","うちゅう","うっかり","うつくしい","うったえる","うつる","うどん","うなぎ","うなじ","うなずく","うなる","うねる","うのう","うぶげ","うぶごえ","うまれる","うめる","うもう","うやまう","うよく","うらがえす","うらぐち","うらない","うりあげ","うりきれ","うるさい","うれしい","うれゆき","うれる","うろこ","うわき","うわさ","うんこう","うんちん","うんてん","うんどう","えいえん","えいが","えいきょう","えいご","えいせい","えいぶん","えいよう","えいわ","えおり","えがお","えがく","えきたい","えくせる","えしゃく","えすて","えつらん","えのぐ","えほうまき","えほん","えまき","えもじ","えもの","えらい","えらぶ","えりあ","えんえん","えんかい","えんぎ","えんげき","えんしゅう","えんぜつ","えんそく","えんちょう","えんとつ","おいかける","おいこす","おいしい","おいつく","おうえん","おうさま","おうじ","おうせつ","おうたい","おうふく","おうべい","おうよう","おえる","おおい","おおう","おおどおり","おおや","おおよそ","おかえり","おかず","おがむ","おかわり","おぎなう","おきる","おくさま","おくじょう","おくりがな","おくる","おくれる","おこす","おこなう","おこる","おさえる","おさない","おさめる","おしいれ","おしえる","おじぎ","おじさん","おしゃれ","おそらく","おそわる","おたがい","おたく","おだやか","おちつく","おっと","おつり","おでかけ","おとしもの","おとなしい","おどり","おどろかす","おばさん","おまいり","おめでとう","おもいで","おもう","おもたい","おもちゃ","おやつ","おやゆび","およぼす","おらんだ","おろす","おんがく","おんけい","おんしゃ","おんせん","おんだん","おんちゅう","おんどけい","かあつ","かいが","がいき","がいけん","がいこう","かいさつ","かいしゃ","かいすいよく","かいぜん","かいぞうど","かいつう","かいてん","かいとう","かいふく","がいへき","かいほう","かいよう","がいらい","かいわ","かえる","かおり","かかえる","かがく","かがし","かがみ","かくご","かくとく","かざる","がぞう","かたい","かたち","がちょう","がっきゅう","がっこう","がっさん","がっしょう","かなざわし","かのう","がはく","かぶか","かほう","かほご","かまう","かまぼこ","かめれおん","かゆい","かようび","からい","かるい","かろう","かわく","かわら","がんか","かんけい","かんこう","かんしゃ","かんそう","かんたん","かんち","がんばる","きあい","きあつ","きいろ","ぎいん","きうい","きうん","きえる","きおう","きおく","きおち","きおん","きかい","きかく","きかんしゃ","ききて","きくばり","きくらげ","きけんせい","きこう","きこえる","きこく","きさい","きさく","きさま","きさらぎ","ぎじかがく","ぎしき","ぎじたいけん","ぎじにってい","ぎじゅつしゃ","きすう","きせい","きせき","きせつ","きそう","きぞく","きぞん","きたえる","きちょう","きつえん","ぎっちり","きつつき","きつね","きてい","きどう","きどく","きない","きなが","きなこ","きぬごし","きねん","きのう","きのした","きはく","きびしい","きひん","きふく","きぶん","きぼう","きほん","きまる","きみつ","きむずかしい","きめる","きもだめし","きもち","きもの","きゃく","きやく","ぎゅうにく","きよう","きょうりゅう","きらい","きらく","きりん","きれい","きれつ","きろく","ぎろん","きわめる","ぎんいろ","きんかくじ","きんじょ","きんようび","ぐあい","くいず","くうかん","くうき","くうぐん","くうこう","ぐうせい","くうそう","ぐうたら","くうふく","くうぼ","くかん","くきょう","くげん","ぐこう","くさい","くさき","くさばな","くさる","くしゃみ","くしょう","くすのき","くすりゆび","くせげ","くせん","ぐたいてき","くださる","くたびれる","くちこみ","くちさき","くつした","ぐっすり","くつろぐ","くとうてん","くどく","くなん","くねくね","くのう","くふう","くみあわせ","くみたてる","くめる","くやくしょ","くらす","くらべる","くるま","くれる","くろう","くわしい","ぐんかん","ぐんしょく","ぐんたい","ぐんて","けあな","けいかく","けいけん","けいこ","けいさつ","げいじゅつ","けいたい","げいのうじん","けいれき","けいろ","けおとす","けおりもの","げきか","げきげん","げきだん","げきちん","げきとつ","げきは","げきやく","げこう","げこくじょう","げざい","けさき","げざん","けしき","けしごむ","けしょう","げすと","けたば","けちゃっぷ","けちらす","けつあつ","けつい","けつえき","けっこん","けつじょ","けっせき","けってい","けつまつ","げつようび","げつれい","けつろん","げどく","けとばす","けとる","けなげ","けなす","けなみ","けぬき","げねつ","けねん","けはい","げひん","けぶかい","げぼく","けまり","けみかる","けむし","けむり","けもの","けらい","けろけろ","けわしい","けんい","けんえつ","けんお","けんか","げんき","けんげん","けんこう","けんさく","けんしゅう","けんすう","げんそう","けんちく","けんてい","けんとう","けんない","けんにん","げんぶつ","けんま","けんみん","けんめい","けんらん","けんり","こあくま","こいぬ","こいびと","ごうい","こうえん","こうおん","こうかん","ごうきゅう","ごうけい","こうこう","こうさい","こうじ","こうすい","ごうせい","こうそく","こうたい","こうちゃ","こうつう","こうてい","こうどう","こうない","こうはい","ごうほう","ごうまん","こうもく","こうりつ","こえる","こおり","ごかい","ごがつ","ごかん","こくご","こくさい","こくとう","こくない","こくはく","こぐま","こけい","こける","ここのか","こころ","こさめ","こしつ","こすう","こせい","こせき","こぜん","こそだて","こたい","こたえる","こたつ","こちょう","こっか","こつこつ","こつばん","こつぶ","こてい","こてん","ことがら","ことし","ことば","ことり","こなごな","こねこね","このまま","このみ","このよ","ごはん","こひつじ","こふう","こふん","こぼれる","ごまあぶら","こまかい","ごますり","こまつな","こまる","こむぎこ","こもじ","こもち","こもの","こもん","こやく","こやま","こゆう","こゆび","こよい","こよう","こりる","これくしょん","ころっけ","こわもて","こわれる","こんいん","こんかい","こんき","こんしゅう","こんすい","こんだて","こんとん","こんなん","こんびに","こんぽん","こんまけ","こんや","こんれい","こんわく","ざいえき","さいかい","さいきん","ざいげん","ざいこ","さいしょ","さいせい","ざいたく","ざいちゅう","さいてき","ざいりょう","さうな","さかいし","さがす","さかな","さかみち","さがる","さぎょう","さくし","さくひん","さくら","さこく","さこつ","さずかる","ざせき","さたん","さつえい","ざつおん","ざっか","ざつがく","さっきょく","ざっし","さつじん","ざっそう","さつたば","さつまいも","さてい","さといも","さとう","さとおや","さとし","さとる","さのう","さばく","さびしい","さべつ","さほう","さほど","さます","さみしい","さみだれ","さむけ","さめる","さやえんどう","さゆう","さよう","さよく","さらだ","ざるそば","さわやか","さわる","さんいん","さんか","さんきゃく","さんこう","さんさい","ざんしょ","さんすう","さんせい","さんそ","さんち","さんま","さんみ","さんらん","しあい","しあげ","しあさって","しあわせ","しいく","しいん","しうち","しえい","しおけ","しかい","しかく","じかん","しごと","しすう","じだい","したうけ","したぎ","したて","したみ","しちょう","しちりん","しっかり","しつじ","しつもん","してい","してき","してつ","じてん","じどう","しなぎれ","しなもの","しなん","しねま","しねん","しのぐ","しのぶ","しはい","しばかり","しはつ","しはらい","しはん","しひょう","しふく","じぶん","しへい","しほう","しほん","しまう","しまる","しみん","しむける","じむしょ","しめい","しめる","しもん","しゃいん","しゃうん","しゃおん","じゃがいも","しやくしょ","しゃくほう","しゃけん","しゃこ","しゃざい","しゃしん","しゃせん","しゃそう","しゃたい","しゃちょう","しゃっきん","じゃま","しゃりん","しゃれい","じゆう","じゅうしょ","しゅくはく","じゅしん","しゅっせき","しゅみ","しゅらば","じゅんばん","しょうかい","しょくたく","しょっけん","しょどう","しょもつ","しらせる","しらべる","しんか","しんこう","じんじゃ","しんせいじ","しんちく","しんりん","すあげ","すあし","すあな","ずあん","すいえい","すいか","すいとう","ずいぶん","すいようび","すうがく","すうじつ","すうせん","すおどり","すきま","すくう","すくない","すける","すごい","すこし","ずさん","すずしい","すすむ","すすめる","すっかり","ずっしり","ずっと","すてき","すてる","すねる","すのこ","すはだ","すばらしい","ずひょう","ずぶぬれ","すぶり","すふれ","すべて","すべる","ずほう","すぼん","すまい","すめし","すもう","すやき","すらすら","するめ","すれちがう","すろっと","すわる","すんぜん","すんぽう","せあぶら","せいかつ","せいげん","せいじ","せいよう","せおう","せかいかん","せきにん","せきむ","せきゆ","せきらんうん","せけん","せこう","せすじ","せたい","せたけ","せっかく","せっきゃく","ぜっく","せっけん","せっこつ","せっさたくま","せつぞく","せつだん","せつでん","せっぱん","せつび","せつぶん","せつめい","せつりつ","せなか","せのび","せはば","せびろ","せぼね","せまい","せまる","せめる","せもたれ","せりふ","ぜんあく","せんい","せんえい","せんか","せんきょ","せんく","せんげん","ぜんご","せんさい","せんしゅ","せんすい","せんせい","せんぞ","せんたく","せんちょう","せんてい","せんとう","せんぬき","せんねん","せんぱい","ぜんぶ","ぜんぽう","せんむ","せんめんじょ","せんもん","せんやく","せんゆう","せんよう","ぜんら","ぜんりゃく","せんれい","せんろ","そあく","そいとげる","そいね","そうがんきょう","そうき","そうご","そうしん","そうだん","そうなん","そうび","そうめん","そうり","そえもの","そえん","そがい","そげき","そこう","そこそこ","そざい","そしな","そせい","そせん","そそぐ","そだてる","そつう","そつえん","そっかん","そつぎょう","そっけつ","そっこう","そっせん","そっと","そとがわ","そとづら","そなえる","そなた","そふぼ","そぼく","そぼろ","そまつ","そまる","そむく","そむりえ","そめる","そもそも","そよかぜ","そらまめ","そろう","そんかい","そんけい","そんざい","そんしつ","そんぞく","そんちょう","ぞんび","ぞんぶん","そんみん","たあい","たいいん","たいうん","たいえき","たいおう","だいがく","たいき","たいぐう","たいけん","たいこ","たいざい","だいじょうぶ","だいすき","たいせつ","たいそう","だいたい","たいちょう","たいてい","だいどころ","たいない","たいねつ","たいのう","たいはん","だいひょう","たいふう","たいへん","たいほ","たいまつばな","たいみんぐ","たいむ","たいめん","たいやき","たいよう","たいら","たいりょく","たいる","たいわん","たうえ","たえる","たおす","たおる","たおれる","たかい","たかね","たきび","たくさん","たこく","たこやき","たさい","たしざん","だじゃれ","たすける","たずさわる","たそがれ","たたかう","たたく","ただしい","たたみ","たちばな","だっかい","だっきゃく","だっこ","だっしゅつ","だったい","たてる","たとえる","たなばた","たにん","たぬき","たのしみ","たはつ","たぶん","たべる","たぼう","たまご","たまる","だむる","ためいき","ためす","ためる","たもつ","たやすい","たよる","たらす","たりきほんがん","たりょう","たりる","たると","たれる","たれんと","たろっと","たわむれる","だんあつ","たんい","たんおん","たんか","たんき","たんけん","たんご","たんさん","たんじょうび","だんせい","たんそく","たんたい","だんち","たんてい","たんとう","だんな","たんにん","だんねつ","たんのう","たんぴん","だんぼう","たんまつ","たんめい","だんれつ","だんろ","だんわ","ちあい","ちあん","ちいき","ちいさい","ちえん","ちかい","ちから","ちきゅう","ちきん","ちけいず","ちけん","ちこく","ちさい","ちしき","ちしりょう","ちせい","ちそう","ちたい","ちたん","ちちおや","ちつじょ","ちてき","ちてん","ちぬき","ちぬり","ちのう","ちひょう","ちへいせん","ちほう","ちまた","ちみつ","ちみどろ","ちめいど","ちゃんこなべ","ちゅうい","ちゆりょく","ちょうし","ちょさくけん","ちらし","ちらみ","ちりがみ","ちりょう","ちるど","ちわわ","ちんたい","ちんもく","ついか","ついたち","つうか","つうじょう","つうはん","つうわ","つかう","つかれる","つくね","つくる","つけね","つける","つごう","つたえる","つづく","つつじ","つつむ","つとめる","つながる","つなみ","つねづね","つのる","つぶす","つまらない","つまる","つみき","つめたい","つもり","つもる","つよい","つるぼ","つるみく","つわもの","つわり","てあし","てあて","てあみ","ていおん","ていか","ていき","ていけい","ていこく","ていさつ","ていし","ていせい","ていたい","ていど","ていねい","ていひょう","ていへん","ていぼう","てうち","ておくれ","てきとう","てくび","でこぼこ","てさぎょう","てさげ","てすり","てそう","てちがい","てちょう","てつがく","てつづき","でっぱ","てつぼう","てつや","でぬかえ","てぬき","てぬぐい","てのひら","てはい","てぶくろ","てふだ","てほどき","てほん","てまえ","てまきずし","てみじか","てみやげ","てらす","てれび","てわけ","てわたし","でんあつ","てんいん","てんかい","てんき","てんぐ","てんけん","てんごく","てんさい","てんし","てんすう","でんち","てんてき","てんとう","てんない","てんぷら","てんぼうだい","てんめつ","てんらんかい","でんりょく","でんわ","どあい","といれ","どうかん","とうきゅう","どうぐ","とうし","とうむぎ","とおい","とおか","とおく","とおす","とおる","とかい","とかす","ときおり","ときどき","とくい","とくしゅう","とくてん","とくに","とくべつ","とけい","とける","とこや","とさか","としょかん","とそう","とたん","とちゅう","とっきゅう","とっくん","とつぜん","とつにゅう","とどける","ととのえる","とない","となえる","となり","とのさま","とばす","どぶがわ","とほう","とまる","とめる","ともだち","ともる","どようび","とらえる","とんかつ","どんぶり","ないかく","ないこう","ないしょ","ないす","ないせん","ないそう","なおす","ながい","なくす","なげる","なこうど","なさけ","なたでここ","なっとう","なつやすみ","ななおし","なにごと","なにもの","なにわ","なのか","なふだ","なまいき","なまえ","なまみ","なみだ","なめらか","なめる","なやむ","ならう","ならび","ならぶ","なれる","なわとび","なわばり","にあう","にいがた","にうけ","におい","にかい","にがて","にきび","にくしみ","にくまん","にげる","にさんかたんそ","にしき","にせもの","にちじょう","にちようび","にっか","にっき","にっけい","にっこう","にっさん","にっしょく","にっすう","にっせき","にってい","になう","にほん","にまめ","にもつ","にやり","にゅういん","にりんしゃ","にわとり","にんい","にんか","にんき","にんげん","にんしき","にんずう","にんそう","にんたい","にんち","にんてい","にんにく","にんぷ","にんまり","にんむ","にんめい","にんよう","ぬいくぎ","ぬかす","ぬぐいとる","ぬぐう","ぬくもり","ぬすむ","ぬまえび","ぬめり","ぬらす","ぬんちゃく","ねあげ","ねいき","ねいる","ねいろ","ねぐせ","ねくたい","ねくら","ねこぜ","ねこむ","ねさげ","ねすごす","ねそべる","ねだん","ねつい","ねっしん","ねつぞう","ねったいぎょ","ねぶそく","ねふだ","ねぼう","ねほりはほり","ねまき","ねまわし","ねみみ","ねむい","ねむたい","ねもと","ねらう","ねわざ","ねんいり","ねんおし","ねんかん","ねんきん","ねんぐ","ねんざ","ねんし","ねんちゃく","ねんど","ねんぴ","ねんぶつ","ねんまつ","ねんりょう","ねんれい","のいず","のおづま","のがす","のきなみ","のこぎり","のこす","のこる","のせる","のぞく","のぞむ","のたまう","のちほど","のっく","のばす","のはら","のべる","のぼる","のみもの","のやま","のらいぬ","のらねこ","のりもの","のりゆき","のれん","のんき","ばあい","はあく","ばあさん","ばいか","ばいく","はいけん","はいご","はいしん","はいすい","はいせん","はいそう","はいち","ばいばい","はいれつ","はえる","はおる","はかい","ばかり","はかる","はくしゅ","はけん","はこぶ","はさみ","はさん","はしご","ばしょ","はしる","はせる","ぱそこん","はそん","はたん","はちみつ","はつおん","はっかく","はづき","はっきり","はっくつ","はっけん","はっこう","はっさん","はっしん","はったつ","はっちゅう","はってん","はっぴょう","はっぽう","はなす","はなび","はにかむ","はぶらし","はみがき","はむかう","はめつ","はやい","はやし","はらう","はろうぃん","はわい","はんい","はんえい","はんおん","はんかく","はんきょう","ばんぐみ","はんこ","はんしゃ","はんすう","はんだん","ぱんち","ぱんつ","はんてい","はんとし","はんのう","はんぱ","はんぶん","はんぺん","はんぼうき","はんめい","はんらん","はんろん","ひいき","ひうん","ひえる","ひかく","ひかり","ひかる","ひかん","ひくい","ひけつ","ひこうき","ひこく","ひさい","ひさしぶり","ひさん","びじゅつかん","ひしょ","ひそか","ひそむ","ひたむき","ひだり","ひたる","ひつぎ","ひっこし","ひっし","ひつじゅひん","ひっす","ひつぜん","ぴったり","ぴっちり","ひつよう","ひてい","ひとごみ","ひなまつり","ひなん","ひねる","ひはん","ひびく","ひひょう","ひほう","ひまわり","ひまん","ひみつ","ひめい","ひめじし","ひやけ","ひやす","ひよう","びょうき","ひらがな","ひらく","ひりつ","ひりょう","ひるま","ひるやすみ","ひれい","ひろい","ひろう","ひろき","ひろゆき","ひんかく","ひんけつ","ひんこん","ひんしゅ","ひんそう","ぴんち","ひんぱん","びんぼう","ふあん","ふいうち","ふうけい","ふうせん","ぷうたろう","ふうとう","ふうふ","ふえる","ふおん","ふかい","ふきん","ふくざつ","ふくぶくろ","ふこう","ふさい","ふしぎ","ふじみ","ふすま","ふせい","ふせぐ","ふそく","ぶたにく","ふたん","ふちょう","ふつう","ふつか","ふっかつ","ふっき","ふっこく","ぶどう","ふとる","ふとん","ふのう","ふはい","ふひょう","ふへん","ふまん","ふみん","ふめつ","ふめん","ふよう","ふりこ","ふりる","ふるい","ふんいき","ぶんがく","ぶんぐ","ふんしつ","ぶんせき","ふんそう","ぶんぽう","へいあん","へいおん","へいがい","へいき","へいげん","へいこう","へいさ","へいしゃ","へいせつ","へいそ","へいたく","へいてん","へいねつ","へいわ","へきが","へこむ","べにいろ","べにしょうが","へらす","へんかん","べんきょう","べんごし","へんさい","へんたい","べんり","ほあん","ほいく","ぼうぎょ","ほうこく","ほうそう","ほうほう","ほうもん","ほうりつ","ほえる","ほおん","ほかん","ほきょう","ぼきん","ほくろ","ほけつ","ほけん","ほこう","ほこる","ほしい","ほしつ","ほしゅ","ほしょう","ほせい","ほそい","ほそく","ほたて","ほたる","ぽちぶくろ","ほっきょく","ほっさ","ほったん","ほとんど","ほめる","ほんい","ほんき","ほんけ","ほんしつ","ほんやく","まいにち","まかい","まかせる","まがる","まける","まこと","まさつ","まじめ","ますく","まぜる","まつり","まとめ","まなぶ","まぬけ","まねく","まほう","まもる","まゆげ","まよう","まろやか","まわす","まわり","まわる","まんが","まんきつ","まんぞく","まんなか","みいら","みうち","みえる","みがく","みかた","みかん","みけん","みこん","みじかい","みすい","みすえる","みせる","みっか","みつかる","みつける","みてい","みとめる","みなと","みなみかさい","みねらる","みのう","みのがす","みほん","みもと","みやげ","みらい","みりょく","みわく","みんか","みんぞく","むいか","むえき","むえん","むかい","むかう","むかえ","むかし","むぎちゃ","むける","むげん","むさぼる","むしあつい","むしば","むじゅん","むしろ","むすう","むすこ","むすぶ","むすめ","むせる","むせん","むちゅう","むなしい","むのう","むやみ","むよう","むらさき","むりょう","むろん","めいあん","めいうん","めいえん","めいかく","めいきょく","めいさい","めいし","めいそう","めいぶつ","めいれい","めいわく","めぐまれる","めざす","めした","めずらしい","めだつ","めまい","めやす","めんきょ","めんせき","めんどう","もうしあげる","もうどうけん","もえる","もくし","もくてき","もくようび","もちろん","もどる","もらう","もんく","もんだい","やおや","やける","やさい","やさしい","やすい","やすたろう","やすみ","やせる","やそう","やたい","やちん","やっと","やっぱり","やぶる","やめる","ややこしい","やよい","やわらかい","ゆうき","ゆうびんきょく","ゆうべ","ゆうめい","ゆけつ","ゆしゅつ","ゆせん","ゆそう","ゆたか","ゆちゃく","ゆでる","ゆにゅう","ゆびわ","ゆらい","ゆれる","ようい","ようか","ようきゅう","ようじ","ようす","ようちえん","よかぜ","よかん","よきん","よくせい","よくぼう","よけい","よごれる","よさん","よしゅう","よそう","よそく","よっか","よてい","よどがわく","よねつ","よやく","よゆう","よろこぶ","よろしい","らいう","らくがき","らくご","らくさつ","らくだ","らしんばん","らせん","らぞく","らたい","らっか","られつ","りえき","りかい","りきさく","りきせつ","りくぐん","りくつ","りけん","りこう","りせい","りそう","りそく","りてん","りねん","りゆう","りゅうがく","りよう","りょうり","りょかん","りょくちゃ","りょこう","りりく","りれき","りろん","りんご","るいけい","るいさい","るいじ","るいせき","るすばん","るりがわら","れいかん","れいぎ","れいせい","れいぞうこ","れいとう","れいぼう","れきし","れきだい","れんあい","れんけい","れんこん","れんさい","れんしゅう","れんぞく","れんらく","ろうか","ろうご","ろうじん","ろうそく","ろくが","ろこつ","ろじうら","ろしゅつ","ろせん","ろてん","ろめん","ろれつ","ろんぎ","ろんぱ","ろんぶん","ろんり","わかす","わかめ","わかやま","わかれる","わしつ","わじまし","わすれもの","わらう","われる"]},function(t,e,i){"use strict";t.exports=["ábaco","abdomen","abeja","abierto","abogado","abono","aborto","abrazo","abrir","abuelo","abuso","acabar","academia","acceso","acción","aceite","acelga","acento","aceptar","ácido","aclarar","acné","acoger","acoso","activo","acto","actriz","actuar","acudir","acuerdo","acusar","adicto","admitir","adoptar","adorno","aduana","adulto","aéreo","afectar","afición","afinar","afirmar","ágil","agitar","agonía","agosto","agotar","agregar","agrio","agua","agudo","águila","aguja","ahogo","ahorro","aire","aislar","ajedrez","ajeno","ajuste","alacrán","alambre","alarma","alba","álbum","alcalde","aldea","alegre","alejar","alerta","aleta","alfiler","alga","algodón","aliado","aliento","alivio","alma","almeja","almíbar","altar","alteza","altivo","alto","altura","alumno","alzar","amable","amante","amapola","amargo","amasar","ámbar","ámbito","ameno","amigo","amistad","amor","amparo","amplio","ancho","anciano","ancla","andar","andén","anemia","ángulo","anillo","ánimo","anís","anotar","antena","antiguo","antojo","anual","anular","anuncio","añadir","añejo","año","apagar","aparato","apetito","apio","aplicar","apodo","aporte","apoyo","aprender","aprobar","apuesta","apuro","arado","araña","arar","árbitro","árbol","arbusto","archivo","arco","arder","ardilla","arduo","área","árido","aries","armonía","arnés","aroma","arpa","arpón","arreglo","arroz","arruga","arte","artista","asa","asado","asalto","ascenso","asegurar","aseo","asesor","asiento","asilo","asistir","asno","asombro","áspero","astilla","astro","astuto","asumir","asunto","atajo","ataque","atar","atento","ateo","ático","atleta","átomo","atraer","atroz","atún","audaz","audio","auge","aula","aumento","ausente","autor","aval","avance","avaro","ave","avellana","avena","avestruz","avión","aviso","ayer","ayuda","ayuno","azafrán","azar","azote","azúcar","azufre","azul","baba","babor","bache","bahía","baile","bajar","balanza","balcón","balde","bambú","banco","banda","baño","barba","barco","barniz","barro","báscula","bastón","basura","batalla","batería","batir","batuta","baúl","bazar","bebé","bebida","bello","besar","beso","bestia","bicho","bien","bingo","blanco","bloque","blusa","boa","bobina","bobo","boca","bocina","boda","bodega","boina","bola","bolero","bolsa","bomba","bondad","bonito","bono","bonsái","borde","borrar","bosque","bote","botín","bóveda","bozal","bravo","brazo","brecha","breve","brillo","brinco","brisa","broca","broma","bronce","brote","bruja","brusco","bruto","buceo","bucle","bueno","buey","bufanda","bufón","búho","buitre","bulto","burbuja","burla","burro","buscar","butaca","buzón","caballo","cabeza","cabina","cabra","cacao","cadáver","cadena","caer","café","caída","caimán","caja","cajón","cal","calamar","calcio","caldo","calidad","calle","calma","calor","calvo","cama","cambio","camello","camino","campo","cáncer","candil","canela","canguro","canica","canto","caña","cañón","caoba","caos","capaz","capitán","capote","captar","capucha","cara","carbón","cárcel","careta","carga","cariño","carne","carpeta","carro","carta","casa","casco","casero","caspa","castor","catorce","catre","caudal","causa","cazo","cebolla","ceder","cedro","celda","célebre","celoso","célula","cemento","ceniza","centro","cerca","cerdo","cereza","cero","cerrar","certeza","césped","cetro","chacal","chaleco","champú","chancla","chapa","charla","chico","chiste","chivo","choque","choza","chuleta","chupar","ciclón","ciego","cielo","cien","cierto","cifra","cigarro","cima","cinco","cine","cinta","ciprés","circo","ciruela","cisne","cita","ciudad","clamor","clan","claro","clase","clave","cliente","clima","clínica","cobre","cocción","cochino","cocina","coco","código","codo","cofre","coger","cohete","cojín","cojo","cola","colcha","colegio","colgar","colina","collar","colmo","columna","combate","comer","comida","cómodo","compra","conde","conejo","conga","conocer","consejo","contar","copa","copia","corazón","corbata","corcho","cordón","corona","correr","coser","cosmos","costa","cráneo","cráter","crear","crecer","creído","crema","cría","crimen","cripta","crisis","cromo","crónica","croqueta","crudo","cruz","cuadro","cuarto","cuatro","cubo","cubrir","cuchara","cuello","cuento","cuerda","cuesta","cueva","cuidar","culebra","culpa","culto","cumbre","cumplir","cuna","cuneta","cuota","cupón","cúpula","curar","curioso","curso","curva","cutis","dama","danza","dar","dardo","dátil","deber","débil","década","decir","dedo","defensa","definir","dejar","delfín","delgado","delito","demora","denso","dental","deporte","derecho","derrota","desayuno","deseo","desfile","desnudo","destino","desvío","detalle","detener","deuda","día","diablo","diadema","diamante","diana","diario","dibujo","dictar","diente","dieta","diez","difícil","digno","dilema","diluir","dinero","directo","dirigir","disco","diseño","disfraz","diva","divino","doble","doce","dolor","domingo","don","donar","dorado","dormir","dorso","dos","dosis","dragón","droga","ducha","duda","duelo","dueño","dulce","dúo","duque","durar","dureza","duro","ébano","ebrio","echar","eco","ecuador","edad","edición","edificio","editor","educar","efecto","eficaz","eje","ejemplo","elefante","elegir","elemento","elevar","elipse","élite","elixir","elogio","eludir","embudo","emitir","emoción","empate","empeño","empleo","empresa","enano","encargo","enchufe","encía","enemigo","enero","enfado","enfermo","engaño","enigma","enlace","enorme","enredo","ensayo","enseñar","entero","entrar","envase","envío","época","equipo","erizo","escala","escena","escolar","escribir","escudo","esencia","esfera","esfuerzo","espada","espejo","espía","esposa","espuma","esquí","estar","este","estilo","estufa","etapa","eterno","ética","etnia","evadir","evaluar","evento","evitar","exacto","examen","exceso","excusa","exento","exigir","exilio","existir","éxito","experto","explicar","exponer","extremo","fábrica","fábula","fachada","fácil","factor","faena","faja","falda","fallo","falso","faltar","fama","familia","famoso","faraón","farmacia","farol","farsa","fase","fatiga","fauna","favor","fax","febrero","fecha","feliz","feo","feria","feroz","fértil","fervor","festín","fiable","fianza","fiar","fibra","ficción","ficha","fideo","fiebre","fiel","fiera","fiesta","figura","fijar","fijo","fila","filete","filial","filtro","fin","finca","fingir","finito","firma","flaco","flauta","flecha","flor","flota","fluir","flujo","flúor","fobia","foca","fogata","fogón","folio","folleto","fondo","forma","forro","fortuna","forzar","fosa","foto","fracaso","frágil","franja","frase","fraude","freír","freno","fresa","frío","frito","fruta","fuego","fuente","fuerza","fuga","fumar","función","funda","furgón","furia","fusil","fútbol","futuro","gacela","gafas","gaita","gajo","gala","galería","gallo","gamba","ganar","gancho","ganga","ganso","garaje","garza","gasolina","gastar","gato","gavilán","gemelo","gemir","gen","género","genio","gente","geranio","gerente","germen","gesto","gigante","gimnasio","girar","giro","glaciar","globo","gloria","gol","golfo","goloso","golpe","goma","gordo","gorila","gorra","gota","goteo","gozar","grada","gráfico","grano","grasa","gratis","grave","grieta","grillo","gripe","gris","grito","grosor","grúa","grueso","grumo","grupo","guante","guapo","guardia","guerra","guía","guiño","guion","guiso","guitarra","gusano","gustar","haber","hábil","hablar","hacer","hacha","hada","hallar","hamaca","harina","haz","hazaña","hebilla","hebra","hecho","helado","helio","hembra","herir","hermano","héroe","hervir","hielo","hierro","hígado","higiene","hijo","himno","historia","hocico","hogar","hoguera","hoja","hombre","hongo","honor","honra","hora","hormiga","horno","hostil","hoyo","hueco","huelga","huerta","hueso","huevo","huida","huir","humano","húmedo","humilde","humo","hundir","huracán","hurto","icono","ideal","idioma","ídolo","iglesia","iglú","igual","ilegal","ilusión","imagen","imán","imitar","impar","imperio","imponer","impulso","incapaz","índice","inerte","infiel","informe","ingenio","inicio","inmenso","inmune","innato","insecto","instante","interés","íntimo","intuir","inútil","invierno","ira","iris","ironía","isla","islote","jabalí","jabón","jamón","jarabe","jardín","jarra","jaula","jazmín","jefe","jeringa","jinete","jornada","joroba","joven","joya","juerga","jueves","juez","jugador","jugo","juguete","juicio","junco","jungla","junio","juntar","júpiter","jurar","justo","juvenil","juzgar","kilo","koala","labio","lacio","lacra","lado","ladrón","lagarto","lágrima","laguna","laico","lamer","lámina","lámpara","lana","lancha","langosta","lanza","lápiz","largo","larva","lástima","lata","látex","latir","laurel","lavar","lazo","leal","lección","leche","lector","leer","legión","legumbre","lejano","lengua","lento","leña","león","leopardo","lesión","letal","letra","leve","leyenda","libertad","libro","licor","líder","lidiar","lienzo","liga","ligero","lima","límite","limón","limpio","lince","lindo","línea","lingote","lino","linterna","líquido","liso","lista","litera","litio","litro","llaga","llama","llanto","llave","llegar","llenar","llevar","llorar","llover","lluvia","lobo","loción","loco","locura","lógica","logro","lombriz","lomo","lonja","lote","lucha","lucir","lugar","lujo","luna","lunes","lupa","lustro","luto","luz","maceta","macho","madera","madre","maduro","maestro","mafia","magia","mago","maíz","maldad","maleta","malla","malo","mamá","mambo","mamut","manco","mando","manejar","manga","maniquí","manjar","mano","manso","manta","mañana","mapa","máquina","mar","marco","marea","marfil","margen","marido","mármol","marrón","martes","marzo","masa","máscara","masivo","matar","materia","matiz","matriz","máximo","mayor","mazorca","mecha","medalla","medio","médula","mejilla","mejor","melena","melón","memoria","menor","mensaje","mente","menú","mercado","merengue","mérito","mes","mesón","meta","meter","método","metro","mezcla","miedo","miel","miembro","miga","mil","milagro","militar","millón","mimo","mina","minero","mínimo","minuto","miope","mirar","misa","miseria","misil","mismo","mitad","mito","mochila","moción","moda","modelo","moho","mojar","molde","moler","molino","momento","momia","monarca","moneda","monja","monto","moño","morada","morder","moreno","morir","morro","morsa","mortal","mosca","mostrar","motivo","mover","móvil","mozo","mucho","mudar","mueble","muela","muerte","muestra","mugre","mujer","mula","muleta","multa","mundo","muñeca","mural","muro","músculo","museo","musgo","música","muslo","nácar","nación","nadar","naipe","naranja","nariz","narrar","nasal","natal","nativo","natural","náusea","naval","nave","navidad","necio","néctar","negar","negocio","negro","neón","nervio","neto","neutro","nevar","nevera","nicho","nido","niebla","nieto","niñez","niño","nítido","nivel","nobleza","noche","nómina","noria","norma","norte","nota","noticia","novato","novela","novio","nube","nuca","núcleo","nudillo","nudo","nuera","nueve","nuez","nulo","número","nutria","oasis","obeso","obispo","objeto","obra","obrero","observar","obtener","obvio","oca","ocaso","océano","ochenta","ocho","ocio","ocre","octavo","octubre","oculto","ocupar","ocurrir","odiar","odio","odisea","oeste","ofensa","oferta","oficio","ofrecer","ogro","oído","oír","ojo","ola","oleada","olfato","olivo","olla","olmo","olor","olvido","ombligo","onda","onza","opaco","opción","ópera","opinar","oponer","optar","óptica","opuesto","oración","orador","oral","órbita","orca","orden","oreja","órgano","orgía","orgullo","oriente","origen","orilla","oro","orquesta","oruga","osadía","oscuro","osezno","oso","ostra","otoño","otro","oveja","óvulo","óxido","oxígeno","oyente","ozono","pacto","padre","paella","página","pago","país","pájaro","palabra","palco","paleta","pálido","palma","paloma","palpar","pan","panal","pánico","pantera","pañuelo","papá","papel","papilla","paquete","parar","parcela","pared","parir","paro","párpado","parque","párrafo","parte","pasar","paseo","pasión","paso","pasta","pata","patio","patria","pausa","pauta","pavo","payaso","peatón","pecado","pecera","pecho","pedal","pedir","pegar","peine","pelar","peldaño","pelea","peligro","pellejo","pelo","peluca","pena","pensar","peñón","peón","peor","pepino","pequeño","pera","percha","perder","pereza","perfil","perico","perla","permiso","perro","persona","pesa","pesca","pésimo","pestaña","pétalo","petróleo","pez","pezuña","picar","pichón","pie","piedra","pierna","pieza","pijama","pilar","piloto","pimienta","pino","pintor","pinza","piña","piojo","pipa","pirata","pisar","piscina","piso","pista","pitón","pizca","placa","plan","plata","playa","plaza","pleito","pleno","plomo","pluma","plural","pobre","poco","poder","podio","poema","poesía","poeta","polen","policía","pollo","polvo","pomada","pomelo","pomo","pompa","poner","porción","portal","posada","poseer","posible","poste","potencia","potro","pozo","prado","precoz","pregunta","premio","prensa","preso","previo","primo","príncipe","prisión","privar","proa","probar","proceso","producto","proeza","profesor","programa","prole","promesa","pronto","propio","próximo","prueba","público","puchero","pudor","pueblo","puerta","puesto","pulga","pulir","pulmón","pulpo","pulso","puma","punto","puñal","puño","pupa","pupila","puré","quedar","queja","quemar","querer","queso","quieto","química","quince","quitar","rábano","rabia","rabo","ración","radical","raíz","rama","rampa","rancho","rango","rapaz","rápido","rapto","rasgo","raspa","rato","rayo","raza","razón","reacción","realidad","rebaño","rebote","recaer","receta","rechazo","recoger","recreo","recto","recurso","red","redondo","reducir","reflejo","reforma","refrán","refugio","regalo","regir","regla","regreso","rehén","reino","reír","reja","relato","relevo","relieve","relleno","reloj","remar","remedio","remo","rencor","rendir","renta","reparto","repetir","reposo","reptil","res","rescate","resina","respeto","resto","resumen","retiro","retorno","retrato","reunir","revés","revista","rey","rezar","rico","riego","rienda","riesgo","rifa","rígido","rigor","rincón","riñón","río","riqueza","risa","ritmo","rito","rizo","roble","roce","rociar","rodar","rodeo","rodilla","roer","rojizo","rojo","romero","romper","ron","ronco","ronda","ropa","ropero","rosa","rosca","rostro","rotar","rubí","rubor","rudo","rueda","rugir","ruido","ruina","ruleta","rulo","rumbo","rumor","ruptura","ruta","rutina","sábado","saber","sabio","sable","sacar","sagaz","sagrado","sala","saldo","salero","salir","salmón","salón","salsa","salto","salud","salvar","samba","sanción","sandía","sanear","sangre","sanidad","sano","santo","sapo","saque","sardina","sartén","sastre","satán","sauna","saxofón","sección","seco","secreto","secta","sed","seguir","seis","sello","selva","semana","semilla","senda","sensor","señal","señor","separar","sepia","sequía","ser","serie","sermón","servir","sesenta","sesión","seta","setenta","severo","sexo","sexto","sidra","siesta","siete","siglo","signo","sílaba","silbar","silencio","silla","símbolo","simio","sirena","sistema","sitio","situar","sobre","socio","sodio","sol","solapa","soldado","soledad","sólido","soltar","solución","sombra","sondeo","sonido","sonoro","sonrisa","sopa","soplar","soporte","sordo","sorpresa","sorteo","sostén","sótano","suave","subir","suceso","sudor","suegra","suelo","sueño","suerte","sufrir","sujeto","sultán","sumar","superar","suplir","suponer","supremo","sur","surco","sureño","surgir","susto","sutil","tabaco","tabique","tabla","tabú","taco","tacto","tajo","talar","talco","talento","talla","talón","tamaño","tambor","tango","tanque","tapa","tapete","tapia","tapón","taquilla","tarde","tarea","tarifa","tarjeta","tarot","tarro","tarta","tatuaje","tauro","taza","tazón","teatro","techo","tecla","técnica","tejado","tejer","tejido","tela","teléfono","tema","temor","templo","tenaz","tender","tener","tenis","tenso","teoría","terapia","terco","término","ternura","terror","tesis","tesoro","testigo","tetera","texto","tez","tibio","tiburón","tiempo","tienda","tierra","tieso","tigre","tijera","tilde","timbre","tímido","timo","tinta","tío","típico","tipo","tira","tirón","titán","títere","título","tiza","toalla","tobillo","tocar","tocino","todo","toga","toldo","tomar","tono","tonto","topar","tope","toque","tórax","torero","tormenta","torneo","toro","torpedo","torre","torso","tortuga","tos","tosco","toser","tóxico","trabajo","tractor","traer","tráfico","trago","traje","tramo","trance","trato","trauma","trazar","trébol","tregua","treinta","tren","trepar","tres","tribu","trigo","tripa","triste","triunfo","trofeo","trompa","tronco","tropa","trote","trozo","truco","trueno","trufa","tubería","tubo","tuerto","tumba","tumor","túnel","túnica","turbina","turismo","turno","tutor","ubicar","úlcera","umbral","unidad","unir","universo","uno","untar","uña","urbano","urbe","urgente","urna","usar","usuario","útil","utopía","uva","vaca","vacío","vacuna","vagar","vago","vaina","vajilla","vale","válido","valle","valor","válvula","vampiro","vara","variar","varón","vaso","vecino","vector","vehículo","veinte","vejez","vela","velero","veloz","vena","vencer","venda","veneno","vengar","venir","venta","venus","ver","verano","verbo","verde","vereda","verja","verso","verter","vía","viaje","vibrar","vicio","víctima","vida","vídeo","vidrio","viejo","viernes","vigor","vil","villa","vinagre","vino","viñedo","violín","viral","virgo","virtud","visor","víspera","vista","vitamina","viudo","vivaz","vivero","vivir","vivo","volcán","volumen","volver","voraz","votar","voto","voz","vuelo","vulgar","yacer","yate","yegua","yema","yerno","yeso","yodo","yoga","yogur","zafiro","zanja","zapato","zarza","zona","zorro","zumo","zurdo"]},function(t,e){
/*!
https://github.com/walling/unorm
The software dual licensed under the MIT and GPL licenses. MIT license:

    Copyright (c) 2008-2013 Matsuza <matsuza@gmail.com>, Bjarke Walling <bwp@bwp.dk>

    Permission is hereby granted, free of charge, to any person obtaining a copy
    of this software and associated documentation files (the "Software"), to
    deal in the Software without restriction, including without limitation the
    rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
    sell copies of the Software, and to permit persons to whom the Software is
    furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in
    all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
    IN THE SOFTWARE.

GPL notice (please read the [full GPL license] online):

    Copyright (C) 2008-2013 Matsuza <matsuza@gmail.com>, Bjarke Walling <bwp@bwp.dk>

    This program is free software; you can redistribute it and/or
    modify it under the terms of the GNU General Public License
    as published by the Free Software Foundation; either version 2
    of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.


[full GPL license]: http://www.gnu.org/licenses/gpl-2.0-standalone.html
*/
!function(){"use strict";for(var e=[null,0,{}],i=function(t,e){this.codepoint=t,this.feature=e},r={},s=[],n=0;n<=255;++n)s[n]=0;function o(t){this.str=t,this.cursor=0}function a(t,e){this.it=t,this.canonical=e,this.resBuf=[]}function h(t){this.it=t,this.resBuf=[]}function c(t){this.it=t,this.procBuf=[],this.resBuf=[],this.lastClass=null}function u(t,e){for(var i,r=f(t,e),s="";i=r.next();)s+=i.toString();return s}var l=[function(t,r,s){return r<60||13311<r&&r<42607?new i(r,e):t(r,s)},function(t,e,i){var n=r[e];return n||(n=t(e,i)).feature&&10<++s[e>>8&255]&&(r[e]=n),n},function(t,e,r){return r?t(e,r):new i(e,null)},function(t,e,r){if(e<4352||4371<=e&&e<44032||55204<e)return t(e,r);if(4352<=e&&e<4371){for(var s={},n=21*(e-4352),o=0;o<21;++o)s[4449+o]=44032+28*(o+n);return new i(e,[,,s])}var a=[];if(0!=(r=(t=e-44032)%28))a[0]=[44032+t-r,4519+r];else for(a[0]=[4352+Math.floor(t/588),4449+Math.floor(t%588/28)],a[2]={},o=1;o<28;++o)a[2][4519+o]=e+o;return new i(e,a)},function(t,r,s){var n=(i.udata[65280&r]||{})[r];return new i(r,n||e)}],f=(i.fromCharCode=l.reduceRight((function(t,e){return function(i,r){return e(t,i,r)}}),null),i.isHighSurrogate=function(t){return 55296<=t&&t<=56319},i.isLowSurrogate=function(t){return 56320<=t&&t<=57343},i.prototype.prepFeature=function(){this.feature||(this.feature=i.fromCharCode(this.codepoint,!0).feature)},i.prototype.toString=function(){var t;return this.codepoint<65536?String.fromCharCode(this.codepoint):(t=this.codepoint-65536,String.fromCharCode(Math.floor(t/1024)+55296,t%1024+56320))},i.prototype.getDecomp=function(){return this.prepFeature(),this.feature[0]||null},i.prototype.isCompatibility=function(){return this.prepFeature(),!!this.feature[1]&&256&this.feature[1]},i.prototype.isExclude=function(){return this.prepFeature(),!!this.feature[1]&&512&this.feature[1]},i.prototype.getCanonicalClass=function(){return this.prepFeature(),this.feature[1]?255&this.feature[1]:0},i.prototype.getComposite=function(t){return this.prepFeature(),this.feature[2]&&(t=this.feature[2][t.codepoint])?i.fromCharCode(t):null},o.prototype.next=function(){var t,e;return this.str&&this.cursor<this.str.length?(t=this.str.charCodeAt(this.cursor++),i.isHighSurrogate(t)&&this.cursor<this.str.length&&i.isLowSurrogate(e=this.str.charCodeAt(this.cursor))&&(t=1024*(t-55296)+(e-56320)+65536,++this.cursor),i.fromCharCode(t)):this.str=null},a.prototype.next=function(){if(0===this.resBuf.length){var t=this.it.next();if(!t)return null;this.resBuf=function t(e,r){var s=r.getDecomp();if(!s||e&&r.isCompatibility())return[r];for(var n=[],o=0;o<s.length;++o){var a=t(e,i.fromCharCode(s[o]));n=n.concat(a)}return n}(this.canonical,t)}return this.resBuf.shift()},h.prototype.next=function(){if(0===this.resBuf.length)do{var t=this.it.next();if(!t)break;var e=t.getCanonicalClass(),i=this.resBuf.length;if(0!==e)for(;0<i&&!(this.resBuf[i-1].getCanonicalClass()<=e);--i);}while(this.resBuf.splice(i,0,t),0!==e);return this.resBuf.shift()},c.prototype.next=function(){for(;0===this.resBuf.length;){var t,e,i=this.it.next();if(!i){this.resBuf=this.procBuf,this.procBuf=[];break}0===this.procBuf.length?(this.lastClass=i.getCanonicalClass(),this.procBuf.push(i)):(t=this.procBuf[0].getComposite(i),e=i.getCanonicalClass(),t&&(this.lastClass<e||0===this.lastClass)?this.procBuf[0]=t:(0===e&&(this.resBuf=this.procBuf,this.procBuf=[]),this.lastClass=e,this.procBuf.push(i)))}return this.resBuf.shift()},function(t,e){switch(t){case"NFD":return new h(new a(new o(e),!0));case"NFKD":return new h(new a(new o(e),!1));case"NFC":return new c(new h(new a(new o(e),!0)));case"NFKC":return new c(new h(new a(new o(e),!1)))}throw t+" is invalid"});i.udata={0:{60:[,,{824:8814}],61:[,,{824:8800}],62:[,,{824:8815}],65:[,,{768:192,769:193,770:194,771:195,772:256,774:258,775:550,776:196,777:7842,778:197,780:461,783:512,785:514,803:7840,805:7680,808:260}],66:[,,{775:7682,803:7684,817:7686}],67:[,,{769:262,770:264,775:266,780:268,807:199}],68:[,,{775:7690,780:270,803:7692,807:7696,813:7698,817:7694}],69:[,,{768:200,769:201,770:202,771:7868,772:274,774:276,775:278,776:203,777:7866,780:282,783:516,785:518,803:7864,807:552,808:280,813:7704,816:7706}],70:[,,{775:7710}],71:[,,{769:500,770:284,772:7712,774:286,775:288,780:486,807:290}],72:[,,{770:292,775:7714,776:7718,780:542,803:7716,807:7720,814:7722}],73:[,,{768:204,769:205,770:206,771:296,772:298,774:300,775:304,776:207,777:7880,780:463,783:520,785:522,803:7882,808:302,816:7724}],74:[,,{770:308}],75:[,,{769:7728,780:488,803:7730,807:310,817:7732}],76:[,,{769:313,780:317,803:7734,807:315,813:7740,817:7738}],77:[,,{769:7742,775:7744,803:7746}],78:[,,{768:504,769:323,771:209,775:7748,780:327,803:7750,807:325,813:7754,817:7752}],79:[,,{768:210,769:211,770:212,771:213,772:332,774:334,775:558,776:214,777:7886,779:336,780:465,783:524,785:526,795:416,803:7884,808:490}],80:[,,{769:7764,775:7766}],82:[,,{769:340,775:7768,780:344,783:528,785:530,803:7770,807:342,817:7774}],83:[,,{769:346,770:348,775:7776,780:352,803:7778,806:536,807:350}],84:[,,{775:7786,780:356,803:7788,806:538,807:354,813:7792,817:7790}],85:[,,{768:217,769:218,770:219,771:360,772:362,774:364,776:220,777:7910,778:366,779:368,780:467,783:532,785:534,795:431,803:7908,804:7794,808:370,813:7798,816:7796}],86:[,,{771:7804,803:7806}],87:[,,{768:7808,769:7810,770:372,775:7814,776:7812,803:7816}],88:[,,{775:7818,776:7820}],89:[,,{768:7922,769:221,770:374,771:7928,772:562,775:7822,776:376,777:7926,803:7924}],90:[,,{769:377,770:7824,775:379,780:381,803:7826,817:7828}],97:[,,{768:224,769:225,770:226,771:227,772:257,774:259,775:551,776:228,777:7843,778:229,780:462,783:513,785:515,803:7841,805:7681,808:261}],98:[,,{775:7683,803:7685,817:7687}],99:[,,{769:263,770:265,775:267,780:269,807:231}],100:[,,{775:7691,780:271,803:7693,807:7697,813:7699,817:7695}],101:[,,{768:232,769:233,770:234,771:7869,772:275,774:277,775:279,776:235,777:7867,780:283,783:517,785:519,803:7865,807:553,808:281,813:7705,816:7707}],102:[,,{775:7711}],103:[,,{769:501,770:285,772:7713,774:287,775:289,780:487,807:291}],104:[,,{770:293,775:7715,776:7719,780:543,803:7717,807:7721,814:7723,817:7830}],105:[,,{768:236,769:237,770:238,771:297,772:299,774:301,776:239,777:7881,780:464,783:521,785:523,803:7883,808:303,816:7725}],106:[,,{770:309,780:496}],107:[,,{769:7729,780:489,803:7731,807:311,817:7733}],108:[,,{769:314,780:318,803:7735,807:316,813:7741,817:7739}],109:[,,{769:7743,775:7745,803:7747}],110:[,,{768:505,769:324,771:241,775:7749,780:328,803:7751,807:326,813:7755,817:7753}],111:[,,{768:242,769:243,770:244,771:245,772:333,774:335,775:559,776:246,777:7887,779:337,780:466,783:525,785:527,795:417,803:7885,808:491}],112:[,,{769:7765,775:7767}],114:[,,{769:341,775:7769,780:345,783:529,785:531,803:7771,807:343,817:7775}],115:[,,{769:347,770:349,775:7777,780:353,803:7779,806:537,807:351}],116:[,,{775:7787,776:7831,780:357,803:7789,806:539,807:355,813:7793,817:7791}],117:[,,{768:249,769:250,770:251,771:361,772:363,774:365,776:252,777:7911,778:367,779:369,780:468,783:533,785:535,795:432,803:7909,804:7795,808:371,813:7799,816:7797}],118:[,,{771:7805,803:7807}],119:[,,{768:7809,769:7811,770:373,775:7815,776:7813,778:7832,803:7817}],120:[,,{775:7819,776:7821}],121:[,,{768:7923,769:253,770:375,771:7929,772:563,775:7823,776:255,777:7927,778:7833,803:7925}],122:[,,{769:378,770:7825,775:380,780:382,803:7827,817:7829}],160:[[32],256],168:[[32,776],256,{768:8173,769:901,834:8129}],170:[[97],256],175:[[32,772],256],178:[[50],256],179:[[51],256],180:[[32,769],256],181:[[956],256],184:[[32,807],256],185:[[49],256],186:[[111],256],188:[[49,8260,52],256],189:[[49,8260,50],256],190:[[51,8260,52],256],192:[[65,768]],193:[[65,769]],194:[[65,770],,{768:7846,769:7844,771:7850,777:7848}],195:[[65,771]],196:[[65,776],,{772:478}],197:[[65,778],,{769:506}],198:[,,{769:508,772:482}],199:[[67,807],,{769:7688}],200:[[69,768]],201:[[69,769]],202:[[69,770],,{768:7872,769:7870,771:7876,777:7874}],203:[[69,776]],204:[[73,768]],205:[[73,769]],206:[[73,770]],207:[[73,776],,{769:7726}],209:[[78,771]],210:[[79,768]],211:[[79,769]],212:[[79,770],,{768:7890,769:7888,771:7894,777:7892}],213:[[79,771],,{769:7756,772:556,776:7758}],214:[[79,776],,{772:554}],216:[,,{769:510}],217:[[85,768]],218:[[85,769]],219:[[85,770]],220:[[85,776],,{768:475,769:471,772:469,780:473}],221:[[89,769]],224:[[97,768]],225:[[97,769]],226:[[97,770],,{768:7847,769:7845,771:7851,777:7849}],227:[[97,771]],228:[[97,776],,{772:479}],229:[[97,778],,{769:507}],230:[,,{769:509,772:483}],231:[[99,807],,{769:7689}],232:[[101,768]],233:[[101,769]],234:[[101,770],,{768:7873,769:7871,771:7877,777:7875}],235:[[101,776]],236:[[105,768]],237:[[105,769]],238:[[105,770]],239:[[105,776],,{769:7727}],241:[[110,771]],242:[[111,768]],243:[[111,769]],244:[[111,770],,{768:7891,769:7889,771:7895,777:7893}],245:[[111,771],,{769:7757,772:557,776:7759}],246:[[111,776],,{772:555}],248:[,,{769:511}],249:[[117,768]],250:[[117,769]],251:[[117,770]],252:[[117,776],,{768:476,769:472,772:470,780:474}],253:[[121,769]],255:[[121,776]]},256:{256:[[65,772]],257:[[97,772]],258:[[65,774],,{768:7856,769:7854,771:7860,777:7858}],259:[[97,774],,{768:7857,769:7855,771:7861,777:7859}],260:[[65,808]],261:[[97,808]],262:[[67,769]],263:[[99,769]],264:[[67,770]],265:[[99,770]],266:[[67,775]],267:[[99,775]],268:[[67,780]],269:[[99,780]],270:[[68,780]],271:[[100,780]],274:[[69,772],,{768:7700,769:7702}],275:[[101,772],,{768:7701,769:7703}],276:[[69,774]],277:[[101,774]],278:[[69,775]],279:[[101,775]],280:[[69,808]],281:[[101,808]],282:[[69,780]],283:[[101,780]],284:[[71,770]],285:[[103,770]],286:[[71,774]],287:[[103,774]],288:[[71,775]],289:[[103,775]],290:[[71,807]],291:[[103,807]],292:[[72,770]],293:[[104,770]],296:[[73,771]],297:[[105,771]],298:[[73,772]],299:[[105,772]],300:[[73,774]],301:[[105,774]],302:[[73,808]],303:[[105,808]],304:[[73,775]],306:[[73,74],256],307:[[105,106],256],308:[[74,770]],309:[[106,770]],310:[[75,807]],311:[[107,807]],313:[[76,769]],314:[[108,769]],315:[[76,807]],316:[[108,807]],317:[[76,780]],318:[[108,780]],319:[[76,183],256],320:[[108,183],256],323:[[78,769]],324:[[110,769]],325:[[78,807]],326:[[110,807]],327:[[78,780]],328:[[110,780]],329:[[700,110],256],332:[[79,772],,{768:7760,769:7762}],333:[[111,772],,{768:7761,769:7763}],334:[[79,774]],335:[[111,774]],336:[[79,779]],337:[[111,779]],340:[[82,769]],341:[[114,769]],342:[[82,807]],343:[[114,807]],344:[[82,780]],345:[[114,780]],346:[[83,769],,{775:7780}],347:[[115,769],,{775:7781}],348:[[83,770]],349:[[115,770]],350:[[83,807]],351:[[115,807]],352:[[83,780],,{775:7782}],353:[[115,780],,{775:7783}],354:[[84,807]],355:[[116,807]],356:[[84,780]],357:[[116,780]],360:[[85,771],,{769:7800}],361:[[117,771],,{769:7801}],362:[[85,772],,{776:7802}],363:[[117,772],,{776:7803}],364:[[85,774]],365:[[117,774]],366:[[85,778]],367:[[117,778]],368:[[85,779]],369:[[117,779]],370:[[85,808]],371:[[117,808]],372:[[87,770]],373:[[119,770]],374:[[89,770]],375:[[121,770]],376:[[89,776]],377:[[90,769]],378:[[122,769]],379:[[90,775]],380:[[122,775]],381:[[90,780]],382:[[122,780]],383:[[115],256,{775:7835}],416:[[79,795],,{768:7900,769:7898,771:7904,777:7902,803:7906}],417:[[111,795],,{768:7901,769:7899,771:7905,777:7903,803:7907}],431:[[85,795],,{768:7914,769:7912,771:7918,777:7916,803:7920}],432:[[117,795],,{768:7915,769:7913,771:7919,777:7917,803:7921}],439:[,,{780:494}],452:[[68,381],256],453:[[68,382],256],454:[[100,382],256],455:[[76,74],256],456:[[76,106],256],457:[[108,106],256],458:[[78,74],256],459:[[78,106],256],460:[[110,106],256],461:[[65,780]],462:[[97,780]],463:[[73,780]],464:[[105,780]],465:[[79,780]],466:[[111,780]],467:[[85,780]],468:[[117,780]],469:[[220,772]],470:[[252,772]],471:[[220,769]],472:[[252,769]],473:[[220,780]],474:[[252,780]],475:[[220,768]],476:[[252,768]],478:[[196,772]],479:[[228,772]],480:[[550,772]],481:[[551,772]],482:[[198,772]],483:[[230,772]],486:[[71,780]],487:[[103,780]],488:[[75,780]],489:[[107,780]],490:[[79,808],,{772:492}],491:[[111,808],,{772:493}],492:[[490,772]],493:[[491,772]],494:[[439,780]],495:[[658,780]],496:[[106,780]],497:[[68,90],256],498:[[68,122],256],499:[[100,122],256],500:[[71,769]],501:[[103,769]],504:[[78,768]],505:[[110,768]],506:[[197,769]],507:[[229,769]],508:[[198,769]],509:[[230,769]],510:[[216,769]],511:[[248,769]],66045:[,220]},512:{512:[[65,783]],513:[[97,783]],514:[[65,785]],515:[[97,785]],516:[[69,783]],517:[[101,783]],518:[[69,785]],519:[[101,785]],520:[[73,783]],521:[[105,783]],522:[[73,785]],523:[[105,785]],524:[[79,783]],525:[[111,783]],526:[[79,785]],527:[[111,785]],528:[[82,783]],529:[[114,783]],530:[[82,785]],531:[[114,785]],532:[[85,783]],533:[[117,783]],534:[[85,785]],535:[[117,785]],536:[[83,806]],537:[[115,806]],538:[[84,806]],539:[[116,806]],542:[[72,780]],543:[[104,780]],550:[[65,775],,{772:480}],551:[[97,775],,{772:481}],552:[[69,807],,{774:7708}],553:[[101,807],,{774:7709}],554:[[214,772]],555:[[246,772]],556:[[213,772]],557:[[245,772]],558:[[79,775],,{772:560}],559:[[111,775],,{772:561}],560:[[558,772]],561:[[559,772]],562:[[89,772]],563:[[121,772]],658:[,,{780:495}],688:[[104],256],689:[[614],256],690:[[106],256],691:[[114],256],692:[[633],256],693:[[635],256],694:[[641],256],695:[[119],256],696:[[121],256],728:[[32,774],256],729:[[32,775],256],730:[[32,778],256],731:[[32,808],256],732:[[32,771],256],733:[[32,779],256],736:[[611],256],737:[[108],256],738:[[115],256],739:[[120],256],740:[[661],256],66272:[,220]},768:{768:[,230],769:[,230],770:[,230],771:[,230],772:[,230],773:[,230],774:[,230],775:[,230],776:[,230,{769:836}],777:[,230],778:[,230],779:[,230],780:[,230],781:[,230],782:[,230],783:[,230],784:[,230],785:[,230],786:[,230],787:[,230],788:[,230],789:[,232],790:[,220],791:[,220],792:[,220],793:[,220],794:[,232],795:[,216],796:[,220],797:[,220],798:[,220],799:[,220],800:[,220],801:[,202],802:[,202],803:[,220],804:[,220],805:[,220],806:[,220],807:[,202],808:[,202],809:[,220],810:[,220],811:[,220],812:[,220],813:[,220],814:[,220],815:[,220],816:[,220],817:[,220],818:[,220],819:[,220],820:[,1],821:[,1],822:[,1],823:[,1],824:[,1],825:[,220],826:[,220],827:[,220],828:[,220],829:[,230],830:[,230],831:[,230],832:[[768],230],833:[[769],230],834:[,230],835:[[787],230],836:[[776,769],230],837:[,240],838:[,230],839:[,220],840:[,220],841:[,220],842:[,230],843:[,230],844:[,230],845:[,220],846:[,220],848:[,230],849:[,230],850:[,230],851:[,220],852:[,220],853:[,220],854:[,220],855:[,230],856:[,232],857:[,220],858:[,220],859:[,230],860:[,233],861:[,234],862:[,234],863:[,233],864:[,234],865:[,234],866:[,233],867:[,230],868:[,230],869:[,230],870:[,230],871:[,230],872:[,230],873:[,230],874:[,230],875:[,230],876:[,230],877:[,230],878:[,230],879:[,230],884:[[697]],890:[[32,837],256],894:[[59]],900:[[32,769],256],901:[[168,769]],902:[[913,769]],903:[[183]],904:[[917,769]],905:[[919,769]],906:[[921,769]],908:[[927,769]],910:[[933,769]],911:[[937,769]],912:[[970,769]],913:[,,{768:8122,769:902,772:8121,774:8120,787:7944,788:7945,837:8124}],917:[,,{768:8136,769:904,787:7960,788:7961}],919:[,,{768:8138,769:905,787:7976,788:7977,837:8140}],921:[,,{768:8154,769:906,772:8153,774:8152,776:938,787:7992,788:7993}],927:[,,{768:8184,769:908,787:8008,788:8009}],929:[,,{788:8172}],933:[,,{768:8170,769:910,772:8169,774:8168,776:939,788:8025}],937:[,,{768:8186,769:911,787:8040,788:8041,837:8188}],938:[[921,776]],939:[[933,776]],940:[[945,769],,{837:8116}],941:[[949,769]],942:[[951,769],,{837:8132}],943:[[953,769]],944:[[971,769]],945:[,,{768:8048,769:940,772:8113,774:8112,787:7936,788:7937,834:8118,837:8115}],949:[,,{768:8050,769:941,787:7952,788:7953}],951:[,,{768:8052,769:942,787:7968,788:7969,834:8134,837:8131}],953:[,,{768:8054,769:943,772:8145,774:8144,776:970,787:7984,788:7985,834:8150}],959:[,,{768:8056,769:972,787:8e3,788:8001}],961:[,,{787:8164,788:8165}],965:[,,{768:8058,769:973,772:8161,774:8160,776:971,787:8016,788:8017,834:8166}],969:[,,{768:8060,769:974,787:8032,788:8033,834:8182,837:8179}],970:[[953,776],,{768:8146,769:912,834:8151}],971:[[965,776],,{768:8162,769:944,834:8167}],972:[[959,769]],973:[[965,769]],974:[[969,769],,{837:8180}],976:[[946],256],977:[[952],256],978:[[933],256,{769:979,776:980}],979:[[978,769]],980:[[978,776]],981:[[966],256],982:[[960],256],1008:[[954],256],1009:[[961],256],1010:[[962],256],1012:[[920],256],1013:[[949],256],1017:[[931],256],66422:[,230],66423:[,230],66424:[,230],66425:[,230],66426:[,230]},1024:{1024:[[1045,768]],1025:[[1045,776]],1027:[[1043,769]],1030:[,,{776:1031}],1031:[[1030,776]],1036:[[1050,769]],1037:[[1048,768]],1038:[[1059,774]],1040:[,,{774:1232,776:1234}],1043:[,,{769:1027}],1045:[,,{768:1024,774:1238,776:1025}],1046:[,,{774:1217,776:1244}],1047:[,,{776:1246}],1048:[,,{768:1037,772:1250,774:1049,776:1252}],1049:[[1048,774]],1050:[,,{769:1036}],1054:[,,{776:1254}],1059:[,,{772:1262,774:1038,776:1264,779:1266}],1063:[,,{776:1268}],1067:[,,{776:1272}],1069:[,,{776:1260}],1072:[,,{774:1233,776:1235}],1075:[,,{769:1107}],1077:[,,{768:1104,774:1239,776:1105}],1078:[,,{774:1218,776:1245}],1079:[,,{776:1247}],1080:[,,{768:1117,772:1251,774:1081,776:1253}],1081:[[1080,774]],1082:[,,{769:1116}],1086:[,,{776:1255}],1091:[,,{772:1263,774:1118,776:1265,779:1267}],1095:[,,{776:1269}],1099:[,,{776:1273}],1101:[,,{776:1261}],1104:[[1077,768]],1105:[[1077,776]],1107:[[1075,769]],1110:[,,{776:1111}],1111:[[1110,776]],1116:[[1082,769]],1117:[[1080,768]],1118:[[1091,774]],1140:[,,{783:1142}],1141:[,,{783:1143}],1142:[[1140,783]],1143:[[1141,783]],1155:[,230],1156:[,230],1157:[,230],1158:[,230],1159:[,230],1217:[[1046,774]],1218:[[1078,774]],1232:[[1040,774]],1233:[[1072,774]],1234:[[1040,776]],1235:[[1072,776]],1238:[[1045,774]],1239:[[1077,774]],1240:[,,{776:1242}],1241:[,,{776:1243}],1242:[[1240,776]],1243:[[1241,776]],1244:[[1046,776]],1245:[[1078,776]],1246:[[1047,776]],1247:[[1079,776]],1250:[[1048,772]],1251:[[1080,772]],1252:[[1048,776]],1253:[[1080,776]],1254:[[1054,776]],1255:[[1086,776]],1256:[,,{776:1258}],1257:[,,{776:1259}],1258:[[1256,776]],1259:[[1257,776]],1260:[[1069,776]],1261:[[1101,776]],1262:[[1059,772]],1263:[[1091,772]],1264:[[1059,776]],1265:[[1091,776]],1266:[[1059,779]],1267:[[1091,779]],1268:[[1063,776]],1269:[[1095,776]],1272:[[1067,776]],1273:[[1099,776]]},1280:{1415:[[1381,1410],256],1425:[,220],1426:[,230],1427:[,230],1428:[,230],1429:[,230],1430:[,220],1431:[,230],1432:[,230],1433:[,230],1434:[,222],1435:[,220],1436:[,230],1437:[,230],1438:[,230],1439:[,230],1440:[,230],1441:[,230],1442:[,220],1443:[,220],1444:[,220],1445:[,220],1446:[,220],1447:[,220],1448:[,230],1449:[,230],1450:[,220],1451:[,230],1452:[,230],1453:[,222],1454:[,228],1455:[,230],1456:[,10],1457:[,11],1458:[,12],1459:[,13],1460:[,14],1461:[,15],1462:[,16],1463:[,17],1464:[,18],1465:[,19],1466:[,19],1467:[,20],1468:[,21],1469:[,22],1471:[,23],1473:[,24],1474:[,25],1476:[,230],1477:[,220],1479:[,18]},1536:{1552:[,230],1553:[,230],1554:[,230],1555:[,230],1556:[,230],1557:[,230],1558:[,230],1559:[,230],1560:[,30],1561:[,31],1562:[,32],1570:[[1575,1619]],1571:[[1575,1620]],1572:[[1608,1620]],1573:[[1575,1621]],1574:[[1610,1620]],1575:[,,{1619:1570,1620:1571,1621:1573}],1608:[,,{1620:1572}],1610:[,,{1620:1574}],1611:[,27],1612:[,28],1613:[,29],1614:[,30],1615:[,31],1616:[,32],1617:[,33],1618:[,34],1619:[,230],1620:[,230],1621:[,220],1622:[,220],1623:[,230],1624:[,230],1625:[,230],1626:[,230],1627:[,230],1628:[,220],1629:[,230],1630:[,230],1631:[,220],1648:[,35],1653:[[1575,1652],256],1654:[[1608,1652],256],1655:[[1735,1652],256],1656:[[1610,1652],256],1728:[[1749,1620]],1729:[,,{1620:1730}],1730:[[1729,1620]],1746:[,,{1620:1747}],1747:[[1746,1620]],1749:[,,{1620:1728}],1750:[,230],1751:[,230],1752:[,230],1753:[,230],1754:[,230],1755:[,230],1756:[,230],1759:[,230],1760:[,230],1761:[,230],1762:[,230],1763:[,220],1764:[,230],1767:[,230],1768:[,230],1770:[,220],1771:[,230],1772:[,230],1773:[,220]},1792:{1809:[,36],1840:[,230],1841:[,220],1842:[,230],1843:[,230],1844:[,220],1845:[,230],1846:[,230],1847:[,220],1848:[,220],1849:[,220],1850:[,230],1851:[,220],1852:[,220],1853:[,230],1854:[,220],1855:[,230],1856:[,230],1857:[,230],1858:[,220],1859:[,230],1860:[,220],1861:[,230],1862:[,220],1863:[,230],1864:[,220],1865:[,230],1866:[,230],2027:[,230],2028:[,230],2029:[,230],2030:[,230],2031:[,230],2032:[,230],2033:[,230],2034:[,220],2035:[,230]},2048:{2070:[,230],2071:[,230],2072:[,230],2073:[,230],2075:[,230],2076:[,230],2077:[,230],2078:[,230],2079:[,230],2080:[,230],2081:[,230],2082:[,230],2083:[,230],2085:[,230],2086:[,230],2087:[,230],2089:[,230],2090:[,230],2091:[,230],2092:[,230],2093:[,230],2137:[,220],2138:[,220],2139:[,220],2276:[,230],2277:[,230],2278:[,220],2279:[,230],2280:[,230],2281:[,220],2282:[,230],2283:[,230],2284:[,230],2285:[,220],2286:[,220],2287:[,220],2288:[,27],2289:[,28],2290:[,29],2291:[,230],2292:[,230],2293:[,230],2294:[,220],2295:[,230],2296:[,230],2297:[,220],2298:[,220],2299:[,230],2300:[,230],2301:[,230],2302:[,230],2303:[,230]},2304:{2344:[,,{2364:2345}],2345:[[2344,2364]],2352:[,,{2364:2353}],2353:[[2352,2364]],2355:[,,{2364:2356}],2356:[[2355,2364]],2364:[,7],2381:[,9],2385:[,230],2386:[,220],2387:[,230],2388:[,230],2392:[[2325,2364],512],2393:[[2326,2364],512],2394:[[2327,2364],512],2395:[[2332,2364],512],2396:[[2337,2364],512],2397:[[2338,2364],512],2398:[[2347,2364],512],2399:[[2351,2364],512],2492:[,7],2503:[,,{2494:2507,2519:2508}],2507:[[2503,2494]],2508:[[2503,2519]],2509:[,9],2524:[[2465,2492],512],2525:[[2466,2492],512],2527:[[2479,2492],512]},2560:{2611:[[2610,2620],512],2614:[[2616,2620],512],2620:[,7],2637:[,9],2649:[[2582,2620],512],2650:[[2583,2620],512],2651:[[2588,2620],512],2654:[[2603,2620],512],2748:[,7],2765:[,9],68109:[,220],68111:[,230],68152:[,230],68153:[,1],68154:[,220],68159:[,9],68325:[,230],68326:[,220]},2816:{2876:[,7],2887:[,,{2878:2891,2902:2888,2903:2892}],2888:[[2887,2902]],2891:[[2887,2878]],2892:[[2887,2903]],2893:[,9],2908:[[2849,2876],512],2909:[[2850,2876],512],2962:[,,{3031:2964}],2964:[[2962,3031]],3014:[,,{3006:3018,3031:3020}],3015:[,,{3006:3019}],3018:[[3014,3006]],3019:[[3015,3006]],3020:[[3014,3031]],3021:[,9]},3072:{3142:[,,{3158:3144}],3144:[[3142,3158]],3149:[,9],3157:[,84],3158:[,91],3260:[,7],3263:[,,{3285:3264}],3264:[[3263,3285]],3270:[,,{3266:3274,3285:3271,3286:3272}],3271:[[3270,3285]],3272:[[3270,3286]],3274:[[3270,3266],,{3285:3275}],3275:[[3274,3285]],3277:[,9]},3328:{3398:[,,{3390:3402,3415:3404}],3399:[,,{3390:3403}],3402:[[3398,3390]],3403:[[3399,3390]],3404:[[3398,3415]],3405:[,9],3530:[,9],3545:[,,{3530:3546,3535:3548,3551:3550}],3546:[[3545,3530]],3548:[[3545,3535],,{3530:3549}],3549:[[3548,3530]],3550:[[3545,3551]]},3584:{3635:[[3661,3634],256],3640:[,103],3641:[,103],3642:[,9],3656:[,107],3657:[,107],3658:[,107],3659:[,107],3763:[[3789,3762],256],3768:[,118],3769:[,118],3784:[,122],3785:[,122],3786:[,122],3787:[,122],3804:[[3755,3737],256],3805:[[3755,3745],256]},3840:{3852:[[3851],256],3864:[,220],3865:[,220],3893:[,220],3895:[,220],3897:[,216],3907:[[3906,4023],512],3917:[[3916,4023],512],3922:[[3921,4023],512],3927:[[3926,4023],512],3932:[[3931,4023],512],3945:[[3904,4021],512],3953:[,129],3954:[,130],3955:[[3953,3954],512],3956:[,132],3957:[[3953,3956],512],3958:[[4018,3968],512],3959:[[4018,3969],256],3960:[[4019,3968],512],3961:[[4019,3969],256],3962:[,130],3963:[,130],3964:[,130],3965:[,130],3968:[,130],3969:[[3953,3968],512],3970:[,230],3971:[,230],3972:[,9],3974:[,230],3975:[,230],3987:[[3986,4023],512],3997:[[3996,4023],512],4002:[[4001,4023],512],4007:[[4006,4023],512],4012:[[4011,4023],512],4025:[[3984,4021],512],4038:[,220]},4096:{4133:[,,{4142:4134}],4134:[[4133,4142]],4151:[,7],4153:[,9],4154:[,9],4237:[,220],4348:[[4316],256],69702:[,9],69759:[,9],69785:[,,{69818:69786}],69786:[[69785,69818]],69787:[,,{69818:69788}],69788:[[69787,69818]],69797:[,,{69818:69803}],69803:[[69797,69818]],69817:[,9],69818:[,7]},4352:{69888:[,230],69889:[,230],69890:[,230],69934:[[69937,69927]],69935:[[69938,69927]],69937:[,,{69927:69934}],69938:[,,{69927:69935}],69939:[,9],69940:[,9],70003:[,7],70080:[,9]},4608:{70197:[,9],70198:[,7],70377:[,7],70378:[,9]},4864:{4957:[,230],4958:[,230],4959:[,230],70460:[,7],70471:[,,{70462:70475,70487:70476}],70475:[[70471,70462]],70476:[[70471,70487]],70477:[,9],70502:[,230],70503:[,230],70504:[,230],70505:[,230],70506:[,230],70507:[,230],70508:[,230],70512:[,230],70513:[,230],70514:[,230],70515:[,230],70516:[,230]},5120:{70841:[,,{70832:70844,70842:70843,70845:70846}],70843:[[70841,70842]],70844:[[70841,70832]],70846:[[70841,70845]],70850:[,9],70851:[,7]},5376:{71096:[,,{71087:71098}],71097:[,,{71087:71099}],71098:[[71096,71087]],71099:[[71097,71087]],71103:[,9],71104:[,7]},5632:{71231:[,9],71350:[,9],71351:[,7]},5888:{5908:[,9],5940:[,9],6098:[,9],6109:[,230]},6144:{6313:[,228]},6400:{6457:[,222],6458:[,230],6459:[,220]},6656:{6679:[,230],6680:[,220],6752:[,9],6773:[,230],6774:[,230],6775:[,230],6776:[,230],6777:[,230],6778:[,230],6779:[,230],6780:[,230],6783:[,220],6832:[,230],6833:[,230],6834:[,230],6835:[,230],6836:[,230],6837:[,220],6838:[,220],6839:[,220],6840:[,220],6841:[,220],6842:[,220],6843:[,230],6844:[,230],6845:[,220]},6912:{6917:[,,{6965:6918}],6918:[[6917,6965]],6919:[,,{6965:6920}],6920:[[6919,6965]],6921:[,,{6965:6922}],6922:[[6921,6965]],6923:[,,{6965:6924}],6924:[[6923,6965]],6925:[,,{6965:6926}],6926:[[6925,6965]],6929:[,,{6965:6930}],6930:[[6929,6965]],6964:[,7],6970:[,,{6965:6971}],6971:[[6970,6965]],6972:[,,{6965:6973}],6973:[[6972,6965]],6974:[,,{6965:6976}],6975:[,,{6965:6977}],6976:[[6974,6965]],6977:[[6975,6965]],6978:[,,{6965:6979}],6979:[[6978,6965]],6980:[,9],7019:[,230],7020:[,220],7021:[,230],7022:[,230],7023:[,230],7024:[,230],7025:[,230],7026:[,230],7027:[,230],7082:[,9],7083:[,9],7142:[,7],7154:[,9],7155:[,9]},7168:{7223:[,7],7376:[,230],7377:[,230],7378:[,230],7380:[,1],7381:[,220],7382:[,220],7383:[,220],7384:[,220],7385:[,220],7386:[,230],7387:[,230],7388:[,220],7389:[,220],7390:[,220],7391:[,220],7392:[,230],7394:[,1],7395:[,1],7396:[,1],7397:[,1],7398:[,1],7399:[,1],7400:[,1],7405:[,220],7412:[,230],7416:[,230],7417:[,230]},7424:{7468:[[65],256],7469:[[198],256],7470:[[66],256],7472:[[68],256],7473:[[69],256],7474:[[398],256],7475:[[71],256],7476:[[72],256],7477:[[73],256],7478:[[74],256],7479:[[75],256],7480:[[76],256],7481:[[77],256],7482:[[78],256],7484:[[79],256],7485:[[546],256],7486:[[80],256],7487:[[82],256],7488:[[84],256],7489:[[85],256],7490:[[87],256],7491:[[97],256],7492:[[592],256],7493:[[593],256],7494:[[7426],256],7495:[[98],256],7496:[[100],256],7497:[[101],256],7498:[[601],256],7499:[[603],256],7500:[[604],256],7501:[[103],256],7503:[[107],256],7504:[[109],256],7505:[[331],256],7506:[[111],256],7507:[[596],256],7508:[[7446],256],7509:[[7447],256],7510:[[112],256],7511:[[116],256],7512:[[117],256],7513:[[7453],256],7514:[[623],256],7515:[[118],256],7516:[[7461],256],7517:[[946],256],7518:[[947],256],7519:[[948],256],7520:[[966],256],7521:[[967],256],7522:[[105],256],7523:[[114],256],7524:[[117],256],7525:[[118],256],7526:[[946],256],7527:[[947],256],7528:[[961],256],7529:[[966],256],7530:[[967],256],7544:[[1085],256],7579:[[594],256],7580:[[99],256],7581:[[597],256],7582:[[240],256],7583:[[604],256],7584:[[102],256],7585:[[607],256],7586:[[609],256],7587:[[613],256],7588:[[616],256],7589:[[617],256],7590:[[618],256],7591:[[7547],256],7592:[[669],256],7593:[[621],256],7594:[[7557],256],7595:[[671],256],7596:[[625],256],7597:[[624],256],7598:[[626],256],7599:[[627],256],7600:[[628],256],7601:[[629],256],7602:[[632],256],7603:[[642],256],7604:[[643],256],7605:[[427],256],7606:[[649],256],7607:[[650],256],7608:[[7452],256],7609:[[651],256],7610:[[652],256],7611:[[122],256],7612:[[656],256],7613:[[657],256],7614:[[658],256],7615:[[952],256],7616:[,230],7617:[,230],7618:[,220],7619:[,230],7620:[,230],7621:[,230],7622:[,230],7623:[,230],7624:[,230],7625:[,230],7626:[,220],7627:[,230],7628:[,230],7629:[,234],7630:[,214],7631:[,220],7632:[,202],7633:[,230],7634:[,230],7635:[,230],7636:[,230],7637:[,230],7638:[,230],7639:[,230],7640:[,230],7641:[,230],7642:[,230],7643:[,230],7644:[,230],7645:[,230],7646:[,230],7647:[,230],7648:[,230],7649:[,230],7650:[,230],7651:[,230],7652:[,230],7653:[,230],7654:[,230],7655:[,230],7656:[,230],7657:[,230],7658:[,230],7659:[,230],7660:[,230],7661:[,230],7662:[,230],7663:[,230],7664:[,230],7665:[,230],7666:[,230],7667:[,230],7668:[,230],7669:[,230],7676:[,233],7677:[,220],7678:[,230],7679:[,220]},7680:{7680:[[65,805]],7681:[[97,805]],7682:[[66,775]],7683:[[98,775]],7684:[[66,803]],7685:[[98,803]],7686:[[66,817]],7687:[[98,817]],7688:[[199,769]],7689:[[231,769]],7690:[[68,775]],7691:[[100,775]],7692:[[68,803]],7693:[[100,803]],7694:[[68,817]],7695:[[100,817]],7696:[[68,807]],7697:[[100,807]],7698:[[68,813]],7699:[[100,813]],7700:[[274,768]],7701:[[275,768]],7702:[[274,769]],7703:[[275,769]],7704:[[69,813]],7705:[[101,813]],7706:[[69,816]],7707:[[101,816]],7708:[[552,774]],7709:[[553,774]],7710:[[70,775]],7711:[[102,775]],7712:[[71,772]],7713:[[103,772]],7714:[[72,775]],7715:[[104,775]],7716:[[72,803]],7717:[[104,803]],7718:[[72,776]],7719:[[104,776]],7720:[[72,807]],7721:[[104,807]],7722:[[72,814]],7723:[[104,814]],7724:[[73,816]],7725:[[105,816]],7726:[[207,769]],7727:[[239,769]],7728:[[75,769]],7729:[[107,769]],7730:[[75,803]],7731:[[107,803]],7732:[[75,817]],7733:[[107,817]],7734:[[76,803],,{772:7736}],7735:[[108,803],,{772:7737}],7736:[[7734,772]],7737:[[7735,772]],7738:[[76,817]],7739:[[108,817]],7740:[[76,813]],7741:[[108,813]],7742:[[77,769]],7743:[[109,769]],7744:[[77,775]],7745:[[109,775]],7746:[[77,803]],7747:[[109,803]],7748:[[78,775]],7749:[[110,775]],7750:[[78,803]],7751:[[110,803]],7752:[[78,817]],7753:[[110,817]],7754:[[78,813]],7755:[[110,813]],7756:[[213,769]],7757:[[245,769]],7758:[[213,776]],7759:[[245,776]],7760:[[332,768]],7761:[[333,768]],7762:[[332,769]],7763:[[333,769]],7764:[[80,769]],7765:[[112,769]],7766:[[80,775]],7767:[[112,775]],7768:[[82,775]],7769:[[114,775]],7770:[[82,803],,{772:7772}],7771:[[114,803],,{772:7773}],7772:[[7770,772]],7773:[[7771,772]],7774:[[82,817]],7775:[[114,817]],7776:[[83,775]],7777:[[115,775]],7778:[[83,803],,{775:7784}],7779:[[115,803],,{775:7785}],7780:[[346,775]],7781:[[347,775]],7782:[[352,775]],7783:[[353,775]],7784:[[7778,775]],7785:[[7779,775]],7786:[[84,775]],7787:[[116,775]],7788:[[84,803]],7789:[[116,803]],7790:[[84,817]],7791:[[116,817]],7792:[[84,813]],7793:[[116,813]],7794:[[85,804]],7795:[[117,804]],7796:[[85,816]],7797:[[117,816]],7798:[[85,813]],7799:[[117,813]],7800:[[360,769]],7801:[[361,769]],7802:[[362,776]],7803:[[363,776]],7804:[[86,771]],7805:[[118,771]],7806:[[86,803]],7807:[[118,803]],7808:[[87,768]],7809:[[119,768]],7810:[[87,769]],7811:[[119,769]],7812:[[87,776]],7813:[[119,776]],7814:[[87,775]],7815:[[119,775]],7816:[[87,803]],7817:[[119,803]],7818:[[88,775]],7819:[[120,775]],7820:[[88,776]],7821:[[120,776]],7822:[[89,775]],7823:[[121,775]],7824:[[90,770]],7825:[[122,770]],7826:[[90,803]],7827:[[122,803]],7828:[[90,817]],7829:[[122,817]],7830:[[104,817]],7831:[[116,776]],7832:[[119,778]],7833:[[121,778]],7834:[[97,702],256],7835:[[383,775]],7840:[[65,803],,{770:7852,774:7862}],7841:[[97,803],,{770:7853,774:7863}],7842:[[65,777]],7843:[[97,777]],7844:[[194,769]],7845:[[226,769]],7846:[[194,768]],7847:[[226,768]],7848:[[194,777]],7849:[[226,777]],7850:[[194,771]],7851:[[226,771]],7852:[[7840,770]],7853:[[7841,770]],7854:[[258,769]],7855:[[259,769]],7856:[[258,768]],7857:[[259,768]],7858:[[258,777]],7859:[[259,777]],7860:[[258,771]],7861:[[259,771]],7862:[[7840,774]],7863:[[7841,774]],7864:[[69,803],,{770:7878}],7865:[[101,803],,{770:7879}],7866:[[69,777]],7867:[[101,777]],7868:[[69,771]],7869:[[101,771]],7870:[[202,769]],7871:[[234,769]],7872:[[202,768]],7873:[[234,768]],7874:[[202,777]],7875:[[234,777]],7876:[[202,771]],7877:[[234,771]],7878:[[7864,770]],7879:[[7865,770]],7880:[[73,777]],7881:[[105,777]],7882:[[73,803]],7883:[[105,803]],7884:[[79,803],,{770:7896}],7885:[[111,803],,{770:7897}],7886:[[79,777]],7887:[[111,777]],7888:[[212,769]],7889:[[244,769]],7890:[[212,768]],7891:[[244,768]],7892:[[212,777]],7893:[[244,777]],7894:[[212,771]],7895:[[244,771]],7896:[[7884,770]],7897:[[7885,770]],7898:[[416,769]],7899:[[417,769]],7900:[[416,768]],7901:[[417,768]],7902:[[416,777]],7903:[[417,777]],7904:[[416,771]],7905:[[417,771]],7906:[[416,803]],7907:[[417,803]],7908:[[85,803]],7909:[[117,803]],7910:[[85,777]],7911:[[117,777]],7912:[[431,769]],7913:[[432,769]],7914:[[431,768]],7915:[[432,768]],7916:[[431,777]],7917:[[432,777]],7918:[[431,771]],7919:[[432,771]],7920:[[431,803]],7921:[[432,803]],7922:[[89,768]],7923:[[121,768]],7924:[[89,803]],7925:[[121,803]],7926:[[89,777]],7927:[[121,777]],7928:[[89,771]],7929:[[121,771]]},7936:{7936:[[945,787],,{768:7938,769:7940,834:7942,837:8064}],7937:[[945,788],,{768:7939,769:7941,834:7943,837:8065}],7938:[[7936,768],,{837:8066}],7939:[[7937,768],,{837:8067}],7940:[[7936,769],,{837:8068}],7941:[[7937,769],,{837:8069}],7942:[[7936,834],,{837:8070}],7943:[[7937,834],,{837:8071}],7944:[[913,787],,{768:7946,769:7948,834:7950,837:8072}],7945:[[913,788],,{768:7947,769:7949,834:7951,837:8073}],7946:[[7944,768],,{837:8074}],7947:[[7945,768],,{837:8075}],7948:[[7944,769],,{837:8076}],7949:[[7945,769],,{837:8077}],7950:[[7944,834],,{837:8078}],7951:[[7945,834],,{837:8079}],7952:[[949,787],,{768:7954,769:7956}],7953:[[949,788],,{768:7955,769:7957}],7954:[[7952,768]],7955:[[7953,768]],7956:[[7952,769]],7957:[[7953,769]],7960:[[917,787],,{768:7962,769:7964}],7961:[[917,788],,{768:7963,769:7965}],7962:[[7960,768]],7963:[[7961,768]],7964:[[7960,769]],7965:[[7961,769]],7968:[[951,787],,{768:7970,769:7972,834:7974,837:8080}],7969:[[951,788],,{768:7971,769:7973,834:7975,837:8081}],7970:[[7968,768],,{837:8082}],7971:[[7969,768],,{837:8083}],7972:[[7968,769],,{837:8084}],7973:[[7969,769],,{837:8085}],7974:[[7968,834],,{837:8086}],7975:[[7969,834],,{837:8087}],7976:[[919,787],,{768:7978,769:7980,834:7982,837:8088}],7977:[[919,788],,{768:7979,769:7981,834:7983,837:8089}],7978:[[7976,768],,{837:8090}],7979:[[7977,768],,{837:8091}],7980:[[7976,769],,{837:8092}],7981:[[7977,769],,{837:8093}],7982:[[7976,834],,{837:8094}],7983:[[7977,834],,{837:8095}],7984:[[953,787],,{768:7986,769:7988,834:7990}],7985:[[953,788],,{768:7987,769:7989,834:7991}],7986:[[7984,768]],7987:[[7985,768]],7988:[[7984,769]],7989:[[7985,769]],7990:[[7984,834]],7991:[[7985,834]],7992:[[921,787],,{768:7994,769:7996,834:7998}],7993:[[921,788],,{768:7995,769:7997,834:7999}],7994:[[7992,768]],7995:[[7993,768]],7996:[[7992,769]],7997:[[7993,769]],7998:[[7992,834]],7999:[[7993,834]],8e3:[[959,787],,{768:8002,769:8004}],8001:[[959,788],,{768:8003,769:8005}],8002:[[8e3,768]],8003:[[8001,768]],8004:[[8e3,769]],8005:[[8001,769]],8008:[[927,787],,{768:8010,769:8012}],8009:[[927,788],,{768:8011,769:8013}],8010:[[8008,768]],8011:[[8009,768]],8012:[[8008,769]],8013:[[8009,769]],8016:[[965,787],,{768:8018,769:8020,834:8022}],8017:[[965,788],,{768:8019,769:8021,834:8023}],8018:[[8016,768]],8019:[[8017,768]],8020:[[8016,769]],8021:[[8017,769]],8022:[[8016,834]],8023:[[8017,834]],8025:[[933,788],,{768:8027,769:8029,834:8031}],8027:[[8025,768]],8029:[[8025,769]],8031:[[8025,834]],8032:[[969,787],,{768:8034,769:8036,834:8038,837:8096}],8033:[[969,788],,{768:8035,769:8037,834:8039,837:8097}],8034:[[8032,768],,{837:8098}],8035:[[8033,768],,{837:8099}],8036:[[8032,769],,{837:8100}],8037:[[8033,769],,{837:8101}],8038:[[8032,834],,{837:8102}],8039:[[8033,834],,{837:8103}],8040:[[937,787],,{768:8042,769:8044,834:8046,837:8104}],8041:[[937,788],,{768:8043,769:8045,834:8047,837:8105}],8042:[[8040,768],,{837:8106}],8043:[[8041,768],,{837:8107}],8044:[[8040,769],,{837:8108}],8045:[[8041,769],,{837:8109}],8046:[[8040,834],,{837:8110}],8047:[[8041,834],,{837:8111}],8048:[[945,768],,{837:8114}],8049:[[940]],8050:[[949,768]],8051:[[941]],8052:[[951,768],,{837:8130}],8053:[[942]],8054:[[953,768]],8055:[[943]],8056:[[959,768]],8057:[[972]],8058:[[965,768]],8059:[[973]],8060:[[969,768],,{837:8178}],8061:[[974]],8064:[[7936,837]],8065:[[7937,837]],8066:[[7938,837]],8067:[[7939,837]],8068:[[7940,837]],8069:[[7941,837]],8070:[[7942,837]],8071:[[7943,837]],8072:[[7944,837]],8073:[[7945,837]],8074:[[7946,837]],8075:[[7947,837]],8076:[[7948,837]],8077:[[7949,837]],8078:[[7950,837]],8079:[[7951,837]],8080:[[7968,837]],8081:[[7969,837]],8082:[[7970,837]],8083:[[7971,837]],8084:[[7972,837]],8085:[[7973,837]],8086:[[7974,837]],8087:[[7975,837]],8088:[[7976,837]],8089:[[7977,837]],8090:[[7978,837]],8091:[[7979,837]],8092:[[7980,837]],8093:[[7981,837]],8094:[[7982,837]],8095:[[7983,837]],8096:[[8032,837]],8097:[[8033,837]],8098:[[8034,837]],8099:[[8035,837]],8100:[[8036,837]],8101:[[8037,837]],8102:[[8038,837]],8103:[[8039,837]],8104:[[8040,837]],8105:[[8041,837]],8106:[[8042,837]],8107:[[8043,837]],8108:[[8044,837]],8109:[[8045,837]],8110:[[8046,837]],8111:[[8047,837]],8112:[[945,774]],8113:[[945,772]],8114:[[8048,837]],8115:[[945,837]],8116:[[940,837]],8118:[[945,834],,{837:8119}],8119:[[8118,837]],8120:[[913,774]],8121:[[913,772]],8122:[[913,768]],8123:[[902]],8124:[[913,837]],8125:[[32,787],256],8126:[[953]],8127:[[32,787],256,{768:8141,769:8142,834:8143}],8128:[[32,834],256],8129:[[168,834]],8130:[[8052,837]],8131:[[951,837]],8132:[[942,837]],8134:[[951,834],,{837:8135}],8135:[[8134,837]],8136:[[917,768]],8137:[[904]],8138:[[919,768]],8139:[[905]],8140:[[919,837]],8141:[[8127,768]],8142:[[8127,769]],8143:[[8127,834]],8144:[[953,774]],8145:[[953,772]],8146:[[970,768]],8147:[[912]],8150:[[953,834]],8151:[[970,834]],8152:[[921,774]],8153:[[921,772]],8154:[[921,768]],8155:[[906]],8157:[[8190,768]],8158:[[8190,769]],8159:[[8190,834]],8160:[[965,774]],8161:[[965,772]],8162:[[971,768]],8163:[[944]],8164:[[961,787]],8165:[[961,788]],8166:[[965,834]],8167:[[971,834]],8168:[[933,774]],8169:[[933,772]],8170:[[933,768]],8171:[[910]],8172:[[929,788]],8173:[[168,768]],8174:[[901]],8175:[[96]],8178:[[8060,837]],8179:[[969,837]],8180:[[974,837]],8182:[[969,834],,{837:8183}],8183:[[8182,837]],8184:[[927,768]],8185:[[908]],8186:[[937,768]],8187:[[911]],8188:[[937,837]],8189:[[180]],8190:[[32,788],256,{768:8157,769:8158,834:8159}]},8192:{8192:[[8194]],8193:[[8195]],8194:[[32],256],8195:[[32],256],8196:[[32],256],8197:[[32],256],8198:[[32],256],8199:[[32],256],8200:[[32],256],8201:[[32],256],8202:[[32],256],8209:[[8208],256],8215:[[32,819],256],8228:[[46],256],8229:[[46,46],256],8230:[[46,46,46],256],8239:[[32],256],8243:[[8242,8242],256],8244:[[8242,8242,8242],256],8246:[[8245,8245],256],8247:[[8245,8245,8245],256],8252:[[33,33],256],8254:[[32,773],256],8263:[[63,63],256],8264:[[63,33],256],8265:[[33,63],256],8279:[[8242,8242,8242,8242],256],8287:[[32],256],8304:[[48],256],8305:[[105],256],8308:[[52],256],8309:[[53],256],8310:[[54],256],8311:[[55],256],8312:[[56],256],8313:[[57],256],8314:[[43],256],8315:[[8722],256],8316:[[61],256],8317:[[40],256],8318:[[41],256],8319:[[110],256],8320:[[48],256],8321:[[49],256],8322:[[50],256],8323:[[51],256],8324:[[52],256],8325:[[53],256],8326:[[54],256],8327:[[55],256],8328:[[56],256],8329:[[57],256],8330:[[43],256],8331:[[8722],256],8332:[[61],256],8333:[[40],256],8334:[[41],256],8336:[[97],256],8337:[[101],256],8338:[[111],256],8339:[[120],256],8340:[[601],256],8341:[[104],256],8342:[[107],256],8343:[[108],256],8344:[[109],256],8345:[[110],256],8346:[[112],256],8347:[[115],256],8348:[[116],256],8360:[[82,115],256],8400:[,230],8401:[,230],8402:[,1],8403:[,1],8404:[,230],8405:[,230],8406:[,230],8407:[,230],8408:[,1],8409:[,1],8410:[,1],8411:[,230],8412:[,230],8417:[,230],8421:[,1],8422:[,1],8423:[,230],8424:[,220],8425:[,230],8426:[,1],8427:[,1],8428:[,220],8429:[,220],8430:[,220],8431:[,220],8432:[,230]},8448:{8448:[[97,47,99],256],8449:[[97,47,115],256],8450:[[67],256],8451:[[176,67],256],8453:[[99,47,111],256],8454:[[99,47,117],256],8455:[[400],256],8457:[[176,70],256],8458:[[103],256],8459:[[72],256],8460:[[72],256],8461:[[72],256],8462:[[104],256],8463:[[295],256],8464:[[73],256],8465:[[73],256],8466:[[76],256],8467:[[108],256],8469:[[78],256],8470:[[78,111],256],8473:[[80],256],8474:[[81],256],8475:[[82],256],8476:[[82],256],8477:[[82],256],8480:[[83,77],256],8481:[[84,69,76],256],8482:[[84,77],256],8484:[[90],256],8486:[[937]],8488:[[90],256],8490:[[75]],8491:[[197]],8492:[[66],256],8493:[[67],256],8495:[[101],256],8496:[[69],256],8497:[[70],256],8499:[[77],256],8500:[[111],256],8501:[[1488],256],8502:[[1489],256],8503:[[1490],256],8504:[[1491],256],8505:[[105],256],8507:[[70,65,88],256],8508:[[960],256],8509:[[947],256],8510:[[915],256],8511:[[928],256],8512:[[8721],256],8517:[[68],256],8518:[[100],256],8519:[[101],256],8520:[[105],256],8521:[[106],256],8528:[[49,8260,55],256],8529:[[49,8260,57],256],8530:[[49,8260,49,48],256],8531:[[49,8260,51],256],8532:[[50,8260,51],256],8533:[[49,8260,53],256],8534:[[50,8260,53],256],8535:[[51,8260,53],256],8536:[[52,8260,53],256],8537:[[49,8260,54],256],8538:[[53,8260,54],256],8539:[[49,8260,56],256],8540:[[51,8260,56],256],8541:[[53,8260,56],256],8542:[[55,8260,56],256],8543:[[49,8260],256],8544:[[73],256],8545:[[73,73],256],8546:[[73,73,73],256],8547:[[73,86],256],8548:[[86],256],8549:[[86,73],256],8550:[[86,73,73],256],8551:[[86,73,73,73],256],8552:[[73,88],256],8553:[[88],256],8554:[[88,73],256],8555:[[88,73,73],256],8556:[[76],256],8557:[[67],256],8558:[[68],256],8559:[[77],256],8560:[[105],256],8561:[[105,105],256],8562:[[105,105,105],256],8563:[[105,118],256],8564:[[118],256],8565:[[118,105],256],8566:[[118,105,105],256],8567:[[118,105,105,105],256],8568:[[105,120],256],8569:[[120],256],8570:[[120,105],256],8571:[[120,105,105],256],8572:[[108],256],8573:[[99],256],8574:[[100],256],8575:[[109],256],8585:[[48,8260,51],256],8592:[,,{824:8602}],8594:[,,{824:8603}],8596:[,,{824:8622}],8602:[[8592,824]],8603:[[8594,824]],8622:[[8596,824]],8653:[[8656,824]],8654:[[8660,824]],8655:[[8658,824]],8656:[,,{824:8653}],8658:[,,{824:8655}],8660:[,,{824:8654}]},8704:{8707:[,,{824:8708}],8708:[[8707,824]],8712:[,,{824:8713}],8713:[[8712,824]],8715:[,,{824:8716}],8716:[[8715,824]],8739:[,,{824:8740}],8740:[[8739,824]],8741:[,,{824:8742}],8742:[[8741,824]],8748:[[8747,8747],256],8749:[[8747,8747,8747],256],8751:[[8750,8750],256],8752:[[8750,8750,8750],256],8764:[,,{824:8769}],8769:[[8764,824]],8771:[,,{824:8772}],8772:[[8771,824]],8773:[,,{824:8775}],8775:[[8773,824]],8776:[,,{824:8777}],8777:[[8776,824]],8781:[,,{824:8813}],8800:[[61,824]],8801:[,,{824:8802}],8802:[[8801,824]],8804:[,,{824:8816}],8805:[,,{824:8817}],8813:[[8781,824]],8814:[[60,824]],8815:[[62,824]],8816:[[8804,824]],8817:[[8805,824]],8818:[,,{824:8820}],8819:[,,{824:8821}],8820:[[8818,824]],8821:[[8819,824]],8822:[,,{824:8824}],8823:[,,{824:8825}],8824:[[8822,824]],8825:[[8823,824]],8826:[,,{824:8832}],8827:[,,{824:8833}],8828:[,,{824:8928}],8829:[,,{824:8929}],8832:[[8826,824]],8833:[[8827,824]],8834:[,,{824:8836}],8835:[,,{824:8837}],8836:[[8834,824]],8837:[[8835,824]],8838:[,,{824:8840}],8839:[,,{824:8841}],8840:[[8838,824]],8841:[[8839,824]],8849:[,,{824:8930}],8850:[,,{824:8931}],8866:[,,{824:8876}],8872:[,,{824:8877}],8873:[,,{824:8878}],8875:[,,{824:8879}],8876:[[8866,824]],8877:[[8872,824]],8878:[[8873,824]],8879:[[8875,824]],8882:[,,{824:8938}],8883:[,,{824:8939}],8884:[,,{824:8940}],8885:[,,{824:8941}],8928:[[8828,824]],8929:[[8829,824]],8930:[[8849,824]],8931:[[8850,824]],8938:[[8882,824]],8939:[[8883,824]],8940:[[8884,824]],8941:[[8885,824]]},8960:{9001:[[12296]],9002:[[12297]]},9216:{9312:[[49],256],9313:[[50],256],9314:[[51],256],9315:[[52],256],9316:[[53],256],9317:[[54],256],9318:[[55],256],9319:[[56],256],9320:[[57],256],9321:[[49,48],256],9322:[[49,49],256],9323:[[49,50],256],9324:[[49,51],256],9325:[[49,52],256],9326:[[49,53],256],9327:[[49,54],256],9328:[[49,55],256],9329:[[49,56],256],9330:[[49,57],256],9331:[[50,48],256],9332:[[40,49,41],256],9333:[[40,50,41],256],9334:[[40,51,41],256],9335:[[40,52,41],256],9336:[[40,53,41],256],9337:[[40,54,41],256],9338:[[40,55,41],256],9339:[[40,56,41],256],9340:[[40,57,41],256],9341:[[40,49,48,41],256],9342:[[40,49,49,41],256],9343:[[40,49,50,41],256],9344:[[40,49,51,41],256],9345:[[40,49,52,41],256],9346:[[40,49,53,41],256],9347:[[40,49,54,41],256],9348:[[40,49,55,41],256],9349:[[40,49,56,41],256],9350:[[40,49,57,41],256],9351:[[40,50,48,41],256],9352:[[49,46],256],9353:[[50,46],256],9354:[[51,46],256],9355:[[52,46],256],9356:[[53,46],256],9357:[[54,46],256],9358:[[55,46],256],9359:[[56,46],256],9360:[[57,46],256],9361:[[49,48,46],256],9362:[[49,49,46],256],9363:[[49,50,46],256],9364:[[49,51,46],256],9365:[[49,52,46],256],9366:[[49,53,46],256],9367:[[49,54,46],256],9368:[[49,55,46],256],9369:[[49,56,46],256],9370:[[49,57,46],256],9371:[[50,48,46],256],9372:[[40,97,41],256],9373:[[40,98,41],256],9374:[[40,99,41],256],9375:[[40,100,41],256],9376:[[40,101,41],256],9377:[[40,102,41],256],9378:[[40,103,41],256],9379:[[40,104,41],256],9380:[[40,105,41],256],9381:[[40,106,41],256],9382:[[40,107,41],256],9383:[[40,108,41],256],9384:[[40,109,41],256],9385:[[40,110,41],256],9386:[[40,111,41],256],9387:[[40,112,41],256],9388:[[40,113,41],256],9389:[[40,114,41],256],9390:[[40,115,41],256],9391:[[40,116,41],256],9392:[[40,117,41],256],9393:[[40,118,41],256],9394:[[40,119,41],256],9395:[[40,120,41],256],9396:[[40,121,41],256],9397:[[40,122,41],256],9398:[[65],256],9399:[[66],256],9400:[[67],256],9401:[[68],256],9402:[[69],256],9403:[[70],256],9404:[[71],256],9405:[[72],256],9406:[[73],256],9407:[[74],256],9408:[[75],256],9409:[[76],256],9410:[[77],256],9411:[[78],256],9412:[[79],256],9413:[[80],256],9414:[[81],256],9415:[[82],256],9416:[[83],256],9417:[[84],256],9418:[[85],256],9419:[[86],256],9420:[[87],256],9421:[[88],256],9422:[[89],256],9423:[[90],256],9424:[[97],256],9425:[[98],256],9426:[[99],256],9427:[[100],256],9428:[[101],256],9429:[[102],256],9430:[[103],256],9431:[[104],256],9432:[[105],256],9433:[[106],256],9434:[[107],256],9435:[[108],256],9436:[[109],256],9437:[[110],256],9438:[[111],256],9439:[[112],256],9440:[[113],256],9441:[[114],256],9442:[[115],256],9443:[[116],256],9444:[[117],256],9445:[[118],256],9446:[[119],256],9447:[[120],256],9448:[[121],256],9449:[[122],256],9450:[[48],256]},10752:{10764:[[8747,8747,8747,8747],256],10868:[[58,58,61],256],10869:[[61,61],256],10870:[[61,61,61],256],10972:[[10973,824],512]},11264:{11388:[[106],256],11389:[[86],256],11503:[,230],11504:[,230],11505:[,230]},11520:{11631:[[11617],256],11647:[,9],11744:[,230],11745:[,230],11746:[,230],11747:[,230],11748:[,230],11749:[,230],11750:[,230],11751:[,230],11752:[,230],11753:[,230],11754:[,230],11755:[,230],11756:[,230],11757:[,230],11758:[,230],11759:[,230],11760:[,230],11761:[,230],11762:[,230],11763:[,230],11764:[,230],11765:[,230],11766:[,230],11767:[,230],11768:[,230],11769:[,230],11770:[,230],11771:[,230],11772:[,230],11773:[,230],11774:[,230],11775:[,230]},11776:{11935:[[27597],256],12019:[[40863],256]},12032:{12032:[[19968],256],12033:[[20008],256],12034:[[20022],256],12035:[[20031],256],12036:[[20057],256],12037:[[20101],256],12038:[[20108],256],12039:[[20128],256],12040:[[20154],256],12041:[[20799],256],12042:[[20837],256],12043:[[20843],256],12044:[[20866],256],12045:[[20886],256],12046:[[20907],256],12047:[[20960],256],12048:[[20981],256],12049:[[20992],256],12050:[[21147],256],12051:[[21241],256],12052:[[21269],256],12053:[[21274],256],12054:[[21304],256],12055:[[21313],256],12056:[[21340],256],12057:[[21353],256],12058:[[21378],256],12059:[[21430],256],12060:[[21448],256],12061:[[21475],256],12062:[[22231],256],12063:[[22303],256],12064:[[22763],256],12065:[[22786],256],12066:[[22794],256],12067:[[22805],256],12068:[[22823],256],12069:[[22899],256],12070:[[23376],256],12071:[[23424],256],12072:[[23544],256],12073:[[23567],256],12074:[[23586],256],12075:[[23608],256],12076:[[23662],256],12077:[[23665],256],12078:[[24027],256],12079:[[24037],256],12080:[[24049],256],12081:[[24062],256],12082:[[24178],256],12083:[[24186],256],12084:[[24191],256],12085:[[24308],256],12086:[[24318],256],12087:[[24331],256],12088:[[24339],256],12089:[[24400],256],12090:[[24417],256],12091:[[24435],256],12092:[[24515],256],12093:[[25096],256],12094:[[25142],256],12095:[[25163],256],12096:[[25903],256],12097:[[25908],256],12098:[[25991],256],12099:[[26007],256],12100:[[26020],256],12101:[[26041],256],12102:[[26080],256],12103:[[26085],256],12104:[[26352],256],12105:[[26376],256],12106:[[26408],256],12107:[[27424],256],12108:[[27490],256],12109:[[27513],256],12110:[[27571],256],12111:[[27595],256],12112:[[27604],256],12113:[[27611],256],12114:[[27663],256],12115:[[27668],256],12116:[[27700],256],12117:[[28779],256],12118:[[29226],256],12119:[[29238],256],12120:[[29243],256],12121:[[29247],256],12122:[[29255],256],12123:[[29273],256],12124:[[29275],256],12125:[[29356],256],12126:[[29572],256],12127:[[29577],256],12128:[[29916],256],12129:[[29926],256],12130:[[29976],256],12131:[[29983],256],12132:[[29992],256],12133:[[3e4],256],12134:[[30091],256],12135:[[30098],256],12136:[[30326],256],12137:[[30333],256],12138:[[30382],256],12139:[[30399],256],12140:[[30446],256],12141:[[30683],256],12142:[[30690],256],12143:[[30707],256],12144:[[31034],256],12145:[[31160],256],12146:[[31166],256],12147:[[31348],256],12148:[[31435],256],12149:[[31481],256],12150:[[31859],256],12151:[[31992],256],12152:[[32566],256],12153:[[32593],256],12154:[[32650],256],12155:[[32701],256],12156:[[32769],256],12157:[[32780],256],12158:[[32786],256],12159:[[32819],256],12160:[[32895],256],12161:[[32905],256],12162:[[33251],256],12163:[[33258],256],12164:[[33267],256],12165:[[33276],256],12166:[[33292],256],12167:[[33307],256],12168:[[33311],256],12169:[[33390],256],12170:[[33394],256],12171:[[33400],256],12172:[[34381],256],12173:[[34411],256],12174:[[34880],256],12175:[[34892],256],12176:[[34915],256],12177:[[35198],256],12178:[[35211],256],12179:[[35282],256],12180:[[35328],256],12181:[[35895],256],12182:[[35910],256],12183:[[35925],256],12184:[[35960],256],12185:[[35997],256],12186:[[36196],256],12187:[[36208],256],12188:[[36275],256],12189:[[36523],256],12190:[[36554],256],12191:[[36763],256],12192:[[36784],256],12193:[[36789],256],12194:[[37009],256],12195:[[37193],256],12196:[[37318],256],12197:[[37324],256],12198:[[37329],256],12199:[[38263],256],12200:[[38272],256],12201:[[38428],256],12202:[[38582],256],12203:[[38585],256],12204:[[38632],256],12205:[[38737],256],12206:[[38750],256],12207:[[38754],256],12208:[[38761],256],12209:[[38859],256],12210:[[38893],256],12211:[[38899],256],12212:[[38913],256],12213:[[39080],256],12214:[[39131],256],12215:[[39135],256],12216:[[39318],256],12217:[[39321],256],12218:[[39340],256],12219:[[39592],256],12220:[[39640],256],12221:[[39647],256],12222:[[39717],256],12223:[[39727],256],12224:[[39730],256],12225:[[39740],256],12226:[[39770],256],12227:[[40165],256],12228:[[40565],256],12229:[[40575],256],12230:[[40613],256],12231:[[40635],256],12232:[[40643],256],12233:[[40653],256],12234:[[40657],256],12235:[[40697],256],12236:[[40701],256],12237:[[40718],256],12238:[[40723],256],12239:[[40736],256],12240:[[40763],256],12241:[[40778],256],12242:[[40786],256],12243:[[40845],256],12244:[[40860],256],12245:[[40864],256]},12288:{12288:[[32],256],12330:[,218],12331:[,228],12332:[,232],12333:[,222],12334:[,224],12335:[,224],12342:[[12306],256],12344:[[21313],256],12345:[[21316],256],12346:[[21317],256],12358:[,,{12441:12436}],12363:[,,{12441:12364}],12364:[[12363,12441]],12365:[,,{12441:12366}],12366:[[12365,12441]],12367:[,,{12441:12368}],12368:[[12367,12441]],12369:[,,{12441:12370}],12370:[[12369,12441]],12371:[,,{12441:12372}],12372:[[12371,12441]],12373:[,,{12441:12374}],12374:[[12373,12441]],12375:[,,{12441:12376}],12376:[[12375,12441]],12377:[,,{12441:12378}],12378:[[12377,12441]],12379:[,,{12441:12380}],12380:[[12379,12441]],12381:[,,{12441:12382}],12382:[[12381,12441]],12383:[,,{12441:12384}],12384:[[12383,12441]],12385:[,,{12441:12386}],12386:[[12385,12441]],12388:[,,{12441:12389}],12389:[[12388,12441]],12390:[,,{12441:12391}],12391:[[12390,12441]],12392:[,,{12441:12393}],12393:[[12392,12441]],12399:[,,{12441:12400,12442:12401}],12400:[[12399,12441]],12401:[[12399,12442]],12402:[,,{12441:12403,12442:12404}],12403:[[12402,12441]],12404:[[12402,12442]],12405:[,,{12441:12406,12442:12407}],12406:[[12405,12441]],12407:[[12405,12442]],12408:[,,{12441:12409,12442:12410}],12409:[[12408,12441]],12410:[[12408,12442]],12411:[,,{12441:12412,12442:12413}],12412:[[12411,12441]],12413:[[12411,12442]],12436:[[12358,12441]],12441:[,8],12442:[,8],12443:[[32,12441],256],12444:[[32,12442],256],12445:[,,{12441:12446}],12446:[[12445,12441]],12447:[[12424,12426],256],12454:[,,{12441:12532}],12459:[,,{12441:12460}],12460:[[12459,12441]],12461:[,,{12441:12462}],12462:[[12461,12441]],12463:[,,{12441:12464}],12464:[[12463,12441]],12465:[,,{12441:12466}],12466:[[12465,12441]],12467:[,,{12441:12468}],12468:[[12467,12441]],12469:[,,{12441:12470}],12470:[[12469,12441]],12471:[,,{12441:12472}],12472:[[12471,12441]],12473:[,,{12441:12474}],12474:[[12473,12441]],12475:[,,{12441:12476}],12476:[[12475,12441]],12477:[,,{12441:12478}],12478:[[12477,12441]],12479:[,,{12441:12480}],12480:[[12479,12441]],12481:[,,{12441:12482}],12482:[[12481,12441]],12484:[,,{12441:12485}],12485:[[12484,12441]],12486:[,,{12441:12487}],12487:[[12486,12441]],12488:[,,{12441:12489}],12489:[[12488,12441]],12495:[,,{12441:12496,12442:12497}],12496:[[12495,12441]],12497:[[12495,12442]],12498:[,,{12441:12499,12442:12500}],12499:[[12498,12441]],12500:[[12498,12442]],12501:[,,{12441:12502,12442:12503}],12502:[[12501,12441]],12503:[[12501,12442]],12504:[,,{12441:12505,12442:12506}],12505:[[12504,12441]],12506:[[12504,12442]],12507:[,,{12441:12508,12442:12509}],12508:[[12507,12441]],12509:[[12507,12442]],12527:[,,{12441:12535}],12528:[,,{12441:12536}],12529:[,,{12441:12537}],12530:[,,{12441:12538}],12532:[[12454,12441]],12535:[[12527,12441]],12536:[[12528,12441]],12537:[[12529,12441]],12538:[[12530,12441]],12541:[,,{12441:12542}],12542:[[12541,12441]],12543:[[12467,12488],256]},12544:{12593:[[4352],256],12594:[[4353],256],12595:[[4522],256],12596:[[4354],256],12597:[[4524],256],12598:[[4525],256],12599:[[4355],256],12600:[[4356],256],12601:[[4357],256],12602:[[4528],256],12603:[[4529],256],12604:[[4530],256],12605:[[4531],256],12606:[[4532],256],12607:[[4533],256],12608:[[4378],256],12609:[[4358],256],12610:[[4359],256],12611:[[4360],256],12612:[[4385],256],12613:[[4361],256],12614:[[4362],256],12615:[[4363],256],12616:[[4364],256],12617:[[4365],256],12618:[[4366],256],12619:[[4367],256],12620:[[4368],256],12621:[[4369],256],12622:[[4370],256],12623:[[4449],256],12624:[[4450],256],12625:[[4451],256],12626:[[4452],256],12627:[[4453],256],12628:[[4454],256],12629:[[4455],256],12630:[[4456],256],12631:[[4457],256],12632:[[4458],256],12633:[[4459],256],12634:[[4460],256],12635:[[4461],256],12636:[[4462],256],12637:[[4463],256],12638:[[4464],256],12639:[[4465],256],12640:[[4466],256],12641:[[4467],256],12642:[[4468],256],12643:[[4469],256],12644:[[4448],256],12645:[[4372],256],12646:[[4373],256],12647:[[4551],256],12648:[[4552],256],12649:[[4556],256],12650:[[4558],256],12651:[[4563],256],12652:[[4567],256],12653:[[4569],256],12654:[[4380],256],12655:[[4573],256],12656:[[4575],256],12657:[[4381],256],12658:[[4382],256],12659:[[4384],256],12660:[[4386],256],12661:[[4387],256],12662:[[4391],256],12663:[[4393],256],12664:[[4395],256],12665:[[4396],256],12666:[[4397],256],12667:[[4398],256],12668:[[4399],256],12669:[[4402],256],12670:[[4406],256],12671:[[4416],256],12672:[[4423],256],12673:[[4428],256],12674:[[4593],256],12675:[[4594],256],12676:[[4439],256],12677:[[4440],256],12678:[[4441],256],12679:[[4484],256],12680:[[4485],256],12681:[[4488],256],12682:[[4497],256],12683:[[4498],256],12684:[[4500],256],12685:[[4510],256],12686:[[4513],256],12690:[[19968],256],12691:[[20108],256],12692:[[19977],256],12693:[[22235],256],12694:[[19978],256],12695:[[20013],256],12696:[[19979],256],12697:[[30002],256],12698:[[20057],256],12699:[[19993],256],12700:[[19969],256],12701:[[22825],256],12702:[[22320],256],12703:[[20154],256]},12800:{12800:[[40,4352,41],256],12801:[[40,4354,41],256],12802:[[40,4355,41],256],12803:[[40,4357,41],256],12804:[[40,4358,41],256],12805:[[40,4359,41],256],12806:[[40,4361,41],256],12807:[[40,4363,41],256],12808:[[40,4364,41],256],12809:[[40,4366,41],256],12810:[[40,4367,41],256],12811:[[40,4368,41],256],12812:[[40,4369,41],256],12813:[[40,4370,41],256],12814:[[40,4352,4449,41],256],12815:[[40,4354,4449,41],256],12816:[[40,4355,4449,41],256],12817:[[40,4357,4449,41],256],12818:[[40,4358,4449,41],256],12819:[[40,4359,4449,41],256],12820:[[40,4361,4449,41],256],12821:[[40,4363,4449,41],256],12822:[[40,4364,4449,41],256],12823:[[40,4366,4449,41],256],12824:[[40,4367,4449,41],256],12825:[[40,4368,4449,41],256],12826:[[40,4369,4449,41],256],12827:[[40,4370,4449,41],256],12828:[[40,4364,4462,41],256],12829:[[40,4363,4457,4364,4453,4523,41],256],12830:[[40,4363,4457,4370,4462,41],256],12832:[[40,19968,41],256],12833:[[40,20108,41],256],12834:[[40,19977,41],256],12835:[[40,22235,41],256],12836:[[40,20116,41],256],12837:[[40,20845,41],256],12838:[[40,19971,41],256],12839:[[40,20843,41],256],12840:[[40,20061,41],256],12841:[[40,21313,41],256],12842:[[40,26376,41],256],12843:[[40,28779,41],256],12844:[[40,27700,41],256],12845:[[40,26408,41],256],12846:[[40,37329,41],256],12847:[[40,22303,41],256],12848:[[40,26085,41],256],12849:[[40,26666,41],256],12850:[[40,26377,41],256],12851:[[40,31038,41],256],12852:[[40,21517,41],256],12853:[[40,29305,41],256],12854:[[40,36001,41],256],12855:[[40,31069,41],256],12856:[[40,21172,41],256],12857:[[40,20195,41],256],12858:[[40,21628,41],256],12859:[[40,23398,41],256],12860:[[40,30435,41],256],12861:[[40,20225,41],256],12862:[[40,36039,41],256],12863:[[40,21332,41],256],12864:[[40,31085,41],256],12865:[[40,20241,41],256],12866:[[40,33258,41],256],12867:[[40,33267,41],256],12868:[[21839],256],12869:[[24188],256],12870:[[25991],256],12871:[[31631],256],12880:[[80,84,69],256],12881:[[50,49],256],12882:[[50,50],256],12883:[[50,51],256],12884:[[50,52],256],12885:[[50,53],256],12886:[[50,54],256],12887:[[50,55],256],12888:[[50,56],256],12889:[[50,57],256],12890:[[51,48],256],12891:[[51,49],256],12892:[[51,50],256],12893:[[51,51],256],12894:[[51,52],256],12895:[[51,53],256],12896:[[4352],256],12897:[[4354],256],12898:[[4355],256],12899:[[4357],256],12900:[[4358],256],12901:[[4359],256],12902:[[4361],256],12903:[[4363],256],12904:[[4364],256],12905:[[4366],256],12906:[[4367],256],12907:[[4368],256],12908:[[4369],256],12909:[[4370],256],12910:[[4352,4449],256],12911:[[4354,4449],256],12912:[[4355,4449],256],12913:[[4357,4449],256],12914:[[4358,4449],256],12915:[[4359,4449],256],12916:[[4361,4449],256],12917:[[4363,4449],256],12918:[[4364,4449],256],12919:[[4366,4449],256],12920:[[4367,4449],256],12921:[[4368,4449],256],12922:[[4369,4449],256],12923:[[4370,4449],256],12924:[[4366,4449,4535,4352,4457],256],12925:[[4364,4462,4363,4468],256],12926:[[4363,4462],256],12928:[[19968],256],12929:[[20108],256],12930:[[19977],256],12931:[[22235],256],12932:[[20116],256],12933:[[20845],256],12934:[[19971],256],12935:[[20843],256],12936:[[20061],256],12937:[[21313],256],12938:[[26376],256],12939:[[28779],256],12940:[[27700],256],12941:[[26408],256],12942:[[37329],256],12943:[[22303],256],12944:[[26085],256],12945:[[26666],256],12946:[[26377],256],12947:[[31038],256],12948:[[21517],256],12949:[[29305],256],12950:[[36001],256],12951:[[31069],256],12952:[[21172],256],12953:[[31192],256],12954:[[30007],256],12955:[[22899],256],12956:[[36969],256],12957:[[20778],256],12958:[[21360],256],12959:[[27880],256],12960:[[38917],256],12961:[[20241],256],12962:[[20889],256],12963:[[27491],256],12964:[[19978],256],12965:[[20013],256],12966:[[19979],256],12967:[[24038],256],12968:[[21491],256],12969:[[21307],256],12970:[[23447],256],12971:[[23398],256],12972:[[30435],256],12973:[[20225],256],12974:[[36039],256],12975:[[21332],256],12976:[[22812],256],12977:[[51,54],256],12978:[[51,55],256],12979:[[51,56],256],12980:[[51,57],256],12981:[[52,48],256],12982:[[52,49],256],12983:[[52,50],256],12984:[[52,51],256],12985:[[52,52],256],12986:[[52,53],256],12987:[[52,54],256],12988:[[52,55],256],12989:[[52,56],256],12990:[[52,57],256],12991:[[53,48],256],12992:[[49,26376],256],12993:[[50,26376],256],12994:[[51,26376],256],12995:[[52,26376],256],12996:[[53,26376],256],12997:[[54,26376],256],12998:[[55,26376],256],12999:[[56,26376],256],13e3:[[57,26376],256],13001:[[49,48,26376],256],13002:[[49,49,26376],256],13003:[[49,50,26376],256],13004:[[72,103],256],13005:[[101,114,103],256],13006:[[101,86],256],13007:[[76,84,68],256],13008:[[12450],256],13009:[[12452],256],13010:[[12454],256],13011:[[12456],256],13012:[[12458],256],13013:[[12459],256],13014:[[12461],256],13015:[[12463],256],13016:[[12465],256],13017:[[12467],256],13018:[[12469],256],13019:[[12471],256],13020:[[12473],256],13021:[[12475],256],13022:[[12477],256],13023:[[12479],256],13024:[[12481],256],13025:[[12484],256],13026:[[12486],256],13027:[[12488],256],13028:[[12490],256],13029:[[12491],256],13030:[[12492],256],13031:[[12493],256],13032:[[12494],256],13033:[[12495],256],13034:[[12498],256],13035:[[12501],256],13036:[[12504],256],13037:[[12507],256],13038:[[12510],256],13039:[[12511],256],13040:[[12512],256],13041:[[12513],256],13042:[[12514],256],13043:[[12516],256],13044:[[12518],256],13045:[[12520],256],13046:[[12521],256],13047:[[12522],256],13048:[[12523],256],13049:[[12524],256],13050:[[12525],256],13051:[[12527],256],13052:[[12528],256],13053:[[12529],256],13054:[[12530],256]},13056:{13056:[[12450,12497,12540,12488],256],13057:[[12450,12523,12501,12449],256],13058:[[12450,12531,12506,12450],256],13059:[[12450,12540,12523],256],13060:[[12452,12491,12531,12464],256],13061:[[12452,12531,12481],256],13062:[[12454,12457,12531],256],13063:[[12456,12473,12463,12540,12489],256],13064:[[12456,12540,12459,12540],256],13065:[[12458,12531,12473],256],13066:[[12458,12540,12512],256],13067:[[12459,12452,12522],256],13068:[[12459,12521,12483,12488],256],13069:[[12459,12525,12522,12540],256],13070:[[12460,12525,12531],256],13071:[[12460,12531,12510],256],13072:[[12462,12460],256],13073:[[12462,12491,12540],256],13074:[[12461,12517,12522,12540],256],13075:[[12462,12523,12480,12540],256],13076:[[12461,12525],256],13077:[[12461,12525,12464,12521,12512],256],13078:[[12461,12525,12513,12540,12488,12523],256],13079:[[12461,12525,12527,12483,12488],256],13080:[[12464,12521,12512],256],13081:[[12464,12521,12512,12488,12531],256],13082:[[12463,12523,12476,12452,12525],256],13083:[[12463,12525,12540,12493],256],13084:[[12465,12540,12473],256],13085:[[12467,12523,12490],256],13086:[[12467,12540,12509],256],13087:[[12469,12452,12463,12523],256],13088:[[12469,12531,12481,12540,12512],256],13089:[[12471,12522,12531,12464],256],13090:[[12475,12531,12481],256],13091:[[12475,12531,12488],256],13092:[[12480,12540,12473],256],13093:[[12487,12471],256],13094:[[12489,12523],256],13095:[[12488,12531],256],13096:[[12490,12494],256],13097:[[12494,12483,12488],256],13098:[[12495,12452,12484],256],13099:[[12497,12540,12475,12531,12488],256],13100:[[12497,12540,12484],256],13101:[[12496,12540,12524,12523],256],13102:[[12500,12450,12473,12488,12523],256],13103:[[12500,12463,12523],256],13104:[[12500,12467],256],13105:[[12499,12523],256],13106:[[12501,12449,12521,12483,12489],256],13107:[[12501,12451,12540,12488],256],13108:[[12502,12483,12471,12455,12523],256],13109:[[12501,12521,12531],256],13110:[[12504,12463,12479,12540,12523],256],13111:[[12506,12477],256],13112:[[12506,12491,12498],256],13113:[[12504,12523,12484],256],13114:[[12506,12531,12473],256],13115:[[12506,12540,12472],256],13116:[[12505,12540,12479],256],13117:[[12509,12452,12531,12488],256],13118:[[12508,12523,12488],256],13119:[[12507,12531],256],13120:[[12509,12531,12489],256],13121:[[12507,12540,12523],256],13122:[[12507,12540,12531],256],13123:[[12510,12452,12463,12525],256],13124:[[12510,12452,12523],256],13125:[[12510,12483,12495],256],13126:[[12510,12523,12463],256],13127:[[12510,12531,12471,12519,12531],256],13128:[[12511,12463,12525,12531],256],13129:[[12511,12522],256],13130:[[12511,12522,12496,12540,12523],256],13131:[[12513,12460],256],13132:[[12513,12460,12488,12531],256],13133:[[12513,12540,12488,12523],256],13134:[[12516,12540,12489],256],13135:[[12516,12540,12523],256],13136:[[12518,12450,12531],256],13137:[[12522,12483,12488,12523],256],13138:[[12522,12521],256],13139:[[12523,12500,12540],256],13140:[[12523,12540,12502,12523],256],13141:[[12524,12512],256],13142:[[12524,12531,12488,12466,12531],256],13143:[[12527,12483,12488],256],13144:[[48,28857],256],13145:[[49,28857],256],13146:[[50,28857],256],13147:[[51,28857],256],13148:[[52,28857],256],13149:[[53,28857],256],13150:[[54,28857],256],13151:[[55,28857],256],13152:[[56,28857],256],13153:[[57,28857],256],13154:[[49,48,28857],256],13155:[[49,49,28857],256],13156:[[49,50,28857],256],13157:[[49,51,28857],256],13158:[[49,52,28857],256],13159:[[49,53,28857],256],13160:[[49,54,28857],256],13161:[[49,55,28857],256],13162:[[49,56,28857],256],13163:[[49,57,28857],256],13164:[[50,48,28857],256],13165:[[50,49,28857],256],13166:[[50,50,28857],256],13167:[[50,51,28857],256],13168:[[50,52,28857],256],13169:[[104,80,97],256],13170:[[100,97],256],13171:[[65,85],256],13172:[[98,97,114],256],13173:[[111,86],256],13174:[[112,99],256],13175:[[100,109],256],13176:[[100,109,178],256],13177:[[100,109,179],256],13178:[[73,85],256],13179:[[24179,25104],256],13180:[[26157,21644],256],13181:[[22823,27491],256],13182:[[26126,27835],256],13183:[[26666,24335,20250,31038],256],13184:[[112,65],256],13185:[[110,65],256],13186:[[956,65],256],13187:[[109,65],256],13188:[[107,65],256],13189:[[75,66],256],13190:[[77,66],256],13191:[[71,66],256],13192:[[99,97,108],256],13193:[[107,99,97,108],256],13194:[[112,70],256],13195:[[110,70],256],13196:[[956,70],256],13197:[[956,103],256],13198:[[109,103],256],13199:[[107,103],256],13200:[[72,122],256],13201:[[107,72,122],256],13202:[[77,72,122],256],13203:[[71,72,122],256],13204:[[84,72,122],256],13205:[[956,8467],256],13206:[[109,8467],256],13207:[[100,8467],256],13208:[[107,8467],256],13209:[[102,109],256],13210:[[110,109],256],13211:[[956,109],256],13212:[[109,109],256],13213:[[99,109],256],13214:[[107,109],256],13215:[[109,109,178],256],13216:[[99,109,178],256],13217:[[109,178],256],13218:[[107,109,178],256],13219:[[109,109,179],256],13220:[[99,109,179],256],13221:[[109,179],256],13222:[[107,109,179],256],13223:[[109,8725,115],256],13224:[[109,8725,115,178],256],13225:[[80,97],256],13226:[[107,80,97],256],13227:[[77,80,97],256],13228:[[71,80,97],256],13229:[[114,97,100],256],13230:[[114,97,100,8725,115],256],13231:[[114,97,100,8725,115,178],256],13232:[[112,115],256],13233:[[110,115],256],13234:[[956,115],256],13235:[[109,115],256],13236:[[112,86],256],13237:[[110,86],256],13238:[[956,86],256],13239:[[109,86],256],13240:[[107,86],256],13241:[[77,86],256],13242:[[112,87],256],13243:[[110,87],256],13244:[[956,87],256],13245:[[109,87],256],13246:[[107,87],256],13247:[[77,87],256],13248:[[107,937],256],13249:[[77,937],256],13250:[[97,46,109,46],256],13251:[[66,113],256],13252:[[99,99],256],13253:[[99,100],256],13254:[[67,8725,107,103],256],13255:[[67,111,46],256],13256:[[100,66],256],13257:[[71,121],256],13258:[[104,97],256],13259:[[72,80],256],13260:[[105,110],256],13261:[[75,75],256],13262:[[75,77],256],13263:[[107,116],256],13264:[[108,109],256],13265:[[108,110],256],13266:[[108,111,103],256],13267:[[108,120],256],13268:[[109,98],256],13269:[[109,105,108],256],13270:[[109,111,108],256],13271:[[80,72],256],13272:[[112,46,109,46],256],13273:[[80,80,77],256],13274:[[80,82],256],13275:[[115,114],256],13276:[[83,118],256],13277:[[87,98],256],13278:[[86,8725,109],256],13279:[[65,8725,109],256],13280:[[49,26085],256],13281:[[50,26085],256],13282:[[51,26085],256],13283:[[52,26085],256],13284:[[53,26085],256],13285:[[54,26085],256],13286:[[55,26085],256],13287:[[56,26085],256],13288:[[57,26085],256],13289:[[49,48,26085],256],13290:[[49,49,26085],256],13291:[[49,50,26085],256],13292:[[49,51,26085],256],13293:[[49,52,26085],256],13294:[[49,53,26085],256],13295:[[49,54,26085],256],13296:[[49,55,26085],256],13297:[[49,56,26085],256],13298:[[49,57,26085],256],13299:[[50,48,26085],256],13300:[[50,49,26085],256],13301:[[50,50,26085],256],13302:[[50,51,26085],256],13303:[[50,52,26085],256],13304:[[50,53,26085],256],13305:[[50,54,26085],256],13306:[[50,55,26085],256],13307:[[50,56,26085],256],13308:[[50,57,26085],256],13309:[[51,48,26085],256],13310:[[51,49,26085],256],13311:[[103,97,108],256]},27136:{92912:[,1],92913:[,1],92914:[,1],92915:[,1],92916:[,1]},27392:{92976:[,230],92977:[,230],92978:[,230],92979:[,230],92980:[,230],92981:[,230],92982:[,230]},42496:{42607:[,230],42612:[,230],42613:[,230],42614:[,230],42615:[,230],42616:[,230],42617:[,230],42618:[,230],42619:[,230],42620:[,230],42621:[,230],42652:[[1098],256],42653:[[1100],256],42655:[,230],42736:[,230],42737:[,230]},42752:{42864:[[42863],256],43e3:[[294],256],43001:[[339],256]},43008:{43014:[,9],43204:[,9],43232:[,230],43233:[,230],43234:[,230],43235:[,230],43236:[,230],43237:[,230],43238:[,230],43239:[,230],43240:[,230],43241:[,230],43242:[,230],43243:[,230],43244:[,230],43245:[,230],43246:[,230],43247:[,230],43248:[,230],43249:[,230]},43264:{43307:[,220],43308:[,220],43309:[,220],43347:[,9],43443:[,7],43456:[,9]},43520:{43696:[,230],43698:[,230],43699:[,230],43700:[,220],43703:[,230],43704:[,230],43710:[,230],43711:[,230],43713:[,230],43766:[,9]},43776:{43868:[[42791],256],43869:[[43831],256],43870:[[619],256],43871:[[43858],256],44013:[,9]},48128:{113822:[,1]},53504:{119134:[[119127,119141],512],119135:[[119128,119141],512],119136:[[119135,119150],512],119137:[[119135,119151],512],119138:[[119135,119152],512],119139:[[119135,119153],512],119140:[[119135,119154],512],119141:[,216],119142:[,216],119143:[,1],119144:[,1],119145:[,1],119149:[,226],119150:[,216],119151:[,216],119152:[,216],119153:[,216],119154:[,216],119163:[,220],119164:[,220],119165:[,220],119166:[,220],119167:[,220],119168:[,220],119169:[,220],119170:[,220],119173:[,230],119174:[,230],119175:[,230],119176:[,230],119177:[,230],119178:[,220],119179:[,220],119210:[,230],119211:[,230],119212:[,230],119213:[,230],119227:[[119225,119141],512],119228:[[119226,119141],512],119229:[[119227,119150],512],119230:[[119228,119150],512],119231:[[119227,119151],512],119232:[[119228,119151],512]},53760:{119362:[,230],119363:[,230],119364:[,230]},54272:{119808:[[65],256],119809:[[66],256],119810:[[67],256],119811:[[68],256],119812:[[69],256],119813:[[70],256],119814:[[71],256],119815:[[72],256],119816:[[73],256],119817:[[74],256],119818:[[75],256],119819:[[76],256],119820:[[77],256],119821:[[78],256],119822:[[79],256],119823:[[80],256],119824:[[81],256],119825:[[82],256],119826:[[83],256],119827:[[84],256],119828:[[85],256],119829:[[86],256],119830:[[87],256],119831:[[88],256],119832:[[89],256],119833:[[90],256],119834:[[97],256],119835:[[98],256],119836:[[99],256],119837:[[100],256],119838:[[101],256],119839:[[102],256],119840:[[103],256],119841:[[104],256],119842:[[105],256],119843:[[106],256],119844:[[107],256],119845:[[108],256],119846:[[109],256],119847:[[110],256],119848:[[111],256],119849:[[112],256],119850:[[113],256],119851:[[114],256],119852:[[115],256],119853:[[116],256],119854:[[117],256],119855:[[118],256],119856:[[119],256],119857:[[120],256],119858:[[121],256],119859:[[122],256],119860:[[65],256],119861:[[66],256],119862:[[67],256],119863:[[68],256],119864:[[69],256],119865:[[70],256],119866:[[71],256],119867:[[72],256],119868:[[73],256],119869:[[74],256],119870:[[75],256],119871:[[76],256],119872:[[77],256],119873:[[78],256],119874:[[79],256],119875:[[80],256],119876:[[81],256],119877:[[82],256],119878:[[83],256],119879:[[84],256],119880:[[85],256],119881:[[86],256],119882:[[87],256],119883:[[88],256],119884:[[89],256],119885:[[90],256],119886:[[97],256],119887:[[98],256],119888:[[99],256],119889:[[100],256],119890:[[101],256],119891:[[102],256],119892:[[103],256],119894:[[105],256],119895:[[106],256],119896:[[107],256],119897:[[108],256],119898:[[109],256],119899:[[110],256],119900:[[111],256],119901:[[112],256],119902:[[113],256],119903:[[114],256],119904:[[115],256],119905:[[116],256],119906:[[117],256],119907:[[118],256],119908:[[119],256],119909:[[120],256],119910:[[121],256],119911:[[122],256],119912:[[65],256],119913:[[66],256],119914:[[67],256],119915:[[68],256],119916:[[69],256],119917:[[70],256],119918:[[71],256],119919:[[72],256],119920:[[73],256],119921:[[74],256],119922:[[75],256],119923:[[76],256],119924:[[77],256],119925:[[78],256],119926:[[79],256],119927:[[80],256],119928:[[81],256],119929:[[82],256],119930:[[83],256],119931:[[84],256],119932:[[85],256],119933:[[86],256],119934:[[87],256],119935:[[88],256],119936:[[89],256],119937:[[90],256],119938:[[97],256],119939:[[98],256],119940:[[99],256],119941:[[100],256],119942:[[101],256],119943:[[102],256],119944:[[103],256],119945:[[104],256],119946:[[105],256],119947:[[106],256],119948:[[107],256],119949:[[108],256],119950:[[109],256],119951:[[110],256],119952:[[111],256],119953:[[112],256],119954:[[113],256],119955:[[114],256],119956:[[115],256],119957:[[116],256],119958:[[117],256],119959:[[118],256],119960:[[119],256],119961:[[120],256],119962:[[121],256],119963:[[122],256],119964:[[65],256],119966:[[67],256],119967:[[68],256],119970:[[71],256],119973:[[74],256],119974:[[75],256],119977:[[78],256],119978:[[79],256],119979:[[80],256],119980:[[81],256],119982:[[83],256],119983:[[84],256],119984:[[85],256],119985:[[86],256],119986:[[87],256],119987:[[88],256],119988:[[89],256],119989:[[90],256],119990:[[97],256],119991:[[98],256],119992:[[99],256],119993:[[100],256],119995:[[102],256],119997:[[104],256],119998:[[105],256],119999:[[106],256],12e4:[[107],256],120001:[[108],256],120002:[[109],256],120003:[[110],256],120005:[[112],256],120006:[[113],256],120007:[[114],256],120008:[[115],256],120009:[[116],256],120010:[[117],256],120011:[[118],256],120012:[[119],256],120013:[[120],256],120014:[[121],256],120015:[[122],256],120016:[[65],256],120017:[[66],256],120018:[[67],256],120019:[[68],256],120020:[[69],256],120021:[[70],256],120022:[[71],256],120023:[[72],256],120024:[[73],256],120025:[[74],256],120026:[[75],256],120027:[[76],256],120028:[[77],256],120029:[[78],256],120030:[[79],256],120031:[[80],256],120032:[[81],256],120033:[[82],256],120034:[[83],256],120035:[[84],256],120036:[[85],256],120037:[[86],256],120038:[[87],256],120039:[[88],256],120040:[[89],256],120041:[[90],256],120042:[[97],256],120043:[[98],256],120044:[[99],256],120045:[[100],256],120046:[[101],256],120047:[[102],256],120048:[[103],256],120049:[[104],256],120050:[[105],256],120051:[[106],256],120052:[[107],256],120053:[[108],256],120054:[[109],256],120055:[[110],256],120056:[[111],256],120057:[[112],256],120058:[[113],256],120059:[[114],256],120060:[[115],256],120061:[[116],256],120062:[[117],256],120063:[[118],256]},54528:{120064:[[119],256],120065:[[120],256],120066:[[121],256],120067:[[122],256],120068:[[65],256],120069:[[66],256],120071:[[68],256],120072:[[69],256],120073:[[70],256],120074:[[71],256],120077:[[74],256],120078:[[75],256],120079:[[76],256],120080:[[77],256],120081:[[78],256],120082:[[79],256],120083:[[80],256],120084:[[81],256],120086:[[83],256],120087:[[84],256],120088:[[85],256],120089:[[86],256],120090:[[87],256],120091:[[88],256],120092:[[89],256],120094:[[97],256],120095:[[98],256],120096:[[99],256],120097:[[100],256],120098:[[101],256],120099:[[102],256],120100:[[103],256],120101:[[104],256],120102:[[105],256],120103:[[106],256],120104:[[107],256],120105:[[108],256],120106:[[109],256],120107:[[110],256],120108:[[111],256],120109:[[112],256],120110:[[113],256],120111:[[114],256],120112:[[115],256],120113:[[116],256],120114:[[117],256],120115:[[118],256],120116:[[119],256],120117:[[120],256],120118:[[121],256],120119:[[122],256],120120:[[65],256],120121:[[66],256],120123:[[68],256],120124:[[69],256],120125:[[70],256],120126:[[71],256],120128:[[73],256],120129:[[74],256],120130:[[75],256],120131:[[76],256],120132:[[77],256],120134:[[79],256],120138:[[83],256],120139:[[84],256],120140:[[85],256],120141:[[86],256],120142:[[87],256],120143:[[88],256],120144:[[89],256],120146:[[97],256],120147:[[98],256],120148:[[99],256],120149:[[100],256],120150:[[101],256],120151:[[102],256],120152:[[103],256],120153:[[104],256],120154:[[105],256],120155:[[106],256],120156:[[107],256],120157:[[108],256],120158:[[109],256],120159:[[110],256],120160:[[111],256],120161:[[112],256],120162:[[113],256],120163:[[114],256],120164:[[115],256],120165:[[116],256],120166:[[117],256],120167:[[118],256],120168:[[119],256],120169:[[120],256],120170:[[121],256],120171:[[122],256],120172:[[65],256],120173:[[66],256],120174:[[67],256],120175:[[68],256],120176:[[69],256],120177:[[70],256],120178:[[71],256],120179:[[72],256],120180:[[73],256],120181:[[74],256],120182:[[75],256],120183:[[76],256],120184:[[77],256],120185:[[78],256],120186:[[79],256],120187:[[80],256],120188:[[81],256],120189:[[82],256],120190:[[83],256],120191:[[84],256],120192:[[85],256],120193:[[86],256],120194:[[87],256],120195:[[88],256],120196:[[89],256],120197:[[90],256],120198:[[97],256],120199:[[98],256],120200:[[99],256],120201:[[100],256],120202:[[101],256],120203:[[102],256],120204:[[103],256],120205:[[104],256],120206:[[105],256],120207:[[106],256],120208:[[107],256],120209:[[108],256],120210:[[109],256],120211:[[110],256],120212:[[111],256],120213:[[112],256],120214:[[113],256],120215:[[114],256],120216:[[115],256],120217:[[116],256],120218:[[117],256],120219:[[118],256],120220:[[119],256],120221:[[120],256],120222:[[121],256],120223:[[122],256],120224:[[65],256],120225:[[66],256],120226:[[67],256],120227:[[68],256],120228:[[69],256],120229:[[70],256],120230:[[71],256],120231:[[72],256],120232:[[73],256],120233:[[74],256],120234:[[75],256],120235:[[76],256],120236:[[77],256],120237:[[78],256],120238:[[79],256],120239:[[80],256],120240:[[81],256],120241:[[82],256],120242:[[83],256],120243:[[84],256],120244:[[85],256],120245:[[86],256],120246:[[87],256],120247:[[88],256],120248:[[89],256],120249:[[90],256],120250:[[97],256],120251:[[98],256],120252:[[99],256],120253:[[100],256],120254:[[101],256],120255:[[102],256],120256:[[103],256],120257:[[104],256],120258:[[105],256],120259:[[106],256],120260:[[107],256],120261:[[108],256],120262:[[109],256],120263:[[110],256],120264:[[111],256],120265:[[112],256],120266:[[113],256],120267:[[114],256],120268:[[115],256],120269:[[116],256],120270:[[117],256],120271:[[118],256],120272:[[119],256],120273:[[120],256],120274:[[121],256],120275:[[122],256],120276:[[65],256],120277:[[66],256],120278:[[67],256],120279:[[68],256],120280:[[69],256],120281:[[70],256],120282:[[71],256],120283:[[72],256],120284:[[73],256],120285:[[74],256],120286:[[75],256],120287:[[76],256],120288:[[77],256],120289:[[78],256],120290:[[79],256],120291:[[80],256],120292:[[81],256],120293:[[82],256],120294:[[83],256],120295:[[84],256],120296:[[85],256],120297:[[86],256],120298:[[87],256],120299:[[88],256],120300:[[89],256],120301:[[90],256],120302:[[97],256],120303:[[98],256],120304:[[99],256],120305:[[100],256],120306:[[101],256],120307:[[102],256],120308:[[103],256],120309:[[104],256],120310:[[105],256],120311:[[106],256],120312:[[107],256],120313:[[108],256],120314:[[109],256],120315:[[110],256],120316:[[111],256],120317:[[112],256],120318:[[113],256],120319:[[114],256]},54784:{120320:[[115],256],120321:[[116],256],120322:[[117],256],120323:[[118],256],120324:[[119],256],120325:[[120],256],120326:[[121],256],120327:[[122],256],120328:[[65],256],120329:[[66],256],120330:[[67],256],120331:[[68],256],120332:[[69],256],120333:[[70],256],120334:[[71],256],120335:[[72],256],120336:[[73],256],120337:[[74],256],120338:[[75],256],120339:[[76],256],120340:[[77],256],120341:[[78],256],120342:[[79],256],120343:[[80],256],120344:[[81],256],120345:[[82],256],120346:[[83],256],120347:[[84],256],120348:[[85],256],120349:[[86],256],120350:[[87],256],120351:[[88],256],120352:[[89],256],120353:[[90],256],120354:[[97],256],120355:[[98],256],120356:[[99],256],120357:[[100],256],120358:[[101],256],120359:[[102],256],120360:[[103],256],120361:[[104],256],120362:[[105],256],120363:[[106],256],120364:[[107],256],120365:[[108],256],120366:[[109],256],120367:[[110],256],120368:[[111],256],120369:[[112],256],120370:[[113],256],120371:[[114],256],120372:[[115],256],120373:[[116],256],120374:[[117],256],120375:[[118],256],120376:[[119],256],120377:[[120],256],120378:[[121],256],120379:[[122],256],120380:[[65],256],120381:[[66],256],120382:[[67],256],120383:[[68],256],120384:[[69],256],120385:[[70],256],120386:[[71],256],120387:[[72],256],120388:[[73],256],120389:[[74],256],120390:[[75],256],120391:[[76],256],120392:[[77],256],120393:[[78],256],120394:[[79],256],120395:[[80],256],120396:[[81],256],120397:[[82],256],120398:[[83],256],120399:[[84],256],120400:[[85],256],120401:[[86],256],120402:[[87],256],120403:[[88],256],120404:[[89],256],120405:[[90],256],120406:[[97],256],120407:[[98],256],120408:[[99],256],120409:[[100],256],120410:[[101],256],120411:[[102],256],120412:[[103],256],120413:[[104],256],120414:[[105],256],120415:[[106],256],120416:[[107],256],120417:[[108],256],120418:[[109],256],120419:[[110],256],120420:[[111],256],120421:[[112],256],120422:[[113],256],120423:[[114],256],120424:[[115],256],120425:[[116],256],120426:[[117],256],120427:[[118],256],120428:[[119],256],120429:[[120],256],120430:[[121],256],120431:[[122],256],120432:[[65],256],120433:[[66],256],120434:[[67],256],120435:[[68],256],120436:[[69],256],120437:[[70],256],120438:[[71],256],120439:[[72],256],120440:[[73],256],120441:[[74],256],120442:[[75],256],120443:[[76],256],120444:[[77],256],120445:[[78],256],120446:[[79],256],120447:[[80],256],120448:[[81],256],120449:[[82],256],120450:[[83],256],120451:[[84],256],120452:[[85],256],120453:[[86],256],120454:[[87],256],120455:[[88],256],120456:[[89],256],120457:[[90],256],120458:[[97],256],120459:[[98],256],120460:[[99],256],120461:[[100],256],120462:[[101],256],120463:[[102],256],120464:[[103],256],120465:[[104],256],120466:[[105],256],120467:[[106],256],120468:[[107],256],120469:[[108],256],120470:[[109],256],120471:[[110],256],120472:[[111],256],120473:[[112],256],120474:[[113],256],120475:[[114],256],120476:[[115],256],120477:[[116],256],120478:[[117],256],120479:[[118],256],120480:[[119],256],120481:[[120],256],120482:[[121],256],120483:[[122],256],120484:[[305],256],120485:[[567],256],120488:[[913],256],120489:[[914],256],120490:[[915],256],120491:[[916],256],120492:[[917],256],120493:[[918],256],120494:[[919],256],120495:[[920],256],120496:[[921],256],120497:[[922],256],120498:[[923],256],120499:[[924],256],120500:[[925],256],120501:[[926],256],120502:[[927],256],120503:[[928],256],120504:[[929],256],120505:[[1012],256],120506:[[931],256],120507:[[932],256],120508:[[933],256],120509:[[934],256],120510:[[935],256],120511:[[936],256],120512:[[937],256],120513:[[8711],256],120514:[[945],256],120515:[[946],256],120516:[[947],256],120517:[[948],256],120518:[[949],256],120519:[[950],256],120520:[[951],256],120521:[[952],256],120522:[[953],256],120523:[[954],256],120524:[[955],256],120525:[[956],256],120526:[[957],256],120527:[[958],256],120528:[[959],256],120529:[[960],256],120530:[[961],256],120531:[[962],256],120532:[[963],256],120533:[[964],256],120534:[[965],256],120535:[[966],256],120536:[[967],256],120537:[[968],256],120538:[[969],256],120539:[[8706],256],120540:[[1013],256],120541:[[977],256],120542:[[1008],256],120543:[[981],256],120544:[[1009],256],120545:[[982],256],120546:[[913],256],120547:[[914],256],120548:[[915],256],120549:[[916],256],120550:[[917],256],120551:[[918],256],120552:[[919],256],120553:[[920],256],120554:[[921],256],120555:[[922],256],120556:[[923],256],120557:[[924],256],120558:[[925],256],120559:[[926],256],120560:[[927],256],120561:[[928],256],120562:[[929],256],120563:[[1012],256],120564:[[931],256],120565:[[932],256],120566:[[933],256],120567:[[934],256],120568:[[935],256],120569:[[936],256],120570:[[937],256],120571:[[8711],256],120572:[[945],256],120573:[[946],256],120574:[[947],256],120575:[[948],256]},55040:{120576:[[949],256],120577:[[950],256],120578:[[951],256],120579:[[952],256],120580:[[953],256],120581:[[954],256],120582:[[955],256],120583:[[956],256],120584:[[957],256],120585:[[958],256],120586:[[959],256],120587:[[960],256],120588:[[961],256],120589:[[962],256],120590:[[963],256],120591:[[964],256],120592:[[965],256],120593:[[966],256],120594:[[967],256],120595:[[968],256],120596:[[969],256],120597:[[8706],256],120598:[[1013],256],120599:[[977],256],120600:[[1008],256],120601:[[981],256],120602:[[1009],256],120603:[[982],256],120604:[[913],256],120605:[[914],256],120606:[[915],256],120607:[[916],256],120608:[[917],256],120609:[[918],256],120610:[[919],256],120611:[[920],256],120612:[[921],256],120613:[[922],256],120614:[[923],256],120615:[[924],256],120616:[[925],256],120617:[[926],256],120618:[[927],256],120619:[[928],256],120620:[[929],256],120621:[[1012],256],120622:[[931],256],120623:[[932],256],120624:[[933],256],120625:[[934],256],120626:[[935],256],120627:[[936],256],120628:[[937],256],120629:[[8711],256],120630:[[945],256],120631:[[946],256],120632:[[947],256],120633:[[948],256],120634:[[949],256],120635:[[950],256],120636:[[951],256],120637:[[952],256],120638:[[953],256],120639:[[954],256],120640:[[955],256],120641:[[956],256],120642:[[957],256],120643:[[958],256],120644:[[959],256],120645:[[960],256],120646:[[961],256],120647:[[962],256],120648:[[963],256],120649:[[964],256],120650:[[965],256],120651:[[966],256],120652:[[967],256],120653:[[968],256],120654:[[969],256],120655:[[8706],256],120656:[[1013],256],120657:[[977],256],120658:[[1008],256],120659:[[981],256],120660:[[1009],256],120661:[[982],256],120662:[[913],256],120663:[[914],256],120664:[[915],256],120665:[[916],256],120666:[[917],256],120667:[[918],256],120668:[[919],256],120669:[[920],256],120670:[[921],256],120671:[[922],256],120672:[[923],256],120673:[[924],256],120674:[[925],256],120675:[[926],256],120676:[[927],256],120677:[[928],256],120678:[[929],256],120679:[[1012],256],120680:[[931],256],120681:[[932],256],120682:[[933],256],120683:[[934],256],120684:[[935],256],120685:[[936],256],120686:[[937],256],120687:[[8711],256],120688:[[945],256],120689:[[946],256],120690:[[947],256],120691:[[948],256],120692:[[949],256],120693:[[950],256],120694:[[951],256],120695:[[952],256],120696:[[953],256],120697:[[954],256],120698:[[955],256],120699:[[956],256],120700:[[957],256],120701:[[958],256],120702:[[959],256],120703:[[960],256],120704:[[961],256],120705:[[962],256],120706:[[963],256],120707:[[964],256],120708:[[965],256],120709:[[966],256],120710:[[967],256],120711:[[968],256],120712:[[969],256],120713:[[8706],256],120714:[[1013],256],120715:[[977],256],120716:[[1008],256],120717:[[981],256],120718:[[1009],256],120719:[[982],256],120720:[[913],256],120721:[[914],256],120722:[[915],256],120723:[[916],256],120724:[[917],256],120725:[[918],256],120726:[[919],256],120727:[[920],256],120728:[[921],256],120729:[[922],256],120730:[[923],256],120731:[[924],256],120732:[[925],256],120733:[[926],256],120734:[[927],256],120735:[[928],256],120736:[[929],256],120737:[[1012],256],120738:[[931],256],120739:[[932],256],120740:[[933],256],120741:[[934],256],120742:[[935],256],120743:[[936],256],120744:[[937],256],120745:[[8711],256],120746:[[945],256],120747:[[946],256],120748:[[947],256],120749:[[948],256],120750:[[949],256],120751:[[950],256],120752:[[951],256],120753:[[952],256],120754:[[953],256],120755:[[954],256],120756:[[955],256],120757:[[956],256],120758:[[957],256],120759:[[958],256],120760:[[959],256],120761:[[960],256],120762:[[961],256],120763:[[962],256],120764:[[963],256],120765:[[964],256],120766:[[965],256],120767:[[966],256],120768:[[967],256],120769:[[968],256],120770:[[969],256],120771:[[8706],256],120772:[[1013],256],120773:[[977],256],120774:[[1008],256],120775:[[981],256],120776:[[1009],256],120777:[[982],256],120778:[[988],256],120779:[[989],256],120782:[[48],256],120783:[[49],256],120784:[[50],256],120785:[[51],256],120786:[[52],256],120787:[[53],256],120788:[[54],256],120789:[[55],256],120790:[[56],256],120791:[[57],256],120792:[[48],256],120793:[[49],256],120794:[[50],256],120795:[[51],256],120796:[[52],256],120797:[[53],256],120798:[[54],256],120799:[[55],256],120800:[[56],256],120801:[[57],256],120802:[[48],256],120803:[[49],256],120804:[[50],256],120805:[[51],256],120806:[[52],256],120807:[[53],256],120808:[[54],256],120809:[[55],256],120810:[[56],256],120811:[[57],256],120812:[[48],256],120813:[[49],256],120814:[[50],256],120815:[[51],256],120816:[[52],256],120817:[[53],256],120818:[[54],256],120819:[[55],256],120820:[[56],256],120821:[[57],256],120822:[[48],256],120823:[[49],256],120824:[[50],256],120825:[[51],256],120826:[[52],256],120827:[[53],256],120828:[[54],256],120829:[[55],256],120830:[[56],256],120831:[[57],256]},59392:{125136:[,220],125137:[,220],125138:[,220],125139:[,220],125140:[,220],125141:[,220],125142:[,220]},60928:{126464:[[1575],256],126465:[[1576],256],126466:[[1580],256],126467:[[1583],256],126469:[[1608],256],126470:[[1586],256],126471:[[1581],256],126472:[[1591],256],126473:[[1610],256],126474:[[1603],256],126475:[[1604],256],126476:[[1605],256],126477:[[1606],256],126478:[[1587],256],126479:[[1593],256],126480:[[1601],256],126481:[[1589],256],126482:[[1602],256],126483:[[1585],256],126484:[[1588],256],126485:[[1578],256],126486:[[1579],256],126487:[[1582],256],126488:[[1584],256],126489:[[1590],256],126490:[[1592],256],126491:[[1594],256],126492:[[1646],256],126493:[[1722],256],126494:[[1697],256],126495:[[1647],256],126497:[[1576],256],126498:[[1580],256],126500:[[1607],256],126503:[[1581],256],126505:[[1610],256],126506:[[1603],256],126507:[[1604],256],126508:[[1605],256],126509:[[1606],256],126510:[[1587],256],126511:[[1593],256],126512:[[1601],256],126513:[[1589],256],126514:[[1602],256],126516:[[1588],256],126517:[[1578],256],126518:[[1579],256],126519:[[1582],256],126521:[[1590],256],126523:[[1594],256],126530:[[1580],256],126535:[[1581],256],126537:[[1610],256],126539:[[1604],256],126541:[[1606],256],126542:[[1587],256],126543:[[1593],256],126545:[[1589],256],126546:[[1602],256],126548:[[1588],256],126551:[[1582],256],126553:[[1590],256],126555:[[1594],256],126557:[[1722],256],126559:[[1647],256],126561:[[1576],256],126562:[[1580],256],126564:[[1607],256],126567:[[1581],256],126568:[[1591],256],126569:[[1610],256],126570:[[1603],256],126572:[[1605],256],126573:[[1606],256],126574:[[1587],256],126575:[[1593],256],126576:[[1601],256],126577:[[1589],256],126578:[[1602],256],126580:[[1588],256],126581:[[1578],256],126582:[[1579],256],126583:[[1582],256],126585:[[1590],256],126586:[[1592],256],126587:[[1594],256],126588:[[1646],256],126590:[[1697],256],126592:[[1575],256],126593:[[1576],256],126594:[[1580],256],126595:[[1583],256],126596:[[1607],256],126597:[[1608],256],126598:[[1586],256],126599:[[1581],256],126600:[[1591],256],126601:[[1610],256],126603:[[1604],256],126604:[[1605],256],126605:[[1606],256],126606:[[1587],256],126607:[[1593],256],126608:[[1601],256],126609:[[1589],256],126610:[[1602],256],126611:[[1585],256],126612:[[1588],256],126613:[[1578],256],126614:[[1579],256],126615:[[1582],256],126616:[[1584],256],126617:[[1590],256],126618:[[1592],256],126619:[[1594],256],126625:[[1576],256],126626:[[1580],256],126627:[[1583],256],126629:[[1608],256],126630:[[1586],256],126631:[[1581],256],126632:[[1591],256],126633:[[1610],256],126635:[[1604],256],126636:[[1605],256],126637:[[1606],256],126638:[[1587],256],126639:[[1593],256],126640:[[1601],256],126641:[[1589],256],126642:[[1602],256],126643:[[1585],256],126644:[[1588],256],126645:[[1578],256],126646:[[1579],256],126647:[[1582],256],126648:[[1584],256],126649:[[1590],256],126650:[[1592],256],126651:[[1594],256]},61696:{127232:[[48,46],256],127233:[[48,44],256],127234:[[49,44],256],127235:[[50,44],256],127236:[[51,44],256],127237:[[52,44],256],127238:[[53,44],256],127239:[[54,44],256],127240:[[55,44],256],127241:[[56,44],256],127242:[[57,44],256],127248:[[40,65,41],256],127249:[[40,66,41],256],127250:[[40,67,41],256],127251:[[40,68,41],256],127252:[[40,69,41],256],127253:[[40,70,41],256],127254:[[40,71,41],256],127255:[[40,72,41],256],127256:[[40,73,41],256],127257:[[40,74,41],256],127258:[[40,75,41],256],127259:[[40,76,41],256],127260:[[40,77,41],256],127261:[[40,78,41],256],127262:[[40,79,41],256],127263:[[40,80,41],256],127264:[[40,81,41],256],127265:[[40,82,41],256],127266:[[40,83,41],256],127267:[[40,84,41],256],127268:[[40,85,41],256],127269:[[40,86,41],256],127270:[[40,87,41],256],127271:[[40,88,41],256],127272:[[40,89,41],256],127273:[[40,90,41],256],127274:[[12308,83,12309],256],127275:[[67],256],127276:[[82],256],127277:[[67,68],256],127278:[[87,90],256],127280:[[65],256],127281:[[66],256],127282:[[67],256],127283:[[68],256],127284:[[69],256],127285:[[70],256],127286:[[71],256],127287:[[72],256],127288:[[73],256],127289:[[74],256],127290:[[75],256],127291:[[76],256],127292:[[77],256],127293:[[78],256],127294:[[79],256],127295:[[80],256],127296:[[81],256],127297:[[82],256],127298:[[83],256],127299:[[84],256],127300:[[85],256],127301:[[86],256],127302:[[87],256],127303:[[88],256],127304:[[89],256],127305:[[90],256],127306:[[72,86],256],127307:[[77,86],256],127308:[[83,68],256],127309:[[83,83],256],127310:[[80,80,86],256],127311:[[87,67],256],127338:[[77,67],256],127339:[[77,68],256],127376:[[68,74],256]},61952:{127488:[[12411,12363],256],127489:[[12467,12467],256],127490:[[12469],256],127504:[[25163],256],127505:[[23383],256],127506:[[21452],256],127507:[[12487],256],127508:[[20108],256],127509:[[22810],256],127510:[[35299],256],127511:[[22825],256],127512:[[20132],256],127513:[[26144],256],127514:[[28961],256],127515:[[26009],256],127516:[[21069],256],127517:[[24460],256],127518:[[20877],256],127519:[[26032],256],127520:[[21021],256],127521:[[32066],256],127522:[[29983],256],127523:[[36009],256],127524:[[22768],256],127525:[[21561],256],127526:[[28436],256],127527:[[25237],256],127528:[[25429],256],127529:[[19968],256],127530:[[19977],256],127531:[[36938],256],127532:[[24038],256],127533:[[20013],256],127534:[[21491],256],127535:[[25351],256],127536:[[36208],256],127537:[[25171],256],127538:[[31105],256],127539:[[31354],256],127540:[[21512],256],127541:[[28288],256],127542:[[26377],256],127543:[[26376],256],127544:[[30003],256],127545:[[21106],256],127546:[[21942],256],127552:[[12308,26412,12309],256],127553:[[12308,19977,12309],256],127554:[[12308,20108,12309],256],127555:[[12308,23433,12309],256],127556:[[12308,28857,12309],256],127557:[[12308,25171,12309],256],127558:[[12308,30423,12309],256],127559:[[12308,21213,12309],256],127560:[[12308,25943,12309],256],127568:[[24471],256],127569:[[21487],256]},63488:{194560:[[20029]],194561:[[20024]],194562:[[20033]],194563:[[131362]],194564:[[20320]],194565:[[20398]],194566:[[20411]],194567:[[20482]],194568:[[20602]],194569:[[20633]],194570:[[20711]],194571:[[20687]],194572:[[13470]],194573:[[132666]],194574:[[20813]],194575:[[20820]],194576:[[20836]],194577:[[20855]],194578:[[132380]],194579:[[13497]],194580:[[20839]],194581:[[20877]],194582:[[132427]],194583:[[20887]],194584:[[20900]],194585:[[20172]],194586:[[20908]],194587:[[20917]],194588:[[168415]],194589:[[20981]],194590:[[20995]],194591:[[13535]],194592:[[21051]],194593:[[21062]],194594:[[21106]],194595:[[21111]],194596:[[13589]],194597:[[21191]],194598:[[21193]],194599:[[21220]],194600:[[21242]],194601:[[21253]],194602:[[21254]],194603:[[21271]],194604:[[21321]],194605:[[21329]],194606:[[21338]],194607:[[21363]],194608:[[21373]],194609:[[21375]],194610:[[21375]],194611:[[21375]],194612:[[133676]],194613:[[28784]],194614:[[21450]],194615:[[21471]],194616:[[133987]],194617:[[21483]],194618:[[21489]],194619:[[21510]],194620:[[21662]],194621:[[21560]],194622:[[21576]],194623:[[21608]],194624:[[21666]],194625:[[21750]],194626:[[21776]],194627:[[21843]],194628:[[21859]],194629:[[21892]],194630:[[21892]],194631:[[21913]],194632:[[21931]],194633:[[21939]],194634:[[21954]],194635:[[22294]],194636:[[22022]],194637:[[22295]],194638:[[22097]],194639:[[22132]],194640:[[20999]],194641:[[22766]],194642:[[22478]],194643:[[22516]],194644:[[22541]],194645:[[22411]],194646:[[22578]],194647:[[22577]],194648:[[22700]],194649:[[136420]],194650:[[22770]],194651:[[22775]],194652:[[22790]],194653:[[22810]],194654:[[22818]],194655:[[22882]],194656:[[136872]],194657:[[136938]],194658:[[23020]],194659:[[23067]],194660:[[23079]],194661:[[23e3]],194662:[[23142]],194663:[[14062]],194664:[[14076]],194665:[[23304]],194666:[[23358]],194667:[[23358]],194668:[[137672]],194669:[[23491]],194670:[[23512]],194671:[[23527]],194672:[[23539]],194673:[[138008]],194674:[[23551]],194675:[[23558]],194676:[[24403]],194677:[[23586]],194678:[[14209]],194679:[[23648]],194680:[[23662]],194681:[[23744]],194682:[[23693]],194683:[[138724]],194684:[[23875]],194685:[[138726]],194686:[[23918]],194687:[[23915]],194688:[[23932]],194689:[[24033]],194690:[[24034]],194691:[[14383]],194692:[[24061]],194693:[[24104]],194694:[[24125]],194695:[[24169]],194696:[[14434]],194697:[[139651]],194698:[[14460]],194699:[[24240]],194700:[[24243]],194701:[[24246]],194702:[[24266]],194703:[[172946]],194704:[[24318]],194705:[[140081]],194706:[[140081]],194707:[[33281]],194708:[[24354]],194709:[[24354]],194710:[[14535]],194711:[[144056]],194712:[[156122]],194713:[[24418]],194714:[[24427]],194715:[[14563]],194716:[[24474]],194717:[[24525]],194718:[[24535]],194719:[[24569]],194720:[[24705]],194721:[[14650]],194722:[[14620]],194723:[[24724]],194724:[[141012]],194725:[[24775]],194726:[[24904]],194727:[[24908]],194728:[[24910]],194729:[[24908]],194730:[[24954]],194731:[[24974]],194732:[[25010]],194733:[[24996]],194734:[[25007]],194735:[[25054]],194736:[[25074]],194737:[[25078]],194738:[[25104]],194739:[[25115]],194740:[[25181]],194741:[[25265]],194742:[[25300]],194743:[[25424]],194744:[[142092]],194745:[[25405]],194746:[[25340]],194747:[[25448]],194748:[[25475]],194749:[[25572]],194750:[[142321]],194751:[[25634]],194752:[[25541]],194753:[[25513]],194754:[[14894]],194755:[[25705]],194756:[[25726]],194757:[[25757]],194758:[[25719]],194759:[[14956]],194760:[[25935]],194761:[[25964]],194762:[[143370]],194763:[[26083]],194764:[[26360]],194765:[[26185]],194766:[[15129]],194767:[[26257]],194768:[[15112]],194769:[[15076]],194770:[[20882]],194771:[[20885]],194772:[[26368]],194773:[[26268]],194774:[[32941]],194775:[[17369]],194776:[[26391]],194777:[[26395]],194778:[[26401]],194779:[[26462]],194780:[[26451]],194781:[[144323]],194782:[[15177]],194783:[[26618]],194784:[[26501]],194785:[[26706]],194786:[[26757]],194787:[[144493]],194788:[[26766]],194789:[[26655]],194790:[[26900]],194791:[[15261]],194792:[[26946]],194793:[[27043]],194794:[[27114]],194795:[[27304]],194796:[[145059]],194797:[[27355]],194798:[[15384]],194799:[[27425]],194800:[[145575]],194801:[[27476]],194802:[[15438]],194803:[[27506]],194804:[[27551]],194805:[[27578]],194806:[[27579]],194807:[[146061]],194808:[[138507]],194809:[[146170]],194810:[[27726]],194811:[[146620]],194812:[[27839]],194813:[[27853]],194814:[[27751]],194815:[[27926]]},63744:{63744:[[35912]],63745:[[26356]],63746:[[36554]],63747:[[36040]],63748:[[28369]],63749:[[20018]],63750:[[21477]],63751:[[40860]],63752:[[40860]],63753:[[22865]],63754:[[37329]],63755:[[21895]],63756:[[22856]],63757:[[25078]],63758:[[30313]],63759:[[32645]],63760:[[34367]],63761:[[34746]],63762:[[35064]],63763:[[37007]],63764:[[27138]],63765:[[27931]],63766:[[28889]],63767:[[29662]],63768:[[33853]],63769:[[37226]],63770:[[39409]],63771:[[20098]],63772:[[21365]],63773:[[27396]],63774:[[29211]],63775:[[34349]],63776:[[40478]],63777:[[23888]],63778:[[28651]],63779:[[34253]],63780:[[35172]],63781:[[25289]],63782:[[33240]],63783:[[34847]],63784:[[24266]],63785:[[26391]],63786:[[28010]],63787:[[29436]],63788:[[37070]],63789:[[20358]],63790:[[20919]],63791:[[21214]],63792:[[25796]],63793:[[27347]],63794:[[29200]],63795:[[30439]],63796:[[32769]],63797:[[34310]],63798:[[34396]],63799:[[36335]],63800:[[38706]],63801:[[39791]],63802:[[40442]],63803:[[30860]],63804:[[31103]],63805:[[32160]],63806:[[33737]],63807:[[37636]],63808:[[40575]],63809:[[35542]],63810:[[22751]],63811:[[24324]],63812:[[31840]],63813:[[32894]],63814:[[29282]],63815:[[30922]],63816:[[36034]],63817:[[38647]],63818:[[22744]],63819:[[23650]],63820:[[27155]],63821:[[28122]],63822:[[28431]],63823:[[32047]],63824:[[32311]],63825:[[38475]],63826:[[21202]],63827:[[32907]],63828:[[20956]],63829:[[20940]],63830:[[31260]],63831:[[32190]],63832:[[33777]],63833:[[38517]],63834:[[35712]],63835:[[25295]],63836:[[27138]],63837:[[35582]],63838:[[20025]],63839:[[23527]],63840:[[24594]],63841:[[29575]],63842:[[30064]],63843:[[21271]],63844:[[30971]],63845:[[20415]],63846:[[24489]],63847:[[19981]],63848:[[27852]],63849:[[25976]],63850:[[32034]],63851:[[21443]],63852:[[22622]],63853:[[30465]],63854:[[33865]],63855:[[35498]],63856:[[27578]],63857:[[36784]],63858:[[27784]],63859:[[25342]],63860:[[33509]],63861:[[25504]],63862:[[30053]],63863:[[20142]],63864:[[20841]],63865:[[20937]],63866:[[26753]],63867:[[31975]],63868:[[33391]],63869:[[35538]],63870:[[37327]],63871:[[21237]],63872:[[21570]],63873:[[22899]],63874:[[24300]],63875:[[26053]],63876:[[28670]],63877:[[31018]],63878:[[38317]],63879:[[39530]],63880:[[40599]],63881:[[40654]],63882:[[21147]],63883:[[26310]],63884:[[27511]],63885:[[36706]],63886:[[24180]],63887:[[24976]],63888:[[25088]],63889:[[25754]],63890:[[28451]],63891:[[29001]],63892:[[29833]],63893:[[31178]],63894:[[32244]],63895:[[32879]],63896:[[36646]],63897:[[34030]],63898:[[36899]],63899:[[37706]],63900:[[21015]],63901:[[21155]],63902:[[21693]],63903:[[28872]],63904:[[35010]],63905:[[35498]],63906:[[24265]],63907:[[24565]],63908:[[25467]],63909:[[27566]],63910:[[31806]],63911:[[29557]],63912:[[20196]],63913:[[22265]],63914:[[23527]],63915:[[23994]],63916:[[24604]],63917:[[29618]],63918:[[29801]],63919:[[32666]],63920:[[32838]],63921:[[37428]],63922:[[38646]],63923:[[38728]],63924:[[38936]],63925:[[20363]],63926:[[31150]],63927:[[37300]],63928:[[38584]],63929:[[24801]],63930:[[20102]],63931:[[20698]],63932:[[23534]],63933:[[23615]],63934:[[26009]],63935:[[27138]],63936:[[29134]],63937:[[30274]],63938:[[34044]],63939:[[36988]],63940:[[40845]],63941:[[26248]],63942:[[38446]],63943:[[21129]],63944:[[26491]],63945:[[26611]],63946:[[27969]],63947:[[28316]],63948:[[29705]],63949:[[30041]],63950:[[30827]],63951:[[32016]],63952:[[39006]],63953:[[20845]],63954:[[25134]],63955:[[38520]],63956:[[20523]],63957:[[23833]],63958:[[28138]],63959:[[36650]],63960:[[24459]],63961:[[24900]],63962:[[26647]],63963:[[29575]],63964:[[38534]],63965:[[21033]],63966:[[21519]],63967:[[23653]],63968:[[26131]],63969:[[26446]],63970:[[26792]],63971:[[27877]],63972:[[29702]],63973:[[30178]],63974:[[32633]],63975:[[35023]],63976:[[35041]],63977:[[37324]],63978:[[38626]],63979:[[21311]],63980:[[28346]],63981:[[21533]],63982:[[29136]],63983:[[29848]],63984:[[34298]],63985:[[38563]],63986:[[40023]],63987:[[40607]],63988:[[26519]],63989:[[28107]],63990:[[33256]],63991:[[31435]],63992:[[31520]],63993:[[31890]],63994:[[29376]],63995:[[28825]],63996:[[35672]],63997:[[20160]],63998:[[33590]],63999:[[21050]],194816:[[27966]],194817:[[28023]],194818:[[27969]],194819:[[28009]],194820:[[28024]],194821:[[28037]],194822:[[146718]],194823:[[27956]],194824:[[28207]],194825:[[28270]],194826:[[15667]],194827:[[28363]],194828:[[28359]],194829:[[147153]],194830:[[28153]],194831:[[28526]],194832:[[147294]],194833:[[147342]],194834:[[28614]],194835:[[28729]],194836:[[28702]],194837:[[28699]],194838:[[15766]],194839:[[28746]],194840:[[28797]],194841:[[28791]],194842:[[28845]],194843:[[132389]],194844:[[28997]],194845:[[148067]],194846:[[29084]],194847:[[148395]],194848:[[29224]],194849:[[29237]],194850:[[29264]],194851:[[149e3]],194852:[[29312]],194853:[[29333]],194854:[[149301]],194855:[[149524]],194856:[[29562]],194857:[[29579]],194858:[[16044]],194859:[[29605]],194860:[[16056]],194861:[[16056]],194862:[[29767]],194863:[[29788]],194864:[[29809]],194865:[[29829]],194866:[[29898]],194867:[[16155]],194868:[[29988]],194869:[[150582]],194870:[[30014]],194871:[[150674]],194872:[[30064]],194873:[[139679]],194874:[[30224]],194875:[[151457]],194876:[[151480]],194877:[[151620]],194878:[[16380]],194879:[[16392]],194880:[[30452]],194881:[[151795]],194882:[[151794]],194883:[[151833]],194884:[[151859]],194885:[[30494]],194886:[[30495]],194887:[[30495]],194888:[[30538]],194889:[[16441]],194890:[[30603]],194891:[[16454]],194892:[[16534]],194893:[[152605]],194894:[[30798]],194895:[[30860]],194896:[[30924]],194897:[[16611]],194898:[[153126]],194899:[[31062]],194900:[[153242]],194901:[[153285]],194902:[[31119]],194903:[[31211]],194904:[[16687]],194905:[[31296]],194906:[[31306]],194907:[[31311]],194908:[[153980]],194909:[[154279]],194910:[[154279]],194911:[[31470]],194912:[[16898]],194913:[[154539]],194914:[[31686]],194915:[[31689]],194916:[[16935]],194917:[[154752]],194918:[[31954]],194919:[[17056]],194920:[[31976]],194921:[[31971]],194922:[[32e3]],194923:[[155526]],194924:[[32099]],194925:[[17153]],194926:[[32199]],194927:[[32258]],194928:[[32325]],194929:[[17204]],194930:[[156200]],194931:[[156231]],194932:[[17241]],194933:[[156377]],194934:[[32634]],194935:[[156478]],194936:[[32661]],194937:[[32762]],194938:[[32773]],194939:[[156890]],194940:[[156963]],194941:[[32864]],194942:[[157096]],194943:[[32880]],194944:[[144223]],194945:[[17365]],194946:[[32946]],194947:[[33027]],194948:[[17419]],194949:[[33086]],194950:[[23221]],194951:[[157607]],194952:[[157621]],194953:[[144275]],194954:[[144284]],194955:[[33281]],194956:[[33284]],194957:[[36766]],194958:[[17515]],194959:[[33425]],194960:[[33419]],194961:[[33437]],194962:[[21171]],194963:[[33457]],194964:[[33459]],194965:[[33469]],194966:[[33510]],194967:[[158524]],194968:[[33509]],194969:[[33565]],194970:[[33635]],194971:[[33709]],194972:[[33571]],194973:[[33725]],194974:[[33767]],194975:[[33879]],194976:[[33619]],194977:[[33738]],194978:[[33740]],194979:[[33756]],194980:[[158774]],194981:[[159083]],194982:[[158933]],194983:[[17707]],194984:[[34033]],194985:[[34035]],194986:[[34070]],194987:[[160714]],194988:[[34148]],194989:[[159532]],194990:[[17757]],194991:[[17761]],194992:[[159665]],194993:[[159954]],194994:[[17771]],194995:[[34384]],194996:[[34396]],194997:[[34407]],194998:[[34409]],194999:[[34473]],195e3:[[34440]],195001:[[34574]],195002:[[34530]],195003:[[34681]],195004:[[34600]],195005:[[34667]],195006:[[34694]],195007:[[17879]],195008:[[34785]],195009:[[34817]],195010:[[17913]],195011:[[34912]],195012:[[34915]],195013:[[161383]],195014:[[35031]],195015:[[35038]],195016:[[17973]],195017:[[35066]],195018:[[13499]],195019:[[161966]],195020:[[162150]],195021:[[18110]],195022:[[18119]],195023:[[35488]],195024:[[35565]],195025:[[35722]],195026:[[35925]],195027:[[162984]],195028:[[36011]],195029:[[36033]],195030:[[36123]],195031:[[36215]],195032:[[163631]],195033:[[133124]],195034:[[36299]],195035:[[36284]],195036:[[36336]],195037:[[133342]],195038:[[36564]],195039:[[36664]],195040:[[165330]],195041:[[165357]],195042:[[37012]],195043:[[37105]],195044:[[37137]],195045:[[165678]],195046:[[37147]],195047:[[37432]],195048:[[37591]],195049:[[37592]],195050:[[37500]],195051:[[37881]],195052:[[37909]],195053:[[166906]],195054:[[38283]],195055:[[18837]],195056:[[38327]],195057:[[167287]],195058:[[18918]],195059:[[38595]],195060:[[23986]],195061:[[38691]],195062:[[168261]],195063:[[168474]],195064:[[19054]],195065:[[19062]],195066:[[38880]],195067:[[168970]],195068:[[19122]],195069:[[169110]],195070:[[38923]],195071:[[38923]]},64e3:{64e3:[[20999]],64001:[[24230]],64002:[[25299]],64003:[[31958]],64004:[[23429]],64005:[[27934]],64006:[[26292]],64007:[[36667]],64008:[[34892]],64009:[[38477]],64010:[[35211]],64011:[[24275]],64012:[[20800]],64013:[[21952]],64016:[[22618]],64018:[[26228]],64021:[[20958]],64022:[[29482]],64023:[[30410]],64024:[[31036]],64025:[[31070]],64026:[[31077]],64027:[[31119]],64028:[[38742]],64029:[[31934]],64030:[[32701]],64032:[[34322]],64034:[[35576]],64037:[[36920]],64038:[[37117]],64042:[[39151]],64043:[[39164]],64044:[[39208]],64045:[[40372]],64046:[[37086]],64047:[[38583]],64048:[[20398]],64049:[[20711]],64050:[[20813]],64051:[[21193]],64052:[[21220]],64053:[[21329]],64054:[[21917]],64055:[[22022]],64056:[[22120]],64057:[[22592]],64058:[[22696]],64059:[[23652]],64060:[[23662]],64061:[[24724]],64062:[[24936]],64063:[[24974]],64064:[[25074]],64065:[[25935]],64066:[[26082]],64067:[[26257]],64068:[[26757]],64069:[[28023]],64070:[[28186]],64071:[[28450]],64072:[[29038]],64073:[[29227]],64074:[[29730]],64075:[[30865]],64076:[[31038]],64077:[[31049]],64078:[[31048]],64079:[[31056]],64080:[[31062]],64081:[[31069]],64082:[[31117]],64083:[[31118]],64084:[[31296]],64085:[[31361]],64086:[[31680]],64087:[[32244]],64088:[[32265]],64089:[[32321]],64090:[[32626]],64091:[[32773]],64092:[[33261]],64093:[[33401]],64094:[[33401]],64095:[[33879]],64096:[[35088]],64097:[[35222]],64098:[[35585]],64099:[[35641]],64100:[[36051]],64101:[[36104]],64102:[[36790]],64103:[[36920]],64104:[[38627]],64105:[[38911]],64106:[[38971]],64107:[[24693]],64108:[[148206]],64109:[[33304]],64112:[[20006]],64113:[[20917]],64114:[[20840]],64115:[[20352]],64116:[[20805]],64117:[[20864]],64118:[[21191]],64119:[[21242]],64120:[[21917]],64121:[[21845]],64122:[[21913]],64123:[[21986]],64124:[[22618]],64125:[[22707]],64126:[[22852]],64127:[[22868]],64128:[[23138]],64129:[[23336]],64130:[[24274]],64131:[[24281]],64132:[[24425]],64133:[[24493]],64134:[[24792]],64135:[[24910]],64136:[[24840]],64137:[[24974]],64138:[[24928]],64139:[[25074]],64140:[[25140]],64141:[[25540]],64142:[[25628]],64143:[[25682]],64144:[[25942]],64145:[[26228]],64146:[[26391]],64147:[[26395]],64148:[[26454]],64149:[[27513]],64150:[[27578]],64151:[[27969]],64152:[[28379]],64153:[[28363]],64154:[[28450]],64155:[[28702]],64156:[[29038]],64157:[[30631]],64158:[[29237]],64159:[[29359]],64160:[[29482]],64161:[[29809]],64162:[[29958]],64163:[[30011]],64164:[[30237]],64165:[[30239]],64166:[[30410]],64167:[[30427]],64168:[[30452]],64169:[[30538]],64170:[[30528]],64171:[[30924]],64172:[[31409]],64173:[[31680]],64174:[[31867]],64175:[[32091]],64176:[[32244]],64177:[[32574]],64178:[[32773]],64179:[[33618]],64180:[[33775]],64181:[[34681]],64182:[[35137]],64183:[[35206]],64184:[[35222]],64185:[[35519]],64186:[[35576]],64187:[[35531]],64188:[[35585]],64189:[[35582]],64190:[[35565]],64191:[[35641]],64192:[[35722]],64193:[[36104]],64194:[[36664]],64195:[[36978]],64196:[[37273]],64197:[[37494]],64198:[[38524]],64199:[[38627]],64200:[[38742]],64201:[[38875]],64202:[[38911]],64203:[[38923]],64204:[[38971]],64205:[[39698]],64206:[[40860]],64207:[[141386]],64208:[[141380]],64209:[[144341]],64210:[[15261]],64211:[[16408]],64212:[[16441]],64213:[[152137]],64214:[[154832]],64215:[[163539]],64216:[[40771]],64217:[[40846]],195072:[[38953]],195073:[[169398]],195074:[[39138]],195075:[[19251]],195076:[[39209]],195077:[[39335]],195078:[[39362]],195079:[[39422]],195080:[[19406]],195081:[[170800]],195082:[[39698]],195083:[[4e4]],195084:[[40189]],195085:[[19662]],195086:[[19693]],195087:[[40295]],195088:[[172238]],195089:[[19704]],195090:[[172293]],195091:[[172558]],195092:[[172689]],195093:[[40635]],195094:[[19798]],195095:[[40697]],195096:[[40702]],195097:[[40709]],195098:[[40719]],195099:[[40726]],195100:[[40763]],195101:[[173568]]},64256:{64256:[[102,102],256],64257:[[102,105],256],64258:[[102,108],256],64259:[[102,102,105],256],64260:[[102,102,108],256],64261:[[383,116],256],64262:[[115,116],256],64275:[[1396,1398],256],64276:[[1396,1381],256],64277:[[1396,1387],256],64278:[[1406,1398],256],64279:[[1396,1389],256],64285:[[1497,1460],512],64286:[,26],64287:[[1522,1463],512],64288:[[1506],256],64289:[[1488],256],64290:[[1491],256],64291:[[1492],256],64292:[[1499],256],64293:[[1500],256],64294:[[1501],256],64295:[[1512],256],64296:[[1514],256],64297:[[43],256],64298:[[1513,1473],512],64299:[[1513,1474],512],64300:[[64329,1473],512],64301:[[64329,1474],512],64302:[[1488,1463],512],64303:[[1488,1464],512],64304:[[1488,1468],512],64305:[[1489,1468],512],64306:[[1490,1468],512],64307:[[1491,1468],512],64308:[[1492,1468],512],64309:[[1493,1468],512],64310:[[1494,1468],512],64312:[[1496,1468],512],64313:[[1497,1468],512],64314:[[1498,1468],512],64315:[[1499,1468],512],64316:[[1500,1468],512],64318:[[1502,1468],512],64320:[[1504,1468],512],64321:[[1505,1468],512],64323:[[1507,1468],512],64324:[[1508,1468],512],64326:[[1510,1468],512],64327:[[1511,1468],512],64328:[[1512,1468],512],64329:[[1513,1468],512],64330:[[1514,1468],512],64331:[[1493,1465],512],64332:[[1489,1471],512],64333:[[1499,1471],512],64334:[[1508,1471],512],64335:[[1488,1500],256],64336:[[1649],256],64337:[[1649],256],64338:[[1659],256],64339:[[1659],256],64340:[[1659],256],64341:[[1659],256],64342:[[1662],256],64343:[[1662],256],64344:[[1662],256],64345:[[1662],256],64346:[[1664],256],64347:[[1664],256],64348:[[1664],256],64349:[[1664],256],64350:[[1658],256],64351:[[1658],256],64352:[[1658],256],64353:[[1658],256],64354:[[1663],256],64355:[[1663],256],64356:[[1663],256],64357:[[1663],256],64358:[[1657],256],64359:[[1657],256],64360:[[1657],256],64361:[[1657],256],64362:[[1700],256],64363:[[1700],256],64364:[[1700],256],64365:[[1700],256],64366:[[1702],256],64367:[[1702],256],64368:[[1702],256],64369:[[1702],256],64370:[[1668],256],64371:[[1668],256],64372:[[1668],256],64373:[[1668],256],64374:[[1667],256],64375:[[1667],256],64376:[[1667],256],64377:[[1667],256],64378:[[1670],256],64379:[[1670],256],64380:[[1670],256],64381:[[1670],256],64382:[[1671],256],64383:[[1671],256],64384:[[1671],256],64385:[[1671],256],64386:[[1677],256],64387:[[1677],256],64388:[[1676],256],64389:[[1676],256],64390:[[1678],256],64391:[[1678],256],64392:[[1672],256],64393:[[1672],256],64394:[[1688],256],64395:[[1688],256],64396:[[1681],256],64397:[[1681],256],64398:[[1705],256],64399:[[1705],256],64400:[[1705],256],64401:[[1705],256],64402:[[1711],256],64403:[[1711],256],64404:[[1711],256],64405:[[1711],256],64406:[[1715],256],64407:[[1715],256],64408:[[1715],256],64409:[[1715],256],64410:[[1713],256],64411:[[1713],256],64412:[[1713],256],64413:[[1713],256],64414:[[1722],256],64415:[[1722],256],64416:[[1723],256],64417:[[1723],256],64418:[[1723],256],64419:[[1723],256],64420:[[1728],256],64421:[[1728],256],64422:[[1729],256],64423:[[1729],256],64424:[[1729],256],64425:[[1729],256],64426:[[1726],256],64427:[[1726],256],64428:[[1726],256],64429:[[1726],256],64430:[[1746],256],64431:[[1746],256],64432:[[1747],256],64433:[[1747],256],64467:[[1709],256],64468:[[1709],256],64469:[[1709],256],64470:[[1709],256],64471:[[1735],256],64472:[[1735],256],64473:[[1734],256],64474:[[1734],256],64475:[[1736],256],64476:[[1736],256],64477:[[1655],256],64478:[[1739],256],64479:[[1739],256],64480:[[1733],256],64481:[[1733],256],64482:[[1737],256],64483:[[1737],256],64484:[[1744],256],64485:[[1744],256],64486:[[1744],256],64487:[[1744],256],64488:[[1609],256],64489:[[1609],256],64490:[[1574,1575],256],64491:[[1574,1575],256],64492:[[1574,1749],256],64493:[[1574,1749],256],64494:[[1574,1608],256],64495:[[1574,1608],256],64496:[[1574,1735],256],64497:[[1574,1735],256],64498:[[1574,1734],256],64499:[[1574,1734],256],64500:[[1574,1736],256],64501:[[1574,1736],256],64502:[[1574,1744],256],64503:[[1574,1744],256],64504:[[1574,1744],256],64505:[[1574,1609],256],64506:[[1574,1609],256],64507:[[1574,1609],256],64508:[[1740],256],64509:[[1740],256],64510:[[1740],256],64511:[[1740],256]},64512:{64512:[[1574,1580],256],64513:[[1574,1581],256],64514:[[1574,1605],256],64515:[[1574,1609],256],64516:[[1574,1610],256],64517:[[1576,1580],256],64518:[[1576,1581],256],64519:[[1576,1582],256],64520:[[1576,1605],256],64521:[[1576,1609],256],64522:[[1576,1610],256],64523:[[1578,1580],256],64524:[[1578,1581],256],64525:[[1578,1582],256],64526:[[1578,1605],256],64527:[[1578,1609],256],64528:[[1578,1610],256],64529:[[1579,1580],256],64530:[[1579,1605],256],64531:[[1579,1609],256],64532:[[1579,1610],256],64533:[[1580,1581],256],64534:[[1580,1605],256],64535:[[1581,1580],256],64536:[[1581,1605],256],64537:[[1582,1580],256],64538:[[1582,1581],256],64539:[[1582,1605],256],64540:[[1587,1580],256],64541:[[1587,1581],256],64542:[[1587,1582],256],64543:[[1587,1605],256],64544:[[1589,1581],256],64545:[[1589,1605],256],64546:[[1590,1580],256],64547:[[1590,1581],256],64548:[[1590,1582],256],64549:[[1590,1605],256],64550:[[1591,1581],256],64551:[[1591,1605],256],64552:[[1592,1605],256],64553:[[1593,1580],256],64554:[[1593,1605],256],64555:[[1594,1580],256],64556:[[1594,1605],256],64557:[[1601,1580],256],64558:[[1601,1581],256],64559:[[1601,1582],256],64560:[[1601,1605],256],64561:[[1601,1609],256],64562:[[1601,1610],256],64563:[[1602,1581],256],64564:[[1602,1605],256],64565:[[1602,1609],256],64566:[[1602,1610],256],64567:[[1603,1575],256],64568:[[1603,1580],256],64569:[[1603,1581],256],64570:[[1603,1582],256],64571:[[1603,1604],256],64572:[[1603,1605],256],64573:[[1603,1609],256],64574:[[1603,1610],256],64575:[[1604,1580],256],64576:[[1604,1581],256],64577:[[1604,1582],256],64578:[[1604,1605],256],64579:[[1604,1609],256],64580:[[1604,1610],256],64581:[[1605,1580],256],64582:[[1605,1581],256],64583:[[1605,1582],256],64584:[[1605,1605],256],64585:[[1605,1609],256],64586:[[1605,1610],256],64587:[[1606,1580],256],64588:[[1606,1581],256],64589:[[1606,1582],256],64590:[[1606,1605],256],64591:[[1606,1609],256],64592:[[1606,1610],256],64593:[[1607,1580],256],64594:[[1607,1605],256],64595:[[1607,1609],256],64596:[[1607,1610],256],64597:[[1610,1580],256],64598:[[1610,1581],256],64599:[[1610,1582],256],64600:[[1610,1605],256],64601:[[1610,1609],256],64602:[[1610,1610],256],64603:[[1584,1648],256],64604:[[1585,1648],256],64605:[[1609,1648],256],64606:[[32,1612,1617],256],64607:[[32,1613,1617],256],64608:[[32,1614,1617],256],64609:[[32,1615,1617],256],64610:[[32,1616,1617],256],64611:[[32,1617,1648],256],64612:[[1574,1585],256],64613:[[1574,1586],256],64614:[[1574,1605],256],64615:[[1574,1606],256],64616:[[1574,1609],256],64617:[[1574,1610],256],64618:[[1576,1585],256],64619:[[1576,1586],256],64620:[[1576,1605],256],64621:[[1576,1606],256],64622:[[1576,1609],256],64623:[[1576,1610],256],64624:[[1578,1585],256],64625:[[1578,1586],256],64626:[[1578,1605],256],64627:[[1578,1606],256],64628:[[1578,1609],256],64629:[[1578,1610],256],64630:[[1579,1585],256],64631:[[1579,1586],256],64632:[[1579,1605],256],64633:[[1579,1606],256],64634:[[1579,1609],256],64635:[[1579,1610],256],64636:[[1601,1609],256],64637:[[1601,1610],256],64638:[[1602,1609],256],64639:[[1602,1610],256],64640:[[1603,1575],256],64641:[[1603,1604],256],64642:[[1603,1605],256],64643:[[1603,1609],256],64644:[[1603,1610],256],64645:[[1604,1605],256],64646:[[1604,1609],256],64647:[[1604,1610],256],64648:[[1605,1575],256],64649:[[1605,1605],256],64650:[[1606,1585],256],64651:[[1606,1586],256],64652:[[1606,1605],256],64653:[[1606,1606],256],64654:[[1606,1609],256],64655:[[1606,1610],256],64656:[[1609,1648],256],64657:[[1610,1585],256],64658:[[1610,1586],256],64659:[[1610,1605],256],64660:[[1610,1606],256],64661:[[1610,1609],256],64662:[[1610,1610],256],64663:[[1574,1580],256],64664:[[1574,1581],256],64665:[[1574,1582],256],64666:[[1574,1605],256],64667:[[1574,1607],256],64668:[[1576,1580],256],64669:[[1576,1581],256],64670:[[1576,1582],256],64671:[[1576,1605],256],64672:[[1576,1607],256],64673:[[1578,1580],256],64674:[[1578,1581],256],64675:[[1578,1582],256],64676:[[1578,1605],256],64677:[[1578,1607],256],64678:[[1579,1605],256],64679:[[1580,1581],256],64680:[[1580,1605],256],64681:[[1581,1580],256],64682:[[1581,1605],256],64683:[[1582,1580],256],64684:[[1582,1605],256],64685:[[1587,1580],256],64686:[[1587,1581],256],64687:[[1587,1582],256],64688:[[1587,1605],256],64689:[[1589,1581],256],64690:[[1589,1582],256],64691:[[1589,1605],256],64692:[[1590,1580],256],64693:[[1590,1581],256],64694:[[1590,1582],256],64695:[[1590,1605],256],64696:[[1591,1581],256],64697:[[1592,1605],256],64698:[[1593,1580],256],64699:[[1593,1605],256],64700:[[1594,1580],256],64701:[[1594,1605],256],64702:[[1601,1580],256],64703:[[1601,1581],256],64704:[[1601,1582],256],64705:[[1601,1605],256],64706:[[1602,1581],256],64707:[[1602,1605],256],64708:[[1603,1580],256],64709:[[1603,1581],256],64710:[[1603,1582],256],64711:[[1603,1604],256],64712:[[1603,1605],256],64713:[[1604,1580],256],64714:[[1604,1581],256],64715:[[1604,1582],256],64716:[[1604,1605],256],64717:[[1604,1607],256],64718:[[1605,1580],256],64719:[[1605,1581],256],64720:[[1605,1582],256],64721:[[1605,1605],256],64722:[[1606,1580],256],64723:[[1606,1581],256],64724:[[1606,1582],256],64725:[[1606,1605],256],64726:[[1606,1607],256],64727:[[1607,1580],256],64728:[[1607,1605],256],64729:[[1607,1648],256],64730:[[1610,1580],256],64731:[[1610,1581],256],64732:[[1610,1582],256],64733:[[1610,1605],256],64734:[[1610,1607],256],64735:[[1574,1605],256],64736:[[1574,1607],256],64737:[[1576,1605],256],64738:[[1576,1607],256],64739:[[1578,1605],256],64740:[[1578,1607],256],64741:[[1579,1605],256],64742:[[1579,1607],256],64743:[[1587,1605],256],64744:[[1587,1607],256],64745:[[1588,1605],256],64746:[[1588,1607],256],64747:[[1603,1604],256],64748:[[1603,1605],256],64749:[[1604,1605],256],64750:[[1606,1605],256],64751:[[1606,1607],256],64752:[[1610,1605],256],64753:[[1610,1607],256],64754:[[1600,1614,1617],256],64755:[[1600,1615,1617],256],64756:[[1600,1616,1617],256],64757:[[1591,1609],256],64758:[[1591,1610],256],64759:[[1593,1609],256],64760:[[1593,1610],256],64761:[[1594,1609],256],64762:[[1594,1610],256],64763:[[1587,1609],256],64764:[[1587,1610],256],64765:[[1588,1609],256],64766:[[1588,1610],256],64767:[[1581,1609],256]},64768:{64768:[[1581,1610],256],64769:[[1580,1609],256],64770:[[1580,1610],256],64771:[[1582,1609],256],64772:[[1582,1610],256],64773:[[1589,1609],256],64774:[[1589,1610],256],64775:[[1590,1609],256],64776:[[1590,1610],256],64777:[[1588,1580],256],64778:[[1588,1581],256],64779:[[1588,1582],256],64780:[[1588,1605],256],64781:[[1588,1585],256],64782:[[1587,1585],256],64783:[[1589,1585],256],64784:[[1590,1585],256],64785:[[1591,1609],256],64786:[[1591,1610],256],64787:[[1593,1609],256],64788:[[1593,1610],256],64789:[[1594,1609],256],64790:[[1594,1610],256],64791:[[1587,1609],256],64792:[[1587,1610],256],64793:[[1588,1609],256],64794:[[1588,1610],256],64795:[[1581,1609],256],64796:[[1581,1610],256],64797:[[1580,1609],256],64798:[[1580,1610],256],64799:[[1582,1609],256],64800:[[1582,1610],256],64801:[[1589,1609],256],64802:[[1589,1610],256],64803:[[1590,1609],256],64804:[[1590,1610],256],64805:[[1588,1580],256],64806:[[1588,1581],256],64807:[[1588,1582],256],64808:[[1588,1605],256],64809:[[1588,1585],256],64810:[[1587,1585],256],64811:[[1589,1585],256],64812:[[1590,1585],256],64813:[[1588,1580],256],64814:[[1588,1581],256],64815:[[1588,1582],256],64816:[[1588,1605],256],64817:[[1587,1607],256],64818:[[1588,1607],256],64819:[[1591,1605],256],64820:[[1587,1580],256],64821:[[1587,1581],256],64822:[[1587,1582],256],64823:[[1588,1580],256],64824:[[1588,1581],256],64825:[[1588,1582],256],64826:[[1591,1605],256],64827:[[1592,1605],256],64828:[[1575,1611],256],64829:[[1575,1611],256],64848:[[1578,1580,1605],256],64849:[[1578,1581,1580],256],64850:[[1578,1581,1580],256],64851:[[1578,1581,1605],256],64852:[[1578,1582,1605],256],64853:[[1578,1605,1580],256],64854:[[1578,1605,1581],256],64855:[[1578,1605,1582],256],64856:[[1580,1605,1581],256],64857:[[1580,1605,1581],256],64858:[[1581,1605,1610],256],64859:[[1581,1605,1609],256],64860:[[1587,1581,1580],256],64861:[[1587,1580,1581],256],64862:[[1587,1580,1609],256],64863:[[1587,1605,1581],256],64864:[[1587,1605,1581],256],64865:[[1587,1605,1580],256],64866:[[1587,1605,1605],256],64867:[[1587,1605,1605],256],64868:[[1589,1581,1581],256],64869:[[1589,1581,1581],256],64870:[[1589,1605,1605],256],64871:[[1588,1581,1605],256],64872:[[1588,1581,1605],256],64873:[[1588,1580,1610],256],64874:[[1588,1605,1582],256],64875:[[1588,1605,1582],256],64876:[[1588,1605,1605],256],64877:[[1588,1605,1605],256],64878:[[1590,1581,1609],256],64879:[[1590,1582,1605],256],64880:[[1590,1582,1605],256],64881:[[1591,1605,1581],256],64882:[[1591,1605,1581],256],64883:[[1591,1605,1605],256],64884:[[1591,1605,1610],256],64885:[[1593,1580,1605],256],64886:[[1593,1605,1605],256],64887:[[1593,1605,1605],256],64888:[[1593,1605,1609],256],64889:[[1594,1605,1605],256],64890:[[1594,1605,1610],256],64891:[[1594,1605,1609],256],64892:[[1601,1582,1605],256],64893:[[1601,1582,1605],256],64894:[[1602,1605,1581],256],64895:[[1602,1605,1605],256],64896:[[1604,1581,1605],256],64897:[[1604,1581,1610],256],64898:[[1604,1581,1609],256],64899:[[1604,1580,1580],256],64900:[[1604,1580,1580],256],64901:[[1604,1582,1605],256],64902:[[1604,1582,1605],256],64903:[[1604,1605,1581],256],64904:[[1604,1605,1581],256],64905:[[1605,1581,1580],256],64906:[[1605,1581,1605],256],64907:[[1605,1581,1610],256],64908:[[1605,1580,1581],256],64909:[[1605,1580,1605],256],64910:[[1605,1582,1580],256],64911:[[1605,1582,1605],256],64914:[[1605,1580,1582],256],64915:[[1607,1605,1580],256],64916:[[1607,1605,1605],256],64917:[[1606,1581,1605],256],64918:[[1606,1581,1609],256],64919:[[1606,1580,1605],256],64920:[[1606,1580,1605],256],64921:[[1606,1580,1609],256],64922:[[1606,1605,1610],256],64923:[[1606,1605,1609],256],64924:[[1610,1605,1605],256],64925:[[1610,1605,1605],256],64926:[[1576,1582,1610],256],64927:[[1578,1580,1610],256],64928:[[1578,1580,1609],256],64929:[[1578,1582,1610],256],64930:[[1578,1582,1609],256],64931:[[1578,1605,1610],256],64932:[[1578,1605,1609],256],64933:[[1580,1605,1610],256],64934:[[1580,1581,1609],256],64935:[[1580,1605,1609],256],64936:[[1587,1582,1609],256],64937:[[1589,1581,1610],256],64938:[[1588,1581,1610],256],64939:[[1590,1581,1610],256],64940:[[1604,1580,1610],256],64941:[[1604,1605,1610],256],64942:[[1610,1581,1610],256],64943:[[1610,1580,1610],256],64944:[[1610,1605,1610],256],64945:[[1605,1605,1610],256],64946:[[1602,1605,1610],256],64947:[[1606,1581,1610],256],64948:[[1602,1605,1581],256],64949:[[1604,1581,1605],256],64950:[[1593,1605,1610],256],64951:[[1603,1605,1610],256],64952:[[1606,1580,1581],256],64953:[[1605,1582,1610],256],64954:[[1604,1580,1605],256],64955:[[1603,1605,1605],256],64956:[[1604,1580,1605],256],64957:[[1606,1580,1581],256],64958:[[1580,1581,1610],256],64959:[[1581,1580,1610],256],64960:[[1605,1580,1610],256],64961:[[1601,1605,1610],256],64962:[[1576,1581,1610],256],64963:[[1603,1605,1605],256],64964:[[1593,1580,1605],256],64965:[[1589,1605,1605],256],64966:[[1587,1582,1610],256],64967:[[1606,1580,1610],256],65008:[[1589,1604,1746],256],65009:[[1602,1604,1746],256],65010:[[1575,1604,1604,1607],256],65011:[[1575,1603,1576,1585],256],65012:[[1605,1581,1605,1583],256],65013:[[1589,1604,1593,1605],256],65014:[[1585,1587,1608,1604],256],65015:[[1593,1604,1610,1607],256],65016:[[1608,1587,1604,1605],256],65017:[[1589,1604,1609],256],65018:[[1589,1604,1609,32,1575,1604,1604,1607,32,1593,1604,1610,1607,32,1608,1587,1604,1605],256],65019:[[1580,1604,32,1580,1604,1575,1604,1607],256],65020:[[1585,1740,1575,1604],256]},65024:{65040:[[44],256],65041:[[12289],256],65042:[[12290],256],65043:[[58],256],65044:[[59],256],65045:[[33],256],65046:[[63],256],65047:[[12310],256],65048:[[12311],256],65049:[[8230],256],65056:[,230],65057:[,230],65058:[,230],65059:[,230],65060:[,230],65061:[,230],65062:[,230],65063:[,220],65064:[,220],65065:[,220],65066:[,220],65067:[,220],65068:[,220],65069:[,220],65072:[[8229],256],65073:[[8212],256],65074:[[8211],256],65075:[[95],256],65076:[[95],256],65077:[[40],256],65078:[[41],256],65079:[[123],256],65080:[[125],256],65081:[[12308],256],65082:[[12309],256],65083:[[12304],256],65084:[[12305],256],65085:[[12298],256],65086:[[12299],256],65087:[[12296],256],65088:[[12297],256],65089:[[12300],256],65090:[[12301],256],65091:[[12302],256],65092:[[12303],256],65095:[[91],256],65096:[[93],256],65097:[[8254],256],65098:[[8254],256],65099:[[8254],256],65100:[[8254],256],65101:[[95],256],65102:[[95],256],65103:[[95],256],65104:[[44],256],65105:[[12289],256],65106:[[46],256],65108:[[59],256],65109:[[58],256],65110:[[63],256],65111:[[33],256],65112:[[8212],256],65113:[[40],256],65114:[[41],256],65115:[[123],256],65116:[[125],256],65117:[[12308],256],65118:[[12309],256],65119:[[35],256],65120:[[38],256],65121:[[42],256],65122:[[43],256],65123:[[45],256],65124:[[60],256],65125:[[62],256],65126:[[61],256],65128:[[92],256],65129:[[36],256],65130:[[37],256],65131:[[64],256],65136:[[32,1611],256],65137:[[1600,1611],256],65138:[[32,1612],256],65140:[[32,1613],256],65142:[[32,1614],256],65143:[[1600,1614],256],65144:[[32,1615],256],65145:[[1600,1615],256],65146:[[32,1616],256],65147:[[1600,1616],256],65148:[[32,1617],256],65149:[[1600,1617],256],65150:[[32,1618],256],65151:[[1600,1618],256],65152:[[1569],256],65153:[[1570],256],65154:[[1570],256],65155:[[1571],256],65156:[[1571],256],65157:[[1572],256],65158:[[1572],256],65159:[[1573],256],65160:[[1573],256],65161:[[1574],256],65162:[[1574],256],65163:[[1574],256],65164:[[1574],256],65165:[[1575],256],65166:[[1575],256],65167:[[1576],256],65168:[[1576],256],65169:[[1576],256],65170:[[1576],256],65171:[[1577],256],65172:[[1577],256],65173:[[1578],256],65174:[[1578],256],65175:[[1578],256],65176:[[1578],256],65177:[[1579],256],65178:[[1579],256],65179:[[1579],256],65180:[[1579],256],65181:[[1580],256],65182:[[1580],256],65183:[[1580],256],65184:[[1580],256],65185:[[1581],256],65186:[[1581],256],65187:[[1581],256],65188:[[1581],256],65189:[[1582],256],65190:[[1582],256],65191:[[1582],256],65192:[[1582],256],65193:[[1583],256],65194:[[1583],256],65195:[[1584],256],65196:[[1584],256],65197:[[1585],256],65198:[[1585],256],65199:[[1586],256],65200:[[1586],256],65201:[[1587],256],65202:[[1587],256],65203:[[1587],256],65204:[[1587],256],65205:[[1588],256],65206:[[1588],256],65207:[[1588],256],65208:[[1588],256],65209:[[1589],256],65210:[[1589],256],65211:[[1589],256],65212:[[1589],256],65213:[[1590],256],65214:[[1590],256],65215:[[1590],256],65216:[[1590],256],65217:[[1591],256],65218:[[1591],256],65219:[[1591],256],65220:[[1591],256],65221:[[1592],256],65222:[[1592],256],65223:[[1592],256],65224:[[1592],256],65225:[[1593],256],65226:[[1593],256],65227:[[1593],256],65228:[[1593],256],65229:[[1594],256],65230:[[1594],256],65231:[[1594],256],65232:[[1594],256],65233:[[1601],256],65234:[[1601],256],65235:[[1601],256],65236:[[1601],256],65237:[[1602],256],65238:[[1602],256],65239:[[1602],256],65240:[[1602],256],65241:[[1603],256],65242:[[1603],256],65243:[[1603],256],65244:[[1603],256],65245:[[1604],256],65246:[[1604],256],65247:[[1604],256],65248:[[1604],256],65249:[[1605],256],65250:[[1605],256],65251:[[1605],256],65252:[[1605],256],65253:[[1606],256],65254:[[1606],256],65255:[[1606],256],65256:[[1606],256],65257:[[1607],256],65258:[[1607],256],65259:[[1607],256],65260:[[1607],256],65261:[[1608],256],65262:[[1608],256],65263:[[1609],256],65264:[[1609],256],65265:[[1610],256],65266:[[1610],256],65267:[[1610],256],65268:[[1610],256],65269:[[1604,1570],256],65270:[[1604,1570],256],65271:[[1604,1571],256],65272:[[1604,1571],256],65273:[[1604,1573],256],65274:[[1604,1573],256],65275:[[1604,1575],256],65276:[[1604,1575],256]},65280:{65281:[[33],256],65282:[[34],256],65283:[[35],256],65284:[[36],256],65285:[[37],256],65286:[[38],256],65287:[[39],256],65288:[[40],256],65289:[[41],256],65290:[[42],256],65291:[[43],256],65292:[[44],256],65293:[[45],256],65294:[[46],256],65295:[[47],256],65296:[[48],256],65297:[[49],256],65298:[[50],256],65299:[[51],256],65300:[[52],256],65301:[[53],256],65302:[[54],256],65303:[[55],256],65304:[[56],256],65305:[[57],256],65306:[[58],256],65307:[[59],256],65308:[[60],256],65309:[[61],256],65310:[[62],256],65311:[[63],256],65312:[[64],256],65313:[[65],256],65314:[[66],256],65315:[[67],256],65316:[[68],256],65317:[[69],256],65318:[[70],256],65319:[[71],256],65320:[[72],256],65321:[[73],256],65322:[[74],256],65323:[[75],256],65324:[[76],256],65325:[[77],256],65326:[[78],256],65327:[[79],256],65328:[[80],256],65329:[[81],256],65330:[[82],256],65331:[[83],256],65332:[[84],256],65333:[[85],256],65334:[[86],256],65335:[[87],256],65336:[[88],256],65337:[[89],256],65338:[[90],256],65339:[[91],256],65340:[[92],256],65341:[[93],256],65342:[[94],256],65343:[[95],256],65344:[[96],256],65345:[[97],256],65346:[[98],256],65347:[[99],256],65348:[[100],256],65349:[[101],256],65350:[[102],256],65351:[[103],256],65352:[[104],256],65353:[[105],256],65354:[[106],256],65355:[[107],256],65356:[[108],256],65357:[[109],256],65358:[[110],256],65359:[[111],256],65360:[[112],256],65361:[[113],256],65362:[[114],256],65363:[[115],256],65364:[[116],256],65365:[[117],256],65366:[[118],256],65367:[[119],256],65368:[[120],256],65369:[[121],256],65370:[[122],256],65371:[[123],256],65372:[[124],256],65373:[[125],256],65374:[[126],256],65375:[[10629],256],65376:[[10630],256],65377:[[12290],256],65378:[[12300],256],65379:[[12301],256],65380:[[12289],256],65381:[[12539],256],65382:[[12530],256],65383:[[12449],256],65384:[[12451],256],65385:[[12453],256],65386:[[12455],256],65387:[[12457],256],65388:[[12515],256],65389:[[12517],256],65390:[[12519],256],65391:[[12483],256],65392:[[12540],256],65393:[[12450],256],65394:[[12452],256],65395:[[12454],256],65396:[[12456],256],65397:[[12458],256],65398:[[12459],256],65399:[[12461],256],65400:[[12463],256],65401:[[12465],256],65402:[[12467],256],65403:[[12469],256],65404:[[12471],256],65405:[[12473],256],65406:[[12475],256],65407:[[12477],256],65408:[[12479],256],65409:[[12481],256],65410:[[12484],256],65411:[[12486],256],65412:[[12488],256],65413:[[12490],256],65414:[[12491],256],65415:[[12492],256],65416:[[12493],256],65417:[[12494],256],65418:[[12495],256],65419:[[12498],256],65420:[[12501],256],65421:[[12504],256],65422:[[12507],256],65423:[[12510],256],65424:[[12511],256],65425:[[12512],256],65426:[[12513],256],65427:[[12514],256],65428:[[12516],256],65429:[[12518],256],65430:[[12520],256],65431:[[12521],256],65432:[[12522],256],65433:[[12523],256],65434:[[12524],256],65435:[[12525],256],65436:[[12527],256],65437:[[12531],256],65438:[[12441],256],65439:[[12442],256],65440:[[12644],256],65441:[[12593],256],65442:[[12594],256],65443:[[12595],256],65444:[[12596],256],65445:[[12597],256],65446:[[12598],256],65447:[[12599],256],65448:[[12600],256],65449:[[12601],256],65450:[[12602],256],65451:[[12603],256],65452:[[12604],256],65453:[[12605],256],65454:[[12606],256],65455:[[12607],256],65456:[[12608],256],65457:[[12609],256],65458:[[12610],256],65459:[[12611],256],65460:[[12612],256],65461:[[12613],256],65462:[[12614],256],65463:[[12615],256],65464:[[12616],256],65465:[[12617],256],65466:[[12618],256],65467:[[12619],256],65468:[[12620],256],65469:[[12621],256],65470:[[12622],256],65474:[[12623],256],65475:[[12624],256],65476:[[12625],256],65477:[[12626],256],65478:[[12627],256],65479:[[12628],256],65482:[[12629],256],65483:[[12630],256],65484:[[12631],256],65485:[[12632],256],65486:[[12633],256],65487:[[12634],256],65490:[[12635],256],65491:[[12636],256],65492:[[12637],256],65493:[[12638],256],65494:[[12639],256],65495:[[12640],256],65498:[[12641],256],65499:[[12642],256],65500:[[12643],256],65504:[[162],256],65505:[[163],256],65506:[[172],256],65507:[[175],256],65508:[[166],256],65509:[[165],256],65510:[[8361],256],65512:[[9474],256],65513:[[8592],256],65514:[[8593],256],65515:[[8594],256],65516:[[8595],256],65517:[[9632],256],65518:[[9675],256]}},t.exports={nfc:function(t){return u("NFC",t)},nfd:function(t){return u("NFD",t)},nfkc:function(t){return u("NFKC",t)},nfkd:function(t){return u("NFKD",t)}}}()},function(t,e,i){"use strict";(function(e){var i=4294967296,r=2147483648,s=2147483647,n=null;t.exports=class t{constructor(t){void 0===t&&(t=(new Date).getTime()),this.mt=new Array(624),this.mti=625,this.seed(t)}seed(t){var e;for(this.mt[0]=t>>>0,this.mti=1;this.mti<624;this.mti++)e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30,this.mt[this.mti]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0}seedArray(t){var e,i=1,r=0,s=t.length<624?624:t.length;for(this.seed(19650218);0<s;s--)e=this.mt[i-1]^this.mt[i-1]>>>30,this.mt[i]=(this.mt[i]^(1664525*((4294901760&e)>>>16)<<16)+1664525*(65535&e))+t[r]+r,this.mt[i]>>>=0,r++,624<=++i&&(this.mt[0]=this.mt[623],i=1),r>=t.length&&(r=0);for(s=623;s;s--)e=this.mt[i-1]^this.mt[i-1]>>>30,this.mt[i]=(this.mt[i]^(1566083941*((4294901760&e)>>>16)<<16)+1566083941*(65535&e))-i,this.mt[i]>>>=0,624<=++i&&(this.mt[0]=this.mt[623],i=1);this.mt[0]=2147483648}int(){var t,e,i=new Array(0,2567483615);if(624<=this.mti){for(625===this.mti&&this.seed(5489),e=0;e<227;e++)t=this.mt[e]&r|this.mt[e+1]&s,this.mt[e]=this.mt[e+397]^t>>>1^i[1&t];for(;e<623;e++)t=this.mt[e]&r|this.mt[e+1]&s,this.mt[e]=this.mt[e+-227]^t>>>1^i[1&t];t=this.mt[623]&r|this.mt[0]&s,this.mt[623]=this.mt[396]^t>>>1^i[1&t],this.mti=0}return t=this.mt[this.mti++],(t=(t=(t=(t^=t>>>11)^t<<7&2636928640)^t<<15&4022730752)^t>>>18)>>>0}randomBytes(t){var i=e.alloc(t);for(let e=0;e<t;e+=4)i.writeUInt32LE(this.int(),e);return i}int31(){return this.int()>>>1}real(){return this.int()*(1/(i-1))}realx(){return(this.int()+.5)*(1/i)}random(){return this.int()*(1/i)}rndHiRes(){return 1/9007199254740992*(67108864*(this.int()>>>5)+(this.int()>>>6))}static random(){return(n=n||new t).random()}}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * enforce.js - type enforcement for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(3);function s(t,e,i,r){t||(r=r||s,e&&!i&&n(e,r),n(`'${e=e||"value"}' must be a(n) ${i}.`,r))}function n(t,e){throw t=new TypeError(t),Error.captureStackTrace&&e&&Error.captureStackTrace(t,e),t}s.none=function t(e,i){s(null==e,i,"object",t)},s.nul=function t(e,i){s(null===e,i,"object",t)},s.undef=function t(e,i){s(void 0===e,i,"object",t)},s.str=function t(e,i){s("string"==typeof e,i,"string",t)},s.bool=function t(e,i){s("boolean"==typeof e,i,"boolean",t)},s.num=function t(e,i){s(r.isNumber(e),i,"number",t)},s.obj=function t(e,i){s(e&&"object"==typeof e&&!Array.isArray(e),i,"object",t)},s.array=function t(e,i){s(Array.isArray(e),i,"object",t)},s.func=function t(e,i){s("function"==typeof e,i,"function",t)},s.error=function t(e,i){s(e instanceof Error,i,"object",t)},s.regexp=function t(e,i){s(e&&"function"==typeof e.exec,i,"object",t)},s.buf=function t(i,r){s(e.isBuffer(i),r,"buffer",t)},s.len=function t(e,i,r){("string"==typeof e||e)&&e.length===i||n(`'${r=r||"value"}' must have a length of ${i}.`,t)},s.instance=function t(e,i,r){e instanceof i||n(`'${r=r||"value"}' must be an instance of ${i.name}.`,t)},s.uint=function t(e,i){s(r.isUInt(e),i,"uint",t)},s.int=function t(e,i){s(r.isInt(e),i,"int",t)},s.u8=function t(e,i){s(r.isU8(e),i,"uint8",t)},s.u16=function t(e,i){s(r.isU16(e),i,"uint16",t)},s.u32=function t(e,i){s(r.isU32(e),i,"uint32",t)},s.u64=function t(e,i){s(r.isU64(e),i,"uint64",t)},s.i8=function t(e,i){s(r.isI8(e),i,"int8",t)},s.i16=function t(e,i){s(r.isI16(e),i,"int16",t)},s.i32=function t(e,i){s(r.isI32(e),i,"int32",t)},s.i64=function t(e,i){s(r.isI64(e),i,"int64",t)},s.ufloat=function t(e,i){s(r.isUfloat(e),i,"positive float",t)},s.float=function t(e,i){s(r.isFloat(e),i,"float",t)},s.ascii=function t(e,i){s(r.isAscii(e),i,"ascii string",t)},s.hex=function t(e,i){s(r.isHex(e),i,"hex string",t)},s.hex160=function t(e,i){s(r.isHex160(e),i,"160 bit hex string",t)},s.hex256=function t(e,i){s(r.isHex256(e),i,"256 bit hex string",t)},s.base58=function t(e,i){s(r.isBase58(e),i,"base58 string",t)},t.exports=s}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * gcs.js - gcs filters for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(97).U64,n=i(8),o=i(252),a=e.alloc(0),h=new s(-1);function c(){this.n=0,this.p=0,this.m=new s(0),this.data=a}function u(){this.stream=[],this.remain=0}function l(t){this.stream=t,this.pos=0,this.remain=8}function f(t,e){return t.cmp(e)}function d(t,e){var[t,e]=o(t,e);return s.fromBits(t,e)}function p(t,e){for(const i of e.code)i.data&&0!==i.data.length&&t.push(i.data)}c.prototype.hash=function(t){var e=n.hash256(this.data);return"hex"===t?e.toString("hex"):e},c.prototype.header=function(t){return n.root256(this.hash(),t)},c.prototype.match=function(t,e){var i=new l(this.data),r=d(e,t).imod(this.m);let n=new s(0);for(;n.lt(r);){var o=this.readU64(i);if(o===h)return!1;if(o.iadd(n),o.eq(r))return!0;n=o}return!1},c.prototype.matchAny=function(t,e){r(0<e.length);var i=new l(this.data),n=new s(0),o=[];for(const i of e){var a=d(i,t).imod(this.m);o.push(a)}o.sort(f);let c=o[0],u=1;for(;;){var p=n.cmp(c);if(0===p)break;if(0<p){if(u<o.length){c=o[u],u+=1;continue}return!1}if((p=this.readU64(i))===h)return!1;n.iadd(p)}return!0},c.prototype.readU64=function(t){try{return this._readU64(t)}catch(t){if("EOF"===t.message)return h;throw t}},c.prototype._readU64=function(t){for(var e=new s(0);t.readBit();)e.iaddn(1);var i=t.readBits64(this.p);return e.ishln(this.p).ior(i)},c.prototype.toBytes=function(){return this.data},c.prototype.toNBytes=function(){var t=e.allocUnsafe(4+this.data.length);return t.writeUInt32BE(this.n,0,!0),this.data.copy(t,4),t},c.prototype.toPBytes=function(){var t=e.allocUnsafe(1+this.data.length);return t.writeUInt8(this.p,0,!0),this.data.copy(t,1),t},c.prototype.toNPBytes=function(){var t=e.allocUnsafe(5+this.data.length);return t.writeUInt32BE(this.n,0,!0),t.writeUInt8(this.p,4,!0),this.data.copy(t,5),t},c.prototype.toRaw=function(){return r(20===this.p),this.toNBytes()},c.prototype.fromItems=function(t,i,n){r("number"==typeof t&&isFinite(t)),r(0<=t&&t<=32),r(e.isBuffer(i)),r(16===i.length),r(Array.isArray(n)),r(0<n.length),r(n.length<=4294967295),this.n=n.length,this.p=t,this.m=s(this.n).ishln(this.p);var o=[];for(const t of n){r(e.isBuffer(t));var a=d(t,i).imod(this.m);o.push(a)}o.sort(f);var h=new u;let c=new s(0);for(const t of o){var l=t.sub(c).imaskn(this.p),p=t.sub(c).isub(l).ishrn(this.p);for(c=t;!p.isZero();)h.writeBit(1),p.isubn(1);h.writeBit(0),h.writeBits64(l,this.p)}return this.data=h.render(),this},c.prototype.fromBytes=function(t,i,n){return r("number"==typeof t&&isFinite(t)),r("number"==typeof i&&isFinite(i)),r(0<=i&&i<=32),r(e.isBuffer(n)),this.n=t,this.p=i,this.m=s(this.n).ishln(this.p),this.data=n,this},c.prototype.fromNBytes=function(t,i){r("number"==typeof t&&isFinite(t)),r(e.isBuffer(i)),r(4<=i.length);var s=i.readUInt32BE(0,!0);return this.fromBytes(s,t,i.slice(4))},c.prototype.fromPBytes=function(t,i){r("number"==typeof t&&isFinite(t)),r(e.isBuffer(i)),r(1<=i.length);var s=i.readUInt8(0,!0);return this.fromBytes(t,s,i.slice(1))},c.prototype.fromNPBytes=function(t){r(e.isBuffer(t)),r(5<=t.length);var i=t.readUInt32BE(0,!0),s=t.readUInt8(4,!0);return this.fromBytes(i,s,t.slice(5))},c.prototype.fromRaw=function(t){return this.fromNBytes(20,t)},c.prototype.fromBlock=function(t){var e=t.hash().slice(0,16),i=[];for(let e=0;e<t.txs.length;e++){var r=t.txs[e];if(0<e)for(const t of r.inputs)i.push(t.prevout.toRaw());for(const t of r.outputs)p(i,t.script)}return this.fromItems(20,e,i)},c.prototype.fromExtended=function(t){var e=t.hash().slice(0,16),i=[];for(let e=0;e<t.txs.length;e++){var r=t.txs[e];if(i.push(r.hash()),0<e)for(const t of r.inputs){s=void 0;var s=i,n=t.witness;for(const t of n.items)0!==t.length&&s.push(t);p(i,t.script)}}return this.fromItems(20,e,i)},c.fromItems=function(t,e,i){return(new c).fromItems(t,e,i)},c.fromBytes=function(t,e,i){return(new c).fromBytes(t,e,i)},c.fromNBytes=function(t,e){return(new c).fromNBytes(t,e)},c.fromPBytes=function(t,e){return(new c).fromPBytes(t,e)},c.fromNPBytes=function(t){return(new c).fromNPBytes(t)},c.fromRaw=function(t){return(new c).fromRaw(t)},c.fromBlock=function(t){return(new c).fromBlock(t)},c.fromExtended=function(t){return(new c).fromExtended(t)},u.prototype.writeBit=function(t){0===this.remain&&(this.stream.push(0),this.remain=8),t&&(t=this.stream.length-1,this.stream[t]|=1<<this.remain-1),this.remain--},u.prototype.writeByte=function(t){0===this.remain&&(this.stream.push(0),this.remain=8);var e=this.stream.length-1;this.stream[e]|=t>>8-this.remain&255,this.stream.push(0),this.stream[1+e]=t<<this.remain&255},u.prototype.writeBits=function(t,e){for(r(0<=e),r(e<=32),t<<=32-e;8<=e;)this.writeByte(t>>>24),t<<=8,e-=8;for(;0<e;)this.writeBit(t>>>31),t<<=1,--e},u.prototype.writeBits64=function(t,e){r(0<=e),r(e<=64),32<e?(this.writeBits(t.hi,e-32),this.writeBits(t.lo,32)):this.writeBits(t.lo,e)},u.prototype.render=function(){var t=e.allocUnsafe(this.stream.length);for(let e=0;e<this.stream.length;e++)t[e]=this.stream[e];return t},l.prototype.readBit=function(){if(this.pos>=this.stream.length)throw new Error("EOF");if(0===this.remain){if(this.pos+=1,this.pos>=this.stream.length)throw new Error("EOF");this.remain=8}return--this.remain,this.stream[this.pos]>>this.remain&1},l.prototype.readByte=function(){if(this.pos>=this.stream.length)throw new Error("EOF");if(0===this.remain){if(this.pos+=1,this.pos>=this.stream.length)throw new Error("EOF");this.remain=8}if(8===this.remain){const t=this.stream[this.pos];return this.pos+=1,t}let t=this.stream[this.pos]&(1<<this.remain)-1;if(t<<=8-this.remain,this.pos+=1,this.pos>=this.stream.length)throw new Error("EOF");return t|this.stream[this.pos]>>this.remain},l.prototype.readBits=function(t){r(0<=t),r(t<=32);let e=0;for(;8<=t;)e=(e<<=8)|this.readByte(),t-=8;for(;0<t;)e=(e<<=1)|this.readBit(),--t;return e},l.prototype.readBits64=function(t){r(0<=t),r(t<=64);var e=new s;return 32<t?(e.hi=this.readBits(t-32),e.lo=this.readBits(32)):e.lo=this.readBits(t),e},t.exports=c}).call(this,i(0).Buffer)},function(t,e){t.exports=function(t){this.next=null,this.prev=null,this.value=t}},function(t,e,i){var r={"./ConvertScript":153,"./ConvertScript.js":153,"./checkContract":91,"./checkContract.js":91,"./coinbase":164,"./coinbase.js":164,"./comm":7,"./comm.js":7,"./contractcreate":183,"./contractcreate.js":183,"./contractexecute":184,"./contractexecute.js":184,"./contractpromise":165,"./contractpromise.js":165,"./cpRegister":161,"./cpRegister.js":161,"./cpchange":163,"./cpchange.js":163,"./electronicright/enchancecp":187,"./electronicright/enchancecp.js":187,"./electronicright/erAbolish":186,"./electronicright/erAbolish.js":186,"./electronicright/erIssue":185,"./electronicright/erIssue.js":185,"./facade":42,"./facade.js":42,"./model/base":61,"./model/base.js":61,"./model/example":175,"./model/example.js":175,"./model/issue":176,"./model/issue.js":176,"./model/multisig":177,"./model/multisig.js":177,"./model/relay":173,"./model/relay.js":173,"./model/selector":141,"./model/selector.js":141,"./model/vem":174,"./model/vem.js":174,"./nesting":158,"./nesting.js":158,"./nesting/comment":121,"./nesting/comment.js":121,"./nesting/default":46,"./nesting/default.js":46,"./nesting/htlcassent":120,"./nesting/htlcassent.js":120,"./nesting/htlcsuggest":119,"./nesting/htlcsuggest.js":119,"./nesting/propcreate":159,"./nesting/propcreate.js":159,"./nesting/propexchange":160,"./nesting/propexchange.js":160,"./nesting/selector":102,"./nesting/selector.js":102,"./notify":182,"./notify.js":182,"./plugin":213,"./plugin.js":213,"./propfound":179,"./propfound.js":179,"./propsale":181,"./propsale.js":181,"./scnotify":178,"./scnotify.js":178,"./scregister":169,"./scregister.js":169,"./scrun":172,"./scrun.js":172,"./scstate":171,"./scstate.js":171,"./scupdate":170,"./scupdate.js":170,"./selector":157,"./selector.js":157,"./taskManager":147,"./taskManager.js":147,"./transaction":15,"./transaction.js":15,"./vote":180,"./vote.js":180};function s(t){return t=n(t),i(t)}function n(t){if(i.o(r,t))return r[t];throw(t=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",t}s.keys=function(){return Object.keys(r)},s.resolve=n,(t.exports=s).id=428},function(t,e,i){"use strict";
/*!
 * contractdb.js - storage for SmartContract account management
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */var r=i(323);const s=i(68).walletdb,n=i(9);class o extends r{constructor(t){super(t),this.eid=t.eid||"contractdb"}async _open(){this.options.listen&&await this.logger.open(),await this.isNewRecord()&&(this.logger.info("new contract db to be created."),this.setmnemonic({phrase:n.SmartContractMnemonic.phrase,language:n.SmartContractMnemonic.language,passphrase:n.SmartContractMnemonic.passphrase})),await this.db.open();var t=await this.db.checkVersion(s,6),e=(this.depth=await this.getDepth(),this.options.wipeNoReally&&await this.wipe(),await this.setFilter(),this.readyLoad=!0,await this.load(),await this.ensure({id:"primary",witness:!0,mnemonic:this.options.mnemonic}));return this.logger.info("AccountDB loaded (depth=%d, height=%d, start=%d).",this.depth,this.curHeight,this.state.startHeight),this.logger.info("Loaded primary wallet (id=%s, wid=%d, address=%s)",e.id,e.wid,e.getAddress()),this.primary=e,this.on("notify/receive",async t=>{await this.handleNotify(t)}),this.on("notify/remove",async t=>{await this.handleNotify(t,!0)}),this.http&&this.options.listen&&await this.http.open(),t}bind(){!this.client||this.bound||(this.bound=!0,this.client.hook("htlcassent.cancel",t=>{this.setAssent(t),this.emit("htlcassent.cancel",t)}),this.client.hook("htlcassent.deal",t=>{this.setAssent(t),this.emit("htlcassent.deal",t)}),this.client.hook("htlcassent.receive",t=>{this.setAssent(t),this.emit("htlcassent.receive",t)}),this.client.hook("htlcsuggest.cancel",t=>{this.setSuggest(t),this.emit("htlcsuggest.cancel",t)}),this.client.hook("htlcsuggest.deal",t=>{this.setSuggest(t),this.emit("htlcsuggest.deal",t)}),this.client.hook("htlcsuggest.receive",t=>{this.setSuggest(t),this.emit("htlcsuggest.receive",t)}),this.on("mssendpubk/receive",async t=>{let e=await this.get(t.addr);var i,r,s;if(!e&&(e=await this.ensure({id:t.addr,type:"multisig",m:t.m,n:t.n,witness:!0}),[s,r]=await this.getAccountByAddress(t.addr),s=await this.get(s))&&await s.send({subtractFee:!1,sort:!1,outputs:[{address:t.contract,value:1e4}],comment:JSON.stringify({oper:"scrun",params:{oper:"pubk",addr:t.addr,puba:e.account.accountKey}})},r),e.account.keys.length<e.account.n-1){for(i of t.data.split(","))try{await e.addSharedKey(i)}catch(t){}e.account.keys.length==e.account.n-1&&([s,r]=await this.getAccountByAddress(t.addr),s=await this.get(s))&&await s.send({subtractFee:!1,sort:!1,outputs:[{address:t.contract,value:1e4}],comment:JSON.stringify({oper:"scrun",params:{oper:"puba",addr:t.addr,puba:e.account.receive.getAddress().toString()}})},r)}}),this.on("mssendtx/receive",async t=>{var e,i=await this.get(t.addr);i&&i.account.type==Account.types.MULTISIG&&((e=MTX.fromRaw(t.data,"hex")).view=await i.getCoinView(e),e.isSigned()||(t.txid=e.txid(),await this.saveMSTrans(t)))}),this.client.hook("onConnect",async()=>{await this.load()}),this.client.hook("error",t=>{this.emit("error",t)}),this.client.on("block.connect",async(t,e)=>{try{await this.addBlock(t,e)}catch(t){this.emit("error",t)}}),this.client.on("block.disconnect",async(t,e)=>{try{await this.removeBlock(t,e)}catch(t){this.emit("error",t)}}),this.client.on("chain.full",()=>{this.synced=!0}),this.client.hook("block.rescan.contractdb",async(t,e)=>{try{await this.rescanBlock(t,e)}catch(t){this.emit("error",t)}}),this.client.on("tx",async(t,e,i)=>{try{await this.addTX(t,null,i)}catch(t){this.emit("error",t)}}),this.client.on("entry.remove",async(t,e)=>{try{if(e){var i=t.tx.hash("hex"),r=await this.getWalletsByTX(t.tx);if(r)for(const e of r){var s=await this.get(e);assert(s),await s.remove(i),(await facade.FactoryOfContract({tx:t.tx,env:this})).erase()}}}catch(t){this.emit("error",t)}}),this.client.on("chain.reset",t=>{this.resetChain(t).catch(t=>{this.emit("error",t)})}),this.jsonp&&this.jsonp.hook("error",t=>{this.emit("error",t)}))}}o.layout=s,t.exports=o},function(t,e,i){(((e=t.exports=i(255)).Stream=e).Readable=e).Writable=i(259),e.Duplex=i(74),e.Transform=i(260),e.PassThrough=i(436),e.finished=i(189),e.pipeline=i(437)},function(t,e){},function(t,e,i){"use strict";function r(t,e){var i,r=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)),r}function s(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var n=i(0).Buffer,o=i(433).inspect,a=o&&o.custom||"inspect";t.exports=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.head=null,this.tail=null,this.length=0}var e,i;return e=t,(i=[{key:"push",value:function(t){t={data:t,next:null},0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(t){t={data:t,next:this.head},0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){var t;if(0!==this.length)return t=this.head.data,1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i}},{key:"concat",value:function(t){if(0===this.length)return n.alloc(0);for(var e,i,r=n.allocUnsafe(t>>>0),s=this.head,o=0;s;)e=s.data,i=o,n.prototype.copy.call(e,r,i),o+=s.data.length,s=s.next;return r}},{key:"consume",value:function(t,e){var i;return t<this.head.data.length?(i=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):i=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,i=1,r=e.data;for(t-=r.length;e=e.next;){var s=e.data,n=t>s.length?s.length:t;if(n===s.length?r+=s:r+=s.slice(0,t),0==(t-=n)){n===s.length?(++i,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e).data=s.slice(n);break}++i}return this.length-=i,r}},{key:"_getBuffer",value:function(t){var e=n.allocUnsafe(t),i=this.head,r=1;for(i.data.copy(e),t-=i.data.length;i=i.next;){var s=i.data,o=t>s.length?s.length:t;if(s.copy(e,e.length-t,0,o),0==(t-=o)){o===s.length?(++r,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i).data=s.slice(o);break}++r}return this.length-=r,e}},{key:a,value:function(t,e){return o(this,function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){var r,s;r=t,s=i[e=e],e in r?Object.defineProperty(r,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[e]=s})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},e,{depth:0,customInspect:!1}))}}])&&s(e.prototype,i),t}()},function(t,e){},function(t,e,i){"use strict";(function(e){var r;function s(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}var n=i(189),o=Symbol("lastResolve"),a=Symbol("lastReject"),h=Symbol("error"),c=Symbol("ended"),u=Symbol("lastPromise"),l=Symbol("handlePromise"),f=Symbol("stream");function d(t,e){return{value:t,done:e}}function p(t){var e,i=t[o];null!==i&&null!==(e=t[f].read())&&(t[u]=null,t[o]=null,t[a]=null,i(d(e,!1)))}var g=Object.getPrototypeOf((function(){})),m=Object.setPrototypeOf((s(r={get stream(){return this[f]},next:function(){var t,i,r,s,n=this;if(null!==(s=this[h]))return Promise.reject(s);if(this[c])return Promise.resolve(d(void 0,!0));if(this[f].destroyed)return new Promise((function(t,i){e.nextTick((function(){n[h]?i(n[h]):t(d(void 0,!0))}))}));if(s=this[u])t=new Promise((i=s,r=this,function(t,e){i.then((function(){r[c]?t(d(void 0,!0)):r[l](t,e)}),e)}));else{if(null!==(s=this[f].read()))return Promise.resolve(d(s,!1));t=new Promise(this[l])}return this[u]=t}},Symbol.asyncIterator,(function(){return this})),s(r,"return",(function(){var t=this;return new Promise((function(e,i){t[f].destroy(null,(function(t){t?i(t):e(d(void 0,!0))}))}))})),r),g);t.exports=function(t){var i,r=Object.create(m,(s(i={},f,{value:t,writable:!0}),s(i,o,{value:null,writable:!0}),s(i,a,{value:null,writable:!0}),s(i,h,{value:null,writable:!0}),s(i,c,{value:t._readableState.endEmitted,writable:!0}),s(i,l,{value:function(t,e){var i=r[f].read();i?(r[u]=null,r[o]=null,r[a]=null,t(d(i,!1))):(r[o]=t,r[a]=e)},writable:!0}),i));return r[u]=null,n(t,(function(t){var e;t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code?(null!==(e=r[a])&&(r[u]=null,r[o]=null,r[a]=null,e(t)),r[h]=t):(null!==(e=r[o])&&(r[u]=null,r[o]=null,e(d(void 0,!(r[a]=null)))),r[c]=!0)})),t.on("readable",function(t){e.nextTick(p,t)}.bind(null,r)),r}}).call(this,i(11))},function(t,e){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(t,e,i){"use strict";t.exports=s;var r=i(260);function s(t){if(!(this instanceof s))return new s(t);r.call(this,t)}i(5)(s,r),s.prototype._transform=function(t,e,i){i(null,t)}},function(t,e,i){"use strict";var r,s=i(73).codes,n=s.ERR_MISSING_ARGS,o=s.ERR_STREAM_DESTROYED;function a(t){if(t)throw t}function h(t,e,s,n){a=n,h=!1;var a,h,c=!(n=function(){h||(h=!0,a.apply(void 0,arguments))}),u=(t.on("close",(function(){c=!0})),(r=void 0===r?i(189):r)(t,{readable:e,writable:s},(function(t){if(t)return n(t);c=!0,n()})),!1);return function(e){var i;if(!c&&!u)return u=!0,(i=t).setHeader&&"function"==typeof i.abort?t.abort():"function"==typeof t.destroy?t.destroy():void n(e||new o("pipe"))}}function c(t){t()}function u(t,e){return t.pipe(e)}t.exports=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var r,s,o=(r=e).length&&"function"==typeof r[r.length-1]?r.pop():a;if((e=Array.isArray(e[0])?e[0]:e).length<2)throw new n("streams");var l=e.map((function(t,i){var r=i<e.length-1;return h(t,r,0<i,(function(t){s=s||t,t&&l.forEach(c),r||(l.forEach(c),o(s))}))}));return e.reduce(u)}},function(t,e,i){var r=i(5),s=i(75),n=i(10).Buffer,o=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function h(){this.init(),this._w=a,s.call(this,64,56)}r(h,s),h.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},h.prototype._update=function(t){for(var e=this._w,i=0|this._a,r=0|this._b,s=0|this._c,n=0|this._d,a=0|this._e,h=0;h<16;++h)e[h]=t.readInt32BE(4*h);for(;h<80;++h)e[h]=e[h-3]^e[h-8]^e[h-14]^e[h-16];for(var c,u,l,f=0;f<80;++f){var d=~~(f/20),p=0|(i<<5|i>>>27)+(c=r,u=s,l=n,0===(p=d)?c&u|~c&l:2===p?c&u|c&l|u&l:c^u^l)+a+e[f]+o[d];a=n,n=s,s=r<<30|r>>>2,r=i,i=p}this._a=i+this._a|0,this._b=r+this._b|0,this._c=s+this._c|0,this._d=n+this._d|0,this._e=a+this._e|0},h.prototype._hash=function(){var t=n.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=h},function(t,e,i){var r=i(5),s=i(75),n=i(10).Buffer,o=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function h(){this.init(),this._w=a,s.call(this,64,56)}r(h,s),h.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},h.prototype._update=function(t){for(var e,i=this._w,r=0|this._a,s=0|this._b,n=0|this._c,a=0|this._d,h=0|this._e,c=0;c<16;++c)i[c]=t.readInt32BE(4*c);for(;c<80;++c)i[c]=(e=i[c-3]^i[c-8]^i[c-14]^i[c-16])<<1|e>>>31;for(var u,l,f,d=0;d<80;++d){var p=~~(d/20),g=0|(r<<5|r>>>27)+(u=s,l=n,f=a,0===(g=p)?u&l|~u&f:2===g?u&l|u&f|l&f:u^l^f)+h+i[d]+o[p];h=a,a=n,n=s<<30|s>>>2,s=r,r=g}this._a=r+this._a|0,this._b=s+this._b|0,this._c=n+this._c|0,this._d=a+this._d|0,this._e=h+this._e|0},h.prototype._hash=function(){var t=n.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=h},function(t,e,i){var r=i(5),s=i(261),n=i(75),o=i(10).Buffer,a=new Array(64);function h(){this.init(),this._w=a,n.call(this,64,56)}r(h,s),h.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},h.prototype._hash=function(){var t=o.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=h},function(t,e,i){var r=i(5),s=i(262),n=i(75),o=i(10).Buffer,a=new Array(160);function h(){this.init(),this._w=a,n.call(this,128,112)}r(h,s),h.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},h.prototype._hash=function(){var t=o.allocUnsafe(48);function e(e,i,r){t.writeInt32BE(e,r),t.writeInt32BE(i,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=h},function(t,e,i){t.exports=s;var r=i(14).EventEmitter;function s(){r.call(this)}i(5)(s,r),s.Readable=i(192),s.Writable=i(447),s.Duplex=i(448),s.Transform=i(449),s.PassThrough=i(450),(s.Stream=s).prototype.pipe=function(t,e){var i=this;function s(e){t.writable&&!1===t.write(e)&&i.pause&&i.pause()}function n(){i.readable&&i.resume&&i.resume()}i.on("data",s),t.on("drain",n),t._isStdio||e&&!1===e.end||(i.on("end",a),i.on("close",h));var o=!1;function a(){o||(o=!0,t.end())}function h(){o||(o=!0,"function"==typeof t.destroy&&t.destroy())}function c(t){if(u(),0===r.listenerCount(this,"error"))throw t}function u(){i.removeListener("data",s),t.removeListener("drain",n),i.removeListener("end",a),i.removeListener("close",h),i.removeListener("error",c),t.removeListener("error",c),i.removeListener("end",u),i.removeListener("close",u),t.removeListener("close",u)}return i.on("error",c),t.on("error",c),i.on("end",u),i.on("close",u),t.on("close",u),t.emit("pipe",i),t}},function(t,e){},function(t,e,i){"use strict";var r=i(193).Buffer,s=i(445);function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.head=null,this.tail=null,this.length=0}t.exports=(n.prototype.push=function(t){t={data:t,next:null},0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length},n.prototype.unshift=function(t){t={data:t,next:this.head},0===this.length&&(this.tail=t),this.head=t,++this.length},n.prototype.shift=function(){var t;if(0!==this.length)return t=this.head.data,1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t},n.prototype.clear=function(){this.head=this.tail=null,this.length=0},n.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i},n.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e,i=r.allocUnsafe(t>>>0),s=this.head,n=0;s;)e=n,s.data.copy(i,e),n+=s.data.length,s=s.next;return i},n),s&&s.inspect&&s.inspect.custom&&(t.exports.prototype[s.inspect.custom]=function(){var t=s.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,i){"use strict";t.exports=s;var r=i(266);function s(t){if(!(this instanceof s))return new s(t);r.call(this,t)}(t=Object.create(i(93))).inherits=i(5),t.inherits(s,r),s.prototype._transform=function(t,e,i){i(null,t)}},function(t,e,i){t.exports=i(194)},function(t,e,i){t.exports=i(62)},function(t,e,i){t.exports=i(192).Transform},function(t,e,i){t.exports=i(192).PassThrough},function(t,e,i){"use strict";var r=i(5),s=i(10).Buffer,n=i(50),o=s.alloc(128);function a(t,e){n.call(this,"digest"),"string"==typeof e&&(e=s.from(e)),this._alg=t,64<(this._key=e).length?e=t(e):e.length<64&&(e=s.concat([e,o],64));for(var i=this._ipad=s.allocUnsafe(64),r=this._opad=s.allocUnsafe(64),a=0;a<64;a++)i[a]=54^e[a],r[a]=92^e[a];this._hash=[i]}r(a,n),a.prototype._update=function(t){this._hash.push(t)},a.prototype._final=function(){var t=this._alg(s.concat(this._hash));return this._alg(s.concat([this._opad,t]))},t.exports=a},function(t,e,i){t.exports=i(269)},function(t,e,i){(function(e){var r,s,n=i(10).Buffer,o=i(271),a=i(272),h=i(273),c=i(274),u=e.crypto&&e.crypto.subtle,l={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},f=[];function d(){return s=s||(e.process&&e.process.nextTick?e.process.nextTick:e.queueMicrotask||e.setImmediate||e.setTimeout)}function p(t,e,i,r,s){return u.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then((function(t){return u.deriveBits({name:"PBKDF2",salt:e,iterations:i,hash:{name:s}},t,r<<3)})).then((function(t){return n.from(t)}))}t.exports=function(t,i,s,g,m,w){"function"==typeof m&&(w=m,m=void 0);var y,b,v,k=l[(m=m||"sha1").toLowerCase()];if(k&&"function"==typeof e.Promise){if(o(s,g),t=c(t,a,"Password"),i=c(i,a,"Salt"),"function"!=typeof w)throw new Error("No callback provided to pbkdf2");b=k,b=((!e.process||e.process.browser)&&u&&u.importKey&&u.deriveBits?void 0!==f[b]?f[b]:(v=p(r=r||n.alloc(8),r,10,128,b).then((function(){return!0})).catch((function(){return!1})),f[b]=v):Promise.resolve(!1)).then((function(e){return e?p(t,i,s,g,k):h(t,i,s,g,m)})),y=w,b.then((function(t){d()((function(){y(null,t)}))}),(function(t){d()((function(){y(t)}))}))}else d()((function(){var e;try{e=h(t,i,s,g,m)}catch(e){return w(e)}w(null,e)}))}}).call(this,i(12))},function(t,e,i){var r=i(455),s=i(196),n=i(197),o=i(468),a=i(127);function h(t,e,i){if(t=t.toLowerCase(),n[t])return s.createCipheriv(t,e,i);if(o[t])return new r({key:e,iv:i,mode:t});throw new TypeError("invalid suite type")}function c(t,e,i){if(t=t.toLowerCase(),n[t])return s.createDecipheriv(t,e,i);if(o[t])return new r({key:e,iv:i,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}e.createCipher=e.Cipher=function(t,e){var i,r;if(t=t.toLowerCase(),n[t])i=n[t].key,r=n[t].iv;else{if(!o[t])throw new TypeError("invalid suite type");i=8*o[t].key,r=o[t].iv}return h(t,(e=a(e,!1,i,r)).key,e.iv)},e.createCipheriv=e.Cipheriv=h,e.createDecipher=e.Decipher=function(t,e){var i,r;if(t=t.toLowerCase(),n[t])i=n[t].key,r=n[t].iv;else{if(!o[t])throw new TypeError("invalid suite type");i=8*o[t].key,r=o[t].iv}return c(t,(e=a(e,!1,i,r)).key,e.iv)},e.createDecipheriv=e.Decipheriv=c,e.listCiphers=e.getCiphers=function(){return Object.keys(o).concat(s.getCiphers())}},function(t,e,i){var r=i(50),s=i(456),n=i(5),o=i(10).Buffer,a={"des-ede3-cbc":s.CBC.instantiate(s.EDE),"des-ede3":s.EDE,"des-ede-cbc":s.CBC.instantiate(s.EDE),"des-ede":s.EDE,"des-cbc":s.CBC.instantiate(s.DES),"des-ecb":s.DES};function h(t){r.call(this);var e=t.mode.toLowerCase(),i=a[e],s=t.decrypt?"decrypt":"encrypt",n=t.key;o.isBuffer(n)||(n=o.from(n)),"des-ede"!==e&&"des-ede-cbc"!==e||(n=o.concat([n,n.slice(0,8)])),e=t.iv;o.isBuffer(e)||(e=o.from(e)),this._des=i.create({key:n,iv:e,type:s})}a.des=a["des-cbc"],a.des3=a["des-ede3-cbc"],n(t.exports=h,r),h.prototype._update=function(t){return o.from(this._des.update(t))},h.prototype._final=function(){return o.from(this._des.final())}},function(t,e,i){"use strict";e.utils=i(275),e.Cipher=i(195),e.DES=i(276),e.CBC=i(457),e.EDE=i(458)},function(t,e,i){"use strict";var r=i(33),s=i(5),n={};function o(t){r.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}e.instantiate=function(t){function e(e){t.call(this,e),this._cbcInit()}s(e,t);for(var i=Object.keys(n),r=0;r<i.length;r++){var o=i[r];e.prototype[o]=n[o]}return e.create=function(t){return new e(t)},e},n._cbcInit=function(){var t=new o(this.options.iv);this._cbcState=t},n._update=function(t,e,i,r){var s=this._cbcState,n=this.constructor.super_.prototype,o=s.iv;if("encrypt"===this.type){for(var a=0;a<this.blockSize;a++)o[a]^=t[e+a];for(n._update.call(this,o,0,i,r),a=0;a<this.blockSize;a++)o[a]=i[r+a]}else{for(n._update.call(this,t,e,i,r),a=0;a<this.blockSize;a++)i[r+a]^=o[a];for(a=0;a<this.blockSize;a++)o[a]=t[e+a]}}},function(t,e,i){"use strict";var r=i(33),s=i(5),n=i(195),o=i(276);function a(t,e){r.equal(e.length,24,"Invalid key length");var i=e.slice(0,8),s=e.slice(8,16);e=e.slice(16,24);this.ciphers="encrypt"===t?[o.create({type:"encrypt",key:i}),o.create({type:"decrypt",key:s}),o.create({type:"encrypt",key:e})]:[o.create({type:"decrypt",key:e}),o.create({type:"encrypt",key:s}),o.create({type:"decrypt",key:i})]}function h(t){n.call(this,t),t=new a(this.type,this.options.key),this._edeState=t}s(h,n),(t.exports=h).create=function(t){return new h(t)},h.prototype._update=function(t,e,i,r){var s=this._edeState;s.ciphers[0]._update(t,e,i,r),s.ciphers[1]._update(i,r,i,r),s.ciphers[2]._update(i,r,i,r)},h.prototype._pad=o.prototype._pad,h.prototype._unpad=o.prototype._unpad},function(t,e,i){var r=i(197),s=i(280),n=i(10).Buffer,o=i(281),a=i(50),h=i(126),c=i(127);function u(t,e,i){a.call(this),this._cache=new f,this._cipher=new h.AES(e),this._prev=n.from(i),this._mode=t,this._autopadding=!0}i(5)(u,a),u.prototype._update=function(t){this._cache.add(t);for(var e,i=[];e=this._cache.get();)e=this._mode.encrypt(this,e),i.push(e);return n.concat(i)};var l=n.alloc(16,16);function f(){this.cache=n.allocUnsafe(0)}function d(t,e,i){if(!(t=r[t.toLowerCase()]))throw new TypeError("invalid suite type");if((e="string"==typeof e?n.from(e):e).length!==t.key/8)throw new TypeError("invalid key length "+e.length);if("string"==typeof i&&(i=n.from(i)),"GCM"!==t.mode&&i.length!==t.iv)throw new TypeError("invalid iv length "+i.length);return new("stream"===t.type?o:"auth"===t.type?s:u)(t.module,e,i)}u.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(l))throw this._cipher.scrub(),new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},f.prototype.add=function(t){this.cache=n.concat([this.cache,t])},f.prototype.get=function(){var t;return 15<this.cache.length?(t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t):null},f.prototype.flush=function(){for(var t=16-this.cache.length,e=n.allocUnsafe(t),i=-1;++i<t;)e.writeUInt8(t,i);return n.concat([this.cache,e])},e.createCipheriv=d,e.createCipher=function(t,e){var i=r[t.toLowerCase()];if(i)return d(t,(t=c(e,!1,i.key,i.iv)).key,t.iv);throw new TypeError("invalid suite type")}},function(t,e){e.encrypt=function(t,e){return t._cipher.encryptBlock(e)},e.decrypt=function(t,e){return t._cipher.decryptBlock(e)}},function(t,e,i){var r=i(94);e.encrypt=function(t,e){return e=r(e,t._prev),t._prev=t._cipher.encryptBlock(e),t._prev},e.decrypt=function(t,e){var i=t._prev;t._prev=e,t=t._cipher.decryptBlock(e);return r(t,i)}},function(t,e,i){var r=i(10).Buffer,s=i(94);function n(t,e,i){var n=e.length,o=s(e,t._cache);return t._cache=t._cache.slice(n),t._prev=r.concat([t._prev,i?e:o]),o}e.encrypt=function(t,e,i){for(var s,o=r.allocUnsafe(0);e.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=r.allocUnsafe(0)),!(t._cache.length<=e.length)){o=r.concat([o,n(t,e,i)]);break}s=t._cache.length,o=r.concat([o,n(t,e.slice(0,s),i)]),e=e.slice(s)}return o}},function(t,e,i){var r=i(10).Buffer;e.encrypt=function(t,e,i){for(var s,n,o,a,h=e.length,c=r.allocUnsafe(h),u=-1;++u<h;)c[u]=(s=t,n=e[u],o=i,void 0,a=s._cipher.encryptBlock(s._prev)[0]^n,s._prev=r.concat([s._prev.slice(1),r.from([o?n:a])]),a);return c}},function(t,e,i){var r=i(10).Buffer;function s(t,e,i){for(var s,n,o=-1,a=0;++o<8;)a+=(128&(n=t._cipher.encryptBlock(t._prev)[0]^(s=e&1<<7-o?128:0)))>>o%8,t._prev=function(t,e){var i=t.length,s=-1,n=r.allocUnsafe(t.length);for(t=r.concat([t,r.from([e])]);++s<i;)n[s]=t[s]<<1|t[s+1]>>7;return n}(t._prev,i?s:n);return a}e.encrypt=function(t,e,i){for(var n=e.length,o=r.allocUnsafe(n),a=-1;++a<n;)o[a]=s(t,e[a],i);return o}},function(t,e,i){(function(t){var r=i(94);e.encrypt=function(e,i){for(;e._cache.length<i.length;)e._cache=t.concat([e._cache,((s=e)._prev=s._cipher.encryptBlock(s._prev),s._prev)]);var s,n=e._cache.slice(0,i.length);return e._cache=e._cache.slice(i.length),r(i,n)}}).call(this,i(0).Buffer)},function(t,e,i){var r=i(10).Buffer,s=r.alloc(16,0);function n(t){var e=r.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function o(t){this.h=t,this.state=r.alloc(16,0),this.cache=r.allocUnsafe(0)}o.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},o.prototype._multiply=function(){for(var t,e,i,r=[(t=this.h).readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)],s=[0,0,0,0],o=-1;++o<128;){for(0!=(this.state[~~(o/8)]&1<<7-o%8)&&(s[0]^=r[0],s[1]^=r[1],s[2]^=r[2],s[3]^=r[3]),i=0!=(1&r[3]),e=3;0<e;e--)r[e]=r[e]>>>1|(1&r[e-1])<<31;r[0]=r[0]>>>1,i&&(r[0]=r[0]^225<<24)}this.state=n(s)},o.prototype.update=function(t){var e;for(this.cache=r.concat([this.cache,t]);16<=this.cache.length;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)},o.prototype.final=function(t,e){return this.cache.length&&this.ghash(r.concat([this.cache,s],16)),this.ghash(n([0,t,0,e])),this.state},t.exports=o},function(t,e,i){var r=i(280),s=i(10).Buffer,n=i(197),o=i(281),a=i(50),h=i(126),c=i(127);function u(t,e,i){a.call(this),this._cache=new l,this._last=void 0,this._cipher=new h.AES(e),this._prev=s.from(i),this._mode=t,this._autopadding=!0}function l(){this.cache=s.allocUnsafe(0)}function f(t,e,i){if(!(t=n[t.toLowerCase()]))throw new TypeError("invalid suite type");if("string"==typeof i&&(i=s.from(i)),"GCM"!==t.mode&&i.length!==t.iv)throw new TypeError("invalid iv length "+i.length);if((e="string"==typeof e?s.from(e):e).length!==t.key/8)throw new TypeError("invalid key length "+e.length);return"stream"===t.type?new o(t.module,e,i,!0):"auth"===t.type?new r(t.module,e,i,!0):new u(t.module,e,i)}i(5)(u,a),u.prototype._update=function(t){this._cache.add(t);for(var e,i=[];e=this._cache.get(this._autopadding);)e=this._mode.decrypt(this,e),i.push(e);return s.concat(i)},u.prototype._final=function(){var t=this._cache.flush();if(this._autopadding){var e=this._mode.decrypt(this,t),i=e[15];if(i<1||16<i)throw new Error("unable to decrypt data");for(var r=-1;++r<i;)if(e[r+(16-i)]!==i)throw new Error("unable to decrypt data");if(16!==i)return e.slice(0,16-i)}else if(t)throw new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},l.prototype.add=function(t){this.cache=s.concat([this.cache,t])},l.prototype.get=function(t){var e;if(t){if(16<this.cache.length)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(16<=this.cache.length)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},l.prototype.flush=function(){if(this.cache.length)return this.cache},e.createDecipher=function(t,e){var i=n[t.toLowerCase()];if(i)return f(t,(t=c(e,!1,i.key,i.iv)).key,t.iv);throw new TypeError("invalid suite type")},e.createDecipheriv=f},function(t,e){e["des-ecb"]={key:8,iv:0},e["des-cbc"]=e.des={key:8,iv:8},e["des-ede3-cbc"]=e.des3={key:24,iv:8},e["des-ede3"]={key:24,iv:0},e["des-ede-cbc"]={key:16,iv:8},e["des-ede"]={key:16,iv:0}},function(t,e,i){(function(t){var r=i(282),s=i(470),n=i(471),o={binary:!0,hex:!0,base64:!0};e.DiffieHellmanGroup=e.createDiffieHellmanGroup=e.getDiffieHellman=function(e){var i=new t(s[e].prime,"hex");e=new t(s[e].gen,"hex");return new n(i,e)},e.createDiffieHellman=e.DiffieHellman=function e(i,s,a,h){return t.isBuffer(s)||void 0===o[s]?e(i,"binary",s,a):(s=s||"binary",h=h||"binary",a=a||new t([2]),t.isBuffer(a)||(a=new t(a,h)),"number"==typeof i?new n(r(i,a),a,!0):(t.isBuffer(i)||(i=new t(i,s)),new n(i,a,!0)))}}).call(this,i(0).Buffer)},function(t){t.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},function(t,e,i){(function(e){var r=i(40),s=new(i(283)),n=new r(24),o=new r(11),a=new r(10),h=new r(3),c=new r(7),u=i(282),l=i(67);function f(t,i){return i=i||"utf8",e.isBuffer(t)||(t=new e(t,i)),this._pub=new r(t),this}function d(t,i){return i=i||"utf8",e.isBuffer(t)||(t=new e(t,i)),this._priv=new r(t),this}t.exports=g;var p={};function g(t,e,i){this.setGenerator(e),this.__prime=new r(t),this._prime=r.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,i?(this.setPublicKey=f,this.setPrivateKey=d):this._primeCode=8}function m(t,i){return t=new e(t.toArray()),i?t.toString(i):t}Object.defineProperty(g.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(t,e){var i=[e=e.toString("hex"),t.toString(16)].join("_");if(i in p)return p[i];var r,l=0;if(t.isEven()||!u.simpleSieve||!u.fermatTest(t)||!s.test(t))return p[i]=l+1+("02"===e||"05"===e?8:4);switch(s.test(t.shrn(1))||(l+=2),e){case"02":t.mod(n).cmp(o)&&(l+=8);break;case"05":(r=t.mod(a)).cmp(h)&&r.cmp(c)&&(l+=8);break;default:l+=4}return p[i]=l}(this.__prime,this.__gen)),this._primeCode}}),g.prototype.generateKeys=function(){return this._priv||(this._priv=new r(l(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},g.prototype.computeSecret=function(t){t=(t=(t=new r(t)).toRed(this._prime)).redPow(this._priv).fromRed(),t=new e(t.toArray());var i=this.getPrime();return t.length<i.length&&((i=new e(i.length-t.length)).fill(0),t=e.concat([i,t])),t},g.prototype.getPublicKey=function(t){return m(this._pub,t)},g.prototype.getPrivateKey=function(t){return m(this._priv,t)},g.prototype.getPrime=function(t){return m(this.__prime,t)},g.prototype.getGenerator=function(t){return m(this._gen,t)},g.prototype.setGenerator=function(t,i){return i=i||"utf8",e.isBuffer(t)||(t=new e(t,i)),this.__gen=t,this._gen=new r(t),this}}).call(this,i(0).Buffer)},function(t,e,i){var r=i(10).Buffer,s=i(92),n=i(473),o=i(5),a=i(481),h=i(494),c=i(269);function u(t){if(n.Writable.call(this),!(t=c[t]))throw new Error("Unknown message digest");this._hashType=t.hash,this._hash=s(t.hash),this._tag=t.id,this._signType=t.sign}function l(t){if(n.Writable.call(this),!(t=c[t]))throw new Error("Unknown message digest");this._hash=s(t.hash),this._tag=t.id,this._signType=t.sign}function f(t){return new u(t)}function d(t){return new l(t)}Object.keys(c).forEach((function(t){c[t].id=r.from(c[t].id,"hex"),c[t.toLowerCase()]=c[t]})),o(u,n.Writable),u.prototype._write=function(t,e,i){this._hash.update(t),i()},u.prototype.update=function(t,e){return"string"==typeof t&&(t=r.from(t,e)),this._hash.update(t),this},u.prototype.sign=function(t,e){this.end();var i=this._hash.digest();i=a(i,t,this._hashType,this._signType,this._tag);return e?i.toString(e):i},o(l,n.Writable),l.prototype._write=function(t,e,i){this._hash.update(t),i()},l.prototype.update=function(t,e){return"string"==typeof t&&(t=r.from(t,e)),this._hash.update(t),this},l.prototype.verify=function(t,e,i){return"string"==typeof e&&(e=r.from(e,i)),this.end(),i=this._hash.digest(),h(e,i,t,this._signType,this._tag)},t.exports={Sign:f,Verify:d,createSign:f,createVerify:d}},function(t,e,i){(((e=t.exports=i(284)).Stream=e).Readable=e).Writable=i(288),e.Duplex=i(77),e.Transform=i(289),e.PassThrough=i(479),e.finished=i(198),e.pipeline=i(480)},function(t,e){},function(t,e,i){"use strict";function r(t,e){var i,r=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)),r}function s(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var n=i(0).Buffer,o=i(476).inspect,a=o&&o.custom||"inspect";t.exports=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.head=null,this.tail=null,this.length=0}var e,i;return e=t,(i=[{key:"push",value:function(t){t={data:t,next:null},0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(t){t={data:t,next:this.head},0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){var t;if(0!==this.length)return t=this.head.data,1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i}},{key:"concat",value:function(t){if(0===this.length)return n.alloc(0);for(var e,i,r=n.allocUnsafe(t>>>0),s=this.head,o=0;s;)e=s.data,i=o,n.prototype.copy.call(e,r,i),o+=s.data.length,s=s.next;return r}},{key:"consume",value:function(t,e){var i;return t<this.head.data.length?(i=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):i=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,i=1,r=e.data;for(t-=r.length;e=e.next;){var s=e.data,n=t>s.length?s.length:t;if(n===s.length?r+=s:r+=s.slice(0,t),0==(t-=n)){n===s.length?(++i,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e).data=s.slice(n);break}++i}return this.length-=i,r}},{key:"_getBuffer",value:function(t){var e=n.allocUnsafe(t),i=this.head,r=1;for(i.data.copy(e),t-=i.data.length;i=i.next;){var s=i.data,o=t>s.length?s.length:t;if(s.copy(e,e.length-t,0,o),0==(t-=o)){o===s.length?(++r,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i).data=s.slice(o);break}++r}return this.length-=r,e}},{key:a,value:function(t,e){return o(this,function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){var r,s;r=t,s=i[e=e],e in r?Object.defineProperty(r,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[e]=s})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},e,{depth:0,customInspect:!1}))}}])&&s(e.prototype,i),t}()},function(t,e){},function(t,e,i){"use strict";(function(e){var r;function s(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}var n=i(198),o=Symbol("lastResolve"),a=Symbol("lastReject"),h=Symbol("error"),c=Symbol("ended"),u=Symbol("lastPromise"),l=Symbol("handlePromise"),f=Symbol("stream");function d(t,e){return{value:t,done:e}}function p(t){var e,i=t[o];null!==i&&null!==(e=t[f].read())&&(t[u]=null,t[o]=null,t[a]=null,i(d(e,!1)))}var g=Object.getPrototypeOf((function(){})),m=Object.setPrototypeOf((s(r={get stream(){return this[f]},next:function(){var t,i,r,s,n=this;if(null!==(s=this[h]))return Promise.reject(s);if(this[c])return Promise.resolve(d(void 0,!0));if(this[f].destroyed)return new Promise((function(t,i){e.nextTick((function(){n[h]?i(n[h]):t(d(void 0,!0))}))}));if(s=this[u])t=new Promise((i=s,r=this,function(t,e){i.then((function(){r[c]?t(d(void 0,!0)):r[l](t,e)}),e)}));else{if(null!==(s=this[f].read()))return Promise.resolve(d(s,!1));t=new Promise(this[l])}return this[u]=t}},Symbol.asyncIterator,(function(){return this})),s(r,"return",(function(){var t=this;return new Promise((function(e,i){t[f].destroy(null,(function(t){t?i(t):e(d(void 0,!0))}))}))})),r),g);t.exports=function(t){var i,r=Object.create(m,(s(i={},f,{value:t,writable:!0}),s(i,o,{value:null,writable:!0}),s(i,a,{value:null,writable:!0}),s(i,h,{value:null,writable:!0}),s(i,c,{value:t._readableState.endEmitted,writable:!0}),s(i,l,{value:function(t,e){var i=r[f].read();i?(r[u]=null,r[o]=null,r[a]=null,t(d(i,!1))):(r[o]=t,r[a]=e)},writable:!0}),i));return r[u]=null,n(t,(function(t){var e;t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code?(null!==(e=r[a])&&(r[u]=null,r[o]=null,r[a]=null,e(t)),r[h]=t):(null!==(e=r[o])&&(r[u]=null,r[o]=null,e(d(void 0,!(r[a]=null)))),r[c]=!0)})),t.on("readable",function(t){e.nextTick(p,t)}.bind(null,r)),r}}).call(this,i(11))},function(t,e){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(t,e,i){"use strict";t.exports=s;var r=i(289);function s(t){if(!(this instanceof s))return new s(t);r.call(this,t)}i(5)(s,r),s.prototype._transform=function(t,e,i){i(null,t)}},function(t,e,i){"use strict";var r,s=i(76).codes,n=s.ERR_MISSING_ARGS,o=s.ERR_STREAM_DESTROYED;function a(t){if(t)throw t}function h(t,e,s,n){a=n,h=!1;var a,h,c=!(n=function(){h||(h=!0,a.apply(void 0,arguments))}),u=(t.on("close",(function(){c=!0})),(r=void 0===r?i(198):r)(t,{readable:e,writable:s},(function(t){if(t)return n(t);c=!0,n()})),!1);return function(e){var i;if(!c&&!u)return u=!0,(i=t).setHeader&&"function"==typeof i.abort?t.abort():"function"==typeof t.destroy?t.destroy():void n(e||new o("pipe"))}}function c(t){t()}function u(t,e){return t.pipe(e)}t.exports=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var r,s,o=(r=e).length&&"function"==typeof r[r.length-1]?r.pop():a;if((e=Array.isArray(e[0])?e[0]:e).length<2)throw new n("streams");var l=e.map((function(t,i){var r=i<e.length-1;return h(t,r,0<i,(function(t){s=s||t,t&&l.forEach(c),r||(l.forEach(c),o(s))}))}));return e.reduce(u)}},function(t,e,i){var r=i(10).Buffer,s=i(267),n=i(199),o=i(88).ec,a=i(290),h=i(128),c=i(296);function u(t,e,i,n){(t=r.from(t.toArray())).length<e.byteLength()&&(o=r.alloc(e.byteLength()-t.length),t=r.concat([o,t]));var o=i.length;i=function(t,e){return t=(t=l(t,e)).mod(e),(t=r.from(t.toArray())).length<e.byteLength()&&(e=r.alloc(e.byteLength()-t.length),t=r.concat([e,t])),t}(i,e),(e=r.alloc(o)).fill(1),o=r.alloc(o),o=s(n,o).update(e).update(r.from([0])).update(t).update(i).digest(),e=s(n,o).update(e).digest();return{k:o=s(n,o).update(e).update(r.from([1])).update(t).update(i).digest(),v:e=s(n,o).update(e).digest()}}function l(t,e){var i=new a(t);return 0<(t=(t.length<<3)-e.bitLength())&&i.ishrn(t),i}function f(t,e,i){var n,o;do{for(n=r.alloc(0);8*n.length<t.bitLength();)e.v=s(i,e.k).update(e.v).digest(),n=r.concat([n,e.v])}while(o=l(n,t),e.k=s(i,e.k).update(e.v).update(r.from([0])).digest(),e.v=s(i,e.k).update(e.v).digest(),-1!==o.cmp(t));return o}t.exports=function(t,e,i,s,d){if((e=h(e)).curve){if("ecdsa"!==s&&"ecdsa/rsa"!==s)throw new Error("wrong private key type");var p=t;if(m=c[(E=e).curve.join(".")])return m=new o(m).keyFromPrivate(E.privateKey).sign(p),r.from(m.toDER());throw new Error("unknown curve "+E.curve.join("."))}if("dsa"===e.type){if("dsa"!==s)throw new Error("wrong private key type");p=t;for(var g,m,w=i,y=(m=e).params.priv_key,b=m.params.p,v=m.params.q,k=m.params.g,S=new a(0),_=l(p,v).mod(v),x=!1,R=u(y,v,p,w);!1===x;)S=function(t,e,i,r){return t.toRed(a.mont(i)).redPow(e).fromRed().mod(r)}(k,g=f(v,R,w),b,v),0===(x=g.invm(v).imul(_.add(y.mul(S))).mod(v)).cmpn(0)&&(x=!1,S=new a(0));i=x;var E,A=(E=(E=S).toArray(),i=i.toArray(),128&E[0]&&(E=[0].concat(E)),128&i[0]&&(i=[0].concat(i)),[48,E.length+i.length+4,2,E.length]);return A=A.concat(E,[2,i.length],i),r.from(A)}if("rsa"!==s&&"ecdsa/rsa"!==s)throw new Error("wrong private key type");t=r.concat([d,t]);for(var M=e.modulus.byteLength(),O=[0,1];t.length+O.length+1<M;)O.push(255);O.push(0);for(var I=-1;++I<t.length;)O.push(t[I]);return n(O,e)},t.exports.getKey=u,t.exports.makeKey=f},function(t,e,i){(function(t){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function s(t,e){function i(){}t.super_=e,i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function n(t,e,i){if(n.isBN(t))return t;this.negative=0,this.words=null,this.length=0,(this.red=null)!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var o;"object"==typeof t?t.exports=n:e.BN=n,(n.BN=n).wordSize=26;try{o=("undefined"!=typeof window&&void 0!==window.Buffer?window:i(483)).Buffer}catch(t){}function a(t,e){return 48<=(e=t.charCodeAt(e))&&e<=57?e-48:65<=e&&e<=70?e-55:97<=e&&e<=102?e-87:void r(!1,"Invalid character in "+t)}function h(t,e,i){var r=a(t,i);return e<=i-1&&(r|=a(t,i-1)<<4),r}function c(t,e,i,s){for(var n=0,o=0,a=Math.min(t.length,i),h=e;h<a;h++){var c=t.charCodeAt(h)-48;n*=s,o=49<=c?c-49+10:17<=c?c-17+10:c,r(0<=c&&o<s,"Invalid character"),n+=o}return n}function u(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(n.isBN=function(t){return t instanceof n||null!==t&&"object"==typeof t&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,e){return 0<t.cmp(e)?t:e},n.min=function(t,e){return t.cmp(e)<0?t:e},n.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);r((e="hex"===e?16:e)===(0|e)&&2<=e&&e<=36);var s=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(s++,this.negative=1),s<t.length&&(16===e?this._parseHex(t,s,i):(this._parseBase(t,e,s),"le"===i&&this._initArray(this.toArray(),e,i)))},n.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},n.prototype._initArray=function(t,e,i){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var s,n,o=0;o<this.length;o++)this.words[o]=0;var a=0;if("be"===i)for(o=t.length-1,s=0;0<=o;o-=3)n=t[o]|t[o-1]<<8|t[o-2]<<16,this.words[s]|=n<<a&67108863,this.words[s+1]=n>>>26-a&67108863,26<=(a+=24)&&(a-=26,s++);else if("le"===i)for(s=o=0;o<t.length;o+=3)n=t[o]|t[o+1]<<8|t[o+2]<<16,this.words[s]|=n<<a&67108863,this.words[s+1]=n>>>26-a&67108863,26<=(a+=24)&&(a-=26,s++);return this._strip()},n.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,n=0,o=0;if("be"===i)for(r=t.length-1;e<=r;r-=2)s=h(t,e,r)<<n,this.words[o]|=67108863&s,18<=n?(n-=18,this.words[o+=1]|=s>>>26):n+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)s=h(t,e,r)<<n,this.words[o]|=67108863&s,18<=n?(n-=18,this.words[o+=1]|=s>>>26):n+=8;this._strip()},n.prototype._parseBase=function(t,e,i){this.words=[0];for(var r=0,s=this.length=1;s<=67108863;s*=e)r++;s=s/e|0;for(var n=t.length-i,o=n%--r,a=Math.min(n,n-o)+i,h=0,u=i;u<a;u+=r)h=c(t,u,u+r,e),this.imuln(s),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!=o){var l=1;for(h=c(t,u,t.length,e),u=0;u<o;u++)l*=e;this.imuln(l),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this._strip()},n.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype._move=function(t){u(t,this)},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},n.prototype._strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(t){n.prototype.inspect=l}else n.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function g(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0,s=(r=(i.length=r)-1|0,(o=(0|t.words[0])*(0|e.words[0]))/67108864|0);i.words[0]=67108863&o;for(var n=1;n<r;n++){for(var o,a=s>>>26,h=67108863&s,c=Math.min(n,e.length-1),u=Math.max(0,n-t.length+1);u<=c;u++)a+=(o=(0|t.words[n-u|0])*(0|e.words[u])+h)/67108864|0,h=67108863&o;i.words[n]=0|h,s=0|a}return 0!==s?i.words[n]=0|s:i.length--,i._strip()}n.prototype.toString=function(t,e){if(e=0|e||1,16===(t=t||10)||"hex"===t){for(var i="",s=0,n=0,o=0;o<this.length;o++){var a=this.words[o],h=(16777215&(a<<s|n)).toString(16);n=a>>>24-s&16777215;26<=(s+=2)&&(s-=26,o--),i=0!==n||o!==this.length-1?f[6-h.length]+h+i:h+i}for(0!==n&&(i=n.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative?"-"+i:i}if(t===(0|t)&&2<=t&&t<=36){var c=d[t],u=p[t];for(i="",(l=this.clone()).negative=0;!l.isZero();){var l,g=l.modrn(u).toString(t);i=(l=l.idivn(u)).isZero()?g+i:f[c-g.length]+g+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative?"-"+i:i}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:2<this.length&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},n.prototype.toJSON=function(){return this.toString(16,2)},o&&(n.prototype.toBuffer=function(t,e){return this.toArrayLike(o,t,e)}),n.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},n.prototype.toArrayLike=function(t,e,i){this._strip();var s=this.byteLength();r(s<=(i=i||Math.max(1,s)),"byte array longer than desired length"),r(0<i,"Requested array length <= 0"),i=i,t=(t=t).allocUnsafe?t.allocUnsafe(i):new t(i);return this["_toArrayLike"+("le"===e?"LE":"BE")](t,s),t},n.prototype._toArrayLikeLE=function(t,e){for(var i=0,r=0,s=0,n=0;s<this.length;s++){var o=this.words[s]<<n|r;t[i++]=255&o,i<t.length&&(t[i++]=o>>8&255),i<t.length&&(t[i++]=o>>16&255),6===n?(i<t.length&&(t[i++]=o>>24&255),n=r=0):(r=o>>>24,n+=2)}if(i<t.length)for(t[i++]=r;i<t.length;)t[i++]=0},n.prototype._toArrayLikeBE=function(t,e){for(var i=t.length-1,r=0,s=0,n=0;s<this.length;s++){var o=this.words[s]<<n|r;t[i--]=255&o,0<=i&&(t[i--]=o>>8&255),0<=i&&(t[i--]=o>>16&255),6===n?(0<=i&&(t[i--]=o>>24&255),n=r=0):(r=o>>>24,n+=2)}if(0<=i)for(t[i--]=r;0<=i;)t[i--]=0},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var e=0;return 4096<=t&&(e+=13,t>>>=13),64<=t&&(e+=7,t>>>=7),8<=t&&(e+=4,t>>>=4),2<=t&&(e+=2,t>>>=2),e+t},n.prototype._zeroBits=function(t){var e;return 0===t?26:((e=0)==(8191&(t=t))&&(e+=13,t>>>=13),0==(127&t)&&(e+=7,t>>>=7),0==(15&t)&&(e+=4,t>>>=4),0==(3&t)&&(e+=2,t>>>=2),0==(1&t)&&e++,e)},n.prototype.bitLength=function(){var t=this.words[this.length-1];t=this._countBits(t);return 26*(this.length-1)+t},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},n.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){for(var e=this.length>t.length?t:this,i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this._strip()},n.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){for(var e,i=this.length>t.length?(e=this,t):(e=t,this),r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this._strip()},n.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){r("number"==typeof t&&0<=t);var e=0|Math.ceil(t/26);t%=26;this._expand(e),0<t&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return 0<t&&(this.words[i]=~this.words[i]&67108863>>26-t),this._strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,e){r("number"==typeof t&&0<=t);var i=t/26|0;t%=26;return this._expand(1+i),this.words[i]=e?this.words[i]|1<<t:this.words[i]&~(1<<t),this._strip()},n.prototype.iadd=function(t){var e,i;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();for(var r=this.length>t.length?(i=this,t):(i=t,this),s=0,n=0;n<r.length;n++)e=(0|i.words[n])+(0|r.words[n])+s,this.words[n]=67108863&e,s=e>>>26;for(;0!==s&&n<i.length;n++)e=(0|i.words[n])+s,this.words[n]=67108863&e,s=e>>>26;if(this.length=i.length,0!==s)this.words[this.length]=s,this.length++;else if(i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this},n.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){var e;if(0!==t.negative)return t.negative=0,e=this.iadd(t),t.negative=1,e._normSign();if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;for(var s=0<r?(i=this,t):(i=t,this),n=0,o=0;o<s.length;o++)n=(e=(0|i.words[o])-(0|s.words[o])+n)>>26,this.words[o]=67108863&e;for(;0!==n&&o<i.length;o++)n=(e=(0|i.words[o])+n)>>26,this.words[o]=67108863&e;if(0===n&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(t){return this.clone().isub(t)};var m=function(t,e,i){var r,s=t.words,n=e.words,o=i.words,a=8191&(h=0|s[0]),h=h>>>13,c=8191&(u=0|s[1]),u=u>>>13,l=8191&(f=0|s[2]),f=f>>>13,d=8191&(p=0|s[3]),p=p>>>13,g=8191&(m=0|s[4]),m=m>>>13,w=8191&(y=0|s[5]),y=y>>>13,b=8191&(v=0|s[6]),v=v>>>13,k=8191&(S=0|s[7]),S=S>>>13,_=8191&(x=0|s[8]),x=x>>>13,R=8191&(s=0|s[9]),E=(s=s>>>13,8191&(A=0|n[0])),A=A>>>13,M=8191&(O=0|n[1]),O=O>>>13,I=8191&(C=0|n[2]),C=C>>>13,T=8191&(P=0|n[3]),P=P>>>13,B=8191&(N=0|n[4]),N=N>>>13,L=8191&(H=0|n[5]),H=H>>>13,U=8191&(D=0|n[6]),D=D>>>13,z=8191&(V=0|n[7]),V=V>>>13,F=8191&(j=0|n[8]),j=j>>>13,K=8191&(n=0|n[9]),q=(n=n>>>13,e=(i.negative=t.negative^e.negative,i.length=19,(0+Math.imul(a,E)|0)+((8191&(t=Math.imul(a,A)+Math.imul(h,E)|0))<<13)|0),(Math.imul(h,A)+(t>>>13)|0)+(e>>>26)|0);e&=67108863,r=Math.imul(c,E),t=Math.imul(c,A)+Math.imul(u,E)|0,W=Math.imul(u,A);var W,X=(q+(r+Math.imul(a,M)|0)|0)+((8191&(t=(t+Math.imul(a,O)|0)+Math.imul(h,M)|0))<<13)|0,Y=(q=((W+Math.imul(h,O)|0)+(t>>>13)|0)+(X>>>26)|0,X&=67108863,r=Math.imul(l,E),t=Math.imul(l,A)+Math.imul(f,E)|0,W=Math.imul(f,A),r=r+Math.imul(c,M)|0,t=(t+Math.imul(c,O)|0)+Math.imul(u,M)|0,W=W+Math.imul(u,O)|0,(q+(r+Math.imul(a,I)|0)|0)+((8191&(t=(t+Math.imul(a,C)|0)+Math.imul(h,I)|0))<<13)|0),G=(q=((W+Math.imul(h,C)|0)+(t>>>13)|0)+(Y>>>26)|0,Y&=67108863,r=Math.imul(d,E),t=Math.imul(d,A)+Math.imul(p,E)|0,W=Math.imul(p,A),r=r+Math.imul(l,M)|0,t=(t+Math.imul(l,O)|0)+Math.imul(f,M)|0,W=W+Math.imul(f,O)|0,r=r+Math.imul(c,I)|0,t=(t+Math.imul(c,C)|0)+Math.imul(u,I)|0,W=W+Math.imul(u,C)|0,(q+(r+Math.imul(a,T)|0)|0)+((8191&(t=(t+Math.imul(a,P)|0)+Math.imul(h,T)|0))<<13)|0),$=(q=((W+Math.imul(h,P)|0)+(t>>>13)|0)+(G>>>26)|0,G&=67108863,r=Math.imul(g,E),t=Math.imul(g,A)+Math.imul(m,E)|0,W=Math.imul(m,A),r=r+Math.imul(d,M)|0,t=(t+Math.imul(d,O)|0)+Math.imul(p,M)|0,W=W+Math.imul(p,O)|0,r=r+Math.imul(l,I)|0,t=(t+Math.imul(l,C)|0)+Math.imul(f,I)|0,W=W+Math.imul(f,C)|0,r=r+Math.imul(c,T)|0,t=(t+Math.imul(c,P)|0)+Math.imul(u,T)|0,W=W+Math.imul(u,P)|0,(q+(r+Math.imul(a,B)|0)|0)+((8191&(t=(t+Math.imul(a,N)|0)+Math.imul(h,B)|0))<<13)|0),J=(q=((W+Math.imul(h,N)|0)+(t>>>13)|0)+($>>>26)|0,$&=67108863,r=Math.imul(w,E),t=Math.imul(w,A)+Math.imul(y,E)|0,W=Math.imul(y,A),r=r+Math.imul(g,M)|0,t=(t+Math.imul(g,O)|0)+Math.imul(m,M)|0,W=W+Math.imul(m,O)|0,r=r+Math.imul(d,I)|0,t=(t+Math.imul(d,C)|0)+Math.imul(p,I)|0,W=W+Math.imul(p,C)|0,r=r+Math.imul(l,T)|0,t=(t+Math.imul(l,P)|0)+Math.imul(f,T)|0,W=W+Math.imul(f,P)|0,r=r+Math.imul(c,B)|0,t=(t+Math.imul(c,N)|0)+Math.imul(u,B)|0,W=W+Math.imul(u,N)|0,(q+(r+Math.imul(a,L)|0)|0)+((8191&(t=(t+Math.imul(a,H)|0)+Math.imul(h,L)|0))<<13)|0),Z=(q=((W+Math.imul(h,H)|0)+(t>>>13)|0)+(J>>>26)|0,J&=67108863,r=Math.imul(b,E),t=Math.imul(b,A)+Math.imul(v,E)|0,W=Math.imul(v,A),r=r+Math.imul(w,M)|0,t=(t+Math.imul(w,O)|0)+Math.imul(y,M)|0,W=W+Math.imul(y,O)|0,r=r+Math.imul(g,I)|0,t=(t+Math.imul(g,C)|0)+Math.imul(m,I)|0,W=W+Math.imul(m,C)|0,r=r+Math.imul(d,T)|0,t=(t+Math.imul(d,P)|0)+Math.imul(p,T)|0,W=W+Math.imul(p,P)|0,r=r+Math.imul(l,B)|0,t=(t+Math.imul(l,N)|0)+Math.imul(f,B)|0,W=W+Math.imul(f,N)|0,r=r+Math.imul(c,L)|0,t=(t+Math.imul(c,H)|0)+Math.imul(u,L)|0,W=W+Math.imul(u,H)|0,(q+(r+Math.imul(a,U)|0)|0)+((8191&(t=(t+Math.imul(a,D)|0)+Math.imul(h,U)|0))<<13)|0),Q=(q=((W+Math.imul(h,D)|0)+(t>>>13)|0)+(Z>>>26)|0,Z&=67108863,r=Math.imul(k,E),t=Math.imul(k,A)+Math.imul(S,E)|0,W=Math.imul(S,A),r=r+Math.imul(b,M)|0,t=(t+Math.imul(b,O)|0)+Math.imul(v,M)|0,W=W+Math.imul(v,O)|0,r=r+Math.imul(w,I)|0,t=(t+Math.imul(w,C)|0)+Math.imul(y,I)|0,W=W+Math.imul(y,C)|0,r=r+Math.imul(g,T)|0,t=(t+Math.imul(g,P)|0)+Math.imul(m,T)|0,W=W+Math.imul(m,P)|0,r=r+Math.imul(d,B)|0,t=(t+Math.imul(d,N)|0)+Math.imul(p,B)|0,W=W+Math.imul(p,N)|0,r=r+Math.imul(l,L)|0,t=(t+Math.imul(l,H)|0)+Math.imul(f,L)|0,W=W+Math.imul(f,H)|0,r=r+Math.imul(c,U)|0,t=(t+Math.imul(c,D)|0)+Math.imul(u,U)|0,W=W+Math.imul(u,D)|0,(q+(r+Math.imul(a,z)|0)|0)+((8191&(t=(t+Math.imul(a,V)|0)+Math.imul(h,z)|0))<<13)|0),tt=(q=((W+Math.imul(h,V)|0)+(t>>>13)|0)+(Q>>>26)|0,Q&=67108863,r=Math.imul(_,E),t=Math.imul(_,A)+Math.imul(x,E)|0,W=Math.imul(x,A),r=r+Math.imul(k,M)|0,t=(t+Math.imul(k,O)|0)+Math.imul(S,M)|0,W=W+Math.imul(S,O)|0,r=r+Math.imul(b,I)|0,t=(t+Math.imul(b,C)|0)+Math.imul(v,I)|0,W=W+Math.imul(v,C)|0,r=r+Math.imul(w,T)|0,t=(t+Math.imul(w,P)|0)+Math.imul(y,T)|0,W=W+Math.imul(y,P)|0,r=r+Math.imul(g,B)|0,t=(t+Math.imul(g,N)|0)+Math.imul(m,B)|0,W=W+Math.imul(m,N)|0,r=r+Math.imul(d,L)|0,t=(t+Math.imul(d,H)|0)+Math.imul(p,L)|0,W=W+Math.imul(p,H)|0,r=r+Math.imul(l,U)|0,t=(t+Math.imul(l,D)|0)+Math.imul(f,U)|0,W=W+Math.imul(f,D)|0,r=r+Math.imul(c,z)|0,t=(t+Math.imul(c,V)|0)+Math.imul(u,z)|0,W=W+Math.imul(u,V)|0,(q+(r+Math.imul(a,F)|0)|0)+((8191&(t=(t+Math.imul(a,j)|0)+Math.imul(h,F)|0))<<13)|0);q=((W+Math.imul(h,j)|0)+(t>>>13)|0)+(tt>>>26)|0,tt&=67108863,r=Math.imul(R,E),t=Math.imul(R,A)+Math.imul(s,E)|0,W=Math.imul(s,A),r=r+Math.imul(_,M)|0,t=(t+Math.imul(_,O)|0)+Math.imul(x,M)|0,W=W+Math.imul(x,O)|0,r=r+Math.imul(k,I)|0,t=(t+Math.imul(k,C)|0)+Math.imul(S,I)|0,W=W+Math.imul(S,C)|0,r=r+Math.imul(b,T)|0,t=(t+Math.imul(b,P)|0)+Math.imul(v,T)|0,W=W+Math.imul(v,P)|0,r=r+Math.imul(w,B)|0,t=(t+Math.imul(w,N)|0)+Math.imul(y,B)|0,W=W+Math.imul(y,N)|0,r=r+Math.imul(g,L)|0,t=(t+Math.imul(g,H)|0)+Math.imul(m,L)|0,W=W+Math.imul(m,H)|0,r=r+Math.imul(d,U)|0,t=(t+Math.imul(d,D)|0)+Math.imul(p,U)|0,W=W+Math.imul(p,D)|0,r=r+Math.imul(l,z)|0,t=(t+Math.imul(l,V)|0)+Math.imul(f,z)|0,W=W+Math.imul(f,V)|0,r=r+Math.imul(c,F)|0,t=(t+Math.imul(c,j)|0)+Math.imul(u,F)|0,W=W+Math.imul(u,j)|0,E=(q+(r+Math.imul(a,K)|0)|0)+((8191&(t=(t+Math.imul(a,n)|0)+Math.imul(h,K)|0))<<13)|0,q=((W+Math.imul(h,n)|0)+(t>>>13)|0)+(E>>>26)|0,E&=67108863,r=Math.imul(R,M),t=Math.imul(R,O)+Math.imul(s,M)|0,W=Math.imul(s,O),r=r+Math.imul(_,I)|0,t=(t+Math.imul(_,C)|0)+Math.imul(x,I)|0,W=W+Math.imul(x,C)|0,r=r+Math.imul(k,T)|0,t=(t+Math.imul(k,P)|0)+Math.imul(S,T)|0,W=W+Math.imul(S,P)|0,r=r+Math.imul(b,B)|0,t=(t+Math.imul(b,N)|0)+Math.imul(v,B)|0,W=W+Math.imul(v,N)|0,r=r+Math.imul(w,L)|0,t=(t+Math.imul(w,H)|0)+Math.imul(y,L)|0,W=W+Math.imul(y,H)|0,r=r+Math.imul(g,U)|0,t=(t+Math.imul(g,D)|0)+Math.imul(m,U)|0,W=W+Math.imul(m,D)|0,r=r+Math.imul(d,z)|0,t=(t+Math.imul(d,V)|0)+Math.imul(p,z)|0,W=W+Math.imul(p,V)|0,r=r+Math.imul(l,F)|0,t=(t+Math.imul(l,j)|0)+Math.imul(f,F)|0,W=W+Math.imul(f,j)|0,A=(q+(r+Math.imul(c,K)|0)|0)+((8191&(t=(t+Math.imul(c,n)|0)+Math.imul(u,K)|0))<<13)|0,q=((W+Math.imul(u,n)|0)+(t>>>13)|0)+(A>>>26)|0,A&=67108863,r=Math.imul(R,I),t=Math.imul(R,C)+Math.imul(s,I)|0,W=Math.imul(s,C),r=r+Math.imul(_,T)|0,t=(t+Math.imul(_,P)|0)+Math.imul(x,T)|0,W=W+Math.imul(x,P)|0,r=r+Math.imul(k,B)|0,t=(t+Math.imul(k,N)|0)+Math.imul(S,B)|0,W=W+Math.imul(S,N)|0,r=r+Math.imul(b,L)|0,t=(t+Math.imul(b,H)|0)+Math.imul(v,L)|0,W=W+Math.imul(v,H)|0,r=r+Math.imul(w,U)|0,t=(t+Math.imul(w,D)|0)+Math.imul(y,U)|0,W=W+Math.imul(y,D)|0,r=r+Math.imul(g,z)|0,t=(t+Math.imul(g,V)|0)+Math.imul(m,z)|0,W=W+Math.imul(m,V)|0,r=r+Math.imul(d,F)|0,t=(t+Math.imul(d,j)|0)+Math.imul(p,F)|0,W=W+Math.imul(p,j)|0,a=(q+(r+Math.imul(l,K)|0)|0)+((8191&(t=(t+Math.imul(l,n)|0)+Math.imul(f,K)|0))<<13)|0,q=((W+Math.imul(f,n)|0)+(t>>>13)|0)+(a>>>26)|0,a&=67108863,r=Math.imul(R,T),t=Math.imul(R,P)+Math.imul(s,T)|0,W=Math.imul(s,P),r=r+Math.imul(_,B)|0,t=(t+Math.imul(_,N)|0)+Math.imul(x,B)|0,W=W+Math.imul(x,N)|0,r=r+Math.imul(k,L)|0,t=(t+Math.imul(k,H)|0)+Math.imul(S,L)|0,W=W+Math.imul(S,H)|0,r=r+Math.imul(b,U)|0,t=(t+Math.imul(b,D)|0)+Math.imul(v,U)|0,W=W+Math.imul(v,D)|0,r=r+Math.imul(w,z)|0,t=(t+Math.imul(w,V)|0)+Math.imul(y,z)|0,W=W+Math.imul(y,V)|0,r=r+Math.imul(g,F)|0,t=(t+Math.imul(g,j)|0)+Math.imul(m,F)|0,W=W+Math.imul(m,j)|0,h=(q+(r+Math.imul(d,K)|0)|0)+((8191&(t=(t+Math.imul(d,n)|0)+Math.imul(p,K)|0))<<13)|0,q=((W+Math.imul(p,n)|0)+(t>>>13)|0)+(h>>>26)|0,h&=67108863,r=Math.imul(R,B),t=Math.imul(R,N)+Math.imul(s,B)|0,W=Math.imul(s,N),r=r+Math.imul(_,L)|0,t=(t+Math.imul(_,H)|0)+Math.imul(x,L)|0,W=W+Math.imul(x,H)|0,r=r+Math.imul(k,U)|0,t=(t+Math.imul(k,D)|0)+Math.imul(S,U)|0,W=W+Math.imul(S,D)|0,r=r+Math.imul(b,z)|0,t=(t+Math.imul(b,V)|0)+Math.imul(v,z)|0,W=W+Math.imul(v,V)|0,r=r+Math.imul(w,F)|0,t=(t+Math.imul(w,j)|0)+Math.imul(y,F)|0,W=W+Math.imul(y,j)|0,M=(q+(r+Math.imul(g,K)|0)|0)+((8191&(t=(t+Math.imul(g,n)|0)+Math.imul(m,K)|0))<<13)|0,q=((W+Math.imul(m,n)|0)+(t>>>13)|0)+(M>>>26)|0,M&=67108863,r=Math.imul(R,L),t=Math.imul(R,H)+Math.imul(s,L)|0,W=Math.imul(s,H),r=r+Math.imul(_,U)|0,t=(t+Math.imul(_,D)|0)+Math.imul(x,U)|0,W=W+Math.imul(x,D)|0,r=r+Math.imul(k,z)|0,t=(t+Math.imul(k,V)|0)+Math.imul(S,z)|0,W=W+Math.imul(S,V)|0,r=r+Math.imul(b,F)|0,t=(t+Math.imul(b,j)|0)+Math.imul(v,F)|0,W=W+Math.imul(v,j)|0,O=(q+(r+Math.imul(w,K)|0)|0)+((8191&(t=(t+Math.imul(w,n)|0)+Math.imul(y,K)|0))<<13)|0,q=((W+Math.imul(y,n)|0)+(t>>>13)|0)+(O>>>26)|0,O&=67108863,r=Math.imul(R,U),t=Math.imul(R,D)+Math.imul(s,U)|0,W=Math.imul(s,D),r=r+Math.imul(_,z)|0,t=(t+Math.imul(_,V)|0)+Math.imul(x,z)|0,W=W+Math.imul(x,V)|0,r=r+Math.imul(k,F)|0,t=(t+Math.imul(k,j)|0)+Math.imul(S,F)|0,W=W+Math.imul(S,j)|0,c=(q+(r+Math.imul(b,K)|0)|0)+((8191&(t=(t+Math.imul(b,n)|0)+Math.imul(v,K)|0))<<13)|0,q=((W+Math.imul(v,n)|0)+(t>>>13)|0)+(c>>>26)|0,c&=67108863,r=Math.imul(R,z),t=Math.imul(R,V)+Math.imul(s,z)|0,W=Math.imul(s,V),r=r+Math.imul(_,F)|0,t=(t+Math.imul(_,j)|0)+Math.imul(x,F)|0,W=W+Math.imul(x,j)|0,u=(q+(r+Math.imul(k,K)|0)|0)+((8191&(t=(t+Math.imul(k,n)|0)+Math.imul(S,K)|0))<<13)|0,q=((W+Math.imul(S,n)|0)+(t>>>13)|0)+(u>>>26)|0,u&=67108863,r=Math.imul(R,F),t=Math.imul(R,j)+Math.imul(s,F)|0,W=Math.imul(s,j),I=(q+(r+Math.imul(_,K)|0)|0)+((8191&(t=(t+Math.imul(_,n)|0)+Math.imul(x,K)|0))<<13)|0,q=((W+Math.imul(x,n)|0)+(t>>>13)|0)+(I>>>26)|0,I&=67108863,C=(q+Math.imul(R,K)|0)+((8191&(t=Math.imul(R,n)+Math.imul(s,K)|0))<<13)|0;return q=(Math.imul(s,n)+(t>>>13)|0)+(C>>>26)|0,C&=67108863,o[0]=e,o[1]=X,o[2]=Y,o[3]=G,o[4]=$,o[5]=J,o[6]=Z,o[7]=Q,o[8]=tt,o[9]=E,o[10]=A,o[11]=a,o[12]=h,o[13]=M,o[14]=O,o[15]=c,o[16]=u,o[17]=I,o[18]=C,0!=q&&(o[19]=q,i.length++),i};function w(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,s=0,n=0;n<i.length-1;n++){for(var o=s,a=(s=0,67108863&r),h=Math.min(n,e.length-1),c=Math.max(0,n-t.length+1);c<=h;c++){var u,l=(0|t.words[n-c])*(0|e.words[c]);a=67108863&(u=(67108863&l)+a|0);s+=(o=(o=o+(l/67108864|0)|0)+(u>>>26)|0)>>>26,o&=67108863}i.words[n]=a,r=o,o=s}return 0!==r?i.words[n]=r:i.length--,i._strip()}function y(t,e,i){return w(t,e,i)}Math.imul||(m=g),n.prototype.mulTo=function(t,e){var i=this.length+t.length;return i=(10===this.length&&10===t.length?m:i<63?g:i<1024?w:y)(this,t,e)},n.prototype.mul=function(t){var e=new n(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},n.prototype.mulf=function(t){var e=new n(null);return e.words=new Array(this.length+t.length),y(this,t,e)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){for(var e=t<0,i=(r("number"==typeof(t=e?-t:t)),r(t<67108864),0),s=0;s<this.length;s++){var n=(0|this.words[s])*t,o=(67108863&n)+(67108863&i);i=(i>>=26)+(n/67108864|0)+(o>>>26);this.words[s]=67108863&o}return 0!==i&&(this.words[s]=i,this.length++),e?this.ineg():this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++)e[i]=t.words[i/26|0]>>>i%26&1;return e}(t);if(0===e.length)return new n(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var s=i.sqr();r<e.length;r++,s=s.sqr())0!==e[r]&&(i=i.mul(s));return i},n.prototype.iushln=function(t){r("number"==typeof t&&0<=t);var e=t%26,i=(t-e)/26,s=67108863>>>26-e<<26-e;if(0!=e){for(var n=0,o=0;o<this.length;o++){var a=this.words[o]&s,h=(0|this.words[o])-a<<e;this.words[o]=h|n,n=a>>>26-e}n&&(this.words[o]=n,this.length++)}if(0!=i){for(o=this.length-1;0<=o;o--)this.words[o+i]=this.words[o];for(o=0;o<i;o++)this.words[o]=0;this.length+=i}return this._strip()},n.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},n.prototype.iushrn=function(t,e,i){r("number"==typeof t&&0<=t),s=e?(e-e%26)/26:0;var s,n=t%26,o=Math.min((t-n)/26,this.length),a=67108863^67108863>>>n<<n,h=i;if(s-=o,s=Math.max(0,s),h){for(var c=0;c<o;c++)h.words[c]=this.words[c];h.length=o}if(0!==o)if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;0<=c&&(0!==u||s<=c);c--){var l=0|this.words[c];this.words[c]=u<<26-n|l>>>n,u=l&a}return h&&0!==u&&(h.words[h.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(t,e,i){return r(0===this.negative),this.iushrn(t,e,i)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){r("number"==typeof t&&0<=t);var e=t%26;t=(t-e)/26;return!(this.length<=t||!(this.words[t]&1<<e))},n.prototype.imaskn=function(t){r("number"==typeof t&&0<=t);var e=t%26;t=(t-e)/26;return r(0===this.negative,"imaskn works only with positive numbers"),this.length<=t?this:(0!=e&&t++,this.length=Math.min(t,this.length),0!=e&&(this.words[this.length-1]&=67108863^67108863>>>e<<e),this._strip())},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&67108864<=this.words[e];e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},n.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,--this.words[e+1];return this._strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,e,i){for(var s=t.length+i,n=(this._expand(s),0),o=0;o<t.length;o++){var a=(0|this.words[o+i])+n,h=(0|t.words[o])*e;n=((a-=67108863&h)>>26)-(h/67108864|0);this.words[o+i]=67108863&a}for(;o<this.length-i;o++)n=(a=(0|this.words[o+i])+n)>>26,this.words[o+i]=67108863&a;if(0!==n){for(r(-1===n),o=n=0;o<this.length;o++)n=(a=-(0|this.words[o])+n)>>26,this.words[o]=67108863&a;this.negative=1}return this._strip()},n.prototype._wordDiv=function(t,e){this.length,t.length;var i,r=this.clone(),s=t,o=0|s.words[s.length-1],a=(0!=(t=26-this._countBits(o))&&(s=s.ushln(t),r.iushln(t),o=0|s.words[s.length-1]),r.length-s.length);if("mod"!==e){(i=new n(null)).length=1+a,i.words=new Array(i.length);for(var h=0;h<i.length;h++)i.words[h]=0}var c=r.clone()._ishlnsubmul(s,1,a);0===c.negative&&(r=c,i)&&(i.words[a]=1);for(var u=a-1;0<=u;u--){var l=67108864*(0|r.words[s.length+u])+(0|r.words[s.length+u-1]);l=Math.min(l/o|0,67108863);for(r._ishlnsubmul(s,l,u);0!==r.negative;)l--,r.negative=0,r._ishlnsubmul(s,1,u),r.isZero()||(r.negative^=1);i&&(i.words[u]=l)}return i&&i._strip(),r._strip(),"div"!==e&&0!=t&&r.iushrn(t),{div:i||null,mod:r}},n.prototype.divmod=function(t,e,i){var s,o,a;return r(!t.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(s=a.div.neg()),"div"!==e&&(o=a.mod.neg(),i)&&0!==o.negative&&o.iadd(t),{div:s,mod:o}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),{div:s="mod"!==e?a.div.neg():s,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(o=a.mod.neg(),i)&&0!==o.negative&&o.isub(t),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new n(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new n(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modrn(t.words[0]))}:this._wordDiv(t,e)},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var e,i,r=this.divmod(t);return r.mod.isZero()||(i=0!==r.div.negative?r.mod.isub(t):r.mod,e=t.ushrn(1),t=t.andln(1),(i=i.cmp(e))<0)||1===t&&0===i?r.div:0!==r.div.negative?r.div.isubn(1):r.div.iaddn(1)},n.prototype.modrn=function(t){for(var e=t<0,i=(r((t=e?-t:t)<=67108863),(1<<26)%t),s=0,n=this.length-1;0<=n;n--)s=(i*s+(0|this.words[n]))%t;return e?-s:s},n.prototype.modn=function(t){return this.modrn(t)},n.prototype.idivn=function(t){for(var e=t<0,i=(r((t=e?-t:t)<=67108863),0),s=this.length-1;0<=s;s--){var n=(0|this.words[s])+67108864*i;this.words[s]=n/t|0,i=n%t}return this._strip(),e?this.ineg():this},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());for(var e=this,i=t.clone(),s=(e=0!==e.negative?e.umod(t):e.clone(),new n(1)),o=new n(0),a=new n(0),h=new n(1),c=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++c;for(var u=i.clone(),l=e.clone();!e.isZero();){for(var f=0,d=1;0==(e.words[0]&d)&&f<26;++f,d<<=1);if(0<f)for(e.iushrn(f);0<f--;)(s.isOdd()||o.isOdd())&&(s.iadd(u),o.isub(l)),s.iushrn(1),o.iushrn(1);for(var p=0,g=1;0==(i.words[0]&g)&&p<26;++p,g<<=1);if(0<p)for(i.iushrn(p);0<p--;)(a.isOdd()||h.isOdd())&&(a.iadd(u),h.isub(l)),a.iushrn(1),h.iushrn(1);0<=e.cmp(i)?(e.isub(i),s.isub(a),o.isub(h)):(i.isub(e),a.isub(s),h.isub(o))}return{a:a,b:h,gcd:i.iushln(c)}},n.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());for(var e,i=this,s=t.clone(),o=(i=0!==i.negative?i.umod(t):i.clone(),new n(1)),a=new n(0),h=s.clone();0<i.cmpn(1)&&0<s.cmpn(1);){for(var c=0,u=1;0==(i.words[0]&u)&&c<26;++c,u<<=1);if(0<c)for(i.iushrn(c);0<c--;)o.isOdd()&&o.iadd(h),o.iushrn(1);for(var l=0,f=1;0==(s.words[0]&f)&&l<26;++l,f<<=1);if(0<l)for(s.iushrn(l);0<l--;)a.isOdd()&&a.iadd(h),a.iushrn(1);0<=i.cmp(s)?(i.isub(s),o.isub(a)):(s.isub(i),a.isub(o))}return(e=0===i.cmpn(1)?o:a).cmpn(0)<0&&e.iadd(t),e},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0;for(var r=i.negative=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var s=e.cmp(i);if(s<0){var n=e;e=i,i=n}else if(0===s||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return 0==(1&this.words[0])},n.prototype.isOdd=function(){return 1==(1&this.words[0])},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){r("number"==typeof t);t=(t-(e=t%26))/26;var e=1<<e;if(this.length<=t)this._expand(1+t),this.words[t]|=e;else{for(var i=e,s=t;0!==i&&s<this.length;s++){var n=0|this.words[s];i=(n+=i)>>>26;n&=67108863,this.words[s]=n}0!==i&&(this.words[s]=i,this.length++)}return this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(t){var e=t<0;return 0===this.negative||e?0===this.negative&&e?1:(this._strip(),e=1<this.length?1:(r((t=e?-t:t)<=67108863,"Number is too big"),(e=0|this.words[0])===t?0:e<t?-1:1),0!==this.negative?0|-e:e):-1},n.prototype.cmp=function(t){return 0!==this.negative&&0===t.negative?-1:0===this.negative&&0!==t.negative?1:(t=this.ucmp(t),0!==this.negative?0|-t:t)},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;0<=i;i--){var r=0|this.words[i],s=0|t.words[i];if(r!=s){r<s?e=-1:s<r&&(e=1);break}}return e},n.prototype.gtn=function(t){return 1===this.cmpn(t)},n.prototype.gt=function(t){return 1===this.cmp(t)},n.prototype.gten=function(t){return 0<=this.cmpn(t)},n.prototype.gte=function(t){return 0<=this.cmp(t)},n.prototype.ltn=function(t){return-1===this.cmpn(t)},n.prototype.lt=function(t){return-1===this.cmp(t)},n.prototype.lten=function(t){return this.cmpn(t)<=0},n.prototype.lte=function(t){return this.cmp(t)<=0},n.prototype.eqn=function(t){return 0===this.cmpn(t)},n.prototype.eq=function(t){return 0===this.cmp(t)},n.red=function(t){return new R(t)},n.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var b={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new n(e,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function k(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function S(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function R(t){var e;"string"==typeof t?(e=n._prime(t),this.m=e.p,this.prime=e):(r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null)}function E(t){R.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new n(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){for(var e,i=t;this.split(i,this.tmp),(e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength())>this.n;);return 0===(t=e<this.n?-1:i.ucmp(this.p))?(i.words[0]=0,i.length=1):0<t?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},s(k,v),k.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)t.words[0]=0,t.length=1;else{var s=t.words[9];for(e.words[e.length++]=4194303&s,r=10;r<t.length;r++){var n=0|t.words[r];t.words[r-10]=(4194303&n)<<4|s>>>22,s=n}0==(t.words[r-10]=s>>>=22)&&10<t.length?t.length-=10:t.length-=9}},k.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1])&&t.length--,t},s(S,v),s(_,v),s(x,v),x.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,s=67108863&r;r>>>=26,t.words[i]=s,e=r}return 0!==e&&(t.words[t.length++]=e),t},n._prime=function(t){if(b[t])return b[t];var e;if("k256"===t)e=new k;else if("p224"===t)e=new S;else if("p192"===t)e=new _;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return b[t]=e},R.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},R.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},R.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(u(t,t.umod(this.m)._forceRed(this)),t)},R.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},R.prototype.add=function(t,e){return this._verify2(t,e),0<=(t=t.add(e)).cmp(this.m)&&t.isub(this.m),t._forceRed(this)},R.prototype.iadd=function(t,e){return this._verify2(t,e),0<=(t=t.iadd(e)).cmp(this.m)&&t.isub(this.m),t},R.prototype.sub=function(t,e){return this._verify2(t,e),(t=t.sub(e)).cmpn(0)<0&&t.iadd(this.m),t._forceRed(this)},R.prototype.isub=function(t,e){return this._verify2(t,e),(t=t.isub(e)).cmpn(0)<0&&t.iadd(this.m),t},R.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},R.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},R.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},R.prototype.isqr=function(t){return this.imul(t,t.clone())},R.prototype.sqr=function(t){return this.mul(t,t)},R.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e)return e=this.m.add(new n(1)).iushrn(2),this.pow(t,e);for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());for(var o=new n(1).toRed(this),a=o.redNeg(),h=this.m.subn(1).iushrn(1),c=new n(2*(c=this.m.bitLength())*c).toRed(this);0!==this.pow(c,h).cmp(a);)c.redIAdd(a);for(var u=this.pow(c,i),l=this.pow(t,i.addn(1).iushrn(1)),f=this.pow(t,i),d=s;0!==f.cmp(o);){for(var p=f,g=0;0!==p.cmp(o);g++)p=p.redSqr();r(g<d);var m=this.pow(u,new n(1).iushln(d-g-1));l=l.redMul(m),u=m.redSqr(),f=f.redMul(u),d=g}return l},R.prototype.invm=function(t){return 0!==(t=t._invmp(this.m)).negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},R.prototype.pow=function(t,e){if(e.isZero())return new n(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new n(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var s=i[0],o=0,a=0,h=e.bitLength()%26;for(0===h&&(h=26),r=e.length-1;0<=r;r--){for(var c=e.words[r],u=h-1;0<=u;u--){var l=c>>u&1;s!==i[0]&&(s=this.sqr(s)),0==l&&0===o?a=0:(o=o<<1|l,(4==++a||0===r&&0===u)&&(s=this.mul(s,i[o]),o=a=0))}h=26}return s},R.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},R.prototype.convertFrom=function(t){return(t=t.clone()).red=null,t},n.mont=function(t){return new E(t)},s(E,R),E.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},E.prototype.convertFrom=function(t){return(t=this.imod(t.mul(this.rinv))).red=null,t},E.prototype.imul=function(t,e){return t.isZero()||e.isZero()?(t.words[0]=0,t.length=1,t):(e=(t=t.imul(e)).maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),0<=(e=t=t.isub(e).iushrn(this.shift)).cmp(this.m)?e=t.isub(this.m):t.cmpn(0)<0&&(e=t.iadd(this.m)),e._forceRed(this))},E.prototype.mul=function(t,e){return(t.isZero()||e.isZero()?new n(0):(e=(t=t.mul(e)).maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),0<=(e=t=t.isub(e).iushrn(this.shift)).cmp(this.m)?e=t.isub(this.m):t.cmpn(0)<0&&(e=t.iadd(this.m)),e))._forceRed(this)},E.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,i(98)(t))},function(t,e){},function(t,e){},function(t,e,i){"use strict";var r=i(291),s=(i=(e.certificate=i(491),r.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}))),i=(e.RSAPrivateKey=i,r.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}))),i=(e.RSAPublicKey=i,r.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())}))),e.PublicKey=i,r.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}))),n=(i=r.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(s),this.key("subjectPrivateKey").octstr())})),i=(e.PrivateKey=i,r.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}))),i=(e.EncryptedPrivateKey=i,r.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}))),i=(e.DSAPrivateKey=i,e.DSAparam=r.define("DSAparam",(function(){this.int()})),r.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(n),this.key("publicKey").optional().explicit(1).bitstr())}))),e.ECPrivateKey=i,r.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})})));e.signature=r.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},function(t,e,i){"use strict";const r=i(292),s=i(294),n=i(5);function o(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}e.define=function(t,e){return new o(t,e)},o.prototype._createNamed=function(t){const e=this.name;function i(t){this._initNamed(t,e)}return n(i,t),i.prototype._initNamed=function(e,i){t.call(this,e,i)},new i(this)},o.prototype._getDecoder=function(t){return this.decoders.hasOwnProperty(t=t||"der")||(this.decoders[t]=this._createNamed(s[t])),this.decoders[t]},o.prototype.decode=function(t,e,i){return this._getDecoder(e).decode(t,i)},o.prototype._getEncoder=function(t){return this.encoders.hasOwnProperty(t=t||"der")||(this.encoders[t]=this._createNamed(r[t])),this.encoders[t]},o.prototype.encode=function(t,e,i){return this._getEncoder(e).encode(t,i)}},function(t,e,i){"use strict";var r=i(5);const s=i(293);function n(t){s.call(this,t),this.enc="pem"}r(n,s),(t.exports=n).prototype.encode=function(t,e){var i=s.prototype.encode.call(this,t).toString("base64"),r=["-----BEGIN "+e.label+"-----"];for(let t=0;t<i.length;t+=64)r.push(i.slice(t,t+64));return r.push("-----END "+e.label+"-----"),r.join("\n")}},function(t,e,i){"use strict";var r=i(5);const s=i(200).Buffer,n=i(295);function o(t){n.call(this,t),this.enc="pem"}r(o,n),(t.exports=o).prototype.decode=function(t,e){var i=t.toString().split(/[\r\n]+/g),r=e.label.toUpperCase(),o=/^-----(BEGIN|END) ([^-]+)-----$/;let a=-1,h=-1;for(let t=0;t<i.length;t++){var c=i[t].match(o);if(null!==c&&c[2]===r){if(-1!==a){if("END"!==c[1])break;h=t;break}if("BEGIN"!==c[1])break;a=t}}if(-1===a||-1===h)throw new Error("PEM section not found for: "+r);return(t=i.slice(a+1,h).join("")).replace(/[^a-z0-9+/=]+/gi,""),t=s.from(t,"base64"),n.prototype.decode.call(this,t,e)}},function(t,e,i){"use strict";e.Reporter=i(202).Reporter,e.DecoderBuffer=i(95).DecoderBuffer,e.EncoderBuffer=i(95).EncoderBuffer,e.Node=i(201)},function(t,e,i){"use strict";e._reverse=function(t){const e={};return Object.keys(t).forEach((function(i){(0|i)==i&&(i|=0);var r=t[i];e[r]=i})),e},e.der=i(203)},function(t,e,i){"use strict";var r=(i=i(291)).define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),s=i.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),n=i.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),o=i.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(n),this.key("subjectPublicKey").bitstr())})),a=i.define("RelativeDistinguishedName",(function(){this.setof(s)})),h=i.define("RDNSequence",(function(){this.seqof(a)})),c=i.define("Name",(function(){this.choice({rdnSequence:this.use(h)})})),u=i.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(r),this.key("notAfter").use(r))})),l=i.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),f=i.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(n),this.key("issuer").use(c),this.key("validity").use(u),this.key("subject").use(c),this.key("subjectPublicKeyInfo").use(o),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(l).optional())}));i=i.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(f),this.key("signatureAlgorithm").use(n),this.key("signatureValue").bitstr())}));t.exports=i},function(t){t.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')},function(t,e,i){var r=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,s=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,n=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,o=i(127),a=i(196),h=i(10).Buffer;t.exports=function(t,e){var i,c,u,l=(t=t.toString()).match(r);return u=l?(c="aes"+l[1],u=h.from(l[2],"hex"),i=h.from(l[3].replace(/[\r\n]/g,""),"base64"),e=o(e,u.slice(0,8),parseInt(l[1],10)).key,l=[],c=a.createDecipheriv(c,e,u),l.push(c.update(i)),l.push(c.final()),h.concat(l)):(e=t.match(n),h.from(e[2].replace(/[\r\n]/g,""),"base64")),{tag:t.match(s)[1],data:u}}},function(t,e,i){var r=i(10).Buffer,s=i(290),n=i(88).ec,o=i(128),a=i(296);function h(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=e)throw new Error("invalid sig")}t.exports=function(t,e,i,c,u){var l,f;if("ec"===(i=o(i)).type){if("ecdsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");var d,p=t,g=e,m=i,w=a[m.data.algorithm.curve.join(".")];if(w)return w=new n(w),d=m.data.subjectPrivateKey.data,w.verify(g,p,d);throw new Error("unknown curve "+m.data.algorithm.curve.join("."))}if("dsa"===i.type){if("dsa"!==c)throw new Error("wrong public key type");return w=t,g=e,d=(p=i).data.p,m=i.data.q,S=i.data.g,p=i.data.pub_key,l=(w=o.signature.decode(w,"der")).s,w=w.r,h(l,m),h(w,m),f=s.mont(d),l=l.invm(m),0===S.toRed(f).redPow(new s(g).mul(l).mod(m)).fromRed().mul(p.toRed(f).redPow(w.mul(l).mod(m)).fromRed()).mod(d).mod(m).cmp(w)}if("rsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");e=r.concat([u,e]);for(var y=i.modulus.byteLength(),b=[1],v=0;e.length+b.length+2<y;)b.push(255),v++;b.push(0);for(var k=-1;++k<e.length;)b.push(e[k]);b=r.from(b);var S=s.mont(i.modulus),_=(t=(t=new s(t).toRed(S)).redPow(new s(i.publicExponent)),t=r.from(t.fromRed().toArray()),v<8?1:0);y=Math.min(t.length,b.length);for(t.length!==b.length&&(_=1),k=-1;++k<y;)_|=t[k]^b[k];return 0===_}},function(t,e,i){(function(e){var r=i(88),s=i(40),n=(t.exports=function(t){return new o(t)},{secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}});function o(t){this.curveType=n[t],this.curveType||(this.curveType={name:t}),this.curve=new r.ec(this.curveType.name),this.keys=void 0}function a(t,i,r){return Array.isArray(t)||(t=t.toArray()),t=new e(t),r&&t.length<r&&((r=new e(r-t.length)).fill(0),t=e.concat([r,t])),i?t.toString(i):t}n.p224=n.secp224r1,n.p256=n.secp256r1=n.prime256v1,n.p192=n.secp192r1=n.prime192v1,n.p384=n.secp384r1,n.p521=n.secp521r1,o.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},o.prototype.computeSecret=function(t,i,r){return i=i||"utf8",e.isBuffer(t)||(t=new e(t,i)),a(this.curve.keyFromPublic(t).getPublic().mul(this.keys.getPrivate()).getX(),r,this.curveType.byteLength)},o.prototype.getPublicKey=function(t,e){var i=this.keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(i[i.length-1]%2?i[0]=7:i[0]=6),a(i,t)},o.prototype.getPrivateKey=function(t){return a(this.keys.getPrivate(),t)},o.prototype.setPublicKey=function(t,i){return i=i||"utf8",e.isBuffer(t)||(t=new e(t,i)),this.keys._importPublic(t),this},o.prototype.setPrivateKey=function(t,i){return i=i||"utf8",e.isBuffer(t)||(t=new e(t,i)),i=(i=new s(t)).toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(i),this}}).call(this,i(0).Buffer)},function(t,e,i){e.publicEncrypt=i(497),e.privateDecrypt=i(498),e.privateEncrypt=function(t,i){return e.publicEncrypt(t,i,!0)},e.publicDecrypt=function(t,i){return e.privateDecrypt(t,i,!0)}},function(t,e,i){var r=i(128),s=i(67),n=i(92),o=i(297),a=i(298),h=i(40),c=i(299),u=i(199),l=i(10).Buffer;t.exports=function(t,e,i){var f,d=t.padding||(i?1:4);t=r(t);if(4===d)f=function(t,e){t=t.modulus.byteLength();var i=e.length,r=(f=n("sha1").update(l.alloc(0)).digest()).length;if(t-(c=2*r)-2<i)throw new Error("message too long");i=l.alloc(t-i-c-2);var c=t-r-1,u=s(r),f=a(l.concat([f,i,l.alloc(1,1),e],c),o(u,c));i=a(u,o(f,r));return new h(l.concat([l.alloc(1),i,f],t))}(t,e);else if(1===d)f=function(t,e,i){var r=e.length;if((t=t.modulus.byteLength())-11<r)throw new Error("message too long");return r=i?l.alloc(t-r-3,255):function(t){for(var e,i=l.allocUnsafe(t),r=0,n=s(2*t),o=0;r<t;)o===n.length&&(n=s(2*t),o=0),(e=n[o++])&&(i[r++]=e);return i}(t-r-3),new h(l.concat([l.from([0,i?1:2]),r,l.alloc(1),e],t))}(t,e,i);else{if(3!==d)throw new Error("unknown padding");if(0<=(f=new h(e)).cmp(t.modulus))throw new Error("data too long for modulus")}return(i?u:c)(f,t)}},function(t,e,i){var r=i(128),s=i(297),n=i(298),o=i(40),a=i(199),h=i(92),c=i(299),u=i(10).Buffer;t.exports=function(t,e,i){var l=t.padding||(i?1:4),f=(t=r(t)).modulus.byteLength();if(e.length>f||0<=new o(e).cmp(t.modulus))throw new Error("decryption error");e=i?c(new o(e),t):a(e,t);var d=u.alloc(f-e.length);if(e=u.concat([d,e],f),4===l){d=e,f=(f=t).modulus.byteLength();var p=(t=h("sha1").update(u.alloc(0)).digest()).length;if(0===d[0]){var g=d.slice(1,p+1),m=(d=d.slice(p+1),g=n(g,s(d,p)),n(d,s(g,f-p-1)));if(!function(t,e){t=u.from(t),e=u.from(e);var i=0,r=t.length;t.length!==e.length&&(i++,r=Math.min(t.length,e.length));for(var s=-1;++s<r;)i+=t[s]^e[s];return i}(t,m.slice(0,p))){for(var w=p;0===m[w];)w++;if(1===m[w++])return m.slice(w)}}throw new Error("decryption error")}if(1===l){for(var y=e,b=(d=i,g=y.slice(0,2),2),v=0;0!==y[b++];)if(b>=y.length){v++;break}if(f=y.slice(2,b-1),("0002"!==g.toString("hex")&&!d||"0001"!==g.toString("hex")&&d)&&v++,f.length<8&&v++,v)throw new Error("decryption error");return y.slice(b)}if(3===l)return e;throw new Error("unknown padding")}},function(t,e,i){"use strict";(function(t,r){function s(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var n=i(10),o=i(67),a=n.Buffer,h=n.kMaxLength,c=t.crypto||t.msCrypto,u=Math.pow(2,32)-1;function l(t,e){if("number"!=typeof t||t!=t)throw new TypeError("offset must be a number");if(u<t||t<0)throw new TypeError("offset must be a uint32");if(h<t||e<t)throw new RangeError("offset out of range")}function f(t,e,i){if("number"!=typeof t||t!=t)throw new TypeError("size must be a number");if(u<t||t<0)throw new TypeError("size must be a uint32");if(i<t+e||h<t)throw new RangeError("buffer too small")}function d(t,e,i,s){var n;return r.browser?(n=t.buffer,n=new Uint8Array(n,e,i),c.getRandomValues(n),s?void r.nextTick((function(){s(null,t)})):t):s?void o(i,(function(i,r){if(i)return s(i);r.copy(t,e),s(null,t)})):(o(i).copy(t,e),t)}c&&c.getRandomValues||!r.browser?(e.randomFill=function(e,i,r,s){if(!(a.isBuffer(e)||e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof i)s=i,i=0,r=e.length;else if("function"==typeof r)s=r,r=e.length-i;else if("function"!=typeof s)throw new TypeError('"cb" argument must be a function');return l(i,e.length),f(r,i,e.length),d(e,i,r,s)},e.randomFillSync=function(e,i,r){if(void 0===i&&(i=0),!(a.isBuffer(e)||e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return l(i,e.length),void 0===r&&(r=e.length-i),f(r,i,e.length),d(e,i,r)}):(e.randomFill=s,e.randomFillSync=s)}).call(this,i(12),i(11))},function(t,e,i){"use strict";
/*!
 * TXMapWids.js - walletdb records
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(4),s=i(2),n=i(6),o=i(55);t.exports=class t{constructor(t,e){this.hash=t||r.NULL_HASH,this.wids=e||new Set}add(t){return!this.wids.has(t)&&(this.wids.add(t),!0)}remove(t){return this.wids.delete(t)}toWriter(t){return o.serializeWallets(t,this.wids)}getSize(){return o.sizeWallets(this.wids)}toRaw(){var t=this.getSize();return this.toWriter(new n(t)).render()}fromReader(t){return this.wids=o.parseWallets(t),this}fromRaw(t){return this.fromReader(new s(t))}static fromReader(e,i){return new t(e).fromReader(i)}static fromRaw(e,i){return new t(e).fromRaw(i)}}},function(t,e,i){"use strict";
/*!
 * TXDBState.js - persistent transaction pool
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */const r=i(302),s=i(6),n=i(2);t.exports=class t{constructor(t,e){this.wid=t,this.id=e,this.tx=0,this.coin=0,this.unconfirmed=0,this.confirmed=0,this.locked=0,this.committed=!1}clone(){var e=new t(this.wid,this.id);return e.tx=this.tx,e.coin=this.coin,e.unconfirmed=this.unconfirmed,e.confirmed=this.confirmed,e.locked=this.locked,e}commit(){return this.committed=!0,this.toRaw()}toBalance(){var t=new r(this.wid,this.id,-1);return t.unconfirmed=this.unconfirmed,t.confirmed=this.confirmed,t.locked=this.locked,t}toRaw(){var t=new s(32);return t.writeU64(this.tx),t.writeU64(this.coin),t.writeU64(this.unconfirmed),t.writeU64(this.confirmed),t.render()}fromRaw(t){return t=new n(t),this.tx=t.readU64(),this.coin=t.readU64(),this.unconfirmed=t.readU64(),this.confirmed=t.readU64(),this}static fromRaw(e,i,r){return new t(e,i).fromRaw(r)}toJSON(t){return{wid:t?void 0:this.wid,id:t?void 0:this.id,tx:this.tx,coin:this.coin,unconfirmed:this.unconfirmed,confirmed:this.confirmed,locked:this.locked}}inspect(){return this.toJSON()}}},function(t,e,i){"use strict";
/*!
 * Credit.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */const r=i(2),s=i(6),n=i(43);t.exports=class t{constructor(t,e){this.coin=t||new n,this.spent=e||!1,this.own=!1}fromRaw(t){return t=new r(t),this.coin.fromReader(t),this.spent=1===t.readU8(),this.own=!0,0<t.left()&&(this.own=1===t.readU8()),this}static fromRaw(e){return(new t).fromRaw(e)}getSize(){return this.coin.getSize()+2}toRaw(){var t=this.getSize();t=new s(t);return this.coin.toWriter(t),t.writeU8(this.spent?1:0),t.writeU8(this.own?1:0),t.render()}fromTX(t,e,i,r){return this.coin.fromTX(t,e,i,r),this.spent=!1,this.own=!1,this}static fromTX(e,i,r,s){return(new t).fromTX(e,i,r,s)}}},function(t,e,i){"use strict";
/*!
 * BlockRecord.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */const r=i(3),s=i(1),n=i(2),o=i(6),a=i(4);i(106),t.exports=class t{constructor(t,e,i){this.hash=t||a.NULL_HASH,this.height=null!=e?e:-1,this.time=i||0,this.hashes=[],this.index=new Set}add(t){return!this.index.has(t)&&(this.index.add(t),this.hashes.push(t),!0)}remove(t){return!!this.index.has(t)&&(this.index.delete(t),this.hashes[this.hashes.length-1]===t?this.hashes.pop():(t=this.hashes.indexOf(t),s(-1!==t),this.hashes.splice(t,1)),!0)}fromRaw(t){var e=new n(t),i=(this.hash=e.readHash("hex"),this.height=e.readU32(),this.time=e.readU32(),e.readU32());for(let t=0;t<i;t++){var r=e.readHash("hex");this.index.add(r),this.hashes.push(r)}return this}static fromRaw(e){return(new t).fromRaw(e)}getSize(){return 44+32*this.hashes.length}toRaw(){var t=this.getSize(),e=new o(t);e.writeHash(this.hash),e.writeU32(this.height),e.writeU32(this.time),e.writeU32(this.hashes.length);for(const t of this.hashes)e.writeHash(t);return e.render()}toJSON(){return{hash:r.revHex(this.hash),height:this.height,time:this.time,hashes:this.hashes.map(r.revHex)}}fromMeta(t){return this.hash=t.hash,this.height=t.height,this.time=t.time,this}static fromMeta(e){return(new t).fromMeta(e)}}},function(t,e,i){const r=i(31);class s extends Error{constructor(t,e,i){super(),this.type="FundingError",this.message=t,this.availableFunds=-1,this.requiredFunds=-1,null!=e&&(this.message+=` (available=${r.btc(e)},`,this.message+=` required=${r.btc(i)})`,this.availableFunds=e,this.requiredFunds=i),Error.captureStackTrace&&Error.captureStackTrace(this,s)}}t.exports=s},function(t,e,i){"use strict";(function(e,r){
/*!
 * child.js - child processes for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const s=i(1),n=i(14);function o(t){if(!(this instanceof o))return new o(t);n.call(this),this.init(t)}Object.setPrototypeOf(o.prototype,n.prototype),o.hasSupport=function(){return"function"==typeof e.postMessage},o.prototype.init=function(t){this.child=new e.Worker(t),this.child.onerror=t=>{this.emit("error",new Error("Child error.")),this.emit("exit",1,null)},this.child.onmessage=t=>{let e;"string"==typeof t.data?(e=r.from(t.data,"hex"),s(e.length===t.data.length/2)):(s(t.data&&"object"==typeof t.data),s(t.data.data&&"number"==typeof t.data.data.length),(e=t.data.data).__proto__=r.prototype),this.emit("data",e)}},o.prototype.write=function(t){return 2===this.child.postMessage.length?(t.__proto__=Uint8Array.prototype,this.child.postMessage({data:t},[t])):this.child.postMessage(t.toString("hex")),!0},o.prototype.destroy=function(){this.child.terminate(),this.emit("exit",143,"SIGTERM")},t.exports=o}).call(this,i(12),i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * EnvPacket.js - worker packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(2),s=i(4);var n=i(21);const o=i(17),a=i(3);class h extends n{constructor(t){super(),this.env=t||{},this.json=JSON.stringify(this.env),this.cmd=o.ENV}getSize(){return s.sizeVarString(this.json,"utf8")}toWriter(t){return t.writeVarString(this.json,"utf8"),t}fromRaw(t){return t=new r(t,!0),this.json=t.readVarString("utf8"),this.env=a.parseJson(this.json),this}static fromRaw(t){return(new h).fromRaw(t)}masterHandle(t){t.setEnv(this.env)}}t.exports=h},function(t,e,i){"use strict";(function(e,r){
/*!
 * parent.js - parent worker processes for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const s=i(1),n=i(14);function o(){if(!(this instanceof o))return new o;n.call(this),this.init()}Object.setPrototypeOf(o.prototype,n.prototype),o.prototype.init=function(){e.onerror=t=>{this.emit("error",new Error("Worker error."))},e.onmessage=t=>{let e;"string"==typeof t.data?(e=r.from(t.data,"hex"),s(e.length===t.data.length/2)):t.data&&"object"==typeof t.data&&t.data.data&&"number"==typeof t.data.data.length&&((e=t.data.data).__proto__=r.prototype),this.emit("data",e)}},o.prototype.write=function(t){return 2===e.postMessage.length?(t.__proto__=Uint8Array.prototype,e.postMessage({data:t},[t])):e.postMessage(t.toString("hex")),!0},o.prototype.destroy=function(){e.close()},t.exports=o}).call(this,i(12),i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * EventPacket.js - worker packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(2),s=i(4),n=i(17);var o=i(21);const a=i(3);class h extends o{constructor(t){super(),this.items=t||[],this.json=JSON.stringify(this.items),this.cmd=n.EVENT}getSize(){return s.sizeVarString(this.json,"utf8")}toWriter(t){return t.writeVarString(this.json,"utf8"),t}fromRaw(t){return t=new r(t,!0),this.json=t.readVarString("utf8"),this.items=a.parseJson(this.json),this}static fromRaw(t){return(new h).fromRaw(t)}workerHandle(t){t.emit("event",this.items),t.emit(...this.items)}masterHandle(t){t.emit("event",this.items),t.emit(...this.items)}}t.exports=h},function(t,e,i){"use strict";
/*!
 * LogPacket.js - worker packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(2),s=i(4),n=i(17);class o extends(i(21)){constructor(t){super(),this.text=t||"",this.cmd=n.LOG}getSize(){return s.sizeVarString(this.text,"utf8")}toWriter(t){return t.writeVarString(this.text,"utf8"),t}fromRaw(t){return t=new r(t,!0),this.text=t.readVarString("utf8"),this}static fromRaw(t){return(new o).fromRaw(t)}workerHandle(t){t.emit("log",this.text)}}t.exports=o},function(t,e,i){"use strict";
/*!
 * ErrorResultPacket.js - worker packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */var r=i(305);const s=i(17);class n extends r{constructor(t){super(t),this.cmd=s.ERRORRESULT}static fromRaw(t){return(new n).fromRaw(t)}workerHandle(t){t.rejectJob(this.id,this.error)}}t.exports=n},function(t,e,i){"use strict";
/*!
 * CheckPacket.js - worker packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(2),s=i(19),n=i(47);var o=i(21);const a=i(17),h=i(7).ContractStatus;class c extends o{constructor(t,e,i,r){super(),this.tx=t||null,this.view=e||null,this.flags=null!=i?i:null,this.status=null!=r?r:h.None,this.cmd=a.CHECK}getSize(){return this.tx.getSize()+this.view.getSize(this.tx)+4+4}toWriter(t){return this.tx.toWriter(t),this.view.toWriter(t,this.tx),t.writeI32(null!=this.flags?this.flags:-1),t.writeI32(null!=this.status?this.status:0),t}fromRaw(t){return t=new r(t,!0),this.tx=s.fromReader(t),this.view=n.fromReader(t,this.tx),this.flags=t.readI32(),-1===this.flags&&(this.flags=null),this.status=t.readI32(),this.status<0&&(this.status=h.None),this}static fromRaw(t){return(new c).fromRaw(t)}jobsHandle(t){return t.check(this.tx,this.view,this.flags,this.status)}}t.exports=c},function(t,e,i){"use strict";
/*!
 * SignPacket.js - worker packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(2),s=i(4),n=i(51),o=i(32);var a=i(21);const h=i(17);i(144);class c extends a{constructor(t,e,i,r){super(),this.tx=t||null,this.rings=e||[],this.type=null!=i?i:1,this.except=r||[],this.cmd=h.SIGN}getSize(){let t=0;t=(t=(t+=this.tx.getSize())+this.tx.view.getSize(this.tx))+s.sizeVarint(this.rings.length);for(const e of this.rings)t+=e.getSize();return(t=(t+=1)+s.sizeVarint(this.except.length))+ +this.except.length}toWriter(t){this.tx.toWriter(t),this.tx.view.toWriter(t,this.tx),t.writeVarint(this.rings.length);for(const e of this.rings)e.toWriter(t);t.writeU8(this.type),t.writeVarint(this.except.length);for(const e of this.except)t.writeU8(e);return t}fromRaw(t){var e=new r(t,!0),i=(this.tx=n.fromReader(e),this.tx.view.fromReader(e,this.tx),e.readVarint());for(let t=0;t<i;t++){var s=o.fromReader(e);this.rings.push(s)}this.type=e.readU8();var a=e.readVarint();for(let t=0;t<a;t++)this.except.push(e.readU8());return this}static fromRaw(t){return(new c).fromRaw(t)}jobsHandle(t){return t.sign(this.tx,this.rings,this.type,this.except)}}t.exports=c},function(t,e,i){"use strict";
/*!
 * SignResultPacket.js - worker packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1),s=i(2),n=i(4),o=i(16),a=i(115);var h=i(21);const c=i(17);class u extends h{constructor(t,e,i){super(),this.total=t||0,this.script=i||[],this.witness=e||[],this.cmd=c.SIGNRESULT}fromTX(t,e){this.total=e;for(const e of t.inputs)this.script.push(e.script),this.witness.push(e.witness);return this}static fromTX(t,e){return(new u).fromTX(t,e)}getSize(){let t=0;t=(t+=n.sizeVarint(this.total))+n.sizeVarint(this.script.length);for(let r=0;r<this.script.length;r++){var e=this.script[r],i=this.witness[r];t=(t+=e.getVarSize())+i.getVarSize()}return t}toWriter(t){r(this.script.length===this.witness.length),t.writeVarint(this.total),t.writeVarint(this.script.length);for(let e=0;e<this.script.length;e++)this.script[e].toWriter(t),this.witness[e].toWriter(t);return t}inject(t){r(this.script.length===t.inputs.length),r(this.witness.length===t.inputs.length);for(let i=0;i<t.inputs.length;i++){var e=t.inputs[i];e.script=this.script[i],e.witness=this.witness[i]}}fromRaw(t){var e=new s(t,!0),i=(this.total=e.readVarint(),e.readVarint());for(let t=0;t<i;t++)this.script.push(o.fromReader(e)),this.witness.push(a.fromReader(e));return this}static fromRaw(t){return(new u).fromRaw(t)}}t.exports=u},function(t,e,i){"use strict";
/*!
 * CheckInputPacket.js - worker packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(2),s=i(4),n=i(25),o=i(19),a=i(17);var h=i(21);const c=i(7).ContractStatus;class u extends h{constructor(t,e,i,r,s){super(),this.tx=t||null,this.index=e,this.coin=i||null,this.flags=null!=r?r:null,this.status=null!=s?s:c.None,this.cmd=a.CHECKINPUT}getSize(){var t=0;return(t+=this.tx.getSize())+s.sizeVarint(this.index)+s.sizeVarint(this.coin.value)+this.coin.script.getVarSize()+4+4}toWriter(t){return this.tx.toWriter(t),t.writeVarint(this.index),t.writeVarint(this.coin.value),this.coin.script.toWriter(t),t.writeI32(null!=this.flags?this.flags:-1),t.writeI32(null!=this.status?this.status:0),t}fromRaw(t){return t=new r(t,!0),this.tx=o.fromReader(t),this.index=t.readVarint(),this.coin=new n,this.coin.value=t.readVarint(),this.coin.script.fromReader(t),this.flags=t.readI32(),-1===this.flags&&(this.flags=null),this.status=t.readI32(),this.status<0&&(this.status=c.None),this}static fromRaw(t){return(new u).fromRaw(t)}jobsHandle(t){return t.checkInput(this.tx,this.index,this.coin,this.flags,this.status)}}t.exports=u},function(t,e,i){"use strict";
/*!
 * CheckInputResultPacket.js - worker packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(17);class s extends(i(306)){constructor(t){super(t),this.cmd=r.CHECKINPUTRESULT}static fromRaw(t){return(new s).fromRaw(t)}}t.exports=s},function(t,e,i){"use strict";
/*!
 * SignInputPacket.js - worker packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(2),s=i(4),n=i(25),o=i(51),a=i(32);var h=i(21);const c=i(17);class u extends h{constructor(t,e,i,r,s){super(),this.tx=t||null,this.index=e,this.coin=i||null,this.ring=r||null,this.type=null!=s?s:1,this.cmd=c.SIGNINPUT}getSize(){var t=0;return(t+=this.tx.getSize())+s.sizeVarint(this.index)+s.sizeVarint(this.coin.value)+this.coin.script.getVarSize()+this.ring.getSize()+1}toWriter(t){return this.tx.toWriter(t),t.writeVarint(this.index),t.writeVarint(this.coin.value),this.coin.script.toWriter(t),this.ring.toWriter(t),t.writeU8(this.type),t}fromRaw(t){return t=new r(t,!0),this.tx=o.fromReader(t),this.index=t.readVarint(),this.coin=new n,this.coin.value=t.readVarint(),this.coin.script.fromReader(t),this.ring=a.fromReader(t),this.type=t.readU8(),this}static fromRaw(t){return(new u).fromRaw(t)}jobsHandle(t){return t.signInput(this.tx,this.index,this.coin,this.ring,this.type)}}t.exports=u},function(t,e,i){"use strict";
/*!
 * SignInputResultPacket.js - worker packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1),s=i(2),n=i(16),o=i(115);var a=i(21);const h=i(17);class c extends a{constructor(t,e,i){super(),this.value=t||!1,this.script=i||null,this.witness=e||null,this.cmd=h.SIGNINPUTRESULT}fromTX(t,e,i){return t=t.inputs[e],r(t),this.value=i,this.script=t.script,this.witness=t.witness,this}static fromTX(t,e,i){return(new c).fromTX(t,e,i)}getSize(){return 1+this.script.getVarSize()+this.witness.getVarSize()}toWriter(t){return t.writeU8(this.value?1:0),this.script.toWriter(t),this.witness.toWriter(t),t}inject(t,e){t=t.inputs[e],r(t),t.script=this.script,t.witness=this.witness}fromRaw(t){return t=new s(t,!0),this.value=1===t.readU8(),this.script=n.fromReader(t),this.witness=o.fromReader(t),this}static fromRaw(t){return(new c).fromRaw(t)}}t.exports=c},function(t,e,i){"use strict";
/*!
 * ECVerifyPacket.js - worker packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(2),s=i(4);var n=i(21);const o=i(17);class a extends n{constructor(t,e,i){super(),this.msg=t||null,this.sig=e||null,this.key=i||null,this.cmd=o.ECVERIFY}getSize(){var t=0;return(t+=s.sizeVarBytes(this.msg))+s.sizeVarBytes(this.sig)+s.sizeVarBytes(this.key)}toWriter(t){return t.writeVarBytes(this.msg),t.writeVarBytes(this.sig),t.writeVarBytes(this.key),t}fromRaw(t){return t=new r(t,!0),this.msg=t.readVarBytes(),this.sig=t.readVarBytes(),this.key=t.readVarBytes(),this}static fromRaw(t){return(new a).fromRaw(t)}jobsHandle(t){return t.ecVerify(this.msg,this.sig,this.key)}}t.exports=a},function(t,e,i){"use strict";
/*!
 * ECVerifyResultPacket.js - worker packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(2);var s=i(21);const n=i(17);class o extends s{constructor(t){super(),this.value=t,this.cmd=n.ECVERIFYRESULT}getSize(){return 1}toWriter(t){return t.writeU8(this.value?1:0),t}fromRaw(t){return t=new r(t,!0),this.value=1===t.readU8(),this}static fromRaw(t){return(new o).fromRaw(t)}}t.exports=o},function(t,e,i){"use strict";
/*!
 * ECSignPacket.js - worker packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(2),s=i(4);var n=i(21);const o=i(17);class a extends n{constructor(t,e){super(),this.msg=t||null,this.key=e||null,this.cmd=o.ECSIGN}getSize(){var t=0;return(t+=s.sizeVarBytes(this.msg))+s.sizeVarBytes(this.key)}toWriter(t){return t.writeVarBytes(this.msg),t.writeVarBytes(this.key),t}fromRaw(t){return t=new r(t,!0),this.msg=t.readVarBytes(),this.key=t.readVarBytes(),this}static fromRaw(t){return(new a).fromRaw(t)}jobsHandle(t){return t.ecSign(this.msg,this.key)}}t.exports=a},function(t,e,i){"use strict";
/*!
 * ECSignResultPacket.js - worker packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(2),s=i(4);var n=i(21);const o=i(17);class a extends n{constructor(t){super(),this.sig=t,this.cmd=o.ECSIGNRESULT}getSize(){return s.sizeVarBytes(this.sig)}toWriter(t){return t.writeVarBytes(this.sig),t}fromRaw(t){return t=new r(t,!0),this.sig=t.readVarBytes(),this}static fromRaw(t){return(new a).fromRaw(t)}}t.exports=a},function(t,e,i){"use strict";
/*!
 * MinePacket.js - worker packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(2);var s=i(21);const n=i(17);class o extends s{constructor(t,e,i,r){super(),this.data=t||null,this.target=e||null,this.min=null!=i?i:-1,this.max=null!=r?r:-1,this.cmd=n.MINE}getSize(){return 120}toWriter(t){return t.writeBytes(this.data),t.writeBytes(this.target),t.writeU32(this.min),t.writeU32(this.max),t}fromRaw(t){return t=new r(t,!0),this.data=t.readBytes(80),this.target=t.readBytes(32),this.min=t.readU32(),this.max=t.readU32(),this}static fromRaw(t){return(new o).fromRaw(t)}jobsHandle(t){return t.mine(this.data,this.target,this.min,this.max)}}t.exports=o},function(t,e,i){"use strict";
/*!
 * MineResultPacket.js - worker packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(2);var s=i(21);const n=i(17);class o extends s{constructor(t){super(),this.nonce=null!=t?t:-1,this.cmd=n.MINERESULT}getSize(){return 5}toWriter(t){return t.writeU8(-1!==this.nonce?1:0),t.writeU32(this.nonce),t}fromRaw(t){return t=new r(t,!0),this.nonce=-1,1===t.readU8()&&(this.nonce=t.readU32()),this}static fromRaw(t){return(new o).fromRaw(t)}}t.exports=o},function(t,e,i){"use strict";
/*!
 * ScryptPacket.js - worker packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(2),s=i(4);var n=i(21);const o=i(17);class a extends n{constructor(t,e,i,r,s,n){super(),this.passwd=t||null,this.salt=e||null,this.N=null!=i?i:-1,this.r=null!=r?r:-1,this.p=null!=s?s:-1,this.len=null!=n?n:-1,this.cmd=o.SCRYPT}getSize(){var t=0;return(t+=s.sizeVarBytes(this.passwd))+s.sizeVarBytes(this.salt)+16}toWriter(t){return t.writeVarBytes(this.passwd),t.writeVarBytes(this.salt),t.writeU32(this.N),t.writeU32(this.r),t.writeU32(this.p),t.writeU32(this.len),t}fromRaw(t){return t=new r(t,!0),this.passwd=t.readVarBytes(),this.salt=t.readVarBytes(),this.N=t.readU32(),this.r=t.readU32(),this.p=t.readU32(),this.len=t.readU32(),this}static fromRaw(t){return(new a).fromRaw(t)}jobsHandle(t){return t.scrypt(this.passwd,this.salt,this.N,this.r,this.p,this.len)}}t.exports=a},function(t,e,i){"use strict";
/*!
 * ScryptResultPacket.js - worker packets for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(2),s=i(4);var n=i(21);const o=i(17);class a extends n{constructor(t){super(),this.key=t||null,this.cmd=o.SCRYPTRESULT}getSize(){return s.sizeVarBytes(this.key)}toWriter(t){return t.writeVarBytes(this.key),t}fromRaw(t){return t=new r(t,!0),this.key=t.readVarBytes(),this}static fromRaw(t){return(new a).fromRaw(t)}}t.exports=a},function(t,e){var i,r,s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);s?(i=new Uint8Array(16),t.exports=function(){return s(i),i}):(r=new Array(16),t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),r[e]=t>>>((3&e)<<3)&255;return r})},function(t,e){for(var i=[],r=0;r<256;++r)i[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){e=e||0;var r=i;return[r[t[e++]],r[t[e++]],r[t[e++]],r[t[e++]],"-",r[t[e++]],r[t[e++]],"-",r[t[e++]],r[t[e++]],"-",r[t[e++]],r[t[e++]],"-",r[t[e++]],r[t[e++]],r[t[e++]],r[t[e++]],r[t[e++]],r[t[+e]]].join("")}},function(t,e,i){"use strict";
/*!
 * WalletOptions.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */const r=i(1),s=i(80),n=i(3),o=i(18),a=i(60),h=i(68).walletdb;t.exports=class t{constructor(t){this.network=o.primary,this.logger=a.global,this.workers=null,this.client=null,this.feeRate=0,this.prefix=null,this.location=null,this.db="memory",this.maxFiles=64,this.cacheSize=16<<20,this.compression=!0,this.bufferKeys=h.binary,this.spv=!1,this.nodeType="",this.witness=!1,this.checkpoints=!1,this.startHeight=0,this.wipeNoReally=!1,this.apiKey=null,this.devMode=!1,this.acl=null,this.ssl=!1,this.host="127.0.0.1",this.listen=!1,t&&this.fromOptions(t)}fromOptions(t){if(null!=t.network&&(this.network=o.get(t.network),this.port=this.network.httpPort+2),null!=t.logger&&(r("object"==typeof t.logger),this.logger=t.logger),null!=t.coinCache&&(r("number"==typeof t.coinCache),r(0<=t.coinCache),this.coinCache=t.coinCache),null!=t.workers&&(r("object"==typeof t.workers),this.workers=t.workers),null!=t.client&&(r("object"==typeof t.client),this.client=t.client),null!=t.jsonp&&(r("object"==typeof t.jsonp),this.jsonp=t.jsonp),null!=t.feeRate&&(r(n.isU64(t.feeRate)),this.feeRate=t.feeRate),null!=t.prefix)switch(r("string"==typeof t.prefix),this.prefix=t.prefix,t.nodeType){case"wallet":this.location=s.join(this.prefix,"wallet"+(t.eid||"walletdb"));break;case"spv":this.location=s.join(this.prefix,"spv"+(t.eid||"walletdb"));break;default:this.location=s.join(this.prefix,t.eid||"walletdb")}return null!=t.location&&(r("string"==typeof t.location),this.location=t.location),null!=t.db&&(r("string"==typeof t.db),this.db=t.db),null!=t.maxFiles&&(r(n.isU32(t.maxFiles)),this.maxFiles=t.maxFiles),null!=t.cacheSize&&(r(n.isU64(t.cacheSize)),this.cacheSize=t.cacheSize),null!=t.compression&&(r("boolean"==typeof t.compression),this.compression=t.compression),null!=t.spv&&(r("boolean"==typeof t.spv),this.spv=t.spv),null!=t.nodeType&&(r("string"==typeof t.nodeType),this.nodeType=t.nodeType),null!=t.checkpoints&&(r("boolean"==typeof t.checkpoints),this.checkpoints=t.checkpoints),null!=t.startHeight&&(r("number"==typeof t.startHeight),r(0<=t.startHeight),this.startHeight=t.startHeight),null!=t.wipeNoReally&&(r("boolean"==typeof t.wipeNoReally),this.wipeNoReally=t.wipeNoReally),null!=t.apiKey&&(r("string"==typeof t.apiKey),this.apiKey=t.apiKey),this.devMode=t.devMode,null!=t.acl&&(r("object"==typeof t.acl),this.acl=t.acl),this.acl=this.acl||{},null!=t.ssl&&(r("boolean"==typeof t.ssl),this.ssl=t.ssl),null!=t.host&&(r("string"==typeof t.host),this.host=t.host),null!=t.port?(r("number"==typeof t.port),this.port=t.port+2):this.port=this.network.httpPort+2,null!=t.listen&&(r("boolean"==typeof t.listen),this.listen=t.listen),this}static fromOptions(e){return(new t).fromOptions(e)}}},function(t,e,i){let r=i(3).waiting;t.exports=class{constructor(t){this.rev=t,this.now=Date.parse(new Date)}check(){return Date.parse(new Date)-this.now>=this.rev&&(this.now=Date.parse(new Date),!0)}tick(t,e){let i=0,s=async()=>{if(this.check()){try{e(i++)}catch(t){console.log(t)}(0==t||i<t)&&s()}else await r(100),s()};s()}}},function(t,e,i){"use strict";(function(e){const r=i(23),s=i(3),n=i(4),o=i(54),a=i(6),h=i(2);i(20);const c=i(13);i(105);const u=0,l=1,f=9;class d{constructor(t){t&&(this.contact=t.parent,this.address=t.messenger,this.wallet=t.wallet,this.account=t.account,this.status=t.status||u,this.privateKey=t.privateKey||r.generatePrivateKey(),this.publicKey=r.publicKeyCreate(this.privateKey,!0))}getSize(){return 0+n.sizeVarString(this.address,"utf8")+4+n.sizeVarString(this.account,"utf8")+4+n.sizeVarString(this.privateKey.toString("hex"),"ascii")}toWriter(t){return t.writeVarString(this.address,"utf8"),t.writeU32(this.wallet.wid),t.writeVarString(this.account,"utf8"),t.writeU32(this.status),t.writeVarString(this.privateKey.toString("hex"),"ascii"),t}fromReader(t,i){return this.address=t.readVarString("utf8"),this.wid=t.readU32(),this.account=t.readVarString("utf8"),this.status=t.readU32(),this.privateKey=e.from(t.readVarString("ascii"),"hex"),this.publicKey=r.publicKeyCreate(this.privateKey,!0),this}static fromReader(t,e){return(new d).fromReader(t,e)}async save(){this.wallet&&await this.wallet.db.saveContact(this.contact)}encrypt(t){return this.calcSecret(),s.encrypt(this.aeskey,this.aesiv,e.from(t).toString("hex"))}async send(t){var e={src:this.address,dst:this.contact.address,content:{type:"secret"},account:this.account};return t&&this.status==f?(e.content.packet=this.encrypt(t),this.wallet&&await this.wallet.commNotify(e)):(e.content.init=this.publicKey.toString("hex"),this.contact.publicKey?(this.status=f,t&&(e.content.packet=this.encrypt(t))):this.status=l,this.wallet&&(await this.save(),await this.wallet.commNotify(e))),{contact:this.address,messenger:this.contact.address,init:this.publicKey,packet:e.content.packet}}async answer(t){if(t.contact==this.contact.address&&t.messenger==this.address)switch(this.status){case u:return t.init?(this.calcSecret(t.init),await this.save(),t.packet&&this.read(t.packet),this.wallet&&await this.wallet.commNotify({src:this.address,dst:this.contact.address,content:{type:"secret",init:this.publicKey.toString("hex")},account:this.account}),{contact:this.address,messenger:this.contact.address,init:this.publicKey}):void 0;case l:t.init&&(this.calcSecret(t.init),await this.save(),t.packet)&&this.read(t.packet);break;case f:t.init&&(this.calcSecret(t.init),await this.save()),t.packet&&this.read(t.packet)}}calcSecret(t){var e;t&&(this.contact.publicKey=t,this.aeskey=null,this.aesiv=null),this.aeskey&&this.aesiv||(t=r.ecdh(this.contact.publicKey,this.privateKey),({aeskey:t,aesiv:e}=o.getAes(t.toString(),this.contact.network)),this.aeskey=t,this.aesiv=e,this.status=f)}read(t){return this.calcSecret(),t=e.from(s.decrypt(this.aeskey,this.aesiv,t),"hex").toString(),this.wallet&&this.wallet.db.emit("notify.secret",{from:this.contact.address,to:this.address,content:t}),t}}t.exports=class t{constructor(t){t&&(this.address=t.contact,this.network=t.network,this.publicKey=null,t.publicKey&&(e.isBuffer(t.publicKey)?this.publicKey=t.publicKey:"string"==typeof t.publicKey&&(this.publicKey=e.from(t.publicKey))),t.messenger)&&this.ensureMessenger(t)}getAddress(){return c.fromString(this.address,this.network).getHash("hex")}ensureMessenger(t){return this.sender||((t.parent=this).sender=new d(t)),this.sender}encrypt(t){return this.sender?{payload:this.sender.encrypt(t),status:this.sender.status}:{}}async send(t){if(this.sender)return this.sender.send(t)}async answer(t){return this.ensureMessenger(t).answer(t)}read(t,e){return this.ensureMessenger({messenger:t}).read(e)}getSize(){let t=0;return t+=n.sizeVarString(this.address,"utf8"),this.publicKey?t+=n.sizeVarString(this.publicKey.toString("hex"),"ascii"):t+=n.sizeVarString("","ascii"),t+this.sender.getSize()}toRaw(){var t=this.getSize();t=new a(t);return this.toWriter(t),this.sender.toWriter(t),t.render()}toWriter(t){return t.writeVarString(this.address,"utf8"),this.publicKey?t.writeVarString(this.publicKey.toString("hex"),"ascii"):t.writeVarString("","ascii"),t}fromReader(t){return this.address=t.readVarString("utf8"),t=t.readVarString("ascii"),this.publicKey=t?e.from(t,"hex"):null,this}fromRaw(t,e){return this.network=e.network.type,t=new h(t),this.fromReader(t),this.sender=d.fromReader(t,e),this.sender.contact=this}static fromRaw(e,i){return(new t).fromRaw(e,i)}}}).call(this,i(0).Buffer)},function(t,e,i){(function(e){var r=i(28);class s extends r{constructor(t){super(),this.db=t}async loadHistory(){var t,e;for(t of(this.clear(),await this.db.loadCommentList()))this.set(t.id,t),t.wid&&(e=t.wid+"."+t.account,this.account.get(e)||this.account.set(e,new Map),this.account.get(e).set(t.id,t))}setAccount(t,e,i){this.delAccount(t),e&&i&&(t.wid=e,t.account=i,e=t.wid+"."+t.account,this.account.get(e)||this.account.set(e,new Map),this.account.get(e).set(t.id,t))}delAccount(t){var e;t&&t.wid&&t.account&&(e=t.wid+"."+t.account,this.account.get(e))&&this.account.get(e).delete(t.id)}}s.vpItem=class t{constructor(t){this.fromOptions(t||{})}fromOptions(t){this.shash=t.shash,this.sidx=t.sidx,this.bob=t.bob,this.body=t.body,this.wid=t.wid||0,this.account=t.account||""}toRaw(){var t={};return t.shash=this.shash,t.sidx=this.sidx,t.bob=this.bob||"",t.body=this.body||"",t.wid=this.wid,t.account=this.account,e.from(JSON.stringify(t),"utf-8")}get id(){return""+this.shash+this.sidx}fromRaw(t){return t=JSON.parse(t.toString("utf8")),this.fromOptions(t),this}static fromRaw(e){return(new t).fromRaw(e)}},t.exports=s}).call(this,i(0).Buffer)},function(t,e,i){const r=i(1);var s=i(28);const n=i(247);t.exports=class extends s{constructor(t){super(),this.env=t,this.pending=null}async loadHistory(){for(const t of this.env.wallets.values())await t.txdb.fillCoins()}batch(){return new n(this)}start(){r(!this.pending),this.pending=this.batch()}drop(){r(this.pending),this.pending=null}clear(){r(this.pending),this.pending.clear()}commit(){r(this.pending),this.pending.commit(),this.pending=null}push(t,e){r(this.pending),this.pending.set(t,e)}unpush(t){r(this.pending),this.pending.remove(t)}}},function(t,e,i){(function(e){var r=i(28);const s=i(4);class n extends r{constructor(t){super(),this.db=t||{getEr:()=>{},setEr:()=>{},delEr:()=>{}}}async loadHistory(){var t;for(t of(this.clear(),await this.db.loadAuditList()))this.set(t.erid,t)}async getAudit(t){return this.data.get(t)||this.db.getAudit(t)}async setAudit(t,e){t=new o(t),await this.db.setAudit(t,e),this.data.set(t.erid,t)}async delAudit(t){await this.db.delAudit(t),this.data.delete(t.erid)}async query(t){var e,i=[];for(e of t)if(e&&Array.isArray(e)){if("erid"==e[0])return{list:[await this.getAudit(e[1])],page:0,count:1};i.push(e)}return super.query(i)}}class o{constructor(t){this.fromOptions(t=t||{})}fromOptions(t){this.erid=t.erid,this.address=t.address,this.oper=t.oper||"Audit",this.time=t.time,this.height=t.height,this.hash=t.hash,this.index=t.index}toRaw(){return e.from(JSON.stringify(this.toOptions()),"utf-8")}toOptions(){var t={};return t.erid=this.erid,t.address=this.address,t.oper=this.oper||"Audit",t.time=this.time,t.height=this.height,t.hash=this.hash||"",t.index=this.index||0,t}getSignObjSize(t){var e=0;return(e+=s.sizeVarString(t.erid,"utf8"))+s.sizeVarString(t.address,"utf8")+s.sizeVarString(t.oper,"utf8")+4+4+s.sizeVarString(t.hash,"ascii")+4}toWriter(t,e){return e.writeVarString(t.erid,"utf8"),e.writeVarString(t.address,"utf8"),e.writeVarString(t.oper,"utf8"),e.writeU32(t.time),e.writeU32(t.height),e.writeVarString(t.hash,"ascii"),e.writeU32(t.index),e}fromRaw(t){return t=JSON.parse(t.toString("utf8")),this.fromOptions(t),this}static fromRaw(t){return(new o).fromRaw(t)}}n.AuditItem=o,t.exports=n}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * ChainState.js - walletdb records
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(4),s=i(2),n=i(6);t.exports=class t{constructor(){this.startHeight=-1,this.startHash=r.NULL_HASH,this.height=-1,this.marked=!1}clone(){var e=new t;return e.startHeight=this.startHeight,e.startHash=this.startHash,e.height=this.height,e.marked=this.marked,e}fromRaw(t){return t=new s(t),this.startHeight=t.readU32(),this.startHash=t.readHash("hex"),this.height=t.readU32(),this.marked=!0,0<t.left()&&(this.marked=1===t.readU8()),this}static fromRaw(e){return(new t).fromRaw(e)}toRaw(){var t=new n(41);return t.writeU32(this.startHeight),t.writeHash(this.startHash),t.writeU32(this.height),t.writeU8(this.marked?1:0),t.render()}}},function(t,e,i){"use strict";
/*!
 * PathMapWids.js - walletdb records
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(4),s=i(2),n=i(6),o=i(55);t.exports=class t{constructor(t,e){this.hash=t||r.NULL_HASH,this.wids=e||new Set}add(t){return!this.wids.has(t)&&(this.wids.add(t),!0)}remove(t){return this.wids.delete(t)}toWriter(t){return o.serializeWallets(t,this.wids)}getSize(){return o.sizeWallets(this.wids)}toRaw(){var t=this.getSize();return this.toWriter(new n(t)).render()}fromReader(t){return this.wids=o.parseWallets(t),this}fromRaw(t){return this.fromReader(new s(t))}static fromReader(e,i){return new t(e).fromReader(i)}static fromRaw(e,i){return new t(e).fromRaw(i)}}},function(t,e,i){"use strict";(function(e){
/*!
 * chacha20.js - chacha20 for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1);var s=i(57).binding;const n=0===new Int8Array(new Int16Array([1]).buffer)[0];function o(){if(!(this instanceof o))return new o;this.state=new Uint32Array(16),this.stream=new Uint32Array(16),this.bytes=new Uint8Array(this.stream.buffer),n&&(this.bytes=e.allocUnsafe(64)),this.pos=0,this.ivSize=0}function a(t,e,i,r,s){t[e]+=t[i],t[s]=h(t[s]^t[e],16),t[r]+=t[s],t[i]=h(t[i]^t[r],12),t[e]+=t[i],t[s]=h(t[s]^t[e],8),t[r]+=t[s],t[i]=h(t[i]^t[r],7)}function h(t,e){return t<<e|t>>>32-e}o.prototype.init=function(t,e,i){t&&this.initKey(t),e&&this.initIV(e,i)},o.prototype.initKey=function(t){this.state[0]=1634760805,this.state[1]=857760878,this.state[2]=2036477234,this.state[3]=1797285236,this.state[4]=t.readUInt32LE(0,!0),this.state[5]=t.readUInt32LE(4,!0),this.state[6]=t.readUInt32LE(8,!0),this.state[7]=t.readUInt32LE(12,!0),this.state[8]=t.readUInt32LE(16,!0),this.state[9]=t.readUInt32LE(20,!0),this.state[10]=t.readUInt32LE(24,!0),this.state[11]=t.readUInt32LE(28,!0),this.state[12]=0,this.pos=4294967295},o.prototype.initIV=function(t,e){8===t.length?(this.state[13]=0,this.state[14]=t.readUInt32LE(0,!0),this.state[15]=t.readUInt32LE(4,!0)):12===t.length?(this.state[13]=t.readUInt32LE(0,!0),this.state[14]=t.readUInt32LE(4,!0),this.state[15]=t.readUInt32LE(8,!0)):r(!1,"Bad iv size."),this.ivSize=8*t.length,this.setCounter(e)},o.prototype.encrypt=function(t){for(let e=0;e<t.length;e++){if(64<=this.pos){for(let t=0;t<16;t++)this.stream[t]=this.state[t];for(let t=0;t<10;t++)a(this.stream,0,4,8,12),a(this.stream,1,5,9,13),a(this.stream,2,6,10,14),a(this.stream,3,7,11,15),a(this.stream,0,5,10,15),a(this.stream,1,6,11,12),a(this.stream,2,7,8,13),a(this.stream,3,4,9,14);for(let t=0;t<16;t++)this.stream[t]+=this.state[t],n&&this.bytes.writeUInt32LE(this.stream[t],4*t,!0);this.state[12]++,0===this.state[12]&&(r(64===this.ivSize,"Counter overflow."),this.state[13]++,r(0!==this.state[13],"Counter overflow.")),this.pos=0}t[e]^=this.bytes[this.pos++]}return t},o.prototype.setCounter=function(t){var e=(t=t||0)%4294967296;t=(t-e)/4294967296;this.state[12]=e,64===this.ivSize&&(this.state[13]=t)},o.prototype.getCounter=function(){var t=this.state[12],e=this.state[13];return 64===this.ivSize?4294967296*e+t:t},s&&(o=s.ChaCha20),t.exports=o}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * poly1305.js - poly1305 for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(57).binding;function s(){if(!(this instanceof s))return new s;this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.fin=0,this.leftover=0,this.buffer=e.allocUnsafe(16)}s.prototype.init=function(t){var e=t.readUInt16LE(0,!0),i=t.readUInt16LE(2,!0),r=t.readUInt16LE(4,!0),s=t.readUInt16LE(6,!0),n=t.readUInt16LE(8,!0),o=t.readUInt16LE(10,!0),a=t.readUInt16LE(12,!0),h=t.readUInt16LE(14,!0);this.r[0]=8191&e,this.r[1]=8191&(e>>>13|i<<3),this.r[2]=7939&(i>>>10|r<<6),this.r[3]=8191&(r>>>7|s<<9),this.r[4]=255&(s>>>4|n<<12),this.r[5]=n>>>1&8190,this.r[6]=8191&(n>>>14|o<<2),this.r[7]=8065&(o>>>11|a<<5),this.r[8]=8191&(a>>>8|h<<8),this.r[9]=h>>>5&127;for(let t=0;t<10;t++)this.h[t]=0;for(let e=0;e<8;e++)this.pad[e]=t.readUInt16LE(16+2*e,!0);this.leftover=0,this.fin=0},s.prototype.blocks=function(t,e,i){for(var r=this.fin?0:2048,s=new Uint32Array(10);16<=e;){var n=t.readUInt16LE(i+0,!0),o=t.readUInt16LE(i+2,!0),a=t.readUInt16LE(i+4,!0),h=t.readUInt16LE(i+6,!0),c=t.readUInt16LE(i+8,!0),u=t.readUInt16LE(i+10,!0),l=t.readUInt16LE(i+12,!0),f=t.readUInt16LE(i+14,!0);this.h[0]+=8191&n,this.h[1]+=8191&(n>>>13|o<<3),this.h[2]+=8191&(o>>>10|a<<6),this.h[3]+=8191&(a>>>7|h<<9),this.h[4]+=8191&(h>>>4|c<<12),this.h[5]+=c>>>1&8191,this.h[6]+=8191&(c>>>14|u<<2),this.h[7]+=8191&(u>>>11|l<<5),this.h[8]+=8191&(l>>>8|f<<8),this.h[9]+=f>>>5|r;let d=0;for(let t=0;t<10;t++){s[t]=d;for(let e=0;e<10;e++){let i=this.h[e];i*=e<=t?this.r[t-e]:5*this.r[t+10-e],s[t]+=i,4===e&&(d=s[t]>>>13,s[t]&=8191)}d+=s[t]>>>13,s[t]&=8191}d=(d<<2)+d,d+=s[0],s[0]=8191&d,d>>>=13,s[1]+=d;for(let t=0;t<10;t++)this.h[t]=s[t];i+=16,e-=16}},s.prototype.update=function(t){let e=t.length,i=0;if(this.leftover){let r=16-this.leftover;r>e&&(r=e);for(let e=0;e<r;e++)this.buffer[this.leftover+e]=t[i+e];if(e-=r,i+=r,this.leftover+=r,this.leftover<16)return;this.blocks(this.buffer,16,0),this.leftover=0}var r;if(16<=e&&(r=-16&e,this.blocks(t,r,i),i+=r,e-=r),e){for(let r=0;r<e;r++)this.buffer[this.leftover+r]=t[i+r];this.leftover+=e}},s.prototype.finish=function(){var t=e.allocUnsafe(16),i=new Uint16Array(10);if(this.leftover){let t=this.leftover;for(this.buffer[t++]=1;t<16;t++)this.buffer[t]=0;this.fin=1,this.blocks(this.buffer,16,0)}let r=this.h[1]>>>13;this.h[1]&=8191;for(let t=2;t<10;t++)this.h[t]+=r,r=this.h[t]>>>13,this.h[t]&=8191;this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,i[0]=this.h[0]+5,r=i[0]>>>13,i[0]&=8191;for(let t=1;t<10;t++)i[t]=this.h[t]+r,r=i[t]>>>13,i[t]&=8191;let s=(1^r)-1;for(let t=0;t<10;t++)i[t]&=s;s=~s;for(let t=0;t<10;t++)this.h[t]=this.h[t]&s|i[t];this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5);let n=this.h[0]+this.pad[0];this.h[0]=n;for(let t=1;t<8;t++)n=this.h[t]+this.pad[t]+(n>>>16),this.h[t]=n;for(let e=0;e<8;e++)t.writeUInt16LE(this.h[e],2*e,!0);for(let t=0;t<10;t++)this.h[t]=0;for(let t=0;t<10;t++)this.r[t]=0;for(let t=0;t<8;t++)this.pad[t]=0;return t},s.auth=function(t,e){var i=new s;return i.init(e),i.update(t),i.finish()},s.verify=function(t,e){let i=0;for(let r=0;r<16;r++)i|=t[r]^e[r];return 0!=(1&i-1>>>31)},r&&(s=r.Poly1305),t.exports=s}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e,r,s){
/*!
 * 配置管理：负责配置文件的读入解析、动态修改、持久化
 */
const n=i(1),o=i(80),a=i(49),h=i(3),c=i(132),u=i(26);class l{constructor(t){n("string"==typeof t.module),n(0<t.module.length),this.module=t.module,this.spv=t.spv,this.nodeType=t.nodeType,this.options=Object.create(null),this.data=Object.create(null),this.env=Object.create(null),this.args=Object.create(null),this.argv=[],this.pass=[],this.query=Object.create(null),this.hash=Object.create(null),this.setDefaultValue()}set nodeType(t){switch(this.$nodeType=t){case"spv":this.conf="spv";break;case"wallet":this.conf="wallet";break;default:this.conf="gamegold"}}get nodeType(){return this.$nodeType}changeParams(t){for(var e of Object.keys(t))this[e]=t[e];this.parseConfig(this.content)}save(){a.unsupported||(a.existsSync(this.prefix)||a.mkdirSync(this.prefix),a.writeFileSync(`${this.prefix}/${this.conf}.conf`,this.content,"utf8"))}heapDump(){}async saveAsync(){if(await this.ensure(),!a.unsupported)return a.writeFile(`${this.prefix}/${this.conf}.conf`,this.content,"utf8")}inject(t){for(const i of Object.keys(t)){var e=t[i];switch(i){case"hash":case"query":case"env":case"argv":case"config":continue}this.set(i,e)}}hasValue(t){return void 0!==t&&null!=t}setValidValue(t,e){this.hasValue(e)&&(this[t]=e)}setDefaultValue(){for(var t of(this.network="testnet",this.version="v1.0.0",this.prefix=o.join("./","."+this.module),this.db="leveldb",this.maxFiles=128,this.cacheSize=256,this.workers=!1,this.workersSize=4,this.workersTimeout=1e4,this.logLevel="debug",this.logConsole=!0,this.logFile=!1,this.prune=!1,this.checkpoints=!0,this.coinCache=800,this.entryCache=800,this.indexTx=!0,this.indexAddress=!0,c.types))this[t+"Addresses"]=c[t].genesis.addresses;this.mempoolSize=u.MEMPOOL_MAX_SIZE,this.limitFree=!0,this.limitFreerRelay=15,this.rejectAbsurdFees=!0,this.replaceByFee=!1,this.persistentMempool=!1,this.selfish=!1,this.compact=!0,this.bip37=!0,this.listen=!0,this.maxOutbound=16,this.maxInbound=32,this.bip151=!1,this.bip150=!1,this.identityKey="",this.knownPeers=[],this.alliances=[],this.walletCheckpoints=!1,this.walletLanguage="english",this.walletId="primary",this.contractCheckpoints=!1,this.contractLanguage="english",this.contractId="primary",this.mining=!1,this.coinbaseFlags="mined by gamegold",this.coinbaseAddress="",this.notifyAddress="",this.preverify=!0,this.reservedBlockWeight=4e3,this.reservedBlockSigops=400,this.devMode=!0,this.groupPrefix={sys:[],coin:[],wallet:[],key:[],account:[],address:[]},this.groupSuffix={admin:[]},this.hmacSalt="1111111111111111111111111111111111111111111111111111111111111111",this.hmacConnection=[],this.seeds=[],this.nodes=[],this.only=[],this.host="::",this.port=0,this.httpHost="::",this.httpPort=2102,this.httpRemoteHost="127.0.0.1",this.httpRemotePort=2102,this.proxy="foo:bar@127.0.0.1:9050",this.onion=!1,this.upnp=!1,this.wshost="127.0.0.1",this.publicHost="1.2.3.4",this.publicPort=0,this.wsport=0,this.apiKey="bookmansoft",this.ssl=!1,this.sslCert="@/ssl/server-cert.pem",this.sslKey="@/ssl/server-key.pem",this.stratumHost="127.0.0.1",this.stratumPort=0,this.stratumPublicHost="127.0.0.1",this.stratumPublicPort=0,this.stratumMaxInbound=16,this.stratumDifficulty=0,this.stratumDynamic=!1,this.stratumPassword=""}readConfigValues(){this.network=this.getNetwork(),this.prefix=this.getPrefix(),this.coinbaseAddress=c[this.network].coinbaseAddress,this.setValidValue("version",this.str("version")),this.setValidValue("db",this.str("db")),this.setValidValue("maxFiles",this.uint("max-files")),this.setValidValue("cacheSize",this.uint("cache-size")),this.setValidValue("workers",this.bool("workers")),this.setValidValue("workersSize",this.uint("workers-size")),this.setValidValue("workersTimeout",this.uint("workers-timeout")),this.setValidValue("logLevel",this.str("log-level")),this.setValidValue("logConsole",this.bool("log-console")),this.setValidValue("logFile",this.bool("log-file")),this.setValidValue("prune",this.bool("prune")),this.setValidValue("checkpoints",this.bool("checkpoints")),this.setValidValue("coinCache",this.uint("coin-cache")),this.setValidValue("entryCache",this.uint("entry-cache")),this.setValidValue("indexTx",this.bool("index-tx")),this.setValidValue("indexAddress",this.bool("index-address"));for(const t of c.types)this.setValidValue(t+"Addresses",this.str(t+"-addresses"));var t,e;if(this.setValidValue("selfish",this.bool("selfish")),this.setValidValue("compact",this.bool("compact")),this.setValidValue("bip37",this.bool("bip37")),this.setValidValue("listen",this.bool("listen")),this.setValidValue("maxOutbound",this.uint("max-outbound")),this.setValidValue("maxInbound",this.uint("max-inbound")),this.setValidValue("mempoolSize",this.uint("mempool-size")),this.setValidValue("limitFree",this.bool("limit-free")),this.setValidValue("limitFreerRelay",this.uint("limit-free-relay")),this.setValidValue("rejectAbsurdFees",this.bool("reject-absurd-fees")),this.setValidValue("replaceByFee",this.bool("replace-by-fee")),this.setValidValue("persistentMempool",this.bool("persistent-mempool")),this.setValidValue("bip151",this.bool("bip151")),this.setValidValue("bip150",this.bool("bip150")),this.setValidValue("identityKey",this.str("identity-key")),this.setValidValue("knownPeers",this.array("known-peers")),this.setValidValue("alliances",this.array("alliances")),this.setValidValue("walletCheckpoints",this.bool("wallet-checkpoints")),this.setValidValue("walletLanguage",this.str("wallet-language")),this.setValidValue("walletId",this.str("wallet-id")),this.setValidValue("contractLanguage",this.str("contract-language")),this.setValidValue("contractId",this.str("contract-id")),this.setValidValue("mining",this.bool("mining")),this.setValidValue("coinbaseFlags",this.str("coinbase-flags")),this.setValidValue("coinbaseAddress",this.str("coinbase-address")),this.setValidValue("notifyAddress",this.str("notify-address")),this.setValidValue("preverify",this.bool("preverify")),this.setValidValue("reservedBlockWeight",this.uint("reserved-block-weight")),this.setValidValue("reservedBlockSigops",this.uint("reserved-block-sigops")),this.setValidValue("hmacSalt",this.str("hmac-salt")),this.setValidValue("hmacConnection",this.array("hmac-connection")),this.setValidValue("seeds",this.array("seeds")),this.setValidValue("nodes",this.array("nodes")),this.setValidValue("only",this.array("only")),this.setValidValue("host",this.str("host")),this.setValidValue("port",this.str("port")),this.setValidValue("devMode",this.bool("dev-mode")),this.hasValue(this.array("group-prefix")))for(t of this.array("group-prefix"))this.hasValue(this.array("group-prefix-"+t))?this.groupPrefix[t]=this.array("group-prefix-"+t):this.groupPrefix[t]=[];if(this.hasValue(this.array("group-suffix")))for(e of this.array("group-suffix"))this.hasValue(this.array("group-suffix-"+e))?this.groupSuffix[e]=this.array("group-suffix-"+e):this.groupSuffix[e]=[];this.setValidValue("proxy",this.str("proxy")),this.setValidValue("onion",this.bool("onion")),this.setValidValue("upnp",this.bool("upnp")),this.setValidValue("wshost",this.str("wshost")),this.setValidValue("wsport",this.str("wsport")),this.setValidValue("publicHost",this.str("public-host")),this.setValidValue("publicPort",this.str("public-port")),this.setValidValue("httpHost",this.str("http-host")),this.setValidValue("httpPort",this.str("http-port")),this.setValidValue("httpRemoteHost",this.str("http-remote-host")),this.setValidValue("httpRemotePort",this.str("http-remote-port")),this.setValidValue("apiKey",this.str("api-key")),this.setValidValue("ssl",this.bool("ssl")),this.setValidValue("sslCert",this.str("ssl-cert")),this.setValidValue("sslKey",this.str("ssl-key")),this.setValidValue("stratumHost",this.str("stratum-host")),this.setValidValue("stratumPort",this.uint("stratum-port")),this.setValidValue("stratumMaxInbound",this.uint("stratum-max-inbound")),this.setValidValue("stratumDifficulty",this.uint("stratum-difficulty")),this.setValidValue("stratumDynamic",this.bool("stratum-dynamic")),this.setValidValue("stratumPassword",this.str("stratum-password"))}load(t){t.hash&&this.parseHash(t.hash),t.query&&this.parseQuery(t.query),t.env&&this.parseEnv(t.env),t.argv&&this.parseArg(t.argv),this.readConfigValues()}open(){if(!a.unsupported){var t=this.getFile(this.conf+".conf");let e;try{a.existsSync(t)||this.save(),e=a.readFileSync(t,"utf8")}catch(t){if("ENOENT"===t.code)return;throw t}this.parseConfig(e),this.readConfigValues()}}get content(){return`# config file (${this.prefix}/${this.conf}.conf)\n\n#\n# Options\n#\n\nnetwork: ${this.network}\n\n#\n# Node\n#\n\nversion: ${this.version}\nprefix: ${this.prefix}\ndb: ${this.db}\nmax-files: ${this.maxFiles}\ncache-size: ${this.cacheSize}\n\n#\n# Workers\n#\n\n# true 独立进程验证 false 当前进程内验证(适用于Debug阶段).\nworkers: ${this.workers}\nworkers-size: ${this.workersSize}\nworkers-timeout: ${this.workersTimeout}\n\n#\n# Logger\n#\n\nlog-level: ${this.logLevel}\nlog-console: ${this.logConsole}\nlog-file: ${this.logFile}\n\n#\n# Chain\n#\n\nprune: ${this.prune}\ncheckpoints: ${this.checkpoints}\ncoin-cache: ${this.coinCache}\nentry-cache: ${this.entryCache}\nindex-tx: ${this.indexTx}\nindex-address: ${this.indexAddress}\n# 创世地址\n${c.types.reduce((t,e)=>(t+="\r\n")+e+"-addresses:"+this[e+"Addresses"],"")}\n\n#\n# Mempool\n#\n\nmempool-size: ${this.mempoolSize}\nlimit-free: ${this.limitFree}\nlimit-free-relay: ${this.limitFreerRelay}\nreject-absurd-fees: ${this.rejectAbsurdFees}\nreplace-by-fee: ${this.replaceByFee}\npersistent-mempool: ${this.persistentMempool}\n\n#\n# Pool\n#\n\nselfish: ${this.selfish}\ncompact: ${this.compact}\nbip37: ${this.bip37}\nlisten: ${this.listen}\nmax-outbound: ${this.maxOutbound}\nmax-inbound: ${this.maxInbound}\n\n#\n# BIP151 AuthDB and Identity Key(64位HEX字符串), bip151 是 bip150 的前提\n#\n\nbip151: ${this.bip151}\nbip150: ${this.bip150}\nidentity-key: ${this.identityKey}\nalliances: ${this.alliances}\nknown-peers: ${this.knownPeers}\n\n#\n# Peer\n#\n\n# Custom list of DNS seeds\nseeds: ${this.seeds}\n# Always try to connect to these nodes.\nnodes: ${this.nodes}\n# Only try to connect to these nodes.\nonly: ${this.only}\n# P2P网络的基础TCP服务 Local Host & Port (to listen on)\nhost: ${this.host}\n\n# \n# Stratum\n#\n\nstratum-host: ${this.stratumHost}\nstratum-max-inbound: ${this.stratumMaxInbound}\nstratum-difficulty: ${this.stratumDifficulty}\nstratum-dynamic: ${this.stratumDynamic}\nstratum-password: ${this.stratumPassword}\n\n#\n# HTTP\n# @note: IP地址配置主要有三种方式\n#   1、::           - 表示自动监听多个网络地址，包括公网IP、localhost，同时支持远程、本地访问 ！！！慎重使用\n#   2、Public Ip    - 配置为公网IP，只支持远程访问 ！！！慎重使用\n#   3、localhost    - 只支持本地访问，也可以配置为 127.0.0.1\n#\n\n# Proxy Server (browser=websockets, node=socks)\n# proxy: ${this.proxy}\nonion: ${this.onion}\nupnp: ${this.upnp}\n# 为SPV钱包提供的、基于WS协议的代理服务的地址和端口\nwshost: ${this.wshost}\n\n# Public Host & Port (to advertise to peers)\n# public-host: ${this.publicHost}\n\n# RPC服务器监听地址。全节点必须配置外部地址，才能对外提供RPC服务 ！！！一定要慎重并仔细评估对外开放RPC端口的必要性\nhttp-host: ${this.httpHost}\n# RPC服务器监听端口\n# 静态配置的远程全节点地址，在对等网络管理器无法给出合适的远程节点时启用\nhttp-remote-host: ${this.httpRemoteHost}\nhttp-remote-port: ${this.httpRemotePort}\n# 基本校验密码\napi-key: ${this.apiKey}\nssl: ${this.ssl}\nssl-cert: ${this.sslCert}\nssl-key: ${this.sslKey}\n\n#\n# Wallet\n#\n\nwallet-checkpoints: ${this.walletCheckpoints}\nwallet-language: ${this.walletLanguage}\nwallet-id: ${this.walletId}\n\n#\n# Contract\n#\n\ncontract-language: ${this.contractLanguage}\ncontract-id: ${this.contractId}\n\n#\n# Miner\n#\n\n# 自动挖矿\nmining: ${this.mining}\ncoinbase-flags: ${this.coinbaseFlags}\n# 矿工的奖励接收地址\ncoinbase-address: ${this.coinbaseAddress}\n# 创世通告地址\nnotify-address:  ${this.notifyAddress}\npreverify: ${this.preverify}\nreserved-block-weight: ${this.reservedBlockWeight}\nreserved-block-sigops: ${this.reservedBlockSigops}\n\n#\n# manage: 设置管理全节点和生产者之间的特约关系\n#\n\n# 用于制备授权节点令牌固定量的链码, 长度64的HEX字符串\nhmac-salt: ${this.hmacSalt}\n# 特约CP编码，支持逗分\nhmac-connection: ${this.hmacConnection.reduce((t,e)=>t+(t?","+e:""+e),"")}\n\n#\n# acl: 访问控制\n#\n\n# 开发模式(跳过部分权限验证)\ndev-mode: ${this.devMode}\n\n# RPC命令前缀访问组, 只有组成员才能访问含有对应前缀的命令\ngroup-prefix: ${Object.keys(this.groupPrefix).reduce((t,e)=>(""!=t&&(t+=","),t+e),"")}\n# RPC命令后缀访问组, 只有组成员才能访问含有对应后缀的命令\ngroup-suffix: ${Object.keys(this.groupSuffix).reduce((t,e)=>(""!=t&&(t+=","),t+e),"")}\n\n# 各访问组成员\n${Object.keys(this.groupPrefix).reduce((t,e)=>(t=t+"\r\n"+`group-prefix-${e}:`)+this.groupPrefix[e].reduce((t,e)=>(""!=t&&(t+=","),t+e),""),"")}\n\n${Object.keys(this.groupSuffix).reduce((t,e)=>(t=t+"\r\n"+`group-suffix-${e}:`)+this.groupSuffix[e].reduce((t,e)=>(""!=t&&(t+=","),t+e),""),"")}\n`}set(t,e){n("string"==typeof t,"Key must be a string."),null!=e&&(t=(t=t.replace(/-/g,"")).toLowerCase(),this.options[t]=e)}has(t){return"number"==typeof t?(n(0<=t,"Index must be positive."),!(t>=this.argv.length)):(n("string"==typeof t,"Key must be a string."),t=(t=t.replace(/-/g,"")).toLowerCase(),null!=this.hash[t]||null!=this.query[t]||null!=this.args[t]||null!=this.env[t]||null!=this.data[t]||null!=this.options[t])}get(t,e){if(void 0===e&&(e=null),Array.isArray(t)){var i=t;for(const t of i){var r=this.get(t);if(null!==r)return r}return e}return"number"==typeof t?(n(0<=t,"Index must be positive."),t>=this.argv.length||null==this.argv[t]?e:this.argv[t]):(n("string"==typeof t,"Key must be a string."),t=(t=t.replace(/-/g,"")).toLowerCase(),null!=this.hash[t]?this.hash[t]:null!=this.query[t]?this.query[t]:null!=this.args[t]?this.args[t]:null!=this.env[t]?this.env[t]:null!=this.data[t]?this.data[t]:null!=this.options[t]?this.options[t]:e)}typeOf(t){return null===(t=this.get(t))?"null":typeof t}str(t,e){var i=this.get(t);if(void 0===e&&(e=null),null===i)return e;if("string"!=typeof i)throw new Error(f(t)+" must be a string.");return i}int(t,e){var i=this.get(t);if(void 0===e&&(e=null),null===i)return e;if("string"!=typeof i){if("number"==typeof i&&Number.isSafeInteger(i))return i}else if(/^\-?\d+$/.test(i)&&(i=parseInt(i,10),Number.isSafeInteger(i)))return i;throw new Error(f(t)+" must be an int.")}uint(t,e){var i=this.int(t);if(void 0===e&&(e=null),null===i)return e;if(i<0)throw new Error(f(t)+" must be a uint.");return i}float(t,e){var i=this.get(t);if(void 0===e&&(e=null),null===i)return e;if("string"!=typeof i){if("number"==typeof i&&isFinite(i))return i}else if(/^\-?\d*(?:\.\d*)?$/.test(i)&&/\d/.test(i)&&(i=parseFloat(i),isFinite(i)))return i;throw new Error(f(t)+" must be a float.")}ufloat(t,e){var i=this.float(t);if(void 0===e&&(e=null),null===i)return e;if(i<0)throw new Error(f(t)+" must be a positive float.");return i}fixed(t,e,i){var r=this.float(t);if(void 0===i&&(i=null),null===r)return i;try{return h.fromFloat(r,e||0)}catch(e){throw new Error(f(t)+" must be a fixed number.")}}ufixed(t,e,i){if(void 0===i&&(i=null),null===(e=this.fixed(t,e)))return i;if(e<0)throw new Error(f(t)+" must be a positive fixed number.");return e}bool(t,e){var i=this.get(t);if(void 0===e&&(e=null),null===i)return e;if("number"==typeof i){if(1===i)return!0;if(0===i)return!1}if("string"!=typeof i){if("boolean"!=typeof i)throw new Error(f(t)+" must be a boolean.");return i}if("true"===i||"1"===i)return!0;if("false"===i||"0"===i)return!1;throw new Error(f(t)+" must be a boolean.")}buf(t,i,r){var s=this.get(t);if(r=r||"hex",void 0===i&&(i=null),null===s)return i;if("string"!=typeof s){if(e.isBuffer(s))return s;throw new Error(f(t)+" must be a buffer.")}if((i=e.from(s,r)).length!==e.byteLength(s,r))throw new Error(f(t)+` must be a ${r} string.`);return i}array(t,e){var i=this.get(t);if(void 0===e&&(e=null),null===i)return e;if("string"!=typeof i){if(Array.isArray(i))return i;throw new Error(f(t)+" must be an array.")}var r=[];for(const t of i.trim().split(/\s*,\s*/))0!==t.length&&r.push(t);return r}obj(t,e){let i=this.get(t);if(void 0===e&&(e=null),null===i)return e;if("object"!=typeof i){if("string"!=typeof i)throw new Error(f(t)+" must be an object.");try{i=JSON.parse(i.replace(/\'/g,'"'))}catch(t){throw t}}return i}func(t,e){var i=this.get(t);if(void 0===e&&(e=null),null===i)return e;if("function"!=typeof i)throw new Error(f(t)+" must be a function.");return i}path(t,e){let i=this.str(t);if(void 0===e&&(e=null),null===i)return e;switch(i[0]){case"~":i=o.join("./",i.substring(1));break;case"@":i=o.join(this.prefix,i.substring(1))}return o.normalize(i)}mb(t,e){return void 0===e&&(e=null),null===(t=this.uint(t))?e:1024*t*1024}getNetwork(){let t=this.str("network");return t=t||"testnet",n(p(t),"Bad network."),t}getPrefix(){let t=this.str("prefix");if(t)return"~"===t[0]?o.join("./",t.substring(1)):t;t=o.join("./","."+this.module);var e=this.str("network");return t=e?(n(p(e),"Bad network."),o.join(t,e)):o.join(t,"testnet"),o.normalize(t)}getFile(t){return this.str("config")||o.join(this.prefix,t)}ensure(){return a.unsupported?Promise.resolve():a.mkdirp(this.prefix)}location(t){return o.join(this.prefix,t)}parseConfig(t){n("string"==typeof t,"Config must be text.");let e=!0,i=!1,r=0;for(const n of(t=(t=(t=(t=65279===t.charCodeAt(0)?t.substring(1):t).replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/\\\n/g,"")).split("\n")){var s=n.trim();if(r+=1,0!==s.length&&"#"!==s[0]){var o=s.indexOf("="),a=s.indexOf(":");let t=-1;if(-1!==a&&(a<o||-1===o)){if(i&&!e)throw new Error(`Expected '=' on line ${r}: "${s}".`);t=a,i=!0,e=!0}else{if(-1===o)throw a=e?":":"=",new Error(`Expected '${a}' on line ${r}: "${s}".`);if(i&&e)throw new Error(`Expected ':' on line ${r}: "${s}".`);t=o,i=!0,e=!1}let n=s.substring(0,t).trim();if(!m(n=n.replace(/\-/g,"")))throw new Error(`Invalid option on line ${r}: ${n}.`);0!==(a=s.substring(t+1).trim()).length&&((o=l.alias[n])&&(n=o),this.data[n]=a)}}}parseArg(t){t&&"object"==typeof t||(t=r.argv),n(Array.isArray(t));let e=null,i=!1;for(let r=2;r<t.length;r++){var s=t[r];if(n("string"==typeof s),"--"===s)i=!0;else if(i)this.pass.push(s);else if(0===s.length)e=null;else if(0===s.indexOf("--")){var o=s.indexOf("=");let t=null,i=null,r=!1;if(r=-1!==o?(t=s.substring(2,o),i=s.substring(o+1),e=null,!1):(t=s.substring(2),i="true",!(e=null)),!m(t=t.replace(/\-/g,"")))throw new Error(`Invalid argument: --${t}.`);if(0===i.length)continue;1<t.length&&(o=l.alias[t])&&(t=o),this.args[t]=i,r&&(e=t)}else if("-"===s[0]){e=null;for(let t=1;t<s.length;t++){let i=s[t];if((i<"a"||"z"<i)&&(i<"A"||"Z"<i)&&(i<"0"||"9"<i)&&"?"!==i)throw new Error(`Invalid argument: -${i}.`);var a=l.alias[i];a&&(i=a),this.args[i]="true",e=i}}else 0===(o=s).length?e=null:e?(this.args[e]=o,e=null):this.argv.push(o)}}parseEnv(t){let e=this.module;e=(e=e.toUpperCase()).replace(/-/g,"_"),e+="_",t&&"object"==typeof t||(t=r.env),n(t&&"object"==typeof t);for(let r of Object.keys(t)){var i=t[r];n("string"==typeof i),h.startsWith(r,e)&&(r=(r=r.substring(e.length)).replace(/_/g,""),g(s=r))&&!/[a-z]/.test(s)&&0!==i.length&&(1<(r=r.toLowerCase()).length&&(s=l.alias[r])&&(r=s),this.env[r]=i)}var s}parseQuery(t){if("string"!=typeof t){if(!s.location)return{};if("string"!=typeof(t=s.location.search))return{}}return this.parseForm(t,this.query)}parseHash(t){if("string"!=typeof t){if(!s.location)return{};if("string"!=typeof(t=s.location.hash))return{}}return this.parseForm(t,this.hash)}parseForm(t,e){if(n("string"==typeof t),0!==t.length){let r="?";e===this.hash&&(r="#");for(const s of(t=t[0]===r?t.substring(1):t).split("&")){var i=s.indexOf("=");let t,r;r=-1!==i?(t=s.substring(0,i),s.substring(i+1)):(t=s,"true"),m(t=(t=d(t)).replace(/\-/g,""))&&0!==(r=d(r)).length&&(e[t=(i=l.alias[t])||t]=r)}}}}function f(t){return"number"==typeof(t=Array.isArray(t)?t[0]:t)?"Argument #"+t:t}function d(t){try{t=(t=decodeURIComponent(t)).replace(/\+/g," ")}catch(t){}return t.replace(/\0/g,"")}function p(t){return/^[a-z0-9]+$/.test(t)}function g(t){return/^[a-zA-Z0-9]+$/.test(t)}function m(t){return g(t)&&!/[A-Z]/.test(t)}l.alias={seed:"seeds",node:"nodes",n:"network"},t.exports=l}).call(this,i(0).Buffer,i(11),i(12))},function(t,e,i){"use strict";(function(e){
/*!
 * layout-browser.js - mempooldb layout for browser.
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1);t.exports={binary:!1,R:"R",V:"V",F:"F",e:function(t){return"e"+function(t){return e.isBuffer(t)&&(t=t.toString("hex")),r("string"==typeof t),t}(t)},ee:function(t){return r("string"==typeof t),r(65===t.length),t.slice(1,65)}}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * mempool.js - mempool for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1);var s=i(63);const n=i(3),o=i(253);i(29);const a=i(211),h=i(16),c=i(72),u=i(9),l=i(26),f=i(30).VerifyError,d=i(13),p=i(41);i(19);const g=i(43),m=i(322),w=i(139),y=i(47),b=i(640),v=i(642),k=i(643),S=i(644),_=i(645),x=i(109),R=i(42),E=i(307),{getVerifyMsg:A,ContractType:M,ContractStatus:O,ContractEnvType:I,BlockFinalType:C}=i(7);function T(t,e){}function P(t,e){t.descFee+=e.deltaFee,t.descSize+=e.size}function B(t,e){t.descFee-=e.descFee,t.descSize-=e.descSize}function N(t,e){t.descFee-=e.deltaFee}function L(t,e){t.descFee+=e.deltaFee}function H(t,e){let i,r,s=t.deltaFee,n=t.size,o=e.deltaFee,a=e.size;return U(t)&&(s=t.descFee,n=t.descSize),U(e)&&(o=e.descFee,a=e.descSize),i=s*a,r=n*o,i===r&&(i=t.time,r=e.time),i-r}function U(t){return t.deltaFee*t.descSize<t.descFee*t.size}t.exports=class extends s{constructor(t){super(),this.eid="mempool",this.options=new k(t),this.node=this.options.node,this.chain=this.options.chain,this.network=this.options.network,this.logger=this.options.logger.context("mempool"),this.workers=this.options.workers,this.fees=this.options.fees,this.locker=this.chain.locker,this.cache=new v(this.options),this.middleHashMem=new Set,this.cpMemList=new E(this),this.size=0,this.freeCount=0,this.lastTime=0,this.lastFlush=0,this.tip=this.network.genesis.hash,this.waiting=new Map,this.orphans=new Map,this.map=new Map,this.spents=new Map,this.rejects=new a(12e4,1e-6),this.cachedSortEntries=[],this.coinIndex=new b,this.txIndex=new _}get hmacConnection(){return this.node.specialCp.content()}get propList(){return this.chain.db.propList}getCps(){return this.chain.db.getCps.apply(this.chain.db,arguments)}async setCp(t){}async delCp(t){}get cpList(){return this.chain.db.cpList}getScs(){return this.chain.db.getScs.apply(this.chain.db,arguments)}get scList(){return this.chain.db.scList}async setSc(t){}async delSc(t){}get transactionList(){return this.chain.db.transactionList}getContracts(){return this.chain.db.getContracts.apply(this.chain.db,arguments)}get erList(){return this.chain.db.erList}get erAbList(){return this.chain.db.erAbList}get enCpList(){return this.chain.db.enCpList}get mode(){return I.Mempool}async _open(t){if(await this.chain.open(t),await this.cache.open(),this.options.persistent){t=await this.cache.getEntries();for(const i of t){var e=await this.getCoinView(i.tx);await this.addEntry(i,e)}this.logger.info("Loaded mempool from disk (%d entries).",t.length),this.fees&&(t=await this.cache.getFees())&&(this.fees.inject(t),this.logger.info("Loaded mempool fee data (rate=%d).",this.fees.estimateFee()))}this.tip=this.chain.tip.hash,t=(this.options.maxSize/1024).toFixed(2),this.logger.info("Mempool loaded (maxsize=%dkb).",t)}async _close(){await this.cache.close()}get curHeight(){return this.chain.height}get finder(){return this.node.getTXFromAll?this.node.getTXFromAll.bind(this.node):this.getTX.bind(this)}get autoTaskMgr(){return this.chain.db.autoTaskMgr}async setVp(){}async delVp(){}async loadVpList(){return this.chain.db.loadVpList.apply(this.chain.db,arguments)}rpcExecute(){return this.node.rpc.execute.apply(this.node.rpc,arguments)}async addBlock(t,e){var i=await this.locker.lock();try{return await this._addBlock(t,e)}finally{i()}}async _addBlock(t,e){var i=[];for(let n=e.length-1;1<=n;n--){var r=e[n],s=r.hash("hex"),o=this.getEntry(s);o?(i.push(o),await this.removeEntry(o,!1),this.emit("confirmed",r,t)):(this.removeOrphan(s),this.removeDoubleSpenders(r),this.waiting.has(s)&&await this.handleOrphans(r))}if(this.tip=t.hash,this.tip&&this.logger.debug("addBlock and update tip %s:",n.revHex(this.tip)),0!==i.length||0!==this.map.size){this.rejects.reset(),this.fees&&(this.fees.processBlock(t.height,i,this.chain.synced),this.cache.writeFees(this.fees)),this.cache.sync(t.hash),await this.cache.flush();for(const t of this.map.values()){var a,h=t.tx;let e=await R.FactoryOfContract({tx:h,env:this});e.data&&e.data.oper===M.contractCreate&&(a=this.transactionList.get(e.data.type+"."+e.data.addr),e=await R.FactoryOfContract({tx:h,mode:I.Mempool,env:this,contract:a})),await e.isBlockFinal()==C.Expired&&await this.removeEntry(t)}0!==i.length&&this.logger.debug("Removed %d txs from mempool for block %d.",i.length,t.height)}}async removeBlock(t,e){var i=await this.locker.lock();try{return await this._removeBlock(t,e)}finally{i()}}async _removeBlock(t,e){this.rejects.reset(),this.cache.sync(t.prevBlock),await this.cache.flush(),this.tip=t.prevBlock,this.logger.debug("removeBlock %d and update tip: %s",t.height,n.revHex(this.tip))}async handleReorgEnd(){var t=await this.locker.lock();try{return await this._handleReorgEnd()}finally{t()}}async _handleReorgEnd(){var t,e,i=this.chain.height+1,r=await this.chain.getMedianTime(this.chain.tip),s=[];for([t,e]of this.map){var n=e.tx;if(n.isFinal(i,r)){if(1<n.version){let e=!1;for(var{sequence:o}of n.inputs)if(!(o&u.SEQUENCE_DISABLE_FLAG)){e=!0;break}if(e){s.push(t);continue}}e.coinbase&&s.push(t)}else s.push(t)}for(const t of s){var a=this.getEntry(t);a&&await this.removeEntry(a)}}async reset(){var t=await this.locker.lock();try{return await this._reset()}finally{t()}}async _reset(){this.logger.info("Mempool reset (%d txs removed).",this.map.size),this.size=0,this.waiting.clear(),this.orphans.clear(),this.map.clear(),this.spents.clear(),this.coinIndex.reset(),this.txIndex.reset(),this.freeCount=0,this.lastTime=0,this.fees&&this.fees.reset(),this.rejects.reset(),this.options.persistent&&(await this.cache.wipe(),this.cache.clear()),this.tip=this.chain.tip.hash}async limitSize(t){var e=this.options.maxSize;if(this.size<=e)return!1;var i=e-e/10,s=this.options.expiryTime,a=n.now(),h=(e=n.hrtime(),new o(H));for(const t of this.map.values())this.hasDepends(t.tx)||(a<t.time+s?h.insert(t):(this.logger.debug("Removing package %s from mempool (too old).",t.txid()),await this.removeEntry(t)));if(!(this.size<=i)){for(this.logger.debug("(bench) Heap mempool traversal: %d.",n.hrtime(e)),e=n.hrtime(),this.logger.debug("(bench) Heap mempool queue size: %d.",h.size());0<h.size();){var c=h.shift(),u=c.hash("hex");if(r(this.hasEntry(u)),this.logger.debug("Removing package %s from mempool (low fee).",c.txid()),await this.removeEntry(c),this.size<=i)break}this.logger.debug("(bench) Heap mempool map removal: %d.",n.hrtime(e))}return!this.hasEntry(t)}getTX(t){return(t=this.getEntry(t))?t.tx:null}async getExtendTX(t){return(t=this.getEntry(t))||null}getEntry(t){return this.map.get(t)}getCoin(t,e){var i=this.getEntry(t);return!i||this.isSpent(t,e)||e>=i.tx.outputs.length?null:g.fromTX(i.tx,e,-1,0)}isSpent(t,e){return t=p.toKey(t,e),this.spents.has(t)}getSpent(t,e){return t=p.toKey(t,e),this.spents.get(t)}getSpentTX(t,e){return t=p.toKey(t,e),(e=this.spents.get(t))?e.tx:null}getCoinsByAddress(t){var e=[];for(const r of t=Array.isArray(t)?t:[t]){var i=d.getHash(r,"hex");for(const t of this.coinIndex.get(i))e.push(t)}return e}getTXByAddress(t){var e=[];for(const r of t=Array.isArray(t)?t:[t]){var i=d.getHash(r,"hex");for(const t of this.txIndex.get(i))e.push(t)}return e}getMetaByAddress(t){var e=[];for(const r of t=Array.isArray(t)?t:[t]){var i=d.getHash(r,"hex");for(const t of this.txIndex.getMeta(i))e.push(t)}return e}getMeta(t){var e;return(t=this.getEntry(t))?((e=m.fromTX(t.tx)).mtime=t.time,e):null}hasEntry(t){return this.map.has(t)}has(t){return!!this.locker.has(t)||!!this.hasOrphan(t)||this.hasEntry(t)}exists(t){return!!this.locker.hasPending(t)||!!this.hasOrphan(t)||this.hasEntry(t)}hasReject(t){return this.rejects.test(t,"hex")}async addTX(t,e){var i=await this.locker.lock();try{return await this._addTX(t,e)}finally{i()}}async _addTX(t,e){let i;null==e&&(e=-1);try{i=await this.insertTX(t,{id:e})}catch(e){throw"VerifyError"!==e.type||t.hasWitness()||e.malleated||this.rejects.add(t.hash()),e}return 10<n.now()-this.lastFlush&&(await this.cache.flush(),this.lastFlush=n.now()),i}async insertTX(t,e){r(!t.mutable,"Cannot add mutable TX to mempool."),e=e||{};var i=x.lockFlags.STANDARD_LOCKTIME_FLAGS,s=this.chain.height;const n=t.hash("hex"),[o,a,h]=t.checkSanity();if(!o)throw new f(t,"invalid",a,h);if(t.isCoinbase())throw new f(t,"invalid","coinbase",100);if(this.options.requireStandard&&!this.chain.state.hasCSV()&&2<=t.version)throw new f(t,"nonstandard","premature-version2-tx",0);if(this.options.requireStandard){const[e,i,r]=t.checkStandard();if(!e)throw new f(t,"nonstandard",i,r);if(!this.options.replaceByFee&&t.isRBF())throw new f(t,"nonstandard","replace-by-fee",0)}if(!await this.verifyFinal(t,i))throw new f(t,"nonstandard","non-final",0);if(this.exists(n))throw new f(t,"alreadyknown","txn-already-in-mempool",0);if(!e.block&&await this.chain.hasCoins(t))throw new f(t,"alreadyknown","txn-already-known",0);let c=null,u=await R.FactoryOfContract({tx:t,env:this});if(!u.data||u.data.oper!=M.contractPromise&&u.data.oper!=M.contractExecute||((i=this.transactionList.get(u.data.type+"."+u.data.addr))&&u.data.oper==M.contractPromise&&u.data.oper==i.oper&&(u.data.ori&&(i.ori=u.data.ori),u=await R.FactoryOfContract({tx:t,env:this,contract:i})),i?c=i.transStatus:u.data.oper==M.contractPromise&&(u.data.status=O.Promised)),u.isPreVerify()&&!e.reorg&&!e.block&&1!=(i=await u.verify()))throw new f(t,A(i),"bad-contract-verify",100);if(this.isDoubleSpend(t)){for(var{prevout:l}of(this.emit("conflict",t),t.inputs)){const{hash:e,index:i}=l;(l=this.getSpent(e,i))&&this.logger.error("TX(%s)'s Input(%s %d) Duplicate with %s:",t.txid(),e,i,l.txid())}throw new f(t,"duplicate","bad-txns-inputs-spent",0)}i=await this.getCoinView(t);var d=this.maybeOrphan(t,i,e.id);if(d)return d;if(d=w.fromTX(t,i,s),!(await this.verify(d,i,c),u.isPreVerify()||e.reorg||e.block||1==(s=await u.verify())))throw new f(t,A(s),"bad-contract-verify",100);return await this.addEntry(d,i,e),null}async verify(t,e,i){var s=this.chain.height+1,o=x.lockFlags.STANDARD_LOCKTIME_FLAGS,a=t.tx;if(!await this.verifyLocks(a,e,o))throw new f(a,"nonstandard","non-BIP68-final",0);if(this.options.requireStandard){if(!a.hasStandardInputs(e))throw new f(a,"nonstandard","bad-txns-nonstandard-inputs",0);if(this.chain.state.hasWitness()&&!a.hasStandardWitness(e))throw new f(a,"nonstandard","bad-witness-nonstandard",0,!0)}if(t.sigops>l.MAX_TX_SIGOPS_COST)throw new f(a,"nonstandard","bad-txns-too-many-sigops",0);if(o=l.getMinFee(t.size,this.options.minRelay),this.options.relayPriority&&t.fee<o&&!t.isFree(s))throw new f(a,"insufficientfee","insufficient priority",0);if(this.options.limitFree&&t.fee<o){var c=n.now();if(this.freeCount*=Math.pow(1-1/600,c-this.lastTime),this.lastTime=c,this.freeCount>10*this.options.limitFreeRelay*1e3)throw new f(a,"insufficientfee","rate limited free transaction",0);this.freeCount+=t.size}if(this.options.rejectAbsurdFees&&t.fee>1e4*o&&!await(await R.FactoryOfContract({tx:a,env:this})).checkFees())throw new f(a,"highfee","absurdly-high-fee",0);if(this.countAncestors(t)+1>this.options.maxAncestors)throw new f(a,"nonstandard","too-long-mempool-chain",0);var[c,o,t]=a.checkInputs(e,s);if(-1===c)throw new f(a,"invalid",o,t);let u=h.flags.STANDARD_VERIFY_FLAGS;try{await this.verifyInputs(a,e,u,i)}catch(t){throw a.hasWitness()||(u=(u&=~h.flags.VERIFY_WITNESS)&~h.flags.VERIFY_CLEANSTACK,await this.verifyResult(a,e,u)&&(u|=h.flags.VERIFY_CLEANSTACK,await this.verifyResult(a,e,u)||(t.malleated=!0))),t}if(this.options.paranoidChecks){const t=h.flags.MANDATORY_VERIFY_FLAGS;r(await this.verifyResult(a,e,t),"BUG: Verify failed for mandatory but not standard.")}}async verifyResult(t,e,i){try{await this.verifyInputs(t,e,i)}catch(t){if("VerifyError"===t.type)return!1;throw t}return!0}async verifyInputs(t,e,i,r){if(!await t.verifyAsync(e,i,r,this.workers)){if(i&h.flags.ONLY_STANDARD_VERIFY_FLAGS&&(i&=~h.flags.ONLY_STANDARD_VERIFY_FLAGS,await t.verifyAsync(e,i,r,this.workers)))throw new f(t,"nonstandard","non-mandatory-script-verify-flag",0);throw new f(t,"nonstandard","mandatory-script-verify-flag",100)}}async addEntry(t,e,i){var r=t.tx;if(!r.opr.isDerived&&(i=i||{},await this.trackEntry(t,e),this.updateAncestors(t,P),this.emit("tx",r,e,i),this.fees&&this.fees.processTX(t,this.chain.synced),this.logger.debug("Added %s to mempool (txs=%d).",r.txid(),this.map.size),this.cache.save(t),!i.reorg)){try{await(await R.FactoryOfContract({tx:r,env:this})).insert()}catch(t){this.logger.error("TX(%s) Smart Contract Insert Error:",r.txid(),t.message)}if(await this.handleOrphans(r),await this.limitSize(r.hash("hex")))throw new f(r,"insufficient size","mempool full",0)}}async removeEntryLock(t,e=!0){var i=await this.locker.lock();try{return await this.removeEntry(t,e)}finally{i()}}async removeEntry(t,e=!0){if(t){var i=t.tx,r=i.hash("hex");if(e){for(let t=0;t<i.outputs.length;t++){var s=this.getSpent(r,t);s&&await this.removeEntry(s,e)}this.updateAncestors(t,B)}this.untrackEntry(t),this.fees&&this.fees.removeTX(r),this.cache.remove(i.hash()),this.emit("entry.remove",t,e);try{var n=await R.FactoryOfContract({tx:i,env:this});e&&await n.erase()}catch(t){this.logger.error("TX(%s) Smart Contract Erase Error:",i.txid(),t.message)}}}async removeTX(t){var e=await this.locker.lock();try{await this.removeDoubleSpenders(t)}finally{e()}}async removeDoubleSpenders(t){for(var{prevout:e}of t.inputs){var e,{hash:e,index:i}=e;(e=this.getSpent(e,i))&&(this.logger.debug("Removing double spender from mempool: %s.",e.txid()),await this.removeEntry(e),this.removeOrphan(e.tx.hash("hex")),this.emit("doublespend",e))}}countAncestors(t){return this._countAncestors(t,new Set,t,T)}updateAncestors(t,e){return this._countAncestors(t,new Set,t,e)}_countAncestors(t,e,i,r){var s;for({prevout:s}of t.tx.inputs){if(e.size>=this.options.maxAncestors)break;var n,o=s.hash;e.has(o)||(n=this.getEntry(o))&&(e.add(o),r(n,i),this._countAncestors(n,e,i,r))}return e.size}countDescendants(t){return this._countDescendants(t,new Set)}_countDescendants(t,e){var i=t.tx,r=i.hash("hex");for(let t=0;t<i.outputs.length;t++){var s,n=this.getSpent(r,t);n&&(s=n.hash("hex"),e.has(s)||(e.add(s),this._countDescendants(n,e)))}return e.size}getAncestors(t){return this._getAncestors(t,[],new Set)}_getAncestors(t,e,i){var r;for({prevout:r}of t.tx.inputs){var s=r.hash,n=this.getEntry(s);!n||i.has(s)||(i.add(s),e.push(n),this._getAncestors(n,e,i))}return e}getDescendants(t){return this._getDescendants(t,[],new Set)}_getDescendants(t,e,i){var r=t.tx,s=r.hash("hex");for(let t=0;t<r.outputs.length;t++){var n,o=this.getSpent(s,t);o&&(n=o.hash("hex"),i.has(n)||(i.add(n),e.push(o),this._getDescendants(o,e,i)))}return e}getDepends(t){var e=[];for(const i of t.getPrevout())this.hasEntry(i)&&e.push(i);return e}hasDepends(t){for(var{prevout:e}of t.inputs)if(this.hasEntry(e.hash))return!0;return!1}getBalance(){let t=0;for(var[e,i]of this.map){var r=i.tx;for(let i=0;i<r.outputs.length;i++){var s=this.getCoin(e,i);s&&(t+=s.value)}}return t}getHistory(){var t=[];for(const e of this.map.values())t.push(e.tx);return t}getOrphan(t){return this.orphans.get(t)}hasOrphan(t){return this.orphans.has(t)}maybeOrphan(t,e,i){var r,s=new Set;let o=[];for({prevout:r}of t.inputs)if(!e.hasEntry(r)){if(this.hasReject(r.hash))return this.logger.debug("Not storing orphan %s (rejected parents).",t.txid()),this.rejects.add(t.hash()),o;if(this.hasEntry(r.hash))return this.logger.debug("Not storing orphan %s (non-existent output).",t.txid()),this.rejects.add(t.hash()),o;s.add(r.hash)}if(0===s.size)return null;if(0!==this.options.maxOrphans)if(t.getWeight()>l.MAX_TX_WEIGHT)this.logger.debug("Ignoring large orphan: %s",t.txid()),t.hasWitness()||this.rejects.add(t.hash());else{this.limitOrphans();var a=t.hash("hex");for(const t of s.keys())this.waiting.has(t)||this.waiting.set(t,new Set),this.waiting.get(t).add(a),o.push(t);o=[...new Set(o)],this.orphans.set(a,new S(t,o.length,i)),this.logger.debug("Added orphan %s to mempool, miss %s.",t.txid(),o.map(t=>n.revHex(t)).toString())}return o}async handleOrphans(t){for(const e of this.resolveOrphans(t)){let i;try{i=e.toTX()}catch(t){this.logger.warning("%s %s","Warning: possible memory corruption.","Orphan failed deserialization.");continue}this.removeOrphan(i.hash("hex"));try{await this.insertTX(i,{id:e.id}),this.logger.debug("Resolved orphan %s in mempool.",i.txid())}catch(t){"VerifyError"===t.type&&(i.hasWitness()||t.malleated||this.rejects.add(i.hash()),this.emit("orphan.bad",t,e.id)),this.logger.error("Could not resolve orphan %s: %s.",i.txid(),t.message)}}}resolveOrphans(t){const e=t.hash("hex");if(!(t=this.waiting.get(e))||0==t.size)return this.waiting.delete(e),[];var i=[];for(const e of t.keys()){var r=this.getOrphan(e);r&&0==--r.missing&&(this.orphans.delete(e),i.push(r))}return this.waiting.delete(e),i}removeOrphan(t){var e=this.getOrphan(t);if(!e)return!1;let i;try{i=e.toTX()}catch(e){return this.orphans.delete(t),this.logger.warning("%s %s","Warning: possible memory corruption.","Orphan failed deserialization."),!1}for(const e of i.getPrevout()){var r=this.waiting.get(e);r&&(r.delete(t),0===r.size)&&this.waiting.delete(e)}return this.orphans.delete(t),!0}limitOrphans(){if(this.orphans.size<this.options.maxOrphans)return!1;let t,e=c.randomRange(0,this.orphans.size);for(t of this.orphans.keys()){if(0===e)break;e--}return r(t),this.logger.debug("Removing orphan %s from mempool.",n.revHex(t)),this.removeOrphan(t),!0}isDoubleSpend(t){for(var{prevout:e}of t.inputs){var{hash:e,index:i}=e;if(this.isSpent(e,i))return!0}return!1}async getSpentView(t){var e=await this.locker.lock();try{return await this.getSpentViewUnLock(t)}finally{e()}}async getSpentViewUnLock(t){var e,i=new y;for({prevout:e}of t.inputs){var r,{hash:s,index:n}=e,o=this.getTX(s);o?n<o.outputs.length&&i.addIndex(o,n,-1,0):(o=await this.chain.readCoin(e))?i.addEntry(e,o):(o=await this.getMeta(s))&&(({tm:s,height:o,time:r}=o),n<s.outputs.length)&&i.addIndex(s,n,o,r)}return i}async getCoinView(t){var e,i=new y;for({prevout:e}of t.inputs){var r,{hash:r,index:s}=e;(r=this.getTX(r))?s<r.outputs.length&&i.addIndex(r,s,-1,0):(r=await this.chain.readCoin(e))&&i.addEntry(e,r)}return i}getSnapshot(){var t=[];for(const e of this.map.keys())t.push(e);return t}verifyLocks(t,e,i){return this.chain.verifyLocks(this.chain.tip,t,e,i)}verifyFinal(t,e){return this.chain.verifyFinal(this.chain.tip,t,e)}async trackEntry(t,e){var i,s=t.tx,n=s.hash("hex");for({prevout:i}of(r(!this.map.has(n)),this.map.set(n,t),r(!s.isCoinbase()),s.inputs)){var o=i.toKey();this.spents.set(o,t)}this.options.indexAddress&&e&&this.indexEntry(t,e),this.size+=t.memUsage()}untrackEntry(t){var e,i=t.tx,s=i.hash("hex");for({prevout:e}of(r(this.map.has(s)),this.map.delete(s),r(!i.isCoinbase()),i.inputs)){var n=e.toKey();this.spents.delete(n)}this.options.indexAddress&&this.unindexEntry(t),this.size-=t.memUsage()}indexEntry(t,e){var i,r=t.tx;for({prevout:i}of(this.txIndex.insert(t,e),r.inputs)){var{hash:s,index:n}=i;this.coinIndex.remove(s,n)}for(let t=0;t<r.outputs.length;t++)this.coinIndex.insert(r,t)}unindexEntry(t){var e,i=t.tx;const r=i.hash("hex");for({prevout:e}of(this.txIndex.remove(r),i.inputs)){const{hash:t,index:i}=e;var s=this.getTX(t);s&&this.coinIndex.insert(s,i)}for(let t=0;t<i.outputs.length;t++)this.coinIndex.remove(r,t)}getSize(){return this.size}prioritise(t,e,i){e<-t.priority&&(e=-t.priority),t.priority+=e,0!==(i=i<-t.deltaFee?-t.deltaFee:i)&&(this.updateAncestors(t,N),t.deltaFee+=i,t.descFee+=i,this.updateAncestors(t,L))}}},function(t,e,i){"use strict";(function(e){
/*!
 * miner.js - block generator for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(3),n=i(253);var o=i(63);const a=i(31),h=i(13),c=i(336),u=i(18),l=i(9),f=i(26),d=i(573),p=i(574),g=i(575),{ContractType:m,BlockFinalType:w}=i(7),y=i(42),b=i(124).sortWithSeq;function v(t){if(!(this instanceof v))return new v(t);this.network=u.primary,this.logger=null,this.workers=null,this.node=null,this.chain=null,this.mempool=null,this.version=-1,this.addresses=[],this.coinbaseFlags=e.from("mined by gamegold","ascii"),this.preverify=!1,this.minWeight=f.MIN_BLOCK_WEIGHT,this.maxWeight=f.MAX_BLOCK_WEIGHT,this.priorityWeight=f.BLOCK_PRIORITY_WEIGHT,this.priorityThreshold=f.BLOCK_PRIORITY_THRESHOLD,this.maxSigops=l.MAX_BLOCK_SIGOPS_COST,this.reservedWeight=4e3,this.reservedSigops=400,this.fromOptions(t)}function k(t,e){return t.priority===e.priority?S(t,e):e.priority-t.priority}function S(t,e){let i=t.rate,r=e.rate;return t.descRate>t.rate&&(i=t.descRate),e.descRate>e.rate&&(r=e.descRate),i===r&&(i=t.priority,r=e.priority),r-i}v.prototype.fromOptions=function(t){if(r(t,"Miner requires options."),r(t.node&&"object"==typeof t.node,"Miner requires a node."),r(t.node.chain&&"object"==typeof t.node.chain,"Miner requires a blockchain."),this.node=t.node,this.node.chain?(r("object"==typeof this.node.chain),this.chain=this.node.chain):this.chain={},this.node.mempool&&(r("object"==typeof this.node.mempool),this.mempool=this.node.mempool),this.network=this.chain.network,this.logger=this.chain.logger,this.workers=this.chain.workers,null!=t.logger&&(r("object"==typeof t.logger),this.logger=t.logger),null!=t.workers&&(r("object"==typeof t.workers),this.workers=t.workers),null!=t.version&&(r(s.isInt(t.version)),this.version=t.version),t.addresses){r(Array.isArray(t.addresses));for(const e of t.addresses)this.addresses.push(new h(e))}if(t.coinbaseFlags){let i=t.coinbaseFlags;"string"==typeof i&&(i=e.from(i,"utf8")),r(e.isBuffer(i)),r(i.length<=20,"Coinbase flags > 20 bytes."),this.coinbaseFlags=i}return null!=t.preverify&&(r("boolean"==typeof t.preverify),this.preverify=t.preverify),null!=t.minWeight&&(r(s.isU32(t.minWeight)),this.minWeight=t.minWeight),null!=t.maxWeight&&(r(s.isU32(t.maxWeight)),r(t.maxWeight<=l.MAX_BLOCK_WEIGHT,"Max weight must be below MAX_BLOCK_WEIGHT"),this.maxWeight=t.maxWeight),null!=t.maxSigops&&(r(s.isU32(t.maxSigops)),r(t.maxSigops<=l.MAX_BLOCK_SIGOPS_COST,"Max sigops must be below MAX_BLOCK_SIGOPS_COST"),this.maxSigops=t.maxSigops),null!=t.priorityWeight&&(r(s.isU32(t.priorityWeight)),this.priorityWeight=t.priorityWeight),null!=t.priorityThreshold&&(r(s.isU32(t.priorityThreshold)),this.priorityThreshold=t.priorityThreshold),null!=t.reservedWeight&&(r(s.isU32(t.reservedWeight)),this.reservedWeight=t.reservedWeight),null!=t.reservedSigops&&(r(s.isU32(t.reservedSigops)),this.reservedSigops=t.reservedSigops),this},v.fromOptions=function(t){return(new v).fromOptions(t)},t.exports=class extends o{constructor(t){super(),this.options=new v(t),this.node=this.options.node,this.chain=this.options.chain,this.mempool=this.options.mempool,this.network=this.options.network,this.logger=this.options.logger.context("miner"),this.workers=this.options.workers,this.addresses=this.options.addresses,this.locker=this.chain.locker,this.cpu=new d(this),this.init()}init(){this.cpu.on("error",t=>{this.emit("error",t)})}async _open(t){this.mempool?await this.mempool.open(t):await this.chain.open(t),await this.cpu.open(),this.logger.info("Miner loaded (flags=%s).",this.options.coinbaseFlags.toString("utf8")),0===this.addresses.length&&this.logger.warning("No reward address is set for miner!")}async _close(){await this.cpu.close()}async createBlock(t,e,i){var r=await this.locker.lock();try{return await this._createBlock(t,e,i)}finally{r()}}async _createBlock(t,e,i){let r=this.options.version;t=t||this.chain.tip;var s=this.getAddress(),n=(-1===r&&(r=await this.chain.computeBlockVersion(t)),await this.chain.getMedianTime(t)),o=Math.max(this.network.now(),n+1),h=await this.chain.getDeployments(o,t),u=(await this.chain.getTarget(o,t)).target,l=h.hasMTP()?n:o;o=new c({prevBlock:t.hash,height:t.height+1,version:r,time:o,bits:u,locktime:l,mtp:n,flags:h.flags,address:s,coinbaseFlags:this.options.coinbaseFlags,witness:h.hasWitness(),interval:this.network.halvingInterval,weight:this.options.reservedWeight,sigops:this.options.reservedSigops}),u=await this.getTokenByAddress(t,e,i);if(await this.assemble(o,u),this.logger.debug("Created block template (height=%d, weight=%d, fees=%d, txs=%s, diff=%d).",o.height,o.weight,a.btc(o.fees),o.items.length+1,o.getDifficulty()),this.options.preverify){l=o.toBlock();try{await this.chain._verifyBlock(l)}catch(t){if("VerifyError"===t.type)throw this.logger.error(t),new Error("DEBUG: Miner created invalid block!");throw t}this.logger.debug("Preverified block %d successfully!",o.height)}return o}async getTokenByAddress(t,e,i){if(!(e=e||this.getAddress()))return null;if(!(await this.chain.db.voteMgr.checkVote(e)).result)return null;var r,s,n=this.node.require("walletdb");let o=null;for(r of await n.getWallets()){var a=await n.get(r);if(o=await a.getPrivateKey(e,i))break}return o?((s=o.signData({oper:m.coinbase})).data.sig=s.sig,s.data):null}updateTime(t){t.time=Math.max(this.network.now(),t.mtp+1)}async createJob(t,e,i){return t=await this.createBlock(t,e,i),new p(this.cpu,t)}async mineBlock(t,e,i){return(await this.createJob(t,e,i)).mineAsync()}addAddress(t){this.addresses.push(new h(t))}getAddress(){return 0===this.addresses.length?new h:this.addresses[Math.random()*this.addresses.length|0]}async assemble(t,e){if(this.mempool){if(this.mempool.tip!==this.chain.tip.hash)throw new Error(`Mempool/chain tip mismatch! Unsafe to create block. ${this.mempool.tip} vs `+this.chain.tip.hash);var i=new n(S),s=new Map;let R=0<this.options.priorityWeight;R&&i.set(k);i=[...this.mempool.map.values()];var o=b(i),a=new Map;for(let e=0;e<o.length;e++){var h,c=o[e],u=(c=(s.has(c.tx.txid())||s.set(c.tx.txid(),g.fromEntry(c,t)),s.get(c.tx.txid()))).tx;let i=!1;for({prevout:h}of u.inputs){var f=h.rhash();if(a.has(f)){i=!0;break}}if(i)a.set(u.txid(),c);else{c.cls=await y.FactoryOfContract({tx:c.tx,env:this.mempool});var d=c.cls,p=await d.onPacking();if(u.isCoinbase())throw await this.mempool.removeDoubleSpenders(u),new Error("Cannot add coinbase to block.");if(d.data&&d.data.oper==m.contractPromise&&(v=this.chain.db.transactionList.get(d.data.type+"."+d.data.addr),d.data.ori)&&(v.ori=d.data.ori,d.data.transStatus=v.transStatus),await d.isBlockFinal()!=w.Final)a.set(u.txid(),c);else{let e=t.weight;var v=t.sigops;if(u.isFinal(t.height,t.locktime))if(!t.witness&&u.hasWitness())a.set(u.txid(),c);else{for(var _ of(e+=u.getWeight(),p.derive))e+=_.getWeight();if(e>this.options.maxWeight)a.set(u.txid(),c);else if((v+=c.sigops)>this.options.maxSigops)a.set(u.txid(),c);else{if(R){if(e>this.options.priorityWeight||c.priority<this.options.priorityThreshold){R=!1,a.set(u.txid(),c);continue}}else if(c.free&&e>=this.options.minWeight){a.set(u.txid(),c);continue}for(var x of(t.weight=e,t.sigops=v,t.fees+=c.fee,t.items.push(c),p.derive))await this.mempool.insertTX(x),await this.mempool.removeDoubleSpenders(x),t.items.push(new g(x))}}else a.set(u.txid(),c)}}}t.refresh(e),r(t.weight<=l.MAX_BLOCK_WEIGHT,"Block exceeds reserved weight!"),this.options.preverify&&(i=t.toBlock(),r(i.getWeight()<=t.weight,"Block exceeds reserved weight!"),r(i.getBaseSize()<=l.MAX_BLOCK_SIZE,"Block exceeds max block size."))}else t.refresh(e)}}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * bip150.js - peer auth.
 * related: AuthDB.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 * Resources:
 *   https://github.com/bitcoin/bips/blob/master/bip-0150.mediawiki
 */
const r=i(1);var s=i(14);const n=i(36),o=i(564),a=i(8),h=i(72),c=i(136),u=i(543),l=i(23),f=i(4),d=i(545),p=i(576);t.exports=class extends s{constructor(t,i,s,n,o){super(),r(t,"BIP150 requires BIP151."),r("string"==typeof i,"Hostname required."),r("boolean"==typeof s,"Outbound flag required."),r(n instanceof d,"Auth DB required."),r(e.isBuffer(o),"Identity key required."),this.bip151=t,this.input=t.input,this.output=t.output,this.hostname=i,this.outbound=s,this.db=n,this.privateKey=o,this.publicKey=l.publicKeyCreate(o,!0),this.peerIdentity=null,this.challengeReceived=!1,this.replyReceived=!1,this.proposeReceived=!1,this.challengeSent=!1,this.auth=!1,this.completed=!1,this.job=null,this.timeout=null,this.onAuth=null,this._init()}_init(){this.outbound&&(this.peerIdentity=this.db.getKnown(this.hostname))}isAuthed(){return this.outbound?this.challengeSent&&this.challengeReceived:this.challengeReceived&&this.replyReceived}challenge(t){var e=this.outbound?"r":"i";if(r(this.bip151.handshake,"No BIP151 handshake before challenge."),r(!this.challengeReceived,"Peer challenged twice."),this.challengeReceived=!0,t.equals(f.ZERO_HASH))throw o.emit("auth failure"),new Error("Auth failure.");return e=this.hash(this.input.sid,e,this.publicKey),c(t,e)?(this.isAuthed()&&(this.auth=!0,this.emit("auth"),o.emit("auth success")),t=l.sign(e,this.privateKey),l.fromDER(t)):f.ZERO_SIG64}reply(t){var e=this.outbound?"i":"r";if(r(this.challengeSent,"Unsolicited reply."),r(!this.replyReceived,"Peer replied twice."),this.replyReceived=!0,t.equals(f.ZERO_SIG64))throw new Error("Auth failure.");return this.peerIdentity&&(t=l.toDER(t),e=this.hash(this.output.sid,e,this.peerIdentity),l.verify(e,t,this.peerIdentity))?this.isAuthed()?(this.auth=!0,this.emit("auth"),null):(r(this.outbound,"No challenge received before reply on inbound."),this.hash(this.input.sid,"p",this.publicKey)):h.randomBytes(32)}propose(t){return r(!this.outbound,"Outbound peer tried to propose."),r(!this.challengeSent,"Unsolicited propose."),r(!this.proposeReceived,"Peer proposed twice."),this.proposeReceived=!0,(t=this.findAuthorized(t))?(this.peerIdentity=t,this.challengeSent=!0,this.hash(this.output.sid,"r",this.peerIdentity)):f.ZERO_HASH}toChallenge(){r(this.bip151.handshake,"No BIP151 handshake before challenge."),r(this.outbound,"Cannot challenge an inbound connection."),r(this.peerIdentity,"Cannot challenge without a peer identity.");var t=this.hash(this.output.sid,"i",this.peerIdentity);return r(!this.challengeSent,"Cannot initiate challenge twice."),this.challengeSent=!0,new u(t)}rekey(t,i,r,s){var n=e.allocUnsafe(130);return t.copy(n,0),i.copy(n,32),r.copy(n,64),s.copy(n,97),a.hash256(n)}rekeyInput(){var t=this.input,e=this.peerIdentity,i=this.publicKey,r=this.rekey(t.sid,t.k1,e,i);e=this.rekey(t.sid,t.k2,e,i);t.rekey(r,e)}rekeyOutput(){var t=this.output,e=this.publicKey,i=this.peerIdentity,r=this.rekey(t.sid,t.k1,e,i);e=this.rekey(t.sid,t.k2,e,i);t.rekey(r,e)}hash(t,i,r){var s=e.allocUnsafe(66);return t.copy(s,0),s[32]=i.charCodeAt(0),r.copy(s,33),a.hash256(s)}findAuthorized(t){for(var e of this.db.known){var i=this.hash(this.output.sid,"p",e[1]);if(c(i,t))return e[1]}return null}destroy(){this.job&&this.reject(new Error("BIP150 stream was destroyed."))}cleanup(){var t=this.job;return r(!this.completed,"Already completed."),r(t,"No completion job."),this.completed=!0,(this.job=null)!=this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.onAuth&&(this.removeListener("auth",this.onAuth),this.onAuth=null),t}resolve(t){this.cleanup().resolve(t)}reject(t){this.cleanup().reject(t)}wait(t){return new Promise((e,i)=>{this._wait(t,e,i)})}_wait(t,e,i){r(!this.auth,"Cannot wait for init after handshake."),this.job=n.job(e,i),this.outbound&&!this.peerIdentity?this.reject(new Error(`No identity for ${this.hostname}.`)):(this.timeout=setTimeout(()=>{this.reject(new Error("BIP150 handshake timed out."))},t),this.onAuth=this.resolve.bind(this),this.once("auth",this.onAuth))}getAddress(){return r(this.peerIdentity,"Cannot serialize address."),p.bip150address(this.peerIdentity)}}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * AuthChallengePacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(27);const s=i(24),n=i(2);i(20);const o=i(4);class a extends r{constructor(t,e=s.AUTHCHALLENGE){super(e),this.hash=t||o.ZERO_HASH}getSize(){return 32}toWriter(t){return t.writeBytes(this.hash),t}toRaw(){return this.hash}fromReader(t){return this.hash=t.readHash(),this}fromRaw(t){return this.fromReader(new n(t))}static fromReader(t){return(new a).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new a).fromRaw(t)}async poolHandle(t,e){}async peerHandle(t){var e;t.bip150&&(e=t.bip150.challenge(this.hash),t.sendAuthReplyPacket(e))}}t.exports=a}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * packetCmd.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */var r=i(3);i=i(24);t.exports=r.reverse(i)},function(t,e,i){"use strict";(function(e){
/*!
 * AuthDB.js - peer auth.
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 * Resources:
 *   https://github.com/bitcoin/bips/blob/master/bip-0150.mediawiki
 */
const r=i(1),s=i(53),n=i(309),o=i(60),a=i(37).broadcast;t.exports=class{constructor(t){this.logger=o.global,this.resolve=n.lookup,this.prefix=null,this.dnsKnown=[],this.known=new Map,this._init(t)}_init(t){t&&(null!=t.logger&&(r("object"==typeof t.logger),this.logger=t.logger.context("authdb")),null!=t.resolve&&(r("function"==typeof t.resolve),this.resolve=t.resolve),null!=t.knownPeers&&(r(Array.isArray(t.knownPeers)),this.setKnown(t.knownPeers.reduce((t,i)=>(2<=(i=i.split(" ")).length&&(t[i[0]]=e.from(i[1],"hex")),t),{}))),null!=t.prefix)&&(r("string"==typeof t.prefix),this.prefix=t.prefix)}async open(){await this.lookup()}async close(){}addKnown(t,i,n=!0){r("string"==typeof t,"Known host must be a string."),r(e.isBuffer(i)&&33===i.length,"Invalid public key for known peer.");var o=s.fromHostname(t);if(o.type===s.types.DNS)this.dnsKnown.push([o,i]);else{let e=!1;for(var h of this.known)if(i.toString("hex")==h[1].toString("hex")){this.known.delete(h[0],i),this.known.set(t,i),e=!0;break}e||this.known.set(t,i),n&&a("config/changed",{})}}delKnown(t){r("string"==typeof t,"Known host must be a string.");var e=s.fromHostname(t);if(e.type===s.types.DNS){for(let t=0;t<this.dnsKnown.length;t++)if(this.dnsKnown[t][0]==e){this.dnsKnown.splice(t,1);break}}else{for(var i of this.known){var n=s.fromHostname(i[0]);n.host==e.host&&n.port==e.port&&this.known.delete(i[0])}a("config/changed",{})}}setKnown(t){this.known.clear();for(const i of Object.keys(t)){var e=t[i];this.addKnown(i,e)}}getKnown(t){var e=this.known.get(t);return e||(e=s.fromHostname(t),this.known.get(e.host))}getAuthorized(){let t="";for(var e of this.known)e=e[0]+" "+e[1].toString("hex"),t+=""==t?e:","+e;return t}async lookup(){var t,e,i=[];for([t,e]of this.dnsKnown)i.push(this.populate(t,e));await Promise.all(i)}async populate(t,e){let i;r(t.type===s.types.DNS,"Resolved host passed."),this.logger.info("Resolving authorized hosts from: %s.",t.host);try{i=await this.resolve(t.host)}catch(t){return void this.logger.error(t)}for(var n of i)0!==t.port&&(n=s.toHostname(n,t.port)),this.addKnown(n,e,!1);a("config/changed",{})}}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * EncinitPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(27);const s=i(24),n=i(2);i(20);const o=i(6),a=i(4);class h extends r{constructor(t,e,i=s.ENCINIT){super(i),this.publicKey=t||a.ZERO_KEY,this.cipher=e||0}getSize(){return 34}toWriter(t){return t.writeBytes(this.publicKey),t.writeU8(this.cipher),t}toRaw(){return this.toWriter(new o(34)).render()}fromReader(t){return this.publicKey=t.readBytes(33),this.cipher=t.readU8(),this}fromRaw(t){return this.fromReader(new n(t))}static fromReader(t){return(new h).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new h).fromRaw(t)}async poolHandle(t,e){}async peerHandle(t){t.bip151&&(t.bip151.encinit(this.publicKey,this.cipher),t.send(t.bip151.toEncack()))}}t.exports=h}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * EncackPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(27);const s=i(24),n=i(2);i(20);const o=i(4);class a extends r{constructor(t,e=s.ENCACK){super(e),this.publicKey=t||o.ZERO_KEY}getSize(){return 33}toWriter(t){return t.writeBytes(this.publicKey),t}toRaw(){return this.publicKey}fromReader(t){return this.publicKey=t.readBytes(33),this}fromRaw(t){return this.fromReader(new n(t))}static fromReader(t){return(new a).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new a).fromRaw(t)}async poolHandle(t,e){}async peerHandle(t){t.bip151&&t.bip151.encack(this.publicKey)}}t.exports=a}).call(this,i(0).Buffer)},function(t,e,i){
/*!
 * TXResponse.js - BIP152 related
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(2),s=i(6),n=i(4),o=i(19);function a(t){if(!(this instanceof a))return new a(t);this.hash=n.NULL_HASH,this.txs=[],t&&this.fromOptions(t)}i(58),a.prototype.fromOptions=function(t){return this.hash=t.hash,t.txs&&(this.txs=t.txs),this},a.fromOptions=function(t){return(new a).fromOptions(t)},a.prototype.fromReader=function(t){this.hash=t.readHash("hex");var e=t.readVarint();for(let i=0;i<e;i++)this.txs.push(o.fromReader(t));return this},a.prototype.fromRaw=function(t){return this.fromReader(new r(t))},a.fromReader=function(t){return(new a).fromReader(t)},a.fromRaw=function(t){return(new a).fromRaw(t)},a.prototype.fromBlock=function(t,e){this.hash=e.hash;for(const i of e.indexes){if(i>=t.txs.length)break;this.txs.push(t.txs[i])}return this},a.fromBlock=function(t,e){return(new a).fromBlock(t,e)},a.prototype.toRaw=function(){return this.frameRaw(!0)},a.prototype.toNormal=function(){return this.frameRaw(!1)},a.prototype.toWriter=function(t){return this.writeRaw(t,!0)},a.prototype.toNormalWriter=function(t){return this.writeRaw(t,!1)},a.prototype.getSize=function(t){let e=0;e=(e+=32)+n.sizeVarint(this.txs.length);for(const i of this.txs)e+=t?i.getSize():i.getBaseSize();return e},a.prototype.writeRaw=function(t,e){t.writeHash(this.hash),t.writeVarint(this.txs.length);for(const i of this.txs)e?i.toWriter(t):i.toNormalWriter(t);return t},a.prototype.frameRaw=function(t){var e=this.getSize(t);return this.writeRaw(new s(e),t).render()},t.exports=a},function(t,e,i){"use strict";(function(e){
/*!
 * VerackPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(27);const s=i(24);i(2);class n extends r{constructor(t=s.VERACK){super(t)}static fromReader(t){return(new n).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new n).fromRaw(t)}async poolHandle(t,e){return Promise.resolve()}async peerHandle(t){t.ack?t.logger.debug("Peer sent duplicate ack (%s).",t.hostname()):(t.ack=!0,t.logger.debug("Received verack (%s).",t.hostname()))}}t.exports=n}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * PongPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(27);const s=i(24),n=i(2);i(20);const o=i(6),a=i(4),h=i(3);class c extends r{constructor(t,e=s.PONG){super(e),this.nonce=t||a.ZERO_U64}getSize(){return 8}toWriter(t){return t.writeBytes(this.nonce),t}toRaw(){return this.toWriter(new o(8)).render()}fromReader(t){return this.nonce=t.readBytes(8),this}fromRaw(t){return this.fromReader(new n(t))}static fromReader(t){return(new c).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new c).fromRaw(t)}async peerHandle(t){var e=this.nonce,i=h.ms();if(t.challenge){if(!e.equals(t.challenge))return e.equals(a.ZERO_U64)?(t.logger.debug("Peer sent a zero nonce (%s).",t.hostname()),void(t.challenge=null)):void t.logger.debug("Peer sent the wrong nonce (%s).",t.hostname());i>=t.lastPing?(t.lastPong=i,-1===t.minPing&&(t.minPing=i-t.lastPing),t.minPing=Math.min(t.minPing,i-t.lastPing)):t.logger.debug("Timing mismatch (what?) (%s).",t.hostname()),t.challenge=null}else t.logger.debug("Peer sent an unsolicited pong (%s).",t.hostname())}async poolHandle(t,e){}}t.exports=c}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * AddrPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(27);const s=i(24),n=i(2);i(20);const o=i(6),a=i(4),h=i(122);class c extends r{constructor(t,e=s.ADDR){super(e),this.items=t||[]}getSize(){var t=0;return(t+=a.sizeVarint(this.items.length))+30*this.items.length}toWriter(t){t.writeVarint(this.items.length);for(const e of this.items)e.toWriter(t,!0);return t}toRaw(){var t=this.getSize();return this.toWriter(new o(t)).render()}fromRaw(t){var e=new n(t),i=e.readVarint();for(let t=0;t<i;t++)this.items.push(h.fromReader(e,!0));return this}static fromReader(t){return(new c).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new c).fromRaw(t)}async poolHandle(t,e){var i=this.items,r=e.network.now(),s=e.options.getRequiredServices();for(const n of i)t.addrFilter.add(n.hostname,"ascii"),n.isRoutable()&&n.hasServices(s)&&((n.time<=1e8||n.time>r+600)&&(n.time=r-432e3),0!==n.port)&&e.hosts.add(n,t.address);e.logger.info("Received %d addrs (hosts=%d, peers=%d) (%s).",i.length,e.hosts.size(),e.peers.size(),t.hostname()),e.fillOutbound()}}t.exports=c}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * TXPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1);var s=i(27);const n=i(24);i(2),i(20);const o=i(19),a=i(109),h=i(37).broadcast;class c extends s{constructor(t,e,i=n.TX){super(i),this.tx=t||new o,this.witness=e||!1}getSize(){return this.witness?this.tx.getSize():this.tx.getBaseSize()}toWriter(t){return this.witness?this.tx.toWriter(t):this.tx.toNormalWriter(t)}toRaw(){return this.witness?this.tx.toRaw():this.tx.toNormal()}fromReader(t){return this.tx.fromRaw(t),this}fromRaw(t){return this.tx.fromRaw(t),this}static fromReader(t){return(new c).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new c).fromRaw(t)}async poolHandle(t,e){var i=this.tx.hash("hex");i=await e.locker.lock(i);try{return await this._poolHandle(t,e)}finally{i()}}async _poolHandle(t,e){const i=this.tx;var s,n,o;if(!i.opr.isDerived)return s=i.hash("hex"),n=a.flags.VERIFY_NONE,(o=t.merkleBlock)&&(r(0<t.merkleMatches),r(t.merkleMap),o.hasTX(s))?t.merkleMap.has(s)?(e.logger.warning("Peer sent duplicate merkle tx: %s (%s).",i.txid(),t.hostname()),void t.increaseBan(100)):(t.merkleMap.add(s),o.txs.push(i),void(0==--t.merkleMatches&&(t.merkleBlock=null,t.merkleTime=-1,t.merkleMatches=0,t.merkleMap=null,await e._addBlock(t,o,n)))):void(e.resolveTX(t,s)?(h("p2p/transaction",this.tx.formatInsight()),e.mempool?(e.logger.debug("Received tx(%s) from %s.",i.rhash(),t.hostname()),e.mempool.addTX(i,t.id).then(r=>{r&&0<r.length?(e.logger.debug("Received tx(%s) missing %d from %s.",i.rhash(),r.length,t.hostname()),e.ensureTX(t,r)):e.logger.debug("Received tx(%s) saved from %s.",i.rhash(),t.hostname())}).catch(i=>{if("VerifyError"!==i.type)throw i;t.reject("tx",i),e.logger.info(i)})):e.emit("tx",i)):(e.logger.warning("Peer sent unrequested tx: %s (%s).",i.txid(),t.hostname()),t.destroy()))}}t.exports=c}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * NotFoundPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(311);const s=i(24);i(2),i(48);class n extends r{constructor(t,e=s.NOTFOUND){super(t,e)}static fromReader(t){return(new n).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new n).fromRaw(t)}async poolHandle(t,e){for(const i of this.items)if(!e.resolveItem(t,i))return e.logger.warning("Peer sent notfound for unrequested item: %s (%s).",i.hash,t.hostname()),void t.destroy()}}t.exports=n}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * MerkleBlockPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(27);const s=i(24);i(2),i(20);const n=i(117),o=i(3),a=i(109);let h=0;class c extends r{constructor(t,e=s.MERKLEBLOCK){super(e),this.block=t||new n}getSize(){return this.block.getSize()}toWriter(t){return this.block.toWriter(t)}toRaw(){return this.block.toRaw()}fromReader(t){return this.block.fromReader(t),this}fromRaw(t){return this.block.fromRaw(t),this}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new c).fromRaw(t)}async poolHandle(t,e){var i=await e.locker.lock();try{return await this._handleMerkleBlock(t,e)}finally{i()}}async _handleMerkleBlock(t,e){var i,r,s;e.syncing&&(e.options.spv?(r=(i=this.block).hash("hex"),t.blockMap.has(r)?t.merkleBlock?(e.logger.warning("Peer sent a merkleblock prematurely (%s).",t.hostname()),t.increaseBan(100)):i.verify()?0===(r=i.getTree()).matches.length?(s=a.flags.VERIFY_NONE,await e._addBlock(t,i,s)):(e.logger.debug(`new merkle block, matches ${r.matches.length}, total `+h++),t.merkleBlock=i,t.merkleTime=o.ms(),t.merkleMatches=r.matches.length,t.merkleMap=new Set):(e.logger.warning("Peer sent an invalid merkleblock (%s).",t.hostname()),t.increaseBan(100)):(e.logger.warning("Peer sent an unrequested merkleblock (%s).",t.hostname()),t.destroy())):(e.logger.warning("Peer sent unsolicited merkleblock (%s).",t.hostname()),t.increaseBan(100)))}}t.exports=c}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * GetBlocksPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1);var s=i(27);const n=i(311),o=i(24),a=i(2);i(20);const h=i(6),c=i(66),u=i(4),l=i(48);class f extends s{constructor(t,e,i=o.GETBLOCKS){super(i),this.version=c.PROTOCOL_VERSION,this.locator=t||[],this.stop=e||null}getSize(){var t=0;return(t+=4)+u.sizeVarint(this.locator.length)+32*this.locator.length+32}toWriter(t){r(this.locator.length<=5e4,"Too many block hashes."),t.writeU32(this.version),t.writeVarint(this.locator.length);for(const e of this.locator)t.writeHash(e);return t.writeHash(this.stop||u.ZERO_HASH),t}toRaw(){var t=this.getSize();return this.toWriter(new h(t)).render()}fromReader(t){this.version=t.readU32();var e=t.readVarint();r(e<=5e4,"Too many block hashes.");for(let i=0;i<e;i++)this.locator.push(t.readHash("hex"));return this.stop=t.readHash("hex"),this.stop===u.NULL_HASH&&(this.stop=null),this}fromRaw(t){return this.fromReader(new a(t))}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new f).fromRaw(t)}async poolHandle(t,e){if(e.chain.synced&&!e.options.selfish&&!e.chain.options.spv&&!e.chain.options.prune){let r=await e.chain.findLocator(this.locator);r=r&&await e.chain.getNextHash(r);for(var i=[];r&&(i.push(new l(l.types.BLOCK,r)),r!==this.stop)&&!(i.length>=n.MaxSentItemCount);)r=await e.chain.getNextHash(r);0<i.length&&(t.hashContinue=i[i.length-1].hash,t.sendInv(i,"resp"))}}}t.exports=f}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * GetBlockTxnPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(27);const s=i(24);i(2),i(20);const n=i(548),o=i(577),a=i(48),h=i(557);class c extends r{constructor(t,e=s.GETBLOCKTXN){super(e),this.request=t||new o}getSize(){return this.request.getSize()}toWriter(t){return this.request.toWriter(t)}toRaw(){return this.request.toRaw()}fromReader(t){return this.request.fromReader(t),this}fromRaw(t){return this.request.fromRaw(t),this}static fromReader(t){return(new c).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new c).fromRaw(t)}async poolHandle(t,e){var i,r=this.request;e.chain.options.spv||e.chain.options.prune||e.options.selfish||(i=new a(a.types.BLOCK,r.hash),(i=await e.getItem(t,i))?await e.chain.getHeight(r.hash)<e.chain.tip.height-15?e.logger.debug("Peer sent a getblocktxn for a block > 15 deep (%s)",t.hostname()):(e.logger.debug("Sending blocktxn for %s to peer (%s).",i.rhash(),t.hostname()),i=n.fromBlock(i,r),t.send(new h(i,t.compactWitness))):(e.logger.debug("Peer sent getblocktxn for non-existent block (%s).",t.hostname()),t.increaseBan(100)))}}t.exports=c}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * BlockTxnPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1);var s=i(27);const n=i(24);i(2),i(20);const o=i(548),a=i(109);class h extends s{constructor(t,e,i=n.BLOCKTXN){super(i),this.response=t||new o,this.witness=e||!1}getSize(){return this.witness?this.response.getSize(!0):this.response.getSize(!1)}toWriter(t){return this.witness?this.response.toWriter(t):this.response.toNormalWriter(t)}toRaw(){return this.witness?this.response.toRaw():this.response.toNormal()}fromReader(t){return this.response.fromReader(t),this}fromRaw(t){return this.response.fromRaw(t),this}static fromReader(t){return(new h).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new h).fromRaw(t)}async poolHandle(t,e){var i=this.response,s=t.compactBlocks.get(i.hash),n=a.flags.VERIFY_BODY;s?(t.compactBlocks.delete(i.hash),r(e.compactBlocks.has(i.hash)),e.compactBlocks.delete(i.hash),s.fillMissing(i)?(e.logger.debug("Filled compact block %s (%s).",s.rhash(),t.hostname()),await e.addBlock(t,s.toBlock(),n)):(e.logger.warning("Peer sent non-full blocktxn for %s. Requesting full block (%s).",s.rhash(),t.hostname()),t.getFullBlock(i.hash),t.increaseBan(10))):e.logger.debug("Peer sent unsolicited blocktxn (%s).",t.hostname())}}t.exports=h}).call(this,i(0).Buffer)},function(t,e,i){"use strict";t.exports=["ebd41040e4bb3ec742c9e381d31ef2a41a48b6685c96e7cef3c1df6cd4331c99","ca42dd41745fd0b81eb902362cf9d8bf719da1bd1b1efc946f5b4c99f42c1b9e","eb04cf5eb1f39afa762f2bb120f296cba520c1b97db1589565b81cb9a17b7244","6dc47172e01cbcb0bf62580d895fe2b8ac9ad4f873801e0c10b9c837d21eb177","16af57a9f676b0ab126095aa5ebadef22ab31119d644ac95cd4b93dbf3f26aeb","8c7209279ac04e275e16d07fd3b775e80154b5968046e31f52dd25766324e9a7","687fa451382278fff0c8b11f8d43d576671c6eb2bceab413fb83d965d06d2ff2","0791ca0749b20782aad3c7d7bd0cdfc9485835843eb2d7996009ce43ab6c6927","8095210805db4bbc355e4428d8fd6ec2cde3ab5fb97a9942988eb8f4dcd06016","73c176434f1bc6d5adf45b0e76e727287c8de57616c1e6e6141a2b2cbc7d8e4c","af8b6762a1e528228161a95d5c559ee266278f75d79e830189a503506abd6b4c","ff856a2d251dcd88d36656f450126798cfabaade40799c722de4d2b5db36a73a","ca2d82a08677072f8ab6764ff035676cfe3e5e325e012172df3f92096db79b85","a0459b9f63b22559f5fa5d4c6db3f9f72ff19342033578f073bf1d1b46cbb912","a0234f3bc8527ca5628eec81ad5d69895da5680dc91d1cb8477f33f878b95b0b","69fac9bd55fb0ac78d53bbee5cf1d597989fd0aaab20a25151bdf1733ee7d122","d8e0febc1db2e38d00940f37d27d41344d993e734b99d5656d9778d4d8143624","d7a7a0fb5d7e2731d771e9484ebcdef71d5f0c3e0a2948782bc83ee0ea699ef4","bd81ce3b4f6591d11a67b5fc7a47fdef25521bf9aa4e18b9e3df2e34a7803be8","3f06e55681d496f5be169eb5389f9f2b8ff61e1708df6881724849cd5d27cb69","a45ede3bbbf09c8ae15c72efc07268d693a21c996fd51e67ca079460fd6d8873","85a0dd7dd720adb7ff05f83d542b209dc7ff4528f7d677b18389fea5e5c49e86","18f1fc7f205df8adddeb7fe007dd57e3af375a9c4d8d73546bf4f1fed1e18d35","e75e72ed9f560eec6eb4800073a43fc3ad19195a392282017895974a99026b6c","7908b40314c138100b518d0735807ffbfcf8518a0095337105ba386b153dd927","6ea54741d004667eed1b4816634aa3a79e6e4b96950f8279dafc8d9bd8812137","0c258a12a5674aef25f28ba7dcfaeceea348e541e6f5cc4ee63b71b361606ac3","ef3cb417fc8ebf6f97876c9e4ece39de1ea5fe649141d1028b7d11c0b2298ced","cecddc905099d8dadfc5b1d209b737cbe2c18cfb2c10c0ff0bcf0d3286fc1aa2","c3846bf24b9e93ca64274c0ec67c1ecc5e024ffcacd2d74019350e81fe546ae4","1465fa205397b876faa6f0a9958e5590e40fcc7faa4fb7c2c8677521fb5fb658","c766a9bef2d4071c863a31aa4920e813b2d198608cb7b7cfe21143b836df09ea","7600295eefe85b9e1fd624db76062aaaae59818a54d2774cd4c0b2c01131e1b3","21db20123660bb2ed418205da11ee7a85a65e2bc6e55b5af7e7899c8a266d92e","3e9099b5015e8f486c00bcea9d111ee721faba355a89bcf1df69561e3dc6325c","4348a0e9444c78cb265e058d5e8944b4d84f9662bd26db257f8934a443c70161","7431e5f4c3c1ce4690774f0b61e05440883ba9a01ed00ba6abd7806ed3b118cf","0f993c8aef97baaf5687140ed59ad1821bb4afacf0aa9a58b5d57a338a3afbcb","0687260331a72403d909f105e69bcf0d32e1bd2493ffc6d9206d11bcd6770739","767c955a76412c89af688e90a1c70f556cfd6b6025dbea10416d7eb6831f8c40","62dd0be9b9f50a163ea0f8e75c053b1eca57ea55c8688f647c6881f2c8357b95","be6c4da2bbb9ba59b6f3939768374246c3c005993fa98f020d1dedbed48a81d5","37d51006c512eaab626421f1ec8c92013fc5f82ae98ee533eb4619b8deb4d06c","8d722f81a9c113c0791df136a2966db26c950a971db46b4199f4ea54b78bfb9f","9acfab7e43c8d880d06b262a94deeee4b4659989c3d0caf19baf6405e41ab7df","f1c1b50ae5a20dd8030ec9f6bc24823dd367b5255759b4e71b61fce9f7375d73","4200f5043ac8590ebb527d209ed1503029fbcbd41ca1b506ec27f15ade7dac69","0c2cd63df7806fa399ede809116b575bf87989f06518f9808c860503178baf66","15f0ba00a3ac7af3ac884c072b1011a077bd77c097f40164b2f8598abd83860c","a71272aeaaa3cfe8727f7fb39f0fb3d1e5426e9060b06ee6f13e9a3c5833cd43","1793927a0614549789adce2f8f34f7f0b66d0f3ae3a3b84d21ec15dbba4fadc7","b9bea7860a962ea3611dab97ab6da3e21c1068b97d55575ed0e11279c11c8932","a22dba681e97376e2d397d728aae3a9b6296b9fdba60bc2e11f647f2c675fb37","41c923866ab4cad6b7ad578081582e020797a6cbdf4fff78ce8396b38937d7f5","327a3d761abadea034eb998406275cb1a4776efdae2fdf6d0168ea1c4f5567d0","e3b6a2db2ed7ce48842f7ac53241c7b71d54144bfb40c11f3f1d0b42f5eea12d","b6191a50d0c3977f7da99bcdaac86a227daeb9679ec70ba3b0c9d92271c170d3","960adf0063e96356750c2965dd0a0867da0b9cbd6e77714aeafb2349ab393da3","c0a6f4dc63a24bfdcf54ef2a6a082a0a72de35803e2ff5ff527ae5d87206dfd5","e4c73430d7a5b50925df43370a0d216e9a79b9d6db8373a0c69eb1cc31c7c52a","0f4e9cdd264b025550d170806340214fe94434c9b02f697ec710fc5feafb5e38","35ae5bddd8f7ae635cffba5682a8f00b95f48462c7108ee9a0e5292b074aafb2","eaa962c4fa4a6bafebe415196d351ccd888d4f53f3fa8ae6d7c466a94e6042bb","e28393773da845a679f2080cc7fb44a3b7a1c3792cb7eb7729fdcb6a8d99aea7","2d47437de17951215a12f3c58e51c729a58026ef1fcc0a5fb3d9dc012f600d19","b478b812250df878635c2aa7ec7d155eaa625ee82916e2cd294361886cd1fbd4","a4310d50af18a6447190372a86afaf8b951ffb431d837f1e5688b45971ed1557","4b03f45807ad70f21bfc2cae71c9fde4604c064cf5ffb686bae5dbaad7fdd34c","5edb7ac43b82a06a8761e8d7be4979ebf2611f7dd79bf91c1c6b566a219ed766","2399561127a57125de8cefea610ddf2fa078b5c8067f4e828290bfb860e84b3c","69ddd7ea90bb57c93e135dc85ea6fcd5480b603239bdc454fc758b2a26cf7f79","6c61dac3a2def031506be036d2a6fe401994fbd13df9c8d466599274c446ec98","668c83947da63b724bece1743c31a0e6aed0db8ec5b31be377bb784f91b6716f","ecc3e9c3407503bee091aa952f41348ff88baa863b2264befac807901574e939","f9e67d336c51002ac054c632022d66dda2e7e3fff10ad061ed31d8bbb410cfb2","bf0feefb9e3a581ad5f9e9db7589985743d261085c4d314f6f5d7259aa421612","03950fb49a531f3e1991942398dfa9e0ea32d7ba1cdd9bc85db57ed9400b434a","3c5f81fea5fab82c64bfa2eaecafcde8e077fc8620a7cae537163df36edbf378","cbb522d7b7f127ad6a0113865bdf1cd4102e7d0759af635a7cf4720dc963c53b","04048028bf1f2864d48f9ad4d83294366a828856553f3b14303f90147f5d40ef","2530cc8e98321502bad96f9b1fba1b099e2d299e0f4548bb914f363bc0d4531f","063e4afac491dfd332f3089b8542e94617d893d7fe944e10a7937ee29d9693c0","136335439334a7698016a0d324de72284e079d7b5220bb8fbd747816eebebaca","45140b3247eb9cc8c5b4f0d7b53091f73292089e6e5a63e2749dd3aca9198eda","2ce1cb0bf9d2f9e102993fbe215152c3b2dd0cabde1c68e5319b839154dbb7f5","568d6905a2c88708a4b3025190edcfedb1974a606a13c6e5290fcb2ae63edab5","0376ab1d54c5f9803ce4b2e201a0ee7eef7b57b636e8a93c9b8d4860c96f5fa7","0a81ec5a929777f145904af38d5d509f66b5e2c58fcdb531058b0e17f3f0b41b","70a73f7f376b60074248904534b11482d5bf0e698ecc498df52577ebf2e93b9a","bd71fdf6da97e4cf62d1647add2581b07d79adf8397eb4ecba9c5e8488821423","5c58468d55f58e497e743982d2b50010b6d165374acf83a7d4a32db768c4408e","fcbfe2886206f72b27593c8b070297e12d769ed10ed7930705a8098effc14d17","8c4edfd04348f322969e7e29a4cd4dca004655061c16e1b076422ef342ad630e","bfd88fe1101c41ae3e801bf8be56350ee9bad1a6b9bd515edc5c6d5b8711ac44","513b2cecb810d4cde5dd85391adfc6c2dd60d87bb736d2b521484aa47a0ebef6","88497f01602f3154246ae28c4d5aef10f1d87ebb76626f4ae0b7f95ba7968799","bc104f15a48be709dca542a7e1d4b9df6f054527e802eaa92d595444258afe71","55926084ec963a64b96e2abe01ce0ba86a64fbfebcc7aab5afc155b37fd76066","c1b48299aba5208fe9630ace55ca68a03eda5a519c8802a0d3a673be8f8e557d","e17890ee09a3fbf4f48b9c414a17d637b7a50647e9bc752322727fcc1742a911","c7ba6567de93a798ae1faa791e712d378fae1f93c4397fea441bb7cbe6fd5995","9a114025197c5bb95d94e63d55cd43790847b646b23cdf11ada4a00eff15fb48","edf7ebbca27a2a384d387b7d4010c666e2edb4843e4c29b4ae1d5b9332e6b24d","fd73dad31c644ff1b43bef0ccdda96710b9cd9875eca7e31707af3e96d522bbd","3e84ba4342908516e77573c0992f0979ca084e4685681ff195ccba8a229b8a76","978cd966f2faa07ba7aa9500d9c02e9d77f2cdada6ad6ba74af4b91c66593c50","49e7a442acf0ea6287050054b52564b650e4f49e42e348d6aa38e039e957b1c1","eec5496b988ce98625b934092eec2908bed0b0f316c2d4730c84eaf1f3d34881","3cfc3c14d1f684ff17e38c43ca440c00b967ec933e8bfe064ca1d72c90f2adb0","1c01c6f4dbb2fefc22558b2bca32563f49844acfc32b7be4b0ff599f9e8c7af7","f09b122c7114f4a09bd4ea4f4a99d558b46e4c25cd81140d29c05613914c3841","d95fea3ca4eedce74cd76e75fc6d1ff62c441f0fa8bc77f034b19e5db258015d","f96f23f4c3e79c077a46988d5af5900676a0f039cb645dd17549b216c82440ce","e23d4a036d7b70e9f595b1422079d2b91edfbb1fb651a0633eaa8a9dc5f80703","9a6ec012e1a7da9dbe34194d478ad7c0db1822fb071df12981496ed104384113","59769007f7685d0fcd50872f9f95d5755a5b2b457d81f3692b610a98672f0e1b","dd6936fe21f8f077c123a1a521c12224f72255b73e03a7260693e8a24b0fa389","b0bfd52bb0d7d9bd92bf5d4dc13da255c02c542f378365ea893911f55e55f23c","91e2f5788d5810eba7ba58737de1548a8ecacd014598bc0b143e041b17052552","f356bea244b7a91eb35d53ca9ad7864ace018e2d35d5f8f96ddf68a6f41aa474","8a866fd1b276b57e578e921c65828a2bed58e9f2f288054134b7f1f4bfc9cc74","8fe4fb0af93a4d0d67db0bebb23e37c71bf325dcbcdd240ea04daf58b47e1840","88ef81de202eb018452e43f864725cea5fbd1fc2d9d205730709c5d8b8690f46","7d05ebb682339f8c9451ee094eebfefa7953a114edb2f44949452fab7d2fc185","7e37cb8b4c47090cab36551ba6f45db840680fba166a952db100717f43053fc2","cb3ccbb76031e5e0138f8dd39a23f9de47ffc35e43c1144cea27d46a5ab1cb5f","31ad6648f8104138c738f39ea4320133393e3a18cc02296ef97c2ac9ef6731d0","552f7bdcf1a7af9e6ce672017f4f12abf77240c78e761ac203d1d9d20ac89988","4b22d5a6aec99f3cdb79aa5ec06838479cd5ecba7164f7f22dc1d65f63d85708","d6f034bd94aa233f0297eca4245b283973e447aa590f310c77f48fdf83112254","52f0e1c4e58ec629291b60317f074671b85d7ea80d5b07273463534b32b40234","e793c9b02fd8aa13e21c31228accb08119643b749c898964b1746d46c3d4cbd2","4ff460d54b9c86dabfbcfc5712e0400d2bed3fbc4d4fbdaa86e06adcd2a9ad7a","bec94911c2955676db6c0a550986d76e3ba005667c442c9762b4fbb773de228c","179fbc148a3dd00fd24ea13458cc43bfa7f59c8182d783a513f6ebec100c8924","3c4fb0b95ab8b30032f432b86f535fe172c185d0fd39865837cf36187fa6f428","4d2491414cfe956746ec4cefa6cf6f72e28a1329432f9d8a907ac4cb5dadc15a","5d56499be4d2e08bcfcad08a3e38723d50503bde706948e42f55603019e528ae","30d0895a9a448a262091635522d1f52010b5867acae12c78ef958fd4f4389f2f","43df5774b03e7fef5fe40d931a7bedf1bb2e6b42738c4e6d3841103d3aa7f339","02ed0eb28c14da45165c566791700d6451d7fb56f0b2ab1d3b8eb070e56edff5","5cc3d78e4e1d5e45547a04e6873e64f90cf9536d1ccc2ef800f355c4c5fd70fd","49351b903444c185ccdc5c693d24d8555cb208d6a8141307699f4af063199d78","8de78655e1be7f7847800b93f694d21d368cc06e033e7fab04bb5eb99da6b700","2a99f5bc1174b73cbb1d620884e01c34e51ccb3978da125f0e33268883bf4158","6b9c08e86eb0f767cfad65cd98b62149e5494a67f5845e7bd1ed019f27b86bd6","d487a56f83b07482e85e963394c1ecc2c9e51d0903ee946b02c301581ed99e16","8b45da1c06f791eb0cabf26be588f5fb23165c2e614bf885562d0dce50b29b02","a1339d33281a0b56e557d3d32b1ce7f9367eb094bd5fa72a7e5004c8ded7cafe","b676f2eddae8775cd36cb0f63cd1d4603961f49e6265ba013a2f0307b6d0b804"]},function(t,e,i){"use strict";(function(e){
/*!
 * payment.js - bip70 payment for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=i(25),n=i(19),o=i(16),a=i(148),h=i(149);var c=i(375);function u(t){if(!(this instanceof u))return new u(t);this.merchantData=null,this.transactions=[],this.refundTo=[],this.memo=null,t&&this.fromOptions(t)}u.prototype.fromOptions=function(t){if(t.merchantData&&this.setData(t.merchantData),t.transactions){r(Array.isArray(t.transactions));for(const i of t.transactions){var e=new n(i);this.transactions.push(e)}}if(t.refundTo){r(Array.isArray(t.refundTo));for(const e of t.refundTo){var i=new s(e);this.refundTo.push(i)}}return null!=t.memo&&(r("string"==typeof t.memo),this.memo=t.memo),this},u.fromOptions=function(t){return(new u).fromOptions(t)},u.prototype.setData=c.prototype.setData,u.prototype.getData=c.prototype.getData,u.prototype.fromRaw=function(t){var e=new a(t);for(this.merchantData=e.readFieldBytes(1,!0);2===e.nextTag();){var i=n.fromRaw(e.readFieldBytes(2));this.transactions.push(i)}for(;3===e.nextTag();){var r=new a(e.readFieldBytes(3)),h=new s;h.value=r.readFieldU64(1,!0),h.script=o.fromRaw(r.readFieldBytes(2,!0)),this.refundTo.push(h)}return this.memo=e.readFieldString(4,!0),this},u.fromRaw=function(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new u).fromRaw(t)},u.prototype.toRaw=function(){var t=new h;this.merchantData&&t.writeFieldBytes(1,this.merchantData);for(const e of this.transactions)t.writeFieldBytes(2,e.toRaw());for(const i of this.refundTo){var e=new h;e.writeFieldU64(1,i.value),e.writeFieldBytes(2,i.script.toRaw()),t.writeFieldBytes(3,e.render())}return null!=this.memo&&t.writeFieldString(4,this.memo),t.render()},t.exports=u}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(t){
/*!
 * x509.js - x509 handling for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=i(231),n=i(232),o=i(3),a=i(8),h=i(561);var c=i(558);const u=e;u.trusted=new Set,u.allowUntrusted=!1,u.oid={"1.2.840.10040.4.1":{key:"dsa",hash:null},"1.2.840.10040.4.2":{key:"dsa",hash:null},"1.2.840.10040.4.3":{key:"dsa",hash:"sha1"},"1.2.840.113549.1.1.1":{key:"rsa",hash:null},"1.2.840.113549.1.1.2":{key:"rsa",hash:"md2"},"1.2.840.113549.1.1.3":{key:"rsa",hash:"md4"},"1.2.840.113549.1.1.4":{key:"rsa",hash:"md5"},"1.2.840.113549.1.1.5":{key:"rsa",hash:"sha1"},"1.2.840.113549.1.1.11":{key:"rsa",hash:"sha256"},"1.2.840.113549.1.1.12":{key:"rsa",hash:"sha384"},"1.2.840.113549.1.1.13":{key:"rsa",hash:"sha512"},"1.2.840.113549.1.1.14":{key:"rsa",hash:"sha224"},"1.2.840.10045.2.1":{key:"ecdsa",hash:null},"1.2.840.10045.4.1":{key:"ecdsa",hash:"sha1"},"1.2.840.10045.4.3.1":{key:"ecdsa",hash:"sha224"},"1.2.840.10045.4.3.2":{key:"ecdsa",hash:"sha256"},"1.2.840.10045.4.3.3":{key:"ecdsa",hash:"sha384"},"1.2.840.10045.4.3.4":{key:"ecdsa",hash:"sha512"}},u.curves={"1.3.132.0.33":"p224","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"},u.getSubjectOID=function(t,e){for(const i of t.tbs.subject)if(i.type===e)return i.value;return null},u.getCAName=function(t){return u.getSubjectOID(t,"2.5.4.3")||u.getSubjectOID(t,"2.5.4.11")||u.getSubjectOID(t,"2.5.4.10")||"Unknown"},u.isTrusted=function(t){return t=a.sha256(t.raw).toString("hex"),u.trusted.has(t)},u.setTrust=function(e){for(var i of(r(Array.isArray(e),"Certs must be an array."),e)){"string"==typeof i&&(s=n.decode(i),r("certificate"===s.type,"Must add certificates to trust."),i=s.data),r(t.isBuffer(i),"Certificates must be PEM or DER."),i=u.parse(i);var s=a.sha256(i.raw).toString("hex");u.trusted.add(s)}},u.setFingerprints=function(e){for(var i of(r(Array.isArray(e),"Certs must be an array."),e))"string"==typeof i&&(i=t.from(i,"hex")),r(t.isBuffer(i),"Fingerprint must be a buffer."),r(32===i.length,"Fingerprint must be a sha256 hash."),i=i.toString("hex"),u.trusted.add(i)},u.getKeyAlgorithm=function(t){t=t.tbs.pubkey.alg.alg;var e=u.oid[t];if(e)return e;throw new Error(`Unknown key algorithm: ${t}.`)},u.getSigAlgorithm=function(t){t=t.sigAlg.alg;var e=u.oid[t];if(e&&e.hash)return e;throw new Error(`Unknown signature algorithm: ${t}.`)},u.getCurve=function(t){let e;try{e=s.parseOID(t)}catch(t){throw new Error("Could not parse curve OID.")}if(t=u.curves[e])return t;throw new Error(`Unknown ECDSA curve: ${e}.`)},u.parse=function(t){try{return s.parseCert(t)}catch(t){throw new Error("Could not parse DER certificate.")}},u.getPublicKey=function(t){var e=u.getKeyAlgorithm(t),i=t.tbs.pubkey.pubkey;t=t.tbs.pubkey.alg.params;let r=null;if("ecdsa"===e.key){if(!t)throw new Error("No curve selected for ECDSA (cert).");r=u.getCurve(t)}return{alg:e.key,data:i,params:t,curve:r}},u.verifyTime=function(t){t=t.tbs.validity;var e=o.now();return e>t.notBefore&&e<t.notAfter},u.getSigningKey=function(t,e){if(r(0!==e.length,"No chain available."),"string"==typeof t){let e=null;if("ecdsa"===(t=n.decode(t)).alg){if(!t.params)throw new Error("No curve selected for ECDSA (key).");e=u.getCurve(t.params)}t={alg:t.alg,data:t.data,params:t.params,curve:e}}else e=u.parse(e[0]),t={alg:(e=u.getPublicKey(e)).alg,data:t,params:e.params,curve:e.curve};return t},u.signSubject=function(t,e,i,r){return i=u.getSigningKey(i,r),h.sign(t,e,i)},u.getVerifyKey=function(t){if(0===t.length)throw new Error("No verify key available (cert chain).");return t=u.parse(t[0]),u.getPublicKey(t)},u.verifySubject=function(t,e,i,r){return r=u.getVerifyKey(r),h.verify(t,e,i,r)},u.parseChain=function(t){var e=[];for(const r of t){var i=u.parse(r);e.push(i)}return e},u.verifyTimes=function(t){for(const e of t)if(!u.verifyTime(e))return!1;return!0},u.verifyTrust=function(t){if(u.allowUntrusted)return!0;for(const e of t)if(u.isTrusted(e))return!0;return!1},u.verifyChain=function(t){var e=u.parseChain(t);if(!u.verifyTimes(e))throw new Error("Invalid certificate times.");for(let t=1;t<e.length;t++){var i=e[t-1],r=e[t],s=u.getSigAlgorithm(i),n=(r=u.getPublicKey(r),i.tbs.raw);i=i.sig;if(!h.verify(s.hash,n,i,r))throw new Error(s.key+" verification failed for chain.")}if(u.verifyTrust(e))return!0;throw new Error("Certificate chain is untrusted.")},u.setFingerprints(c)}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * pk.js - public key algorithms for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */const r=i(562),s=i(563);e.verify=function(t,e,i,n){switch(n.alg){case"rsa":return r.verify(t,e,i,n.data);case"ecdsa":return s.verify(n.curve,t,e,i,n.data);default:throw new Error("Unsupported algorithm.")}},e.sign=function(t,e,i){switch(i.alg){case"rsa":return r.sign(t,e,i.data);case"ecdsa":return s.sign(i.curve,t,e,i.data);default:throw new Error("Unsupported algorithm.")}}},function(t,e,i){"use strict";(function(t){
/*!
 * rsa-browser.js - rsa for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(38),n=i(231),o=i(8),a=i(136),h=e;function c(t,e){return t=255&~(t^e),1==((t=(t&=t>>>4)&t>>>2)&t>>>1)}h.prefixes={md5:t.from("3020300c06082a864886f70d020505000410","hex"),sha1:t.from("3021300906052b0e03021a05000414","hex"),sha224:t.from("302d300d06096086480165030402040500041c","hex"),sha256:t.from("3031300d060960864801650304020105000420","hex"),sha384:t.from("3041300d060960864801650304020205000430","hex"),sha512:t.from("3051300d060960864801650304020305000440","hex"),ripemd160:t.from("30203008060628cf060300310414","hex")},h.verify=function(e,i,u,l){r("string"==typeof e,"No algorithm selected."),r(t.isBuffer(i)),r(t.isBuffer(u)),r(t.isBuffer(l));var f=h.prefixes[e];if(!f)throw new Error("Unknown PKCS prefix.");e=o.hash(e,i);var d=f.length+e.length,p=(i=n.parseRSAPublic(l),l=new s(i.modulus),i=new s(i.publicExponent),Math.ceil(l.bitLength()/8));if(p<d+11)throw new Error("Message too long.");var g=function(e,i){let r=e.length;return r>i&&(r=i),(i=t.allocUnsafe(i)).fill(0),e.copy(i,i.length-r),i}(h.encrypt(l,i,u),p);let m=c(g[0],0);m=(m=(m=(m&=c(g[1],1))&a(g.slice(p-e.length,p),e))&a(g.slice(p-d,p-e.length),f))&c(g[p-d-1],0);for(let t=2;t<p-d-1;t++)m&=c(g[t],255);return 1===m},h.sign=function(e,i,a){r("string"==typeof e,"No algorithm selected."),r(t.isBuffer(i)),r(t.isBuffer(a));var c=h.prefixes[e];if(!c)throw new Error("Unknown PKCS prefix.");e=o.hash(e,i);var u=c.length+e.length,l=(i=n.parseRSAPrivate(a),a=new s(i.modulus),i=new s(i.privateExponent),Math.ceil(a.bitLength()/8));if(l<u+11)throw new Error("Message too long.");var f=t.allocUnsafe(l);f.fill(0),f[1]=1;for(let t=2;t<l-u-1;t++)f[t]=255;return c.copy(f,l-u),e.copy(f,l-e.length),h.decrypt(a,i,f)},h.decrypt=function(e,i,r){if(0<(r=new s(r)).cmp(e))throw new Error("Cannot decrypt.");return r.toRed(s.red(e)).redPow(i).fromRed().toArrayLike(t,"be")},h.encrypt=function(e,i,r){return new s(r).toRed(s.red(e)).redPow(i).fromRed().toArrayLike(t,"be")}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(t){
/*!
 * ecdsa.js - ecdsa for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(88),n=i(8);e.verify=function(e,i,o,a,h){r("string"==typeof e,"No curve selected."),r("string"==typeof i,"No algorithm selected."),r(t.isBuffer(o)),r(t.isBuffer(a)),r(t.isBuffer(h)),e=s.ec(e),i=n.hash(i,o);try{return e.verify(i,a,h)}catch(e){return!1}},e.sign=function(e,i,o,a){return r("string"==typeof e,"No curve selected."),r("string"==typeof i,"No algorithm selected."),r(t.isBuffer(o)),r(t.isBuffer(a)),e=s.ec(e),i=n.hash(i,o),o=e.sign(i,a,{canonical:!0}),t.from(o.toDER())}}).call(this,i(0).Buffer)},function(t,e,i){var r=i(3).makeSingleton;i=i(14);class s extends i{constructor(){super()}}r(s),t.exports=s.singleton()},function(t,e,i){"use strict";const r=i(1),s=i(3),n=i(13),o=i(31);function a(t){if(!(this instanceof a))return new a(t);this.address=new n,this.amount=-1,this.label=null,this.message=null,this.request=null,t&&this.fromOptions(t)}function h(){this.amount=null,this.label=null,this.message=null,this.r=null}function c(t){try{t=(t=decodeURIComponent(t)).replace(/\+/g," ")}catch(t){throw new Error("Malformed URI.")}if(-1!==t.indexOf("\0"))throw new Error("Malformed URI.");return t}function u(t){return(t=encodeURIComponent(t)).replace(/%20/g,"+")}a.prototype.fromOptions=function(t){return"string"==typeof t?this.fromString(t):(t.address&&this.address.fromOptions(t.address),null!=t.amount&&(r(s.isU64(t.amount),"Amount must be a uint64."),this.amount=t.amount),t.label&&(r("string"==typeof t.label,"Label must be a string."),this.label=t.label),t.message&&(r("string"==typeof t.message,"Message must be a string."),this.message=t.message),t.request&&(r("string"==typeof t.request,"Request must be a string."),this.request=t.request),this)},a.fromOptions=function(t){return(new a).fromOptions(t)},a.prototype.fromString=function(t,e){r("string"==typeof t),r(8<t.length,"Not a bitcoin URI.");var i=t.substring(0,8);let s,n;return-1===(i=(r("bitcoin:"===i,"Not a bitcoin URI."),(t=t.substring(8)).indexOf("?")))?s=t:(s=t.substring(0,i),n=t.substring(i+1)),this.address.fromString(s,e),n&&((t=function(t){t=t.split("&");var e=new h;let i=0;for(const n of t){var s=n.indexOf("=");let t,o;if(o=-1===s?(t=n,""):(t=n.substring(0,s),n.substring(s+1)),0===t.length)r(0===o.length,"Empty key in querystring.");else{switch(r(i<4,"Too many keys in querystring."),t){case"amount":r(null==e.amount,"Duplicate key in querystring (amount)."),e.amount=c(o);break;case"label":r(null==e.label,"Duplicate key in querystring (label)."),e.label=c(o);break;case"message":r(null==e.message,"Duplicate key in querystring (message)."),e.message=c(o);break;case"r":r(null==e.r,"Duplicate key in querystring (r)."),e.r=c(o);break;default:r(!1,`Unknown querystring key: ${o}.`)}i++}}return e}(n)).amount&&(r(0<t.amount.length,"Value is empty."),r("-"!==t.amount[0],"Value is negative."),this.amount=o.value(t.amount)),t.label&&(this.label=t.label),t.message&&(this.message=t.message),t.r)&&(this.request=t.r),this},a.fromString=function(t,e){return(new a).fromString(t,e)},a.prototype.toString=function(){let t="bitcoin:";t+=this.address.toString();var e=[];return-1!==this.amount&&e.push("amount="+o.btc(this.amount)),this.label&&e.push("label="+u(this.label)),this.message&&e.push("message="+u(this.message)),this.request&&e.push("r="+u(this.request)),0<e.length&&(t+="?"+e.join("&")),t},a.prototype.inspect=function(){return`<URI: ${this.toString()}>`},t.exports=a},function(t,e,i){"use strict";(function(e){
/*!
 * aead.js - aead for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=i(536),n=i(537);function o(){if(!(this instanceof o))return new o;this.chacha20=new s,this.poly1305=new n,this.aadLen=0,this.cipherLen=0,this.polyKey=null}o.prototype.init=function(t,i){var s=e.allocUnsafe(32);s.fill(0),this.chacha20.init(t,i),this.chacha20.encrypt(s),this.poly1305.init(s),this.chacha20.encrypt(e.allocUnsafe(32)),r(1===this.chacha20.getCounter()),this.polyKey=s,this.aadLen=0,this.cipherLen=0},o.prototype.aad=function(t){r(0===this.cipherLen,"Cannot update aad."),this.poly1305.update(t),this.aadLen+=t.length},o.prototype.encrypt=function(t){return 0===this.cipherLen&&this.pad16(this.aadLen),this.chacha20.encrypt(t),this.poly1305.update(t),this.cipherLen+=t.length,t},o.prototype.decrypt=function(t){return 0===this.cipherLen&&this.pad16(this.aadLen),this.cipherLen+=t.length,this.poly1305.update(t),this.chacha20.encrypt(t),t},o.prototype.auth=function(t){return 0===this.cipherLen&&this.pad16(this.aadLen),this.cipherLen+=t.length,this.poly1305.update(t),t},o.prototype.finish=function(){var t=e.allocUnsafe(16),i=this.aadLen%4294967296,r=(this.aadLen-i)/4294967296;return t.writeUInt32LE(i,0,!0),t.writeUInt32LE(r,4,!0),i=this.cipherLen%4294967296,r=(this.cipherLen-i)/4294967296,t.writeUInt32LE(i,8,!0),t.writeUInt32LE(r,12,!0),0===this.cipherLen&&this.pad16(this.aadLen),this.pad16(this.cipherLen),this.poly1305.update(t),this.poly1305.finish()},o.prototype.pad16=function(t){0!=(t%=16)&&((t=e.allocUnsafe(16-t)).fill(0),this.poly1305.update(t))},t.exports=o}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(t){
/*!
 * hkdf.js - hkdf for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(8);e.extract=function(t,e,i){return r.hmac(i,t,e)},e.expand=function(e,i,s,n){var o=r.hash(n,t.alloc(0)).length,a=Math.ceil(s/o);if(255<a)throw new Error("Too many blocks.");var h=t.allocUnsafe(s);if(0!==a){var c=t.allocUnsafe(o+i.length+1);i.copy(c,o),c[c.length-1]=1;let s=r.hmac(n,c.slice(o),e);s.copy(h,0);for(let t=1;t<a;t++)s.copy(c,0),c[c.length-1]++,(s=r.hmac(n,c,e)).copy(h,t*o)}return h}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * hmac-drbg.js - hmac-drbg implementation for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 * Parts of this software based on hmac-drbg.
 */
const r=i(1),s=i(8),n="sha256",o=e.allocUnsafe(33),a=e.allocUnsafe(112),h=e.allocUnsafe(o.length+a.length);function c(t,i,r){if(!(this instanceof c))return new c(t,i,r);this.K=e.allocUnsafe(32),this.V=e.allocUnsafe(32),this.rounds=0,this.init(t,i,r)}c.prototype.init=function(t,e,i){for(let t=0;t<this.V.length;t++)this.K[t]=0,this.V[t]=1;this.reseed(t,e,i)},c.prototype.reseed=function(t,i,s){var n=a;r(e.isBuffer(t)),r(e.isBuffer(i)),r(e.isBuffer(s)),r(32===t.length),r(32===i.length),r(48===s.length),t.copy(n,0),i.copy(n,32),s.copy(n,64),this.update(n),this.rounds=1},c.prototype.iterate=function(){var t=o;this.V.copy(t,0),t[32]=0,this.K=s.hmac(n,t,this.K),this.V=s.hmac(n,this.V,this.K)},c.prototype.update=function(t){var i=h;r(e.isBuffer(t)),r(112===t.length),this.V.copy(i,0),i[32]=0,t.copy(i,33),this.K=s.hmac(n,i,this.K),this.V=s.hmac(n,this.V,this.K),i[32]=1,this.K=s.hmac(n,i,this.K),this.V=s.hmac(n,this.V,this.K)},c.prototype.generate=function(t){if(281474976710656<this.rounds)throw new Error("Reseed is required.");var i=e.allocUnsafe(t);let r=0;for(;r<t;)this.V=s.hmac(n,this.V,this.K),this.V.copy(i,r),r+=32;return this.iterate(),this.rounds++,i},t.exports=c}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(t){
/*!
 * schnorr.js - schnorr signatures for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1);var s=i(88);const n=i(207),o=i(38),a=i(568),h=i(8).sha256,c=s.ec("secp256k1").curve,u=t.allocUnsafe(64),l=e;l.hash=function(e,i){i=i.toArrayLike(t,"be",32);var r=u;return i.copy(r,0),e.copy(r,32),new o(h(r))},l.trySign=function(t,e,i,r){if(e.isZero())throw new Error("Bad private key.");if(e.gte(c.n))throw new Error("Bad private key.");if(i.isZero())return null;if(i.gte(c.n))return null;let s=c.g.mul(i);if((s=r?s.add(r):s).y.isOdd()&&(i=i.umod(c.n),i=c.n.sub(i)),(r=l.hash(t,s.getX())).isZero())return null;if(r.gte(c.n))return null;let o=r.imul(e);return(o=(o=i.isub(o)).umod(c.n)).isZero()?null:new n({r:s.getX(),s:o})},l.sign=function(t,e,i){var r=new o(e),s=l.drbg(t,e,i),n=c.n.byteLength();let a,h;for(i&&(a=c.decodePoint(i));!h;){var u=new o(s.generate(n));h=l.trySign(t,r,u,a)}return h},l.verify=function(t,e,i){if(e=new n(e),(t=l.hash(t,e.r)).gte(c.n))throw new Error("Invalid hash.");if(t.isZero())throw new Error("Invalid hash.");if(e.s.gte(c.n))throw new Error("Invalid S value.");if(e.r.gt(c.p))throw new Error("Invalid R value.");if(i=c.decodePoint(i).mul(t),t=c.g.mul(e.s),(i=i.add(t)).y.isOdd())throw new Error("Odd R value.");return i.getX().eq(e.r)},l.recover=function(e,i){if(e=new n(e),(i=l.hash(i,e.r)).gte(c.n))throw new Error("Invalid hash.");if(i.isZero())throw new Error("Invalid hash.");if(e.s.gte(c.n))throw new Error("Invalid S value.");if(e.r.gt(c.p))throw new Error("Invalid R value.");let r=i.invm(c.n),s=(r=r.umod(c.n),e.s),o=(s=(s=(s=(s=c.n.sub(s)).umod(c.n)).imul(r)).umod(c.n),c.pointFromX(e.r,!1).mul(r));var a=c.g.mul(s),h=o.add(a);if((i=(o=h.mul(i),a=c.g.mul(e.s),o.add(a))).y.isOdd())throw new Error("Odd R value.");if(i.getX().eq(e.r))return t.from(h.encode("array",!0));throw new Error("Could not recover pubkey.")},l.combineSigs=function(t){let e,i,r=new o(0);for(let o=0;o<t.length;o++){var s=new n(t[o]);if(s.s.isZero())throw new Error("Bad S value.");if(s.s.gte(c.n))throw new Error("Bad S value.");if(e=e||s.r,i&&!i.r.eq(s.r))throw new Error("Bad signature combination.");r=(r=r.iadd(s.s)).umod(c.n),i=s}if(r.isZero())throw new Error("Bad combined signature.");return new n({r:e,s:r})},l.combineKeys=function(e){if(0===e.length)throw new Error;if(1===e.length)return e[0];let i=c.decodePoint(e[0]);for(let t=1;t<e.length;t++){var r=c.decodePoint(e[t]);i=i.add(r)}return t.from(i.encode("array",!0))},l.partialSign=function(t,e,i,r){if(e=new o(e),i=new o(i),r=c.decodePoint(r),t=l.trySign(t,e,i,r))return t;throw new Error("Bad K value.")},l.alg=t.from("Schnorr+SHA256  ","ascii"),l.drbg=function(e,i,s){var n=t.allocUnsafe(48);return n.fill(0),s&&(r(32===s.length),s.copy(n,0)),l.alg.copy(n,32),new a(i,e,n)},l.generateNoncePair=function(e,i,r){var s=l.drbg(e,i,r),n=c.n.byteLength();let a;for(;(a=new o(s.generate(n))).isZero()||a.gte(c.n););return t.from(c.g.mul(a).encode("array",!0))}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";e.unsupported=!0},function(t,e,i){(function(t,r){var s;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var n,o,a,h,c="Expected a function",u="__lodash_hash_undefined__",l="__lodash_placeholder__",f=9007199254740991,d=4294967295,p=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],g="[object Arguments]",m="[object Array]",w="[object Boolean]",y="[object Date]",b="[object Error]",v="[object Function]",k="[object GeneratorFunction]",S="[object Map]",_="[object Number]",x="[object Object]",R="[object Promise]",E="[object RegExp]",A="[object Set]",M="[object String]",O="[object Symbol]",I="[object WeakMap]",C="[object ArrayBuffer]",T="[object DataView]",P="[object Float32Array]",B="[object Float64Array]",N="[object Int8Array]",L="[object Int16Array]",H="[object Int32Array]",U="[object Uint8Array]",D="[object Uint8ClampedArray]",z="[object Uint16Array]",V="[object Uint32Array]",F=/\b__p \+= '';/g,j=/\b(__p \+=) '' \+/g,K=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39);/g,W=/[&<>"']/g,X=RegExp(q.source),Y=RegExp(W.source),G=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,J=/<%=([\s\S]+?)%>/g,Z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,it=RegExp(et.source),rt=/^\s+/,st=/\s/,nt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ot=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ct=/[()=,{}\[\]\/\s]/,ut=/\\(\\)?/g,lt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft=/\w*$/,dt=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,mt=/^0o[0-7]+$/i,wt=/^(?:0|[1-9]\d*)$/,yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=/($^)/,vt=/['\n\r\u2028\u2029\\]/g,kt="\\ud800-\\udfff",St="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",_t="\\ufe0e\\ufe0f",xt="["+kt+"]",Rt="["+(It="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000")+"]",Et="["+St+"]",At="["+(o="\\u2700-\\u27bf")+"]",Mt="["+(Yt="a-z\\xdf-\\xf6\\xf8-\\xff")+"]",Ot="(?:"+Mt+"|"+(It="[^"+kt+It+"\\d+"+o+Yt+(a="A-Z\\xc0-\\xd6\\xd8-\\xde")+"]")+")",It="(?:"+(a="["+a+"]")+"|"+It+")",Ct="(?:['’](?:d|ll|m|re|s|t|ve))?",Tt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Pt=(Pt="["+_t+"]?")+(Bt="(?:"+Et+"|"+(o="\\ud83c[\\udffb-\\udfff]")+")?")+"(?:\\u200d(?:"+[Yt="[^"+kt+"]",Gt="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]"].join("|")+")"+Pt+Bt+")*",Bt="(?:"+[At,Gt,h].join("|")+")"+Pt,Nt=(At="(?:"+[Yt+Et+"?",Et,Gt,h,xt].join("|")+")",RegExp("['’]","g")),Lt=RegExp(Et,"g"),Ht=RegExp(o+"(?="+o+")|"+At+Pt,"g"),Ut=RegExp([a+"?"+Mt+"+"+Ct+"(?="+[Rt,a,"$"].join("|")+")",It+"+"+Tt+"(?="+[Rt,a+Ot,"$"].join("|")+")",a+"?"+Ot+"+"+Ct,a+"+"+Tt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",Bt].join("|"),"g"),Dt=RegExp("[\\u200d"+kt+St+_t+"]"),zt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Vt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ft=-1,jt={},Kt=(jt[P]=jt[B]=jt[N]=jt[L]=jt[H]=jt[U]=jt[D]=jt[z]=jt[V]=!0,jt[g]=jt[m]=jt[C]=jt[w]=jt[T]=jt[y]=jt[b]=jt[v]=jt[S]=jt[_]=jt[x]=jt[E]=jt[A]=jt[M]=jt[I]=!1,{}),qt=(Kt[g]=Kt[m]=Kt[C]=Kt[T]=Kt[w]=Kt[y]=Kt[P]=Kt[B]=Kt[N]=Kt[L]=Kt[H]=Kt[S]=Kt[_]=Kt[x]=Kt[E]=Kt[A]=Kt[M]=Kt[O]=Kt[U]=Kt[D]=Kt[z]=Kt[V]=!0,Kt[b]=Kt[v]=Kt[I]=!1,{"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"}),Wt=parseFloat,Xt=parseInt,Yt="object"==typeof t&&t&&t.Object===Object&&t,Gt="object"==typeof self&&self&&self.Object===Object&&self,$t=Yt||Gt||Function("return this")(),Jt=(h=e&&!e.nodeType&&e)&&"object"==typeof r&&r&&!r.nodeType&&r,Zt=Jt&&Jt.exports===h,Qt=Zt&&Yt.process,te=(xt=function(){try{var t=Jt&&Jt.require&&Jt.require("util").types;return t||Qt&&Qt.binding&&Qt.binding("util")}catch(t){}}())&&xt.isArrayBuffer,ee=xt&&xt.isDate,ie=xt&&xt.isMap,re=xt&&xt.isRegExp,se=xt&&xt.isSet,ne=xt&&xt.isTypedArray;function oe(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function ae(t,e,i,r){for(var s=-1,n=null==t?0:t.length;++s<n;){var o=t[s];e(r,o,i(o),t)}return r}function he(t,e){for(var i=-1,r=null==t?0:t.length;++i<r&&!1!==e(t[i],i,t););return t}function ce(t,e){for(var i=null==t?0:t.length;i--&&!1!==e(t[i],i,t););return t}function ue(t,e){for(var i=-1,r=null==t?0:t.length;++i<r;)if(!e(t[i],i,t))return!1;return!0}function le(t,e){for(var i=-1,r=null==t?0:t.length,s=0,n=[];++i<r;){var o=t[i];e(o,i,t)&&(n[s++]=o)}return n}function fe(t,e){return!(null==t||!t.length)&&-1<Se(t,e,0)}function de(t,e,i){for(var r=-1,s=null==t?0:t.length;++r<s;)if(i(e,t[r]))return!0;return!1}function pe(t,e){for(var i=-1,r=null==t?0:t.length,s=Array(r);++i<r;)s[i]=e(t[i],i,t);return s}function ge(t,e){for(var i=-1,r=e.length,s=t.length;++i<r;)t[s+i]=e[i];return t}function me(t,e,i,r){var s=-1,n=null==t?0:t.length;for(r&&n&&(i=t[++s]);++s<n;)i=e(i,t[s],s,t);return i}function we(t,e,i,r){var s=null==t?0:t.length;for(r&&s&&(i=t[--s]);s--;)i=e(i,t[s],s,t);return i}function ye(t,e){for(var i=-1,r=null==t?0:t.length;++i<r;)if(e(t[i],i,t))return!0;return!1}var be=Ee("length");function ve(t,e,i){var r;return i(t,(function(t,i,s){if(e(t,i,s))return r=i,!1})),r}function ke(t,e,i,r){for(var s=t.length,n=i+(r?1:-1);r?n--:++n<s;)if(e(t[n],n,t))return n;return-1}function Se(t,e,i){if(e!=e)return ke(t,xe,i);for(var r=t,s=e,n=i-1,o=r.length;++n<o;)if(r[n]===s)return n;return-1}function _e(t,e,i,r){for(var s=i-1,n=t.length;++s<n;)if(r(t[s],e))return s;return-1}function xe(t){return t!=t}function Re(t,e){var i=null==t?0:t.length;return i?Oe(t,e)/i:NaN}function Ee(t){return function(e){return null==e?n:e[t]}}function Ae(t){return function(e){return null==t?n:t[e]}}function Me(t,e,i,r,s){return s(t,(function(t,s,n){i=r?(r=!1,t):e(i,t,s,n)})),i}function Oe(t,e){for(var i,r=-1,s=t.length;++r<s;){var o=e(t[r]);o!==n&&(i=i===n?o:i+o)}return i}function Ie(t,e){for(var i=-1,r=Array(t);++i<t;)r[i]=e(i);return r}function Ce(t){return t&&t.slice(0,Xe(t)+1).replace(rt,"")}function Te(t){return function(e){return t(e)}}function Pe(t,e){return pe(e,(function(e){return t[e]}))}function Be(t,e){return t.has(e)}function Ne(t,e){for(var i=-1,r=t.length;++i<r&&-1<Se(e,t[i],0););return i}function Le(t,e){for(var i=t.length;i--&&-1<Se(e,t[i],0););return i}var He=Ae({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Ue=Ae({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function De(t){return"\\"+qt[t]}function ze(t){return Dt.test(t)}function Ve(t){var e=-1,i=Array(t.size);return t.forEach((function(t,r){i[++e]=[r,t]})),i}function Fe(t,e){return function(i){return t(e(i))}}function je(t,e){for(var i=-1,r=t.length,s=0,n=[];++i<r;){var o=t[i];o!==e&&o!==l||(t[i]=l,n[s++]=i)}return n}function Ke(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}function qe(t){return(ze(t)?function(t){for(var e=Ht.lastIndex=0;Ht.test(t);)++e;return e}:be)(t)}function We(t){return ze(t)?t.match(Ht)||[]:t.split("")}function Xe(t){for(var e=t.length;e--&&st.test(t.charAt(e)););return e}var Ye=Ae({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ge=function t(e){var i=(e=null==e?$t:Ge.defaults($t.Object(),e,Ge.pick($t,Vt))).Array,r=e.Date,s=e.Error,o=e.Function,a=e.Math,h=e.Object,st=e.RegExp,kt=e.String,St=e.TypeError,_t=i.prototype,xt=o.prototype,Rt=h.prototype,Et=e["__core-js_shared__"],At=xt.toString,Mt=Rt.hasOwnProperty,Ot=0,It=(xt=/[^.]+$/.exec(Et&&Et.keys&&Et.keys.IE_PROTO||""))?"Symbol(src)_1."+xt:"",Ct=Rt.toString,Tt=At.call(h),Pt=$t._,Bt=st("^"+At.call(Mt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ht=(xt=Zt?e.Buffer:n,e.Symbol),Dt=e.Uint8Array,qt=xt?xt.allocUnsafe:n,Yt=Fe(h.getPrototypeOf,h),Gt=h.create,Jt=Rt.propertyIsEnumerable,Qt=_t.splice,be=Ht?Ht.isConcatSpreadable:n,Ae=Ht?Ht.iterator:n,$e=Ht?Ht.toStringTag:n,Je=function(){try{var t=$s(h,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ze=e.clearTimeout!==$t.clearTimeout&&e.clearTimeout,Qe=r&&r.now!==$t.Date.now&&r.now,ti=e.setTimeout!==$t.setTimeout&&e.setTimeout,ei=a.ceil,ii=a.floor,ri=h.getOwnPropertySymbols,si=(xt=xt?xt.isBuffer:n,e.isFinite),ni=_t.join,oi=Fe(h.keys,h),ai=a.max,hi=a.min,ci=r.now,ui=e.parseInt,li=a.random,fi=_t.reverse,di=(r=$s(e,"DataView"),$s(e,"Map")),pi=$s(e,"Promise"),gi=$s(e,"Set"),mi=(e=$s(e,"WeakMap"),$s(h,"create")),wi=e&&new e,yi={},bi=xn(r),vi=xn(di),ki=xn(pi),Si=xn(gi),_i=xn(e),xi=(Ht=Ht?Ht.prototype:n)?Ht.valueOf:n,Ri=Ht?Ht.toString:n;function Ei(t){if(To(t)&&!So(t)&&!(t instanceof Ci)){if(t instanceof Ii)return t;if(Mt.call(t,"__wrapped__"))return Rn(t)}return new Ii(t)}var Ai=function(t){return Co(t)?Gt?Gt(t):(Mi.prototype=t,t=new Mi,Mi.prototype=n,t):{}};function Mi(){}function Oi(){}function Ii(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=n}function Ci(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function Ti(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function Pi(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function Bi(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function Ni(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new Bi;++e<i;)this.add(t[e])}function Li(t){t=this.__data__=new Pi(t),this.size=t.size}function Hi(t,e){var i,r=So(t),s=!r&&ko(t),n=!r&&!s&&Eo(t),o=!r&&!s&&!n&&zo(t),a=r||s||n||o,h=a?Ie(t.length,kt):[],c=h.length;for(i in t)!e&&!Mt.call(t,i)||a&&("length"==i||n&&("offset"==i||"parent"==i)||o&&("buffer"==i||"byteLength"==i||"byteOffset"==i)||sn(i,c))||h.push(i);return h}function Ui(t){var e=t.length;return e?t[Br(0,e-1)]:n}function Di(t,e){return vn(ps(t),Yi(e,0,t.length))}function zi(t){return vn(ps(t))}function Vi(t,e,i){(i===n||yo(t[e],i))&&(i!==n||e in t)||Wi(t,e,i)}function Fi(t,e,i){var r=t[e];Mt.call(t,e)&&yo(r,i)&&(i!==n||e in t)||Wi(t,e,i)}function ji(t,e){for(var i=t.length;i--;)if(yo(t[i][0],e))return i;return-1}function Ki(t,e,i,r){return Qi(t,(function(t,s,n){e(r,t,i(t),n)})),r}function qi(t,e){return t&&gs(e,ha(e),t)}function Wi(t,e,i){"__proto__"==e&&Je?Je(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function Xi(t,e){for(var r=-1,s=e.length,o=i(s),a=null==t;++r<s;)o[r]=a?n:ra(t,e[r]);return o}function Yi(t,e,i){return t==t&&(i!==n&&(t=t<=i?t:i),e!==n)?e<=t?t:e:t}function Gi(t,e,i,r,s,o){var a,c=1&e,u=2&e,l=4&e;if((a=i?s?i(t,r,s,o):i(t):a)===n){if(!Co(t))return t;var f;if(r=So(t)){if(a=function(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&Mt.call(t,"index")&&(i.index=t.index,i.input=t.input),i}(t),!c)return ps(t,a)}else{var d=Qs(t),p=d==v||d==k;if(Eo(t))return hs(t,c);if(d==x||d==g||p&&!s){if(a=u||p?{}:en(t),!c)return u?(m=p=t,m=(f=a)&&gs(m,ca(m),f),gs(p,Zs(p),m)):(p=qi(a,f=t),gs(f,Js(f),p))}else{if(!Kt[d])return s?t:{};a=function(t,e,i){var r=t.constructor;switch(e){case C:return cs(t);case w:case y:return new r(+t);case T:return function(t,e){return e=e?cs(t.buffer):t.buffer,new t.constructor(e,t.byteOffset,t.byteLength)}(t,i);case P:case B:case N:case L:case H:case U:case D:case z:case V:return us(t,i);case S:return new r;case _:case M:return new r(t);case E:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case A:return new r;case O:return function(t){return xi?h(xi.call(t)):{}}(t)}}(t,d,c)}}var m=(o=o||new Li).get(t);if(m)return m;o.set(t,a),Ho(t)?t.forEach((function(r){a.add(Gi(r,e,i,r,t,o))})):Po(t)&&t.forEach((function(r,s){a.set(s,Gi(r,e,i,s,t,o))}));var b=r?n:(l?u?js:Fs:u?ca:ha)(t);he(b||t,(function(r,s){b&&(r=t[s=r]),Fi(a,s,Gi(r,e,i,s,t,o))}))}return a}function $i(t,e,i){var r=i.length;if(null==t)return!r;for(t=h(t);r--;){var s=i[r],o=e[s],a=t[s];if(a===n&&!(s in t)||!o(a))return!1}return!0}function Ji(t,e,i){if("function"!=typeof t)throw new St(c);return mn((function(){t.apply(n,i)}),e)}function Zi(t,e,i,r){var s=-1,n=fe,o=!0,a=t.length,h=[],c=e.length;if(a){i&&(e=pe(e,Te(i))),r?(n=de,o=!1):200<=e.length&&(n=Be,o=!1,e=new Ni(e));t:for(;++s<a;){var u=t[s],l=null==i?u:i(u);u=r||0!==u?u:0;if(o&&l==l){for(var f=c;f--;)if(e[f]===l)continue t;h.push(u)}else n(e,l,r)||h.push(u)}}return h}Ei.templateSettings={escape:G,evaluate:$,interpolate:J,variable:"",imports:{_:Ei}},(Ei.prototype=Oi.prototype).constructor=Ei,(Ii.prototype=Ai(Oi.prototype)).constructor=Ii,(Ci.prototype=Ai(Oi.prototype)).constructor=Ci,Ti.prototype.clear=function(){this.__data__=mi?mi(null):{},this.size=0},Ti.prototype.delete=function(t){return t=this.has(t)&&delete this.__data__[t],this.size-=t?1:0,t},Ti.prototype.get=function(t){var e,i=this.__data__;return mi?(e=i[t])===u?n:e:Mt.call(i,t)?i[t]:n},Ti.prototype.has=function(t){var e=this.__data__;return mi?e[t]!==n:Mt.call(e,t)},Ti.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=mi&&e===n?u:e,this},Pi.prototype.clear=function(){this.__data__=[],this.size=0},Pi.prototype.delete=function(t){var e=this.__data__;return!((t=ji(e,t))<0||(t==e.length-1?e.pop():Qt.call(e,t,1),--this.size,0))},Pi.prototype.get=function(t){var e=this.__data__;return(t=ji(e,t))<0?n:e[t][1]},Pi.prototype.has=function(t){return-1<ji(this.__data__,t)},Pi.prototype.set=function(t,e){var i=this.__data__,r=ji(i,t);return r<0?(++this.size,i.push([t,e])):i[r][1]=e,this},Bi.prototype.clear=function(){this.size=0,this.__data__={hash:new Ti,map:new(di||Pi),string:new Ti}},Bi.prototype.delete=function(t){return t=Ys(this,t).delete(t),this.size-=t?1:0,t},Bi.prototype.get=function(t){return Ys(this,t).get(t)},Bi.prototype.has=function(t){return Ys(this,t).has(t)},Bi.prototype.set=function(t,e){var i=Ys(this,t),r=i.size;return i.set(t,e),this.size+=i.size==r?0:1,this},Ni.prototype.add=Ni.prototype.push=function(t){return this.__data__.set(t,u),this},Ni.prototype.has=function(t){return this.__data__.has(t)},Li.prototype.clear=function(){this.__data__=new Pi,this.size=0},Li.prototype.delete=function(t){var e=this.__data__;t=e.delete(t);return this.size=e.size,t},Li.prototype.get=function(t){return this.__data__.get(t)},Li.prototype.has=function(t){return this.__data__.has(t)},Li.prototype.set=function(t,e){var i=this.__data__;if(i instanceof Pi){var r=i.__data__;if(!di||r.length<199)return r.push([t,e]),this.size=++i.size,this;i=this.__data__=new Bi(r)}return i.set(t,e),this.size=i.size,this};var Qi=ys(ar),tr=ys(hr,!0);function er(t,e){var i=!0;return Qi(t,(function(t,r,s){return i=!!e(t,r,s)})),i}function ir(t,e,i){for(var r=-1,s=t.length;++r<s;){var o,a,h=t[r],c=e(h);null!=c&&(o===n?c==c&&!Do(c):i(c,o))&&(o=c,a=h)}return a}function rr(t,e){var i=[];return Qi(t,(function(t,r,s){e(t,r,s)&&i.push(t)})),i}function sr(t,e,i,r,s){var n=-1,o=t.length;for(i=i||rn,s=s||[];++n<o;){var a=t[n];0<e&&i(a)?1<e?sr(a,e-1,i,r,s):ge(s,a):r||(s[s.length]=a)}return s}var nr=bs(),or=bs(!0);function ar(t,e){return t&&nr(t,e,ha)}function hr(t,e){return t&&or(t,e,ha)}function cr(t,e){return le(e,(function(e){return Mo(t[e])}))}function ur(t,e){for(var i=0,r=(e=ss(e,t)).length;null!=t&&i<r;)t=t[_n(e[i++])];return i&&i==r?t:n}function lr(t,e,i){return e=e(t),So(t)?e:ge(e,i(t))}function fr(t){if(null==t)return t===n?"[object Undefined]":"[object Null]";if($e&&$e in h(t)){var e=t,i=Mt.call(e,$e),r=e[$e];try{e[$e]=n;var s=!0}catch(t){}var o=Ct.call(e);return s&&(i?e[$e]=r:delete e[$e]),o}return Ct.call(t)}function dr(t,e){return e<t}function pr(t,e){return null!=t&&Mt.call(t,e)}function gr(t,e){return null!=t&&e in h(t)}function mr(t,e,r){for(var s=r?de:fe,o=t[0].length,a=t.length,h=a,c=i(a),u=1/0,l=[];h--;){var f=t[h];h&&e&&(f=pe(f,Te(e))),u=hi(f.length,u),c[h]=!r&&(e||120<=o&&120<=f.length)?new Ni(h&&f):n}f=t[0];var d=-1,p=c[0];t:for(;++d<o&&l.length<u;){var g=f[d],m=e?e(g):g;g=r||0!==g?g:0;if(!(p?Be(p,m):s(l,m,r))){for(h=a;--h;){var w=c[h];if(!(w?Be(w,m):s(t[h],m,r)))continue t}p&&p.push(m),l.push(g)}}return l}function wr(t,e,i){return null==(e=null==(t=dn(t,e=ss(e,t)))?t:t[_n(In(e))])?n:oe(e,t,i)}function yr(t){return To(t)&&fr(t)==g}function br(t,e,i,r,s){if(t===e)return!0;if(null==t||null==e||!To(t)&&!To(e))return t!=t&&e!=e;var o=br,a=So(t),h=So(e),c=a?m:Qs(t),u=(h=h?m:Qs(e),(c=c==g?x:c)==x),l=(h=h==g?x:h)==x;if((h=c==h)&&Eo(t)){if(!Eo(e))return!1;u=!(a=!0)}if(h&&!u){if(s=s||new Li,a||zo(t))return zs(t,e,i,r,o,s);var f=t,d=e,p=i,v=r,k=o,R=s;switch(c){case T:if(f.byteLength!=d.byteLength||f.byteOffset!=d.byteOffset)return!1;f=f.buffer,d=d.buffer;case C:return!(f.byteLength!=d.byteLength||!k(new Dt(f),new Dt(d)));case w:case y:case _:return yo(+f,+d);case b:return f.name==d.name&&f.message==d.message;case E:case M:return f==d+"";case S:var I=Ve;case A:var P=1&p;return I=I||Ke,f.size==d.size||P?(P=R.get(f))?P==d:(p|=2,R.set(f,d),P=zs(I(f),I(d),p,v,k,R),R.delete(f),P):!1;case O:if(xi)return xi.call(f)==xi.call(d)}return!1}if(!(1&i)&&(a=u&&Mt.call(t,"__wrapped__"),c=l&&Mt.call(e,"__wrapped__"),a||c))return o(u=a?t.value():t,l=c?e.value():e,i,r,s=s||new Li);if(h){var B=t,N=e,L=i,H=r,U=o,D=s=s||new Li,z=1&L,V=Fs(B),F=V.length;if(F!=(a=Fs(N).length)&&!z)return!1;for(var j=F;j--;){var K=V[j];if(!(z?K in N:Mt.call(N,K)))return!1}if(a=D.get(B),c=D.get(N),a&&c)return a==N&&c==B;for(var q=!0,W=(D.set(B,N),D.set(N,B),z);++j<F;){var X,Y=B[K=V[j]],G=N[K];if(!((X=H?z?H(G,Y,K,N,B,D):H(Y,G,K,B,N,D):X)===n?Y===G||U(Y,G,L,H,D):X)){q=!1;break}W=W||"constructor"==K}return q&&!W&&(a=B.constructor)!=(c=N.constructor)&&"constructor"in B&&"constructor"in N&&!("function"==typeof a&&a instanceof a&&"function"==typeof c&&c instanceof c)&&(q=!1),D.delete(B),D.delete(N),q}return!1}function vr(t,e,i,r){var s=i.length,o=s,a=!r;if(null==t)return!o;for(t=h(t);s--;){var c=i[s];if(a&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++s<o;){var u=(c=i[s])[0],l=t[u],f=c[1];if(a&&c[2]){if(l===n&&!(u in t))return!1}else{var d,p=new Li;if(!((d=r?r(l,f,u,t,e,p):d)===n?br(f,l,3,r,p):d))return!1}}return!0}function kr(t){var e;return!(!Co(t)||(e=t,It&&It in e))&&(Mo(t)?Bt:gt).test(xn(t))}function Sr(t){return"function"==typeof t?t:null==t?Ba:"object"==typeof t?So(t)?Ar(t[0],t[1]):Er(t):ja(t)}function _r(t){if(!cn(t))return oi(t);var e,i=[];for(e in h(t))Mt.call(t,e)&&"constructor"!=e&&i.push(e);return i}function xr(t,e){return t<e}function Rr(t,e){var r=-1,s=xo(t)?i(t.length):[];return Qi(t,(function(t,i,n){s[++r]=e(t,i,n)})),s}function Er(t){var e=Gs(t);return 1==e.length&&e[0][2]?ln(e[0][0],e[0][1]):function(i){return i===t||vr(i,t,e)}}function Ar(t,e){return on(t)&&un(e)?ln(_n(t),e):function(i){var r=ra(i,t);return r===n&&r===e?sa(i,t):br(e,r,3)}}function Mr(t,e,i,r,s){t!==e&&nr(e,(function(o,a){var h,c,u,l,f,d,p,g,m,w,y,b,v;s=s||new Li,Co(o)?(c=e,l=i,f=Mr,d=r,p=s,y=pn(h=t,u=a),b=pn(c,u),(v=p.get(b))||((c=(v=d?d(y,b,u+"",h,c,p):n)===n)&&(m=!(g=So(b))&&Eo(b),w=!g&&!m&&zo(b),v=b,g||m||w?v=So(y)?y:Ro(y)?ps(y):m?hs(b,!(c=!1)):w?us(b,!(c=!1)):[]:No(b)||ko(b)?ko(v=y)?v=Yo(y):Co(y)&&!Mo(y)||(v=en(b)):c=!1),c&&(p.set(b,v),f(v,b,l,d,p),p.delete(b))),Vi(h,u,v)):(g=r?r(pn(t,a),o,a+"",t,e,s):n,Vi(t,a,g=g===n?o:g))}),ca)}function Or(t,e){var i=t.length;if(i)return sn(e+=e<0?i:0,i)?t[e]:n}function Ir(t,e,i){e=e.length?pe(e,(function(t){return So(t)?function(e){return ur(e,1===t.length?t[0]:t)}:t})):[Ba];var r=-1;e=pe(e,Te(Xs()));var s=Rr(t,(function(t,i,s){return{criteria:pe(e,(function(e){return e(t)})),index:++r,value:t}})),n=(t=function(t,e){for(var r=i,s=-1,n=t.criteria,o=e.criteria,a=n.length,h=r.length;++s<a;){var c=ls(n[s],o[s]);if(c)return h<=s?c:c*("desc"==r[s]?-1:1)}return t.index-e.index},s.length);for(s.sort(t);n--;)s[n]=s[n].value;return s}function Cr(t,e,i){for(var r=-1,s=e.length,n={};++r<s;){var o=e[r],a=ur(t,o);i(a,o)&&Dr(n,ss(o,t),a)}return n}function Tr(t,e,i,r){var s=r?_e:Se,n=-1,o=e.length,a=t;for(t===e&&(e=ps(e)),i&&(a=pe(t,Te(i)));++n<o;)for(var h=0,c=e[n],u=i?i(c):c;-1<(h=s(a,u,h,r));)a!==t&&Qt.call(a,h,1),Qt.call(t,h,1);return t}function Pr(t,e){for(var i=t?e.length:0,r=i-1;i--;){var s,n=e[i];i!=r&&n===s||(sn(s=n)?Qt.call(t,n,1):$r(t,n))}}function Br(t,e){return t+ii(li()*(e-t+1))}function Nr(t,e){var i="";if(!(!t||e<1||f<e))for(;e%2&&(i+=t),(e=ii(e/2))&&(t+=t),e;);return i}function Lr(t,e){return wn(fn(t,e,Ba),t+"")}function Hr(t){return Ui(wa(t))}function Ur(t,e){return vn(t=wa(t),Yi(e,0,t.length))}function Dr(t,e,i,r){if(Co(t))for(var s=-1,o=(e=ss(e,t)).length,a=o-1,h=t;null!=h&&++s<o;){var c,u=_n(e[s]),l=i;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;Fi(h,u,l=s!=a&&(c=h[u],(l=r?r(c,u,h):n)===n)?Co(c)?c:sn(e[s+1])?[]:{}:l),h=h[u]}return t}var zr=wi?function(t,e){return wi.set(t,e),t}:Ba;Ht=Je?function(t,e){return Je(t,"toString",{configurable:!0,enumerable:!1,value:Ca(e),writable:!0})}:Ba;function Vr(t){return vn(wa(t))}function Fr(t,e,r){for(var s=-1,n=t.length,o=((r=n<r?n:r)<0&&(r+=n),n=r<(e=e<0?n<-e?0:n+e:e)?0:r-e>>>0,e>>>=0,i(n));++s<n;)o[s]=t[s+e];return o}function jr(t,e){var i;return Qi(t,(function(t,r,s){return!(i=e(t,r,s))})),!!i}function Kr(t,e,i){var r=0,s=null==t?r:t.length;if("number"==typeof e&&e==e&&s<=2147483647){for(;r<s;){var n=r+s>>>1,o=t[n];null!==o&&!Do(o)&&(i?o<=e:o<e)?r=1+n:s=n}return s}return qr(t,e,Ba,i)}function qr(t,e,i,r){var s=0,o=null==t?0:t.length;if(0===o)return 0;for(var a=(e=i(e))!=e,h=null===e,c=Do(e),u=e===n;s<o;){var l=ii((s+o)/2),f=i(t[l]),d=f!==n,p=null===f,g=f==f,m=Do(f);(g=a?r||g:u?g&&(r||d):h?g&&d&&(r||!p):c?g&&d&&!p&&(r||!m):!p&&!m&&(r?f<=e:f<e))?s=l+1:o=l}return hi(o,4294967294)}function Wr(t,e){for(var i=-1,r=t.length,s=0,n=[];++i<r;){var o,a=t[i],h=e?e(a):a;i&&yo(h,o)||(o=h,n[s++]=0===a?0:a)}return n}function Xr(t){return"number"==typeof t?t:Do(t)?NaN:+t}function Yr(t){var e;return"string"==typeof t?t:So(t)?pe(t,Yr)+"":Do(t)?Ri?Ri.call(t):"":"0"==(e=t+"")&&1/t==-1/0?"-0":e}function Gr(t,e,i){var r=-1,s=fe,n=t.length,o=!0,a=[],h=a;if(i)o=!1,s=de;else if(200<=n){var c=e?null:Bs(t);if(c)return Ke(c);o=!1,s=Be,h=new Ni}else h=e?[]:a;t:for(;++r<n;){var u=t[r],l=e?e(u):u;u=i||0!==u?u:0;if(o&&l==l){for(var f=h.length;f--;)if(h[f]===l)continue t;e&&h.push(l),a.push(u)}else s(h,l,i)||(h!==a&&h.push(l),a.push(u))}return a}function $r(t,e){return null==(t=dn(t,e=ss(e,t)))||delete t[_n(In(e))]}function Jr(t,e,i,r){return Dr(t,e,i(ur(t,e)),r)}function Zr(t,e,i,r){for(var s=t.length,n=r?s:-1;(r?n--:++n<s)&&e(t[n],n,t););return i?Fr(t,r?0:n,r?n+1:s):Fr(t,r?n+1:0,r?s:n)}function Qr(t,e){var i=t;return me(e,(function(t,e){return e.func.apply(e.thisArg,ge([t],e.args))}),i=t instanceof Ci?t.value():i)}function ts(t,e,r){var s=t.length;if(s<2)return s?Gr(t[0]):[];for(var n=-1,o=i(s);++n<s;)for(var a=t[n],h=-1;++h<s;)h!=n&&(o[n]=Zi(o[n]||a,t[h],e,r));return Gr(sr(o,1),e,r)}function es(t,e,i){for(var r=-1,s=t.length,o=e.length,a={};++r<s;){var h=r<o?e[r]:n;i(a,t[r],h)}return a}function is(t){return Ro(t)?t:[]}function rs(t){return"function"==typeof t?t:Ba}function ss(t,e){return So(t)?t:on(t,e)?[t]:Sn(Go(t))}var ns=Lr;function os(t,e,i){var r=t.length;return i=i===n?r:i,!e&&r<=i?t:Fr(t,e,i)}var as=Ze||function(t){return $t.clearTimeout(t)};function hs(t,e){return e?t.slice():(e=t.length,e=qt?qt(e):new t.constructor(e),t.copy(e),e)}function cs(t){var e=new t.constructor(t.byteLength);return new Dt(e).set(new Dt(t)),e}function us(t,e){return e=e?cs(t.buffer):t.buffer,new t.constructor(e,t.byteOffset,t.length)}function ls(t,e){if(t!==e){var i=t!==n,r=null===t,s=t==t,o=Do(t),a=e!==n,h=null===e,c=e==e,u=Do(e);if(!h&&!u&&!o&&e<t||o&&a&&c&&!h&&!u||r&&a&&c||!i&&c||!s)return 1;if(!r&&!o&&!u&&t<e||u&&i&&s&&!r&&!o||h&&i&&s||!a&&s||!c)return-1}return 0}function fs(t,e,r,s){for(var n=-1,o=t.length,a=r.length,h=-1,c=e.length,u=ai(o-a,0),l=i(c+u),f=!s;++h<c;)l[h]=e[h];for(;++n<a;)(f||n<o)&&(l[r[n]]=t[n]);for(;u--;)l[h++]=t[n++];return l}function ds(t,e,r,s){for(var n=-1,o=t.length,a=-1,h=r.length,c=-1,u=e.length,l=ai(o-h,0),f=i(l+u),d=!s;++n<l;)f[n]=t[n];for(var p=n;++c<u;)f[p+c]=e[c];for(;++a<h;)(d||n<o)&&(f[p+r[a]]=t[n++]);return f}function ps(t,e){var r=-1,s=t.length;for(e=e||i(s);++r<s;)e[r]=t[r];return e}function gs(t,e,i,r){for(var s=!i,o=(i=i||{},-1),a=e.length;++o<a;){var h=e[o],c=r?r(i[h],t[h],h,i,t):n;(s?Wi:Fi)(i,h,c=c===n?t[h]:c)}return i}function ms(t,e){return function(i,r){var s=So(i)?ae:Ki,n=e?e():{};return s(i,t,Xs(r,2),n)}}function ws(t){return Lr((function(e,i){var r=-1,s=i.length,o=1<s?i[s-1]:n,a=2<s?i[2]:n;o=3<t.length&&"function"==typeof o?(s--,o):n;for(a&&nn(i[0],i[1],a)&&(o=s<3?n:o,s=1),e=h(e);++r<s;){var c=i[r];c&&t(e,c,r,o)}return e}))}function ys(t,e){return function(i,r){if(null!=i){if(!xo(i))return t(i,r);for(var s=i.length,n=e?s:-1,o=h(i);(e?n--:++n<s)&&!1!==r(o[n],n,o););}return i}}function bs(t){return function(e,i,r){for(var s=-1,n=h(e),o=r(e),a=o.length;a--;){var c=o[t?a:++s];if(!1===i(n[c],c,n))break}return e}}function vs(t){return function(e){var i=(r=ze(e=Go(e))?We(e):n)?r[0]:e.charAt(0),r=r?os(r,1).join(""):e.slice(1);return i[t]()+r}}function ks(t){return function(e){return me(Ma(va(e).replace(Nt,"")),t,"")}}function Ss(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var i=Ai(t.prototype),r=t.apply(i,e);return Co(r)?r:i}}function _s(t){return function(e,i,r){var s,o=h(e);return-1<(i=(xo(e)||(s=Xs(i,3),e=ha(e),i=function(t){return s(o[t],t,o)}),t(e,i,r)))?o[s?e[i]:i]:n}}function xs(t){return Vs((function(e){var i=e.length,r=i,s=Ii.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if("function"!=typeof o)throw new St(c);s&&!u&&"wrapper"==qs(o)&&(u=new Ii([],!0))}for(r=u?r:i;++r<i;)var a=qs(o=e[r]),h="wrapper"==a?Ks(o):n,u=h&&an(h[0])&&424==h[1]&&!h[4].length&&1==h[9]?u[qs(h[0])].apply(u,h[3]):1==o.length&&an(o)?u[a]():u.thru(o);return function(){var t=arguments,r=t[0];if(u&&1==t.length&&So(r))return u.plant(r).value();for(var s=0,n=i?e[s].apply(this,t):r;++s<i;)n=e[s].call(this,n);return n}}))}function Rs(t,e,r,s,o,a,h,c,u,l){var f=128&e,d=1&e,p=2&e,g=24&e,m=512&e,w=p?n:Ss(t);return function y(){for(var b,v,k,S=i(k=arguments.length),_=k;_--;)S[_]=arguments[_];return g&&(v=function(t,e){for(var i=t.length,r=0;i--;)t[i]===e&&++r;return r}(S,b=Ws(y))),s&&(S=fs(S,s,o,g)),a&&(S=ds(S,a,h,g)),k-=v,g&&k<l?(v=je(S,b),Ts(t,e,Rs,y.placeholder,r,S,v,c,u,l-k)):(b=d?r:this,v=p?b[t]:t,k=S.length,c?S=function(t,e){for(var i=t.length,r=hi(e.length,i),s=ps(t);r--;){var o=e[r];t[r]=sn(o,i)?s[o]:n}return t}(S,c):m&&1<k&&S.reverse(),f&&u<k&&(S.length=u),(v=this&&this!==$t&&this instanceof y?w||Ss(v):v).apply(b,S))}}function Es(t,e){return function(i,r){return i=i,s=t,n=e(r),o={},ar(i,(function(t,e,i){s(o,n(t),e,i)})),o;var s,n,o}}function As(t,e){return function(i,r){var s;if(i===n&&r===n)return e;if(i!==n&&(s=i),r!==n){if(s===n)return r;r=("string"==typeof i||"string"==typeof r?(i=Yr(i),Yr):(i=Xr(i),Xr))(r),s=t(i,r)}return s}}function Ms(t){return Vs((function(e){return e=pe(e,Te(Xs())),Lr((function(i){var r=this;return t(e,(function(t){return oe(t,r,i)}))}))}))}function Os(t,e){var i=(e=e===n?" ":Yr(e)).length;return i<2?i?Nr(e,t):e:(i=Nr(e,ei(t/qe(e))),ze(e)?os(We(i),0,t).join(""):i.slice(0,t))}function Is(t){return function(e,r,s){s&&"number"!=typeof s&&nn(e,r,s)&&(r=s=n),e=Ko(e),r===n?(r=e,e=0):r=Ko(r);for(var o=e,a=s=s===n?e<r?1:-1:Ko(s),h=t,c=-1,u=ai(ei((r-o)/(a||1)),0),l=i(u);u--;)l[h?u:++c]=o,o+=a;return l}}function Cs(t){return function(e,i){return"string"==typeof e&&"string"==typeof i||(e=Xo(e),i=Xo(i)),t(e,i)}}function Ts(t,e,i,r,s,o,a,h,c,u){var l=8&e;4&(e=(e|(l?32:64))&~(l?64:32))||(e&=-4),s=[t,e,s,l?o:n,l?a:n,l?n:o,l?n:a,h,c,u],o=i.apply(n,s);return an(t)&&gn(o,s),o.placeholder=r,yn(o,t,e)}function Ps(t){var e=a[t];return function(t,i){var r;return t=Xo(t),(i=null==i?0:hi(qo(i),292))&&si(t)?(r=(Go(t)+"e").split("e"),+((r=(Go(e(r[0]+"e"+(+r[1]+i)))+"e").split("e"))[0]+"e"+(+r[1]-i))):e(t)}}var Bs=gi&&1/Ke(new gi([,-0]))[1]==1/0?function(t){return new gi(t)}:Da;function Ns(t){return function(e){var i,r,s,n=Qs(e);return n==S?Ve(e):n==A?(n=e,i=-1,r=Array(n.size),n.forEach((function(t){r[++i]=[t,t]})),r):pe(t(s=e),(function(t){return[t,s[t]]}))}}function Ls(t,e,r,s,o,a,h,u){var f,d,p,g,m,w,y,b,v,k,S,_,x,R=2&e;if(R||"function"==typeof t)return(f=s?s.length:0)||(e&=-97,s=o=n),h=h===n?h:ai(qo(h),0),u=u===n?u:qo(u),f-=o?o.length:0,64&e&&(p=s,g=o,s=o=n),p=[t,e,r,s,o,p,g,a,h,u],(d=R?n:Ks(t))&&(g=d,b=(y=(h=(a=p)[1])|(w=g[1]))<131,v=128==w&&8==h||128==w&&256==h&&a[7].length<=g[8]||384==w&&g[7].length<=g[8]&&8==h,b||v)&&(1&w&&(a[2]=g[2],y|=1&h?0:4),(b=g[3])&&(m=a[3],a[3]=m?fs(m,b,g[4]):b,a[4]=m?je(a[3],l):g[4]),(b=g[5])&&(m=a[5],a[5]=m?ds(m,b,g[6]):b,a[6]=m?je(a[5],l):g[6]),(b=g[7])&&(a[7]=b),128&w&&(a[8]=null==a[8]?g[8]:hi(a[8],g[8])),null==a[9]&&(a[9]=g[9]),a[0]=g[0],a[1]=y),t=p[0],e=p[1],r=p[2],s=p[3],o=p[4],!(u=p[9]=p[9]===n?R?0:t.length:ai(p[9]-f,0))&&24&e&&(e&=-25),v=e&&1!=e?8==e||16==e?function(t,e,r){var s=Ss(t);return function o(){for(var a=arguments.length,h=i(a),c=a,u=Ws(o);c--;)h[c]=arguments[c];return(a-=(u=a<3&&h[0]!==u&&h[a-1]!==u?[]:je(h,u)).length)<r?Ts(t,e,Rs,o.placeholder,n,h,u,n,n,r-a):oe(this&&this!==$t&&this instanceof o?s:t,this,h)}}(t,e,u):32!=e&&33!=e||o.length?Rs.apply(n,p):function(t,e,r,s){var n=1&e,o=Ss(t);return function e(){for(var a=-1,h=arguments.length,c=-1,u=s.length,l=i(u+h),f=this&&this!==$t&&this instanceof e?o:t;++c<u;)l[c]=s[c];for(;h--;)l[c++]=arguments[++a];return oe(f,n?r:this,l)}}(t,e,r,s):(S=r,_=1&e,x=Ss(k=t),function t(){return(this&&this!==$t&&this instanceof t?x:k).apply(_?S:this,arguments)}),yn((d?zr:gn)(v,p),t,e);throw new St(c)}function Hs(t,e,i,r){return t===n||yo(t,Rt[i])&&!Mt.call(r,i)?e:t}function Us(t,e,i,r,s,o){return Co(t)&&Co(e)&&(o.set(e,t),Mr(t,e,n,Us,o),o.delete(e)),t}function Ds(t){return No(t)?n:t}function zs(t,e,i,r,s,o){var a=1&i,h=t.length;if(h!=(c=e.length)&&!(a&&h<c))return!1;var c=o.get(t),u=o.get(e);if(c&&u)return c==e&&u==t;var l=-1,f=!0,d=2&i?new Ni:n;for(o.set(t,e),o.set(e,t);++l<h;){var p,g=t[l],m=e[l];if((p=r?a?r(m,g,l,e,t,o):r(g,m,l,t,e,o):p)!==n){if(p)continue;f=!1;break}if(d){if(!ye(e,(function(t,e){return!Be(d,e)&&(g===t||s(g,t,i,r,o))&&d.push(e)}))){f=!1;break}}else if(g!==m&&!s(g,m,i,r,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function Vs(t){return wn(fn(t,n,Mn),t+"")}function Fs(t){return lr(t,ha,Js)}function js(t){return lr(t,ca,Zs)}var Ks=wi?function(t){return wi.get(t)}:Da;function qs(t){for(var e=t.name+"",i=yi[e],r=Mt.call(yi,e)?i.length:0;r--;){var s=i[r],n=s.func;if(null==n||n==t)return s.name}return e}function Ws(t){return(Mt.call(Ei,"placeholder")?Ei:t).placeholder}function Xs(){var t=(t=Ei.iteratee||Na)===Na?Sr:t;return arguments.length?t(arguments[0],arguments[1]):t}function Ys(t,e){var i,r;t=t.__data__;return("string"==(r=typeof(i=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==i:null===i)?t["string"==typeof e?"string":"hash"]:t.map}function Gs(t){for(var e=ha(t),i=e.length;i--;){var r=e[i],s=t[r];e[i]=[r,s,un(s)]}return e}function $s(t,e){return e=e,kr(t=null==(t=t)?n:t[e])?t:n}var Js=ri?function(t){return null==t?[]:(t=h(t),le(ri(t),(function(e){return Jt.call(t,e)})))}:Wa,Zs=ri?function(t){for(var e=[];t;)ge(e,Js(t)),t=Yt(t);return e}:Wa,Qs=fr;function tn(t,e,i){for(var r=-1,s=(e=ss(e,t)).length,n=!1;++r<s;){var o=_n(e[r]);if(!(n=null!=t&&i(t,o)))break;t=t[o]}return n||++r!=s?n:!!(s=null==t?0:t.length)&&Io(s)&&sn(o,s)&&(So(t)||ko(t))}function en(t){return"function"!=typeof t.constructor||cn(t)?{}:Ai(Yt(t))}function rn(t){return So(t)||ko(t)||!!(be&&t&&t[be])}function sn(t,e){var i=typeof t;return!!(e=null==e?f:e)&&("number"==i||"symbol"!=i&&wt.test(t))&&-1<t&&t%1==0&&t<e}function nn(t,e,i){var r;if(Co(i))return("number"==(r=typeof e)?xo(i)&&sn(e,i.length):"string"==r&&e in i)&&yo(i[e],t)}function on(t,e){var i;if(!So(t))return"number"==(i=typeof t)||"symbol"==i||"boolean"==i||null==t||Do(t)||Q.test(t)||!Z.test(t)||null!=e&&t in h(e)}function an(t){var e=qs(t),i=Ei[e];return"function"==typeof i&&e in Ci.prototype&&(t===i||(e=Ks(i))&&t===e[0])}(r&&Qs(new r(new ArrayBuffer(1)))!=T||di&&Qs(new di)!=S||pi&&Qs(pi.resolve())!=R||gi&&Qs(new gi)!=A||e&&Qs(new e)!=I)&&(Qs=function(t){var e=fr(t);if(t=(t=e==x?t.constructor:n)?xn(t):"")switch(t){case bi:return T;case vi:return S;case ki:return R;case Si:return A;case _i:return I}return e});var hn=Et?Mo:Xa;function cn(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Rt)}function un(t){return t==t&&!Co(t)}function ln(t,e){return function(i){return null!=i&&i[t]===e&&(e!==n||t in h(i))}}function fn(t,e,r){return e=ai(e===n?t.length-1:e,0),function(){for(var s=arguments,n=-1,o=ai(s.length-e,0),a=i(o);++n<o;)a[n]=s[e+n];n=-1;for(var h=i(e+1);++n<e;)h[n]=s[n];return h[e]=r(a),oe(t,this,h)}}function dn(t,e){return e.length<2?t:ur(t,Fr(e,0,-1))}function pn(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var gn=bn(zr),mn=ti||function(t,e){return $t.setTimeout(t,e)},wn=bn(Ht);function yn(t,e,i){var r,s,n;return wn(t,(s=(e=(e=t=e=e+"").match(ot))?e[1].split(at):[],n=i,he(p,(function(t){var e="_."+t[0];n&t[1]&&!fe(s,e)&&s.push(e)})),(i=(e=s.sort()).length)?(e[r=i-1]=(1<i?"& ":"")+e[r],e=e.join(2<i?", ":" "),t.replace(nt,"{\n/* [wrapped with "+e+"] */\n")):t))}function bn(t){var e=0,i=0;return function(){var r=ci(),s=16-(r-i);if(i=r,0<s){if(800<=++e)return arguments[0]}else e=0;return t.apply(n,arguments)}}function vn(t,e){var i=-1,r=t.length,s=r-1;for(e=e===n?r:e;++i<e;){var o=Br(i,s),a=t[o];t[o]=t[i],t[i]=a}return t.length=e,t}kn=(Ze=fo(Ze=function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,i,r,s){e.push(r?s.replace(ut,"$1"):i||t)})),e},(function(t){return 500===kn.size&&kn.clear(),t}))).cache;var kn,Sn=Ze;function _n(t){var e;return"string"==typeof t||Do(t)?t:"0"==(e=t+"")&&1/t==-1/0?"-0":e}function xn(t){if(null!=t){try{return At.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Rn(t){var e;return t instanceof Ci?t.clone():((e=new Ii(t.__wrapped__,t.__chain__)).__actions__=ps(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e)}function En(t,e,i){var r=null==t?0:t.length;return r?((i=null==i?0:qo(i))<0&&(i=ai(r+i,0)),ke(t,Xs(e,3),i)):-1}function An(t,e,i){var r,s=null==t?0:t.length;return s?(r=s-1,i!==n&&(r=qo(i),r=i<0?ai(s+r,0):hi(r,s-1)),ke(t,Xs(e,3),r,!0)):-1}function Mn(t){return null!=t&&t.length?sr(t,1):[]}function On(t){return t&&t.length?t[0]:n}function In(t){var e=null==t?0:t.length;return e?t[e-1]:n}function Cn(t,e){return t&&t.length&&e&&e.length?Tr(t,e):t}r=Lr((function(t,e){return Ro(t)?Zi(t,sr(e,1,Ro,!0)):[]})),pi=Lr((function(t,e){var i=In(e);return Ro(i)&&(i=n),Ro(t)?Zi(t,sr(e,1,Ro,!0),Xs(i,2)):[]})),e=Lr((function(t,e){var i=In(e);return Ro(i)&&(i=n),Ro(t)?Zi(t,sr(e,1,Ro,!0),n,i):[]})),Et=Lr((function(t){var e=pe(t,is);return e.length&&e[0]===t[0]?mr(e):[]})),ti=Lr((function(t){var e=In(t),i=pe(t,is);return e===In(i)?e=n:i.pop(),i.length&&i[0]===t[0]?mr(i,Xs(e,2)):[]})),Ht=Lr((function(t){var e=In(t),i=pe(t,is);return(e="function"==typeof e?e:n)&&i.pop(),i.length&&i[0]===t[0]?mr(i,n,e):[]})),Ze=Lr(Cn);var Tn=Vs((function(t,e){var i=null==t?0:t.length,r=Xi(t,e);return Pr(t,pe(e,(function(t){return sn(t,i)?+t:t})).sort(ls)),r}));function Pn(t){return null==t?t:fi.call(t)}var Bn=Lr((function(t){return Gr(sr(t,1,Ro,!0))})),Nn=Lr((function(t){var e=In(t);return Ro(e)&&(e=n),Gr(sr(t,1,Ro,!0),Xs(e,2))})),Ln=Lr((function(t){var e="function"==typeof(e=In(t))?e:n;return Gr(sr(t,1,Ro,!0),n,e)}));function Hn(t){var e;return t&&t.length?(e=0,t=le(t,(function(t){return Ro(t)&&(e=ai(t.length,e),1)})),Ie(e,(function(e){return pe(t,Ee(e))}))):[]}function Un(t,e){return t&&t.length?(t=Hn(t),null==e?t:pe(t,(function(t){return oe(e,n,t)}))):[]}var Dn=Lr((function(t,e){return Ro(t)?Zi(t,e):[]})),zn=Lr((function(t){return ts(le(t,Ro))})),Vn=Lr((function(t){var e=In(t);return Ro(e)&&(e=n),ts(le(t,Ro),Xs(e,2))})),Fn=Lr((function(t){var e="function"==typeof(e=In(t))?e:n;return ts(le(t,Ro),n,e)})),jn=Lr(Hn),Kn=Lr((function(t){var e="function"==typeof(e=1<(e=t.length)?t[e-1]:n)?(t.pop(),e):n;return Un(t,e)}));function qn(t){return(t=Ei(t)).__chain__=!0,t}function Wn(t,e){return e(t)}var Xn=Vs((function(t){function e(e){return Xi(e,t)}var i=t.length,r=i?t[0]:0,s=this.__wrapped__;return!(1<i||this.__actions__.length)&&s instanceof Ci&&sn(r)?((s=s.slice(r,+r+(i?1:0))).__actions__.push({func:Wn,args:[e],thisArg:n}),new Ii(s,this.__chain__).thru((function(t){return i&&!t.length&&t.push(n),t}))):this.thru(e)})),Yn=ms((function(t,e,i){Mt.call(t,i)?++t[i]:Wi(t,i,1)})),Gn=_s(En),$n=_s(An);function Jn(t,e){return(So(t)?he:Qi)(t,Xs(e,3))}function Zn(t,e){return(So(t)?ce:tr)(t,Xs(e,3))}var Qn=ms((function(t,e,i){Mt.call(t,i)?t[i].push(e):Wi(t,i,[e])})),to=Lr((function(t,e,r){var s=-1,n="function"==typeof e,o=xo(t)?i(t.length):[];return Qi(t,(function(t){o[++s]=n?oe(e,t,r):wr(t,e,r)})),o})),eo=ms((function(t,e,i){Wi(t,i,e)}));function io(t,e){return(So(t)?pe:Rr)(t,Xs(e,3))}var ro=ms((function(t,e,i){t[i?0:1].push(e)}),(function(){return[[],[]]})),so=Lr((function(t,e){var i;return null==t?[]:(1<(i=e.length)&&nn(t,e[0],e[1])?e=[]:2<i&&nn(e[0],e[1],e[2])&&(e=[e[0]]),Ir(t,sr(e,1),[]))})),no=Qe||function(){return $t.Date.now()};function oo(t,e,i){return e=i?n:e,e=t&&null==e?t.length:e,Ls(t,128,n,n,n,n,e)}function ao(t,e){var i;if("function"!=typeof e)throw new St(c);return t=qo(t),function(){return 0<--t&&(i=e.apply(this,arguments)),t<=1&&(e=n),i}}var ho=Lr((function(t,e,i){var r,s=1;return i.length&&(r=je(i,Ws(ho)),s|=32),Ls(t,s,e,i,r)})),co=Lr((function(t,e,i){var r,s=3;return i.length&&(r=je(i,Ws(co)),s|=32),Ls(e,s,t,i,r)}));function uo(t,e,i){var r,s,o,a,h,u,l=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new St(c);function g(e){var i=r,o=s;return r=s=n,l=e,a=t.apply(o,i)}function m(t){var i=t-u;return u===n||e<=i||i<0||d&&o<=t-l}function w(){var t,i=no();if(m(i))return y(i);h=mn(w,(t=e-((i=i)-u),d?hi(t,o-(i-l)):t))}function y(t){return h=n,p&&r?g(t):(r=s=n,a)}function b(){var t=no(),i=m(t);if(r=arguments,s=this,u=t,i){if(h===n)return l=t=u,h=mn(w,e),f?g(t):a;if(d)return as(h),h=mn(w,e),g(u)}return h===n&&(h=mn(w,e)),a}return e=Xo(e)||0,Co(i)&&(f=!!i.leading,o=(d="maxWait"in i)?ai(Xo(i.maxWait)||0,e):o,p="trailing"in i?!!i.trailing:p),b.cancel=function(){h!==n&&as(h),l=0,r=u=s=h=n},b.flush=function(){return h===n?a:y(no())},b}Qe=Lr((function(t,e){return Ji(t,1,e)}));var lo=Lr((function(t,e,i){return Ji(t,Xo(e)||0,i)}));function fo(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new St(c);function i(){var r=arguments,s=e?e.apply(this,r):r[0],n=i.cache;return n.has(s)?n.get(s):(r=t.apply(this,r),i.cache=n.set(s,r)||n,r)}return i.cache=new(fo.Cache||Bi),i}function po(t){if("function"!=typeof t)throw new St(c);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}fo.Cache=Bi;ns=ns((function(t,e){var i=(e=1==e.length&&So(e[0])?pe(e[0],Te(Xs())):pe(sr(e,1),Te(Xs()))).length;return Lr((function(r){for(var s=-1,n=hi(r.length,i);++s<n;)r[s]=e[s].call(this,r[s]);return oe(t,this,r)}))}));var go=Lr((function(t,e){var i=je(e,Ws(go));return Ls(t,32,n,e,i)})),mo=Lr((function(t,e){var i=je(e,Ws(mo));return Ls(t,64,n,e,i)})),wo=Vs((function(t,e){return Ls(t,256,n,n,n,e)}));function yo(t,e){return t===e||t!=t&&e!=e}var bo=Cs(dr),vo=Cs((function(t,e){return e<=t})),ko=yr(function(){return arguments}())?yr:function(t){return To(t)&&Mt.call(t,"callee")&&!Jt.call(t,"callee")},So=i.isArray,_o=te?Te(te):function(t){return To(t)&&fr(t)==C};function xo(t){return null!=t&&Io(t.length)&&!Mo(t)}function Ro(t){return To(t)&&xo(t)}var Eo=xt||Xa;xt=ee?Te(ee):function(t){return To(t)&&fr(t)==y};function Ao(t){var e;return!!To(t)&&((e=fr(t))==b||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!No(t))}function Mo(t){return!!Co(t)&&((t=fr(t))==v||t==k||"[object AsyncFunction]"==t||"[object Proxy]"==t)}function Oo(t){return"number"==typeof t&&t==qo(t)}function Io(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=f}function Co(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function To(t){return null!=t&&"object"==typeof t}var Po=ie?Te(ie):function(t){return To(t)&&Qs(t)==S};function Bo(t){return"number"==typeof t||To(t)&&fr(t)==_}function No(t){return!(!To(t)||fr(t)!=x)&&(null===(t=Yt(t))||"function"==typeof(t=Mt.call(t,"constructor")&&t.constructor)&&t instanceof t&&At.call(t)==Tt)}var Lo=re?Te(re):function(t){return To(t)&&fr(t)==E},Ho=se?Te(se):function(t){return To(t)&&Qs(t)==A};function Uo(t){return"string"==typeof t||!So(t)&&To(t)&&fr(t)==M}function Do(t){return"symbol"==typeof t||To(t)&&fr(t)==O}var zo=ne?Te(ne):function(t){return To(t)&&Io(t.length)&&!!jt[fr(t)]},Vo=Cs(xr),Fo=Cs((function(t,e){return t<=e}));function jo(t){if(!t)return[];if(xo(t))return(Uo(t)?We:ps)(t);if(Ae&&t[Ae]){for(var e,i=t[Ae](),r=[];!(e=i.next()).done;)r.push(e.value);return r}var s=Qs(t);return(s==S?Ve:s==A?Ke:wa)(t)}function Ko(t){return t?(t=Xo(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function qo(t){var e=(t=Ko(t))%1;return t==t?e?t-e:t:0}function Wo(t){return t?Yi(qo(t),0,d):0}function Xo(t){if("number"==typeof t)return t;if(Do(t))return NaN;if("string"!=typeof(t=Co(t)?Co(e="function"==typeof t.valueOf?t.valueOf():t)?e+"":e:t))return 0===t?t:+t;t=Ce(t);var e=pt.test(t);return e||mt.test(t)?Xt(t.slice(2),e?2:8):dt.test(t)?NaN:+t}function Yo(t){return gs(t,ca(t))}function Go(t){return null==t?"":Yr(t)}var $o=ws((function(t,e){if(cn(e)||xo(e))gs(e,ha(e),t);else for(var i in e)Mt.call(e,i)&&Fi(t,i,e[i])})),Jo=ws((function(t,e){gs(e,ca(e),t)})),Zo=ws((function(t,e,i,r){gs(e,ca(e),t,r)})),Qo=ws((function(t,e,i,r){gs(e,ha(e),t,r)})),ta=Vs(Xi),ea=Lr((function(t,e){t=h(t);var i=-1,r=e.length,s=2<r?e[2]:n;for(s&&nn(e[0],e[1],s)&&(r=1);++i<r;)for(var o=e[i],a=ca(o),c=-1,u=a.length;++c<u;){var l=a[c],f=t[l];(f===n||yo(f,Rt[l])&&!Mt.call(t,l))&&(t[l]=o[l])}return t})),ia=Lr((function(t){return t.push(n,Us),oe(la,n,t)}));function ra(t,e,i){return(t=null==t?n:ur(t,e))===n?i:t}function sa(t,e){return null!=t&&tn(t,e,gr)}var na=Es((function(t,e,i){t[e=null!=e&&"function"!=typeof e.toString?Ct.call(e):e]=i}),Ca(Ba)),oa=Es((function(t,e,i){null!=e&&"function"!=typeof e.toString&&(e=Ct.call(e)),Mt.call(t,e)?t[e].push(i):t[e]=[i]}),Xs),aa=Lr(wr);function ha(t){return(xo(t)?Hi:_r)(t)}function ca(t){return xo(t)?Hi(t,!0):function(t){if(!Co(t)){var e=t,i=[];if(null!=e)for(var r in h(e))i.push(r);return i}var s,n=cn(t),o=[];for(s in t)("constructor"!=s||!n&&Mt.call(t,s))&&o.push(s);return o}(t)}var ua=ws((function(t,e,i){Mr(t,e,i)})),la=ws((function(t,e,i,r){Mr(t,e,i,r)})),fa=Vs((function(t,e){var i={};if(null!=t)for(var r=!1,s=(e=pe(e,(function(e){return e=ss(e,t),r=r||1<e.length,e})),gs(t,js(t),i),r&&(i=Gi(i,7,Ds)),e.length);s--;)$r(i,e[s]);return i})),da=Vs((function(t,e){return null==t?{}:Cr(i=t,e,(function(t,e){return sa(i,e)}));var i}));function pa(t,e){var i;return null==t?{}:(i=pe(js(t),(function(t){return[t]})),e=Xs(e),Cr(t,i,(function(t,i){return e(t,i[0])})))}var ga=Ns(ha),ma=Ns(ca);function wa(t){return null==t?[]:Pe(t,ha(t))}var ya=ks((function(t,e,i){return e=e.toLowerCase(),t+(i?ba(e):e)}));function ba(t){return Aa(Go(t).toLowerCase())}function va(t){return(t=Go(t))&&t.replace(yt,He).replace(Lt,"")}var ka=ks((function(t,e,i){return t+(i?"-":"")+e.toLowerCase()})),Sa=ks((function(t,e,i){return t+(i?" ":"")+e.toLowerCase()})),_a=vs("toLowerCase"),xa=ks((function(t,e,i){return t+(i?"_":"")+e.toLowerCase()})),Ra=ks((function(t,e,i){return t+(i?" ":"")+Aa(e)})),Ea=ks((function(t,e,i){return t+(i?" ":"")+e.toUpperCase()})),Aa=vs("toUpperCase");function Ma(t,e,i){return t=Go(t),(e=i?n:e)===n?(i=t,zt.test(i)?t.match(Ut)||[]:t.match(ht)||[]):t.match(e)||[]}var Oa=Lr((function(t,e){try{return oe(t,n,e)}catch(t){return Ao(t)?t:new s(t)}})),Ia=Vs((function(t,e){return he(e,(function(e){e=_n(e),Wi(t,e,ho(t[e],t))})),t}));function Ca(t){return function(){return t}}var Ta=xs(),Pa=xs(!0);function Ba(t){return t}function Na(t){return Sr("function"==typeof t?t:Gi(t,1))}var La=Lr((function(t,e){return function(i){return wr(i,t,e)}})),Ha=Lr((function(t,e){return function(i){return wr(t,i,e)}}));function Ua(t,e,i){var r=ha(e),s=cr(e,r),n=(null!=i||Co(e)&&(s.length||!r.length)||(i=e,e=t,t=this,s=cr(e,ha(e))),!(Co(i)&&"chain"in i&&!i.chain)),o=Mo(t);return he(s,(function(i){var r=e[i];t[i]=r,o&&(t.prototype[i]=function(){var e,i=this.__chain__;return n||i?(((e=t(this.__wrapped__)).__actions__=ps(this.__actions__)).push({func:r,args:arguments,thisArg:t}),e.__chain__=i,e):r.apply(t,ge([this.value()],arguments))})})),t}function Da(){}var za=Ms(pe),Va=Ms(ue),Fa=Ms(ye);function ja(t){return on(t)?Ee(_n(t)):(e=t,function(t){return ur(t,e)});var e}var Ka=Is(),qa=Is(!0);function Wa(){return[]}function Xa(){return!1}var Ya,Ga=As((function(t,e){return t+e}),0),$a=Ps("ceil"),Ja=As((function(t,e){return t/e}),1),Za=Ps("floor"),Qa=As((function(t,e){return t*e}),1),th=Ps("round"),eh=As((function(t,e){return t-e}),0);return Ei.after=function(t,e){if("function"!=typeof e)throw new St(c);return t=qo(t),function(){if(--t<1)return e.apply(this,arguments)}},Ei.ary=oo,Ei.assign=$o,Ei.assignIn=Jo,Ei.assignInWith=Zo,Ei.assignWith=Qo,Ei.at=ta,Ei.before=ao,Ei.bind=ho,Ei.bindAll=Ia,Ei.bindKey=co,Ei.castArray=function(){var t;return arguments.length?So(t=arguments[0])?t:[t]:[]},Ei.chain=qn,Ei.chunk=function(t,e,r){e=(r?nn(t,e,r):e===n)?1:ai(qo(e),0);var s=null==t?0:t.length;if(!s||e<1)return[];for(var o=0,a=0,h=i(ei(s/e));o<s;)h[a++]=Fr(t,o,o+=e);return h},Ei.compact=function(t){for(var e=-1,i=null==t?0:t.length,r=0,s=[];++e<i;){var n=t[e];n&&(s[r++]=n)}return s},Ei.concat=function(){var t=arguments.length;if(!t)return[];for(var e=i(t-1),r=arguments[0],s=t;s--;)e[s-1]=arguments[s];return ge(So(r)?ps(r):[r],sr(e,1))},Ei.cond=function(t){var e=null==t?0:t.length,i=Xs();return t=e?pe(t,(function(t){if("function"!=typeof t[1])throw new St(c);return[i(t[0]),t[1]]})):[],Lr((function(i){for(var r=-1;++r<e;){var s=t[r];if(oe(s[0],this,i))return oe(s[1],this,i)}}))},Ei.conforms=function(t){return e=Gi(t,1),i=ha(e),function(t){return $i(t,e,i)};var e,i},Ei.constant=Ca,Ei.countBy=Yn,Ei.create=function(t,e){return t=Ai(t),null==e?t:qi(t,e)},Ei.curry=function t(e,i,r){return(e=Ls(e,8,n,n,n,n,n,i=r?n:i)).placeholder=t.placeholder,e},Ei.curryRight=function t(e,i,r){return(e=Ls(e,16,n,n,n,n,n,i=r?n:i)).placeholder=t.placeholder,e},Ei.debounce=uo,Ei.defaults=ea,Ei.defaultsDeep=ia,Ei.defer=Qe,Ei.delay=lo,Ei.difference=r,Ei.differenceBy=pi,Ei.differenceWith=e,Ei.drop=function(t,e,i){var r=null==t?0:t.length;return r?Fr(t,(e=i||e===n?1:qo(e))<0?0:e,r):[]},Ei.dropRight=function(t,e,i){var r=null==t?0:t.length;return r?Fr(t,0,(e=r-(e=i||e===n?1:qo(e)))<0?0:e):[]},Ei.dropRightWhile=function(t,e){return t&&t.length?Zr(t,Xs(e,3),!0,!0):[]},Ei.dropWhile=function(t,e){return t&&t.length?Zr(t,Xs(e,3),!0):[]},Ei.fill=function(t,e,i,r){if(!(c=null==t?0:t.length))return[];i&&"number"!=typeof i&&nn(t,e,i)&&(i=0,r=c);var s=t,o=e,a=i,h=r,c=s.length;for((a=qo(a))<0&&(a=c<-a?0:c+a),(h=h===n||c<h?c:qo(h))<0&&(h+=c),h=h<a?0:Wo(h);a<h;)s[a++]=o;return s},Ei.filter=function(t,e){return(So(t)?le:rr)(t,Xs(e,3))},Ei.flatMap=function(t,e){return sr(io(t,e),1)},Ei.flatMapDeep=function(t,e){return sr(io(t,e),1/0)},Ei.flatMapDepth=function(t,e,i){return i=i===n?1:qo(i),sr(io(t,e),i)},Ei.flatten=Mn,Ei.flattenDeep=function(t){return null!=t&&t.length?sr(t,1/0):[]},Ei.flattenDepth=function(t,e){return null!=t&&t.length?sr(t,e=e===n?1:qo(e)):[]},Ei.flip=function(t){return Ls(t,512)},Ei.flow=Ta,Ei.flowRight=Pa,Ei.fromPairs=function(t){for(var e=-1,i=null==t?0:t.length,r={};++e<i;){var s=t[e];r[s[0]]=s[1]}return r},Ei.functions=function(t){return null==t?[]:cr(t,ha(t))},Ei.functionsIn=function(t){return null==t?[]:cr(t,ca(t))},Ei.groupBy=Qn,Ei.initial=function(t){return null!=t&&t.length?Fr(t,0,-1):[]},Ei.intersection=Et,Ei.intersectionBy=ti,Ei.intersectionWith=Ht,Ei.invert=na,Ei.invertBy=oa,Ei.invokeMap=to,Ei.iteratee=Na,Ei.keyBy=eo,Ei.keys=ha,Ei.keysIn=ca,Ei.map=io,Ei.mapKeys=function(t,e){var i={};return e=Xs(e,3),ar(t,(function(t,r,s){Wi(i,e(t,r,s),t)})),i},Ei.mapValues=function(t,e){var i={};return e=Xs(e,3),ar(t,(function(t,r,s){Wi(i,r,e(t,r,s))})),i},Ei.matches=function(t){return Er(Gi(t,1))},Ei.matchesProperty=function(t,e){return Ar(t,Gi(e,1))},Ei.memoize=fo,Ei.merge=ua,Ei.mergeWith=la,Ei.method=La,Ei.methodOf=Ha,Ei.mixin=Ua,Ei.negate=po,Ei.nthArg=function(t){return t=qo(t),Lr((function(e){return Or(e,t)}))},Ei.omit=fa,Ei.omitBy=function(t,e){return pa(t,po(Xs(e)))},Ei.once=function(t){return ao(2,t)},Ei.orderBy=function(t,e,i,r){return null==t?[]:Ir(t,e=So(e)?e:null==e?[]:[e],i=So(i=r?n:i)?i:null==i?[]:[i])},Ei.over=za,Ei.overArgs=ns,Ei.overEvery=Va,Ei.overSome=Fa,Ei.partial=go,Ei.partialRight=mo,Ei.partition=ro,Ei.pick=da,Ei.pickBy=pa,Ei.property=ja,Ei.propertyOf=function(t){return function(e){return null==t?n:ur(t,e)}},Ei.pull=Ze,Ei.pullAll=Cn,Ei.pullAllBy=function(t,e,i){return t&&t.length&&e&&e.length?Tr(t,e,Xs(i,2)):t},Ei.pullAllWith=function(t,e,i){return t&&t.length&&e&&e.length?Tr(t,e,n,i):t},Ei.pullAt=Tn,Ei.range=Ka,Ei.rangeRight=qa,Ei.rearg=wo,Ei.reject=function(t,e){return(So(t)?le:rr)(t,po(Xs(e,3)))},Ei.remove=function(t,e){var i=[];if(t&&t.length){var r=-1,s=[],n=t.length;for(e=Xs(e,3);++r<n;){var o=t[r];e(o,r,t)&&(i.push(o),s.push(r))}Pr(t,s)}return i},Ei.rest=function(t,e){if("function"!=typeof t)throw new St(c);return Lr(t,e=e===n?e:qo(e))},Ei.reverse=Pn,Ei.sampleSize=function(t,e,i){return e=(i?nn(t,e,i):e===n)?1:qo(e),(So(t)?Di:Ur)(t,e)},Ei.set=function(t,e,i){return null==t?t:Dr(t,e,i)},Ei.setWith=function(t,e,i,r){return r="function"==typeof r?r:n,null==t?t:Dr(t,e,i,r)},Ei.shuffle=function(t){return(So(t)?zi:Vr)(t)},Ei.slice=function(t,e,i){var r=null==t?0:t.length;return r?(i=i&&"number"!=typeof i&&nn(t,e,i)?(e=0,r):(e=null==e?0:qo(e),i===n?r:qo(i)),Fr(t,e,i)):[]},Ei.sortBy=so,Ei.sortedUniq=function(t){return t&&t.length?Wr(t):[]},Ei.sortedUniqBy=function(t,e){return t&&t.length?Wr(t,Xs(e,2)):[]},Ei.split=function(t,e,i){return i&&"number"!=typeof i&&nn(t,e,i)&&(e=i=n),(i=i===n?d:i>>>0)?(t=Go(t))&&("string"==typeof e||null!=e&&!Lo(e))&&!(e=Yr(e))&&ze(t)?os(We(t),0,i):t.split(e,i):[]},Ei.spread=function(t,e){if("function"!=typeof t)throw new St(c);return e=null==e?0:ai(qo(e),0),Lr((function(i){var r=i[e];i=os(i,0,e);return r&&ge(i,r),oe(t,this,i)}))},Ei.tail=function(t){var e=null==t?0:t.length;return e?Fr(t,1,e):[]},Ei.take=function(t,e,i){return t&&t.length?Fr(t,0,(e=i||e===n?1:qo(e))<0?0:e):[]},Ei.takeRight=function(t,e,i){var r=null==t?0:t.length;return r?Fr(t,(e=r-(e=i||e===n?1:qo(e)))<0?0:e,r):[]},Ei.takeRightWhile=function(t,e){return t&&t.length?Zr(t,Xs(e,3),!1,!0):[]},Ei.takeWhile=function(t,e){return t&&t.length?Zr(t,Xs(e,3)):[]},Ei.tap=function(t,e){return e(t),t},Ei.throttle=function(t,e,i){var r=!0,s=!0;if("function"!=typeof t)throw new St(c);return Co(i)&&(r="leading"in i?!!i.leading:r,s="trailing"in i?!!i.trailing:s),uo(t,e,{leading:r,maxWait:e,trailing:s})},Ei.thru=Wn,Ei.toArray=jo,Ei.toPairs=ga,Ei.toPairsIn=ma,Ei.toPath=function(t){return So(t)?pe(t,_n):Do(t)?[t]:ps(Sn(Go(t)))},Ei.toPlainObject=Yo,Ei.transform=function(t,e,i){var r,s=So(t),n=s||Eo(t)||zo(t);return e=Xs(e,4),null==i&&(r=t&&t.constructor,i=n?s?new r:[]:Co(t)&&Mo(r)?Ai(Yt(t)):{}),(n?he:ar)(t,(function(t,r,s){return e(i,t,r,s)})),i},Ei.unary=function(t){return oo(t,1)},Ei.union=Bn,Ei.unionBy=Nn,Ei.unionWith=Ln,Ei.uniq=function(t){return t&&t.length?Gr(t):[]},Ei.uniqBy=function(t,e){return t&&t.length?Gr(t,Xs(e,2)):[]},Ei.uniqWith=function(t,e){return e="function"==typeof e?e:n,t&&t.length?Gr(t,n,e):[]},Ei.unset=function(t,e){return null==t||$r(t,e)},Ei.unzip=Hn,Ei.unzipWith=Un,Ei.update=function(t,e,i){return null==t?t:Jr(t,e,rs(i))},Ei.updateWith=function(t,e,i,r){return r="function"==typeof r?r:n,null==t?t:Jr(t,e,rs(i),r)},Ei.values=wa,Ei.valuesIn=function(t){return null==t?[]:Pe(t,ca(t))},Ei.without=Dn,Ei.words=Ma,Ei.wrap=function(t,e){return go(rs(e),t)},Ei.xor=zn,Ei.xorBy=Vn,Ei.xorWith=Fn,Ei.zip=jn,Ei.zipObject=function(t,e){return es(t||[],e||[],Fi)},Ei.zipObjectDeep=function(t,e){return es(t||[],e||[],Dr)},Ei.zipWith=Kn,Ei.entries=ga,Ei.entriesIn=ma,Ei.extend=Jo,Ei.extendWith=Zo,Ua(Ei,Ei),Ei.add=Ga,Ei.attempt=Oa,Ei.camelCase=ya,Ei.capitalize=ba,Ei.ceil=$a,Ei.clamp=function(t,e,i){return i===n&&(i=e,e=n),i!==n&&(i=(i=Xo(i))==i?i:0),e!==n&&(e=(e=Xo(e))==e?e:0),Yi(Xo(t),e,i)},Ei.clone=function(t){return Gi(t,4)},Ei.cloneDeep=function(t){return Gi(t,5)},Ei.cloneDeepWith=function(t,e){return Gi(t,5,e="function"==typeof e?e:n)},Ei.cloneWith=function(t,e){return Gi(t,4,e="function"==typeof e?e:n)},Ei.conformsTo=function(t,e){return null==e||$i(t,e,ha(e))},Ei.deburr=va,Ei.defaultTo=function(t,e){return null==t||t!=t?e:t},Ei.divide=Ja,Ei.endsWith=function(t,e,i){t=Go(t),e=Yr(e);var r=t.length;r=i=i===n?r:Yi(qo(i),0,r);return 0<=(i-=e.length)&&t.slice(i,r)==e},Ei.eq=yo,Ei.escape=function(t){return(t=Go(t))&&Y.test(t)?t.replace(W,Ue):t},Ei.escapeRegExp=function(t){return(t=Go(t))&&it.test(t)?t.replace(et,"\\$&"):t},Ei.every=function(t,e,i){return(So(t)?ue:er)(t,Xs(e=i&&nn(t,e,i)?n:e,3))},Ei.find=Gn,Ei.findIndex=En,Ei.findKey=function(t,e){return ve(t,Xs(e,3),ar)},Ei.findLast=$n,Ei.findLastIndex=An,Ei.findLastKey=function(t,e){return ve(t,Xs(e,3),hr)},Ei.floor=Za,Ei.forEach=Jn,Ei.forEachRight=Zn,Ei.forIn=function(t,e){return null==t?t:nr(t,Xs(e,3),ca)},Ei.forInRight=function(t,e){return null==t?t:or(t,Xs(e,3),ca)},Ei.forOwn=function(t,e){return t&&ar(t,Xs(e,3))},Ei.forOwnRight=function(t,e){return t&&hr(t,Xs(e,3))},Ei.get=ra,Ei.gt=bo,Ei.gte=vo,Ei.has=function(t,e){return null!=t&&tn(t,e,pr)},Ei.hasIn=sa,Ei.head=On,Ei.identity=Ba,Ei.includes=function(t,e,i,r){return t=xo(t)?t:wa(t),i=i&&!r?qo(i):0,r=t.length,i<0&&(i=ai(r+i,0)),Uo(t)?i<=r&&-1<t.indexOf(e,i):!!r&&-1<Se(t,e,i)},Ei.indexOf=function(t,e,i){var r=null==t?0:t.length;return r?Se(t,e,t=(t=null==i?0:qo(i))<0?ai(r+t,0):t):-1},Ei.inRange=function(t,e,i){return e=Ko(e),i===n?(i=e,e=0):i=Ko(i),(t=t=Xo(t))>=hi(e=e,i=i)&&t<ai(e,i)},Ei.invoke=aa,Ei.isArguments=ko,Ei.isArray=So,Ei.isArrayBuffer=_o,Ei.isArrayLike=xo,Ei.isArrayLikeObject=Ro,Ei.isBoolean=function(t){return!0===t||!1===t||To(t)&&fr(t)==w},Ei.isBuffer=Eo,Ei.isDate=xt,Ei.isElement=function(t){return To(t)&&1===t.nodeType&&!No(t)},Ei.isEmpty=function(t){if(null!=t){if(xo(t)&&(So(t)||"string"==typeof t||"function"==typeof t.splice||Eo(t)||zo(t)||ko(t)))return!t.length;var e,i=Qs(t);if(i==S||i==A)return!t.size;if(cn(t))return!_r(t).length;for(e in t)if(Mt.call(t,e))return!1}return!0},Ei.isEqual=function(t,e){return br(t,e)},Ei.isEqualWith=function(t,e,i){var r=(i="function"==typeof i?i:n)?i(t,e):n;return r===n?br(t,e,n,i):!!r},Ei.isError=Ao,Ei.isFinite=function(t){return"number"==typeof t&&si(t)},Ei.isFunction=Mo,Ei.isInteger=Oo,Ei.isLength=Io,Ei.isMap=Po,Ei.isMatch=function(t,e){return t===e||vr(t,e,Gs(e))},Ei.isMatchWith=function(t,e,i){return i="function"==typeof i?i:n,vr(t,e,Gs(e),i)},Ei.isNaN=function(t){return Bo(t)&&t!=+t},Ei.isNative=function(t){if(hn(t))throw new s("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return kr(t)},Ei.isNil=function(t){return null==t},Ei.isNull=function(t){return null===t},Ei.isNumber=Bo,Ei.isObject=Co,Ei.isObjectLike=To,Ei.isPlainObject=No,Ei.isRegExp=Lo,Ei.isSafeInteger=function(t){return Oo(t)&&-f<=t&&t<=f},Ei.isSet=Ho,Ei.isString=Uo,Ei.isSymbol=Do,Ei.isTypedArray=zo,Ei.isUndefined=function(t){return t===n},Ei.isWeakMap=function(t){return To(t)&&Qs(t)==I},Ei.isWeakSet=function(t){return To(t)&&"[object WeakSet]"==fr(t)},Ei.join=function(t,e){return null==t?"":ni.call(t,e)},Ei.kebabCase=ka,Ei.last=In,Ei.lastIndexOf=function(t,e,i){var r=null==t?0:t.length;if(!r)return-1;var s=r;if(i!==n&&(s=(s=qo(i))<0?ai(r+s,0):hi(s,r-1)),e!=e)return ke(t,xe,s,!0);for(var o=t,a=e,h=s+1;h--;)if(o[h]===a)return h;return h},Ei.lowerCase=Sa,Ei.lowerFirst=_a,Ei.lt=Vo,Ei.lte=Fo,Ei.max=function(t){return t&&t.length?ir(t,Ba,dr):n},Ei.maxBy=function(t,e){return t&&t.length?ir(t,Xs(e,2),dr):n},Ei.mean=function(t){return Re(t,Ba)},Ei.meanBy=function(t,e){return Re(t,Xs(e,2))},Ei.min=function(t){return t&&t.length?ir(t,Ba,xr):n},Ei.minBy=function(t,e){return t&&t.length?ir(t,Xs(e,2),xr):n},Ei.stubArray=Wa,Ei.stubFalse=Xa,Ei.stubObject=function(){return{}},Ei.stubString=function(){return""},Ei.stubTrue=function(){return!0},Ei.multiply=Qa,Ei.nth=function(t,e){return t&&t.length?Or(t,qo(e)):n},Ei.noConflict=function(){return $t._===this&&($t._=Pt),this},Ei.noop=Da,Ei.now=no,Ei.pad=function(t,e,i){t=Go(t);var r=(e=qo(e))?qe(t):0;return!e||e<=r?t:Os(ii(e=(e-r)/2),i)+t+Os(ei(e),i)},Ei.padEnd=function(t,e,i){t=Go(t);var r=(e=qo(e))?qe(t):0;return e&&r<e?t+Os(e-r,i):t},Ei.padStart=function(t,e,i){t=Go(t);var r=(e=qo(e))?qe(t):0;return e&&r<e?Os(e-r,i)+t:t},Ei.parseInt=function(t,e,i){return e=i||null==e?0:e&&+e,ui(Go(t).replace(rt,""),e||0)},Ei.random=function(t,e,i){var r;return i&&"boolean"!=typeof i&&nn(t,e,i)&&(e=i=n),i===n&&("boolean"==typeof e?(i=e,e=n):"boolean"==typeof t&&(i=t,t=n)),t===n&&e===n?(t=0,e=1):(t=Ko(t),e===n?(e=t,t=0):e=Ko(e)),e<t&&(r=t,t=e,e=r),i||t%1||e%1?(r=li(),hi(t+r*(e-t+Wt("1e-"+((r+"").length-1))),e)):Br(t,e)},Ei.reduce=function(t,e,i){var r=So(t)?me:Me,s=arguments.length<3;return r(t,Xs(e,4),i,s,Qi)},Ei.reduceRight=function(t,e,i){var r=So(t)?we:Me,s=arguments.length<3;return r(t,Xs(e,4),i,s,tr)},Ei.repeat=function(t,e,i){return e=(i?nn(t,e,i):e===n)?1:qo(e),Nr(Go(t),e)},Ei.replace=function(){var t=arguments,e=Go(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Ei.result=function(t,e,i){var r=-1,s=(e=ss(e,t)).length;for(s||(s=1,t=n);++r<s;){var o=null==t?n:t[_n(e[r])];o===n&&(r=s,o=i),t=Mo(o)?o.call(t):o}return t},Ei.round=th,Ei.runInContext=t,Ei.sample=function(t){return(So(t)?Ui:Hr)(t)},Ei.size=function(t){var e;return null==t?0:xo(t)?Uo(t)?qe(t):t.length:(e=Qs(t))==S||e==A?t.size:_r(t).length},Ei.snakeCase=xa,Ei.some=function(t,e,i){return(So(t)?ye:jr)(t,Xs(e=i&&nn(t,e,i)?n:e,3))},Ei.sortedIndex=function(t,e){return Kr(t,e)},Ei.sortedIndexBy=function(t,e,i){return qr(t,e,Xs(i,2))},Ei.sortedIndexOf=function(t,e){var i=null==t?0:t.length;if(i){var r=Kr(t,e);if(r<i&&yo(t[r],e))return r}return-1},Ei.sortedLastIndex=function(t,e){return Kr(t,e,!0)},Ei.sortedLastIndexBy=function(t,e,i){return qr(t,e,Xs(i,2),!0)},Ei.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var i=Kr(t,e,!0)-1;if(yo(t[i],e))return i}return-1},Ei.startCase=Ra,Ei.startsWith=function(t,e,i){return t=Go(t),i=null==i?0:Yi(qo(i),0,t.length),e=Yr(e),t.slice(i,i+e.length)==e},Ei.subtract=eh,Ei.sum=function(t){return t&&t.length?Oe(t,Ba):0},Ei.sumBy=function(t,e){return t&&t.length?Oe(t,Xs(e,2)):0},Ei.template=function(t,e,i){var r,a,h=Ei.templateSettings;i&&nn(t,e,i)&&(e=n),t=Go(t),e=Zo({},e,h,Hs);var c=ha(i=Zo({},e.imports,h.imports,Hs)),u=Pe(i,c),l=0,f=(h=e.interpolate||bt,"__p += '"),d=(i=st((e.escape||bt).source+"|"+h.source+"|"+(h===J?lt:bt).source+"|"+(e.evaluate||bt).source+"|$","g"),"//# sourceURL="+(Mt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ft+"]")+"\n");if(t.replace(i,(function(e,i,s,n,o,h){return s=s||n,f+=t.slice(l,h).replace(vt,De),i&&(r=!0,f+="' +\n__e("+i+") +\n'"),o&&(a=!0,f+="';\n"+o+";\n__p += '"),s&&(f+="' +\n((__t = ("+s+")) == null ? '' : __t) +\n'"),l=h+e.length,e})),f+="';\n",h=Mt.call(e,"variable")&&e.variable){if(ct.test(h))throw new s("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";if(f=(a?f.replace(F,""):f).replace(j,"$1").replace(K,"$1;"),f="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}",(i=Oa((function(){return o(c,d+"return "+f).apply(n,u)}))).source=f,Ao(i))throw i;return i},Ei.times=function(t,e){if((t=qo(t))<1||f<t)return[];var i=d,r=hi(t,d);for(r=(e=Xs(e),t-=d,Ie(r,e));++i<t;)e(i);return r},Ei.toFinite=Ko,Ei.toInteger=qo,Ei.toLength=Wo,Ei.toLower=function(t){return Go(t).toLowerCase()},Ei.toNumber=Xo,Ei.toSafeInteger=function(t){return t?Yi(qo(t),-f,f):0===t?t:0},Ei.toString=Go,Ei.toUpper=function(t){return Go(t).toUpperCase()},Ei.trim=function(t,e,i){return(t=Go(t))&&(i||e===n)?Ce(t):t&&(e=Yr(e))?os(i=We(t),Ne(i,e=We(e)),Le(i,e)+1).join(""):t},Ei.trimEnd=function(t,e,i){return(t=Go(t))&&(i||e===n)?t.slice(0,Xe(t)+1):t&&(e=Yr(e))?os(i=We(t),0,Le(i,We(e))+1).join(""):t},Ei.trimStart=function(t,e,i){return(t=Go(t))&&(i||e===n)?t.replace(rt,""):t&&(e=Yr(e))?os(i=We(t),Ne(i,We(e))).join(""):t},Ei.truncate=function(t,e){var i,r=30,s="...";Co(e)&&(i="separator"in e?e.separator:i,r="length"in e?qo(e.length):r,s="omission"in e?Yr(e.omission):s),e=(t=Go(t)).length;if((e=ze(t)?(o=We(t)).length:e)<=r)return t;if((e=r-qe(s))<1)return s;var o;r=o?os(o,0,e).join(""):t.slice(0,e);if(i!==n)if(o&&(e+=r.length-e),Lo(i)){if(t.slice(e).search(i)){var a,h=r;for((i=i.global?i:st(i.source,Go(ft.exec(i))+"g")).lastIndex=0;a=i.exec(h);)var c=a.index;r=r.slice(0,c===n?e:c)}}else t.indexOf(Yr(i),e)!=e&&-1<(o=r.lastIndexOf(i))&&(r=r.slice(0,o));return r+s},Ei.unescape=function(t){return(t=Go(t))&&X.test(t)?t.replace(q,Ye):t},Ei.uniqueId=function(t){var e=++Ot;return Go(t)+e},Ei.upperCase=Ea,Ei.upperFirst=Aa,Ei.each=Jn,Ei.eachRight=Zn,Ei.first=On,Ua(Ei,(Ya={},ar(Ei,(function(t,e){Mt.call(Ei.prototype,e)||(Ya[e]=t)})),Ya),{chain:!1}),Ei.VERSION="4.17.21",he(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Ei[t].placeholder=Ei})),he(["drop","take"],(function(t,e){Ci.prototype[t]=function(i){i=i===n?1:ai(qo(i),0);var r=this.__filtered__&&!e?new Ci(this):this.clone();return r.__filtered__?r.__takeCount__=hi(i,r.__takeCount__):r.__views__.push({size:hi(i,d),type:t+(r.__dir__<0?"Right":"")}),r},Ci.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),he(["filter","map","takeWhile"],(function(t,e){var i=e+1,r=1==i||3==i;Ci.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Xs(t,3),type:i}),e.__filtered__=e.__filtered__||r,e}})),he(["head","last"],(function(t,e){var i="take"+(e?"Right":"");Ci.prototype[t]=function(){return this[i](1).value()[0]}})),he(["initial","tail"],(function(t,e){var i="drop"+(e?"":"Right");Ci.prototype[t]=function(){return this.__filtered__?new Ci(this):this[i](1)}})),Ci.prototype.compact=function(){return this.filter(Ba)},Ci.prototype.find=function(t){return this.filter(t).head()},Ci.prototype.findLast=function(t){return this.reverse().find(t)},Ci.prototype.invokeMap=Lr((function(t,e){return"function"==typeof t?new Ci(this):this.map((function(i){return wr(i,t,e)}))})),Ci.prototype.reject=function(t){return this.filter(po(Xs(t)))},Ci.prototype.slice=function(t,e){t=qo(t);var i=this;return i.__filtered__&&(0<t||e<0)?new Ci(i):(t<0?i=i.takeRight(-t):t&&(i=i.drop(t)),e!==n?(e=qo(e))<0?i.dropRight(-e):i.take(e-t):i)},Ci.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Ci.prototype.toArray=function(){return this.take(d)},ar(Ci.prototype,(function(t,e){var i=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),s=Ei[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);s&&(Ei.prototype[e]=function(){function e(t){return t=s.apply(Ei,ge([t],c)),r&&d?t[0]:t}var a,h=this.__wrapped__,c=r?[1]:arguments,u=h instanceof Ci,l=c[0],f=u||So(h),d=(f&&i&&"function"==typeof l&&1!=l.length&&(u=f=!1),this.__chain__),p=(l=!!this.__actions__.length,o&&!d);u=u&&!l;return!o&&f?(h=u?h:new Ci(this),(a=t.apply(h,c)).__actions__.push({func:Wn,args:[e],thisArg:n}),new Ii(a,d)):p&&u?t.apply(this,c):(a=this.thru(e),p?r?a.value()[0]:a.value():a)})})),he(["pop","push","shift","sort","splice","unshift"],(function(t){var e=_t[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Ei.prototype[t]=function(){var t,s=arguments;return r&&!this.__chain__?(t=this.value(),e.apply(So(t)?t:[],s)):this[i]((function(t){return e.apply(So(t)?t:[],s)}))}})),ar(Ci.prototype,(function(t,e){var i,r=Ei[e];r&&(i=r.name+"",Mt.call(yi,i)||(yi[i]=[]),yi[i].push({name:e,func:r}))})),yi[Rs(n,2).name]=[{name:"wrapper",func:n}],Ci.prototype.clone=function(){var t=new Ci(this.__wrapped__);return t.__actions__=ps(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ps(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ps(this.__views__),t},Ci.prototype.reverse=function(){var t;return this.__filtered__?((t=new Ci(this)).__dir__=-1,t.__filtered__=!0):(t=this.clone()).__dir__*=-1,t},Ci.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,i=So(t),r=e<0,s=i?t.length:0,n=function(t,e,i){for(var r=-1,s=i.length;++r<s;){var n=i[r],o=n.size;switch(n.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=hi(e,t+o);break;case"takeRight":t=ai(t,e-o)}}return{start:t,end:e}}(0,s,this.__views__),o=n.start,a=(n=n.end)-o,h=r?n:o-1,c=this.__iteratees__,u=c.length,l=0,f=hi(a,this.__takeCount__);if(!i||!r&&s==a&&f==a)return Qr(t,this.__actions__);var d=[];t:for(;a--&&l<f;){for(var p=-1,g=t[h+=e];++p<u;){var m=(w=c[p]).iteratee,w=w.type;m=m(g);if(2==w)g=m;else if(!m){if(1==w)continue t;break t}}d[l++]=g}return d},Ei.prototype.at=Xn,Ei.prototype.chain=function(){return qn(this)},Ei.prototype.commit=function(){return new Ii(this.value(),this.__chain__)},Ei.prototype.next=function(){this.__values__===n&&(this.__values__=jo(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?n:this.__values__[this.__index__++]}},Ei.prototype.plant=function(t){for(var e,i=this;i instanceof Oi;){var r=Rn(i),s=(r.__index__=0,r.__values__=n,e?s.__wrapped__=r:e=r,r);i=i.__wrapped__}return s.__wrapped__=t,e},Ei.prototype.reverse=function(){var t=this.__wrapped__;return t instanceof Ci?(t=t,(t=(t=this.__actions__.length?new Ci(this):t).reverse()).__actions__.push({func:Wn,args:[Pn],thisArg:n}),new Ii(t,this.__chain__)):this.thru(Pn)},Ei.prototype.toJSON=Ei.prototype.valueOf=Ei.prototype.value=function(){return Qr(this.__wrapped__,this.__actions__)},Ei.prototype.first=Ei.prototype.head,Ae&&(Ei.prototype[Ae]=function(){return this}),Ei}();$t._=Ge,(s=function(){return Ge}.call(e,i,e,r))!==n&&(r.exports=s)}).call(this)}).call(this,i(12),i(98)(t))},function(t,e,i){"use strict";const r=i(9);t.exports=class{constructor(t){for(var e of(this.config=t,this.groupPrefix={forbid:[],sys:[],coin:[],wallet:[],key:[],account:[],address:[]},this.groupSuffix={admin:[]},t.array("group-prefix")||[]))this.groupPrefix[e]=t.array("group-prefix-"+e)||[];for(var i of t.array("group-suffix")||[])this.groupSuffix[i]=t.array("group-suffix-"+i)||[];this.config.groupPrefix=this.groupPrefix,this.config.groupSuffix=this.groupSuffix}addGroupPrefix(t,e){this.groupPrefix[t]||(this.groupPrefix[t]=[]),-1==this.groupPrefix[t].indexOf(e)&&this.groupPrefix[t].push(e),this.config.groupPrefix=this.groupPrefix}addGroupSuffix(t,e){this.groupSuffix[t]||(this.groupSuffix[t]=[]),-1==this.groupSuffix[t].indexOf(e)&&this.groupSuffix[t].push(e),this.config.groupSuffix=this.groupSuffix}delGroupPrefix(t,e){this.groupPrefix[t]&&-1!=(e=this.groupPrefix[t].indexOf(e))&&this.groupPrefix[t].splice(e,1),this.config.groupPrefix=this.groupPrefix}delGroupSuffix(t,e){this.groupSuffix[t]&&-1!=(e=this.groupSuffix[t].indexOf(e))&&this.groupSuffix[t].splice(e,1),this.config.groupSuffix=this.groupSuffix}isRoot(t){return!!t&&t===r.ROOT}canAccess(t,e){if("string"!=typeof t||!e)return!1;if(-1!=this.groupPrefix.forbid.indexOf(e))return!1;if(!this.isRoot(e)&&t){if(t=t.split("."),this.groupPrefix[t[0]]&&-1==this.groupPrefix[t[0]].indexOf(e))return!1;if(2<=t.length&&this.groupSuffix[t[t.length-1]]&&-1==this.groupSuffix[t[t.length-1]].indexOf(e))return!1}return!0}}},function(t,e,i){"use strict";
/*!
 * cpuminer.js - inefficient cpu miner for vallnet (because we can)
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1),s=i(3),n=i(36);var o=i(63);const a=i(304),h=i(29),c=i(574);class u extends o{constructor(t){super(),this.miner=t,this.network=this.miner.network,this.logger=this.miner.logger.context("cpuminer"),this.workers=this.miner.workers,this.chain=this.miner.chain,this.locker=new h,this.running=!1,this.stopping=!1,this.job=null,this.stopJob=null,this._init()}_init(){this.chain.on("tip",t=>{this.job&&this.job.attempt.prevBlock===t.prevBlock&&this.job.destroy()})}async _open(){}async _close(){await this.stop()}start(){r(!this.running,"Miner is already running."),this._start().catch(t=>{console.log("miner start:",t)})}async _start(){this.running=!0,this.stopping=!1;let t=1;for(;;)if(await n.timeout(1e3),this.chain.isFull()&&0!=this.miner.addresses.length){let i,r=this.job=null;try{r=await this.miner.createBlock()}catch(e){if(this.logger.error(e),this.stopping)break;this.emit("error",e),await n.timeout(5e3*++t);continue}if(this.job=new c(this,r),this.stopping)break;await n.timeout(1e3);try{i=await this.job.mineAsync()}catch(e){if(this.stopping)break;this.emit("error",e),await n.timeout(5e3*++t);continue}if(this.stopping)break;if(i){let r;await n.timeout(1e3);try{r=await this.chain.add(i)}catch(e){if(this.stopping)break;"VerifyError"===e.type?(this.logger.warning("Mined an invalid block!"),this.logger.error(e)):this.emit("error",e),await n.timeout(5e3*++t);continue}if(r){if(this.stopping)break;this.logger.info("Found block: %d (%s).",r.height,r.rhash()),this.logger.debug("Raw: %s",i.toRaw().toString("hex")),this.emit("block",i,r)}else this.logger.warning("Mined a bad-prevblk (race condition?)")}}else await n.timeout(5e3*++t);var e=this.stopJob;e&&(this.stopJob=null,e.resolve())}async stop(){var t=await this.locker.lock();try{return await this._stop()}finally{t()}}async _stop(){this.running&&(r(this.running,"Miner is not running."),r(!this.stopping,"Miner is already stopping."),this.stopping=!0,this.job&&(this.job.destroy(),this.job=null),await this.wait(),this.running=!1,this.stopping=!1,this.job=null)}wait(){return new Promise((t,e)=>{r(!this.stopJob),this.stopJob=n.job(t,e)})}notifyEntry(){this.running&&this.job&&10<s.now()-this.job.start&&(this.job.destroy(),this.job=null)}findNonce(t){var e=t.getHeader(),i=t.attempt.target,r=u.INTERVAL;let s,n=0,o=r;for(;o<=4294967295&&-1===(s=a(e,i,n,o));)this.sendStatus(t,o),n+=r,o+=r;return s}async findNonceAsync(t){if(!this.workers)return this.findNonce(t);var e=t.getHeader(),i=t.attempt.target,r=u.INTERVAL;let s,n=0,o=r;for(;o<=4294967295&&-1===(s=await this.workers.mine(e,i,n,o));){if(t.destroyed)return s;this.sendStatus(t,o),n+=r,o+=r}return s}mine(t){let e;for(t.start=s.now();-1===(e=this.findNonce(t));)t.updateNonce(),this.sendStatus(t,0);return t.commit(e)}async mineAsync(t){t.start=s.now();let e,i=0;for(;++i%100==0&&await new Promise(t=>{setTimeout(t,50)}),-1===(e=await this.findNonceAsync(t));){if(t.destroyed)return null;t.updateNonce(),this.sendStatus(t,0)}return t.commit(e)}sendStatus(t,e){var i=t.attempt,r=s.revHex(i.prevBlock),n=t.getHashes(e);e=t.getRate(e);this.logger.info("Status: hashrate=%dkhs hashes=%d target=%d height=%d tip=%s",Math.floor(e/1e3),n,i.bits,i.height,r),this.emit("status",t,n,e)}}u.INTERVAL=2863311,t.exports=u},function(t,e,i){"use strict";
/*!
 * cpujob.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1),s=i(3);i(336),t.exports=class{constructor(t,e){this.miner=t,this.attempt=e,this.destroyed=!1,this.committed=!1,this.start=s.now(),this.nonce1=0,this.nonce2=0,this.refresh()}getHeader(){var t=this.attempt,e=this.nonce1,i=this.nonce2,r=t.time;e=t.getRoot(e,i);return t.getHeader(e,r,0)}commit(t){var e=this.attempt,i=this.nonce1,s=this.nonce2,n=e.time;r(!this.committed,"Job already committed."),this.committed=!0,i=e.getProof(i,s,n,t);return e.commit(i)}mine(){return this.miner.mine(this)}mineAsync(){return this.miner.mineAsync(this)}refresh(){return this.attempt.refresh()}updateNonce(){4294967296==++this.nonce2&&(this.nonce2=0,this.nonce1++)}destroy(){this.destroyed=!0}getHashes(t){return 4294967295*(4294967296*this.nonce1+this.nonce2)+t}getRate(t){t=this.getHashes(t);var e=s.now()-this.start;return Math.floor(t/Math.max(1,e))}addTX(t,e){return this.attempt.addTX(t,e)}addTXS(t){for(var[e,i]of t)if(!this.attempt.addTX(e,i))throw new Error("error on add tx");return this.refresh(),!0}pushTX(t,e){return this.attempt.pushTX(t,e)}}},function(t,e,i){
/*!
 * BlockEntry.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
i(19);const r=i(26);i(47),t.exports=class t{constructor(t){this.tx=t,this.hash=t.hash("hex"),this.fee=0,this.rate=0,this.priority=0,this.free=!1,this.sigops=0,this.descRate=0,this.depCount=0}static fromTX(e,i,r){var s=new t(e);return s.fee=e.getFee(i),s.rate=e.getRate(i),s.priority=e.getPriority(i,r.height),s.free=!1,s.sigops=e.getSigopsCost(i,r.flags),s.descRate=s.rate,s}static fromEntry(e,i){var s=new t(e.tx);return s.fee=e.getFee(),s.rate=e.getDeltaRate(),s.priority=e.getPriority(i.height),s.free=e.getDeltaFee()<r.getMinFee(e.size),s.sigops=e.sigops,s.descRate=e.getDescRate(),s}}},function(t,e,i){const r=i(8),s=i(56),n=i(6);e.bip150address=function(t){var e=new n(27);return e.writeU8(15),e.writeU16BE(65281),e.writeBytes(r.hash160(t)),e.writeChecksum(),s.encode(e.render())}},function(t,e,i){
/*!
 * TXRequest.js - BIP152 related
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(2),n=i(6),o=i(4);t.exports=class t{constructor(t){this.hash=o.NULL_HASH,this.indexes=[],t&&this.fromOptions(t)}fromOptions(t){return this.hash=t.hash,t.indexes&&(this.indexes=t.indexes),this}static fromOptions(e){return(new t).fromOptions(e)}fromCompact(t){this.hash=t.hash("hex");for(let e=0;e<t.available.length;e++)t.available[e]||this.indexes.push(e);return this}static fromCompact(e){return(new t).fromCompact(e)}fromReader(t){this.hash=t.readHash("hex");var e=t.readVarint();for(let s=0;s<e;s++){var i=t.readVarint();r(i<=65535),this.indexes.push(i)}let s=0;for(let t=0;t<e;t++){var n=this.indexes[t];r((n+=s)<=65535),this.indexes[t]=n,s=n+1}return this}fromRaw(t){return this.fromReader(new s(t))}static fromReader(e){return(new t).fromReader(e)}static fromRaw(e){return(new t).fromRaw(e)}getSize(){let t=0;t=(t+=32)+o.sizeVarint(this.indexes.length);for(let e=0;e<this.indexes.length;e++){let i=this.indexes[e];0<e&&(i-=this.indexes[e-1]+1),t+=o.sizeVarint(i)}return t}toWriter(t){t.writeHash(this.hash),t.writeVarint(this.indexes.length);for(let e=0;e<this.indexes.length;e++){let i=this.indexes[e];0<e&&(i-=this.indexes[e-1]+1),t.writeVarint(i)}return t}toRaw(){var t=this.getSize();return this.toWriter(new n(t)).render()}}},function(t,e,i){"use strict";
/*!
 * external.js - external ip address discovery for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */e.getIPv4=async function(){throw new Error("Could not find IP.")},e.getIPv6=async function(){throw new Error("Could not find IP.")}},function(t,e,i){"use strict";(function(e){
/*!
 * framer.js - packet framer for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(18),n=i(8),o=i(66);function a(t){if(!(this instanceof a))return new a(t);this.network=s.get(t)}a.prototype.packet=function(t,i,s){r(i,"No payload."),r(t.length<12),r(i.length<=o.MAX_MESSAGE);var a=e.allocUnsafe(24+i.length);a.writeUInt32LE(this.network.magic,0,!0),a.write(t,4,"ascii");for(let e=4+t.length;e<16;e++)a[e]=0;return a.writeUInt32LE(i.length,16,!0),(s=s||n.hash256(i)).copy(a,20,0,4),i.copy(a,24),a},t.exports=a}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){class r extends(i(650)){constructor(t){super(t)}async loadFile(){var t;if(this.options.persistent)try{(t=await this.options.node.readHostList())&&e.isBuffer(t)&&this.fromJSON(JSON.parse(t.toString()))}catch(t){}}async flush(){if(this.options.persistent&&this.needsFlush){this.needsFlush=!1;try{var t=e.from(JSON.stringify(this.toJSON()));await this.options.node.writeHostList(t),this.logger.debug("Writing hosts to node db.")}catch(t){this.logger.warning("Writing hosts failed."),this.logger.error(t)}}}}t.exports=r}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * UnknownPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1);var s=i(27);const n=i(24);i(20);class o extends s{constructor(t,e=n.UNKNOWN){super(e),this.data=t}getSize(){return this.data.length}toWriter(t){return t.writeBytes(this.data),t}toRaw(){return this.data}fromRaw(t){return r(e.isBuffer(t)),this.data=t,this}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new o).fromRaw(t)}async poolHandle(t,e){e.logger.warning("Unknown packet: %s (%s).",this.cmd,t.hostname())}}t.exports=o}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * FilterLoadPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(27);const s=i(24);i(2),i(20);const n=i(90);class o extends r{constructor(t,e=s.FILTERLOAD){super(e),this.filter=t||new n}getSize(){return this.filter.getSize()}toWriter(t){return this.filter.toWriter(t)}toRaw(){return this.filter.toRaw()}fromReader(t){return this.filter.fromReader(t),this}fromRaw(t){return this.filter.fromRaw(t),this}isWithinConstraints(){return this.filter.isWithinConstraints()}static fromReader(t){return(new o).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new o).fromRaw(t)}async poolHandle(t,e){}async peerHandle(t){this.isWithinConstraints()?(t.setFilter(this.filter),t.noRelay=!1):t.increaseBan(100)}}t.exports=o}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * VersionPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1);var s=i(27);const n=i(24),o=i(2);i(20);const a=i(6),h=i(4),c=i(66),u=i(3),l=i(122),f=i(549);class d extends s{constructor(t,e=n.VERSION){super(e),this.version=c.PROTOCOL_VERSION,this.services=c.LOCAL_SERVICES,this.time=u.now(),this.remote=new l,this.local=new l,this.nonce=h.ZERO_U64,this.agent=c.USER_AGENT,this.height=0,this.noRelay=!1,t&&this.fromOptions(t)}fromOptions(t){return null!=t.version&&(this.version=t.version),null!=t.services&&(this.services=t.services),null!=t.time&&(this.time=t.time),t.remote&&this.remote.fromOptions(t.remote),t.local&&this.local.fromOptions(t.local),t.nonce&&(this.nonce=t.nonce),t.agent&&(this.agent=t.agent),null!=t.height&&(this.height=t.height),null!=t.noRelay&&(this.noRelay=t.noRelay),this}static fromOptions(t){return(new d).fromOptions(t)}getSize(){var t=0;return(t+=20)+this.remote.getSize(!1)+this.local.getSize(!1)+8+h.sizeVarString(this.agent,"ascii")+5}toWriter(t){return t.writeI32(this.version),t.writeU32(this.services),t.writeU32(0),t.writeI64(this.time),this.remote.toWriter(t,!1),this.local.toWriter(t,!1),t.writeBytes(this.nonce),t.writeVarString(this.agent,"ascii"),t.writeI32(this.height),t.writeU8(this.noRelay?0:1),t}toRaw(){var t=this.getSize();return this.toWriter(new a(t)).render()}fromReader(t){return this.version=t.readI32(),this.services=t.readU32(),t.readU32(),this.time=t.readI64(),this.remote.fromReader(t,!1),0<t.left()&&(this.local.fromReader(t,!1),this.nonce=t.readBytes(8)),0<t.left()&&(this.agent=t.readVarString("ascii",256)),0<t.left()&&(this.height=t.readI32()),0<t.left()&&(this.noRelay=0===t.readU8()),10300===this.version&&(this.version=300),r(0<=this.version,"Version is negative."),r(0<=this.time,"Timestamp is negative."),this.height<0&&(this.height=0),this}static fromReader(t){return(new d).fromReader(t)}fromRaw(t){return this.fromReader(new o(t))}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new d).fromRaw(t,i)}async poolHandle(t,e){e.logger.info("Received version (%s): version=%d height=%d services=%s agent=%s",t.hostname(),this.version,this.height,this.services.toString(2),this.agent),e.network.time.add(t.hostname(),this.time),e.nonces.remove(t.hostname()),!t.outbound&&this.remote.isRoutable()&&e.hosts.markLocal(this.remote)}async peerHandle(t){if(-1!==t.version)throw new Error("Peer sent a duplicate version.");if(t.version=this.version,t.services=this.services,t.height=this.height,t.agent=this.agent,t.noRelay=this.noRelay,t.local=this.remote,!t.network.selfConnect&&t.options.hasNonce(this.nonce))throw new Error("We connected to ourself. Oops.");if(t.version<c.MIN_VERSION)throw new Error("Peer does not support required protocol version.");if(t.outbound){if(!(t.services&c.services.NETWORK))throw new Error("Peer does not support network services.");if(t.options.headers&&t.version<c.HEADERS_VERSION)throw new Error("Peer does not support getheaders.");if(t.options.spv){if(!(t.services&c.services.BLOOM))throw new Error("Peer does not support BIP37: does not support BLOOM");if(t.version<c.BLOOM_VERSION)throw new Error("Peer does not support BIP37: low version")}if(t.options.hasWitness()&&!(t.services&c.services.WITNESS))throw new Error("Peer does not support segregated witness.");!t.options.compact||t.hasCompactSupport()||t.logger.debug("Peer does not support compact blocks (%s).",t.hostname())}t.send(new f)}}t.exports=d}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * PingPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(27);const s=i(24),n=i(2);i(20);const o=i(6),a=i(550);class h extends r{constructor(t,e=s.PING){super(e),this.nonce=t||null}getSize(){return this.nonce?8:0}toRaw(){var t=this.getSize();return this.toWriter(new o(t)).render()}toWriter(t){return this.nonce&&t.writeBytes(this.nonce),t}fromReader(t){return 8<=t.left()&&(this.nonce=t.readBytes(8)),this}fromRaw(t){return this.fromReader(new n(t))}static fromReader(t){return(new h).fromRaw(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new h).fromRaw(t)}async poolHandle(t,e){}async peerHandle(t){this.nonce&&t.send(new a(this.nonce))}}t.exports=h}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * GetAddrPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(27);const s=i(24);i(2);const n=i(551);class o extends r{constructor(t=s.GETADDR){super(t)}static fromReader(t){return(new o).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new o).fromRaw(t)}async poolHandle(t,e){if(!e.options.selfish)if(t.sentAddr)e.logger.debug("Ignoring repeated getaddr (%s).",t.hostname());else{t.sentAddr=!0;var i=[];for(const r of e.hosts.toArray())if(t.addrFilter.added(r.hostname,"ascii")&&(i.push(r),1e3===i.length))break;0!==i.length&&(e.logger.debug("Sending %d addrs to peer (%s)",i.length,t.hostname()),t.send(new n(i)))}}}t.exports=o}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * GetDataPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(311),s=i(24);i(2);const n=i(48),o=i(552),a=i(553),h=i(554);var{}=i(3);class c extends r{constructor(t,e=s.GETDATA){super(t,e)}static fromReader(t){return(new c).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new c).fromRaw(t)}async poolHandle(t,e){var i=this.items;if(5e4<i.length)e.logger.warning("Peer sent inv with >50k items (%s).",t.hostname()),t.increaseBan(100),t.destroy();else{var s=[];let l=0,f=0,d=0,p=-1;for(const a of i)if(a.isTX()){var c=await e.getItem(t,a);c?c.isCoinbase()?(s.push(a),e.logger.warning("Failsafe: tried to relay a coinbase.")):(t.send(new o(c,a.hasWitness())),l++):s.push(a)}else{switch(a.type){case n.types.BLOCK:case n.types.WITNESS_BLOCK:if(!await e.sendBlock(t,a,a.hasWitness())){s.push(a);continue}f++;break;case n.types.FILTERED_BLOCK:case n.types.WITNESS_FILTERED_BLOCK:if(!e.options.bip37)return e.logger.debug("Peer requested a merkleblock without bip37 enabled (%s).",t.hostname()),void t.destroy();if(!t.spvFilter){s.push(a);continue}var u=await e.getItem(t,a);if(!u){s.push(a);continue}u=u.toMerkle(t.spvFilter),t.send(new h(u));for(const e of u.txs)t.send(new o(e,a.hasWitness())),l++;f++;break;case n.types.CMPCT_BLOCK:if(await e.chain.getHeight(a.hash)<e.chain.tip.height-10){if(!await e.sendBlock(t,a,t.compactWitness)){s.push(a);continue}f++}else{if(!(u=await e.getItem(t,a))){s.push(a);continue}t.sendCompactBlock(u),f++,d++}break;default:p=a.type,s.push(a);continue}if(a.hash===t.hashContinue){let i=[],s=await e.chain.getNextHash(a.hash);for(;s&&(i.push(new n(n.types.BLOCK,s)),!(i.length>=r.MaxSentItemCount));)s=await e.chain.getNextHash(s);0<i.length&&(t.hashContinue=i[i.length-1].hash,t.sendInv(i,"getdata"))}await t.drain()}0<s.length&&t.send(new a(s)),0<l&&e.logger.debug("Sending %d txs with getdata (notfound=%d) (%s).",l,s.length,t.hostname()),0<f&&e.logger.debug("Sending %d blocks with getdata (notfound=%d, cmpct=%d) (%s).",f,s.length,d,t.hostname()),-1!==p&&e.logger.warning("(GetData)Peer sent an unknown getdata type: %d (%s).",p,t.hostname())}}}t.exports=c}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * GetHeadersPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(555);const s=i(24);i(2);class n extends r{constructor(t,e,i=s.GETHEADERS){super(t,e,i)}static fromReader(t){return(new n).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new n).fromRaw(t)}async poolHandle(t,e){if(e.chain.synced&&!e.options.selfish&&!e.chain.options.spv&&!e.chain.options.prune){let r,s;(r=0<this.locator.length?(r=await e.chain.findLocator(this.locator))&&await e.chain.getNextHash(r):this.stop)&&(s=await e.chain.getEntry(r));for(var i=[];s&&(i.push(s.toHeaders()),s.hash!==this.stop)&&2e3!==i.length;)s=await e.chain.getNext(s);t.sendHeaders(i)}}}t.exports=n}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * HeadersPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1);var s=i(27);const n=i(24),o=i(2);i(20);const a=i(6),h=i(71),c=i(4),u=i(589),l=i(3),f=i(37).broadcast;class d extends s{constructor(t,e=n.HEADERS){super(e),this.items=t||[]}getSize(){let t=0;t+=c.sizeVarint(this.items.length);for(const e of this.items)t+=e.getSize();return t}toWriter(t){r(this.items.length<=2e3,"Too many headers."),t.writeVarint(this.items.length);for(const e of this.items)e.toWriter(t);return t}formatInsight(){return this.items.map(t=>t.formatInsight())}toRaw(){var t=this.getSize();return this.toWriter(new a(t)).render()}fromReader(t){var e=t.readVarint();r(e<=2e3,"Too many headers.");for(let i=0;i<e;i++)this.items.push(h.fromReader(t));return this}fromRaw(t){return this.fromReader(new o(t))}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new d).fromRaw(t)}async poolHandle(t,e){var i=await e.locker.lock();try{return await this._poolHandle(t,e)}finally{i()}}async _poolHandle(t,e){var i=this.items;if(e.checkpoints&&e.syncing&&t.loader&&0!==i.length)if(2e3<i.length)t.increaseBan(100);else{r(0<e.headerChain.size),f("p2p/headers",this.formatInsight());let a=!1,h=null;for(const r of i){var s=e.headerChain.tail,n=s.height+1,o=r.hash("hex");if(!r.verify())return e.logger.warning("Peer sent an invalid header (%s).",t.hostname()),t.increaseBan(100),void t.destroy();if(r.prevBlock!==s.hash)return e.logger.warning("Peer sent a bad header chain (%s).",t.hostname()),void t.destroy();if((h=new u(o,n)).height===e.headerTip.height){if(h.hash!==e.headerTip.hash)return e.logger.warning("Peer sent an invalid checkpoint (%s).",t.hostname()),void t.destroy();a=!0}e.headerNext||(e.headerNext=h),e.headerChain.push(h)}e.logger.debug("Received %s headers from peer (%s).",i.length,t.hostname()),t.blockTime=l.ms(),a?(e.headerChain.shift(),e.resolveHeaders(t)):t.sendGetHeaders([h.hash],e.headerTip.hash)}}}t.exports=d}).call(this,i(0).Buffer)},function(t,e){t.exports=function(t,e){this.hash=t,this.height=e,this.prev=null,this.next=null}},function(t,e,i){"use strict";(function(e){
/*!
 * SendHeadersPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(27);const s=i(24);i(2);class n extends r{constructor(t=s.SENDHEADERS){super(t)}static fromReader(t){return(new n).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new n).fromRaw(t)}async poolHandle(t,e){}async peerHandle(t){t.preferHeaders?t.logger.debug("Peer sent a duplicate SENDHEADERS (%s).",t.hostname()):t.preferHeaders=!0}}t.exports=n}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * BlockPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(27);const s=i(24);i(2),i(20);const n=i(592),o=i(109),a=i(37).broadcast;class h extends r{constructor(t,e,i=s.BLOCK){super(i),this.block=t||new n,this.witness=e||!1}getSize(){return this.witness?this.block.getSize():this.block.getBaseSize()}toWriter(t){return this.witness?this.block.toWriter(t):this.block.toNormalWriter(t)}toRaw(){return this.witness?this.block.toRaw():this.block.toNormal()}fromReader(t){return this.block.fromReader(t),this}fromRaw(t){return this.block.fromRaw(t),this}static fromReader(t){return(new h).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new h).fromRaw(t)}async poolHandle(t,e){e.options.spv?e.logger.warning("Peer sent unsolicited block (%s).",t.hostname()):(a("p2p/block",this.block.toBlock().formatInsight()),await e.addBlock(t,this.block,o.flags.DEFAULT_FLAGS))}}t.exports=h}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * memblock.js - memblock block object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(101);const s=i(58),n=i(71),o=i(16),a=i(2),h=e.alloc(0);class c extends r{constructor(){super(),this._raw=h}isMemory(){return!0}toHead(){return this._raw.slice(0,80)}getSize(){return this._raw.length}verifyBody(){return!0}getCoinbaseHeight(){if(this.version<2)return-1;try{return this.parseCoinbaseHeight()}catch(t){return-1}}parseCoinbaseHeight(){var t=new a(this._raw,!0),e=(t.seek(80),t.readVarint());if(0===e)return-1;t.seek(4);let i=t.readVarint();return 0===(i=0===i&&0!==t.readU8()?t.readVarint():i)?-1:(t.seek(36),e=t.readVarBytes(),o.getCoinbaseHeight(e))}fromRaw(t){return t=new a(t,!0),this.readHead(t),this._raw=t.data,this}static fromRaw(t){return(new c).fromRaw(t)}toRaw(){return this._raw}toNormal(){return this._raw}toBlock(){var t=s.fromRaw(this._raw);return t._hash=this._hash,t._hhash=this._hhash,t}formatInsight(){return this.toBlock().formatInsight()}toHeaders(){return n.fromBlock(this)}static isMemBlock(t){return t instanceof c}}t.exports=c}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * RejectPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1);var s=i(27);const n=i(24),o=i(2);i(20);const a=i(6),h=i(3);i(19);const c=i(4);class u extends s{constructor(t,e=n.REJECT){super(e),this.message="",this.code=u.codes.INVALID,this.reason="",this.hash=null,t&&this.fromOptions(t)}fromOptions(t){let e=t.code;return t.message&&(this.message=t.message),null!=e&&((e="string"==typeof e?u.codes[e.toUpperCase()]:e)>=u.codes.INTERNAL&&(e=u.codes.INVALID),this.code=e),t.reason&&(this.reason=t.reason),t.hash&&(this.hash=t.hash),this}static fromOptions(t){return(new u).fromOptions(t)}rhash(){return this.hash?h.revHex(this.hash):null}getCode(){var t=u.codesByVal[this.code];return t?t.toLowerCase():this.code.toString(10)}getSize(){let t=0;return t=(t=t+c.sizeVarString(this.message,"ascii")+1)+c.sizeVarString(this.reason,"ascii"),this.hash&&(t+=32),t}toWriter(t){return r(this.message.length<=12),r(this.reason.length<=111),t.writeVarString(this.message,"ascii"),t.writeU8(this.code),t.writeVarString(this.reason,"ascii"),this.hash&&t.writeHash(this.hash),t}toRaw(){var t=this.getSize();return this.toWriter(new a(t)).render()}fromReader(t){switch(this.message=t.readVarString("ascii",12),this.code=t.readU8(),this.reason=t.readVarString("ascii",111),this.message.toLowerCase()){case"block":case"tx":this.hash=t.readHash("hex");break;default:this.hash=null}return this}fromRaw(t){return this.fromReader(new o(t))}static fromReader(t){return(new u).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new u).fromRaw(t,i)}fromReason(t,e,i,s){return(t=(t="string"==typeof t?u.codes[t.toUpperCase()]:t)||u.codes.INVALID)>=u.codes.INTERNAL&&(t=u.codes.INVALID),this.message="",this.code=t,this.reason=e,i&&(r(s),this.message=i,this.hash=s),this}static fromReason(t,e,i,r){return(new u).fromReason(t,e,i,r)}static fromError(t,e){return u.fromReason(t.code,t.reason,e)}inspect(){var t=u.codesByVal[this.code]||this.code,e=this.hash?h.revHex(this.hash):null;return"<Reject: msg="+this.message+" code="+t+" reason="+this.reason+" hash="+e+">"}async poolHandle(t,e){e.logger.warning("Received reject (%s): msg=%s code=%s reason=%s hash=%s.",t.hostname(),this.message,this.getCode(),this.reason,this.rhash()),this.hash&&(e=e.getInv(this.hash))&&e.handleReject(t)}}u.codes={MALFORMED:1,INVALID:16,OBSOLETE:17,DUPLICATE:18,NONSTANDARD:64,DUST:65,INSUFFICIENTFEE:66,CHECKPOINT:67,INTERNAL:256,HIGHFEE:256,ALREADYKNOWN:257,CONFLICT:258},u.codesByVal=h.reverse(u.codes),t.exports=u}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * MempoolPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(27);const s=i(24);i(2);const n=i(48),o=i(124).sortWithSeq;class a extends r{constructor(t=s.MEMPOOL){super(t)}static fromReader(t){return(new a).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new a).fromRaw(t)}async poolHandle(t,e){if(e.mempool&&e.chain.synced&&!e.options.selfish)if(e.options.bip37){var i,r,s=[],a=[];for(i of e.mempool.map.values())a.push(i.tx);for(r of o(a))s.push(new n(n.types.TX,r.hash("hex")));e.logger.debug("Sending mempool snapshot (%s).",t.hostname()),t.queueInv(s)}else e.logger.debug("Peer requested mempool without bip37 enabled (%s).",t.hostname()),t.destroy()}}t.exports=a}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * FilterAddPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(27);const s=i(24),n=i(2);i(20);const o=i(6),a=i(4),h=i(9),c=e.alloc(0);class u extends r{constructor(t=s.FILTERADD){super(t),this.data=data||c}getSize(){return a.sizeVarBytes(this.data)}toWriter(t){return t.writeVarBytes(this.data),t}toRaw(){var t=this.getSize();return this.toWriter(new o(t)).render()}fromReader(t){return this.data=t.readVarBytes(),this}fromRaw(t){return this.fromReader(new n(t))}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new u).fromRaw(t)}async poolHandle(t,e){}async peerHandle(t){var e=this.data;e.length>h.MAX_SCRIPT_PUSH?t.increaseBan(100):(t.spvFilter&&t.spvFilter.add(e),t.noRelay=!1)}}t.exports=u}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * FilterClearPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(27);const s=i(24);class n extends r{constructor(t=s.FILTERCLEAR){super(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new n).fromRaw(t)}async poolHandle(t,e){}async peerHandle(t){t.spvFilter&&t.spvFilter.reset(),t.noRelay=!1}}t.exports=n}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * FeeFilterPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(27);const s=i(24),n=i(2);i(20);const o=i(6),a=i(9);class h extends r{constructor(t,e=s.FEEFILTER){super(e),this.rate=t||0}getSize(){return 8}toWriter(t){return t.writeI64(this.rate),t}toRaw(){return this.toWriter(new o(8)).render()}fromReader(t){return this.rate=t.readI64(),this}fromRaw(t){return this.fromReader(new n(t))}static fromReader(t){return(new h).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new h).fromRaw(t)}async peerHandle(t){var e=this.rate;e<0||e>a.MAX_MONEY?t.increaseBan(100):t.feeRate=e}async poolHandle(t,e){}}t.exports=h}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * SendCmpctPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(27);const s=i(24),n=i(2);i(20);const o=i(6);class a extends r{constructor(t,e,i=s.SENDCMPCT){super(i),this.mode=t||0,this.version=e||1}getSize(){return 9}toWriter(t){return t.writeU8(this.mode),t.writeU64(this.version),t}toRaw(){return this.toWriter(new o(9)).render()}fromReader(t){return this.mode=t.readU8(),this.version=t.readU64(),this}fromRaw(t){return this.fromReader(new n(t))}static fromReader(t){return(new a).fromReader(t)}static fromReader(t){return(new a).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new a).fromRaw(t)}async poolHandle(t,e){}async peerHandle(t){-1!==t.compactMode?t.logger.debug("Peer sent a duplicate sendcmpct (%s).",t.hostname()):2<this.version?t.logger.info("Peer request compact blocks version %d (%s).",this.version,t.hostname()):1<this.mode?t.logger.info("Peer request compact blocks mode %d (%s).",this.mode,t.hostname()):(t.logger.info("Peer initialized compact blocks (mode=%d, version=%d) (%s).",this.mode,this.version,t.hostname()),t.compactMode=this.mode,t.compactWitness=2===this.version)}}t.exports=a}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * CmpctBlockPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(27);const s=i(24);i(2),i(20);const n=i(338),o=i(3),a=i(1),h=i(109),c=i(556);class u extends r{constructor(t,e,i=s.CMPCTBLOCK){super(i),this.block=t||new n.CompactBlock,this.witness=e||!1}getSize(){return this.witness?this.block.getSize(!0):this.block.getSize(!1)}toWriter(t){return this.witness?this.block.toWriter(t):this.block.toNormalWriter(t)}toRaw(){return this.witness?this.block.toRaw():this.block.toNormal()}fromReader(t){return this.block.fromReader(t),this}fromRaw(t){return this.block.fromRaw(t),this}static fromReader(t){return(new u).fromRaw(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new u).fromRaw(t)}async poolHandle(t,e){var i=this.block,r=i.hash("hex"),s=t.compactWitness;if(e.syncing)if(e.options.compact)if(t.hasCompactSupport()&&t.hasCompact())if(t.compactBlocks.has(r))e.logger.debug("Peer sent us a duplicate compact block (%s).",t.hostname());else if(e.compactBlocks.has(r))e.logger.debug("Already waiting for compact block %s (%s).",r,t.hostname());else{if(!t.blockMap.has(r)){if(1!==e.options.blockMode)return e.logger.warning("Peer sent us an unrequested compact block (%s).",t.hostname()),void t.destroy();t.blockMap.set(r,o.ms()),a(!e.blockMap.has(r)),e.blockMap.add(r)}if(e.mempool)if(i.verify()){let n;try{n=i.init()}catch(i){return e.logger.debug("Peer sent an invalid compact block (%s).",t.hostname()),void t.increaseBan(100)}n?i.fillMempool(s,e.mempool)?(e.logger.debug("Received full compact block %s (%s).",i.rhash(),t.hostname()),s=h.flags.VERIFY_BODY,await e.addBlock(t,i.toBlock(),s)):1===e.options.blockMode&&15<=t.compactBlocks.size?(e.logger.warning("Compact block DoS attempt (%s).",t.hostname()),t.destroy()):(i.now=o.ms(),a(!t.compactBlocks.has(r)),t.compactBlocks.set(r,i),e.compactBlocks.add(r),e.logger.debug("Received non-full compact block %s tx=%d/%d (%s).",i.rhash(),i.count,i.totalTX,t.hostname()),t.send(new c(i.toRequest()))):(e.logger.warning("Siphash collision for %s. Requesting full block (%s).",i.rhash(),t.hostname()),t.getFullBlock(r),t.increaseBan(10))}else e.logger.debug("Peer sent an invalid compact block (%s).",t.hostname()),t.increaseBan(100);else e.logger.warning("Requesting compact blocks without a mempool!")}else e.logger.info("Peer sent unsolicited CMPCTBLOCK (%s).",t.hostname()),e.destroy();else e.logger.info("Peer sent unsolicited CMPCTBLOCK (%s).",t.hostname()),e.destroy()}}t.exports=u}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * AuthProposePacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(27);let s=i(24);const n=i(2);i(20);const o=i(4);class a extends r{constructor(t,e=s.AUTHPROPOSE){super(e),this.hash=t||o.ZERO_HASH}getSize(){return 32}toWriter(t){return t.writeBytes(this.hash),t}toRaw(){return this.hash}fromReader(t){return this.hash=t.readHash(),this}fromRaw(t){return this.fromReader(new n(t))}static fromReader(t){return(new a).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new a).fromRaw(t)}async poolHandle(t,e){}async peerHandle(t){var e;t.bip150&&(e=t.bip150.propose(this.hash),t.sendAuthChallengePacket(e))}}t.exports=a}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * AuthReplyPacket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
var r=i(27);const s=i(24),n=i(2);i(20);const o=i(4);class a extends r{constructor(t,e=s.AUTHREPLY){super(e),this.signature=t||o.ZERO_SIG64}getSize(){return 64}toWriter(t){return t.writeBytes(this.signature),t}toRaw(){return this.signature}fromReader(t){return this.signature=t.readBytes(64),this}fromRaw(t){return this.fromReader(new n(t))}static fromReader(t){return(new a).fromReader(t)}static fromRaw(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new a).fromRaw(t)}async poolHandle(t,e){}async peerHandle(t){var e;t.bip150&&(e=t.bip150.reply(this.signature))&&t.sendAuthProposePacket(e)}}t.exports=a}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * parser.js - packet parser for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1);var s=i(14);const n=i(18),o=i(3),a=i(8),h=i(66),c=i(310);function u(t,e,i){this.cmd=t,this.size=e,this.checksum=i}t.exports=class extends s{constructor(t){super(),this.network=n.get(t),this.pending=[],this.total=0,this.waiting=24,this.header=null}error(){var t=o.fmt.apply(o,arguments);this.emit("error",new Error(t))}feed(t){for(this.total+=t.length,this.pending.push(t);this.total>=this.waiting;){var i=e.allocUnsafe(this.waiting);let t=0;for(;t<i.length;){var s=this.pending[0].copy(i,t);s===this.pending[0].length?this.pending.shift():this.pending[0]=this.pending[0].slice(s),t+=s}r.strictEqual(t,i.length),this.total-=i.length,this.parse(i)}}parse(t){if(r(t.length<=h.MAX_MESSAGE),this.header){var e=a.hash256(t).readUInt32LE(0,!0);if(e!==this.header.checksum)this.waiting=24,this.header=null,this.error("Invalid checksum: %s.",o.hex32(e));else{let i;try{i=this.parsePayload(this.header.cmd,t)}catch(e){return this.waiting=24,this.header=null,void this.emit("error",e)}this.waiting=24,this.header=null,this.emit("packet",i)}}else this.header=this.parseHeader(t)}parseHeader(t){var e,i=t.readUInt32LE(0,!0);if(i!==this.network.magic)return this.error("Invalid magic value: %s.",o.hex32(i)),null;let r=0;for(;0!==t[r+4]&&r<12;r++);return 12===r?(this.error("Non NULL-terminated command."),null):(i=t.toString("ascii",4,4+r),(e=t.readUInt32LE(16,!0))>h.MAX_MESSAGE?(this.waiting=24,this.error("Packet length too large: %dmb.",o.mb(e)),null):(this.waiting=e,new u(i,e,t.readUInt32LE(20,!0))))}parsePayload(t,e){return c.fromRaw(t,e)}}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * upnp-browser.js - upnp for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */function r(t,e,i){throw new Error("UPNP not supported.")}r.discover=function(t,e,i,r){return new Promise((t,e)=>{e(new Error("UPNP not supported."))})},t.exports=r},function(t,e,i){"use strict";(function(e){
/*!
 * fullnode.js - full node for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(332),s=i(335),n=i(540),o=i(339),a=i(541),h=i(333),c=i(334);var u=i(206),{}=i(7);i(43);const l=i(108),f=i(605),d=i(4),p=i(66),g=i(137);t.exports=class extends u{constructor(t){t.spv=!1,t.nodeType="full",super(t),this.chain=new r({node:this,network:this.network,logger:this.logger,workers:this.workers,db:this.config.str("db"),prefix:this.config.prefix,maxFiles:this.config.uint("max-files"),cacheSize:this.config.mb("cache-size"),forceFlags:this.config.bool("force-flags"),prune:this.config.bool("prune"),checkpoints:this.config.bool("checkpoints"),coinCache:this.config.uint("coin-cache"),entryCache:this.config.uint("entry-cache"),indexTX:this.config.bool("index-tx"),indexAddress:this.config.bool("index-address")}),this.fees=new s(this.logger),this.fees.init(),this.mempool=new n({node:this,network:this.network,logger:this.logger,workers:this.workers,fees:this.fees,db:this.config.str("db"),prefix:this.config.prefix,persistent:this.config.bool("persistent-mempool"),maxSize:this.config.mb("mempool-size"),limitFree:this.config.bool("limit-free"),limitFreeRelay:this.config.uint("limit-free-relay"),requireStandard:this.config.bool("require-standard"),rejectAbsurdFees:this.config.bool("reject-absurd-fees"),replaceByFee:this.config.bool("replace-by-fee"),indexAddress:this.config.bool("index-address")}),this.pool=new o({node:this,network:this.network,logger:this.logger,prefix:this.config.prefix,selfish:this.config.bool("selfish"),compact:this.config.bool("compact"),bip37:this.config.bool("bip37"),bip151:this.config.bool("bip151"),bip150:this.config.bool("bip150"),identityKey:this.config.buf("identity-key"),knownPeers:this.config.array("known-peers"),maxOutbound:this.config.uint("max-outbound"),maxInbound:this.config.uint("max-inbound"),proxy:this.config.str("proxy"),onion:this.config.bool("onion"),upnp:this.config.bool("upnp"),seeds:this.config.array("seeds"),nodes:this.config.array("nodes"),only:this.config.array("only"),publicHost:this.config.str("public-host"),publicPort:this.config.uint("public-port"),host:this.config.str("host"),port:this.config.uint("port"),wsport:this.config.uint("wsport"),listen:this.config.bool("listen"),persistent:this.config.bool("persistent")}),this.miner=new a({node:this,network:this.network,logger:this.logger,workers:this.workers,addresses:this.config.array("coinbase-address"),coinbaseFlags:this.config.str("coinbase-flags"),preverify:this.config.bool("preverify"),maxWeight:this.config.uint("max-weight"),reservedWeight:this.config.uint("reserved-weight"),reservedSigops:this.config.uint("reserved-sigops")}),this.rpc=new c(this),this._init(),h.unsupported||(this.http=new h({network:this.network,logger:this.logger,node:this,prefix:this.config.prefix,ssl:this.config.bool("ssl"),keyFile:this.config.path("ssl-key"),certFile:this.config.path("ssl-cert"),host:this.config.str("http-host"),port:this.config.httpPort,apiKey:this.config.str("api-key")}),this.http.on("error",t=>this.error(t)),this.http.init())}_init(){this.conn_s2local=new f(this),this.chain.on("error",t=>this.error(t)),this.mempool.on("error",t=>this.error(t)),this.pool.on("error",t=>this.error(t)),this.miner.on("error",t=>this.error(t)),this.mempool.on("tx",(t,e,i)=>{this.miner.cpu.notifyEntry(),this.emit("tx",t,e,i)}),this.mempool.on("entry.remove",(t,e)=>{this.miner.cpu.notifyEntry(),this.emit("entry.remove",t,e)}),this.chain.hook("block.connect",async(t,e)=>{try{await this.mempool._addBlock(t,e.txs)}catch(t){this.error(t)}this.emit("block.connect",t,e),this.emit("block",e)}),this.chain.hook("block.disconnect",async(t,e)=>{try{await this.mempool._removeBlock(t,e.txs)}catch(t){this.error(t)}this.emit("block.disconnect",t,e)}),this.chain.hook("chain.reorganize.end",async(t,e)=>{try{await this.mempool._handleReorgEnd()}catch(t){this.error(t)}this.emit("chain.reorganize.end",t,e)}),this.chain.hook("chain.reset",async t=>{try{await this.mempool._reset()}catch(t){this.error(t)}this.emit("chain.reset",t)}),this.loadPlugins();try{this.cdb=this.require("contractdb")}catch(t){this.logger.error("cdb loading failed.",t.message)}}async _open(){g.localhost=this.config.bool("localhost",!1);let t=this.config.str("genesis");t&&"string"==typeof(t="true"==t?[]:t.split(","))[2]&&(t[2]=parseInt(t[2]));var i=this.config.str("keystore"),r=this.config.str("password"),s=this.config.str("backup");let n=await l.readFile(`./${this.config.network}-genesis.params`),o=(n&&n.notifyAddress&&(this.config.notifyAddress=n.notifyAddress,this.config[this.config.network+"Addresses"]=n[this.config.network+"Addresses"],i||this.config.coinbaseAddress||await this.rpc.setMinerAddr([n.coinbaseAddress])),!t||n||((n=(n=await l.readEncryptFile({password:r,network:this.config.network,file:i||`./${this.config.network}-genesis.keystore`}))||{password:r,passphrase:t[0]||d.MNEMONIC_SALT,language:t[1]||"english",bits:parseInt(t[2])||256}).network=this.network.type),await this.pool.open(n),await this.miner.open(),this.config.obj("mnemonic"));if((o=o||{}).password=o.password||r,o.network=this.network.type,o.file=i,o.backup=s,t?(o.passphrase=t[0]||o.passphrase||d.MNEMONIC_SALT,o.language=t[1]||o.language||"english",o.bits=t[2]||o.bits||256):(o.passphrase=o.passphrase||d.MNEMONIC_SALT,o.language=o.language||"english",o.bits=o.bits||256),await this.openPlugins(o),s=await l.readEncryptFile({password:r,network:this.config.network,file:i||`./${this.config.network}-genesis.keystore`})){if(this.config.alliancePrivateKey=s.alliancePrivateKey,this.config.allianceAwardAddress=s.awardAddress,this.config.allianceName=s.allianceName,this.config.allianceNodeId=parseInt(s.allianceNodeId),this.config.notifyAddress=s.notifyAddress,this.pool.options.agent=""+p.USER_AGENT+this.config.allianceName+"."+this.config.allianceNodeId,s.allianceNodeToken&&!this.config.identityKey&&(this.config.identityKey=s.allianceNodeToken.prv,this.pool.options.identityKey=e.from(s.allianceNodeToken.prv,"hex")),"string"==typeof s.authorized)for(var a of s.authorized.split(","))if(a&&(a=a.split(" "))&&2<=a.length)try{this.pool.authdb.addKnown(a[0],e.from(a[1],"hex"))}catch(t){this.logger.error("cert with bad format.")}i&&s.awardAddress&&await this.rpc.setMinerAddr([s.awardAddress])}await this.config.saveAsync(),this.http&&await this.http.open(),this.logger.info("Full Node is loaded.")}async _close(){this.http&&await this.http.close(),await this.closePlugins(),await this.pool.close(),await this.miner.close(),await this.mempool.close(),await this.chain.close(),this.logger.info("Node is closed.")}scan(t,e,i){return this.chain.scan(t,e,i)}async broadcast(t){try{await this.pool.broadcast(t)}catch(t){this.emit("error",t)}}async sendTX(t){if(!t.opr.isDerived){let e;try{e=await this.mempool.addTX(t)}catch(t){throw t}e?(this.logger.warning("TX was orphaned in mempool: %s.",t.txid()),this.logger.warning("Attempting to broadcast anyway..."),this.broadcast(t)):this.pool.options.selfish&&this.pool.broadcast(t)}}async relay(t){return this.sendTX(t)}async removeTX(t){try{await this.mempool.removeTX(t)}catch(t){throw t}}getBlock(t){return this.chain.getBlock(t)}async getCoin(t,e){return this.mempool.getCoin(t,e)||(this.mempool.isSpent(t,e)?null:this.chain.getCoin(t,e))}async getCoinsByAddress(t){var e=this.mempool.getCoinsByAddress(t),i=[];for(const e of await this.chain.getCoinsByAddress(t))this.mempool.isSpent(e.hash,e.index)||i.push(e);for(const t of e)i.push(t);return i}async getMetaByAddress(t){var e=this.mempool.getMetaByAddress(t);return(await this.chain.getMetaByAddress(t)).concat(e)}async getMeta(t){if(this.mempool){var e=this.mempool.getMeta(t);if(e)return e}return this.chain.getMeta(t)}async getMetaView(t){return(-1===t.height?this.mempool:this.chain).getSpentView(t.tx)}async getTXByAddress(t){var e=[];for(const i of await this.getMetaByAddress(t))e.push(i.tx);return e}async getTX(t){return(t=await this.getMeta(t))?t.tx:null}async hasTX(t){return!!this.mempool.hasEntry(t)||this.chain.hasTX(t)}}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * conn_s2local.js - 全节点/SPV节点中，钱包对象和节点对象间的通信组件，以实现消息订阅功能
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */var r=i(63);const s=i(308).openapi;t.exports=class extends r{constructor(t){super(),this.node=t,this.network=t.network,this.filter=null,this.listen=!1,this._init()}_init(){this.node.on("block.connect",(t,e)=>{this.listen&&this.emit("block.connect",t,e.txs)}),this.node.on("block.disconnect",(t,e)=>{this.listen&&this.emit("block.disconnect",t,e.txs)}),this.node.on("chain.full",()=>{this.listen&&this.emit("chain.full")}),this.node.on("tx",async(t,e,i)=>{this.listen&&await this.emit("tx",t,e,i)}),this.node.on("entry.remove",(t,e)=>{this.emit("entry.remove",t,e)}),this.node.on("chain.reset",t=>{this.listen&&this.emit("chain.reset",t)})}_open(t){return this.listen=!0,Promise.resolve()}_close(){return this.listen=!1,Promise.resolve()}getTip(){return Promise.resolve(this.node.chain.tip)}async getEntry(t){return(t=await this.node.chain.getEntry(t))&&await this.node.chain.isMainChain(t)?t:null}async getTX(t){if(!this.node||!this.node.chain)return null;let e=null;return(e=this.node.mempool?await this.node.mempool.getTX(t):e)||await this.node.chain.getTX(t)}watchOutpoint(t){this.node.pool&&this.node.pool.watchOutpoint(t)}async execute(t,e,i){var r;if(null==e&&(e=[]),Array.isArray(e)||(e=[e]),t=s[t]){let s=null;return!this.node.spv||t.local?(s=await this.node.$localCall(t,e,i),t.remoteCb&&(r=this.node.require("walletdb"))&&(s=await t.remoteCb.call({wdb:r},s))):s=await this.node.$remoteCall(t,e,i),s}}async send(t){return this.node.relay(t)}async removeTX(t){return await this.node.removeTX(t),Promise.resolve()}setFilter(t){return this.filter=t,this.node.pool&&this.node.pool.setFilter(t),Promise.resolve()}addFilter(t){this.node.pool&&this.node.pool.watch(t)}resetFilter(){return this.node.pool.queueFilterLoad(),Promise.resolve()}async estimateFee(t){return this.node.fees?this.node.fees.estimateFee(t):this.network.feeRate}async verifyCPRegister(t){return{}}async verifyCPChange(t){return{}}rescan(t,e){return this.node.chain.scan(t,this.filter,async(t,i)=>this.fire("block.rescan."+e,t,i))}}},function(t,e,i){"use strict";(function(e){
/*!
 * spvnode.js - spv node for vallnet
 * Copyright (c) 2017-2020, Bookman Software (MIT License).
 */
const r=i(29),s=i(332),n=i(339),o=i(333),a=i(334);var h=i(206);const c=i(607),u=i(605),l=i(108),f=i(4);function d(t,e,i,r){this.resolve=t,this.reject=e,this.height=i,this.iter=r}t.exports=class extends h{constructor(t){t.spv=!0,t.nodeType="spv",super(t),this.chain=new s({node:this,network:this.network,logger:this.logger,db:this.config.str("db"),prefix:this.config.prefix,maxFiles:this.config.uint("max-files"),cacheSize:this.config.mb("cache-size"),entryCache:this.config.uint("entry-cache"),forceFlags:this.config.bool("force-flags"),checkpoints:this.config.bool("checkpoints"),spv:!0}),this.pool=new n({node:this,network:this.network,logger:this.logger,prefix:this.config.prefix,proxy:this.config.str("proxy"),onion:this.config.bool("onion"),upnp:this.config.bool("upnp"),seeds:this.config.array("seeds"),nodes:this.config.array("nodes"),only:this.config.array("only"),bip151:this.config.bool("bip151"),bip150:this.config.bool("bip150"),identityKey:this.config.buf("identity-key"),knownPeers:this.config.array("known-peers"),maxOutbound:this.config.uint("max-outbound"),persistent:this.config.bool("persistent"),selfish:!0,listen:!1}),this.rpc=new a(this),this._init(),o.unsupported||(this.http=new o({network:this.network,logger:this.logger,node:this,prefix:this.config.prefix,ssl:this.config.bool("ssl"),keyFile:this.config.path("ssl-key"),certFile:this.config.path("ssl-cert"),host:this.config.str("http-host"),port:this.config.httpPort,apiKey:this.config.str("api-key")})),this.rescanJob=null,this.scanLock=new r,this.watchLock=new r,this.http&&this.http.init()}_init(){this.conn_s2local=new u(this);var t=(t=this.pool?this.pool.getOnlineHost():null)?`http://${t.host}:`+(t.port+2):`http://${this.config.str("http-remote-host")}:`+this.config.uint("http-remote-port",this.network.httpPort);this.conn_s2remote=new c({network:this.config.network,apiKey:this.config.str("api-key"),mode:"jsonp",uri:t}),this.http&&this.http.on("error",t=>this.error(t)),this.pool.on("error",t=>this.error(t)),this.pool.on("tx",t=>{this.rescanJob||this.emit("tx",t)}),this.chain.on("error",t=>this.error(t)),this.chain.hook("block.connect",async(t,e)=>{if(this.rescanJob)try{await this.watchBlock(t,e)}catch(t){this.error(t)}else this.emit("block.connect",t,e)}),this.chain.hook("block.disconnect",async(t,e)=>{this.emit("block.disconnect",t,e)}),this.chain.hook("block",async(t,e)=>{await this.fire("block",t,e)}),this.chain.on("chain.reorganize.end",(t,e)=>{this.emit("chain.reorganize.end",t,e)}),this.chain.on("chain.reset",t=>{this.emit("chain.reset",t)}),this.loadPlugins()}async _open(){let t=this.config.str("genesis");t&&"string"==typeof(t="true"==t?[]:t.split(","))[2]&&(t[2]=parseInt(t[2]));var i=this.config.str("keystore"),r=this.config.str("password");let s=this.config.obj("genesisParams");if(s?s.isGenesisParams=!0:s=await l.readFile(`./${this.config.network}-genesis.params`),s&&s.notifyAddress&&(this.config.notifyAddress=s.notifyAddress),t&&!s)throw new Error("genesis-params not exit.");await this.pool.open(s);let n=this.config.obj("mnemonic");(n=n||{}).password=n.password||r,n.network=this.network.type,n.file=i,t?(n.passphrase=t[0]||n.passphrase||f.MNEMONIC_SALT,n.language=t[1]||n.language||"english",n.bits=t[2]||n.bits||256):(n.passphrase=n.passphrase||f.MNEMONIC_SALT,n.language=n.language||"english",n.bits=n.bits||256),await this.openPlugins(n),(r=await l.readEncryptFile({password:r,network:this.config.network,file:i||`./${this.config.network}-genesis.keystore`}))&&(this.config.alliancePrivateKey=r.alliancePrivateKey,this.config.allianceName=r.allianceName,this.config.allianceNodeId=parseInt(r.allianceNodeId),this.config.notifyAddress=r.notifyAddress,r.allianceNodeToken)&&!this.config.identityKey&&(this.pool.options.identityKey=e.from(r.allianceNodeToken.prv,"hex"),this.config.identityKey=r.allianceNodeToken.prv),await this.config.saveAsync(),this.http&&await this.http.open(),this.logger.info("SPV Node is loaded.")}async _close(){this.http&&await this.http.close(),await this.closePlugins(),await this.pool.close(),await this.chain.close()}async scan(t,e,i){var r=await this.scanLock.lock();this.chain.height;try{await this.chain.replay(t),this.chain.height}finally{r()}}watchUntil(t,e){return new Promise((i,r)=>{this.rescanJob=new d(i,r,t,e)})}async watchBlock(t,e){var i=await this.watchLock.lock();try{t.height<this.rescanJob.height?await this.rescanJob.iter(t,e.txs):(this.rescanJob.resolve(),this.rescanJob=null)}catch(t){this.rescanJob.reject(t),this.rescanJob=null}finally{i()}}async broadcast(t){try{await this.pool.broadcast(t)}catch(t){this.emit("error",t)}}async sendTX(t){this.emit("tx",t),await this.broadcast(t)}async relay(t){this.sendTX(t).catch(t=>{this.error(t)})}}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * conn_s2remote.js - 基于 Web Socket 的客户端，为钱包系统提供主链交互功能
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(610).io,s=i(18);var n=i(63);const o=i(3),a=i(2),h=i(19),c=i(71),u=i(106),l=i(308).openapi;function f(t,i){"string"==typeof t&&(t=e.from(t,"hex"));var r=c.fromHead(t),s=(t=((t=new a(t)).seek(80),t.readU32()),r.hash("hex"));return new u(s,t,r.time,r.mtp)}function d(t,e){t=f(t);var i=[];for(const t of e){var r=p(t);i.push(r)}return new g(t,i)}function p(t){return h.fromRaw(t,"hex")}function g(t,e){this.entry=t,this.txs=e}function m(t,e,i){return async function(r,s){if(r)e(new Error(r.message));else if(s&&s.result)if(s=s.result,i)try{t(await i(s))}catch(r){e(r)}else t(s);else t(null)}}t.exports=class extends n{constructor(t){super(),this.options=t="string"==typeof(t=t||{})?{uri:t}:t,this.network=s.get(t.network),this.uri=t.uri,this.apiKey=t.apiKey,this.mode=t.mode||"jsonp",this.socket=null}async _open(){this.uri&&(this.socket=r(this.uri,{transports:["websocket"],forceNew:!0}),this.socket.on("error",t=>{this.fire("error",t)}),"relay"==this.mode&&(this.socket.on("version",t=>{t.network!==this.network.type&&this.fire("error",new Error("Wrong network."))}),this.socket.on("block.connect",(t,e)=>{let i;try{i=d(t,e)}catch(t){return void this.fire("error",t)}this.emit("block.connect",i.entry,i.txs)}),this.socket.on("block.disconnect",(t,e)=>{let i;try{i=f(t)}catch(t){return void this.fire("error",t)}this.emit("block.disconnect",i,e)}),this.socket.on("block.rescan",(t,e,i)=>{let r;try{r=d(t,e)}catch(t){return this.fire("error",t),void i()}this.fire("block.rescan.walletdb",r.entry,r.txs).then(i,i)}),this.socket.on("chain.full",()=>{this.emit("chain.full")}),this.socket.on("chain.reset",t=>{let e;try{e=f(t)}catch(t){return void this.fire("error",t)}this.emit("chain.reset",e)}),this.socket.on("tx",t=>{try{t=p(t)}catch(t){return void this.fire("error",t)}this.fire("tx",t)})),await this.onConnect())}_close(){return this.socket&&(this.socket.disconnect(),this.socket=null),Promise.resolve()}onConnect(){return new Promise((t,e)=>{this.socket.on("connect",async e=>{"relay"==this.mode&&(await this.watchChain(),await this.watchMempool()),await this.fireNoBubble("onConnect"),t(e)})})}async removeTX(t){return Promise.resolve()}async execute(t,e){e=e||[],Array.isArray(e)||(e=[e]);let i=l[t];return i?i.remoteCb?new Promise((t,r)=>{this.socket.emit("request",i.name,...e,m(t,r,async t=>i.remoteCb.call({wdb:this.wdb},t)))}):new Promise((t,r)=>{this.socket.emit("request",i.name,...e,m(t,r))}):null}watchChain(){return new Promise((t,e)=>{this.socket.emit("request","chain.watch",m(t,e))})}watchMempool(){return new Promise((t,e)=>{this.socket.emit("request","mempool.watch",m(t,e))})}getTip(){return new Promise((t,e)=>{this.socket.emit("request","block.tip",m(t,e,f))})}getEntry(t){return new Promise((e,i)=>{"string"==typeof t&&(t=o.revHex(t)),this.socket.emit("request","block.entry",t,m(e,i,f))})}send(t){return new Promise((e,i)=>{this.socket.emit("request","$tx.broadcast",t.toRaw(),m(e,i))})}setFilter(t){return new Promise((e,i)=>{this.socket.emit("request","filter.set",t.toRaw(),m(e,i))})}addFilter(t){Array.isArray(t)||(t=[t]),this.socket.emit("request","filter.add",[t])}resetFilter(){return new Promise((t,e)=>{this.socket.emit("request","filter.reset",m(t,e))})}estimateFee(t){return new Promise((e,i)=>{this.socket.emit("request","$estimate.fee",t,m(e,i))})}rescan(t){return new Promise((e,i)=>{"string"==typeof t&&(t=o.revHex(t)),this.socket.emit("request","chain.rescan",t,m(e,i))})}}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * sigcache.js - signature cache for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(3),n=i(23);function o(t){if(!(this instanceof o))return new o(t);null==t&&(t=1e4),r(s.isU32(t)),this.size=t,this.keys=[],this.valid=new Map}function a(t,i){this.sig=e.from(t),this.key=e.from(i)}o.prototype.resize=function(t){r(s.isU32(t)),this.size=t,this.keys.length=0,this.valid.clear()},o.prototype.add=function(t,e,i){0!==this.size&&(this.valid.set(t,new a(e,i)),this.keys.length>=this.size?(e=Math.floor(Math.random()*this.keys.length),i=this.keys[e],this.valid.delete(i),this.keys[e]=t):this.keys.push(t))},o.prototype.has=function(t,e,i){return!!(t=this.valid.get(t))&&t.equals(e,i)},o.prototype.verify=function(t,e,i){if(0===this.size)return n.verify(t,e,i);var r=t.toString("hex");if(!this.has(r,e,i)){if(!n.verify(t,e,i))return!1;this.add(r,e,i)}return!0},a.prototype.equals=function(t,e){return this.sig.equals(t)&&this.key.equals(e)},t.exports=o}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){const r=i(1);var s=i(14);const n=i(313),o=i(8),a=i(136),h=i(3),c=i(53),u=i(167),l=i(29),f=i(671),d=i(673),p=i(674),g=i(675),m=i(676),w=i(677),y=i(129),b=i(679),{ACTIVE_TIME:v,NONCE_SIZE:k,MAX_JOBS:S,BAN_TIME:_,isJob:x,isSID:R,isUsername:E,isPassword:A,isAgent:M,hex32:O}=i(218);class I extends s{constructor(t){super(),this.options=new b(t),this.node=this.options.node,this.chain=this.options.chain,this.network=this.options.network,this.logger=this.options.logger.context("stratum"),this.difficulty=this.options.difficulty,this.server=n.createServer(),this.sharedb=new m(this.options),this.userdb=new f(this.options),this.locker=new l,this.jobMap=new Map,this.banned=new Map,this.jobs=new u,this.current=null,this.inbound=new u,this.lastActive=0,this.subscribed=!1,this.uid=0,this.suid=0,this._init()}static init(t){var e=t.config;return new I({node:t,prefix:e.prefix,logger:t.logger,host:e.str("stratum-host"),port:e.uint("stratum-port"),maxInbound:e.uint("stratum-max-inbound"),difficulty:e.uint("stratum-difficulty"),dynamic:e.bool("stratum-dynamic"),password:e.str("stratum-password")})}sid(){var t=this.suid;return this.suid+=1,this.suid>>>=0,t}jid(){var t=h.now(),e=this.uid;return this.uid+=1,this.uid>>>=0,t+":"+e}_init(){this.server.on("connection",t=>{this.handleSocket(t)}),this.node.on("block.connect",async()=>{try{await this.handleBlock()}catch(t){this.emit("error",t)}}),this.node.on("tx",async()=>{try{await this.handleTX()}catch(t){this.emit("error",t)}})}async handleBlock(){var t=await this.locker.lock();try{return await this._handleBlock()}finally{t()}}async _handleBlock(){var t=h.now();this.subscribed?(this.current=null,this.lastActive=t,await this.notifyAll()):this.lastActive=t}async handleTX(){var t=await this.locker.lock();try{return await this._handleTX()}finally{t()}}async _handleTX(){var t=h.now();this.subscribed?t>this.lastActive+v&&(this.current=null,this.lastActive=t,await this.notifyAll()):this.lastActive=t}async handleSocket(t){var e;t.remoteAddress?(e=c.normalize(t.remoteAddress),this.inbound.size>=this.options.maxInbound?(this.logger.debug("Ignoring client: too many inbound (%s).",e),t.destroy()):this.isBanned(e)?(this.logger.debug("Ignoring banned client (%s).",e),t.destroy()):(t.setKeepAlive(!0),t.setNoDelay(!0),this.addClient(t))):(this.logger.debug("Ignoring disconnected client."),t.destroy())}addClient(t){const e=new w(this,t);e.on("error",t=>{this.emit("error",t)}),e.on("close",()=>{r(this.inbound.remove(e))}),e.on("ban",()=>{this.handleBan(e)}),this.inbound.push(e)}handleBan(t){this.logger.warning("Banning client (%s).",t.id()),this.banned.set(t.host,h.now()),t.destroy()}isBanned(t){var e=this.banned.get(t);return null!=e&&!(h.now()-e>_&&(this.banned.delete(t),1))}async listen(){this.server.maxConnections=this.options.maxInbound,await this.server.listen(this.options.port,this.options.host),this.logger.info("Server listening on %d.",this.options.port)}async open(){0===this.node.miner.addresses.length&&this.logger.warning("No addresses available for coinbase."),await this.userdb.open(),await this.sharedb.open(),await this.listen(),this.options.password&&!this.userdb.get("admin")&&this.userdb.add({username:"admin",hash:this.options.password}),this.lastActive=h.now()}async close(){let t,e;for(t=this.inbound.head;t;t=e)e=t.next,t.destroy();await this.server.close(),await this.userdb.close(),await this.sharedb.close()}async notifyAll(){var t=await this.getJob();let e;for(this.logger.debug("Notifying all clients of new job: %s.",t.id),e=this.inbound.head;e;e=e.next)-1!==e.sid&&e.sendJob(t)}addJob(t){this.jobs.size>=S&&this.removeJob(this.jobs.head),r(this.jobs.push(t)),r(!this.jobMap.has(t.id)),this.jobMap.set(t.id,t),this.current=t}removeJob(t){r(this.jobs.remove(t)),r(this.jobMap.has(t.id)),this.jobMap.delete(t.id),t===this.current&&(this.current=null)}async getJob(){if(!this.current){if(0===this.node.miner.addresses.length)throw new Error("No addresses available for coinbase.");var t=await this.node.miner.createBlock();t=g.fromTemplate(this.jid(),t);this.addJob(t),this.logger.debug("New job (id=%s, prev=%s).",t.id,h.revHex(t.attempt.prevBlock))}return this.current}async tryCommit(t,e){try{await this.sharedb.commit(t,e)}catch(t){this.emit("error",t)}}auth(t,i){return!!(t=this.userdb.get(t))&&(i=e.from(i,"utf8"),i=o.hash256(i),!!a(i,t.password))}authAdmin(t){return!!this.options.password&&(t=e.from(t,"utf8"),t=o.hash256(t),!!a(t,this.options.password))}async addBlock(t,e){let i;this.node.broadcast(e);try{i=await this.chain.add(e)}catch(t){if("VerifyError"!==t.type)throw t;switch(t.reason){case"high-hash":return new p(23,"high-hash");case"duplicate":return new p(22,"duplicate")}return new p(20,t.reason)}return i?i.hash!==this.chain.tip.hash?new p(21,"stale-work"):(this.tryCommit(i,e),this.logger.info("Client found block %s (%d) (%s).",i.rhash(),i.height,t.id()),null):new p(21,"stale-prevblk")}async handlePacket(t,e){var i=await this.locker.lock();try{return await this._handlePacket(t,e)}finally{i()}}async _handlePacket(t,e){switch(e.method){case"mining.authorize":return this.handleAuthorize(t,e);case"mining.subscribe":return this.handleSubscribe(t,e);case"mining.submit":return this.handleSubmit(t,e);case"mining.get_transactions":return this.handleTransactions(t,e);case"mining.authorize_admin":return this.handleAuthAdmin(t,e);case"mining.add_user":return this.handleAddUser(t,e);default:return this.handleUnknown(t,e)}}async handleAuthorize(t,e){var i,r;typeof e.params.length<2||(i=e.params[0],r=e.params[1],!E(i))||!A(r)?t.sendError(e,0,"invalid params"):this.auth(i,r)?(this.logger.debug("Client successfully authd for %s (%s).",i,t.id()),t.addUser(i),t.sendResponse(e,!0)):(this.logger.debug("Client failed auth for user %s (%s).",i,t.id()),t.sendResponse(e,!1))}async handleSubscribe(t,e){if(this.chain.synced){if(!t.agent&&0<e.params.length){if(!M(e.params[0]))return void t.sendError(e,0,"invalid params");t.agent=e.params[0]}var i;1<e.params.length&&!R(e.params[1])?t.sendError(e,0,"invalid params"):(t.sid=this.sid(),this.subscribed||(this.logger.debug("First subscriber (%s).",t.id()),this.subscribed=!0),i=O(t.sid),this.logger.debug("Client is subscribing with sid=%s (%s).",i,t.id()),t.sendResponse(e,[[["mining.notify",i]],i,k]),i=await this.getJob(),t.setDifficulty(this.difficulty),t.sendJob(i))}else t.sendError(e,0,"not up to date")}async handleSubmit(t,e){var i=this.network.now();let r;try{r=d.fromPacket(e)}catch(i){return void t.sendError(e,0,"invalid params")}if(this.logger.spam("Client submitted job %s (%s).",r.job,t.id()),t.hasUser(r.username))if(-1===t.sid)t.sendError(e,25,"not subscribed");else{var s=this.jobMap.get(r.job);if(!s||s.committed)t.sendError(e,21,"job not found");else if(s!==this.current&&this.logger.warning("Client is submitting a stale job %s (%s).",s.id,t.id()),r.ts<i-7200)t.sendError(e,20,"time too old");else if(r.ts>i+7200)t.sendError(e,20,"time too new");else{var n=(i=s.check(t.sid,r)).getDifficulty();if(n>t.difficulty+1)this.logger.debug("Client submitted a low share of %d, hash=%s, ban=%d (%s).",n,i.rhash(),t.banScore,t.id()),t.increaseBan(1),t.sendError(e,23,"high-hash"),t.sendDifficulty(t.difficulty);else if(s.insert(i.hash)){let o;this.sharedb.add(r.username,y.bits2Diff(n)),this.logger.debug("Client submitted share of %d, hash=%s (%s).",n,i.rhash(),t.id()),i.verify(s.target)&&(n=s.commit(i),o=await this.addBlock(t,n)),o?(this.logger.warning("Client found an invalid block: %s (%s).",o.reason,t.id()),t.sendError(e,o.code,o.reason)):t.sendResponse(e,!0),this.options.dynamic&&t.retarget(s.difficulty)&&this.logger.debug("Retargeted client to %d (%s).",t.nextDifficulty,t.id())}else this.logger.debug("Client submitted a duplicate share: %s (%s).",i.rhash(),t.id()),t.increaseBan(10),t.sendError(e,22,"duplicate")}}else t.sendError(e,24,"unauthorized user")}async handleTransactions(t,e){if(-1===t.sid)t.sendError(e,25,"not subscribed");else if(e.params.length<1)t.sendError(e,21,"job not found");else{var i=e.params[0];if(x(i))if(!(i=this.jobMap.get(i))||i.committed)t.sendError(e,21,"job not found");else{this.logger.debug("Sending tx list (%s).",t.id());var r=[];for(const t of i.attempt.items)r.push(t.tx.hash("hex"));t.sendResponse(e,r)}else t.sendError(e,21,"job not found")}}async handleAuthAdmin(t,e){var i;typeof e.params.length<1||(i=e.params[0],!A(i))?t.sendError(e,0,"invalid params"):this.authAdmin(i)?(t.admin=!0,t.sendResponse(e,!0)):(this.logger.debug("Client sent bad admin password (%s).",t.id()),t.increaseBan(10),t.sendError(e,0,"invalid password"))}async handleAddUser(t,e){if(typeof e.params.length<3)t.sendError(e,0,"invalid params");else{var i=e.params[0],r=e.params[1];if(E(i)&&A(r))if(t.admin){try{this.userdb.add({username:i,password:r})}catch(i){return void t.sendError(e,0,i.message)}t.sendResponse(e,!0)}else this.logger.debug("Client is not an admin (%s).",t.id()),t.sendError(e,0,"invalid password");else t.sendError(e,0,"invalid params")}}async handleUnknown(t,e){this.logger.debug("Client sent an unknown message (%s):",t.id()),this.logger.debug(e),t.send({id:e.id,result:null,error:!0})}}I.id="GamegoldSTM",t.exports=I}).call(this,i(0).Buffer)},function(t,e,i){"use strict";i.r(e),i.d(e,"protocol",(function(){return O})),i.d(e,"Manager",(function(){return H})),i.d(e,"Socket",(function(){return N})),i.d(e,"io",(function(){return D})),i.d(e,"connect",(function(){return D})),i.d(e,"default",(function(){return D}));var r={},s=(e=(i.r(r),i.d(r,"protocol",(function(){return O})),i.d(r,"PacketType",(function(){return R})),i.d(r,"Encoder",(function(){return I})),i.d(r,"Decoder",(function(){return C})),i(219)),i(340)),n=i(220),o=i(110);let a=!1;try{a="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}const h=a;var c=i(84);function u(t){t=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||h))return new XMLHttpRequest}catch(t){}if(!t)try{return new(c.a[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}var l=i(82),f=i(83);function d(){}const p=null!=new u({xdomain:!1}).responseType;class g extends e.a{constructor(t){if(super(t),this.polling=!1,"undefined"!=typeof location){var e="https:"===location.protocol;let i=location.port;i=i||(e?"443":"80"),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||i!==t.port,this.xs=t.secure!==e}e=t&&t.forceBase64,this.supportsBinary=p&&!e}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(t++,this.once("pollComplete",(function(){--t||e()}))),this.writable||(t++,this.once("drain",(function(){--t||e()})))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){Object(o.b)(t,this.socket.binaryType).forEach(t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(t)}),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState)&&this.poll()}doClose(){var t=()=>{this.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}write(t){this.writable=!1,Object(o.d)(t,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){var t=this.query||{},e=this.opts.secure?"https":"http";let i="";return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=Object(s.a)()),this.supportsBinary||t.sid||(t.b64=1),this.opts.port&&("https"==e&&443!==Number(this.opts.port)||"http"==e&&80!==Number(this.opts.port))&&(i=":"+this.opts.port),t=Object(n.b)(t),e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(t.length?"?"+t:"")}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new m(this.uri(),t)}doWrite(t,e){(t=this.request({method:"POST",data:t})).on("success",e),t.on("error",(t,e)=>{this.onError("xhr post error",t,e)})}doPoll(){var t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(t,e)=>{this.onError("xhr poll error",t,e)}),this.pollXhr=t}}class m extends l.a{constructor(t,e){super(),Object(f.b)(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.create()}create(){var t=Object(f.c)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new u(t);try{e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var i in e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&e.setRequestHeader(i,this.opts.extraHeaders[i])}catch(t){}if("POST"===this.method)try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),e.onreadystatechange=()=>{4===e.readyState&&(200===e.status||1223===e.status?this.onLoad():this.setTimeoutFn(()=>{this.onError("number"==typeof e.status?e.status:0)},0))},e.send(this.data)}catch(t){return void this.setTimeoutFn(()=>{this.onError(t)},0)}"undefined"!=typeof document&&(this.index=m.requestsCount++,m.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=d,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete m.requests[this.index],this.xhr=null}}onLoad(){var t=this.xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}function w(){for(var t in m.requests)m.requests.hasOwnProperty(t)&&m.requests[t].abort()}m.requestsCount=0,m.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",w):"function"==typeof addEventListener&&(e="onpagehide"in c.a?"pagehide":"unload",addEventListener(e,w,!1)));const y={websocket:i(611).a,polling:g},b=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,v=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function k(t){var e=t,i=t.indexOf("["),r=t.indexOf("]");-1!=i&&-1!=r&&(t=t.substring(0,i)+t.substring(i,r).replace(/:/g,";")+t.substring(r,t.length));let s=b.exec(t||""),n={},o=14;for(;o--;)n[v[o]]=s[o]||"";return-1!=i&&-1!=r&&(n.source=e,n.host=n.host.substring(1,n.host.length-1).replace(/;/g,":"),n.authority=n.authority.replace("[","").replace("]","").replace(/;/g,":"),n.ipv6uri=!0),n.pathNames=function(t){var e=t.replace(/\/{2,9}/g,"/").split("/");return"/"!=t.slice(0,1)&&0!==t.length||e.splice(0,1),"/"==t.slice(-1)&&e.splice(e.length-1,1),e}(n.path),n.queryKey=function(t){const e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,i,r){i&&(e[i]=r)})),e}(n.query),n}class S extends l.a{constructor(t,e={}){super(),t&&"object"==typeof t&&(e=t,t=null),t?(t=k(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=k(e.host).host),Object(f.b)(this,e),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=Object(n.a)(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname)&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1)),this.open()}createTransport(t){var e=((e=Object.assign({},this.opts.query)).EIO=o.e,e.transport=t,this.id&&(e.sid=this.id),Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port}));return new y[t](e)}open(){let t;if(this.opts.rememberUpgrade&&S.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),(this.transport=t).on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",t=>this.onClose("transport close",t))}probe(t){let e=this.createTransport(t),i=!1;S.priorWebsocketSuccess=!1;const r=()=>{i||(e.send([{type:"ping",data:"probe"}]),e.once("packet",t=>{i||("pong"===t.type&&"probe"===t.data?(this.upgrading=!0,this.emitReserved("upgrading",e),e&&(S.priorWebsocketSuccess="websocket"===e.name,this.transport.pause(()=>{i||"closed"!==this.readyState&&(c(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())}))):((t=new Error("probe error")).transport=e.name,this.emitReserved("upgradeError",t)))}))};function s(){i||(i=!0,c(),e.close(),e=null)}const n=t=>{(t=new Error("probe error: "+t)).transport=e.name,s(),this.emitReserved("upgradeError",t)};function o(){n("transport closed")}function a(){n("socket closed")}function h(t){e&&t.name!==e.name&&s()}const c=()=>{e.removeListener("open",r),e.removeListener("error",n),e.removeListener("close",o),this.off("close",a),this.off("upgrading",h)};e.once("open",r),e.once("error",n),e.once("close",o),this.once("close",a),this.once("upgrading",h),e.open()}onOpen(){if(this.readyState="open",S.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let e=0;for(var t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){var t;"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(t=this.getWritablePackets(),this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush"))}getWritablePackets(){if(this.maxPayload&&"polling"===this.transport.name&&1<this.writeBuffer.length){let e=1;for(let i=0;i<this.writeBuffer.length;i++){var t=this.writeBuffer[i].data;if(t&&(e+=Object(f.a)(t)),0<i&&e>this.maxPayload)return this.writeBuffer.slice(0,i);e+=2}}return this.writeBuffer}write(t,e,i){return this.sendPacket("message",t,e,i),this}send(t,e,i){return this.sendPacket("message",t,e,i),this}sendPacket(t,e,i,r){"function"==typeof e&&(r=e,e=void 0),"function"==typeof i&&(r=i,i=null),"closing"!==this.readyState&&"closed"!==this.readyState&&((i=i||{}).compress=!1!==i.compress,this.emitReserved("packetCreate",t={type:t,data:e,options:i}),this.writeBuffer.push(t),r&&this.once("flush",r),this.flush())}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},i=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{(this.upgrading?i:t)()}):(this.upgrading?i:t)()),this}onError(t){S.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){var e=[];let i=0;for(var r=t.length;i<r;i++)~this.transports.indexOf(t[i])&&e.push(t[i]);return e}}S.protocol=o.e;var _=i(85);const x="function"==typeof ArrayBuffer;var R;e=Object.prototype.toString;const E="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===e.call(Blob),A="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===e.call(File);function M(t){return x&&(t instanceof ArrayBuffer||(t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer)(t))||E&&t instanceof Blob||A&&t instanceof File}const O=5;(i=R=R||{})[i.CONNECT=0]="CONNECT",i[i.DISCONNECT=1]="DISCONNECT",i[i.EVENT=2]="EVENT",i[i.ACK=3]="ACK",i[i.CONNECT_ERROR=4]="CONNECT_ERROR",i[i.BINARY_EVENT=5]="BINARY_EVENT",i[i.BINARY_ACK=6]="BINARY_ACK";class I{constructor(t){this.replacer=t}encode(t){return t.type!==R.EVENT&&t.type!==R.ACK||!function t(e){if(e&&"object"==typeof e)if(Array.isArray(e)){for(let i=0,r=e.length;i<r;i++)if(t(e[i]))return!0}else{if(M(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t(e[i]))return!0}return!1}(t)?[this.encodeAsString(t)]:(t.type=t.type===R.EVENT?R.BINARY_EVENT:R.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let e=""+t.type;return t.type!==R.BINARY_EVENT&&t.type!==R.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){t=function(t){var e=[],i=t.data;return t.data=function t(e,i){if(!e)return e;if(M(e)){const t={_placeholder:!0,num:i.length};return i.push(e),t}if(Array.isArray(e)){const r=new Array(e.length);for(let s=0;s<e.length;s++)r[s]=t(e[s],i);return r}if("object"==typeof e&&!(e instanceof Date)){const r={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=t(e[s],i));return r}return e}(i,e),t.attachments=e.length,{packet:t,buffers:e}}(t);var e=this.encodeAsString(t.packet);return(t=t.buffers).unshift(e),t}}class C extends l.a{constructor(t){super(),this.reviver=t}add(t){let e;if("string"==typeof t){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");((e=this.decodeString(t)).type!==R.BINARY_EVENT&&e.type!==R.BINARY_ACK||(this.reconstructor=new T(e),0===e.attachments))&&super.emitReserved("decoded",e)}else{if(!M(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(e=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(t){let e=0;var i={type:Number(t.charAt(0))};if(void 0===R[i.type])throw new Error("unknown packet type "+i.type);if(i.type===R.BINARY_EVENT||i.type===R.BINARY_ACK){for(var r=e+1;"-"!==t.charAt(++e)&&e!=t.length;);if((r=t.substring(r,e))!=Number(r)||"-"!==t.charAt(e))throw new Error("Illegal attachments");i.attachments=Number(r)}if("/"===t.charAt(e+1)){for(r=e+1;++e&&","!==t.charAt(e)&&e!==t.length;);i.nsp=t.substring(r,e)}else i.nsp="/";if(""!==(r=t.charAt(e+1))&&Number(r)==r){for(r=e+1;++e;){var s=t.charAt(e);if(null==s||Number(s)!=s){--e;break}if(e===t.length)break}i.id=Number(t.substring(r,e+1))}if(t.charAt(++e)){if(r=this.tryParse(t.substr(e)),!C.isPayloadValid(i.type,r))throw new Error("invalid payload");i.data=r}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(t){return!1}}static isPayloadValid(t,e){switch(t){case R.CONNECT:return"object"==typeof e;case R.DISCONNECT:return void 0===e;case R.CONNECT_ERROR:return"string"==typeof e||"object"==typeof e;case R.EVENT:case R.BINARY_EVENT:return Array.isArray(e)&&0<e.length;case R.ACK:case R.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class T{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){return this.buffers.push(t),this.buffers.length===this.reconPack.attachments?(t=function(t,e){return t.data=function t(e,i){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&0<=e.num&&e.num<i.length)return i[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=t(e[r],i);else if("object"==typeof e)for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=t(e[r],i));return e}(t.data,e),t.attachments=void 0,t}(this.reconPack,this.buffers),this.finishedReconstruction(),t):null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function P(t,e,i){return t.on(e,i),function(){t.off(e,i)}}const B=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class N extends l.a{constructor(t,e,i){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,i&&i.auth&&(this.auth=i.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){var t;this.subs||(t=this.io,this.subs=[P(t,"open",this.onopen.bind(this)),P(t,"packet",this.onpacket.bind(this)),P(t,"error",this.onerror.bind(this)),P(t,"close",this.onclose.bind(this))])}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(B.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');e.unshift(t);var i;(t={type:R.EVENT,data:e,options:{}}).options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(i=this.ids++,e=e.pop(),this._registerAckCallback(i,e),t.id=i),e=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!e||!this.connected)||(this.connected?(this.notifyOutgoingListeners(t),this.packet(t)):this.sendBuffer.push(t)),this.flags={},this}_registerAckCallback(t,e){var i=this.flags.timeout;if(void 0===i)this.acks[t]=e;else{const r=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&this.sendBuffer.splice(e,1);e.call(this,new Error("operation has timed out"))},i);this.acks[t]=(...t)=>{this.io.clearTimeoutFn(r),e.apply(this,[null,...t])}}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){"function"==typeof this.auth?this.auth(t=>{this.packet({type:R.CONNECT,data:t})}):this.packet({type:R.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case R.CONNECT:t.data&&t.data.sid?(e=t.data.sid,this.onconnect(e)):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case R.EVENT:case R.BINARY_EVENT:this.onevent(t);break;case R.ACK:case R.BINARY_ACK:this.onack(t);break;case R.DISCONNECT:this.ondisconnect();break;case R.CONNECT_ERROR:this.destroy();var e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){var e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length)for(const e of this._anyListeners.slice())e.apply(this,t);super.emit.apply(this,t)}ack(t){const e=this;let i=!1;return function(...r){i||(i=!0,e.packet({type:R.ACK,id:t,data:r}))}}onack(t){var e=this.acks[t.id];"function"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t){this.id=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:R.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(this._anyListeners)if(t){var e=this._anyListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(this._anyOutgoingListeners)if(t){var e=this._anyOutgoingListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length)for(const e of this._anyOutgoingListeners.slice())e.apply(this,t.data)}}function L(t){this.ms=(t=t||{}).min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=0<t.jitter&&t.jitter<=1?t.jitter:0,this.attempts=0}L.prototype.duration=function(){var t,e,i=this.ms*Math.pow(this.factor,this.attempts++);return this.jitter&&(t=Math.random(),e=Math.floor(t*this.jitter*i),i=0==(1&Math.floor(10*t))?i-e:i+e),0|Math.min(i,this.max)},L.prototype.reset=function(){this.attempts=0},L.prototype.setMin=function(t){this.ms=t},L.prototype.setMax=function(t){this.max=t},L.prototype.setJitter=function(t){this.jitter=t};class H extends l.a{constructor(t,e){super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,Object(f.b)(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!=(i=e.randomizationFactor)?i:.5),this.backoff=new L({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;var i=e.parser||r;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null!=(e=this.backoff)&&e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null!=(e=this.backoff)&&e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null!=(e=this.backoff)&&e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(!~this._readyState.indexOf("open")){this.engine=new S(this.uri,this.opts);const r=this.engine,s=this,n=(this._readyState="opening",this.skipReconnect=!1,P(r,"open",(function(){s.onopen(),t&&t()})));var e=P(r,"error",e=>{s.cleanup(),s._readyState="closed",this.emitReserved("error",e),t?t(e):s.maybeReconnectOnOpen()});if(!1!==this._timeout){var i=this._timeout;0===i&&n();const t=this.setTimeoutFn(()=>{n(),r.close(),r.emit("error",new Error("timeout"))},i);this.opts.autoUnref&&t.unref(),this.subs.push((function(){clearTimeout(t)}))}this.subs.push(n),this.subs.push(e)}return this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");var t=this.engine;this.subs.push(P(t,"ping",this.onping.bind(this)),P(t,"data",this.ondata.bind(this)),P(t,"error",this.onerror.bind(this)),P(t,"close",this.onclose.bind(this)),P(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(t){this.onclose("parse error",t)}}ondecoded(t){Object(_.c)(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let i=this.nsps[t];return i||(i=new N(this,t,e),this.nsps[t]=i),i}_destroy(t){for(const t of Object.keys(this.nsps)){if(this.nsps[t].active)return}this._close()}_packet(t){var e=this.encoder.encode(t);for(let i=0;i<e.length;i++)this.engine.write(e[i],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var e=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect)||t.open(e=>{e?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):t.onreconnect()})},e);this.opts.autoUnref&&i.unref(),this.subs.push((function(){clearTimeout(i)}))}}onreconnect(){var t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const U={};function D(t,e){"object"==typeof t&&(e=t,t=void 0);var i=(t=function(t,e,i){let r=t;return i=i||"undefined"!=typeof location&&location,"string"==typeof(t=null==t?i.protocol+"//"+i.host:t)&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?i.protocol+t:i.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==i?i.protocol+"//"+t:"https://"+t),r=k(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/",t=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host,r.id=r.protocol+"://"+t+":"+r.port+e,r.href=r.protocol+"://"+t+(i&&i.port===r.port?"":":"+r.port),r}(t,(e=e||{}).path||"/socket.io")).source,r=t.id,s=t.path;s=U[r]&&s in U[r].nsps;let n;return n=(s=e.forceNew||e["force new connection"]||!1===e.multiplex||s)?new H(i,e):(U[r]||(U[r]=new H(i,e)),U[r]),t.query&&!e.query&&(e.query=t.queryKey),n.socket(t.path,e)}Object.assign(D,{Manager:H,Socket:N,io:D,connect:D})},function(t,e,i){"use strict";(function(t){i.d(e,"a",(function(){return u}));var r=i(219),s=i(220),n=i(340),o=i(83),a=i(85),h=i(110);const c="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class u extends r.a{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(this.check()){var t=this.uri(),e=this.opts.protocols,i=c?{}:Object(o.c)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=a.d&&!c?e?new a.a(t,e):new a.a(t):new a.a(t,e,i)}catch(t){return this.emitReserved("error",t)}this.ws.binaryType=this.socket.binaryType||a.b,this.addEventListeners()}}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(e){this.writable=!1;for(let i=0;i<e.length;i++){const r=e[i],s=i===e.length-1;Object(h.c)(r,this.supportsBinary,e=>{var i={};a.d||(r.options&&(i.compress=r.options.compress),this.opts.perMessageDeflate&&("string"==typeof e?t.byteLength(e):e.length)<this.opts.perMessageDeflate.threshold&&(i.compress=!1));try{a.d?this.ws.send(e):this.ws.send(e,i)}catch(e){}s&&Object(a.c)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){var t=this.query||{},e=this.opts.secure?"wss":"ws";let i="";return this.opts.port&&("wss"==e&&443!==Number(this.opts.port)||"ws"==e&&80!==Number(this.opts.port))&&(i=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=Object(n.a)()),this.supportsBinary||(t.b64=1),t=Object(s.b)(t),e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(t.length?"?"+t:"")}check(){return!!a.a}}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * gamegold.js - a javascript blockchain library.
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
var r=t.exports;r.set=function(t){return r.network.set(t),r},r.cache=function(){},r.bip70=i(613),r.blockchain=i(616),r.chain=i(332),r.chaindb=i(317),r.chainentry=i(321),r.btc=i(620),r.amount=i(31),r.uri=i(565),r.coins=i(621),r.coinview=i(47),r.crypto=i(622),r.bn=i(38),r.secp256k1=i(23),r.schnorr=i(569),r.db=i(623),r.ldb=i(154),r.hd=i(624),r.http=i(625),r.accessWallet=i(570),r.rpc=i(334),r.route=i(308),r.txmempool=i(638),r.fees=i(335),r.mempool=i(540),r.mempoolentry=i(139),r.mining=i(646),r.miner=i(541),r.template=i(336),r.net=i(649),r.bip150=i(542),r.bip151=i(337),r.bip152=i(338),r.dns=i(309),r.packets=i(310),r.peer=i(312),r.pool=i(339),r.tcp=i(313),r.AddrPacket=i(551),r.AuthChallengePacket=i(543),r.AuthProposePacket=i(600),r.AuthReplyPacket=i(601),r.BlockPacket=i(591),r.BlockTxnPacket=i(557),r.CmpctBlockPacket=i(599),r.EncackPacket=i(547),r.EncinitPacket=i(546),r.FeeFilterPacket=i(597),r.FilterAddPacket=i(595),r.FilterClearPacket=i(596),r.FilterLoadPacket=i(582),r.GetAddrPacket=i(585),r.GetBlocksPacket=i(555),r.GetBlockTxnPacket=i(556),r.GetDataPacket=i(586),r.GetHeadersPacket=i(587),r.HeadersPacket=i(588),r.InvPacket=i(311),r.MempoolPacket=i(594),r.MerkleBlockPacket=i(554),r.NotFoundPacket=i(553),r.packetType=i(24),r.packetCmd=i(544),r.PingPacket=i(584),r.PongPacket=i(550),r.RejectPacket=i(593),r.SendCmpctPacket=i(598),r.SendHeadersPacket=i(590),r.TXPacket=i(552),r.UnknownPacket=i(581),r.VerackPacket=i(549),r.VersionPacket=i(583),r.node=i(661),r.config=i(538),r.fullnode=i(604),r.logger=i(60),r.spvnode=i(606),r.walletnode=i(662),r.primitives=i(665),r.address=i(13),r.block=i(58),r.coin=i(43),r.headers=i(71),r.input=i(100),r.invitem=i(48),r.keyring=i(32),r.merkleblock=i(117),r.mtx=i(51),r.netaddress=i(122),r.outpoint=i(41),r.output=i(25),r.tx=i(19),r.protocol=i(666),r.consensus=i(9),r.errors=i(30),r.network=i(18),r.networks=i(132),r.policy=i(26),r.timedata=i(225),r.txscript=i(667),r.opcode=i(152),r.program=i(227),r.script=i(16),r.scriptnum=i(89),r.sigcache=i(608),r.stack=i(114),r.witness=i(115),r.utils=i(103),r.base32=i(210),r.base58=i(56),r.bloom=i(90),r.co=i(36),r.encoding=i(4),r.int64=i(97),r.lock=i(29),r.reader=i(2),r.staticwriter=i(6),r.util=i(3),r.writer=i(20),r.wallet=i(668),r.path=i(96),r.walletkey=i(205),r.walletdb=i(331),r.walletrpc=i(328),r.stratum=i(670),r.kbucket=i(680),r.contractPlugin=i(213),r.workers=i(681),r.workerpool=i(214),r.pkg=i(79),e.gamegold=r}).call(this,i(12))},function(t,e,i){"use strict";
/*!
 * bip70/index.js - bip70 for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */e.certs=i(558),e.PaymentACK=i(614),e.PaymentDetails=i(375),e.Payment=i(559),e.PaymentRequest=i(615),e.pk=i(561),e.x509=i(560)},function(t,e,i){"use strict";(function(e){
/*!
 * paymentack.js - bip70 paymentack for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=i(148),n=i(149),o=i(559);function a(t){if(!(this instanceof a))return new a(t);this.payment=new o,this.memo=null,t&&this.fromOptions(t)}a.prototype.fromOptions=function(t){return t.payment&&this.payment.fromOptions(t.payment),null!=t.memo&&(r("string"==typeof t.memo),this.memo=t.memo),this},a.fromOptions=function(t){return(new a).fromOptions(t)},a.prototype.fromRaw=function(t){return t=new s(t),this.payment.fromRaw(t.readFieldBytes(1)),this.memo=t.readFieldString(2,!0),this},a.fromRaw=function(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new a).fromRaw(t)},a.prototype.toRaw=function(){var t=new n;return t.writeFieldBytes(1,this.payment.toRaw()),null!=this.memo&&t.writeFieldString(2,this.memo),t.render()},t.exports=a}).call(this,i(0).Buffer)},function(t,e,i){"use strict";(function(e){
/*!
 * paymentrequest.js - bip70 paymentrequest for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */
const r=i(1),s=i(3),n=i(8),o=i(560),a=i(232),h=i(148),c=i(149),u=i(375);function l(t){if(!(this instanceof l))return new l(t);this.version=-1,this.pkiType=null,this.pkiData=null,this.paymentDetails=new u,this.signature=null,t&&this.fromOptions(t)}function f(t,e){this.key=t,this.hash=e}function d(t){this.name=o.getCAName(t),this.trusted=o.isTrusted(t),this.cert=t}l.prototype.fromOptions=function(t){return null!=t.version&&(r(s.isInt(t.version)),this.version=t.version),null!=t.pkiType&&(r("string"==typeof t.pkiType),this.pkiType=t.pkiType),t.pkiData&&(r(e.isBuffer(t.pkiData)),this.pkiData=t.pkiData),t.paymentDetails&&this.paymentDetails.fromOptions(t.paymentDetails),t.signature&&(r(e.isBuffer(t.signature)),this.signature=t.signature),t.chain&&this.setChain(t.chain),this},l.fromOptions=function(t){return(new l).fromOptions(t)},l.prototype.fromRaw=function(t){return t=new h(t),this.version=t.readFieldU32(1,!0),this.pkiType=t.readFieldString(2,!0),this.pkiData=t.readFieldBytes(3,!0),this.paymentDetails.fromRaw(t.readFieldBytes(4)),this.signature=t.readFieldBytes(5,!0),this},l.fromRaw=function(t,i){return"string"==typeof t&&(t=e.from(t,i)),(new l).fromRaw(t)},l.prototype.toRaw=function(){var t=new c;return-1!==this.version&&t.writeFieldU32(1,this.version),null!=this.pkiType&&t.writeFieldString(2,this.pkiType),this.pkiData&&t.writeFieldBytes(3,this.pkiData),t.writeFieldBytes(4,this.paymentDetails.toRaw()),this.signature&&t.writeFieldBytes(5,this.signature),t.render()},l.prototype.getAlgorithm=function(){if(!this.pkiType)throw new Error("No PKI type available.");var t=this.pkiType.split("+");if(2!==t.length)throw new Error("Could not parse PKI algorithm.");if("x509"!==t[0])throw new Error(`Unknown PKI type: ${t[0]}.`);if("sha1"!==t[1]&&"sha256"!==t[1])throw new Error(`Unknown hash algorithm: ${t[1]}.`);return new f(t[0],t[1])},l.prototype.signatureData=function(){var t=this.signature,i=(this.signature=e.alloc(0),this.toRaw());return this.signature=t,i},l.prototype.signatureHash=function(){var t=this.getAlgorithm();return n.hash(t.hash,this.signatureData())},l.prototype.setChain=function(t){var i,s,n=new c;for(i of(r(Array.isArray(t),"Chain must be an array."),t))"string"==typeof i&&(s=a.decode(i),r("certificate"===s.type,"Bad certificate PEM."),i=s.data),r(e.isBuffer(i),"Certificates must be PEM or DER."),n.writeFieldBytes(1,i);this.pkiData=n.render()},l.prototype.getChain=function(){var t=[];if(this.pkiData)for(var e=new h(this.pkiData);1===e.nextTag();)t.push(e.readFieldBytes(1));return t},l.prototype.sign=function(t,e){e&&this.setChain(e),this.pkiType||(this.pkiType="x509+sha256");e=this.getAlgorithm();var i=this.signatureData(),r=this.getChain();this.signature=o.signSubject(e.hash,i,t,r)},l.prototype.verify=function(){if(!this.pkiType||"none"===this.pkiType)return!1;if(!this.signature)return!1;let t;try{t=this.getAlgorithm()}catch(t){return!1}var e=this.signatureData(),i=this.signature,r=this.getChain();try{return o.verifySubject(t.hash,e,i,r)}catch(t){return!1}},l.prototype.verifyChain=function(){if(!this.pkiType||"none"===this.pkiType)return!1;try{return o.verifyChain(this.getChain())}catch(t){return!1}},l.prototype.getCA=function(){if(!this.pkiType||"none"===this.pkiType)throw new Error("No CA found (pkiType).");var t=this.getChain();if(0===t.length)throw new Error("No CA found (chain).");return new d(o.parse(t[t.length-1]))},t.exports=l}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * blockchain/index.js - blockchain for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */e.ChainDB=i(317),e.ChainEntry=i(321),e.Chain=i(332),e.common=i(109),e.layout=i(401)},function(t,e,i){var r=i(28);const s=i(9),n=i(401),o=i(13);t.exports=class extends r{constructor(t){super(),this.dirty=!1,this.dirtyOfOracle=!1,this.db=t||{saveVote:()=>{},loadHisVote:()=>{},saveOracle:()=>{},loadHisOracle:()=>{}},this.curNo=-1,this.hisNo=-1}async loadHisVote(t,e){let i=await this.db.db.get(n.VM(t));return i?i=JSON.parse(i.toString()):(i={token:[],vote:[]},e&&(e.split(",").map(t=>{i.token.push(t),i.vote.push({address:t,vote:21e3,block:0})}),await this.db.saveVote(this.hisNo,i))),this.set(this.hisNo,i),i}async loadHisOracle(t){let e=await this.db.db.get(n.VO(t));return e?e=JSON.parse(e.toString()):(e={},await this.db.saveOracle(this.hisNo,e)),this.set("oracle_"+this.hisNo,e),e}async loadHistory(t){this.curNo=this.zoneId,this.hisNo=this.curNo-1,this.clear();{t=await this.loadHisVote(this.hisNo,t);let e=await this.db.db.get(n.VM(this.curNo));e?e=JSON.parse(e.toString()):(e=this.forkVote(t),await this.db.saveVote(this.curNo,e)),this.set(this.curNo,e)}{await this.loadHisOracle(this.hisNo);let t=await this.db.db.get(n.VO(this.curNo));t?t=JSON.parse(t.toString()):(t={},await this.db.saveOracle(this.curNo,t)),this.set("oracle_"+this.curNo,t)}}forkVote(t){let e={token:[],vote:[]};return t&&(t.token.map(t=>{e.token.push(t),e.vote.push({address:t,vote:21e3,block:0})}),t.vote.map(i=>{-1==t.token.indexOf(i.address)&&e.vote.push({address:i.address,vote:1,block:0})})),e}get hisVote(){return this.get(this.hisNo)}get curVote(){return this.get(this.curNo)}get hisOracle(){return this.get("oracle_"+this.hisNo)}get curOracle(){return this.get("oracle_"+this.curNo)}addTokenAddress(t){var e=this.curVote;if(e){-1==e.token.indexOf(t)&&(e.token.push(t),this.dirty=!0);let r=!1;for(var i of e.vote)if(i.address==t){i.vote=21e3,r=!0;break}r||(e.vote.push({address:t,vote:21e3}),this.dirty=!0)}}delTokenAddress(t){var e,i=this.curVote,r=i.token.indexOf(t);for(e of(-1!=r&&(i.token.splice(r,1),this.dirty=!0),i.vote))if(e.address==t){e.vote=0,this.dirty=!0;break}}getVote(t){return t=t||this.zoneId,{Cur:this.get(t),His:this.get(t-1)}}async calcVote(t,e,i=!1){var r=this.curVote;if(!((t=t/(e=Array.from(new Set(e.split(","))).reduce((t,e)=>{try{o.fromString(e,this.db.network.type),t.push(e)}catch(t){}return t},[])).length|0)<=0)){var s,n=[];for(s of e){let e=!1;for(var a of r.vote)if(a.address==s){this.dirty=!0,i?a.vote=Math.max(0,a.vote-t):a.vote+=t,e=!0;break}e||n.push({address:s,vote:t})}!i&&0<n.length&&(r.vote=r.vote.concat(n),this.dirty=!0)}}async calcBlock(t,e){var i;for(i of this.hisVote.vote)if(i.address==t){this.dirty=!0,i.block||(i.block=0),e?i.block+=1:i.block=Math.max(0,i.block-1);break}}async checkOracle(t){let e=this.hisOracle[t];return e||{v:null,vote:0}}async calcOracle(t,e,i=!1){var r=this.curOracle,s=r[e.k];i?s&&JSON.stringify(s.v)==JSON.stringify(e.v)&&(s.vote=Math.max(0,s.vote-t),this.dirtyOfOracle=!0):s?JSON.stringify(s.v)==JSON.stringify(e.v)?(s.vote+=t,this.dirtyOfOracle=!0):s.vote<t&&(r[e.k]={v:e.v,vote:t},this.dirtyOfOracle=!0):(r[e.k]={v:e.v,vote:t},this.dirtyOfOracle=!0)}async checkVote(t){var e={address:t,rank:0,vote:0,result:!1},i=this.hisVote;if(i){let s=1;for(var r of i.vote){if(r.address==t.toString()){e.rank=s,e.vote=r.vote,e.block=r.block;break}s++}e.vote<=0||100<e.rank||(e.result=!0)}else this.db.logger.error("vote record empty: ",this.hisNo);return e}get zoneId(){return s.getVoteZone(this.db.curHeight)}isIn(t){return 0<=t&&(1==this.curNo||s.getVoteZone(t)<this.curNo)}async saveVote(){if(this.hisVote&&this.curVote){if(this.dirty){for(var t of[[this.hisNo,this.hisVote],[this.curNo,this.curVote]]){var e=t[1];e.vote.sort((t,e)=>e.vote-t.vote),200<e.vote.length&&e.vote.splice(200,e.vote.length-200),await this.db.saveVote(t[0],e)}this.dirty=!1}if(this.dirtyOfOracle){for(var i of[[this.hisNo,this.hisOracle],[this.curNo,this.curOracle]])await this.db.saveOracle(i[0],i[1]);this.dirtyOfOracle=!1}if(this.zoneId>this.curNo){var r,s,n,o=this.curVote,a=this.curOracle,h=this.forkVote(this.curVote),c={};for(r of(this.curNo=this.zoneId,await this.db.saveVote(this.curNo,h),this.set(this.curNo,h),await this.db.saveOracle(this.curNo,c),this.set("oracle_"+this.curNo,c),this.hisNo=this.curNo-1,this.hisVote||(await this.db.saveVote(this.hisNo,o),this.set(this.hisNo,o)),this.hisOracle||(await this.db.saveOracle(this.hisNo,a),this.set("oracle_"+this.hisNo,a)),Object.keys(a)))if(0==r.indexOf("sc.")&&1e3<a[r].vote)try{1==JSON.parse(a[r].v).consensus&&(s=r.slice(3),1==(n=this.db.scList.query([["options.dst",s]])).list.length)&&(n.list[0].options.consensus=1,n.list[0].do(),await this.db.scList.scList.addItem(n.list[0]))}catch{}}else this.zoneId<this.curNo&&(this.curNo=this.zoneId,this.hisNo=this.curNo-1,this.has(this.hisNo)||await this.loadHisVote(this.hisNo),this.has("oracle_"+this.hisNo)||await this.loadHisOracle(this.hisNo))}}}},function(t,e,i){"use strict";
/*!
 * ChainOptions.js - blockchain management for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */const r=i(1),s=i(80),n=i(18),o=i(60),a=i(317),h=i(3);t.exports=class t{constructor(t){this.node=null,this.network=n.primary,this.logger=o.global,this.workers=null,this.prefix=null,this.location=null,this.db="memory",this.maxFiles=64,this.cacheSize=32<<20,this.compression=!0,this.bufferKeys=a.layout.binary,this.spv=!1,this.prune=!1,this.indexTX=!0,this.indexAddress=!1,this.forceFlags=!1,this.coinCache=0,this.entryCache=1e4,this.maxOrphans=5e4,this.checkpoints=!0,t&&this.fromOptions(t)}fromOptions(t){return null!=t.node&&(r("object"==typeof t.node),this.node=t.node),null!=t.network&&(this.network=n.get(t.network)),null!=t.logger&&(r("object"==typeof t.logger),this.logger=t.logger),null!=t.workers&&(r("object"==typeof t.workers),this.workers=t.workers),null!=t.spv&&(r("boolean"==typeof t.spv),this.spv=t.spv),null!=t.prefix&&(r("string"==typeof t.prefix),this.prefix=t.prefix,this.location=this.spv?s.join(this.prefix,"spvchain"):s.join(this.prefix,"chain")),null!=t.location&&(r("string"==typeof t.location),this.location=t.location),null!=t.db&&(r("string"==typeof t.db),this.db=t.db),null!=t.maxFiles&&(r(h.isU32(t.maxFiles)),this.maxFiles=t.maxFiles),null!=t.cacheSize&&(r(h.isU64(t.cacheSize)),this.cacheSize=t.cacheSize),null!=t.compression&&(r("boolean"==typeof t.compression),this.compression=t.compression),null!=t.prune&&(r("boolean"==typeof t.prune),this.prune=t.prune),null!=t.indexTX&&(r("boolean"==typeof t.indexTX),this.indexTX=t.indexTX),null!=t.indexAddress&&(r("boolean"==typeof t.indexAddress),this.indexAddress=t.indexAddress),null!=t.forceFlags&&(r("boolean"==typeof t.forceFlags),this.forceFlags=t.forceFlags),null!=t.coinCache&&(r(h.isU64(t.coinCache)),this.coinCache=t.coinCache),null!=t.entryCache&&(r(h.isU32(t.entryCache)),this.entryCache=t.entryCache),null!=t.maxOrphans&&(r(h.isU32(t.maxOrphans)),this.maxOrphans=t.maxOrphans),null!=t.checkpoints&&(r("boolean"==typeof t.checkpoints),this.checkpoints=t.checkpoints),this}static fromOptions(e){return(new t).fromOptions(e)}}},function(t,e,i){"use strict";
/*!
 * DeploymentState.js - blockchain management for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */const r=i(109),s=i(16);function n(){if(!(this instanceof n))return new n;this.flags=s.flags.MANDATORY_VERIFY_FLAGS,this.flags&=~s.flags.VERIFY_P2SH,this.lockFlags=r.lockFlags.MANDATORY_LOCKTIME_FLAGS}n.prototype.hasP2SH=function(){return 0!=(this.flags&s.flags.VERIFY_P2SH)},n.prototype.hasBIP66=function(){return 0!=(this.flags&s.flags.VERIFY_DERSIG)},n.prototype.hasMTP=function(){return 0!=(this.lockFlags&r.lockFlags.MEDIAN_TIME_PAST)},n.prototype.hasCSV=function(){return 0!=(this.flags&s.flags.VERIFY_CHECKSEQUENCEVERIFY)},n.prototype.hasWitness=function(){return 0!=(this.flags&s.flags.VERIFY_WITNESS)},t.exports=n},function(t,e,i){"use strict";
/*!
 * btc/index.js - high-level btc objects for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 */e.Amount=i(31),e.URI=i(565)},function(t,e,i){"use strict";
/*!
 * coins/index.js - utxo management for vallnet
 */e.Coins=i(315),e.CoinView=i(47),e.compress=i(316),e.UndoCoins=i(230)},function(t,e,i){"use strict";
/*!
 * crypto/index.js - crypto for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */var r=i(8),s=i(72),n=i(112);e.aes=i(112),e.AEAD=i(566),e.BN=i(38),e.ccmp=i(136),e.ChaCha20=i(536),e.cleanse=i(81),e.digest=i(8),e.ecdsa=i(563),e.hkdf=i(567),e.HmacDRBG=i(568),e.merkle=i(133),e.pbkdf2=i(138),e.Poly1305=i(537),e.random=i(72),e.rsa=i(562),e.schnorr=i(569),e.scrypt=i(215),e.secp256k1=i(23),e.siphash=i(252),e.hash=r.hash,e.ripemd160=r.ripemd160,e.sha1=r.sha1,e.sha256=r.sha256,e.hash160=r.hash160,e.hash256=r.hash256,e.root256=r.root256,e.hmac=r.hmac,e.encipher=n.encipher,e.decipher=n.decipher,e.randomBytes=s.randomBytes,e.randomInt=s.randomInt,e.randomRange=s.randomRange},function(t,e,i){"use strict";
/*!
 * db/index.js - data management for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */e.backends=i(319),e.LDB=i(154),e.LowlevelUp=i(318),e.MemDB=i(320)},function(t,e,i){"use strict";
/*!
 * hd/index.js - hd keys for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */t.exports=i(145)},function(t,e,i){"use strict";
/*!
 * http/index.js - http for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */e.Base=i(626),e.conn_c2s=i(627),e.request=i(628),e.Server=i(333),e.accessWallet=i(570)},function(t,e,i){"use strict";e.unsupported=!0},function(t,e,i){"use strict";e.unsupported=!0},function(t,e,i){"use strict";e.unsupported=!0},function(t,e,i){const r=i(104);t.exports=[{name:"cp.remoteQuery",method:"jsonp",path:"/",callback:async function(t,e){return e=(e=new r([e])).array(0,[]),t.chain.db.cpList.query(e)},remoteCb:async function(t){if(t&&Array.isArray(t.list))for(var e of t.list)this.wdb.cpList.getItem(e.cid)||await this.wdb.cpList.addItem(e);return t}},{name:"cps",method:"get",path:"/public/cps",callback:async function(t,e){return t={page:t.valid().u32("page",1),pageCount:0},{list:this.chain.db.cpList.getCPList([],t),cur:t.page,page:t.pageCount}}},{name:"cpById",method:"get",path:"/public/cp/:id",callback:async function(t,e){var i=(t=t.valid()).u32("page",1);t=t.str("id");return(t=this.chain.db.cpList.getCPList(t?[t]:[],{page:i}))&&0<t.length?t[0]:null}},{name:"cpByName",method:"get",path:"/public/cp/name/:name",callback:async function(t,e){var i=(t=t.valid()).u32("page",1);t=decodeURIComponent(t.str("name"));return(t=this.chain.db.cpList.getCPListByName(t?[t]:[],{page:i}))&&0<t.length?t[0]:null}}]},function(t,e,i){const r=i(104),s=i(90),n=i(64),o=i(65).errors,a=i(54),h=i(7).ContractStatus,c=i(19),u=i(31);t.exports=[{name:"token.random",local:!0,method:"jsonp",path:"/",callback:async function(t,e,i){if(1!==e.length)throw new n(o.MISC_ERROR,"token.random clientNo: 生成令牌随机量 终端编码");return e=new r([e]).str(0),e=a.getHmac(e,t.keys.hmacSalt).random}},{name:"mempool.watch",method:"jsonp",path:"/",callback:async function(t,e,i){i&&i.join("mempool")}},{name:"mempool.unwatch",method:"jsonp",path:"/",callback:async function(t,e,i){i&&i.leave("mempool")}},{name:"chain.watch",method:"jsonp",path:"/",callback:async function(t,e,i){i&&i.join("chain")}},{name:"chain.unwatch",method:"jsonp",path:"/",callback:async function(t,e,i){i&&i.leave("chain")}},{name:"chain.rescan",method:"jsonp",path:"/",callback:async function(t,e,i){if(null==(e=new r([e]).numhash(0)))throw new Error("Invalid parameter.");return t.http.scan(i,e)}},{name:"subscribe",local:!0,method:"jsonp",path:"/",callback:async function(t,e,i){if(i&&Array.isArray(e))for(var r of e)i.bus.subscribe(r);return!0}},{name:"unsubscribe",local:!0,method:"jsonp",path:"/",callback:async function(t,e,i){if(i&&Array.isArray(e))for(var r of e)i.bus.unsubscribe(r);return!0}},{name:"filter.set",local:!0,method:"jsonp",path:"/",callback:async function(t,e,i){if(i){if(e=new r([e]).buf(0))return i.filter=s.fromRaw(e),null;throw new Error("Invalid parameter.")}}},{name:"filter.reset",local:!0,method:"jsonp",path:"/",callback:async function(t,e,i){i&&(i.filter=null)}},{name:"filter.add",local:!0,method:"jsonp",path:"/",callback:async function(t,e,i){if(i){var s=new r([e]).array(0);if(!s)throw new Error("Invalid parameter.");if(!i.filter)throw new Error("No filter set.");for(let e=0;e<s.length;e++){var n=s[e];if(!n)throw new Error("Bad data chunk.");i.filter.add(n),t.spv&&t.pool.watch(n)}}}},{name:"canExecute",method:"jsonp",path:"/",callback:async function(t,e){return(e=new r([e]).obj(0,{})).confirm||"cpChange"==e.oper?t.chain.db.cpList.canExecute(e):await t.mempool.cpMemList.canExecute(e)&&await t.chain.db.cpList.canExecute(e)}},{name:"contract.list",method:"jsonp",path:"/",callback:async function(t,e){var i,s,n,o;return 0==e.length?"contract.list type page ids size: 查询并返回交易对 交易类型 指定查询的ID数组 页码":(o=(e=new r([e])).uint(0,1),i=e.uint(1,1),s=e.array(2,[]),e=e.int(3,10),(n=[]).push(["transStatus",h.CreatedOnMem]),o&&n.push(["type",o]),0<s.length&&n.push(["id","include",s]),{pageNum:(o=t.chain.db.transactionList.where(n).paginate(e,i)).pageNum,pageCur:o.pageCur,list:o.records()})},remoteCb:async function(t){if(t&&Array.isArray(t.list))for(var e of t.list)this.wdb.transactionList.saveContract(e,!0);return t}},{name:"block.tip",method:"jsonp",path:"/",callback:async function(t,e){return t.chain.tip.toRaw()}},{name:"block.entry",method:"jsonp",path:"/",callback:async function(t,e){if(null==(e=new r([e]).numhash(0)))throw new Error("Invalid parameter.");return(e=await t.chain.getEntry(e))&&await t.chain.isMainChain(e)?e.toRaw():null}},{name:"$tx.broadcast",method:"jsonp",path:"/",callback:async function(t,e,i){e=new r([e]).buf(0),e=c.fromRaw(e),await t.sendTX(e)}},{name:"$estimate.fee",method:"jsonp",path:"/",callback:async function(t,e){if(e=new r([e]).u32(0,1),t.fees)return 0===(t=t.fees.estimateFee(e,!1))?-1:u.btc(t,!0);throw new n(o.MISC_ERROR,"Fee estimation not available.")}}]},function(t,e,i){const r=i(571),s=i(1),n=i(3),{handleErrors:o,getDetailedTransaction:a,transformTransaction:h,getDetailFromMeta:c,getBlockOverview:u,translateInputAddresses:l}=i(632),f=i(104);t.exports=[{name:"getTx",method:"get",path:"/public/tx/:txid",callback:async function(t,e){return t=(t=t.valid()).hash("txid"),(t=await a(this.node,t))?await h(this.node,t,{}):null}},{name:"getRawTx",method:"get",path:"/public/rawtx/:txid",callback:async function(t,e){return t=(t=t.valid()).str("txid"),{rawtx:t=await this.rpc.execute({method:"tx.raw.get",params:[t]})}}},{name:"getList",method:"get",path:"/public/txs",callback:async function(t,e){s(!this.chain.options.spv,"Cannot get TX in SPV mode.");var i,f=t.query.blockHash,d=l(t.query.address),p=(t=parseInt(t.query.pageNum)||0,1);if(f){if(!(f=await u(this.node,f,e)))return o(null,e);e=f.txids.length;var g,m,w=(r.isUndefined(t)?i=f.txids:(g=10*t,i=f.txids.slice(g,10+g),p=Math.ceil(e/10)),[]);for(m of i){var y=await a(this.node,n.revHex(m));y&&w.push(await h(this.node,y,{}))}return{pagesTotal:p,txs:w}}if(d){var b=10*t,v=10*(t+1),k=[];f=await this.node.getMetaByAddress(d);let e=0;for(const t of f){if(e<b);else{if(e>=v)break;var S=await c(this.node,t);k.push(await h(this.node,S,{}))}e++}return{pagesTotal:Math.ceil(f.length/10),txs:k}}throw new Error("Block hash or address expected")}},{name:"getDetailedTransaction",method:"jsonp",path:"/",callback:async function(t,e){return e=(e=new f([e])).hash(0),a(t,e,!0)}},{name:"getTransaction",method:"jsonp",path:"/",callback:async function(t,e){return e=(e=new f([e])).hash(0),t=await a(t,e,!1)}},{name:"getRawTransaction",method:"jsonp",path:"/",callback:async function(t,e){return e=(e=new f([e])).str(0),t=await t.rpc.execute({method:"tx.raw.get",params:[e]})}},{name:"getMempoolTransaction",method:"jsonp",path:"/",callback:async function(t,e){return e=(e=new f([e])).hash(0),t.mempool.getTX(e)}}]},function(t,e,i){"use strict";var r=i(571),s=i(52);const n=i(3),o=i(64),a=i(65).errors;var h=i(13),c=i(31);const u=i(42);i=i(633);var l={};i.forEach((function(t){t.searchStrings.forEach((function(e){l[e]={poolName:t.poolName,url:t.url}}))}));var f=new s(1e6),d=new s(1e3);function p(t){var e=0;return t.outputs.forEach((function(t){e+=t.value})),c.fromSatoshis(e).toBTC()}function g(t,e){t?t.code?e.send(400,t.message+". Code:"+t.code):e.send(503,t.message):e.send(404,"Not found")}function m(t){if(t){var e,i=t.inputs[0].script.raw;for(e in l)if(i.toString("utf-8").match(e))return l[e]}return{}}async function w(t,e,i){var r=d.get(e);if(r){var s=t.chain.height;r.confirmations=s-r.height+1}else{if(!(s=await t.chain.getBlock(e))){if(t.chain.options.spv)throw new o(a.MISC_ERROR,"Block not available (spv mode)");if(t.chain.options.prune)throw new o(a.MISC_ERROR,"Block not available (pruned data)");throw new o(a.DATABASE_ERROR,"Can't read block from disk")}try{var n=await t.rpc.execute({corba:!0,method:"block.header",params:[s.rhash()]}),h=y(s,n);6<=h.confirmations&&d.set(e,h),r=h}catch(t){r=null,g(t,i)}}return r}function y(t,e){var i=t.txs.map((function(t){return t.txid()}));return e.previousblockhash=e.previousblockhash?n.revHex(e.previousblockhash):"",e.nextblockhash=e.nextblockhash&&0<e.nextblockhash.length?n.revHex(e.nextblockhash):"",{hash:t.hash().toString("hex"),size:t.getSize(),height:e.height,version:t.version,merkleroot:t.merkleRoot,tx:i,time:t.time,timeNormalized:t.time,transactioncount:i.length,nonce:t.nonce,bits:t.bits,difficulty:e.difficulty,chainwork:e.chainwork,confirmations:e.confirmations,previousblockhash:e.previousblockhash,nextblockhash:e.nextblockhash,reward:p(t.txs[0]),isMainChain:!0,minedby:"",poolInfo:m(t.txs[0])}}function b(t,e){if(t=t.address)return t.network=e,t.toString()}async function v(t,e,i=!1){var r,s=e.tx;s.__height=e.height,s.__blockhash=e.block,s.__timestamp=e.time;for(let e=s.outputSatoshis=0;e<s.outputs.length;e++){var n,o=s.outputs[e];s.outputSatoshis+=o.value,i&&(n=await t.chain.db.getSpender(s.hash("hex"),e))&&(o.spentTxId=n.txid,o.spentIndex=n.inputIndex,o.spentHeight=n.blockHeight,o.spentBlockHash=n.blockHash)}for(r of(s.inputSatoshis=0,s.__inputValues=[],s.inputs)){var a=await t.getTXFromAll(r.prevout.hash);a&&(s.__inputValues.push(a.outputs[r.prevout.index].value),s.inputSatoshis+=a.outputs[r.prevout.index].value)}return s.feeSatoshis=s.inputSatoshis-s.outputSatoshis,s.__confirmations=t.chain.height-s.__height+1,s.confirmations=s.__confirmations,s.height=s.__height,s.blockhash=s.__blockhash,s}function k(t,e,i){t=t||{};var r={txid:e.prevout.txid(),vout:e.prevout.index,sequence:e.sequence,n:i};return(e=(t.noScriptSig||(r.scriptSig={hex:e.script.toJSON()},t.noAsm)||(r.scriptSig.asm=e.script.toASM()),e.getAddress()))?(e.network=this.network.type,r.addr=e.toString()):r.addr=null,r.valueSat=t.inputValues[i],r.value=r.valueSat/1e8,r.doubleSpentTxID=null,r.isConfirmed=null,r.confirmations=null,r.unconfirmedInput=null,r}function S(t,e,i){return t=t||{},i={value:(e.value/1e8).toFixed(8),n:i,scriptPubKey:{hex:e.script.toJSON()}},t.noAsm||(i.scriptPubKey.asm=e.script.toASM()),t.noSpent||(i.spentTxId=e.spentTxId||null,e.spentIndex?i.spentIndex=e.spentIndex:i.spentIndex=null),(t=e.getAddress())&&(t.network=this.network.type,i.scriptPubKey.addresses=[t.toString()],i.scriptPubKey.type=t.getType()),i}e.getBlockReward=p,e.handleErrors=g,e.formatTimestamp=function(t){var e=t.getUTCFullYear().toString(),i=(t.getUTCMonth()+1).toString();t=t.getUTCDate().toString();return e+"-"+(i[1]?i:"0"+i[0])+"-"+(t[1]?t:"0"+t[0])},e.getPoolInfo=m,e.translateInputAddresses=function(t){if(t){var e=t=r.isArray(t)?t:[t];if(e)for(var i=0;i<e.length;i++)try{new h(e[i])}catch(t){throw e[i]}return t}},e.translateOutputAddress=function(t){return t},e.getBlockByHash=w,e.transformBlock=y,e.getBlockSummary=async function(t,e,i){function r(t){return i>t.time&&(i=t.time),t}var s,n=f.get(e);if(n)return r(n);if(n=await t.chain.getBlock(e))return n={height:(s=await t.rpc.execute({corba:!0,method:"block.header",params:[n.rhash()]})).height,size:n.getSize(),virtualSize:n.getVirtualSize(),hash:e,time:s.times,txlength:n.txs.length,poolInfo:m(n.txs[0])},6<=s.confirmations&&f.set(e,n),r(n);if(t.chain.options.spv)throw new o(a.MISC_ERROR,"Block not available (spv mode)");if(t.chain.options.prune)throw new o(a.MISC_ERROR,"Block not available (pruned data)");throw new o(a.DATABASE_ERROR,"Can't read block from disk")},e.getAddress=b,e.getBlockOverview=async function(t,e,i){return(t=await w(t,e,i))?{hash:t.hash,version:t.version,confirmations:t.confirmations,height:t.height,chainWork:t.chainwork,prevHash:t.previousblockhash,nextHash:t.nextblockhash,merkleRoot:t.merkleroot,time:t.time,medianTime:null,nonce:t.nonce,bits:t.bits,difficulty:t.difficulty,txids:t.tx}:null},e.getDetailedTransaction=async function(t,e,i=!1){return(e=await t.getMeta(e))?v(t,e,i):null},e.getDetailFromMeta=v,e.transformTransaction=async function(t,e,i){i=i||{};var r=0,s=(0<=e.__height&&(r=t.chain.height-e.__height+1),{txid:e.txid(),version:e.version,locktime:e.locktime});return e.inputs[0].isCoinbase()?(s.isCoinBase=!0,s.vin=[{coinbase:e.inputs[0].script.toJSON(),sequence:e.inputs[0].sequence,n:0}]):(i.inputValues=e.__inputValues,s.vin=e.inputs.map(k.bind(t,i)),s.valueIn=e.inputSatoshis/1e8,s.fees=e.feeSatoshis/1e8),s.vout=e.outputs.map(S.bind(t,i)),s.blockhash=e.blockhash,s.blockheight=e.__height,s.confirmations=r,s.time=e.__timestamp||Math.round(Date.now()/1e3),s.confirmations&&(s.blocktime=s.time),s.valueOut=e.outputSatoshis/1e8,s.size=e.getSize(),(i=await u.FactoryOfContract({env:t.chain.db,tx:e})).data&&(s.clsData=i.data),s},e.transformInput=k,e.transformOutput=S,e._setOutputResults=function(t,e,i,r){for(var s=0;s<e.outputs.length;s++){var n=e.outputs[s];b(n,t.network.type)===i&&(r.txApperances++,r.totalReceivedSat+=n.value,r.balanceSat+=n.value,0===e.confirmations)&&(r.unconfirmedTxApperances++,r.unconfirmedBalanceSat+=n.value)}return r},e._setInputResults=function(t,e,i,r){for(var s=0;s<e.inputs.length;s++)b(e.inputs[s],t.network.type)===i&&(r.totalSentSat+=e.__inputValues[s],r.balanceSat-=e.__inputValues[s],0===e.confirmations)&&(r.unconfirmedBalanceSat-=e.__inputValues[s])},e.utxo=async function(t,e){return(await t.getCoinsByAddress(e)).map(e=>({address:h.fromScript(e.script).toString(),txid:e.hash,vout:e.index,timestamp:0,scriptPubKey:e.script.toString("hex"),amount:c.fromSatoshis(e.value).toBTC(),height:e.height,satoshis:e.value,confirmations:t.chain.height-e.height+1}))}},function(t){t.exports=JSON.parse('[{"poolName":"50BTC","url":"https://50btc.com/","searchStrings":["50BTC.com","50btc.com"]},{"poolName":"175btc","url":"http://www.175btc.com/","searchStrings":["Mined By 175btc.com"]},{"poolName":"ASICminer","url":"https://bitcointalk.org/index.php?topic=99497.0","searchStrings":["Mined By ASICMiner"]},{"poolName":"AntMiner","url":"https://bitmaintech.com/","searchStrings":["AntPool"]},{"poolName":"agentD","url":"http://","searchStrings":["agentD"]},{"poolName":"Bitfury","url":"http://bitfury.org/","searchStrings":["2av0id51pct"]},{"poolName":"BitMinter","url":"https://bitminter.com/","searchStrings":["BitMinter"]},{"poolName":"Bitparking","url":"http://bitparking.com/","searchStrings":["bitparking"]},{"poolName":"BTC Guild","url":"https://www.btcguild.com/","searchStrings":["Mined by BTC Guild","BTC Guild"]},{"poolName":"bcpool.io","url":"https://bcpool.io/","searchStrings":["bcpool"]},{"poolName":"Discus Fish","url":"http://f2pool.com/","searchStrings":["七彩神仙鱼","Made in China","Mined by user"]},{"poolName":"Discus Fish Solo","url":"http://f2pool.com/","searchStrings":["For Pierce and Paul"]},{"poolName":"Cointerra","url":"http://cointerra.com/","searchStrings":["cointerra"]},{"poolName":"Eligius","url":"http://eligius.st/","searchStrings":["Eligius"]},{"poolName":"EclipseMC","url":"https://eclipsemc.com/","searchStrings":["Josh Zerlan was here!","EclipseMC","Aluminum Falcon"]},{"poolName":"GIVE-ME-COINS","url":"https://give-me-coins.com/","searchStrings":["Mined at GIVE-ME-COINS.com"]},{"poolName":"ghash.io","url":"https://ghash.io/","searchStrings":["ghash.io","GHash.IO"]},{"poolName":"HHTT","url":"http://hhtt.1209k.com/","searchStrings":["HHTT"]},{"poolName":"KNCminer","url":"https://www.kncminer.com/","searchStrings":["KnCMiner"]},{"poolName":"Megabigpower","url":"http://megabigpower.com/","searchStrings":["megabigpower.com"]},{"poolName":"MultiCoin","url":"https://multicoin.co/","searchStrings":["MultiCoin.co"]},{"poolName":"Mt Red","url":"https://mtred.com/‎","searchStrings":["/mtred/"]},{"poolName":"MaxBTC","url":"https://www.maxbtc.com","searchStrings":["MaxBTC"]},{"poolName":"NMCbit","url":"http://nmcbit.com/","searchStrings":["nmcbit.com"]},{"poolName":"ozcoin","url":"https://ozco.in/","searchStrings":["ozco.in","ozcoin"]},{"poolName":"Polmine.pl","url":"https://polmine.pl","searchStrings":["by polmine.pl"]},{"poolName":"simplecoin","url":"http://simplecoin.us/","searchStrings":["simplecoin.us ftw"]},{"poolName":"SlushPool","url":"https://slushpool.com/","searchStrings":["/slush/"]},{"poolName":"TripleMining","url":"https://www.triplemining.com/","searchStrings":["Triplemining.com"]},{"poolName":"wizkid057","url":"http://wizkid057.com/btc","searchStrings":["wizkid057"]},{"poolName":"Yourbtc.net","url":"http://yourbtc.net/","searchStrings":["yourbtc.net"]},{"poolName":"BTCChina Pool","url":"https://pool.btcchina.com/","searchStrings":["BTCChina Pool","btcchina.com"]},{"poolName":"BTCC Pool","url":"https://pool.btcc.com/","searchStrings":["/BTCC/"]}]')},function(t,e,i){const r=i(104),s=i(635);t.exports=[{name:"ca.get",method:"get",path:"/public/ca/:erid",callback:async function(t,e){return t=t.valid().str("erid"),(t=await this.node.chain.db.erList.query([["erid",t]])).height=this.node.chain.height,t}},{name:"ca.byId",method:"jsonp",path:"/",callback:async function(t,e){return e=new r([e]).str(0),t.chain.db.erList.getEr(e)}},{name:"ca.rank",method:"jsonp",path:"/",callback:async function(t,e){return e=(e=new r([e])).str(0,""),(t=await(async t=>new Promise((e,i)=>{s(t,.85,1e-4,(function(t,r){t?i(t):e(r)}))}))(t.chain.db.enCpList.rank))[e]},remoteCb:async function(t){return t}},{name:"ca.list",method:"jsonp",path:"/",callback:async function(t,e){return e=(e=new r([e])).array(0,[]),(e=await t.chain.db.erList.query(e)).height=t.chain.height,e}},{name:"ca.verify",method:"jsonp",path:"/",callback:async function(t,e){return e=(e=new r([e])).str(0,""),(e=await t.chain.db.caVerify(e))&&(e.curHeight=t.chain.height),e},remoteCb:async function(t){return t}},{name:"ca.list.ab",method:"jsonp",path:"/",callback:async function(t,e){return e=(e=new r([e])).array(0,[]),t.chain.db.erAbList.query(e)},remoteCb:async function(t){return t}}]},function(t,e,i){"use strict";class r{constructor(t,e,i,r,s){this.outgoingNodes=t,this.linkProb=e,this.tolerance=i,this.callback=r,this.pageCount=Object.keys(this.outgoingNodes).length,this.coeff=(1-e)/this.pageCount,this.probabilityNodes=t instanceof Array?[]:{},this.incomingNodes=t instanceof Array?[]:{},this.debug=s,this.startRanking()}startRanking(){var t,e,i,r=1/this.pageCount,s=this.outgoingNodes;for(t in s)for(e in this.probabilityNodes[t]=r,s[t])i=s[t][e],this.incomingNodes[i]||(this.incomingNodes[i]=[]),this.incomingNodes[i].push(t);this.debug&&this.reportDebug(1),this.iterate(1)}reportDebug(t){console.log("____ITERATION "+t+"____"),console.log("Pages: "+Object.keys(this.outgoingNodes).length),console.log("outgoing %j",this.outgoingNodes),console.log("incoming %j",this.incomingNodes),console.log("probability %j",this.probabilityNodes)}iterate(t){var e,i,r,s,n,o=[],a={};for(e in this.probabilityNodes){if(r=0,this.incomingNodes[e])for(i=0;i<this.incomingNodes[e].length;i++)r+=this.probabilityNodes[this.incomingNodes[e][i]]/this.outgoingNodes[this.incomingNodes[e][i]].length;s=this.coeff+this.linkProb*r,n=this.probabilityNodes[e]+this.tolerance,this.probabilityNodes[e]-this.tolerance<=s&&s<=n&&o.push(a[e]=s),this.probabilityNodes[e]=s}return o.length==this.pageCount?this.outgoingNodes instanceof Array?this.callback(null,o):this.callback(null,a):(this.debug&&this.reportDebug(t),this.iterate(++t))}}t.exports=function(t,e,i,s,n=!1){if(t&&e&&i&&s)return new r(t,e,i,s,n);throw new Error("Provide 4 arguments: nodeMatrix, link probability, tolerance, callback")}},function(t,e,i){"use strict";t.exports=class{constructor(t){this.config=t,this.hmacConnection=this.config.array("hmac-connection")||[],this.config.hmacConnection=this.hmacConnection}add(t){-1==this.hmacConnection.indexOf(t)&&this.hmacConnection.push(t),this.config.hmacConnection=this.hmacConnection}del(t){-1!=(t=this.hmacConnection.indexOf(t))&&(this.hmacConnection.splice(t,1),this.config.hmacConnection=this.hmacConnection)}clear(){this.hmacConnection=[],this.config.hmacConnection=this.hmacConnection}content(){return this.hmacConnection}has(t){return-1!=this.hmacConnection.indexOf(t)}}},function(t,e,i){"use strict";var r=i(14).EventEmitter;const s=i(37).eventList;t.exports=class extends r{constructor(t){super(),this.remoteAddress=t.remoteAddress}subscribe(t){for(var e=0;e<s.length;e++){var i=s[e],r=Array.prototype.slice.call(arguments).slice(1);r.unshift(this),t===i.name&&i.subscribe.apply(i.scope,r)}return!0}unsubscribe(t){for(var e=0;e<s.length;e++){var i=s[e],r=Array.prototype.slice.call(arguments).slice(1);r.unshift(this),t===i.name&&i.unsubscribe.apply(i.scope,r)}return!0}close(){for(var t=0;t<s.length;t++){var e=s[t];e.unsubscribe.call(e.scope,this)}}}},function(t,e,i){"use strict";
/*!
 * mempool/index.js - mempool for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */e.Fees=i(335),e.layout=i(539),e.MempoolEntry=i(139),e.Mempool=i(540)},function(t,e,i){"use strict";
/*!
 * Confirmation.js - fee estimation for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 * Ported from:
 * https://github.com/bitcoin/bitcoin/blob/master/src/policy/fees.cpp
 */const r=i(4),s=i(1),n=i(2),o=i(6),a=i(60),h=i(3);class c{constructor(){this.buckets=[]}insert(t,e){var i=h.binarySearch(this.buckets,t,u,!0);this.buckets.splice(i,0,[t,e])}search(t){return t=h.binarySearch(this.buckets,t,u,!0),s(0!==this.buckets.length,"Cannot search."),this.buckets[t][1]}}function u(t,e){return t[0]-e}function l(t){return r.sizeVarint(t.length)+8*t.length}function f(t,e){t.writeVarint(e.length);for(let i=0;i<e.length;i++)t.writeDouble(e[i])}function d(t){var e=new Float64Array(t.readVarint());for(let i=0;i<e.length;i++)e[i]=t.readDouble();return e}t.exports=class t{constructor(t,e){this.logger=a.global,this.type=t,this.decay=0,this.maxConfirms=0,this.buckets=new Float64Array(0),this.bucketMap=new c,this.confAvg=[],this.curBlockConf=[],this.unconfTX=[],this.oldUnconfTX=new Int32Array(0),this.curBlockTX=new Int32Array(0),this.txAvg=new Float64Array(0),this.curBlockVal=new Float64Array(0),this.avg=new Float64Array(0),e&&(s("object"==typeof e),this.logger=e.context("fees"))}init(t,e,i){this.maxConfirms=e,this.decay=i,this.buckets=new Float64Array(t.length),this.bucketMap=new c;for(let e=0;e<t.length;e++)this.buckets[e]=t[e],this.bucketMap.insert(t[e],e);this.confAvg=new Array(e),this.curBlockConf=new Array(e),this.unconfTX=new Array(e);for(let i=0;i<e;i++)this.confAvg[i]=new Float64Array(t.length),this.curBlockConf[i]=new Int32Array(t.length),this.unconfTX[i]=new Int32Array(t.length);this.oldUnconfTX=new Int32Array(t.length),this.curBlockTX=new Int32Array(t.length),this.txAvg=new Float64Array(t.length),this.curBlockVal=new Float64Array(t.length),this.avg=new Float64Array(t.length)}clearCurrent(t){for(let e=0;e<this.buckets.length;e++){this.oldUnconfTX[e]=this.unconfTX[t%this.unconfTX.length][e];for(let i=this.unconfTX[t%this.unconfTX.length][e]=0;i<this.curBlockConf.length;i++)this.curBlockConf[i][e]=0;this.curBlockTX[e]=0,this.curBlockVal[e]=0}}record(t,e){if(!(t<1)){var i=this.bucketMap.search(e);for(let e=t;e<=this.curBlockConf.length;e++)this.curBlockConf[e-1][i]++;this.curBlockTX[i]++,this.curBlockVal[i]+=e}}updateAverages(){for(let t=0;t<this.buckets.length;t++){for(let e=0;e<this.confAvg.length;e++)this.confAvg[e][t]=this.confAvg[e][t]*this.decay+this.curBlockConf[e][t];this.avg[t]=this.avg[t]*this.decay+this.curBlockVal[t],this.txAvg[t]=this.txAvg[t]*this.decay+this.curBlockTX[t]}}estimateMedian(t,e,i,r,s){var n=this.buckets.length-1,o=r?n:0,a=r?-1:1,h=this.unconfTX.length;let c=o,u=o,l=o,f=!1,d=0,p=0,g=0,m=0;for(let d=o;0<=d&&d<=n;d+=a){p+=this.confAvg[t-1][d],g+=this.txAvg[d];for(let e=t;e<this.maxConfirms;e++)m+=this.unconfTX[Math.max(s-e,0)%h][d];if(m+=this.oldUnconfTX[d],g>=e/(1-this.decay)){var w=p/(g+m);if(r&&w<i)break;if(!r&&i<w)break;f=!0,p=0,g=0,m=0,u=c,l=d,c=d+a}}var y=u>l?u:l;for(let t=o=u<l?u:l;t<=y;t++)d+=this.txAvg[t];if(f&&0!==d){d/=2;for(let t=o;t<=y;t++){if(this.txAvg[t]>=d)return this.avg[t]/this.txAvg[t];d-=this.txAvg[t]}}return-1}addTX(t,e){return e=this.bucketMap.search(e),t%=this.unconfTX.length,this.unconfTX[t][e]++,this.logger.spam("Adding tx to %s.",this.type),e}removeTX(t,e,i){let r=e-t;(r=0===e?0:r)<0?this.logger.debug("Blocks ago is negative for mempool tx."):r>=this.unconfTX.length?0<this.oldUnconfTX[i]?this.oldUnconfTX[i]--:this.logger.debug("Mempool tx removed >25 blocks (bucket=%d).",i):(e=t%this.unconfTX.length,0<this.unconfTX[e][i]?this.unconfTX[e][i]--:this.logger.debug("Mempool tx removed (block=%d, bucket=%d).",e,i))}getSize(){let t=0;t=(t=(t=(t=(t+=8)+l(this.buckets))+l(this.avg))+l(this.txAvg))+r.sizeVarint(this.maxConfirms);for(let e=0;e<this.maxConfirms;e++)t+=l(this.confAvg[e]);return t}toRaw(){var t=this.getSize(),e=new o(t);e.writeDouble(this.decay),f(e,this.buckets),f(e,this.avg),f(e,this.txAvg),e.writeVarint(this.maxConfirms);for(let t=0;t<this.maxConfirms;t++)f(e,this.confAvg[t]);return e.render()}fromRaw(t){var e=new n(t),i=(t=e.readDouble(),d(e)),r=d(e),s=d(e),o=e.readVarint(),a=new Array(o);for(let t=0;t<o;t++)a[t]=d(e);if(t<=0||1<=t)throw new Error("Decay must be between 0 and 1 (non-inclusive).");if(i.length<=1||1e3<i.length)throw new Error("Must have between 2 and 1000 fee/pri buckets.");if(r.length!==i.length)throw new Error("Mismatch in fee/pri average bucket count.");if(s.length!==i.length)throw new Error("Mismatch in tx count bucket count.");if(o<=0||1008<o)throw new Error("Must maintain estimates for between 1 and 1008 confirms.");for(let t=0;t<o;t++)if(a[t].length!==i.length)throw new Error("Mismatch in fee/pri conf average bucket count.");return this.init(i,o,t),this.avg=r,this.txAvg=s,this.confAvg=a,this}static fromRaw(e,i,r){return new t(i,r).fromRaw(e)}}},function(t,e,i){"use strict";
/*!
 * CoinIndex.js - CoinIndex for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1),s=i(41),n=i(641);t.exports=class{constructor(){this.index=new Map,this.map=new Map}reset(){this.index.clear(),this.map.clear()}get(t){if(!(t=this.index.get(t)))return[];var e=[];for(const i of t.values())e.push(i.toCoin());return e}insert(t,e){var i=t.outputs[e],o=t.hash("hex");if(i=i.getHash("hex")){let a=this.index.get(i);a||(a=new Map,this.index.set(i,a)),o=s.toKey(o,e),r(!a.has(o)),a.set(o,new n(t,e)),this.map.set(o,i)}}remove(t,e){var i;t=s.toKey(t,e);(e=this.map.get(t))&&(i=this.index.get(e),r(i),r(i.has(t)),i.delete(t),0===i.size&&this.index.delete(e),this.map.delete(t))}}},function(t,e,i){"use strict";
/*!
 * IndexedCoin.js - IndexedCoin for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(43);function s(t,e){this.tx=t,this.index=e}s.prototype.toCoin=function(){return r.fromTX(this.tx,this.index,-1,0)},t.exports=s},function(t,e,i){"use strict";(function(e){
/*!
 * MempoolCache.js - MempoolCache for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(3),s=i(139),n=i(4),o=i(539),a=i(154),h=i(335);class c{constructor(t){this.logger=t.logger,this.chain=t.chain,this.network=t.network,this.db=null,this.batch=null,t.persistent&&(this.db=a(t))}async getVersion(){var t=await this.db.get(o.V);return t?t.readUInt32LE(0,!0):-1}async getTip(){var t=await this.db.get(o.R);return t?t.toString("hex"):null}async getFees(){var t=await this.db.get(o.F);if(!t)return null;let e;try{e=h.fromRaw(t)}catch(t){this.logger.warning("Fee data failed deserialization: %s.",t.message)}return e}getEntries(){return this.db.values({gte:o.e(n.ZERO_HASH),lte:o.e(n.MAX_HASH),parse:s.fromRaw})}getKeys(){return this.db.keys({gte:o.e(n.ZERO_HASH),lte:o.e(n.MAX_HASH)})}async open(){this.db&&(await this.db.open(),await this.verify(),this.batch=this.db.batch())}async close(){this.db&&(await this.db.close(),this.batch=null)}save(t){this.db&&this.batch.put(o.e(t.tx.hash()),t.toRaw())}remove(t){this.db&&this.batch.del(o.e(t))}sync(t){this.db&&this.batch.put(o.R,e.from(t,"hex"))}writeFees(t){this.db&&this.batch.put(o.F,t.toRaw())}clear(){this.batch.clear(),this.batch=this.db.batch()}async flush(){this.db&&(await this.batch.write(),this.batch=this.db.batch())}async init(t){var i=this.db.batch();i.put(o.V,n.U32(c.VERSION)),i.put(o.R,e.from(t,"hex")),await i.write()}async verify(){let t,e=await this.getVersion();return-1===e&&(e=c.VERSION,t=this.chain.tip.hash,this.logger.info("Mempool cache is empty. Writing tip %s.",r.revHex(t)),await this.init(t)),e!==c.VERSION?(this.logger.warning("Mempool cache version mismatch (%d != %d)!",e,c.VERSION),this.logger.warning("Invalidating mempool cache."),await this.wipe(),!1):(t=await this.getTip())===this.chain.tip.hash||(this.logger.warning("Mempool tip not consistent with chain tip (%s != %s)!",r.revHex(t),this.chain.tip.rhash()),this.logger.warning("Invalidating mempool cache."),await this.wipe(),!1)}async wipe(){var t=this.db.batch(),i=await this.getKeys();for(const e of i)t.del(e);t.put(o.V,n.U32(c.VERSION)),t.put(o.R,e.from(this.chain.tip.hash,"hex")),t.del(o.F),await t.write(),this.logger.info("Removed %d mempool entries from disk.",i.length)}}c.VERSION=2,t.exports=c}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * MempoolOptions.js - MempoolOptions for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1),s=i(80),n=i(26),o=i(3),a=i(18),h=i(539);i(206),t.exports=class t{constructor(t){this.node=null,this.chain=null,this.network=a.primary,this.logger=null,this.workers=null,this.fees=null,this.limitFree=!0,this.limitFreeRelay=15,this.relayPriority=!0,this.requireStandard=this.network.requireStandard,this.rejectAbsurdFees=!0,this.paranoidChecks=!1,this.replaceByFee=!1,this.maxSize=1024*n.MEMPOOL_MAX_SIZE*1024,this.maxOrphans=n.MEMPOOL_MAX_ORPHANS,this.maxAncestors=n.MEMPOOL_MAX_ANCESTORS,this.expiryTime=n.MEMPOOL_EXPIRY_TIME,this.minRelay=this.network.minRelay,this.prefix=null,this.location=null,this.db="memory",this.maxFiles=64,this.cacheSize=32<<20,this.compression=!0,this.bufferKeys=h.binary,this.persistent=!1,this.fromOptions(t)}fromOptions(t){return r(t,"Mempool requires options."),r(t.node&&"object"==typeof t.node,"Mempool requires a node."),r(t.node.chain&&"object"==typeof t.node.chain,"Mempool requires a chain."),this.node=t.node,this.chain=this.node.chain,this.network=this.chain.network,this.logger=this.chain.logger,this.workers=this.chain.workers,this.requireStandard=this.network.requireStandard,this.minRelay=this.network.minRelay,null!=t.logger&&(r("object"==typeof t.logger),this.logger=t.logger),null!=t.workers&&(r("object"==typeof t.workers),this.workers=t.workers),null!=t.fees&&(r("object"==typeof t.fees),this.fees=t.fees),null!=t.limitFree&&(r("boolean"==typeof t.limitFree),this.limitFree=t.limitFree),null!=t.limitFreeRelay&&(r(o.isU32(t.limitFreeRelay)),this.limitFreeRelay=t.limitFreeRelay),null!=t.relayPriority&&(r("boolean"==typeof t.relayPriority),this.relayPriority=t.relayPriority),null!=t.requireStandard&&(r("boolean"==typeof t.requireStandard),this.requireStandard=t.requireStandard),null!=t.rejectAbsurdFees&&(r("boolean"==typeof t.rejectAbsurdFees),this.rejectAbsurdFees=t.rejectAbsurdFees),null!=t.paranoidChecks&&(r("boolean"==typeof t.paranoidChecks),this.paranoidChecks=t.paranoidChecks),null!=t.replaceByFee&&(r("boolean"==typeof t.replaceByFee),this.replaceByFee=t.replaceByFee),null!=t.maxSize&&(r(o.isU64(t.maxSize)),this.maxSize=t.maxSize),null!=t.maxOrphans&&(r(o.isU32(t.maxOrphans)),this.maxOrphans=t.maxOrphans),null!=t.maxAncestors&&(r(o.isU32(t.maxAncestors)),this.maxAncestors=t.maxAncestors),null!=t.expiryTime&&(r(o.isU32(t.expiryTime)),this.expiryTime=t.expiryTime),null!=t.minRelay&&(r(o.isU64(t.minRelay)),this.minRelay=t.minRelay),null!=t.prefix&&(r("string"==typeof t.prefix),this.prefix=t.prefix,this.location=s.join(this.prefix,"mempool")),null!=t.location&&(r("string"==typeof t.location),this.location=t.location),null!=t.db&&(r("string"==typeof t.db),this.db=t.db),null!=t.maxFiles&&(r(o.isU32(t.maxFiles)),this.maxFiles=t.maxFiles),null!=t.cacheSize&&(r(o.isU64(t.cacheSize)),this.cacheSize=t.cacheSize),null!=t.compression&&(r("boolean"==typeof t.compression),this.compression=t.compression),null!=t.persistent&&(r("boolean"==typeof t.persistent),this.persistent=t.persistent),null!=t.indexAddress&&(r("boolean"==typeof t.indexAddress),this.indexAddress=t.indexAddress),this}static fromOptions(e){return(new t).fromOptions(e)}}},function(t,e,i){"use strict";
/*!
 * Orphan.js - Orphan for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(19);t.exports=class{constructor(t,e,i){this.raw=t.toRaw(),this.missing=e,this.id=i}toTX(){return r.fromRaw(this.raw)}}},function(t,e,i){"use strict";
/*!
 * TXIndex.js - TXIndex for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1),s=i(322);t.exports=class{constructor(){this.index=new Map,this.map=new Map}reset(){this.index.clear(),this.map.clear()}get(t){if(!(t=this.index.get(t)))return[];var e=[];for(const i of t.values())e.push(i.tx);return e}getMeta(t){if(!(t=this.index.get(t)))return[];var e=[];for(const r of t.values()){var i=s.fromTX(r.tx);i.mtime=r.time,e.push(i)}return e}insert(t,e){var i,s=(i=t.tx).hash("hex");if(0!==(i=i.getHashes(e,"hex")).length){for(const e of i){let i=this.index.get(e);i||(i=new Map,this.index.set(e,i)),r(!i.has(s)),i.set(s,t)}this.map.set(s,i)}}remove(t){var e=this.map.get(t);if(e){for(const s of e){var i=this.index.get(s);r(i),r(i.has(t)),i.delete(t),0===i.size&&this.index.delete(s)}this.map.delete(t)}}}},function(t,e,i){"use strict";
/*!
 * mining/index.js - mining infrastructure for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */e.common=i(129),e.CPUMiner=i(573),e.mine=i(304),e.Miner=i(541),e.BlockTemplate=i(336)},function(t,e,i){"use strict";
/*!
 * MerkleTree.js - block template object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(8),s=i(4);t.exports=class t{constructor(){this.steps=[]}withFirst(t){for(const e of this.steps)t=r.root256(t,e);return t}toJSON(){var t=[];for(const e of this.steps)t.push(e.toString("hex"));return t}fromItems(t){var e=[];e.push(s.ZERO_HASH);for(const i of t)e.push(i.tx.hash());return this.fromLeaves(e)}fromBlock(t){var e=[];e.push(s.ZERO_HASH);for(let r=1;r<t.length;r++){var i=t[r];e.push(i.hash())}return this.fromLeaves(e)}fromLeaves(t){let e=t.length;for(;1<e;){var i=[s.ZERO_HASH];this.steps.push(t[1]),e%2&&t.push(t[e-1]);for(let s=2;s<e;s+=2){var n=r.root256(t[s],t[s+1]);i.push(n)}e=(t=i).length}return this}static fromItems(e){return(new t).fromItems(e)}static fromBlock(e){return(new t).fromBlock(e)}static fromLeaves(e){return(new t).fromLeaves(e)}}},function(t,e,i){"use strict";
/*!
 * BlockProof.js - block template object for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(3),s=i(129);t.exports=class{constructor(t,e,i,r,s,n){this.hash=t,this.root=e,this.nonce1=i,this.nonce2=r,this.time=s,this.nonce=n}rhash(){return r.revHex(this.hash.toString("hex"))}verify(t){return s.rcmp(this.hash,t)<=0}getDifficulty(){return s.hash2Bits(this.hash)}}},function(t,e,i){"use strict";
/*!
 * net/index.js - p2p for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */e.BIP150=i(542),e.BIP151=i(337),e.bip152=i(338),e.common=i(66),e.dns=i(309),e.external=i(578),e.Framer=i(579),e.HostList=i(580),e.packets=i(310),e.Parser=i(602),e.Peer=i(312),e.Pool=i(339),e.socks=i(660),e.tcp=i(313),e.UPNP=i(603)},function(t,e,i){"use strict";(function(e){
/*!
 * hostlist.js - address management for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(80),n=i(3),o=i(53),a=i(36),h=i(18),c=i(122),u=i(167),l=i(134),f=i(66),d=i(651),p=i(309),g=i(60),m=e.allocUnsafe(32);class w{constructor(t){this.options=new v(t),this.network=this.options.network,this.logger=this.options.logger.context("hostlist"),this.address=this.options.address,this.resolve=this.options.resolve,this.dnsSeeds=[],this.dnsNodes=[],this.nodes=[],this.map=new Map,this.local=new Map,this.fresh=[],this.used=[],this.banned=new Map,this.totalFresh=0,this.totalUsed=0,this.timer=null,this.needsFlush=!1,this._init()}_init(){var t=this.options,e=w.scores;for(let t=0;t<this.options.maxBuckets;t++)this.fresh.push(new Map);for(let t=0;t<this.options.maxBuckets;t++)this.used.push(new u);this.setSeeds(t.seeds),this.setNodes(t.nodes),this.pushLocal(this.address,e.MANUAL),this.addLocal(t.host,t.port,e.BIND)}async open(){try{await this.loadFile()}catch(t){this.logger.warning("Hosts deserialization failed."),this.logger.error(t)}0===this.size()&&this.injectSeeds(),await this.discoverNodes(),this.start()}async close(){this.stop(),await this.flush(),this.reset()}async loadFile(){}async flush(){}start(){this.options.persistent&&this.options.filename&&(r(null==this.timer),this.timer=a.setInterval(this.flush,this.options.flushInterval,this))}stop(){this.options.persistent&&this.options.filename&&(r(null!=this.timer),a.clearInterval(this.timer),this.timer=null)}injectSeeds(){for(const e of d.get(this.network.type)){var t=c.fromHostname(e,this.network);!t.isRoutable()||!this.options.onion&&t.isOnion()||0!==t.port&&this.add(t)}}size(){return this.totalFresh+this.totalUsed}isFull(){var t=this.options.maxBuckets*this.options.maxEntries;return this.size()>=t}reset(){this.map.clear();for(const t of this.fresh)t.clear();for(const t of this.used)t.reset();this.totalFresh=0,this.totalUsed=0,this.nodes.length=0}ban(t){this.banned.set(t,n.now())}unban(t){this.banned.delete(t)}clearBanned(){this.banned.clear()}isBanned(t){var e=this.banned.get(t);return null!=e&&!(n.now()>e+this.options.banTime&&(this.banned.delete(t),1))}getHost(){let t=null;if(0<this.totalFresh&&(t=this.fresh),0<this.totalUsed&&(0!==this.totalFresh&&0!==n.random(0,2)||(t=this.used)),!t)return null;var e=this.network.now();let i=1;for(;;){let s=n.random(0,t.length);var r=t[s];if(0!==r.size){let o;if(s=n.random(0,r.size),t===this.used)for(o=r.head;s--;)o=o.next;else for(o of r.values()){if(0===s)break;s--}if(n.random(0,1<<30)<i*o.chance(e)*(1<<30))return o;i*=1.2}}}freshBucket(t){var e,i=t.addr;t=t.src,i=i.raw,t=t.raw,e=m,i.copy(e,0),t.copy(e,32),i=e,t=l(i,4221880213)%this.fresh.length;return this.fresh[t]}usedBucket(t){return t=t.addr,t=l(t.raw,4221880213)%this.used.length,this.used[t]}add(t,e){r(0!==t.port);let i=this.map.get(t.hostname);if(i){var s=this.network.now();let o=7200,a=86400;if(e||(o=0),i.addr.services|=t.services,i.addr.services>>>=0,s-t.time<86400&&(a=3600),i.addr.time<t.time-a-o&&(i.addr.time=t.time,this.needsFlush=!0),i.addr.time&&t.time<=i.addr.time)return!1;if(i.used)return!1;if(r(0<i.refCount),i.refCount===w.MAX_REFS)return!1;r(i.refCount<w.MAX_REFS);let h=1;for(let t=0;t<i.refCount;t++)h*=2;if(0!==n.random(0,h))return!1}else{if(this.isFull())return!1;e=e||this.address,i=new y(t,e),this.totalFresh++}return!(s=this.freshBucket(i)).has(i.key())&&(s.size>=this.options.maxEntries&&this.evictFresh(s),s.set(i.key(),i),i.refCount++,this.map.set(i.key(),i),this.needsFlush=!0)}evictFresh(t){let e=null;for(const i of t.values())this.isStale(i)?(t.delete(i.key()),0==--i.refCount&&(this.map.delete(i.key()),this.totalFresh--)):(!e||i.addr.time<e.addr.time)&&(e=i);e&&(t.delete(e.key()),0==--e.refCount)&&(this.map.delete(e.key()),this.totalFresh--)}isStale(t){var e=this.network.now();return!(t.lastAttempt&&t.lastAttempt>=e-60)&&(t.addr.time>e+600||0===t.addr.time||e-t.addr.time>24*w.HORIZON_DAYS*60*60||0===t.lastSuccess&&t.attempts>=w.RETRIES||e-t.lastSuccess>24*w.MIN_FAIL_DAYS*60*60&&t.attempts>=w.MAX_FAILURES)}remove(t){var e=this.map.get(t);if(!e)return null;if(e.used){let t=e;for(r(0===e.refCount);t.prev;)t=t.prev;for(const i of this.used)if(i.head===t){i.remove(e),this.totalUsed--,t=null;break}r(!t)}else{for(const t of this.fresh)t.delete(e.key())&&e.refCount--;this.totalFresh--,r(0===e.refCount)}return this.map.delete(e.key()),e.addr}markAttempt(t){var e;(t=this.map.get(t))&&(e=this.network.now(),t.attempts++,t.lastAttempt=e)}markSuccess(t){var e;(t=this.map.get(t))&&1200<(e=this.network.now())-t.addr.time&&(t.addr.time=e)}markAck(t,e){var i=this.map.get(t);if(i&&(t=this.network.now(),i.addr.services|=e,i.addr.services>>>=0,i.lastSuccess=t,i.lastAttempt=t,i.attempts=0,!i.used)){let t;r(0<i.refCount);for(const e of this.fresh)e.delete(i.key())&&(i.refCount--,t=e);r(t),r(0===i.refCount),this.totalFresh--;const s=this.usedBucket(i);if(s.size<this.options.maxEntries)i.used=!0,s.push(i),this.totalUsed++;else{e=this.evictUsed(s);let n=this.freshBucket(e);n.size>=this.options.maxEntries&&(n=t),i.used=!0,s.replace(e,i),e.used=!1,n.set(e.key(),e),r(0===e.refCount),e.refCount++,this.totalFresh++}}}evictUsed(t){let e=t.head;for(let i=t.head;i;i=i.next)i.addr.time<e.addr.time&&(e=i);return e}toArray(){var t=[];for(const e of this.map.values())t.push(e.addr);return r.strictEqual(t.length,this.size()),t}addSeed(t){return(t=o.fromHostname(t,this.network.port)).type===o.types.DNS?(this.dnsSeeds.push(t),null):(t=c.fromHost(t.host,t.port,this.network),this.add(t),t)}addNode(t){return(t=o.fromHostname(t,this.network.port)).type===o.types.DNS?(this.dnsNodes.push(t),null):(t=c.fromHost(t.host,t.port,this.network),this.add(t),this.nodes.push(t),t)}removeNode(t){var e=o.fromHostname(t,this.network.port);for(let t=0;t<this.nodes.length;t++){var i=this.nodes[t];if(i.host===e.host&&i.port===e.port)return this.nodes.splice(t,1),!0}return!1}setSeeds(t){this.dnsSeeds.length=0;for(const e of t)this.addSeed(e)}setNodes(t){this.dnsNodes.length=0,this.nodes.length=0;for(const e of t)this.addNode(e)}addLocal(t,e,i){return(t=c.fromHost(t,e,this.network)).services=this.options.services,this.pushLocal(t,i)}pushLocal(t,e){return!!t.isRoutable()&&!this.local.has(t.hostname)&&(e=new b(t,e),this.local.set(t.hostname,e),!0)}getLocal(t){let e=-1,i=-1,r=null;if(t=t||this.address,0===this.local.size)return null;for(const n of this.local.values()){var s=t.getReachability(n.addr);s<e||(s>e||n.score>i)&&(e=s,i=n.score,r=n.addr)}return r.time=this.network.now(),r}markLocal(t){return!!(t=this.local.get(t.hostname))&&(t.score++,!0)}async discoverSeeds(){var t=[];for(const e of this.dnsSeeds)t.push(this.populateSeed(e));await Promise.all(t)}async discoverNodes(){var t=[];for(const e of this.dnsNodes)t.push(this.populateNode(e));await Promise.all(t)}async populateNode(t){0!==(t=await this.populate(t)).length&&(this.nodes.push(t[0]),this.add(t[0]))}async populateSeed(t){for(const e of await this.populate(t))this.add(e)}async populate(t){var e=[];let i;r(t.type===o.types.DNS,"Resolved host passed."),this.logger.info("Resolving host: %s.",t.host);try{i=await this.resolve(t.host)}catch(t){return this.logger.error(t),e}for(const r of i){var s=c.fromHost(r,t.port,this.network);e.push(s)}return e}toJSON(){var t=[],e=[],i=[];for(const e of this.map.values())t.push(e.toJSON());for(const t of this.fresh){var r=[];for(const e of t.keys())r.push(e);e.push(r)}for(const t of this.used){var s=[];for(let e=t.head;e;e=e.next)s.push(e.key());i.push(s)}return{version:w.VERSION,addrs:t,fresh:e,used:i}}fromJSON(t){var e=new Map,i=new Map;let s=0,n=0;var o=[],a=[];r(t&&"object"==typeof t),r(t.version===w.VERSION,"Bad address serialization version."),r(Array.isArray(t.addrs));for(const r of t.addrs){var h=y.fromJSON(r,this.network);let t=e.get(h.src.hostname);t||(t=h.src,e.set(t.hostname,t)),h.src=t,i.set(h.key(),h)}r(Array.isArray(t.fresh)),r(t.fresh.length<=this.options.maxBuckets,"Buckets mismatch.");for(const e of t.fresh){var c=new Map;for(const t of e){var l=i.get(t);r(l),0===l.refCount&&s++,l.refCount++,c.set(t,l)}r(c.size<=this.options.maxEntries,"Bucket size mismatch."),o.push(c)}r(o.length===this.fresh.length,"Buckets mismatch."),r(Array.isArray(t.used)),r(t.used.length<=this.options.maxBuckets,"Buckets mismatch.");for(const e of t.used){var f=new u;for(const t of e){var d=i.get(t);r(d),r(0===d.refCount),r(!d.used),d.used=!0,n++,f.push(d)}r(f.size<=this.options.maxEntries,"Bucket size mismatch."),a.push(f)}r(a.length===this.used.length,"Buckets mismatch.");for(const t of i.values())r(t.used||0<t.refCount);return this.map=i,this.fresh=o,this.totalFresh=s,this.used=a,this.totalUsed=n,this}static fromJSON(t,e){return new y(t).fromJSON(e)}}w.HORIZON_DAYS=30,w.RETRIES=3,w.MIN_FAIL_DAYS=7,w.MAX_FAILURES=10,w.MAX_REFS=8,w.VERSION=0,w.scores={NONE:0,IF:1,BIND:2,UPNP:3,HTTP:3,MANUAL:4,MAX:5};class y{constructor(t,e){this.addr=t||new c,this.src=e||new c,this.prev=null,this.next=null,this.used=!1,this.refCount=0,this.attempts=0,this.lastSuccess=0,this.lastAttempt=0,t&&this.fromOptions(t,e)}fromOptions(t,e){return r(t instanceof c),r(e instanceof c),this.addr=t,this.src=e,this}static fromOptions(t,e){return(new y).fromOptions(t,e)}key(){return this.addr.hostname}chance(t){let e=1;return t-this.lastAttempt<600&&(e*=.01),e*Math.pow(.66,Math.min(this.attempts,8))}inspect(){return{addr:this.addr,src:this.src,used:this.used,refCount:this.refCount,attempts:this.attempts,lastSuccess:n.date(this.lastSuccess),lastAttempt:n.date(this.lastAttempt)}}toJSON(){return{addr:this.addr.hostname,src:this.src.hostname,services:this.addr.services.toString(2),time:this.addr.time,attempts:this.attempts,lastSuccess:this.lastSuccess,lastAttempt:this.lastAttempt}}fromJSON(t,e){var i;return r(t&&"object"==typeof t),r("string"==typeof t.addr),r("string"==typeof t.src),this.addr.fromHostname(t.addr,e),null!=t.services&&(r("string"==typeof t.services),r(0<t.services.length),r(t.services.length<=32),i=parseInt(t.services,2),r(n.isU32(i)),this.addr.services=i),null!=t.time&&(r(n.isU64(t.time)),this.addr.time=t.time),null!=t.src&&(r("string"==typeof t.src),this.src.fromHostname(t.src,e)),null!=t.attempts&&(r(n.isU64(t.attempts)),this.attempts=t.attempts),null!=t.lastSuccess&&(r(n.isU64(t.lastSuccess)),this.lastSuccess=t.lastSuccess),null!=t.lastAttempt&&(r(n.isU64(t.lastAttempt)),this.lastAttempt=t.lastAttempt),this}static fromJSON(t,e){return(new y).fromJSON(t,e)}}function b(t,e){this.addr=t,this.score=e||0}class v{constructor(t){this.network=h.primary,this.logger=g.global,this.resolve=p.lookup,this.host="0.0.0.0",this.port=this.network.port,this.services=f.LOCAL_SERVICES,this.onion=!1,this.banTime=f.BAN_TIME,this.address=new c,this.address.services=this.services,this.address.time=this.network.now(),this.seeds=this.network.seeds,this.nodes=[],this.maxBuckets=20,this.maxEntries=50,this.prefix=null,this.filename=null,this.persistent=!1,this.flushInterval=12e4,t&&this.fromOptions(t)}fromOptions(t){var e;return r(t,"Options are required."),null!=t.node&&(r("object"==typeof t.node),this.node=t.node),null!=t.network&&(this.network=h.get(t.network),this.seeds=this.network.seeds,this.address.port=this.network.port,this.port=this.network.port),null!=t.logger&&(r("object"==typeof t.logger),this.logger=t.logger),null!=t.resolve&&(r("function"==typeof t.resolve),this.resolve=t.resolve),null!=t.banTime&&(r(0<=t.banTime),this.banTime=t.banTime),t.seeds&&(r(Array.isArray(t.seeds)),this.seeds=t.seeds),t.nodes&&(r(Array.isArray(t.nodes)),this.nodes=t.nodes),null!=t.host&&(r("string"==typeof t.host),e=o.toBuffer(t.host),this.host=o.toString(e),o.isRoutable(e))&&this.address.setHost(this.host),null!=t.port&&(r("number"==typeof t.port),r(0<t.port&&t.port<=65535),this.port=t.port,this.address.setPort(this.port)),null!=t.publicHost&&(r("string"==typeof t.publicHost),this.address.setHost(t.publicHost)),null!=t.publicPort&&(r("number"==typeof t.publicPort),r(0<t.publicPort&&t.publicPort<=65535),this.address.setPort(t.publicPort)),null!=t.services&&(r("number"==typeof t.services),this.services=t.services),null!=t.onion&&(r("boolean"==typeof t.onion),this.onion=t.onion),null!=t.maxBuckets&&(r("number"==typeof t.maxBuckets),this.maxBuckets=t.maxBuckets),null!=t.maxEntries&&(r("number"==typeof t.maxEntries),this.maxEntries=t.maxEntries),null!=t.persistent&&(r("boolean"==typeof t.persistent),this.persistent=t.persistent),null!=t.prefix&&(r("string"==typeof t.prefix),this.prefix=t.prefix,this.node&&this.node.spv?this.filename=s.join(this.prefix,"spvhosts.json"):this.filename=s.join(this.prefix,"hosts.json")),null!=t.filename&&(r("string"==typeof t.filename),this.filename=t.filename),null!=t.flushInterval&&(r(0<=t.flushInterval),this.flushInterval=t.flushInterval),this.address.time=this.network.now(),this.address.services=this.services,this}}t.exports=w}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * seeds.js - seeds for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(652),s=i(653);e.get=function(t){switch(t){case"main":return r;case"testnet":return s;default:return[]}}},function(t,e,i){"use strict";t.exports=[]},function(t,e,i){"use strict";t.exports=[]},function(t,e,i){"use strict";
/*!
 * PeerOptions.js - Peer Options for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */i(1),i(3),i(66),i(18),i(60),i(313)},function(t,e,i){"use strict";(function(e){
/*!
 * proxysocket.js
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1);var s=i(14);const n=i(610).io,o=i(3),a=i(8),h=i(20);class c extends s{constructor(t){super(),this.info=null,this.socket=n(t,{reconnection:!1,transports:["websocket"]}),this.sendBuffer=[],this.recvBuffer=[],this.paused=!1,this.snonce=null,this.bytesWritten=0,this.bytesRead=0,this.remoteAddress=null,this.remotePort=0,this.closed=!1,this._init()}_init(){this.socket.on("info",t=>{this.closed||((this.info=t).pow&&(this.snonce=e.from(t.snonce,"hex"),this.target=e.from(t.target,"hex")),this.emit("info",t))}),this.socket.on("error",t=>{console.error(t)}),this.socket.on("tcp connect",(t,e)=>{this.closed||(this.remoteAddress=t,this.remotePort=e,this.emit("connect"))}),this.socket.on("tcp data",t=>{t=e.from(t,"hex"),this.paused?this.recvBuffer.push(t):(this.bytesRead+=t.length,this.emit("data",t))}),this.socket.on("tcp close",t=>{this.closed||(this.closed=!0,this.emit("close"))}),this.socket.on("tcp error",t=>{var e=new Error(t.message);e.code=t.code,this.emit("error",e)}),this.socket.on("tcp timeout",()=>{this.emit("timeout")}),this.socket.on("disconnect",()=>{this.closed||(this.closed=!0,this.emit("close"))})}connect(t,e){if(this.remoteAddress=e,this.remotePort=t,this.closed)this.sendBuffer.length=0;else if(this.info){let n=0;if(this.info.pow){var i=new h,s=(i.writeU32(n),i.writeBytes(this.snonce),i.writeU32(t),i.writeString(e,"ascii"),i.render());for(o.log("Solving proof of work to create socket (%d, %s) -- please wait.",t,e);n++,r(n<=4294967295,"Could not create socket."),s.writeUInt32LE(n,0,!0),0<a.hash256(s).compare(this.target););o.log("Solved proof of work: %d",n)}this.socket.emit("tcp connect",t,e,n);for(const t of this.sendBuffer)this.write(t);this.sendBuffer.length=0}else this.once("info",this.connect.bind(this,t,e))}setKeepAlive(t,e){this.socket.emit("tcp keep alive",t,e)}setNoDelay(t){this.socket.emit("tcp no delay",t)}setTimeout(t,e){this.socket.emit("tcp set timeout",t),e&&this.on("timeout",e)}write(t,e){return this.info?(this.bytesWritten+=t.length,this.socket.emit("tcp data",t.toString("hex")),e&&e()):(this.sendBuffer.push(t),e&&e()),!0}pause(){this.paused=!0}resume(){var t=this.recvBuffer;this.paused=!1,this.recvBuffer=[];for(const e of t)this.bytesRead+=e.length,this.emit("data",e)}destroy(){this.closed||(this.closed=!0,this.socket.disconnect())}static connect(t,e,i){return(t=new c(t)).connect(e,i),t}}t.exports=c}).call(this,i(0).Buffer)},function(t,e,i){"use strict";
/*!
 * BroadcastItem.js - peer management for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1);var s=i(14);const n=i(3),o=i(36);i(58),i(312);const a=i(48).types;t.exports=class extends s{constructor(t,e){super(),r(!e.mutable,"Cannot broadcast mutable item.");var i=e.toInv();this.pool=t,this.hash=i.hash,this.type=i.type,this.msg=e,this.jobs=[]}addJob(t,e){this.jobs.push(o.job(t,e))}start(){return r(!this.timeout,"Already started."),r(!this.pool.hasInv(this.hash),"Already started."),this.pool.setInv(this.hash,this),this.refresh(),this}refresh(){null!=this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.timeout=setTimeout(()=>{this.emit("timeout"),this.reject(new Error("Timed out."))},this.pool.options.invTimeout)}announce(){switch(this.type){case a.TX:this.pool.announceTX(this.msg);break;case a.BLOCK:this.pool.announceBlock(this.msg);break;default:r(!1,"Bad type.")}}cleanup(){r(null!=this.timeout,"Already finished."),r(this.pool.hasInv(this.hash),"Already finished."),clearTimeout(this.timeout),this.timeout=null,this.pool.delInv(this.hash)}reject(t){this.cleanup();for(const e of this.jobs)e.reject(t);this.jobs.length=0}resolve(){this.cleanup();for(const t of this.jobs)t.resolve(!1);this.jobs.length=0}handleAck(t){setTimeout(()=>{this.emit("ack",t);for(const t of this.jobs)t.resolve(!0);this.jobs.length=0},500)}handleReject(t){this.emit("reject",t);for(const t of this.jobs)t.resolve(!1);this.jobs.length=0}inspect(){return`<BroadcastItem: type=${this.type===a.TX?"tx":"block"} hash=${n.revHex(this.hash)}>`}}},function(t,e,i){"use strict";(function(e){
/*!
 * PoolOptions.js - peer management for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1),s=i(3),n=i(53),o=i(66),a=i(23),h=i(18),c=i(313),u=i(309),l=i(658);function f(t){if(!(this instanceof f))return new f(t);this.network=h.primary,this.logger=null,this.node=null,this.chain=null,this.mempool=null,this.nonces=new l,this.prefix=null,this.checkpoints=!0,this.spv=!1,this.bip37=!1,this.listen=!1,this.compact=!0,this.noRelay=!1,this.host="0.0.0.0",this.port=this.network.port,this.publicHost="0.0.0.0",this.publicPort=this.network.port,this.maxOutbound=8,this.maxInbound=8,this.createSocket=this._createSocket.bind(this),this.createServer=c.createServer,this.resolve=this._resolve.bind(this),this.proxy=null,this.wsport=this.network.wsport,this.onion=!1,this.upnp=!1,this.selfish=!1,this.version=o.PROTOCOL_VERSION,this.agent=o.USER_AGENT,this.bip151=!1,this.bip150=!1,this.knownPeers=[],this.identityKey=a.generatePrivateKey(),this.banScore=o.BAN_SCORE,this.banTime=o.BAN_TIME,this.feeRate=-1,this.seeds=this.network.seeds,this.nodes=[],this.invTimeout=6e4,this.blockMode=0,this.services=o.LOCAL_SERVICES,this.requiredServices=o.REQUIRED_SERVICES,this.persistent=!1,this.fromOptions(t)}f.prototype.fromOptions=function(t){var i;return r(t,"Pool requires options."),r(t.node&&"object"==typeof t.node,"Pool options require a node."),r(t.node.chain&&"object"==typeof t.node.chain,"Pool options require a blockchain."),this.node=t.node,null!=this.node.mempool&&(r("object"==typeof this.node.mempool),this.mempool=this.node.mempool),this.chain=this.node.chain,this.network=this.chain.network,this.logger=this.chain.logger,this.port=this.network.port,this.seeds=this.network.seeds,this.port=this.network.port,this.publicPort=this.network.port,null!=t.logger&&(r("object"==typeof t.logger),this.logger=t.logger),null!=t.prefix&&(r("string"==typeof t.prefix),this.prefix=t.prefix),null!=t.checkpoints?(r("boolean"==typeof t.checkpoints),r(t.checkpoints===this.chain.options.checkpoints),this.checkpoints=t.checkpoints):this.checkpoints=this.chain.options.checkpoints,null!=t.spv?(r("boolean"==typeof t.spv),r(t.spv===this.chain.options.spv),this.spv=t.spv):this.spv=this.chain.options.spv,null!=t.bip37&&(r("boolean"==typeof t.bip37),this.bip37=t.bip37),null!=t.listen&&(r("boolean"==typeof t.listen),this.listen=t.listen),null!=t.compact&&(r("boolean"==typeof t.compact),this.compact=t.compact),null!=t.noRelay&&(r("boolean"==typeof t.noRelay),this.noRelay=t.noRelay),null!=t.host&&(r("string"==typeof t.host),i=n.toBuffer(t.host),this.host=n.toString(i),n.isRoutable(i))&&(this.publicHost=this.host),null!=t.port&&(r(s.isU16(t.port)),this.port=t.port,this.publicPort=t.port),null!=t.publicHost&&(r("string"==typeof t.publicHost),this.publicHost=n.normalize(t.publicHost)),null!=t.publicPort&&(r(s.isU16(t.publicPort)),this.publicPort=t.publicPort),null!=t.maxOutbound&&(r("number"==typeof t.maxOutbound),r(0<t.maxOutbound),this.maxOutbound=t.maxOutbound),null!=t.maxInbound&&(r("number"==typeof t.maxInbound),this.maxInbound=t.maxInbound),t.createSocket&&(r("function"==typeof t.createSocket),this.createSocket=t.createSocket),t.createServer&&(r("function"==typeof t.createServer),this.createServer=t.createServer),t.resolve&&(r("function"==typeof t.resolve),this.resolve=t.resolve),t.proxy&&(r("string"==typeof t.proxy),this.proxy=t.proxy),t.wsport&&(r("number"==typeof t.wsport),this.wsport=t.wsport),null!=t.onion&&(r("boolean"==typeof t.onion),this.onion=t.onion),null!=t.upnp&&(r("boolean"==typeof t.upnp),this.upnp=t.upnp),t.selfish&&(r("boolean"==typeof t.selfish),this.selfish=t.selfish),t.version&&(r("number"==typeof t.version),this.version=t.version),t.agent&&(r("string"==typeof t.agent),r(t.agent.length<=255),this.agent=t.agent),null!=t.bip151&&(r("boolean"==typeof t.bip151),this.bip151=t.bip151),null!=t.bip150&&(r("boolean"==typeof t.bip150),r(!t.bip150||this.bip151,"Cannot enable bip150 without bip151."),this.bip150=t.bip150,t.knownPeers&&(r(Array.isArray(t.knownPeers)),this.knownPeers=t.knownPeers),t.identityKey)&&(r(e.isBuffer(t.identityKey),"Identity key must be a buffer."),r(a.privateKeyVerify(t.identityKey),"Invalid identity key."),this.identityKey=t.identityKey),null!=t.banScore&&(r("number"==typeof this.options.banScore),this.banScore=this.options.banScore),null!=t.banTime&&(r("number"==typeof this.options.banTime),this.banTime=this.options.banTime),null!=t.feeRate&&(r("number"==typeof this.options.feeRate),this.feeRate=this.options.feeRate),t.seeds&&(r(Array.isArray(t.seeds)),this.seeds=t.seeds),t.nodes&&(r(Array.isArray(t.nodes)),this.nodes=t.nodes),null!=t.only&&(r(Array.isArray(t.only)),0<t.only.length)&&(this.nodes=t.only,this.maxOutbound=t.only.length),null!=t.invTimeout&&(r("number"==typeof t.invTimeout),this.invTimeout=t.invTimeout),null!=t.blockMode&&(r("number"==typeof t.blockMode),this.blockMode=t.blockMode),null!=t.persistent&&(r("boolean"==typeof t.persistent),this.persistent=t.persistent),this.spv&&(this.requiredServices|=o.services.BLOOM,this.services&=~o.services.NETWORK,this.noRelay=!0,this.checkpoints=!0,this.compact=!1,this.bip37=!1,this.listen=!1),this.selfish&&(this.services&=~o.services.NETWORK,this.bip37=!1),this.bip37&&(this.services|=o.services.BLOOM),this.proxy&&(this.listen=!1),null!=t.services&&(r(s.isU32(t.services)),this.services=t.services),null!=t.requiredServices&&(r(s.isU32(t.requiredServices)),this.requiredServices=t.requiredServices),this},f.fromOptions=function(t){return(new f).fromOptions(t)},f.prototype.getHeight=function(){return this.chain.height},f.prototype.isFull=function(){return this.chain.synced},f.prototype.getRequiredServices=function(){let t=this.requiredServices;return this.hasWitness()&&(t|=o.services.WITNESS),t},f.prototype.hasWitness=function(){return this.chain.state.hasWitness()},f.prototype.createNonce=function(t){return this.nonces.alloc(t)},f.prototype.hasNonce=function(t){return this.nonces.has(t)},f.prototype.getRate=function(t){return this.mempool&&(t=this.mempool.getEntry(t))?t.getRate():-1},f.prototype._createSocket=function(t,e){var i={proxy:this.proxy,wsport:this.wsport};return c.createSocket(t,e,i)},f.prototype._resolve=function(t){return this.onion?u.lookup(t,this.proxy):u.lookup(t)},t.exports=f}).call(this,i(0).Buffer)},function(t,e,i){const r=i(1),s=i(3);t.exports=class{constructor(){this.map=new Map,this.hosts=new Map}alloc(t){for(;;){var e=s.nonce(),i=e.toString("hex");if(!this.map.has(i))return this.map.set(i,t),r(!this.hosts.has(t)),this.hosts.set(t,i),e}}has(t){return t=t.toString("hex"),this.map.has(t)}remove(t){var e=this.hosts.get(t);return!!e&&(this.hosts.delete(t),r(this.map.has(e)),this.map.delete(e),!0)}}},function(t,e,i){"use strict";
/*!
 * PeerList.js - peer management for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(1);i(312);const s=i(167),n=i(53);t.exports=class{constructor(){this.map=new Map,this.ids=new Map,this.list=new s,this.load=null,this.inbound=0,this.outbound=0}head(){return this.list.head}tail(){return this.list.tail}size(){return this.list.size}add(t){r(this.list.push(t)),r(!this.map.has(t.hostname())),this.map.set(t.hostname(),t),r(!this.ids.has(t.id)),this.ids.set(t.id,t),t.outbound?this.outbound++:this.inbound++}remove(t){r(this.list.remove(t)),r(this.ids.has(t.id)),this.ids.delete(t.id),r(this.map.has(t.hostname())),this.map.delete(t.hostname()),t===this.load&&(r(t.loader),t.loader=!1,this.load=null),t.outbound?this.outbound--:this.inbound--}get(t){return this.map.get(t)}getbyhost(t){var e,i=n.fromHostname(t),r=[];for(e of this.map){var s=n.fromHostname(e[0]);i.host==s.host&&i.port==s.port&&r.push(e[1])}return r}getInbound(){var t,e=[];for(t of this.map)t.outbound||e.push(t[1]);return e}has(t){return this.map.has(t)}find(t){return this.ids.get(t)}destroy(){var t;for(let e=this.list.head;e;e=t)t=e.next,e.destroy()}}},function(t,e,i){"use strict";e.unsupported=!0},function(t,e,i){"use strict";
/*!
 * node/index.js - node for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */e.Config=i(538),e.FullNode=i(604),e.Logger=i(60),e.Node=i(206),e.SPVNode=i(606)},function(t,e,i){"use strict";
/*!
 * walletnode.js - wallet node for vallnet
 * Copyright (c) 2017-2020, Bookman Software (MIT License).
 */var r=i(206);const s=i(607),n=i(29),o=i(333),a=i(663).RPCW,h=i(103).encoding,c=i(108);t.exports=class extends r{constructor(t){t.spv=!0,t.nodeType="wallet",super(t),this.rpc=new a(this),this._init(),o.unsupported||(this.http=new o({network:this.network,logger:this.logger,node:this,prefix:this.config.prefix,ssl:this.config.bool("ssl"),keyFile:this.config.path("ssl-key"),certFile:this.config.path("ssl-cert"),host:this.config.str("http-host"),port:this.config.httpPort,apiKey:this.config.str("api-key")})),this.rescanJob=null,this.scanLock=new n,this.watchLock=new n,this.http&&this.http.init()}_init(){var t=(t=this.pool?this.pool.getOnlineHost():null)?`http://${t.host}:`+(t.port+2):`http://${this.config.str("http-remote-host")}:`+this.config.uint("http-remote-port",this.network.httpPort);this.conn_s2local=new s({network:this.config.network,apiKey:this.config.str("api-key"),mode:"relay",uri:t}),this.http&&this.http.on("error",t=>this.error(t)),this.loadPlugins()}async _open(){let t=this.config.str("genesis");t&&"string"==typeof(t="true"==t?[]:t.split(","))[2]&&(t[2]=parseInt(t[2]));var e=this.config.str("keystore"),i=this.config.str("password");let r=this.config.obj("mnemonic");(r=r||{}).password=r.password||i,r.network=this.network.type,r.file=e,t?(r.passphrase=t[0]||r.passphrase||h.MNEMONIC_SALT,r.language=t[1]||r.language||"english",r.bits=t[2]||r.bits||256):(r.passphrase=r.passphrase||h.MNEMONIC_SALT,r.language=r.language||"english",r.bits=r.bits||256),await this.openPlugins(r),(i=await c.readEncryptFile({password:i,network:this.config.network,file:e||`./${this.config.network}-genesis.keystore`}))&&(this.config.alliancePrivateKey=i.alliancePrivateKey,this.config.allianceName=i.allianceName,this.config.allianceNodeId=parseInt(i.allianceNodeId),this.config.notifyAddress=i.notifyAddress,i.allianceNodeToken)&&!this.config.identityKey&&(this.config.identityKey=i.allianceNodeToken.prv),await this.config.saveAsync(),this.http&&await this.http.open(),this.logger.info("Wallet Node is loaded.")}async _close(){this.http&&await this.http.close(),await this.closePlugins()}async scan(t,e,i){}async sendTX(t){this.emit("tx",t)}async relay(t){this.sendTX(t).catch(t=>{this.error(t)})}}},function(t,e,i){"use strict";
/*!
 * rpc/index.js 本目录下集中存放RPC路由管理/设定相关的文件：
 * 
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */e.RPCBase=i(65),e.RPC=i(334),e.RPCW=i(664)},function(t,e,i){
/*!
 * rpcw.js - bitcoind-compatible json rpc for vallnet wallet.
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */
const r=i(1);var s=i(65);const n=i(308).openapi;i(206);t.exports=class extends s{constructor(t){super(t),r(t,"RPC requires a Node."),this.node=t,this.keys=t.keys,this.workers=t.workers,this.chain=t.chain,this.mempool=t.mempool,this.pool=t.pool,this.fees=t.fees,this.logger=t.logger.context("rpcw"),this.mining=!1,this.procLimit=0,this.attempt=null,this.lastActivity=0,this.boundChain=!1,this.merkleMap=new Map,this.pollers=[],this.init()}init(){Object.values(n).map(t=>{this.add(t.name,async(e,i)=>this.node.conn_s2local.execute(t.name,e))})}get wallet(){return null}set wallet(t){}}},function(t,e,i){"use strict";
/*!
 * primitives/index.js - primitives for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */e.AbstractBlock=i(101),e.Address=i(13),e.Block=i(58),e.Coin=i(43),e.Headers=i(71),e.Input=i(100),e.InvItem=i(48),e.KeyRing=i(32),e.MemBlock=i(592),e.MerkleBlock=i(117),e.MTX=i(51),e.NetAddress=i(122),e.Outpoint=i(41),e.Output=i(25),e.TX=i(19),e.TXMeta=i(322)},function(t,e,i){"use strict";
/*!
 * protocol/index.js - protocol constants for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */e.consensus=i(9),e.errors=i(30),e.Network=i(18),e.networks=i(132),e.policy=i(26),e.timedata=i(225),e.general=i(137)},function(t,e,i){"use strict";
/*!
 * script/index.js - scripting for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */e.common=i(22),e.Opcode=i(152),e.Program=i(227),e.Script=i(16),e.ScriptError=i(99),e.ScriptNum=i(89),e.sigcache=i(608),e.Stack=i(114),e.Witness=i(115)},function(t,e,i){"use strict";
/*!
 * wallet/index.js - wallet for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */e.Account=i(146),e.common=i(55),e.layout=i(68),e.MasterKey=i(327),e.Path=i(96),e.plugin=i(669),e.TXDB=i(325),e.WalletDB=i(331),e.Wallet=i(105),e.WalletKey=i(205)},function(t,e,i){"use strict";
/*!
 * plugin.js - wallet plugin for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */const r=i(331),s=i(572);(i=e).id="walletdb",i.init=function(t){var e=t.config;e=new r({network:t.network,logger:t.logger,workers:t.workers,client:t.conn_s2local,jsonp:t.conn_s2remote,prefix:e.prefix,db:e.str("db"),coinCache:e.uint("coin-cache"),checkpoints:e.bool("wallet-checkpoints"),maxFiles:e.uint("wallet-max-files"),cacheSize:e.mb("wallet-cache-size"),startHeight:e.uint("wallet-start-height"),wipeNoReally:e.bool("wallet-wipe-no-really"),keys:{hmacSalt:e.buf("hmac-salt")},devMode:e.bool("dev-mode")||!1,acl:new s(e),apiKey:e.str("api-key"),ssl:e.bool("ssl"),host:e.str("http-host"),port:e.uint("http-remote-port",t.network.httpPort),spv:t.spv,nodeType:t.nodeType,verify:t.spv,listen:!1});return t.http&&e.http&&t.http.mount("/wallet",e.http),t.rpc&&e.rpc&&t.rpc.mount(e.rpc),e}},function(t,e,i){"use strict";t.exports=i(609)},function(t,e,i){const r=i(1),s=i(80),n=i(3),o=i(29),a=i(49),h=i(672);t.exports=class{constructor(t){this.network=t.network,this.logger=t.logger,this.location=s.resolve(t.prefix,"users.txt"),this.locker=new o,this.lastFail=0,this.stream=null,this.map=new Map,this.size=0}async open(){var t=await this.locker.lock();try{return await this._open()}finally{t()}}async _open(){await this.load()}async close(){var t=await this.locker.lock();try{return await this._close()}finally{t()}}async _close(){if(this.stream){try{this.stream.close()}catch(t){}this.stream=null}}load(){return new Promise((t,e)=>{this._load(t,e)})}_load(t,e){let i="",r=0,s=a.createReadStream(this.location,{flags:"r",encoding:"utf8",autoClose:!0});const n=()=>{if(s){try{s.close()}catch(t){}s=null}};s.on("error",i=>{s&&("ENOENT"===i.code?(n(),t()):(n(),e(i)))}),s.on("data",t=>{if(s)if(1e4<=(i+=t).length)n(),e(new Error(`UserDB parse error. Line: ${r}.`));else{t=i.split(/\n+/),i=t.pop();for(const i of t)if(r+=1,0!==i.length){let s,o;try{s=JSON.parse(i),o=h.fromJSON(s)}catch(t){return n(),void e(new Error(`UserDB parse error. Line: ${r}.`))}this.map.has(o.username)||(this.size+=1),this.map.set(o.username,o)}}}),s.on("end",()=>{s&&(this.logger.debug("Loaded %d users into memory.",this.size),s=null,t())})}get(t){return this.map.get(t)}has(t){return this.map.has(t)}add(t){t=new h(t),r(!this.map.has(t.username),"User already exists."),this.logger.debug("Adding new user (%s).",t.username),this.map.set(t.username,t),this.size+=1,this.write(t.toJSON())}setPassword(t,e){t=this.map.get(t),r(t,"User does not exist."),t.setPassword(e),this.write(t.toJSON())}write(t){var e=this.getStream();e&&(t=JSON.stringify(t)+"\n",e.write(t,"utf8"))}getStream(){if(!this.stream){if(this.lastFail>n.now()-10)return null;this.lastFail=0,this.stream=a.createWriteStream(this.location,{flags:"a"}),this.stream.on("error",t=>{this.logger.warning("UserDB file stream died!"),this.logger.error(t);try{this.stream.close()}catch(t){}this.stream=null,this.lastFail=n.now()})}return this.stream}}},function(t,e,i){(function(e){const r=i(1),s=i(8),n=i(4),{isUsername:o,isPassword:a,isHex:h}=i(218);t.exports=class{constructor(t){this.username="",this.password=n.ZERO_HASH,t&&this.fromOptions(t)}fromOptions(t){return r(t,"Options required."),r(o(t.username),"Username required."),r(t.hash||t.password,"Password required."),this.setUsername(t.username),null!=t.hash&&this.setHash(t.hash),null!=t.password&&this.setPassword(t.password),this}static fromOptions(t){return(new this).fromOptions(t)}setUsername(t){r(o(t),"Username must be a string."),this.username=t}setHash(t){"string"==typeof t?(r(h(t),"Hash must be a hex string."),r(64===t.length,"Hash must be 32 bytes."),this.password=e.from(t,"hex")):(r(e.isBuffer(t),"Hash must be a buffer."),r(32===t.length,"Hash must be 32 bytes."),this.password=t)}setPassword(t){r(a(t),"Password must be a string."),t=e.from(t,"utf8"),this.password=s.hash256(t)}toJSON(){return{username:this.username,password:this.password.toString("hex")}}fromJSON(t){return r(t),r("string"==typeof t.username),this.username=t.username,this.setHash(t.password),this}static fromJSON(t){return(new this).fromJSON(t)}}}).call(this,i(0).Buffer)},function(t,e,i){const r=i(1),{NONCE_SIZE:s,isJob:n,isUsername:o,isHex:a}=i(218);t.exports=class t{constructor(){this.username="",this.job="",this.nonce2=0,this.ts=0,this.nonce=0}static fromPacket(e){var i=new t;return r(5<=e.params.length,"Invalid parameters."),r(o(e.params[0]),"Name must be a string."),r(n(e.params[1]),"Job ID must be a string."),r("string"==typeof e.params[2],"Nonce2 must be a string."),r(e.params[2].length===2*s,"Nonce2 must be a string."),r(a(e.params[2]),"Nonce2 must be a string."),r("string"==typeof e.params[3],"Time must be a string."),r(8===e.params[3].length,"Time must be a string."),r(a(e.params[3]),"Time must be a string."),r("string"==typeof e.params[4],"Nonce must be a string."),r(8===e.params[4].length,"Nonce must be a string."),r(a(e.params[4]),"Nonce must be a string."),i.username=e.params[0],i.job=e.params[1],i.nonce2=parseInt(e.params[2],16),i.ts=parseInt(e.params[3],16),i.nonce=parseInt(e.params[4],16),i}}},function(t,e){t.exports=class{constructor(t,e){this.code=t,this.reason=e}}},function(t,e,i){const r=i(1),s=i(4),n=i(218).hex32;i(129),t.exports=class{constructor(t){r("string"==typeof t),this.id=t,this.attempt=null,this.target=s.ZERO_HASH,this.difficulty=0,this.submissions={},this.committed=!1,this.prev=null,this.next=null}fromTemplate(t){return this.attempt=t,this.attempt.refresh(),this.target=t.target,this.difficulty=t.getDifficulty(),this}static fromTemplate(t,e){return new this(t).fromTemplate(e)}insert(t){return t=t.toString("hex"),!this.submissions[t]&&(this.submissions[t]=!0)}check(t,e){var i=e.nonce2,r=e.ts;e=e.nonce;return this.attempt.getProof(t,i,r,e)}commit(t){return r(!this.committed,"Already committed."),this.committed=!0,this.attempt.commit(t)}toJSON(){return[this.id,this.attempt.prevBlock,this.attempt.left.toString("hex"),this.attempt.right.toString("hex"),this.attempt.tree.toJSON(),n(this.attempt.version),n(this.attempt.bits),n(this.attempt.time),!1]}}},function(t,e,i){const r=i(1),s=i(80),n=i(3),o=i(49);t.exports=class{constructor(t){this.network=t.network,this.logger=t.logger,this.location=s.resolve(t.prefix,"shares"),this.map=Object.create(null),this.total=0,this.size=0}async open(){await o.mkdirp(this.location)}async close(){}file(t){return t=t.height+"-"+t.rhash(),s.resolve(this.location,t+".json")}add(t,e){this.map[t]||(this.map[t]=0,this.size++),this.map[t]+=e,this.total+=e}clear(){this.map=Object.create(null),this.size=0,this.total=0}async commit(t,e){var i=(s=e.txs[0]).outputs[0].getAddress(),s=(e=(r(i),{network:this.network.type,height:t.height,block:e.rhash(),ts:e.ts,time:n.now(),txid:s.txid(),address:i.toBase58(this.network),reward:s.getOutputValue(),size:this.size,total:this.total,shares:this.map}),i=(this.clear(),this.file(t)),JSON.stringify(e,null,2));this.logger.info("Committing %d payouts to disk for block %d (file=%s).",e.size,t.height,i),o.unsupported||await o.writeFile(i,s)}}},function(t,e,i){(function(e){const r=i(1),s=i(44).StringDecoder;var n=i(14);const o=i(131).format,a=i(29),h=i(53),c=i(678),{SHARES_PER_MINUTE:u,BAN_SCORE:l}=i(218);i(609);t.exports=class extends n{constructor(t,e){super(),this.locker=new a,this.stratum=t,this.logger=t.logger,this.socket=e,this.host=h.normalize(e.remoteAddress),this.port=e.remotePort,this.hostname=h.toHostname(this.host,this.port),this.decoder=new s("utf8"),this.agent="",this.recv="",this.admin=!1,this.users=new Set,this.sid=-1,this.difficulty=-1,this.nextDifficulty=-1,this.banScore=0,this.lastBan=0,this.drainSize=0,this.destroyed=!1,this.lastRetarget=-1,this.submissions=0,this.prev=null,this.next=null,this._init()}_init(){this.on("packet",async t=>{try{await this.readPacket(t)}catch(t){this.error(t)}}),this.socket.on("data",t=>{this.feed(t)}),this.socket.on("error",t=>{this.emit("error",t)}),this.socket.on("close",()=>{this.error("Socket hangup."),this.destroy()}),this.socket.on("drain",()=>{this.drainSize=0})}destroy(){this.destroyed||(this.destroyed=!0,this.locker.destroy(),this.socket.destroy(),this.socket=null,this.emit("close"))}send(t){this.destroyed||(t=JSON.stringify(t),this.write(t+="\n"))}write(t){this.destroyed||!1===this.socket.write(t,"utf8")&&(this.drainSize+=e.byteLength(t,"utf8"),this.drainSize>5<<20)&&(this.logger.warning("Client is not reading (%s).",this.id()),this.destroy())}error(t){this.destroyed||(t instanceof Error?(t.message+=` (${this.id()})`,this.emit("error",t)):(t=o.apply(null,arguments),t+=` (${this.id()})`,this.emit("error",new Error(t))))}redirect(){var t=["HTTP/1.1 200 OK",`X-Stratum: stratum+tcp://${this.stratum.options.host}:`+this.stratum.options.port,"Connection: Close","Content-Type: application/json; charset=utf-8","Content-Length: 38","","",'{"error":null,"result":false,"id":0}'];this.write(t.join("\r\n")),this.logger.debug("Redirecting client (%s).",this.id()),this.destroy()}feed(t){if(this.recv+=this.decoder.write(t),1e5<=this.recv.length)this.error("Too much data buffered (%s).",this.id()),this.destroy();else if(/HTTP\/1\.1/i.test(this.recv))this.redirect();else{t=this.recv.replace(/\r+/g,"").split(/\n+/),this.recv=t.pop();for(const e of t)if(0!==e.length){let i;try{i=c.fromRaw(e)}catch(t){this.error(t);continue}this.emit("packet",i)}}}async readPacket(t){var e=await this.locker.lock();try{this.socket.pause(),await this.handlePacket(t)}finally{this.destroyed||this.socket.resume(),e()}}async handlePacket(t){return this.stratum.handlePacket(this,t)}addUser(t){return!this.users.has(t)&&(this.users.add(t),!0)}hasUser(t){return this.users.has(t)}increaseBan(t){var e=Date.now();this.banScore*=Math.pow(1-1/6e4,e-this.lastBan),this.banScore+=t,this.lastBan=e,this.banScore>=l&&(this.logger.debug("Ban score exceeds threshold %d (%s).",this.banScore,this.id()),this.ban())}ban(){this.emit("ban")}sendError(t,e,i){this.logger.spam("Sending error %s (%s).",i,this.id()),this.send({id:t.id,result:null,error:[e,i,!1]})}sendResponse(t,e){this.logger.spam("Sending response %s (%s).",t.id,this.id()),this.send({method:t.method,id:t.id,result:e,error:null})}sendMethod(t,e){this.logger.spam("Sending method %s (%s).",t,this.id()),this.send({id:null,method:t,params:e})}sendDifficulty(t){r(0<t,"Difficulty must be at least 1."),this.logger.debug("Setting difficulty=%d for client (%s).",t,this.id()),this.sendMethod("mining.set_difficulty",[t])}setDifficulty(t){this.nextDifficulty=t}sendJob(t){this.logger.debug("Sending job %s to client (%s).",t.id,this.id()),-1!==this.nextDifficulty&&(this.submissions=0,this.lastRetarget=Date.now(),this.sendDifficulty(this.nextDifficulty),this.difficulty=this.nextDifficulty,this.nextDifficulty=-1),this.sendMethod("mining.notify",t.toJSON())}retarget(t){var e=Date.now(),i=u;if(r(0<this.difficulty),r(-1!==this.lastRetarget),this.submissions+=1,this.submissions%i!=0)return!1;{i=this.submissions/i*6e4;let r=e-this.lastRetarget;return e=4294967296/this.difficulty,-1>>>0<t&&(t=-1>>>0),!(Math.abs(i-r)<=5e3)&&(e=4294967296/(e*(r=(r=r<i/4?i/4:r)>4*i?4*i:r)/i),e>>>=0,e=Math.min(t,e),e=Math.max(1,e),this.setDifficulty(e),!0)}}id(){let t=this.host;return this.agent&&(t+="/"+this.agent),t}}}).call(this,i(0).Buffer)},function(t,e,i){const r=i(1);t.exports=class t{constructor(){this.id=null,this.method="unknown",this.params=[]}static fromRaw(e){var i=new t;try{var s=JSON.parse(e);null!=s.id&&(r("string"==typeof s.id||"number"==typeof s.id),i.id=s.id),r("string"==typeof s.method),r(s.method.length<=50),i.method=s.method,s.params&&(r(Array.isArray(s.params)),i.params=s.params)}catch(e){}return i}}},function(t,e,i){(function(e){const r=i(1),s=i(80),n=i(209),o=i(8),a=i(18),h=i(60),c=i(218).isPassword;t.exports=class{constructor(t){this.node=null,this.chain=null,this.logger=h.global,this.network=a.primary,this.host="0.0.0.0",this.port=this.network.stratumPort,this.maxInbound=50,this.difficulty=545259519,this.dynamic=!0,this.prefix=s.resolve(n.homedir(),".gamegold","stratum"),this.password=null,this.fromOptions(t)}fromOptions(t){return r(t,"Options are required."),r(t.node&&"object"==typeof t.node,"Node is required."),this.node=t.node,this.chain=this.node.chain,this.network=this.node.network,this.logger=this.node.logger,this.prefix=this.node.location("stratum"),null!=t.host&&(r("string"==typeof t.host),this.host=t.host),null!=t.port&&(r("number"==typeof t.port),this.port=t.port),null!=t.maxInbound&&(r("number"==typeof t.maxInbound),this.maxInbound=t.maxInbound),null!=t.difficulty&&(r("number"==typeof t.difficulty),this.difficulty=t.difficulty),null!=t.dynamic&&(r("boolean"==typeof t.dynamic),this.dynamic=t.dynamic),null!=t.password&&(r(c(t.password)),this.password=o.hash256(e.from(t.password,"utf8"))),this}static fromOptions(t){return(new this).fromOptions(t)}}}).call(this,i(0).Buffer)},function(t,e,i){"use strict";const r=i(67);function s(t,e){if(t===e)return 1;if(t.length===e.length){for(let i=0,r=t.length;i<r;++i)if(t[i]!==e[i])return;return 1}}function n(t,e){if(!(e instanceof Uint8Array))throw new TypeError(t+" is not a Uint8Array")}i=i(14).EventEmitter;class o extends i{constructor(t={}){super(),this.localNodeId=t.localNodeId||r(20),this.numberOfNodesPerKBucket=t.numberOfNodesPerKBucket||20,this.numberOfNodesToPing=t.numberOfNodesToPing||3,this.distance=t.distance||o.distance,this.arbiter=t.arbiter||o.arbiter,this.metadata=Object.assign({},t.metadata),n("option.localNodeId as parameter 1",this.localNodeId),this.root={contacts:[],dontSplit:!1,left:null,right:null}}static arbiter(t,e){return t.vectorClock>e.vectorClock?t:e}static distance(t,e){let i=0,r=0;for(var s=Math.min(t.length,e.length),n=Math.max(t.length,e.length);r<s;++r)i=256*i+(t[r]^e[r]);for(;r<n;++r)i=256*i+255;return i}add(t){n("contact.id",(t||{}).id);let e=0,i=this.root;for(;null===i.contacts;)i=this._determineNode(i,t.id,e++);var r=this._indexOf(i,t.id);return 0<=r?(this._update(i,r,t),this):i.contacts.length<this.numberOfNodesPerKBucket?(i.contacts.push(t),this.emit("added",t),this):i.dontSplit?(this.emit("ping",i.contacts.slice(0,this.numberOfNodesToPing),t),this):(this._split(i,e),this.add(t))}closest(t,e=1/0){if(n("id",t),!Number.isInteger(e)&&e!==1/0||e<=0)throw new TypeError("n is not positive number");let i=[];for(let n=[this.root],o=0;0<n.length&&i.length<e;){var r,s=n.pop();null===s.contacts?(r=this._determineNode(s,t,o++),n.push(s.left===r?s.right:s.left),n.push(r)):i=i.concat(s.contacts)}return i.map(e=>[this.distance(e.id,t),e]).sort((t,e)=>t[0]-e[0]).slice(0,e).map(t=>t[1])}count(){let t=0;for(var e=[this.root];0<e.length;){var i=e.pop();null===i.contacts?e.push(i.right,i.left):t+=i.contacts.length}return t}_determineNode(t,e,i){var r=i>>3;i%=8;return!(e.length<=r&&0!=i)&&e[r]&1<<7-i?t.right:t.left}get(t){n("id",t);let e=0,i=this.root;for(;null===i.contacts;)i=this._determineNode(i,t,e++);var r=this._indexOf(i,t);return 0<=r?i.contacts[r]:null}_indexOf(t,e){for(let i=0;i<t.contacts.length;++i)if(s(t.contacts[i].id,e))return i;return-1}remove(t){n("the id as parameter 1",t);let e=0,i=this.root;for(;null===i.contacts;)i=this._determineNode(i,t,e++);var r=this._indexOf(i,t);return 0<=r&&(r=i.contacts.splice(r,1)[0],this.emit("removed",r)),this}_split(t,e){t.left={contacts:[],dontSplit:!1,left:null,right:null},t.right={contacts:[],dontSplit:!1,left:null,right:null};for(const i of t.contacts)this._determineNode(t,i.id,e).contacts.push(i);t.contacts=null;var i=this._determineNode(t,this.localNodeId,e);(t.left===i?t.right:t.left).dontSplit=!0}toArray(){let t=[];for(var e=[this.root];0<e.length;){var i=e.pop();null===i.contacts?e.push(i.right,i.left):t=t.concat(i.contacts)}return t}_update(t,e,i){if(!s(t.contacts[e].id,i.id))throw new Error("wrong index for _update");var r=t.contacts[e],n=this.arbiter(r,i);n===r&&r!==i||(t.contacts.splice(e,1),t.contacts.push(n),this.emit("updated",r,n))}}t.exports=o},function(t,e,i){"use strict";
/*!
 * workers/index.js - workers for vallnet
 * Copyright (c) 2019-2022, Bookman Software (MIT License).
 * https://github.com/bookmansoft/gamegold
 */e.Framer=i(217),e.jobs=i(144),e.packets=i(107),e.Parser=i(216),e.WorkerPool=i(214)}]);